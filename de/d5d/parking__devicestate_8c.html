<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: parking_devicestate.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li><li class="navelem"><a class="el" href="../../dir_d2f3489fa5a5f753d9a5f9cd50bb6a1c.html">parking</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">parking_devicestate.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Call Parking Device State Management.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d38/res__parking_8h_source.html">res_parking.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/da2/devicestate_8h_source.html">asterisk/devicestate.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for parking_devicestate.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/d11/parking__devicestate_8c__incl.png" border="0" usemap="#parking__devicestate_8c" alt=""/></div>
<map name="parking__devicestate_8c" id="parking__devicestate_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="1559,80,1643,107"/>
<area shape="rect" id="node22" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1393,80,1520,107"/>
<area shape="rect" id="node24" href="../../d3/d38/res__parking_8h.html" title="Call Parking Resource Internal API. " alt="" coords="1955,80,2063,107"/>
<area shape="rect" id="node31" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="3142,453,3305,480"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="1513,229,1667,256"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="711,155,848,181"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="1481,155,1616,181"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="1517,304,1663,331"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1236,229,1379,256"/>
<area shape="rect" id="node23" href="../../d7/d5b/options_8h.html" title="Options provided by main asterisk program. " alt="" coords="1323,155,1457,181"/>
<area shape="rect" id="node25" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="2477,379,2588,405"/>
<area shape="rect" id="node36" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="1997,229,2125,256"/>
<area shape="rect" id="node42" href="../../d2/d33/parking_8h.html" title="Call Parking API. " alt="" coords="2047,155,2181,181"/>
<area shape="rect" id="node43" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1754,379,1943,405"/>
<area shape="rect" id="node26" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1993,453,2131,480"/>
<area shape="rect" id="node27" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="2314,528,2461,555"/>
<area shape="rect" id="node28" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2090,528,2247,555"/>
<area shape="rect" id="node30" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="2623,453,2749,480"/>
<area shape="rect" id="node32" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="2773,453,2953,480"/>
<area shape="rect" id="node33" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="2977,453,3117,480"/>
<area shape="rect" id="node34" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="2207,453,2341,480"/>
<area shape="rect" id="node35" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="2467,453,2598,480"/>
<area shape="rect" id="node29" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1871,528,1997,555"/>
<area shape="rect" id="node37" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="1968,379,2156,405"/>
<area shape="rect" id="node38" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="1793,304,1979,331"/>
<area shape="rect" id="node39" href="../../dd/dff/bridge__roles_8h.html" title="Channel Bridging Roles API. " alt="" coords="2143,304,2309,331"/>
<area shape="rect" id="node40" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="2333,304,2444,331"/>
<area shape="rect" id="node41" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="2003,304,2118,331"/>
</map>
</div>
</div>
<p><a href="../../de/d5d/parking__devicestate_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d5e/structparking__lot__extension__inuse__search.html">parking_lot_extension_inuse_search</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4620c222aced442fc4b93852f920dc80"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d5d/parking__devicestate_8c.html#a4620c222aced442fc4b93852f920dc80">load_parking_devstate</a> (void)</td></tr>
<tr class="memdesc:a4620c222aced442fc4b93852f920dc80"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register Parking devstate handler.  <a href="#a4620c222aced442fc4b93852f920dc80">More...</a><br /></td></tr>
<tr class="separator:a4620c222aced442fc4b93852f920dc80"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a803092f58ccdc8d7562ed7c5f2151380"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d5d/parking__devicestate_8c.html#a803092f58ccdc8d7562ed7c5f2151380">metermaidstate</a> (const char *data)</td></tr>
<tr class="separator:a803092f58ccdc8d7562ed7c5f2151380"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc87d64e18b33608ff5df5139af7bfb8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d5d/parking__devicestate_8c.html#afc87d64e18b33608ff5df5139af7bfb8">parking_lot_search_context_extension_inuse</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:afc87d64e18b33608ff5df5139af7bfb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10dc7f5cda134b9fa64512ee7dbe48fd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d5d/parking__devicestate_8c.html#a10dc7f5cda134b9fa64512ee7dbe48fd">parking_notify_metermaids</a> (int <a class="el" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, const char *<a class="el" href="../../da/dde/chan__phone_8c.html#a579ca8125bbf48d9ce8691d522f99933">context</a>, enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="memdesc:a10dc7f5cda134b9fa64512ee7dbe48fd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify metermaids that we've changed an extension.  <a href="#a10dc7f5cda134b9fa64512ee7dbe48fd">More...</a><br /></td></tr>
<tr class="separator:a10dc7f5cda134b9fa64512ee7dbe48fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc780a1e6ca315ff0e0d3c7b071f4b9e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d5d/parking__devicestate_8c.html#abc780a1e6ca315ff0e0d3c7b071f4b9e">retrieve_parked_user_targeted</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:abc780a1e6ca315ff0e0d3c7b071f4b9e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88e153334f4a3a88b055bed527f446ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d5d/parking__devicestate_8c.html#a88e153334f4a3a88b055bed527f446ad">unload_parking_devstate</a> (void)</td></tr>
<tr class="memdesc:a88e153334f4a3a88b055bed527f446ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister Parking devstate handler.  <a href="#a88e153334f4a3a88b055bed527f446ad">More...</a><br /></td></tr>
<tr class="separator:a88e153334f4a3a88b055bed527f446ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Call Parking Device State Management. </p>
<dl class="section author"><dt>Author</dt><dd>Jonathan Rose <a href="#" onclick="location.href='mai'+'lto:'+'jro'+'se'+'@di'+'gi'+'um.'+'co'+'m'; return false;">jrose<span style="display: none;">.nosp@m.</span>@dig<span style="display: none;">.nosp@m.</span>ium.c<span style="display: none;">.nosp@m.</span>om</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html">parking_devicestate.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a4620c222aced442fc4b93852f920dc80"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4620c222aced442fc4b93852f920dc80">&#9670;&nbsp;</a></span>load_parking_devstate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int load_parking_devstate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register Parking devstate handler. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00121">121</a> of file <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html">parking_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00391">ast_devstate_prov_add()</a>, and <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00077">metermaidstate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d45/res__parking_8c_source.html#l01207">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;{</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a>(<span class="stringliteral">&quot;Park&quot;</span>, <a class="code" href="../../de/d5d/parking__devicestate_8c.html#a803092f58ccdc8d7562ed7c5f2151380">metermaidstate</a>);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;}</div><div class="ttc" id="parking__devicestate_8c_html_a803092f58ccdc8d7562ed7c5f2151380"><div class="ttname"><a href="../../de/d5d/parking__devicestate_8c.html#a803092f58ccdc8d7562ed7c5f2151380">metermaidstate</a></div><div class="ttdeci">static enum ast_device_state metermaidstate(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5d/parking__devicestate_8c_source.html#l00077">parking_devicestate.c:77</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae832fcc32c88962e73025ffeafe2961e"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a></div><div class="ttdeci">int ast_devstate_prov_add(const char *label, ast_devstate_prov_cb_type callback)</div><div class="ttdoc">Add device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00391">devicestate.c:391</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a803092f58ccdc8d7562ed7c5f2151380"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a803092f58ccdc8d7562ed7c5f2151380">&#9670;&nbsp;</a></span>metermaidstate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> metermaidstate </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00077">77</a> of file <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html">parking_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00055">AST_DEVICE_INUSE</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00057">AST_DEVICE_INVALID</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00054">AST_DEVICE_NOT_INUSE</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00032">parking_lot_extension_inuse_search::context</a>, <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00033">parking_lot_extension_inuse_search::exten</a>, <a class="el" href="../../d7/d45/res__parking_8c_source.html#l00596">get_parking_lot_container()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00047">parking_lot_search_context_extension_inuse()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00121">load_parking_devstate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *global_lots = <a class="code" href="../../d3/d38/res__parking_8h.html#a58b53672752610716a514d4da2f89bec">get_parking_lot_container</a>();</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/de7/structparking__lot.html">parking_lot</a> *, lot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d5e/structparking__lot__extension__inuse__search.html">parking_lot_extension_inuse_search</a> search = {};</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   context = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   exten = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;context, <span class="stringliteral">&quot;@&quot;</span>);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(exten)) {</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   search.<a class="code" href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a1f27749679e8054ef014a38569492895">context</a> = <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   <span class="keywordflow">if</span> (sscanf(exten, <span class="stringliteral">&quot;%d&quot;</span>, &amp;search.<a class="code" href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a8a294183ec06301b80a01b3f3a5c1178">exten</a>) != 1) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;   }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Checking state of exten %d in context %s\n&quot;</span>, search.<a class="code" href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a8a294183ec06301b80a01b3f3a5c1178">exten</a>, context);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   lot = <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(global_lots, 0, <a class="code" href="../../de/d5d/parking__devicestate_8c.html#afc87d64e18b33608ff5df5139af7bfb8">parking_lot_search_context_extension_inuse</a>, &amp;data);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <span class="keywordflow">if</span> (!lot) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;   }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;}</div><div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__parking_8h_html_a58b53672752610716a514d4da2f89bec"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html#a58b53672752610716a514d4da2f89bec">get_parking_lot_container</a></div><div class="ttdeci">struct ao2_container * get_parking_lot_container(void)</div><div class="ttdoc">Get a pointer to the parking lot container for purposes such as iteration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d45/res__parking_8c_source.html#l00596">res_parking.c:596</a></div></div>
<div class="ttc" id="parking__devicestate_8c_html_afc87d64e18b33608ff5df5139af7bfb8"><div class="ttname"><a href="../../de/d5d/parking__devicestate_8c.html#afc87d64e18b33608ff5df5139af7bfb8">parking_lot_search_context_extension_inuse</a></div><div class="ttdeci">static int parking_lot_search_context_extension_inuse(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5d/parking__devicestate_8c_source.html#l00047">parking_devicestate.c:47</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structparking__lot__extension__inuse__search_html"><div class="ttname"><a href="../../d0/d5e/structparking__lot__extension__inuse__search.html">parking_lot_extension_inuse_search</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5d/parking__devicestate_8c_source.html#l00031">parking_devicestate.c:31</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="structparking__lot_html"><div class="ttname"><a href="../../d4/de7/structparking__lot.html">parking_lot</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00092">res_parking.h:92</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structparking__lot__extension__inuse__search_html_a1f27749679e8054ef014a38569492895"><div class="ttname"><a href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a1f27749679e8054ef014a38569492895">parking_lot_extension_inuse_search::context</a></div><div class="ttdeci">char * context</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5d/parking__devicestate_8c_source.html#l00032">parking_devicestate.c:32</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
<div class="ttc" id="structparking__lot__extension__inuse__search_html_a8a294183ec06301b80a01b3f3a5c1178"><div class="ttname"><a href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a8a294183ec06301b80a01b3f3a5c1178">parking_lot_extension_inuse_search::exten</a></div><div class="ttdeci">int exten</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5d/parking__devicestate_8c_source.html#l00033">parking_devicestate.c:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afc87d64e18b33608ff5df5139af7bfb8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc87d64e18b33608ff5df5139af7bfb8">&#9670;&nbsp;</a></span>parking_lot_search_context_extension_inuse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int parking_lot_search_context_extension_inuse </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00047">47</a> of file <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html">parking_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d3/d38/res__parking_8h_source.html#l00096">parking_lot::cfg</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00032">parking_lot_extension_inuse_search::context</a>, <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00033">parking_lot_extension_inuse_search::exten</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d38/res__parking_8h_source.html#l00041">PARK_UNSET</a>, <a class="el" href="../../d3/d38/res__parking_8h_source.html#l00095">parking_lot::parked_users</a>, <a class="el" href="../../d3/d38/res__parking_8h_source.html#l00089">parking_lot_cfg::parking_con</a>, <a class="el" href="../../d3/d38/res__parking_8h_source.html#l00066">parking_lot_cfg::parking_start</a>, <a class="el" href="../../d3/d38/res__parking_8h_source.html#l00067">parking_lot_cfg::parking_stop</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00036">retrieve_parked_user_targeted()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00077">metermaidstate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/de7/structparking__lot.html">parking_lot</a> *lot = obj;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d5e/structparking__lot__extension__inuse__search.html">parking_lot_extension_inuse_search</a> *search = arg;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d7e/structparked__user.html">parked_user</a> *, <a class="code" href="../../d8/dbc/structuser.html">user</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;   <span class="keywordflow">if</span> (strcmp(lot-&gt;<a class="code" href="../../d4/de7/structparking__lot.html#abc61ea46020e75f93d5d46df84b91fcc">cfg</a>-&gt;<a class="code" href="../../d3/d86/structparking__lot__cfg.html#ad96d18d528bbb423da43efb31716d893">parking_con</a>, search-&gt;<a class="code" href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a1f27749679e8054ef014a38569492895">context</a>)) {</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   }</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;   <span class="keywordflow">if</span> ((search-&gt;<a class="code" href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a8a294183ec06301b80a01b3f3a5c1178">exten</a> &lt; lot-&gt;<a class="code" href="../../d4/de7/structparking__lot.html#abc61ea46020e75f93d5d46df84b91fcc">cfg</a>-&gt;<a class="code" href="../../d3/d86/structparking__lot__cfg.html#a22b6d3f18ce27630b9f7220cd3639e48">parking_start</a>) || (search-&gt;<a class="code" href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a8a294183ec06301b80a01b3f3a5c1178">exten</a> &gt; lot-&gt;<a class="code" href="../../d4/de7/structparking__lot.html#abc61ea46020e75f93d5d46df84b91fcc">cfg</a>-&gt;<a class="code" href="../../d3/d86/structparking__lot__cfg.html#ac6c6bea761c82a98ef22c655cfbf5a56">parking_stop</a>)) {</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   }</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   <a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(lot-&gt;<a class="code" href="../../d4/de7/structparking__lot.html#aea5a92769425a243bac168470b7f6a2f">parked_users</a>, 0, <a class="code" href="../../de/d5d/parking__devicestate_8c.html#abc780a1e6ca315ff0e0d3c7b071f4b9e">retrieve_parked_user_targeted</a>, &amp;search-&gt;<a class="code" href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a8a294183ec06301b80a01b3f3a5c1178">exten</a>);</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/dbc/structuser.html">user</a>) {</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   }</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(<a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d8/dbc/structuser.html">user</a>-&gt;resolution != <a class="code" href="../../d3/d38/res__parking_8h.html#a0adf36a104bea7f61062029a9516ee15acdc96f7a1979f13d5a98216dae66ae42">PARK_UNSET</a>) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <span class="comment">/* The parked user isn&#39;t in an answerable state. */</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   }</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(<a class="code" href="../../d8/dbc/structuser.html">user</a>);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div><div class="ttc" id="structparking__lot_html_aea5a92769425a243bac168470b7f6a2f"><div class="ttname"><a href="../../d4/de7/structparking__lot.html#aea5a92769425a243bac168470b7f6a2f">parking_lot::parked_users</a></div><div class="ttdeci">struct ao2_container * parked_users</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00095">res_parking.h:95</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structparking__lot__cfg_html_a22b6d3f18ce27630b9f7220cd3639e48"><div class="ttname"><a href="../../d3/d86/structparking__lot__cfg.html#a22b6d3f18ce27630b9f7220cd3639e48">parking_lot_cfg::parking_start</a></div><div class="ttdeci">int parking_start</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00066">res_parking.h:66</a></div></div>
<div class="ttc" id="res__parking_8h_html_a0adf36a104bea7f61062029a9516ee15acdc96f7a1979f13d5a98216dae66ae42"><div class="ttname"><a href="../../d3/d38/res__parking_8h.html#a0adf36a104bea7f61062029a9516ee15acdc96f7a1979f13d5a98216dae66ae42">PARK_UNSET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00041">res_parking.h:41</a></div></div>
<div class="ttc" id="structparking__lot__cfg_html_ad96d18d528bbb423da43efb31716d893"><div class="ttname"><a href="../../d3/d86/structparking__lot__cfg.html#ad96d18d528bbb423da43efb31716d893">parking_lot_cfg::parking_con</a></div><div class="ttdeci">const ast_string_field parking_con</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00089">res_parking.h:89</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structparking__lot__extension__inuse__search_html"><div class="ttname"><a href="../../d0/d5e/structparking__lot__extension__inuse__search.html">parking_lot_extension_inuse_search</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5d/parking__devicestate_8c_source.html#l00031">parking_devicestate.c:31</a></div></div>
<div class="ttc" id="structparked__user_html"><div class="ttname"><a href="../../dd/d7e/structparked__user.html">parked_user</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00103">res_parking.h:103</a></div></div>
<div class="ttc" id="structparking__lot__cfg_html_ac6c6bea761c82a98ef22c655cfbf5a56"><div class="ttname"><a href="../../d3/d86/structparking__lot__cfg.html#ac6c6bea761c82a98ef22c655cfbf5a56">parking_lot_cfg::parking_stop</a></div><div class="ttdeci">int parking_stop</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00067">res_parking.h:67</a></div></div>
<div class="ttc" id="structparking__lot_html"><div class="ttname"><a href="../../d4/de7/structparking__lot.html">parking_lot</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00092">res_parking.h:92</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structparking__lot__extension__inuse__search_html_a1f27749679e8054ef014a38569492895"><div class="ttname"><a href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a1f27749679e8054ef014a38569492895">parking_lot_extension_inuse_search::context</a></div><div class="ttdeci">char * context</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5d/parking__devicestate_8c_source.html#l00032">parking_devicestate.c:32</a></div></div>
<div class="ttc" id="parking__devicestate_8c_html_abc780a1e6ca315ff0e0d3c7b071f4b9e"><div class="ttname"><a href="../../de/d5d/parking__devicestate_8c.html#abc780a1e6ca315ff0e0d3c7b071f4b9e">retrieve_parked_user_targeted</a></div><div class="ttdeci">static int retrieve_parked_user_targeted(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5d/parking__devicestate_8c_source.html#l00036">parking_devicestate.c:36</a></div></div>
<div class="ttc" id="structparking__lot__extension__inuse__search_html_a8a294183ec06301b80a01b3f3a5c1178"><div class="ttname"><a href="../../d0/d5e/structparking__lot__extension__inuse__search.html#a8a294183ec06301b80a01b3f3a5c1178">parking_lot_extension_inuse_search::exten</a></div><div class="ttdeci">int exten</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d5d/parking__devicestate_8c_source.html#l00033">parking_devicestate.c:33</a></div></div>
<div class="ttc" id="structparking__lot_html_abc61ea46020e75f93d5d46df84b91fcc"><div class="ttname"><a href="../../d4/de7/structparking__lot.html#abc61ea46020e75f93d5d46df84b91fcc">parking_lot::cfg</a></div><div class="ttdeci">struct parking_lot_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00096">res_parking.h:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a10dc7f5cda134b9fa64512ee7dbe48fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a10dc7f5cda134b9fa64512ee7dbe48fd">&#9670;&nbsp;</a></span>parking_notify_metermaids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void parking_notify_metermaids </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>exten</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Notify metermaids that we've changed an extension. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exten</td><td>Extension of the call parked/unparked </td></tr>
    <tr><td class="paramname">context</td><td>Context of the call parked/unparked </td></tr>
    <tr><td class="paramname">state</td><td>new device state </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00108">108</a> of file <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html">parking_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00237">ast_devstate2str()</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00070">AST_DEVSTATE_CACHABLE</a>, and <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00510">ast_devstate_changed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00342">bridge_parking_pull()</a>, and <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00206">bridge_parking_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Notification of state change to metermaids %d@%s\n to state &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;      <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../da/da2/devicestate_8h.html#ac3a57910a6eb04d12d793fe3df796b8e">ast_devstate2str</a>(<a class="code" href="../../d4/d88/structstate.html">state</a>));</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../d4/d88/structstate.html">state</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <span class="stringliteral">&quot;park:%d@%s&quot;</span>, <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>, <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_ac3a57910a6eb04d12d793fe3df796b8e"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ac3a57910a6eb04d12d793fe3df796b8e">ast_devstate2str</a></div><div class="ttdeci">const char * ast_devstate2str(enum ast_device_state devstate) attribute_pure</div><div class="ttdoc">Convert device state to text string for output. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00237">devicestate.c:237</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="devicestate_8h_html_a62a8e6bc4b82dd797e505688f9f29bff"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a></div><div class="ttdeci">int ast_devstate_changed(enum ast_device_state state, enum ast_devstate_cache cachable, const char *fmt,...)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00510">devicestate.c:510</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc780a1e6ca315ff0e0d3c7b071f4b9e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc780a1e6ca315ff0e0d3c7b071f4b9e">&#9670;&nbsp;</a></span>retrieve_parked_user_targeted()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int retrieve_parked_user_targeted </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00036">36</a> of file <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html">parking_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, and <a class="el" href="../../d3/d38/res__parking_8h_source.html#l00107">parked_user::parking_space</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00047">parking_lot_search_context_extension_inuse()</a>.</p>
<div class="fragment"><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;   <span class="keywordtype">int</span> *target = arg;</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d7e/structparked__user.html">parked_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;   <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../dd/d7e/structparked__user.html#a7ae57549bf83cfe4727db8951ca8b74b">parking_space</a> == *target) {</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;   }</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div><div class="ttc" id="structparked__user_html_a7ae57549bf83cfe4727db8951ca8b74b"><div class="ttname"><a href="../../dd/d7e/structparked__user.html#a7ae57549bf83cfe4727db8951ca8b74b">parked_user::parking_space</a></div><div class="ttdeci">int parking_space</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00107">res_parking.h:107</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structparked__user_html"><div class="ttname"><a href="../../dd/d7e/structparked__user.html">parked_user</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d38/res__parking_8h_source.html#l00103">res_parking.h:103</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a88e153334f4a3a88b055bed527f446ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88e153334f4a3a88b055bed527f446ad">&#9670;&nbsp;</a></span>unload_parking_devstate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void unload_parking_devstate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister Parking devstate handler. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html#l00116">116</a> of file <a class="el" href="../../de/d5d/parking__devicestate_8c_source.html">parking_devicestate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00418">ast_devstate_prov_del()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d45/res__parking_8c_source.html#l01190">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<span class="stringliteral">&quot;Park&quot;</span>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_a1ab579ae15aaca64a904c3c41d8b8b01"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a></div><div class="ttdeci">int ast_devstate_prov_del(const char *label)</div><div class="ttdoc">Remove device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00418">devicestate.c:418</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:09 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
