<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: res_pjsip.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_7b47cca4d318623bb4270ab1fb592ef5.html">res</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">res_pjsip.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;pjsip.h&gt;</code><br />
<code>#include &lt;pjsip_simple.h&gt;</code><br />
<code>#include &lt;pjsip/sip_transaction.h&gt;</code><br />
<code>#include &lt;pj/timer.h&gt;</code><br />
<code>#include &lt;pjlib.h&gt;</code><br />
<code>#include &lt;pjmedia/errno.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d8c/res__pjsip_8h_source.html">asterisk/res_pjsip.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d5c/res__pjsip__private_8h_source.html">res_pjsip/include/res_pjsip_private.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d5f/serializer_8h_source.html">asterisk/serializer.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d40/threadpool_8h_source.html">asterisk/threadpool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d1e/taskprocessor_8h_source.html">asterisk/taskprocessor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d1d/uuid_8h_source.html">asterisk/uuid.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d25/sorcery_8h_source.html">asterisk/sorcery.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/d4d/file_8h_source.html">asterisk/file.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d9f/res__pjsip__cli_8h_source.html">asterisk/res_pjsip_cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dc3/res__pjsip__presence__xml_8h_source.html">asterisk/res_pjsip_presence_xml.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/dd5/res__pjproject_8h_source.html">asterisk/res_pjproject.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for res_pjsip.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d3/d2e/res__pjsip_8c__incl.png" border="0" usemap="#res__pjsip_8c" alt=""/></div>
<map name="res__pjsip_8c" id="res__pjsip_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="243,87,327,114"/>
<area shape="rect" id="node16" href="../../d8/d8c/res__pjsip_8h.html" title="asterisk/res_pjsip.h" alt="" coords="1865,87,2009,114"/>
<area shape="rect" id="node20" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1268,617,1381,644"/>
<area shape="rect" id="node21" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1940,692,2067,719"/>
<area shape="rect" id="node23" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1136,543,1287,569"/>
<area shape="rect" id="node25" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1091,468,1225,495"/>
<area shape="rect" id="node26" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1125,319,1239,345"/>
<area shape="rect" id="node30" href="../../d8/d25/sorcery_8h.html" title="Sorcery Data Access Layer API. " alt="" coords="1130,169,1263,196"/>
<area shape="rect" id="node32" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="1038,244,1153,271"/>
<area shape="rect" id="node39" href="../../d7/d5c/res__pjsip__private_8h.html" title="res_pjsip/include/res\l_pjsip_private.h" alt="" coords="843,80,993,121"/>
<area shape="rect" id="node40" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="919,169,1055,196"/>
<area shape="rect" id="node41" href="../../dd/d5f/serializer_8h.html" title="asterisk/serializer.h" alt="" coords="2483,87,2627,114"/>
<area shape="rect" id="node42" href="../../d3/d40/threadpool_8h.html" title="asterisk/threadpool.h" alt="" coords="2651,87,2809,114"/>
<area shape="rect" id="node43" href="../../d0/d1e/taskprocessor_8h.html" title="An API for managing task processing threads that can be shared across modules. " alt="" coords="2833,87,3011,114"/>
<area shape="rect" id="node44" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="3035,87,3142,114"/>
<area shape="rect" id="node46" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="565,169,666,196"/>
<area shape="rect" id="node47" href="../../d1/d9f/res__pjsip__cli_8h.html" title="asterisk/res_pjsip\l_cli.h" alt="" coords="445,80,577,121"/>
<area shape="rect" id="node48" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="653,87,767,114"/>
<area shape="rect" id="node49" href="../../d5/dc3/res__pjsip__presence__xml_8h.html" title="asterisk/res_pjsip\l_presence_xml.h" alt="" coords="3167,80,3299,121"/>
<area shape="rect" id="node50" href="../../df/dd5/res__pjproject_8h.html" title="asterisk/res_pjproject.h" alt="" coords="3323,87,3494,114"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="165,169,319,196"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="725,543,863,569"/>
<area shape="rect" id="node9" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,169,140,196"/>
<area shape="rect" id="node5" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="777,692,920,719"/>
<area shape="rect" id="node17" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1607,393,1765,420"/>
<area shape="rect" id="node19" href="../../d6/d68/vector_8h.html" title="Vector container support. " alt="" coords="1739,468,1865,495"/>
<area shape="rect" id="node22" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="2231,244,2378,271"/>
<area shape="rect" id="node24" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1477,244,1615,271"/>
<area shape="rect" id="node29" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1760,319,1911,345"/>
<area shape="rect" id="node33" href="../../db/dc4/dnsmgr_8h.html" title="Background DNS update manager. " alt="" coords="2231,169,2367,196"/>
<area shape="rect" id="node34" href="../../d5/da1/udptl_8h.html" title="UDPTL support for T.38. " alt="" coords="1389,169,1509,196"/>
<area shape="rect" id="node35" href="../../d5/dde/rtp__engine_8h.html" title="Pluggable RTP Architecture. " alt="" coords="2000,169,2156,196"/>
<area shape="rect" id="node36" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="1583,169,1773,196"/>
<area shape="rect" id="node37" href="../../d7/d44/stasis__endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1810,244,2005,271"/>
<area shape="rect" id="node38" href="../../d8/d95/stream_8h.html" title="Media Stream API. " alt="" coords="2139,319,2273,345"/>
<area shape="rect" id="node18" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1251,692,1398,719"/>
<area shape="rect" id="node27" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1191,393,1330,420"/>
<area shape="rect" id="node28" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="733,393,863,420"/>
<area shape="rect" id="node31" href="../../db/dfe/config__options_8h.html" title="Configuration option&#45;handling. " alt="" coords="920,319,1100,345"/>
</map>
</div>
</div>
<p><a href="../../de/d96/res__pjsip_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d73/structendpoint__identifier__list.html">endpoint_identifier_list</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/d8e/structsend__request__data.html">send_request_data</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure to hold information about an outbound request.  <a href="../../d5/d8e/structsend__request__data.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/d12/structsend__request__wrapper.html">send_request_wrapper</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/db8/structsupplements.html">supplements</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dc8/structsync__task__data.html">sync_task_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aeb248eaa5cd9af207be8202d1bd0443c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#aeb248eaa5cd9af207be8202d1bd0443c">ENDPOINT_IDENTIFIER_FORMAT</a>&#160;&#160;&#160;&quot;%-20.20s\n&quot;</td></tr>
<tr class="separator:aeb248eaa5cd9af207be8202d1bd0443c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38381dc3e18f7d4bffe6533bac848ca3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a>&#160;&#160;&#160;&quot;contact&quot;</td></tr>
<tr class="separator:a38381dc3e18f7d4bffe6533bac848ca3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e16c8dcbf9ac1e62d76f82c9cf86845"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a7e16c8dcbf9ac1e62d76f82c9cf86845">SERIALIZER_POOL_SIZE</a>&#160;&#160;&#160;8</td></tr>
<tr class="separator:a7e16c8dcbf9ac1e62d76f82c9cf86845"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65ff7a79c301b471ec3ea43b533121e9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a65ff7a79c301b471ec3ea43b533121e9">SIP_SERVANT_ID</a>&#160;&#160;&#160;0x5E2F1D</td></tr>
<tr class="separator:a65ff7a79c301b471ec3ea43b533121e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea573ef2e41aa69f9a7ed16473fe6c50"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#aea573ef2e41aa69f9a7ed16473fe6c50">TIMEOUT_TIMER2</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:aea573ef2e41aa69f9a7ed16473fe6c50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae4dc0196ed892980b127c470b54ad228"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ae4dc0196ed892980b127c470b54ad228">TIMER_INACTIVE</a>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ae4dc0196ed892980b127c470b54ad228"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a16e7a09746725d7b3e7a41bdd83cd40f"><td class="memItemLeft" align="right" valign="top">typedef pj_status_t(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a16e7a09746725d7b3e7a41bdd83cd40f">create_dlg_uac</a>) (pjsip_user_agent *ua, pjsip_rx_data *rdata, const pj_str_t *<a class="el" href="../../d9/d03/structcontact.html">contact</a>, pjsip_dialog **p_dlg)</td></tr>
<tr class="separator:a16e7a09746725d7b3e7a41bdd83cd40f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:acd1ff5e1228969321088d10842407b01"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#acd1ff5e1228969321088d10842407b01">__init_pj_thread_storage</a> (void)</td></tr>
<tr class="separator:acd1ff5e1228969321088d10842407b01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3b7bde712a55b6c90d027699fada098"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#af3b7bde712a55b6c90d027699fada098">__init_servant_id_storage</a> (void)</td></tr>
<tr class="separator:af3b7bde712a55b6c90d027699fada098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf3599f06a495afa84035d7998cc7070"><td class="memItemLeft" align="right" valign="top">static pjsip_msg_body *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#adf3599f06a495afa84035d7998cc7070">ast_body_to_pjsip_body</a> (pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *body)</td></tr>
<tr class="separator:adf3599f06a495afa84035d7998cc7070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7da3e1f7ee3fcb77f29d41a76a7528fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a> (char *dest, const pj_str_t *src, size_t size)</td></tr>
<tr class="memdesc:a7da3e1f7ee3fcb77f29d41a76a7528fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy a pj_str_t into a standard character buffer.  <a href="#a7da3e1f7ee3fcb77f29d41a76a7528fe">More...</a><br /></td></tr>
<tr class="separator:a7da3e1f7ee3fcb77f29d41a76a7528fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2934e044fe8c91950441a53fd47bf846"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a2934e044fe8c91950441a53fd47bf846">ast_copy_pj_str2</a> (char **dest, const pj_str_t *src)</td></tr>
<tr class="memdesc:a2934e044fe8c91950441a53fd47bf846"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and copy a pj_str_t into a standard character buffer.  <a href="#a2934e044fe8c91950441a53fd47bf846">More...</a><br /></td></tr>
<tr class="separator:a2934e044fe8c91950441a53fd47bf846"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a14851d1f88b087df7237ec180de52e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a9a14851d1f88b087df7237ec180de52e">ast_sip_add_body</a> (pjsip_tx_data *tdata, const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *body)</td></tr>
<tr class="memdesc:a9a14851d1f88b087df7237ec180de52e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a body to an outbound SIP message.  <a href="#a9a14851d1f88b087df7237ec180de52e">More...</a><br /></td></tr>
<tr class="separator:a9a14851d1f88b087df7237ec180de52e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ed2b273946f2a95367fb988351187f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ab3ed2b273946f2a95367fb988351187f">ast_sip_add_body_multipart</a> (pjsip_tx_data *tdata, const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *bodies[], int num_bodies)</td></tr>
<tr class="memdesc:ab3ed2b273946f2a95367fb988351187f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a multipart body to an outbound SIP message.  <a href="#ab3ed2b273946f2a95367fb988351187f">More...</a><br /></td></tr>
<tr class="separator:ab3ed2b273946f2a95367fb988351187f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a541e93ff798b3c8ce99a158831338718"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a541e93ff798b3c8ce99a158831338718">ast_sip_add_date_header</a> (pjsip_tx_data *tdata)</td></tr>
<tr class="memdesc:a541e93ff798b3c8ce99a158831338718"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adds a Date header to the tdata, formatted like: Date: Wed, 01 Jan 2021 14:53:01 GMT.  <a href="#a541e93ff798b3c8ce99a158831338718">More...</a><br /></td></tr>
<tr class="separator:a541e93ff798b3c8ce99a158831338718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acef4d0aef5bdc92f0b6b188e48f2e90f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#acef4d0aef5bdc92f0b6b188e48f2e90f">ast_sip_add_header</a> (pjsip_tx_data *tdata, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, const char *<a class="el" href="../../d5/dde/test__func__file_8c.html#a8556878012feffc9e0beb86cd78f424d">value</a>)</td></tr>
<tr class="memdesc:acef4d0aef5bdc92f0b6b188e48f2e90f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a header to an outbound SIP message.  <a href="#acef4d0aef5bdc92f0b6b188e48f2e90f">More...</a><br /></td></tr>
<tr class="separator:acef4d0aef5bdc92f0b6b188e48f2e90f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a080baa12d788eb807467308a6cd5c3ac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a080baa12d788eb807467308a6cd5c3ac">ast_sip_add_usereqphone</a> (const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, pjsip_uri *uri)</td></tr>
<tr class="memdesc:a080baa12d788eb807467308a6cd5c3ac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add 'user=phone' parameter to URI if enabled and user is a phone number.  <a href="#a080baa12d788eb807467308a6cd5c3ac">More...</a><br /></td></tr>
<tr class="separator:a080baa12d788eb807467308a6cd5c3ac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae54046177019ab80202936a02fbee2d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ae54046177019ab80202936a02fbee2d5">ast_sip_append_body</a> (pjsip_tx_data *tdata, const char *body_text)</td></tr>
<tr class="memdesc:ae54046177019ab80202936a02fbee2d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Append body data to a SIP message.  <a href="#ae54046177019ab80202936a02fbee2d5">More...</a><br /></td></tr>
<tr class="separator:ae54046177019ab80202936a02fbee2d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a50e4d3b967059e24275b8e295cd56aef"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a50e4d3b967059e24275b8e295cd56aef">ast_sip_call_codec_pref_to_str</a> (struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> pref)</td></tr>
<tr class="memdesc:a50e4d3b967059e24275b8e295cd56aef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the call codec preference flags to a string.  <a href="#a50e4d3b967059e24275b8e295cd56aef">More...</a><br /></td></tr>
<tr class="separator:a50e4d3b967059e24275b8e295cd56aef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19bc0248934ffd7776e4ec6a61961096"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a19bc0248934ffd7776e4ec6a61961096">ast_sip_call_codec_str_to_pref</a> (struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> *pref, const char *pref_str, int is_outgoing)</td></tr>
<tr class="memdesc:a19bc0248934ffd7776e4ec6a61961096"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a call codec preference string to preference flags.  <a href="#a19bc0248934ffd7776e4ec6a61961096">More...</a><br /></td></tr>
<tr class="separator:a19bc0248934ffd7776e4ec6a61961096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64865fb2b6d118505ab9769b41aeb91a"><td class="memItemLeft" align="right" valign="top">enum <a class="el" href="../../d8/d8c/res__pjsip_8h.html#ad4af2859e259268e0e51d74b524ac397">ast_sip_check_auth_result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a64865fb2b6d118505ab9769b41aeb91a">ast_sip_check_authentication</a> (struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_rx_data *rdata, pjsip_tx_data *tdata)</td></tr>
<tr class="memdesc:a64865fb2b6d118505ab9769b41aeb91a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Method to determine authentication status of an incoming request.  <a href="#a64865fb2b6d118505ab9769b41aeb91a">More...</a><br /></td></tr>
<tr class="separator:a64865fb2b6d118505ab9769b41aeb91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6945da246b7281597f6a2f3911469070"><td class="memItemLeft" align="right" valign="top">pjsip_dialog *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a6945da246b7281597f6a2f3911469070">ast_sip_create_dialog_uac</a> (const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, const char *uri, const char *request_user)</td></tr>
<tr class="memdesc:a6945da246b7281597f6a2f3911469070"><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose method for creating a UAC dialog with an endpoint.  <a href="#a6945da246b7281597f6a2f3911469070">More...</a><br /></td></tr>
<tr class="separator:a6945da246b7281597f6a2f3911469070"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a513bbf0084d764192b5fb60859b4547e"><td class="memItemLeft" align="right" valign="top">pjsip_dialog *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a513bbf0084d764192b5fb60859b4547e">ast_sip_create_dialog_uas</a> (const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_rx_data *rdata, pj_status_t *<a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>)</td></tr>
<tr class="memdesc:a513bbf0084d764192b5fb60859b4547e"><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose method for creating a UAS dialog with an endpoint.  <a href="#a513bbf0084d764192b5fb60859b4547e">More...</a><br /></td></tr>
<tr class="separator:a513bbf0084d764192b5fb60859b4547e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d885d67aea1a6b3419ea96692cd2527"><td class="memItemLeft" align="right" valign="top">pjsip_dialog *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a9d885d67aea1a6b3419ea96692cd2527">ast_sip_create_dialog_uas_locked</a> (const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_rx_data *rdata, pj_status_t *<a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>)</td></tr>
<tr class="memdesc:a9d885d67aea1a6b3419ea96692cd2527"><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose method for creating a UAS dialog with an endpoint.  <a href="#a9d885d67aea1a6b3419ea96692cd2527">More...</a><br /></td></tr>
<tr class="separator:a9d885d67aea1a6b3419ea96692cd2527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a642d7c78b3c3f67018a6f93b739b8597"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a642d7c78b3c3f67018a6f93b739b8597">ast_sip_create_rdata</a> (pjsip_rx_data *rdata, char *packet, const char *src_name, int src_port, char *transport_type, const char *local_name, int local_port)</td></tr>
<tr class="memdesc:a642d7c78b3c3f67018a6f93b739b8597"><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose method for creating an rdata structure using specific information.  <a href="#a642d7c78b3c3f67018a6f93b739b8597">More...</a><br /></td></tr>
<tr class="separator:a642d7c78b3c3f67018a6f93b739b8597"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3ea73b499757767c1ecded1754d199a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ab3ea73b499757767c1ecded1754d199a">ast_sip_create_rdata_with_contact</a> (pjsip_rx_data *rdata, char *packet, const char *src_name, int src_port, char *transport_type, const char *local_name, int local_port, const char *<a class="el" href="../../d9/d03/structcontact.html">contact</a>)</td></tr>
<tr class="memdesc:ab3ea73b499757767c1ecded1754d199a"><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose method for creating an rdata structure using specific information.  <a href="#ab3ea73b499757767c1ecded1754d199a">More...</a><br /></td></tr>
<tr class="separator:ab3ea73b499757767c1ecded1754d199a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac981149e3fb0f7fc8b6e75607b1b2ad0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ac981149e3fb0f7fc8b6e75607b1b2ad0">ast_sip_create_request</a> (const char *<a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, struct pjsip_dialog *dlg, struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, const char *uri, struct <a class="el" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *<a class="el" href="../../d9/d03/structcontact.html">contact</a>, pjsip_tx_data **tdata)</td></tr>
<tr class="memdesc:ac981149e3fb0f7fc8b6e75607b1b2ad0"><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose method for creating a SIP request.  <a href="#ac981149e3fb0f7fc8b6e75607b1b2ad0">More...</a><br /></td></tr>
<tr class="separator:ac981149e3fb0f7fc8b6e75607b1b2ad0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec0c3a5b05e151de8052f6b09950de92"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#aec0c3a5b05e151de8052f6b09950de92">ast_sip_create_request_with_auth</a> (const struct <a class="el" href="../../d0/dca/structast__sip__auth__vector.html">ast_sip_auth_vector</a> *auths, pjsip_rx_data *<a class="el" href="../../dd/db2/res__pjsip__authenticator__digest_8c.html#ad920f57db5e8c4e82e415be692af48a8">challenge</a>, pjsip_tx_data *old_request, pjsip_tx_data **new_request)</td></tr>
<tr class="memdesc:aec0c3a5b05e151de8052f6b09950de92"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a response to an authentication challenge.  <a href="#aec0c3a5b05e151de8052f6b09950de92">More...</a><br /></td></tr>
<tr class="separator:aec0c3a5b05e151de8052f6b09950de92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff5f8de6e4d5fac50583a2d406471b9f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#aff5f8de6e4d5fac50583a2d406471b9f">ast_sip_create_response</a> (const pjsip_rx_data *rdata, int st_code, struct <a class="el" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *<a class="el" href="../../d9/d03/structcontact.html">contact</a>, pjsip_tx_data **tdata)</td></tr>
<tr class="memdesc:aff5f8de6e4d5fac50583a2d406471b9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose method for creating a SIP response.  <a href="#aff5f8de6e4d5fac50583a2d406471b9f">More...</a><br /></td></tr>
<tr class="separator:aff5f8de6e4d5fac50583a2d406471b9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad57aa0b914fbd6adbf8ee2fe176e1fb1"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfa/group__pjsip__threading.html#gad57aa0b914fbd6adbf8ee2fe176e1fb1">ast_sip_create_serializer</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:gad57aa0b914fbd6adbf8ee2fe176e1fb1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new serializer for SIP tasks.  <a href="../../d7/dfa/group__pjsip__threading.html#gad57aa0b914fbd6adbf8ee2fe176e1fb1">More...</a><br /></td></tr>
<tr class="separator:gad57aa0b914fbd6adbf8ee2fe176e1fb1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga575cb798179c82d92b24415d3e174b5b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfa/group__pjsip__threading.html#ga575cb798179c82d92b24415d3e174b5b">ast_sip_create_serializer_group</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, struct <a class="el" href="../../dc/d82/structast__serializer__shutdown__group.html">ast_serializer_shutdown_group</a> *<a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c.html#a2c3d0057b62bfa5b08fe977478749c24">shutdown_group</a>)</td></tr>
<tr class="memdesc:ga575cb798179c82d92b24415d3e174b5b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new serializer for SIP tasks.  <a href="../../d7/dfa/group__pjsip__threading.html#ga575cb798179c82d92b24415d3e174b5b">More...</a><br /></td></tr>
<tr class="separator:ga575cb798179c82d92b24415d3e174b5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6245a7a570f7e3909edc946b5584fb9a"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a6245a7a570f7e3909edc946b5584fb9a">ast_sip_dict_get</a> (void *ht, const char *key)</td></tr>
<tr class="memdesc:a6245a7a570f7e3909edc946b5584fb9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieves the value associated with the given key.  <a href="#a6245a7a570f7e3909edc946b5584fb9a">More...</a><br /></td></tr>
<tr class="separator:a6245a7a570f7e3909edc946b5584fb9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd2eda720356f96b1d56a95321502eeb"><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#acd2eda720356f96b1d56a95321502eeb">ast_sip_dict_set</a> (pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, void *ht, const char *key, void *<a class="el" href="../../d5/d85/structval.html">val</a>)</td></tr>
<tr class="memdesc:acd2eda720356f96b1d56a95321502eeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the value for the given key.  <a href="#acd2eda720356f96b1d56a95321502eeb">More...</a><br /></td></tr>
<tr class="separator:acd2eda720356f96b1d56a95321502eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8871b0dfc62c06643cbfc0e2493d22a0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a8871b0dfc62c06643cbfc0e2493d22a0">ast_sip_dlg_set_transport</a> (const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_dialog *dlg, pjsip_tpselector *selector)</td></tr>
<tr class="memdesc:a8871b0dfc62c06643cbfc0e2493d22a0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the transport on a dialog.  <a href="#a8871b0dfc62c06643cbfc0e2493d22a0">More...</a><br /></td></tr>
<tr class="separator:a8871b0dfc62c06643cbfc0e2493d22a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70a5c3ffebc2d2aaf9a3c5f661d2287c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a70a5c3ffebc2d2aaf9a3c5f661d2287c">ast_sip_dtmf_to_str</a> (const enum <a class="el" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1f">ast_sip_dtmf_mode</a> dtmf, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t buf_len)</td></tr>
<tr class="memdesc:a70a5c3ffebc2d2aaf9a3c5f661d2287c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the DTMF mode enum value into a string.  <a href="#a70a5c3ffebc2d2aaf9a3c5f661d2287c">More...</a><br /></td></tr>
<tr class="separator:a70a5c3ffebc2d2aaf9a3c5f661d2287c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afa22bc164a1c4108006f96822318ff14"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#afa22bc164a1c4108006f96822318ff14">ast_sip_failover_request</a> (pjsip_tx_data *tdata)</td></tr>
<tr class="memdesc:afa22bc164a1c4108006f96822318ff14"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a request to use the next value in the list of resolved addresses.  <a href="#afa22bc164a1c4108006f96822318ff14">More...</a><br /></td></tr>
<tr class="separator:afa22bc164a1c4108006f96822318ff14"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a700cedfe01ae2e796a902b52a10b88d5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a700cedfe01ae2e796a902b52a10b88d5">ast_sip_format_endpoint_ami</a> (struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, struct <a class="el" href="../../d4/d2f/structast__sip__ami.html">ast_sip_ami</a> *ami, int *count)</td></tr>
<tr class="memdesc:a700cedfe01ae2e796a902b52a10b88d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Formats the endpoint and sends over AMI.  <a href="#a700cedfe01ae2e796a902b52a10b88d5">More...</a><br /></td></tr>
<tr class="separator:a700cedfe01ae2e796a902b52a10b88d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2941aa89b7c107383f8fe56df635043f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a2941aa89b7c107383f8fe56df635043f">ast_sip_get_host_ip</a> (int af, pj_sockaddr *addr)</td></tr>
<tr class="memdesc:a2941aa89b7c107383f8fe56df635043f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the local host address in IP form.  <a href="#a2941aa89b7c107383f8fe56df635043f">More...</a><br /></td></tr>
<tr class="separator:a2941aa89b7c107383f8fe56df635043f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6da8e5c5006c0a1c81feb1198ab7e6e"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ac6da8e5c5006c0a1c81feb1198ab7e6e">ast_sip_get_host_ip_string</a> (int af)</td></tr>
<tr class="memdesc:ac6da8e5c5006c0a1c81feb1198ab7e6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the local host address in string form.  <a href="#ac6da8e5c5006c0a1c81feb1198ab7e6e">More...</a><br /></td></tr>
<tr class="separator:ac6da8e5c5006c0a1c81feb1198ab7e6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a785afb501e315c8a97ad476fb6a8be1d"><td class="memItemLeft" align="right" valign="top">pjsip_endpoint *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a> (void)</td></tr>
<tr class="memdesc:a785afb501e315c8a97ad476fb6a8be1d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a pointer to the PJSIP endpoint.  <a href="#a785afb501e315c8a97ad476fb6a8be1d">More...</a><br /></td></tr>
<tr class="separator:a785afb501e315c8a97ad476fb6a8be1d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa1c1bd79cf3f3c57a0efbfd31ff45f2f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#aa1c1bd79cf3f3c57a0efbfd31ff45f2f">ast_sip_get_transport_name</a> (const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_sip_uri *sip_uri, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t buf_len)</td></tr>
<tr class="memdesc:aa1c1bd79cf3f3c57a0efbfd31ff45f2f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the transport name from an endpoint or request uri.  <a href="#aa1c1bd79cf3f3c57a0efbfd31ff45f2f">More...</a><br /></td></tr>
<tr class="separator:aa1c1bd79cf3f3c57a0efbfd31ff45f2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aca93ad473a36034768c5d504ab991e06"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#aca93ad473a36034768c5d504ab991e06">ast_sip_identify_endpoint</a> (pjsip_rx_data *rdata)</td></tr>
<tr class="memdesc:aca93ad473a36034768c5d504ab991e06"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine the endpoint that has sent a SIP message.  <a href="#aca93ad473a36034768c5d504ab991e06">More...</a><br /></td></tr>
<tr class="separator:aca93ad473a36034768c5d504ab991e06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae47a39537fdf10ceba2fad9d9c380179"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ae47a39537fdf10ceba2fad9d9c380179">ast_sip_is_content_type</a> (pjsip_media_type *content_type, char *<a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, char *subtype)</td></tr>
<tr class="memdesc:ae47a39537fdf10ceba2fad9d9c380179"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks if the given content type matches type/subtype.  <a href="#ae47a39537fdf10ceba2fad9d9c380179">More...</a><br /></td></tr>
<tr class="separator:ae47a39537fdf10ceba2fad9d9c380179"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe1cbe99a485f1e003ecc829b5885eeb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#afe1cbe99a485f1e003ecc829b5885eeb">ast_sip_modify_id_header</a> (pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, pjsip_fromto_hdr *id_hdr, const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="memdesc:afe1cbe99a485f1e003ecc829b5885eeb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set name and number information on an identity header.  <a href="#afe1cbe99a485f1e003ecc829b5885eeb">More...</a><br /></td></tr>
<tr class="separator:afe1cbe99a485f1e003ecc829b5885eeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4f0a0629fa2ca084812772356d8e3565"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *<a class="el" href="../../d9/d47/structserializer.html">serializer</a>, int(*sip_task)(void *), void *<a class="el" href="../../d1/dd9/structtask__data.html">task_data</a>)</td></tr>
<tr class="memdesc:ga4f0a0629fa2ca084812772356d8e3565"><td class="mdescLeft">&#160;</td><td class="mdescRight">Pushes a task to SIP servants.  <a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">More...</a><br /></td></tr>
<tr class="separator:ga4f0a0629fa2ca084812772356d8e3565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad5575540c19832939a6b858a93cd5ab"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfa/group__pjsip__threading.html#gaad5575540c19832939a6b858a93cd5ab">ast_sip_push_task_synchronous</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *<a class="el" href="../../d9/d47/structserializer.html">serializer</a>, int(*sip_task)(void *), void *<a class="el" href="../../d1/dd9/structtask__data.html">task_data</a>)</td></tr>
<tr class="memdesc:gaad5575540c19832939a6b858a93cd5ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a task to SIP servants and wait for it to complete.  <a href="../../d7/dfa/group__pjsip__threading.html#gaad5575540c19832939a6b858a93cd5ab">More...</a><br /></td></tr>
<tr class="separator:gaad5575540c19832939a6b858a93cd5ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d0e736f5afb58090c07900cfc4d57e6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a3d0e736f5afb58090c07900cfc4d57e6">ast_sip_push_task_wait</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *<a class="el" href="../../d9/d47/structserializer.html">serializer</a>, int(*sip_task)(void *), void *<a class="el" href="../../d1/dd9/structtask__data.html">task_data</a>)</td></tr>
<tr class="separator:a3d0e736f5afb58090c07900cfc4d57e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac231880459dcf8feacf1bb272b60472a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfa/group__pjsip__threading.html#gac231880459dcf8feacf1bb272b60472a">ast_sip_push_task_wait_serializer</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *<a class="el" href="../../d9/d47/structserializer.html">serializer</a>, int(*sip_task)(void *), void *<a class="el" href="../../d1/dd9/structtask__data.html">task_data</a>)</td></tr>
<tr class="memdesc:gac231880459dcf8feacf1bb272b60472a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a task to the serializer and wait for it to complete.  <a href="../../d7/dfa/group__pjsip__threading.html#gac231880459dcf8feacf1bb272b60472a">More...</a><br /></td></tr>
<tr class="separator:gac231880459dcf8feacf1bb272b60472a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8c82412fe0432a91d5c7985cfdf9b59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a> (struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *<a class="el" href="../../d9/d47/structserializer.html">serializer</a>, int(*sip_task)(void *), void *<a class="el" href="../../d1/dd9/structtask__data.html">task_data</a>)</td></tr>
<tr class="memdesc:gab8c82412fe0432a91d5c7985cfdf9b59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Push a task to SIP servants and wait for it to complete.  <a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">More...</a><br /></td></tr>
<tr class="separator:gab8c82412fe0432a91d5c7985cfdf9b59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8789fca05b6fcb5ca809e7758995959c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a8789fca05b6fcb5ca809e7758995959c">ast_sip_rdata_get_header_value</a> (pjsip_rx_data *rdata, const pj_str_t <a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)</td></tr>
<tr class="memdesc:a8789fca05b6fcb5ca809e7758995959c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a specific header value from rdata.  <a href="#a8789fca05b6fcb5ca809e7758995959c">More...</a><br /></td></tr>
<tr class="separator:a8789fca05b6fcb5ca809e7758995959c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9619038b1c9446b8aa48f3701b41495"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#aa9619038b1c9446b8aa48f3701b41495">ast_sip_register_authenticator</a> (struct <a class="el" href="../../d9/de9/structast__sip__authenticator.html">ast_sip_authenticator</a> *auth)</td></tr>
<tr class="memdesc:aa9619038b1c9446b8aa48f3701b41495"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a SIP authenticator.  <a href="#aa9619038b1c9446b8aa48f3701b41495">More...</a><br /></td></tr>
<tr class="separator:aa9619038b1c9446b8aa48f3701b41495"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98cd6c4d4f72f59a48ccbedc8e6634e4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a98cd6c4d4f72f59a48ccbedc8e6634e4">ast_sip_register_endpoint_formatter</a> (struct <a class="el" href="../../d6/d30/structast__sip__endpoint__formatter.html">ast_sip_endpoint_formatter</a> *obj)</td></tr>
<tr class="memdesc:a98cd6c4d4f72f59a48ccbedc8e6634e4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an endpoint formatter.  <a href="#a98cd6c4d4f72f59a48ccbedc8e6634e4">More...</a><br /></td></tr>
<tr class="separator:a98cd6c4d4f72f59a48ccbedc8e6634e4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66822f0bda04ca112f8f1d0b29e9f4a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a66822f0bda04ca112f8f1d0b29e9f4a4">ast_sip_register_endpoint_identifier</a> (struct <a class="el" href="../../d0/d97/structast__sip__endpoint__identifier.html">ast_sip_endpoint_identifier</a> *identifier)</td></tr>
<tr class="memdesc:a66822f0bda04ca112f8f1d0b29e9f4a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a SIP endpoint identifier.  <a href="#a66822f0bda04ca112f8f1d0b29e9f4a4">More...</a><br /></td></tr>
<tr class="separator:a66822f0bda04ca112f8f1d0b29e9f4a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac769118e31b822fcd28c2b3b3d921c6e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ac769118e31b822fcd28c2b3b3d921c6e">ast_sip_register_endpoint_identifier_with_name</a> (struct <a class="el" href="../../d0/d97/structast__sip__endpoint__identifier.html">ast_sip_endpoint_identifier</a> *identifier, const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="memdesc:ac769118e31b822fcd28c2b3b3d921c6e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a SIP endpoint identifier with a name.  <a href="#ac769118e31b822fcd28c2b3b3d921c6e">More...</a><br /></td></tr>
<tr class="separator:ac769118e31b822fcd28c2b3b3d921c6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a4eca4aa28748364a9a873fe023e47c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a3a4eca4aa28748364a9a873fe023e47c">ast_sip_register_outbound_authenticator</a> (struct <a class="el" href="../../d0/dc2/structast__sip__outbound__authenticator.html">ast_sip_outbound_authenticator</a> *auth)</td></tr>
<tr class="memdesc:a3a4eca4aa28748364a9a873fe023e47c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register an outbound SIP authenticator.  <a href="#a3a4eca4aa28748364a9a873fe023e47c">More...</a><br /></td></tr>
<tr class="separator:a3a4eca4aa28748364a9a873fe023e47c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d923ef44f62dffc05178f762b88f084"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a2d923ef44f62dffc05178f762b88f084">ast_sip_register_service</a> (pjsip_module *module)</td></tr>
<tr class="memdesc:a2d923ef44f62dffc05178f762b88f084"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a SIP service in Asterisk.  <a href="#a2d923ef44f62dffc05178f762b88f084">More...</a><br /></td></tr>
<tr class="separator:a2d923ef44f62dffc05178f762b88f084"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51b89c7cffebd4ea3dd0bb2a34eb9a6f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a51b89c7cffebd4ea3dd0bb2a34eb9a6f">ast_sip_register_supplement</a> (struct <a class="el" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *supplement)</td></tr>
<tr class="memdesc:a51b89c7cffebd4ea3dd0bb2a34eb9a6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a supplement to SIP out of dialog processing.  <a href="#a51b89c7cffebd4ea3dd0bb2a34eb9a6f">More...</a><br /></td></tr>
<tr class="separator:a51b89c7cffebd4ea3dd0bb2a34eb9a6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22df541cc658cbeb30d34df2902b37ef"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a22df541cc658cbeb30d34df2902b37ef">ast_sip_requires_authentication</a> (struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_rx_data *rdata)</td></tr>
<tr class="memdesc:a22df541cc658cbeb30d34df2902b37ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if an incoming request requires authentication.  <a href="#a22df541cc658cbeb30d34df2902b37ef">More...</a><br /></td></tr>
<tr class="separator:a22df541cc658cbeb30d34df2902b37ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a833b03a523fee9bde77af138a38e3dfa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a833b03a523fee9bde77af138a38e3dfa">ast_sip_send_out_of_dialog_request</a> (pjsip_tx_data *tdata, struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, int <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, void *token, void(*callback)(void *token, pjsip_event *e))</td></tr>
<tr class="memdesc:a833b03a523fee9bde77af138a38e3dfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose method for sending an Out-Of-Dialog SIP request.  <a href="#a833b03a523fee9bde77af138a38e3dfa">More...</a><br /></td></tr>
<tr class="separator:a833b03a523fee9bde77af138a38e3dfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9302fd362f9d52147d928c5bc4740433"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a9302fd362f9d52147d928c5bc4740433">ast_sip_send_request</a> (pjsip_tx_data *tdata, struct pjsip_dialog *dlg, struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, void *token, void(*callback)(void *token, pjsip_event *e))</td></tr>
<tr class="memdesc:a9302fd362f9d52147d928c5bc4740433"><td class="mdescLeft">&#160;</td><td class="mdescRight">General purpose method for sending a SIP request.  <a href="#a9302fd362f9d52147d928c5bc4740433">More...</a><br /></td></tr>
<tr class="separator:a9302fd362f9d52147d928c5bc4740433"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a23dc9da0cb0fd4ea9d64fb9901c254a4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a23dc9da0cb0fd4ea9d64fb9901c254a4">ast_sip_send_response</a> (pjsip_response_addr *res_addr, pjsip_tx_data *tdata, struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *sip_endpoint)</td></tr>
<tr class="memdesc:a23dc9da0cb0fd4ea9d64fb9901c254a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a response to an out of dialog request.  <a href="#a23dc9da0cb0fd4ea9d64fb9901c254a4">More...</a><br /></td></tr>
<tr class="separator:a23dc9da0cb0fd4ea9d64fb9901c254a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae207f7592aa7a69d0425a77bb8aa494d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ae207f7592aa7a69d0425a77bb8aa494d">ast_sip_send_stateful_response</a> (pjsip_rx_data *rdata, pjsip_tx_data *tdata, struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *sip_endpoint)</td></tr>
<tr class="memdesc:ae207f7592aa7a69d0425a77bb8aa494d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a stateful response to an out of dialog request.  <a href="#ae207f7592aa7a69d0425a77bb8aa494d">More...</a><br /></td></tr>
<tr class="separator:ae207f7592aa7a69d0425a77bb8aa494d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac41d89bd55a72ddfc32f657e6bc51908"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ac41d89bd55a72ddfc32f657e6bc51908">ast_sip_set_outbound_proxy</a> (pjsip_tx_data *tdata, const char *proxy)</td></tr>
<tr class="memdesc:ac41d89bd55a72ddfc32f657e6bc51908"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the outbound proxy for an outbound SIP message.  <a href="#ac41d89bd55a72ddfc32f657e6bc51908">More...</a><br /></td></tr>
<tr class="separator:ac41d89bd55a72ddfc32f657e6bc51908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74c80b6cedcf4cc847f2b81ba6437337"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a74c80b6cedcf4cc847f2b81ba6437337">ast_sip_set_tpselector_from_ep_or_uri</a> (const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_sip_uri *sip_uri, pjsip_tpselector *selector)</td></tr>
<tr class="memdesc:a74c80b6cedcf4cc847f2b81ba6437337"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets pjsip_tpselector from an endpoint or uri.  <a href="#a74c80b6cedcf4cc847f2b81ba6437337">More...</a><br /></td></tr>
<tr class="separator:a74c80b6cedcf4cc847f2b81ba6437337"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72d9aae56d12729bff60ac4f145db3fc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a72d9aae56d12729bff60ac4f145db3fc">ast_sip_set_tpselector_from_transport</a> (const struct <a class="el" href="../../d1/d04/structast__sip__transport.html">ast_sip_transport</a> *transport, pjsip_tpselector *selector)</td></tr>
<tr class="memdesc:a72d9aae56d12729bff60ac4f145db3fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets pjsip_tpselector from <a class="el" href="../../d1/d04/structast__sip__transport.html" title="Transport to bind to. ">ast_sip_transport</a>.  <a href="#a72d9aae56d12729bff60ac4f145db3fc">More...</a><br /></td></tr>
<tr class="separator:a72d9aae56d12729bff60ac4f145db3fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac94b7c59f69d31b962e42098955f8fa4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ac94b7c59f69d31b962e42098955f8fa4">ast_sip_set_tpselector_from_transport_name</a> (const char *transport_name, pjsip_tpselector *selector)</td></tr>
<tr class="memdesc:ac94b7c59f69d31b962e42098955f8fa4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets pjsip_tpselector from <a class="el" href="../../d1/d04/structast__sip__transport.html" title="Transport to bind to. ">ast_sip_transport</a>.  <a href="#ac94b7c59f69d31b962e42098955f8fa4">More...</a><br /></td></tr>
<tr class="separator:ac94b7c59f69d31b962e42098955f8fa4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acca3189197cd95ee5ba26bb695fd6078"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#acca3189197cd95ee5ba26bb695fd6078">ast_sip_str_to_dtmf</a> (const char *dtmf_mode)</td></tr>
<tr class="memdesc:acca3189197cd95ee5ba26bb695fd6078"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert the DTMF mode name into an enum.  <a href="#acca3189197cd95ee5ba26bb695fd6078">More...</a><br /></td></tr>
<tr class="separator:acca3189197cd95ee5ba26bb695fd6078"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga77c1258c88c9e98d907a2299934d8de1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/dfa/group__pjsip__threading.html#ga77c1258c88c9e98d907a2299934d8de1">ast_sip_thread_is_servant</a> (void)</td></tr>
<tr class="memdesc:ga77c1258c88c9e98d907a2299934d8de1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if the current thread is a SIP servant thread.  <a href="../../d7/dfa/group__pjsip__threading.html#ga77c1258c88c9e98d907a2299934d8de1">More...</a><br /></td></tr>
<tr class="separator:ga77c1258c88c9e98d907a2299934d8de1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b2e65f1281b71eae7dbf27972e99a8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a00b2e65f1281b71eae7dbf27972e99a8">ast_sip_threadpool</a> (void)</td></tr>
<tr class="memdesc:a00b2e65f1281b71eae7dbf27972e99a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Retrieve the SIP threadpool object.  <a href="#a00b2e65f1281b71eae7dbf27972e99a8">More...</a><br /></td></tr>
<tr class="separator:a00b2e65f1281b71eae7dbf27972e99a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93df45b17946f91f1300227febf89a73"><td class="memItemLeft" align="right" valign="top">long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a93df45b17946f91f1300227febf89a73">ast_sip_threadpool_queue_size</a> (void)</td></tr>
<tr class="memdesc:a93df45b17946f91f1300227febf89a73"><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the size of the SIP threadpool's task queue.  <a href="#a93df45b17946f91f1300227febf89a73">More...</a><br /></td></tr>
<tr class="separator:a93df45b17946f91f1300227febf89a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e1ef995698ba16cad6608225b8de946"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a> (pjsip_tpselector *selector)</td></tr>
<tr class="memdesc:a9e1ef995698ba16cad6608225b8de946"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unreference a pjsip_tpselector.  <a href="#a9e1ef995698ba16cad6608225b8de946">More...</a><br /></td></tr>
<tr class="separator:a9e1ef995698ba16cad6608225b8de946"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8fa30d3e04f251038795393bbd08e75f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a8fa30d3e04f251038795393bbd08e75f">ast_sip_unregister_authenticator</a> (struct <a class="el" href="../../d9/de9/structast__sip__authenticator.html">ast_sip_authenticator</a> *auth)</td></tr>
<tr class="memdesc:a8fa30d3e04f251038795393bbd08e75f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a SIP authenticator.  <a href="#a8fa30d3e04f251038795393bbd08e75f">More...</a><br /></td></tr>
<tr class="separator:a8fa30d3e04f251038795393bbd08e75f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa3ce86eac2bb4697e59839b6020b9712"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#aa3ce86eac2bb4697e59839b6020b9712">ast_sip_unregister_endpoint_formatter</a> (struct <a class="el" href="../../d6/d30/structast__sip__endpoint__formatter.html">ast_sip_endpoint_formatter</a> *obj)</td></tr>
<tr class="memdesc:aa3ce86eac2bb4697e59839b6020b9712"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister an endpoint formatter.  <a href="#aa3ce86eac2bb4697e59839b6020b9712">More...</a><br /></td></tr>
<tr class="separator:aa3ce86eac2bb4697e59839b6020b9712"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ba7488bde246be405e2e376f18107ab"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a7ba7488bde246be405e2e376f18107ab">ast_sip_unregister_endpoint_identifier</a> (struct <a class="el" href="../../d0/d97/structast__sip__endpoint__identifier.html">ast_sip_endpoint_identifier</a> *identifier)</td></tr>
<tr class="memdesc:a7ba7488bde246be405e2e376f18107ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a SIP endpoint identifier.  <a href="#a7ba7488bde246be405e2e376f18107ab">More...</a><br /></td></tr>
<tr class="separator:a7ba7488bde246be405e2e376f18107ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a7f20f3df296fe384f405c5e5a2995a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a5a7f20f3df296fe384f405c5e5a2995a">ast_sip_unregister_outbound_authenticator</a> (struct <a class="el" href="../../d0/dc2/structast__sip__outbound__authenticator.html">ast_sip_outbound_authenticator</a> *auth)</td></tr>
<tr class="memdesc:a5a7f20f3df296fe384f405c5e5a2995a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister an outbound SIP authenticator.  <a href="#a5a7f20f3df296fe384f405c5e5a2995a">More...</a><br /></td></tr>
<tr class="separator:a5a7f20f3df296fe384f405c5e5a2995a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15aa09d9084763cdd20b7467a4cd381a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a15aa09d9084763cdd20b7467a4cd381a">ast_sip_unregister_service</a> (pjsip_module *module)</td></tr>
<tr class="separator:a15aa09d9084763cdd20b7467a4cd381a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0447e416567fdecaeef948338493d571"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a0447e416567fdecaeef948338493d571">ast_sip_unregister_supplement</a> (struct <a class="el" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *supplement)</td></tr>
<tr class="memdesc:a0447e416567fdecaeef948338493d571"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unregister a an supplement to SIP out of dialog processing.  <a href="#a0447e416567fdecaeef948338493d571">More...</a><br /></td></tr>
<tr class="separator:a0447e416567fdecaeef948338493d571"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac73444851015b8a7be33534e4a7d2878"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ac73444851015b8a7be33534e4a7d2878">ast_sip_will_uri_survive_restart</a> (pjsip_sip_uri *uri, struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_rx_data *rdata)</td></tr>
<tr class="separator:ac73444851015b8a7be33534e4a7d2878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c47b64c29f38d953bb5fedb3f22c5fa"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a0c47b64c29f38d953bb5fedb3f22c5fa">AST_TEST_DEFINE</a> (xml_sanitization_end_null)</td></tr>
<tr class="separator:a0c47b64c29f38d953bb5fedb3f22c5fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acb5298d5b642dd1c5b584ed13e6cec2a"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#acb5298d5b642dd1c5b584ed13e6cec2a">AST_TEST_DEFINE</a> (xml_sanitization_exceeds_buffer)</td></tr>
<tr class="separator:acb5298d5b642dd1c5b584ed13e6cec2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7661941b5f005f714d8a7df5cbbbdc94"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a7661941b5f005f714d8a7df5cbbbdc94">check_request_status</a> (struct <a class="el" href="../../d5/d8e/structsend__request__data.html">send_request_data</a> *req_data, pjsip_event *e)</td></tr>
<tr class="separator:a7661941b5f005f714d8a7df5cbbbdc94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6021dfa5cb4d9114c224cd5e3ba4c37e"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a6021dfa5cb4d9114c224cd5e3ba4c37e">cli_dump_endpt</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a6021dfa5cb4d9114c224cd5e3ba4c37e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a524724e8e301b61448a7bb40a4a8e94e"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a524724e8e301b61448a7bb40a4a8e94e">cli_show_endpoint_identifiers</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a524724e8e301b61448a7bb40a4a8e94e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95d5465d94a305efee886a3a3e7fe5df"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a95d5465d94a305efee886a3a3e7fe5df">cli_show_settings</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a95d5465d94a305efee886a3a3e7fe5df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a001d7f718db023957fc1794c311ee1fb"><td class="memItemLeft" align="right" valign="top">static pjsip_dialog *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a001d7f718db023957fc1794c311ee1fb">create_dialog_uas</a> (const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_rx_data *rdata, pj_status_t *<a class="el" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, <a class="el" href="../../de/d96/res__pjsip_8c.html#a16e7a09746725d7b3e7a41bdd83cd40f">create_dlg_uac</a> create_fun)</td></tr>
<tr class="separator:a001d7f718db023957fc1794c311ee1fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a19ac5266932008840d797d3946819812"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a19ac5266932008840d797d3946819812">create_in_dialog_request</a> (const pjsip_method *<a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, struct pjsip_dialog *dlg, pjsip_tx_data **tdata)</td></tr>
<tr class="separator:a19ac5266932008840d797d3946819812"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30c4a2058fe4ecb01a1cb8e4af76d7d2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a30c4a2058fe4ecb01a1cb8e4af76d7d2">create_out_of_dialog_request</a> (const pjsip_method *<a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, const char *uri, struct <a class="el" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *provided_contact, pjsip_tx_data **tdata)</td></tr>
<tr class="separator:a30c4a2058fe4ecb01a1cb8e4af76d7d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acedf790aa46452b7e6b63f39cc55ddbb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#acedf790aa46452b7e6b63f39cc55ddbb">do_cli_dump_endpt</a> (void *v_a)</td></tr>
<tr class="separator:acedf790aa46452b7e6b63f39cc55ddbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfed42a1933e5cd396c5125d2199a14a"><td class="memItemLeft" align="right" valign="top">static pj_bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#adfed42a1933e5cd396c5125d2199a14a">does_method_match</a> (const pj_str_t *<a class="el" href="../../de/d96/res__pjsip_8c.html#a6fdb6e6429a5f709f3b99541190b52c2">message_method</a>, const char *supplement_method)</td></tr>
<tr class="separator:adfed42a1933e5cd396c5125d2199a14a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b67a512469864e7ed2add9b85e9dd4b"><td class="memItemLeft" align="right" valign="top">static pj_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a8b67a512469864e7ed2add9b85e9dd4b">endpt_send_request</a> (struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, pjsip_tx_data *tdata, pj_int32_t <a class="el" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, void *token, pjsip_endpt_send_callback cb)</td></tr>
<tr class="separator:a8b67a512469864e7ed2add9b85e9dd4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acac0cdc6b74561d7867c71c5f5c86275"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#acac0cdc6b74561d7867c71c5f5c86275">endpt_send_request_cb</a> (void *token, pjsip_event *e)</td></tr>
<tr class="separator:acac0cdc6b74561d7867c71c5f5c86275"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab40ce4ae2a2dd34cb70b0e76190113d"><td class="memItemLeft" align="right" valign="top">static const pjsip_method *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#aab40ce4ae2a2dd34cb70b0e76190113d">get_pjsip_method</a> (const char *<a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>)</td></tr>
<tr class="separator:aab40ce4ae2a2dd34cb70b0e76190113d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade98e39eec85dedc08b183fea003e011"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ade98e39eec85dedc08b183fea003e011">load_pjsip</a> (void)</td></tr>
<tr class="separator:ade98e39eec85dedc08b183fea003e011"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16e4979a0b2c68298a3610c0fea98aa8"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a16e4979a0b2c68298a3610c0fea98aa8">monitor_thread_exec</a> (void *endpt)</td></tr>
<tr class="separator:a16e4979a0b2c68298a3610c0fea98aa8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e996d72059de607807c04422c4f7e0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a9e996d72059de607807c04422c4f7e0b">never_called_res_pjsip</a> (void)</td></tr>
<tr class="separator:a9e996d72059de607807c04422c4f7e0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf53097fa8d7a15c1fca7aa7df5d2071"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#abf53097fa8d7a15c1fca7aa7df5d2071">register_service</a> (void *data)</td></tr>
<tr class="separator:abf53097fa8d7a15c1fca7aa7df5d2071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a36a95296ac4d8879271aa934616282dd"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a36a95296ac4d8879271aa934616282dd">reload_configuration_task</a> (void *obj)</td></tr>
<tr class="separator:a36a95296ac4d8879271aa934616282dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a7c6ac25ea7536c0bc9ed18cbcf917527">reload_module</a> (void)</td></tr>
<tr class="separator:a7c6ac25ea7536c0bc9ed18cbcf917527"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9f2b1e4d6f355170040017d86206aae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ab9f2b1e4d6f355170040017d86206aae">remove_request_headers</a> (pjsip_endpoint *endpt)</td></tr>
<tr class="separator:ab9f2b1e4d6f355170040017d86206aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7daa7ca393a1187a33ce4952c2458c18"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a7daa7ca393a1187a33ce4952c2458c18">send_in_dialog_request</a> (pjsip_tx_data *tdata, struct pjsip_dialog *dlg)</td></tr>
<tr class="separator:a7daa7ca393a1187a33ce4952c2458c18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687c566135e86195175d937499c14956"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a687c566135e86195175d937499c14956">send_request_cb</a> (void *token, pjsip_event *e)</td></tr>
<tr class="separator:a687c566135e86195175d937499c14956"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af13a3926b27d237d40764862b0a6347a"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d8e/structsend__request__data.html">send_request_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#af13a3926b27d237d40764862b0a6347a">send_request_data_alloc</a> (struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint, void *token, void(*callback)(void *token, pjsip_event *e))</td></tr>
<tr class="separator:af13a3926b27d237d40764862b0a6347a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43763e87e1fb6e6c3acd1e212fc2249b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a43763e87e1fb6e6c3acd1e212fc2249b">send_request_data_destroy</a> (void *obj)</td></tr>
<tr class="separator:a43763e87e1fb6e6c3acd1e212fc2249b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33c9a38b5beef1cf120eb9aa0d9205f7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a33c9a38b5beef1cf120eb9aa0d9205f7">send_request_timer_callback</a> (pj_timer_heap_t *theap, pj_timer_entry *<a class="el" href="../../d3/d96/structentry.html">entry</a>)</td></tr>
<tr class="separator:a33c9a38b5beef1cf120eb9aa0d9205f7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e513f92d713b1806188419e2699dfe3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a3e513f92d713b1806188419e2699dfe3">send_request_wrapper_destructor</a> (void *obj)</td></tr>
<tr class="separator:a3e513f92d713b1806188419e2699dfe3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afbb014b5be3be8870fa8607f2d1c0b99"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#afbb014b5be3be8870fa8607f2d1c0b99">sip_dialog_create_from</a> (pj_pool_t *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, pj_str_t *from, const char *<a class="el" href="../../d8/dbc/structuser.html">user</a>, const char *<a class="el" href="../../dd/dac/structdomain.html">domain</a>, const pj_str_t *target, pjsip_tpselector *selector)</td></tr>
<tr class="separator:afbb014b5be3be8870fa8607f2d1c0b99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78bdb7140c5ad9159f992914d661fc1b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a78bdb7140c5ad9159f992914d661fc1b">sip_thread_start</a> (void)</td></tr>
<tr class="separator:a78bdb7140c5ad9159f992914d661fc1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af26876047d193d84e5e490d97e3cca67"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#af26876047d193d84e5e490d97e3cca67">stop_monitor_thread</a> (void)</td></tr>
<tr class="separator:af26876047d193d84e5e490d97e3cca67"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a968724a2543e0d95c238f4c09ce1bbda"><td class="memItemLeft" align="right" valign="top">static pj_bool_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a968724a2543e0d95c238f4c09ce1bbda">supplement_on_rx_request</a> (pjsip_rx_data *rdata)</td></tr>
<tr class="separator:a968724a2543e0d95c238f4c09ce1bbda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c1dbd9c8b20b85be851d6920d058d0b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a0c1dbd9c8b20b85be851d6920d058d0b">supplement_outgoing_response</a> (pjsip_tx_data *tdata, struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *sip_endpoint)</td></tr>
<tr class="separator:a0c1dbd9c8b20b85be851d6920d058d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7174c1f990ccb004c6b2d5b2b930af8"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#af7174c1f990ccb004c6b2d5b2b930af8">sync_task</a> (void *data)</td></tr>
<tr class="separator:af7174c1f990ccb004c6b2d5b2b930af8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44156c2c09c780fb30a07ab6f2609204"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a44156c2c09c780fb30a07ab6f2609204">uas_use_sips_contact</a> (pjsip_rx_data *rdata)</td></tr>
<tr class="memdesc:a44156c2c09c780fb30a07ab6f2609204"><td class="mdescLeft">&#160;</td><td class="mdescRight">Determine if a SIPS Contact header is required.  <a href="#a44156c2c09c780fb30a07ab6f2609204">More...</a><br /></td></tr>
<tr class="separator:a44156c2c09c780fb30a07ab6f2609204"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0b24df20d1630da17e7f947a7ed6b3c2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a0b24df20d1630da17e7f947a7ed6b3c2">unload_pjsip</a> (void *data)</td></tr>
<tr class="separator:a0b24df20d1630da17e7f947a7ed6b3c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42cd1bebde23095537a4bfc00d28b75c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a42cd1bebde23095537a4bfc00d28b75c">unregister_service</a> (void *data)</td></tr>
<tr class="separator:a42cd1bebde23095537a4bfc00d28b75c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Basic SIP resource&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CHANNEL_DEPEND - 5, .requires = &quot;dnsmgr,res_pjproject,res_sorcery_config,res_sorcery_memory,res_sorcery_astdb&quot;, .optional_modules = &quot;res_statsd&quot;, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0154360b6fa47543e1e0f9203a7aa458"><td class="memItemLeft" align="right" valign="top">static pjsip_endpoint *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a></td></tr>
<tr class="separator:a0154360b6fa47543e1e0f9203a7aa458"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9bd4b5531ad2c0bdff019ac8cf84509"><td class="memItemLeft" align="right" valign="top">pj_caching_pool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ac9bd4b5531ad2c0bdff019ac8cf84509">caching_pool</a></td></tr>
<tr class="separator:ac9bd4b5531ad2c0bdff019ac8cf84509"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1959d38582b0da24d4d42766cf13ade8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a> []</td></tr>
<tr class="separator:a1959d38582b0da24d4d42766cf13ade8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5179defebcbf5bb65e7aa4ca78d35b2e"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a5179defebcbf5bb65e7aa4ca78d35b2e">endpoint_formatters</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a5179defebcbf5bb65e7aa4ca78d35b2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28c282d2d7112c63b8e0ec904446ae6b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a28c282d2d7112c63b8e0ec904446ae6b">endpoint_identifiers</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a28c282d2d7112c63b8e0ec904446ae6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0509a7fd8d03feaa2d66bcfed88ddf63"><td class="memItemLeft" align="right" valign="top">static pj_sockaddr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a0509a7fd8d03feaa2d66bcfed88ddf63">host_ip_ipv4</a></td></tr>
<tr class="separator:a0509a7fd8d03feaa2d66bcfed88ddf63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada98f7e6ae63b0ee6f4c0642d67f48ad"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ada98f7e6ae63b0ee6f4c0642d67f48ad">host_ip_ipv4_string</a> [PJ_INET6_ADDRSTRLEN]</td></tr>
<tr class="separator:ada98f7e6ae63b0ee6f4c0642d67f48ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a9f45451fc8ed560864ab05df8d13b9"><td class="memItemLeft" align="right" valign="top">static pj_sockaddr&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a8a9f45451fc8ed560864ab05df8d13b9">host_ip_ipv6</a></td></tr>
<tr class="separator:a8a9f45451fc8ed560864ab05df8d13b9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86180705d1f71413b4f8923366096ab3"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a86180705d1f71413b4f8923366096ab3">host_ip_ipv6_string</a> [PJ_INET6_ADDRSTRLEN]</td></tr>
<tr class="separator:a86180705d1f71413b4f8923366096ab3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12cdab6fe7e85798a584508b60486885"><td class="memItemLeft" align="right" valign="top">static const pjsip_method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a12cdab6fe7e85798a584508b60486885">info_method</a> = {PJSIP_OTHER_METHOD, {&quot;INFO&quot;, 4} }</td></tr>
<tr class="separator:a12cdab6fe7e85798a584508b60486885"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a463464cc1ce6e364594dbb478645294e"><td class="memItemLeft" align="right" valign="top">pj_pool_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a463464cc1ce6e364594dbb478645294e">memory_pool</a></td></tr>
<tr class="separator:a463464cc1ce6e364594dbb478645294e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fdb6e6429a5f709f3b99541190b52c2"><td class="memItemLeft" align="right" valign="top">static const pjsip_method&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a6fdb6e6429a5f709f3b99541190b52c2">message_method</a> = {PJSIP_OTHER_METHOD, {&quot;MESSAGE&quot;, 7} }</td></tr>
<tr class="separator:a6fdb6e6429a5f709f3b99541190b52c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8301744a76c3fffcb2043c17a3614dea"><td class="memItemLeft" >struct {</td></tr>
<tr class="memitem:a8b44a03925325ceaf2de7b079b1541a1"><td class="memItemLeft" >&#160;&#160;&#160;const char *&#160;&#160;&#160;<a class="el" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></td></tr>
<tr class="separator:a8b44a03925325ceaf2de7b079b1541a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acbc0a9631742cb870f6ba56dcef1b75b"><td class="memItemLeft" >&#160;&#160;&#160;const pjsip_method *&#160;&#160;&#160;<a class="el" href="../../de/d96/res__pjsip_8c.html#acbc0a9631742cb870f6ba56dcef1b75b">pmethod</a></td></tr>
<tr class="separator:acbc0a9631742cb870f6ba56dcef1b75b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8301744a76c3fffcb2043c17a3614dea"><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a8301744a76c3fffcb2043c17a3614dea">methods</a> []</td></tr>
<tr class="separator:a8301744a76c3fffcb2043c17a3614dea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6cf5b93870af7bbb34d65dea179b72e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ab6cf5b93870af7bbb34d65dea179b72e">monitor_continue</a></td></tr>
<tr class="separator:ab6cf5b93870af7bbb34d65dea179b72e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5614ba9f86518c2f28300f340b88f2e7"><td class="memItemLeft" align="right" valign="top">pj_thread_t *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a5614ba9f86518c2f28300f340b88f2e7">monitor_thread</a></td></tr>
<tr class="separator:a5614ba9f86518c2f28300f340b88f2e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a885e6f9577102981b862e68b879057ce"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a885e6f9577102981b862e68b879057ce">pj_thread_storage</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#acd1ff5e1228969321088d10842407b01">__init_pj_thread_storage</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a885e6f9577102981b862e68b879057ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac51146e0275b19fab3031e6176c745e8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/de9/structast__sip__authenticator.html">ast_sip_authenticator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a></td></tr>
<tr class="separator:ac51146e0275b19fab3031e6176c745e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18741a3257cf9d9ae4f755778d97f716"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/dc2/structast__sip__outbound__authenticator.html">ast_sip_outbound_authenticator</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a></td></tr>
<tr class="separator:a18741a3257cf9d9ae4f755778d97f716"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae18a720e05208f389355777d6b9a1db7"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ae18a720e05208f389355777d6b9a1db7">servant_id_storage</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../de/d96/res__pjsip_8c.html#af3b7bde712a55b6c90d027699fada098">__init_servant_id_storage</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:ae18a720e05208f389355777d6b9a1db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9d81933501c8c6d11f8fb3af5656093"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d08/structast__serializer__pool.html">ast_serializer_pool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#af9d81933501c8c6d11f8fb3af5656093">sip_serializer_pool</a></td></tr>
<tr class="separator:af9d81933501c8c6d11f8fb3af5656093"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a714a1bebd7d5fe9712c059a60e3f5f20"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a></td></tr>
<tr class="separator:a714a1bebd7d5fe9712c059a60e3f5f20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad4148e8b866195343e8ee93ba9dd229f"><td class="memItemLeft" align="right" valign="top">static pjsip_module&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a></td></tr>
<tr class="separator:ad4148e8b866195343e8ee93ba9dd229f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49168494a1abd3d3c923fe6024723f5b"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d7/db8/structsupplements.html">supplements</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d96/res__pjsip_8c.html#a49168494a1abd3d3c923fe6024723f5b">supplements</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a49168494a1abd3d3c923fe6024723f5b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aeb248eaa5cd9af207be8202d1bd0443c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb248eaa5cd9af207be8202d1bd0443c">&#9670;&nbsp;</a></span>ENDPOINT_IDENTIFIER_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ENDPOINT_IDENTIFIER_FORMAT&#160;&#160;&#160;&quot;%-20.20s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03609">cli_show_endpoint_identifiers()</a>.</p>

</div>
</div>
<a id="a38381dc3e18f7d4bffe6533bac848ca3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38381dc3e18f7d4bffe6533bac848ca3">&#9670;&nbsp;</a></span>MOD_DATA_CONTACT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MOD_DATA_CONTACT&#160;&#160;&#160;&quot;contact&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03264">3264</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05448">ast_sip_create_response()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04993">ast_sip_send_out_of_dialog_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05420">ast_sip_send_stateful_response()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05385">supplement_outgoing_response()</a>.</p>

</div>
</div>
<a id="a7e16c8dcbf9ac1e62d76f82c9cf86845"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e16c8dcbf9ac1e62d76f82c9cf86845">&#9670;&nbsp;</a></span>SERIALIZER_POOL_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SERIALIZER_POOL_SIZE&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of serializers in pool if one not supplied. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03267">3267</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05810">load_module()</a>.</p>

</div>
</div>
<a id="a65ff7a79c301b471ec3ea43b533121e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65ff7a79c301b471ec3ea43b533121e9">&#9670;&nbsp;</a></span>SIP_SERVANT_ID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SIP_SERVANT_ID&#160;&#160;&#160;0x5E2F1D</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05294">5294</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05321">ast_sip_thread_is_servant()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05296">sip_thread_start()</a>.</p>

</div>
</div>
<a id="aea573ef2e41aa69f9a7ed16473fe6c50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea573ef2e41aa69f9a7ed16473fe6c50">&#9670;&nbsp;</a></span>TIMEOUT_TIMER2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMEOUT_TIMER2&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04568">4568</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04751">endpt_send_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04628">endpt_send_request_cb()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04703">send_request_timer_callback()</a>.</p>

</div>
</div>
<a id="ae4dc0196ed892980b127c470b54ad228"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae4dc0196ed892980b127c470b54ad228">&#9670;&nbsp;</a></span>TIMER_INACTIVE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TIMER_INACTIVE&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04567">4567</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04751">endpt_send_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04628">endpt_send_request_cb()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04703">send_request_timer_callback()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a16e7a09746725d7b3e7a41bdd83cd40f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16e7a09746725d7b3e7a41bdd83cd40f">&#9670;&nbsp;</a></span>create_dlg_uac</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef pj_status_t(* create_dlg_uac) (pjsip_user_agent *ua, pjsip_rx_data *rdata, const pj_str_t *<a class="el" href="../../d9/d03/structcontact.html">contact</a>, pjsip_dialog **p_dlg)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04174">4174</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="acd1ff5e1228969321088d10842407b01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd1ff5e1228969321088d10842407b01">&#9670;&nbsp;</a></span>__init_pj_thread_storage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_pj_thread_storage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05292">5292</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="af3b7bde712a55b6c90d027699fada098"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3b7bde712a55b6c90d027699fada098">&#9670;&nbsp;</a></span>__init_servant_id_storage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_servant_id_storage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05293">5293</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05962">5962</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05962">5962</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="adf3599f06a495afa84035d7998cc7070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf3599f06a495afa84035d7998cc7070">&#9670;&nbsp;</a></span>ast_body_to_pjsip_body()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pjsip_msg_body* ast_body_to_pjsip_body </td>
          <td>(</td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05078">5078</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02033">ast_sip_body::body_text</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02031">ast_sip_body::subtype</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02029">ast_sip_body::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05091">ast_sip_add_body()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05098">ast_sip_add_body_multipart()</a>.</p>
<div class="fragment"><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;{</div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;   pj_str_t <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;   pj_str_t subtype;</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;   pj_str_t body_text;</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;</div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;   pj_cstr(&amp;type, body-&gt;<a class="code" href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">type</a>);</div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;   pj_cstr(&amp;subtype, body-&gt;<a class="code" href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">subtype</a>);</div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;   pj_cstr(&amp;body_text, body-&gt;<a class="code" href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">body_text</a>);</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;   <span class="keywordflow">return</span> pjsip_msg_body_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;type, &amp;subtype, &amp;body_text);</div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__sip__body_html_a88687b0dd98d5307f1219432b73b8412"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a88687b0dd98d5307f1219432b73b8412">ast_sip_body::body_text</a></div><div class="ttdeci">const char * body_text</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02033">res_pjsip.h:2033</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="structast__sip__body_html_a763fd8db6bba8fbbbc113ca0d61c47c2"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#a763fd8db6bba8fbbbc113ca0d61c47c2">ast_sip_body::type</a></div><div class="ttdeci">const char * type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02029">res_pjsip.h:2029</a></div></div>
<div class="ttc" id="structast__sip__body_html_abb4ae60bbcbce3616fdd7d4238869c91"><div class="ttname"><a href="../../d5/d80/structast__sip__body.html#abb4ae60bbcbce3616fdd7d4238869c91">ast_sip_body::subtype</a></div><div class="ttdeci">const char * subtype</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02031">res_pjsip.h:2031</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7da3e1f7ee3fcb77f29d41a76a7528fe"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7da3e1f7ee3fcb77f29d41a76a7528fe">&#9670;&nbsp;</a></span>ast_copy_pj_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_copy_pj_str </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_str_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy a pj_str_t into a standard character buffer. </p>
<p>pj_str_t is not NULL-terminated. Any place that expects a NULL- terminated string needs to have the pj_str_t copied into a separate buffer.</p>
<p>This method copies the pj_str_t contents into the destination buffer and NULL-terminates the buffer.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>The destination buffer </td></tr>
    <tr><td class="paramname">src</td><td>The pj_str_t to copy </td></tr>
    <tr><td class="paramname">size</td><td>The size of the destination buffer. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">5240</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00226">MIN</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c_source.html#l00211">add_identity_header()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01050">apply_dtls_attrib()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02065">apply_negotiated_sdp_stream()</a>, <a class="el" href="../../d7/da2/res__hep__pjsip_8c_source.html#l00047">assign_uuid()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03762">ast_sip_get_transport_name()</a>, <a class="el" href="../../d2/d63/res_2res__pjsip_2security__events_8c_source.html#l00197">ast_sip_report_auth_challenge_sent()</a>, <a class="el" href="../../d2/d63/res_2res__pjsip_2security__events_8c_source.html#l00130">ast_sip_report_auth_failed_challenge_response()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01278">chan_pjsip_get_uniqueid()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02226">change_outgoing_sdp_stream_media_address()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l00760">channel_read_pjsip()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04160">cli_complete_subscription_common()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04524">cli_list_subscriptions_detail()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04384">cli_show_subscriptions_detail()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03102">determine_sip_publish_type()</a>, <a class="el" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c_source.html#l00093">dialog_info_generate_body_content()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00718">endpoint_lookup()</a>, <a class="el" href="../../d3/dea/res__pjsip__history_8c_source.html#l00410">evaluate_like()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00827">extract_contact_addr()</a>, <a class="el" href="../../d9/d91/res__pjsip__path_8c_source.html#l00039">find_aor()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l00947">find_aor_name()</a>, <a class="el" href="../../dd/db2/res__pjsip__authenticator__digest_8c_source.html#l00267">find_challenge()</a>, <a class="el" href="../../d9/d24/res__pjsip__endpoint__identifier__user_8c_source.html#l00046">get_auth_header()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00315">get_codecs()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03666">get_destination()</a>, <a class="el" href="../../df/dd7/res__pjsip__endpoint__identifier__anonymous_8c_source.html#l00033">get_endpoint_details()</a>, <a class="el" href="../../d9/d24/res__pjsip__endpoint__identifier__user_8c_source.html#l00032">get_from_header()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00612">get_mid_bundle_group()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00179">get_user_agent()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00764">handle_incoming_sdp()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00964">handle_negotiated_sdp_session_media()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01056">handle_registration_response()</a>, <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l00927">headers_to_vars()</a>, <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l01457">incoming_in_dialog_request()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00660">log_failed_request()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01462">negotiate_incoming_sdp_stream()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00268">options_on_rx_request()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01121">parse_uri_cb()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01404">process_extmap_attributes()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00814">process_ice_attributes()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l00776">process_ice_auth_attrb()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01218">process_ssrc_attributes()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03214">publish_request_initial()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03326">pubsub_on_rx_publish_request()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02969">pubsub_on_rx_subscribe_request()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00625">refer_blind_callback()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l00886">refer_incoming_blind_request()</a>, <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l01088">refer_incoming_refer_request()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l00584">register_aor_core()</a>, <a class="el" href="../../da/d5c/res__pjsip__rfc3326_8c_source.html#l00037">rfc3326_use_reason_header()</a>, <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l01035">rx_data_to_ast_msg()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l00986">save_response_fields_to_transport()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02600">sdp_requires_deferral()</a>, <a class="el" href="../../d2/d63/res_2res__pjsip_2security__events_8c_source.html#l00054">security_event_populate()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05395">session_inv_on_redirected()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05457">session_outgoing_nat_hook()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00044">set_id_from_hdr()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00153">set_id_from_oli()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00646">set_mid_and_bundle_group()</a>, <a class="el" href="../../d5/da9/res__pjsip__diversion_8c_source.html#l00264">set_redirecting_value()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l00684">set_remote_mslabel_and_stream_group()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02994">set_sipdomain_variable()</a>, <a class="el" href="../../d4/d43/pjsip__resolver_8c_source.html#l00468">sip_resolve()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01820">sip_subscription_to_ami()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01556">sub_persistence_recreate()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00831">subscription_get_generator_from_rdata()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00771">subscription_get_handler_from_rdata()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00637">subscription_persistence_create()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00662">subscription_persistence_update()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02044">transfer_refer()</a>.</p>
<div class="fragment"><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;{</div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;   <span class="keywordtype">size_t</span> chars_to_copy = <a class="code" href="../../d5/d60/utils_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a>(size - 1, pj_strlen(src));</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;   memcpy(dest, pj_strbuf(src), chars_to_copy);</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;   dest[chars_to_copy] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;}</div><div class="ttc" id="utils_8h_html_a3acffbd305ee72dcd4593c0d8af64a4f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a3acffbd305ee72dcd4593c0d8af64a4f">MIN</a></div><div class="ttdeci">#define MIN(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00226">utils.h:226</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2934e044fe8c91950441a53fd47bf846"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2934e044fe8c91950441a53fd47bf846">&#9670;&nbsp;</a></span>ast_copy_pj_str2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_copy_pj_str2 </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_str_t *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create and copy a pj_str_t into a standard character buffer. </p>
<p>pj_str_t is not NULL-terminated. Any place that expects a NULL- terminated string needs to have the pj_str_t copied into a separate buffer.</p>
<p>Copies the pj_str_t contents into a newly allocated buffer pointed to by dest. NULL-terminates the buffer.</p>
<dl class="section note"><dt>Note</dt><dd>Caller is responsible for freeing the allocated memory.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>[out] The destination buffer </td></tr>
    <tr><td class="paramname">src</td><td>The pj_str_t to copy </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">Number</td><td>of characters copied or negative value on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05247">5247</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;{</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;   <span class="keywordtype">int</span> res = <a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(dest, <span class="stringliteral">&quot;%.*s&quot;</span>, (<span class="keywordtype">int</span>)pj_strlen(src), pj_strbuf(src));</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;   <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;      *dest = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;   }</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;</div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05962">5962</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a9a14851d1f88b087df7237ec180de52e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9a14851d1f88b087df7237ec180de52e">&#9670;&nbsp;</a></span>ast_sip_add_body()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_add_body </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *&#160;</td>
          <td class="paramname"><em>body</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a body to an outbound SIP message. </p>
<p>If this is called multiple times, the latest body will replace the current body.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tdata</td><td>The message to add the body to </td></tr>
    <tr><td class="paramname">body</td><td>The message body to add </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05091">5091</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05078">ast_body_to_pjsip_body()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00529">build_notify_body()</a>, <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l01221">msg_send()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00371">send_unsolicited_mwi_notify_to_contact()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02744">sendtext()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00749">sip_publisher_service_queue()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02218">transmit_info_dtmf()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01351">transmit_info_with_vidupdate()</a>.</p>
<div class="fragment"><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;{</div><div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;   pjsip_msg_body *pjsip_body = <a class="code" href="../../de/d96/res__pjsip_8c.html#adf3599f06a495afa84035d7998cc7070">ast_body_to_pjsip_body</a>(tdata-&gt;pool, body);</div><div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;   tdata-&gt;msg-&gt;body = pjsip_body;</div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_adf3599f06a495afa84035d7998cc7070"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#adf3599f06a495afa84035d7998cc7070">ast_body_to_pjsip_body</a></div><div class="ttdeci">static pjsip_msg_body * ast_body_to_pjsip_body(pj_pool_t *pool, const struct ast_sip_body *body)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05078">res_pjsip.c:5078</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3ed2b273946f2a95367fb988351187f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ed2b273946f2a95367fb988351187f">&#9670;&nbsp;</a></span>ast_sip_add_body_multipart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_add_body_multipart </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d80/structast__sip__body.html">ast_sip_body</a> *&#160;</td>
          <td class="paramname"><em>bodies</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_bodies</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a multipart body to an outbound SIP message. </p>
<p>This will treat each part of the input vector as part of a multipart body and add each part to the SIP message.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tdata</td><td>The message to add the body to </td></tr>
    <tr><td class="paramname">bodies</td><td>The parts of the body to add </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05098">5098</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05078">ast_body_to_pjsip_body()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;{</div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;   <span class="comment">/* NULL for type and subtype automatically creates &quot;multipart/mixed&quot; */</span></div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;   pjsip_msg_body *body = pjsip_multipart_create(tdata-&gt;pool, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;</div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; num_bodies; ++i) {</div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;      pjsip_multipart_part *part = pjsip_multipart_create_part(tdata-&gt;pool);</div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;      part-&gt;body = <a class="code" href="../../de/d96/res__pjsip_8c.html#adf3599f06a495afa84035d7998cc7070">ast_body_to_pjsip_body</a>(tdata-&gt;pool, bodies[i]);</div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;      pjsip_multipart_add_part(tdata-&gt;pool, body, part);</div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;   }</div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;</div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;   tdata-&gt;msg-&gt;body = body;</div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_adf3599f06a495afa84035d7998cc7070"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#adf3599f06a495afa84035d7998cc7070">ast_body_to_pjsip_body</a></div><div class="ttdeci">static pjsip_msg_body * ast_body_to_pjsip_body(pj_pool_t *pool, const struct ast_sip_body *body)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05078">res_pjsip.c:5078</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a541e93ff798b3c8ce99a158831338718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a541e93ff798b3c8ce99a158831338718">&#9670;&nbsp;</a></span>ast_sip_add_date_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_add_date_header </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adds a Date header to the tdata, formatted like: Date: Wed, 01 Jan 2021 14:53:01 GMT. </p>
<dl class="section since"><dt>Since</dt><dd>16.19.0</dd></dl>
<dl class="section note"><dt>Note</dt><dd>There is no checking done to see if the header already exists before adding it. It's up to the caller of this function to determine if that needs to be done or not. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03288">3288</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05063">ast_sip_add_header()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c_source.html#l00320">add_date_header()</a>, and <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l00584">register_aor_core()</a>.</p>
<div class="fragment"><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;{</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;   <span class="keywordtype">char</span> date[256];</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;   <span class="keyword">struct </span>tm tm;</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;   time_t t = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;   gmtime_r(&amp;t, &amp;tm);</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;   strftime(date, <span class="keyword">sizeof</span>(date), <span class="stringliteral">&quot;%a, %d %b %Y %T GMT&quot;</span>, &amp;tm);</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#acef4d0aef5bdc92f0b6b188e48f2e90f">ast_sip_add_header</a>(tdata, <span class="stringliteral">&quot;Date&quot;</span>, date);</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_acef4d0aef5bdc92f0b6b188e48f2e90f"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#acef4d0aef5bdc92f0b6b188e48f2e90f">ast_sip_add_header</a></div><div class="ttdeci">int ast_sip_add_header(pjsip_tx_data *tdata, const char *name, const char *value)</div><div class="ttdoc">Add a header to an outbound SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05063">res_pjsip.c:5063</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acef4d0aef5bdc92f0b6b188e48f2e90f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acef4d0aef5bdc92f0b6b188e48f2e90f">&#9670;&nbsp;</a></span>ast_sip_add_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_add_header </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a header to an outbound SIP message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tdata</td><td>The message to add the header to </td></tr>
    <tr><td class="paramname">name</td><td>The header name </td></tr>
    <tr><td class="paramname">value</td><td>The header value </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05063">5063</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d75/res__pjsip__refer_8c_source.html#l01223">add_header_from_channel_var()</a>, <a class="el" href="../../db/d73/pjsip__global__headers_8c_source.html#l00082">add_headers_to_message()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03288">ast_sip_add_date_header()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00301">ast_sip_message_apply_transport()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00553">build_notify()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00751">notify_channel()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00645">notify_contact()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00709">notify_uri()</a>, <a class="el" href="../../d2/d3b/res__pjsip__dlg__options_8c_source.html#l00039">options_incoming_request()</a>, <a class="el" href="../../da/d5c/res__pjsip__rfc3326_8c_source.html#l00094">rfc3326_add_reason_header()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00215">send_options_response()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03179">sip_publication_respond()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02044">transfer_refer()</a>, and <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l00892">vars_to_headers()</a>.</p>
<div class="fragment"><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;{</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;   pj_str_t hdr_name;</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;   pj_str_t hdr_value;</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;   pjsip_generic_string_hdr *hdr;</div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;   pj_cstr(&amp;hdr_name, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;   pj_cstr(&amp;hdr_value, <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>);</div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;   hdr = pjsip_generic_string_hdr_create(tdata-&gt;pool, &amp;hdr_name, &amp;hdr_value);</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;   pjsip_msg_add_hdr(tdata-&gt;msg, (pjsip_hdr *) hdr);</div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a080baa12d788eb807467308a6cd5c3ac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a080baa12d788eb807467308a6cd5c3ac">&#9670;&nbsp;</a></span>ast_sip_add_usereqphone()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_add_usereqphone </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_uri *&#160;</td>
          <td class="paramname"><em>uri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add 'user=phone' parameter to URI if enabled and user is a phone number. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>The endpoint to use for configuration </td></tr>
    <tr><td class="paramname">pool</td><td>The memory pool to allocate the parameter from </td></tr>
    <tr><td class="paramname">uri</td><td>The URI to check for user and to add parameter to </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03994">3994</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/d4d/file_8h_source.html#l00048">AST_DIGIT_ANY</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00877">ast_sip_endpoint::usereqphone</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04028">ast_sip_create_dialog_uac()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01637">set_from_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;{</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;   pjsip_sip_uri *sip_uri;</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;   <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t STR_PHONE = { <span class="stringliteral">&quot;phone&quot;</span>, 5 };</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;   <span class="keywordflow">if</span> (!endpoint || !endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#ab637fcd67d06d6d478f405dc833e09ff">usereqphone</a> || (!PJSIP_URI_SCHEME_IS_SIP(uri) &amp;&amp; !PJSIP_URI_SCHEME_IS_SIPS(uri))) {</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;   }</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;   sip_uri = pjsip_uri_get_uri(uri);</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;   <span class="keywordflow">if</span> (!pj_strlen(&amp;sip_uri-&gt;user)) {</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;   }</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;   <span class="keywordflow">if</span> (pj_strbuf(&amp;sip_uri-&gt;user)[0] == <span class="charliteral">&#39;+&#39;</span>) {</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;      i = 1;</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;   }</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;   <span class="comment">/* Test URI user against allowed characters in AST_DIGIT_ANY */</span></div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;   <span class="keywordflow">for</span> (; i &lt; pj_strlen(&amp;sip_uri-&gt;user); i++) {</div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;      <span class="keywordflow">if</span> (!strchr(<a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>, pj_strbuf(&amp;sip_uri-&gt;user)[i])) {</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;      }</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;   }</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;   <span class="keywordflow">if</span> (i &lt; pj_strlen(&amp;sip_uri-&gt;user)) {</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;   }</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;   sip_uri-&gt;user_param = STR_PHONE;</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;}</div><div class="ttc" id="file_8h_html_afa92b0106fb7a918ea994c2867ac0a04"><div class="ttname"><a href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a></div><div class="ttdeci">#define AST_DIGIT_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00048">file.h:48</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_ab637fcd67d06d6d478f405dc833e09ff"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#ab637fcd67d06d6d478f405dc833e09ff">ast_sip_endpoint::usereqphone</a></div><div class="ttdeci">unsigned int usereqphone</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00877">res_pjsip.h:877</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae54046177019ab80202936a02fbee2d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae54046177019ab80202936a02fbee2d5">&#9670;&nbsp;</a></span>ast_sip_append_body()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_append_body </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>body_text</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Append body data to a SIP message. </p>
<p>This acts mostly the same as ast_sip_add_body, except that rather than replacing a body if it currently exists, it appends data to an existing body.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tdata</td><td>The message to append the body to </td></tr>
    <tr><td class="paramname">body</td><td>The string to append to the end of the current body </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05114">5114</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>.</p>
<div class="fragment"><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;{</div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;   <span class="keywordtype">size_t</span> combined_size = strlen(body_text) + tdata-&gt;msg-&gt;body-&gt;len;</div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *body_buffer = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(combined_size);</div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;</div><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;body_buffer, 0, <span class="stringliteral">&quot;%.*s%s&quot;</span>, (<span class="keywordtype">int</span>) tdata-&gt;msg-&gt;body-&gt;len, (<span class="keywordtype">char</span> *) tdata-&gt;msg-&gt;body-&gt;data, body_text);</div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;</div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;   tdata-&gt;msg-&gt;body-&gt;data = pj_pool_alloc(tdata-&gt;pool, combined_size);</div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;   pj_memcpy(tdata-&gt;msg-&gt;body-&gt;data, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(body_buffer), combined_size);</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;   tdata-&gt;msg-&gt;body-&gt;len = combined_size;</div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a50e4d3b967059e24275b8e295cd56aef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a50e4d3b967059e24275b8e295cd56aef">&#9670;&nbsp;</a></span>ast_sip_call_codec_pref_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_call_codec_pref_to_str </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a>&#160;</td>
          <td class="paramname"><em>pref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the call codec preference flags to a string. </p>
<dl class="section since"><dt>Since</dt><dd>18.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pref</td><td>the call codec preference setting</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a constant string with either the setting value or 'unknown' </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Don't try to free the string! </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05534">5534</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d2f/syslog_8c_source.html#l00037">value</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01145">incoming_call_offer_pref_to_str()</a>, <a class="el" href="../../dc/d13/pjsip__session__caps_8c_source.html#l00032">log_caps()</a>, and <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01157">outgoing_call_offer_pref_to_str()</a>.</p>
<div class="fragment"><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;{</div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;</div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;   <span class="keywordflow">if</span> (ast_sip_call_codec_pref_test(pref, LOCAL) &amp;&amp;  ast_sip_call_codec_pref_test(pref, INTERSECT) &amp;&amp; ast_sip_call_codec_pref_test(pref, ALL)) {</div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;      value = <span class="stringliteral">&quot;local&quot;</span>;</div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ast_sip_call_codec_pref_test(pref, LOCAL) &amp;&amp;  ast_sip_call_codec_pref_test(pref, UNION) &amp;&amp; ast_sip_call_codec_pref_test(pref, ALL)) {</div><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;      value = <span class="stringliteral">&quot;local_merge&quot;</span>;</div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ast_sip_call_codec_pref_test(pref, LOCAL) &amp;&amp;  ast_sip_call_codec_pref_test(pref, INTERSECT) &amp;&amp; ast_sip_call_codec_pref_test(pref, FIRST)) {</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;      value = <span class="stringliteral">&quot;local_first&quot;</span>;</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ast_sip_call_codec_pref_test(pref, REMOTE) &amp;&amp;  ast_sip_call_codec_pref_test(pref, INTERSECT) &amp;&amp; ast_sip_call_codec_pref_test(pref, ALL)) {</div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;      value = <span class="stringliteral">&quot;remote&quot;</span>;</div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ast_sip_call_codec_pref_test(pref, REMOTE) &amp;&amp;  ast_sip_call_codec_pref_test(pref, UNION) &amp;&amp; ast_sip_call_codec_pref_test(pref, ALL)) {</div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;      value = <span class="stringliteral">&quot;remote_merge&quot;</span>;</div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ast_sip_call_codec_pref_test(pref, REMOTE) &amp;&amp;  ast_sip_call_codec_pref_test(pref, UNION) &amp;&amp; ast_sip_call_codec_pref_test(pref, FIRST)) {</div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;      value = <span class="stringliteral">&quot;remote_first&quot;</span>;</div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;      value = <span class="stringliteral">&quot;unknown&quot;</span>;</div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;   }</div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;</div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a>;</div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;}</div><div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19bc0248934ffd7776e4ec6a61961096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19bc0248934ffd7776e4ec6a61961096">&#9670;&nbsp;</a></span>ast_sip_call_codec_str_to_pref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_call_codec_str_to_pref </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> *&#160;</td>
          <td class="paramname"><em>pref</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>pref_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_outgoing</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a call codec preference string to preference flags. </p>
<dl class="section since"><dt>Since</dt><dd>18.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pref</td><td>A pointer to an <a class="el" href="../../dc/dac/structast__flags.html" title="Structure used to handle boolean flags. ">ast_flags</a> structure to receive the preference flags </td></tr>
    <tr><td class="paramname">pref_str</td><td>The call codec preference setting string </td></tr>
    <tr><td class="paramname">is_outgoing</td><td>Is for outgoing calls?</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The string was parsed successfully </td></tr>
    <tr><td class="paramname">-1</td><td>The string option was invalid </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05557">5557</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00538">AST_SIP_CALL_CODEC_PREF_ALL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00540">AST_SIP_CALL_CODEC_PREF_FIRST</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00532">AST_SIP_CALL_CODEC_PREF_INTERSECT</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00544">AST_SIP_CALL_CODEC_PREF_LOCAL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00546">AST_SIP_CALL_CODEC_PREF_REMOTE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00534">AST_SIP_CALL_CODEC_PREF_UNION</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00200">ast_flags::flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01124">call_offer_pref_handler()</a>, and <a class="el" href="../../d6/d36/test__res__pjsip__session__caps_8c_source.html#l00046">test_create_joint()</a>.</p>
<div class="fragment"><div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;{</div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;   pref-&gt;<a class="code" href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> = 0;</div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;</div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;   <span class="keywordflow">if</span> (strcmp(pref_str, <span class="stringliteral">&quot;local&quot;</span>) == 0) {</div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(pref, <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca113b16d3699e4ed2aaefc0446ab24a19">AST_SIP_CALL_CODEC_PREF_LOCAL</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddcaded39ec7b40e04bbfb1ae2da04c688c2">AST_SIP_CALL_CODEC_PREF_INTERSECT</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca0b827f1a59c7073b3f2c325d200583f7">AST_SIP_CALL_CODEC_PREF_ALL</a>);</div><div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_outgoing &amp;&amp; strcmp(pref_str, <span class="stringliteral">&quot;local_merge&quot;</span>) == 0) {</div><div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(pref, <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca113b16d3699e4ed2aaefc0446ab24a19">AST_SIP_CALL_CODEC_PREF_LOCAL</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca8ba168f489469b746424d09bbeb66139">AST_SIP_CALL_CODEC_PREF_UNION</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca0b827f1a59c7073b3f2c325d200583f7">AST_SIP_CALL_CODEC_PREF_ALL</a>);</div><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(pref_str, <span class="stringliteral">&quot;local_first&quot;</span>) == 0) {</div><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(pref, <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca113b16d3699e4ed2aaefc0446ab24a19">AST_SIP_CALL_CODEC_PREF_LOCAL</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddcaded39ec7b40e04bbfb1ae2da04c688c2">AST_SIP_CALL_CODEC_PREF_INTERSECT</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddcac2236d2a2411718e7356980d5b527cb0">AST_SIP_CALL_CODEC_PREF_FIRST</a>);</div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(pref_str, <span class="stringliteral">&quot;remote&quot;</span>) == 0) {</div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(pref, <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca7f7ec01671e26b6aae53c93dd78d39e2">AST_SIP_CALL_CODEC_PREF_REMOTE</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddcaded39ec7b40e04bbfb1ae2da04c688c2">AST_SIP_CALL_CODEC_PREF_INTERSECT</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca0b827f1a59c7073b3f2c325d200583f7">AST_SIP_CALL_CODEC_PREF_ALL</a>);</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (is_outgoing &amp;&amp; strcmp(pref_str, <span class="stringliteral">&quot;remote_merge&quot;</span>) == 0) {</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(pref, <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca7f7ec01671e26b6aae53c93dd78d39e2">AST_SIP_CALL_CODEC_PREF_REMOTE</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca8ba168f489469b746424d09bbeb66139">AST_SIP_CALL_CODEC_PREF_UNION</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca0b827f1a59c7073b3f2c325d200583f7">AST_SIP_CALL_CODEC_PREF_ALL</a>);</div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcmp(pref_str, <span class="stringliteral">&quot;remote_first&quot;</span>) == 0) {</div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(pref, <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca7f7ec01671e26b6aae53c93dd78d39e2">AST_SIP_CALL_CODEC_PREF_REMOTE</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca8ba168f489469b746424d09bbeb66139">AST_SIP_CALL_CODEC_PREF_UNION</a> | <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddcac2236d2a2411718e7356980d5b527cb0">AST_SIP_CALL_CODEC_PREF_FIRST</a>);</div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;   }</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;</div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;}</div><div class="ttc" id="res__pjsip_8h_html_ad7380769212cae6b6305119ed93ebddca0b827f1a59c7073b3f2c325d200583f7"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca0b827f1a59c7073b3f2c325d200583f7">AST_SIP_CALL_CODEC_PREF_ALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00538">res_pjsip.h:538</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ad7380769212cae6b6305119ed93ebddca8ba168f489469b746424d09bbeb66139"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca8ba168f489469b746424d09bbeb66139">AST_SIP_CALL_CODEC_PREF_UNION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00534">res_pjsip.h:534</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="structast__flags_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dc/dac/structast__flags.html#ac92588540e8c1d014a08cd8a45462b19">ast_flags::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00200">utils.h:200</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ad7380769212cae6b6305119ed93ebddcac2236d2a2411718e7356980d5b527cb0"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddcac2236d2a2411718e7356980d5b527cb0">AST_SIP_CALL_CODEC_PREF_FIRST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00540">res_pjsip.h:540</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ad7380769212cae6b6305119ed93ebddca113b16d3699e4ed2aaefc0446ab24a19"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca113b16d3699e4ed2aaefc0446ab24a19">AST_SIP_CALL_CODEC_PREF_LOCAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00544">res_pjsip.h:544</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ad7380769212cae6b6305119ed93ebddca7f7ec01671e26b6aae53c93dd78d39e2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddca7f7ec01671e26b6aae53c93dd78d39e2">AST_SIP_CALL_CODEC_PREF_REMOTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00546">res_pjsip.h:546</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ad7380769212cae6b6305119ed93ebddcaded39ec7b40e04bbfb1ae2da04c688c2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ad7380769212cae6b6305119ed93ebddcaded39ec7b40e04bbfb1ae2da04c688c2">AST_SIP_CALL_CODEC_PREF_INTERSECT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00532">res_pjsip.h:532</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a64865fb2b6d118505ab9769b41aeb91a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64865fb2b6d118505ab9769b41aeb91a">&#9670;&nbsp;</a></span>ast_sip_check_authentication()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../d8/d8c/res__pjsip_8h.html#ad4af2859e259268e0e51d74b524ac397">ast_sip_check_auth_result</a> ast_sip_check_authentication </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Method to determine authentication status of an incoming request. </p>
<p>This will call into a registered authenticator. The registered authenticator will do what is necessary to determine whether the incoming request passes authentication. A tentative response is passed into this function so that if, say, a digest authentication challenge should be sent in the ensuing response, it can be added to the response.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>The endpoint from the request was sent </td></tr>
    <tr><td class="paramname">rdata</td><td>The request to potentially authenticate </td></tr>
    <tr><td class="paramname">tdata</td><td>Tentative response to the request </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The result of checking authentication. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03377">3377</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00936">AST_SIP_AUTHENTICATION_SUCCESS</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00965">ast_sip_authenticator::check_authentication</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00880">authenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;{</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a>) {</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No SIP authenticator registered. Assuming authentication is successful\n&quot;</span>);</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad4af2859e259268e0e51d74b524ac397aa0871afe29e292ca48bcb0b1be287452">AST_SIP_AUTHENTICATION_SUCCESS</a>;</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;   }</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a>-&gt;<a class="code" href="../../d9/de9/structast__sip__authenticator.html#ad59d122bf30610790adaf8e51d5a7b67">check_authentication</a>(endpoint, rdata, tdata);</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_ac51146e0275b19fab3031e6176c745e8"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a></div><div class="ttdeci">static struct ast_sip_authenticator * registered_authenticator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03336">res_pjsip.c:3336</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__sip__authenticator_html_ad59d122bf30610790adaf8e51d5a7b67"><div class="ttname"><a href="../../d9/de9/structast__sip__authenticator.html#ad59d122bf30610790adaf8e51d5a7b67">ast_sip_authenticator::check_authentication</a></div><div class="ttdeci">enum ast_sip_check_auth_result(* check_authentication)(struct ast_sip_endpoint *endpoint, pjsip_rx_data *rdata, pjsip_tx_data *tdata)</div><div class="ttdoc">Check that an incoming request passes authentication. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00965">res_pjsip.h:965</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ad4af2859e259268e0e51d74b524ac397aa0871afe29e292ca48bcb0b1be287452"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ad4af2859e259268e0e51d74b524ac397aa0871afe29e292ca48bcb0b1be287452">AST_SIP_AUTHENTICATION_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00936">res_pjsip.h:936</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6945da246b7281597f6a2f3911469070"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6945da246b7281597f6a2f3911469070">&#9670;&nbsp;</a></span>ast_sip_create_dialog_uac()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_dialog* ast_sip_create_dialog_uac </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>aor_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>request_user</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General purpose method for creating a UAC dialog with an endpoint. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>A pointer to the endpoint </td></tr>
    <tr><td class="paramname">aor_name</td><td>Optional name of the AOR to target, may even be an explicit SIP URI </td></tr>
    <tr><td class="paramname">request_user</td><td>Optional user to place into the target URI</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04028">4028</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03994">ast_sip_add_usereqphone()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03791">ast_sip_dlg_set_transport()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03987">ast_sip_tpselector_unref()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00887">ast_sip_endpoint::contact_user</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00831">ast_sip_endpoint::fromdomain</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00829">ast_sip_endpoint::fromuser</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00849">ast_sip_endpoint::info</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00819">ast_sip_endpoint::outbound_proxy</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03813">sip_dialog_create_from()</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01868">ast_sip_create_subscription()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03317">ast_sip_session_create_outgoing()</a>.</p>
<div class="fragment"><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;{</div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;   <span class="keywordtype">char</span> enclosed_uri[PJSIP_MAX_URL_SIZE];</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;   pj_str_t local_uri = { <span class="stringliteral">&quot;sip:temp@temp&quot;</span>, 13 }, remote_uri, target_uri;</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;   pj_status_t res;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;   pjsip_dialog *dlg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *outbound_proxy = endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a8b55fd039a8b14683eae2d3c0a1c86ae">outbound_proxy</a>;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;   pjsip_tpselector selector = { .type = PJSIP_TPSELECTOR_NONE, };</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t HCONTACT = { <span class="stringliteral">&quot;Contact&quot;</span>, 7 };</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;   snprintf(enclosed_uri, <span class="keyword">sizeof</span>(enclosed_uri), <span class="stringliteral">&quot;&lt;%s&gt;&quot;</span>, uri);</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;   pj_cstr(&amp;remote_uri, enclosed_uri);</div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;   pj_cstr(&amp;target_uri, uri);</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;   res = pjsip_dlg_create_uac(pjsip_ua_instance(), &amp;local_uri, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;remote_uri, &amp;target_uri, &amp;dlg);</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;   <span class="keywordflow">if</span> (res == PJ_SUCCESS &amp;&amp; !(PJSIP_URI_SCHEME_IS_SIP(dlg-&gt;target) || PJSIP_URI_SCHEME_IS_SIPS(dlg-&gt;target))) {</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;      <span class="comment">/* dlg-&gt;target is a pjsip_other_uri, but it&#39;s assumed to be a</span></div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;<span class="comment">       * pjsip_sip_uri below. Fail fast. */</span></div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;      res = PJSIP_EINVALIDURI;</div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;      pjsip_dlg_terminate(dlg);</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;   }</div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;   <span class="keywordflow">if</span> (res != PJ_SUCCESS) {</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;      <span class="keywordflow">if</span> (res == PJSIP_EINVALIDURI) {</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;            <span class="stringliteral">&quot;Endpoint &#39;%s&#39;: Could not create dialog to invalid URI &#39;%s&#39;.  Is endpoint registered and reachable?\n&quot;</span>,</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint), uri);</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;      }</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;   }</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;   <span class="comment">/* We have to temporarily bump up the sess_count here so the dialog is not prematurely destroyed */</span></div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;   dlg-&gt;sess_count++;</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a8871b0dfc62c06643cbfc0e2493d22a0">ast_sip_dlg_set_transport</a>(endpoint, dlg, &amp;selector);</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#afbb014b5be3be8870fa8607f2d1c0b99">sip_dialog_create_from</a>(dlg-&gt;pool, &amp;local_uri, endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#ac73c8898b4e904caa12dd1adcab40126">fromuser</a>, endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#aa46f02b6ae40c29d58bff7e415ad9a1b">fromdomain</a>, &amp;remote_uri, &amp;selector)) {</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;      dlg-&gt;sess_count--;</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;      pjsip_dlg_terminate(dlg);</div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a>(&amp;selector);</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;   }</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a>(&amp;selector);</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;   <span class="comment">/* Update the dialog with the new local URI, we do it afterwards so we can use the dialog pool for construction */</span></div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;   pj_strdup_with_null(dlg-&gt;pool, &amp;dlg-&gt;local.info_str, &amp;local_uri);</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;   dlg-&gt;local.info-&gt;uri = pjsip_parse_uri(dlg-&gt;pool, dlg-&gt;local.info_str.ptr, dlg-&gt;local.info_str.slen, 0);</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;   <span class="keywordflow">if</span> (!dlg-&gt;local.info-&gt;uri) {</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;         <span class="stringliteral">&quot;Could not parse URI &#39;%s&#39; for endpoint &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;         dlg-&gt;local.info_str.ptr, <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint));</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;      dlg-&gt;sess_count--;</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;      pjsip_dlg_terminate(dlg);</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;   }</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;   dlg-&gt;local.contact = pjsip_parse_hdr(dlg-&gt;pool, &amp;HCONTACT, local_uri.ptr, local_uri.slen, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a331b0897216e7fa779ac247698ae299d">contact_user</a>)) {</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;      pjsip_sip_uri *sip_uri;</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;      sip_uri = pjsip_uri_get_uri(dlg-&gt;local.contact-&gt;uri);</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;      pj_strdup2(dlg-&gt;pool, &amp;sip_uri-&gt;user, endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a331b0897216e7fa779ac247698ae299d">contact_user</a>);</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;   }</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;</div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;   <span class="comment">/* If a request user has been specified and we are permitted to change it, do so */</span></div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(request_user)) {</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;      pjsip_sip_uri *sip_uri;</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;      <span class="keywordflow">if</span> (PJSIP_URI_SCHEME_IS_SIP(dlg-&gt;target) || PJSIP_URI_SCHEME_IS_SIPS(dlg-&gt;target)) {</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;         sip_uri = pjsip_uri_get_uri(dlg-&gt;target);</div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;         pj_strdup2(dlg-&gt;pool, &amp;sip_uri-&gt;user, request_user);</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;      }</div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;      <span class="keywordflow">if</span> (PJSIP_URI_SCHEME_IS_SIP(dlg-&gt;remote.info-&gt;uri) || PJSIP_URI_SCHEME_IS_SIPS(dlg-&gt;remote.info-&gt;uri)) {</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;         sip_uri = pjsip_uri_get_uri(dlg-&gt;remote.info-&gt;uri);</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;         pj_strdup2(dlg-&gt;pool, &amp;sip_uri-&gt;user, request_user);</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;      }</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;   }</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;   <span class="comment">/* Add the user=phone parameter if applicable */</span></div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a080baa12d788eb807467308a6cd5c3ac">ast_sip_add_usereqphone</a>(endpoint, dlg-&gt;pool, dlg-&gt;target);</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a080baa12d788eb807467308a6cd5c3ac">ast_sip_add_usereqphone</a>(endpoint, dlg-&gt;pool, dlg-&gt;remote.<a class="code" href="../../d3/d46/structast__sip__endpoint.html#aeb1d4e7a4bd3cddeed7a328759361897">info</a>-&gt;uri);</div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(outbound_proxy)) {</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;      pjsip_route_hdr route_set, *route;</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;      <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t ROUTE_HNAME = { <span class="stringliteral">&quot;Route&quot;</span>, 5 };</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;      pj_str_t <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;      pj_list_init(&amp;route_set);</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;      pj_strdup2_with_null(dlg-&gt;pool, &amp;tmp, outbound_proxy);</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;      <span class="keywordflow">if</span> (!(route = pjsip_parse_hdr(dlg-&gt;pool, &amp;ROUTE_HNAME, tmp.ptr, tmp.slen, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create dialog to endpoint &#39;%s&#39; as outbound proxy URI &#39;%s&#39; is not valid\n&quot;</span>,</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint), outbound_proxy);</div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;         dlg-&gt;sess_count--;</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;         pjsip_dlg_terminate(dlg);</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;      }</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;      pj_list_insert_nodes_before(&amp;route_set, route);</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;      pjsip_dlg_set_route_set(dlg, &amp;route_set);</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;   }</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;   dlg-&gt;sess_count--;</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;   <span class="keywordflow">return</span> dlg;</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a080baa12d788eb807467308a6cd5c3ac"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a080baa12d788eb807467308a6cd5c3ac">ast_sip_add_usereqphone</a></div><div class="ttdeci">void ast_sip_add_usereqphone(const struct ast_sip_endpoint *endpoint, pj_pool_t *pool, pjsip_uri *uri)</div><div class="ttdoc">Add &amp;#39;user=phone&amp;#39; parameter to URI if enabled and user is a phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03994">res_pjsip.c:3994</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_ac73c8898b4e904caa12dd1adcab40126"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#ac73c8898b4e904caa12dd1adcab40126">ast_sip_endpoint::fromuser</a></div><div class="ttdeci">const ast_string_field fromuser</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00829">res_pjsip.h:829</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a331b0897216e7fa779ac247698ae299d"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a331b0897216e7fa779ac247698ae299d">ast_sip_endpoint::contact_user</a></div><div class="ttdeci">char * contact_user</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00887">res_pjsip.h:887</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a8b55fd039a8b14683eae2d3c0a1c86ae"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a8b55fd039a8b14683eae2d3c0a1c86ae">ast_sip_endpoint::outbound_proxy</a></div><div class="ttdeci">const ast_string_field outbound_proxy</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00819">res_pjsip.h:819</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_aeb1d4e7a4bd3cddeed7a328759361897"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#aeb1d4e7a4bd3cddeed7a328759361897">ast_sip_endpoint::info</a></div><div class="ttdeci">struct ast_sip_endpoint_info_configuration info</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00849">res_pjsip.h:849</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a9e1ef995698ba16cad6608225b8de946"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a></div><div class="ttdeci">void ast_sip_tpselector_unref(pjsip_tpselector *selector)</div><div class="ttdoc">Unreference a pjsip_tpselector. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03987">res_pjsip.c:3987</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8871b0dfc62c06643cbfc0e2493d22a0"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8871b0dfc62c06643cbfc0e2493d22a0">ast_sip_dlg_set_transport</a></div><div class="ttdeci">int ast_sip_dlg_set_transport(const struct ast_sip_endpoint *endpoint, pjsip_dialog *dlg, pjsip_tpselector *selector)</div><div class="ttdoc">Set the transport on a dialog. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03791">res_pjsip.c:3791</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_afbb014b5be3be8870fa8607f2d1c0b99"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#afbb014b5be3be8870fa8607f2d1c0b99">sip_dialog_create_from</a></div><div class="ttdeci">static int sip_dialog_create_from(pj_pool_t *pool, pj_str_t *from, const char *user, const char *domain, const pj_str_t *target, pjsip_tpselector *selector)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03813">res_pjsip.c:3813</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_aa46f02b6ae40c29d58bff7e415ad9a1b"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#aa46f02b6ae40c29d58bff7e415ad9a1b">ast_sip_endpoint::fromdomain</a></div><div class="ttdeci">const ast_string_field fromdomain</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00831">res_pjsip.h:831</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a513bbf0084d764192b5fb60859b4547e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a513bbf0084d764192b5fb60859b4547e">&#9670;&nbsp;</a></span>ast_sip_create_dialog_uas()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_dialog* ast_sip_create_dialog_uas </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General purpose method for creating a UAS dialog with an endpoint. </p>
<dl class="deprecated"><dt><b><a class="el" href="../../da/d58/deprecated.html#_deprecated000010">Deprecated:</a></b></dt><dd>This function is unsafe (due to the returned object not being locked nor having its reference incremented) and should no longer be used. Instead use ast_sip_create_dialog_uas_locked so a properly locked and referenced object is returned.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">endpoint</td><td>A pointer to the endpoint </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">rdata</td><td>The request that is starting the dialog </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>On failure, the reason for failure in creating the dialog </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04233">4233</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04177">create_dialog_uas()</a>.</p>
<div class="fragment"><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;{</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;<span class="preprocessor">#ifdef HAVE_PJSIP_DLG_CREATE_UAS_AND_INC_LOCK</span></div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;   pjsip_dialog *dlg;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;   dlg = <a class="code" href="../../de/d96/res__pjsip_8c.html#a001d7f718db023957fc1794c311ee1fb">create_dialog_uas</a>(endpoint, rdata, <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, pjsip_dlg_create_uas_and_inc_lock);</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;   <span class="keywordflow">if</span> (dlg) {</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;      pjsip_dlg_dec_lock(dlg);</div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;   }</div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;</div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;   <span class="keywordflow">return</span> dlg;</div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a001d7f718db023957fc1794c311ee1fb">create_dialog_uas</a>(endpoint, rdata, <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, pjsip_dlg_create_uas);</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a001d7f718db023957fc1794c311ee1fb"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a001d7f718db023957fc1794c311ee1fb">create_dialog_uas</a></div><div class="ttdeci">static pjsip_dialog * create_dialog_uas(const struct ast_sip_endpoint *endpoint, pjsip_rx_data *rdata, pj_status_t *status, create_dlg_uac create_fun)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04177">res_pjsip.c:4177</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d885d67aea1a6b3419ea96692cd2527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d885d67aea1a6b3419ea96692cd2527">&#9670;&nbsp;</a></span>ast_sip_create_dialog_uas_locked()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_dialog* ast_sip_create_dialog_uas_locked </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_status_t *&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General purpose method for creating a UAS dialog with an endpoint. </p>
<p>This function creates and returns a locked, and referenced counted pjsip dialog object. The caller is thus responsible for freeing the allocated memory, decrementing the reference, and releasing the lock when done with the returned object.</p>
<dl class="section note"><dt>Note</dt><dd>The safest way to unlock the object, and decrement its reference is by calling pjsip_dlg_dec_lock. Alternatively, pjsip_dlg_dec_session can be used to decrement the reference only.</dd></dl>
<p>The dialog is returned locked and with a reference in order to ensure that the dialog object, and any of its associated objects (e.g. transaction) are not untimely destroyed. For instance, that could happen when a transport error occurs.</p>
<p>As long as the caller maintains a reference to the dialog there should be no worry that it might unknowningly be destroyed. However, once the caller unlocks the dialog there is a danger that some of the dialog's internal objects could be lost and/or compromised. For example, when the aforementioned transport error occurs the dialog's associated transaction gets destroyed (see pjsip_dlg_on_tsx_state in sip_dialog.c, and mod_inv_on_tsx_state in sip_inv.c).</p>
<p>In this case and before using the dialog again the caller should re-lock the dialog, check to make sure the dialog is still established, and the transaction still exists and has not been destroyed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">endpoint</td><td>A pointer to the endpoint </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">rdata</td><td>The request that is starting the dialog </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">status</td><td>On failure, the reason for failure in creating the dialog</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">A</td><td>locked, and reference counted pjsip_dialog object. </td></tr>
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04249">4249</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04177">create_dialog_uas()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01465">create_subscription_tree()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03789">pre_session_setup()</a>.</p>
<div class="fragment"><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;{</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;<span class="preprocessor">#ifdef HAVE_PJSIP_DLG_CREATE_UAS_AND_INC_LOCK</span></div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a001d7f718db023957fc1794c311ee1fb">create_dialog_uas</a>(endpoint, rdata, <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, pjsip_dlg_create_uas_and_inc_lock);</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;<span class="comment">    * This is put here in order to be compatible with older versions of pjproject.</span></div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;<span class="comment">    * Best we can do in this case is immediately lock after getting the dialog.</span></div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;<span class="comment">    * However, that does leave a &quot;gap&quot; between creating and locking.</span></div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;   pjsip_dialog *dlg;</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;   dlg = <a class="code" href="../../de/d96/res__pjsip_8c.html#a001d7f718db023957fc1794c311ee1fb">create_dialog_uas</a>(endpoint, rdata, <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, pjsip_dlg_create_uas);</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;   <span class="keywordflow">if</span> (dlg) {</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;      pjsip_dlg_inc_lock(dlg);</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;   }</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;   <span class="keywordflow">return</span> dlg;</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160; }</div><div class="ttc" id="res__pjsip_8c_html_a001d7f718db023957fc1794c311ee1fb"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a001d7f718db023957fc1794c311ee1fb">create_dialog_uas</a></div><div class="ttdeci">static pjsip_dialog * create_dialog_uas(const struct ast_sip_endpoint *endpoint, pjsip_rx_data *rdata, pj_status_t *status, create_dlg_uac create_fun)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04177">res_pjsip.c:4177</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a642d7c78b3c3f67018a6f93b739b8597"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a642d7c78b3c3f67018a6f93b739b8597">&#9670;&nbsp;</a></span>ast_sip_create_rdata()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_create_rdata </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>transport_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>local_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>local_port</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General purpose method for creating an rdata structure using specific information. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rdata[out]</td><td>The rdata structure that will be populated </td></tr>
    <tr><td class="paramname">packet</td><td>A SIP message </td></tr>
    <tr><td class="paramname">src_name</td><td>The source IP address of the message </td></tr>
    <tr><td class="paramname">src_port</td><td>The source port of the message </td></tr>
    <tr><td class="paramname">transport_type</td><td>The type of transport the message was received on </td></tr>
    <tr><td class="paramname">local_name</td><td>The local IP address the message was received on </td></tr>
    <tr><td class="paramname">local_port</td><td>The local port the message was received on</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04323">4323</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04271">ast_sip_create_rdata_with_contact()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;{</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#ab3ea73b499757767c1ecded1754d199a">ast_sip_create_rdata_with_contact</a>(rdata, packet, src_name, src_port, transport_type,</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;      local_name, local_port, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ab3ea73b499757767c1ecded1754d199a"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ab3ea73b499757767c1ecded1754d199a">ast_sip_create_rdata_with_contact</a></div><div class="ttdeci">int ast_sip_create_rdata_with_contact(pjsip_rx_data *rdata, char *packet, const char *src_name, int src_port, char *transport_type, const char *local_name, int local_port, const char *contact)</div><div class="ttdoc">General purpose method for creating an rdata structure using specific information. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04271">res_pjsip.c:4271</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab3ea73b499757767c1ecded1754d199a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3ea73b499757767c1ecded1754d199a">&#9670;&nbsp;</a></span>ast_sip_create_rdata_with_contact()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_create_rdata_with_contact </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>packet</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>src_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>transport_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>local_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>local_port</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>contact_uri</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General purpose method for creating an rdata structure using specific information. </p>
<dl class="section since"><dt>Since</dt><dd>13.15.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rdata[out]</td><td>The rdata structure that will be populated </td></tr>
    <tr><td class="paramname">packet</td><td>A SIP message </td></tr>
    <tr><td class="paramname">src_name</td><td>The source IP address of the message </td></tr>
    <tr><td class="paramname">src_port</td><td>The source port of the message </td></tr>
    <tr><td class="paramname">transport_type</td><td>The type of transport the message was received on </td></tr>
    <tr><td class="paramname">local_name</td><td>The local IP address the message was received on </td></tr>
    <tr><td class="paramname">local_port</td><td>The local port the message was received on </td></tr>
    <tr><td class="paramname">contact_uri</td><td>The contact URI of the message</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04271">4271</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04323">ast_sip_create_rdata()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01684">subscription_persistence_recreate()</a>.</p>
<div class="fragment"><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;{</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;   pj_str_t <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;<span class="comment">    * Initialize the error list in case there is a parse error</span></div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;<span class="comment">    * in the given packet.</span></div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;   pj_list_init(&amp;rdata-&gt;msg_info.parse_err);</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;   rdata-&gt;tp_info.transport = PJ_POOL_ZALLOC_T(rdata-&gt;tp_info.pool, pjsip_transport);</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;   <span class="keywordflow">if</span> (!rdata-&gt;tp_info.transport) {</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;   }</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(rdata-&gt;pkt_info.packet, packet, <span class="keyword">sizeof</span>(rdata-&gt;pkt_info.packet));</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(rdata-&gt;pkt_info.src_name, src_name, <span class="keyword">sizeof</span>(rdata-&gt;pkt_info.src_name));</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;   rdata-&gt;pkt_info.src_port = src_port;</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;   pj_sockaddr_parse(pj_AF_UNSPEC(), 0, pj_cstr(&amp;tmp, src_name), &amp;rdata-&gt;pkt_info.src_addr);</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;   pj_sockaddr_set_port(&amp;rdata-&gt;pkt_info.src_addr, src_port);</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;   pjsip_parse_rdata(packet, strlen(packet), rdata);</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;   <span class="keywordflow">if</span> (!rdata-&gt;msg_info.msg || !pj_list_empty(&amp;rdata-&gt;msg_info.parse_err)) {</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;   }</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d9/d03/structcontact.html">contact</a>)) {</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;      pjsip_contact_hdr *contact_hdr;</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;      contact_hdr = pjsip_msg_find_hdr(rdata-&gt;msg_info.msg, PJSIP_H_CONTACT, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;      <span class="keywordflow">if</span> (contact_hdr) {</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;         contact_hdr-&gt;uri = pjsip_parse_uri(rdata-&gt;tp_info.pool, (<span class="keywordtype">char</span> *)<a class="code" href="../../d9/d03/structcontact.html">contact</a>,</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;            strlen(contact), PJSIP_PARSE_URI_AS_NAMEADDR);</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;         <span class="keywordflow">if</span> (!contact_hdr-&gt;uri) {</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to parse contact URI from &#39;%s&#39;.\n&quot;</span>, contact);</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;         }</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;      }</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;   }</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;   pj_strdup2(rdata-&gt;tp_info.pool, &amp;rdata-&gt;msg_info.via-&gt;recvd_param, rdata-&gt;pkt_info.src_name);</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;   rdata-&gt;msg_info.via-&gt;rport_param = -1;</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;   rdata-&gt;tp_info.transport-&gt;key.type = pjsip_transport_get_type_from_name(pj_cstr(&amp;tmp, transport_type));</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;   rdata-&gt;tp_info.transport-&gt;type_name = transport_type;</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;   pj_strdup2(rdata-&gt;tp_info.pool, &amp;rdata-&gt;tp_info.transport-&gt;local_name.host, local_name);</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;   rdata-&gt;tp_info.transport-&gt;local_name.port = local_port;</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac981149e3fb0f7fc8b6e75607b1b2ad0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac981149e3fb0f7fc8b6e75607b1b2ad0">&#9670;&nbsp;</a></span>ast_sip_create_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_create_request </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjsip_dialog *&#160;</td>
          <td class="paramname"><em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *&#160;</td>
          <td class="paramname"><em>contact</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data **&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General purpose method for creating a SIP request. </p>
<p>Its typical use would be to create one-off requests such as an out of dialog SIP MESSAGE.</p>
<p>The request can either be in- or out-of-dialog. If in-dialog, the dlg parameter MUST be present. If out-of-dialog the endpoint parameter MUST be present. If both are present, then we will assume that the message is to be sent in-dialog.</p>
<p>The uri parameter can be specified if the request should be sent to an explicit URI rather than one configured on the endpoint.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">method</td><td>The method of the SIP request to send </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">dlg</td><td>Optional. If specified, the dialog on which to request the message. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">endpoint</td><td>Optional. If specified, the request will be created out-of-dialog to the endpoint. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">uri</td><td>Optional. If specified, the request will be sent to this URI rather than one configured for the endpoint. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">contact</td><td>The contact with which this request is associated for out-of-dialog requests. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tdata</td><td>The newly-created request</td></tr>
  </table>
  </dd>
</dl>
<p>The provided contact is attached to tdata with its reference bumped, but will not survive for the entire lifetime of tdata since the contact is cleaned up when all supplements have completed execution.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04490">4490</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04362">create_in_dialog_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04351">get_pjsip_method()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04336">pmethod</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l01221">msg_send()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00751">notify_channel()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00645">notify_contact()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00709">notify_uri()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00371">send_unsolicited_mwi_notify_to_contact()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02744">sendtext()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00847">sip_options_qualify_contact()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02218">transmit_info_dtmf()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01351">transmit_info_with_vidupdate()</a>.</p>
<div class="fragment"><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;{</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;   <span class="keyword">const</span> pjsip_method *<a class="code" href="../../de/d96/res__pjsip_8c.html#acbc0a9631742cb870f6ba56dcef1b75b">pmethod</a> = <a class="code" href="../../de/d96/res__pjsip_8c.html#aab40ce4ae2a2dd34cb70b0e76190113d">get_pjsip_method</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>);</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;   <span class="keywordflow">if</span> (!pmethod) {</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown method &#39;%s&#39;. Cannot send request\n&quot;</span>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>);</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;   }</div><div class="line"><a name="l04500"></a><span class="lineno"> 4500</span>&#160;</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;   <span class="keywordflow">if</span> (dlg) {</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a19ac5266932008840d797d3946819812">create_in_dialog_request</a>(pmethod, dlg, tdata);</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(endpoint != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a30c4a2058fe4ecb01a1cb8e4af76d7d2">create_out_of_dialog_request</a>(pmethod, endpoint, uri, contact, tdata);</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;   }</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_aab40ce4ae2a2dd34cb70b0e76190113d"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#aab40ce4ae2a2dd34cb70b0e76190113d">get_pjsip_method</a></div><div class="ttdeci">static const pjsip_method * get_pjsip_method(const char *method)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04351">res_pjsip.c:4351</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a19ac5266932008840d797d3946819812"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a19ac5266932008840d797d3946819812">create_in_dialog_request</a></div><div class="ttdeci">static int create_in_dialog_request(const pjsip_method *method, struct pjsip_dialog *dlg, pjsip_tx_data **tdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04362">res_pjsip.c:4362</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_acbc0a9631742cb870f6ba56dcef1b75b"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#acbc0a9631742cb870f6ba56dcef1b75b">pmethod</a></div><div class="ttdeci">const pjsip_method * pmethod</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04336">res_pjsip.c:4336</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a30c4a2058fe4ecb01a1cb8e4af76d7d2"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a30c4a2058fe4ecb01a1cb8e4af76d7d2">create_out_of_dialog_request</a></div><div class="ttdeci">static int create_out_of_dialog_request(const pjsip_method *method, struct ast_sip_endpoint *endpoint, const char *uri, struct ast_sip_contact *provided_contact, pjsip_tx_data **tdata)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04380">res_pjsip.c:4380</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aec0c3a5b05e151de8052f6b09950de92"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec0c3a5b05e151de8052f6b09950de92">&#9670;&nbsp;</a></span>ast_sip_create_request_with_auth()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_create_request_with_auth </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d0/dca/structast__sip__auth__vector.html">ast_sip_auth_vector</a> *&#160;</td>
          <td class="paramname"><em>auths</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>challenge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data **&#160;</td>
          <td class="paramname"><em>new_request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a response to an authentication challenge. </p>
<p>This will call into an outbound authenticator's create_request_with_auth callback to create a new request with authentication credentials. See the create_request_with_auth callback in the <a class="el" href="../../d0/dc2/structast__sip__outbound__authenticator.html">ast_sip_outbound_authenticator</a> structure for details about the parameters and return values. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03412">3412</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00986">ast_sip_outbound_authenticator::create_request_with_auth</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04894">check_request_status()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01056">handle_registration_response()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03231">outbound_invite_auth()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l04731">session_inv_on_tsx_state_changed()</a>, and <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l01260">sip_outbound_publish_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;{</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a>) {</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No SIP outbound authenticator registered. Cannot respond to authentication challenge\n&quot;</span>);</div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;   }</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a>-&gt;<a class="code" href="../../d0/dc2/structast__sip__outbound__authenticator.html#aeb719bf226b983ff14224fb2388a0466">create_request_with_auth</a>(auths, <a class="code" href="../../dd/db2/res__pjsip__authenticator__digest_8c.html#ad920f57db5e8c4e82e415be692af48a8">challenge</a>, old_request, new_request);</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__sip__outbound__authenticator_html_aeb719bf226b983ff14224fb2388a0466"><div class="ttname"><a href="../../d0/dc2/structast__sip__outbound__authenticator.html#aeb719bf226b983ff14224fb2388a0466">ast_sip_outbound_authenticator::create_request_with_auth</a></div><div class="ttdeci">int(* create_request_with_auth)(const struct ast_sip_auth_vector *auths, struct pjsip_rx_data *challenge, struct pjsip_tx_data *old_request, struct pjsip_tx_data **new_request)</div><div class="ttdoc">Create a new request with authentication credentials. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00986">res_pjsip.h:986</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a18741a3257cf9d9ae4f755778d97f716"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a></div><div class="ttdeci">static struct ast_sip_outbound_authenticator * registered_outbound_authenticator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03387">res_pjsip.c:3387</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip__authenticator__digest_8c_html_ad920f57db5e8c4e82e415be692af48a8"><div class="ttname"><a href="../../dd/db2/res__pjsip__authenticator__digest_8c.html#ad920f57db5e8c4e82e415be692af48a8">challenge</a></div><div class="ttdeci">static void challenge(const char *realm, pjsip_tx_data *tdata, const pjsip_rx_data *rdata, int is_stale)</div><div class="ttdoc">astobj2 callback for adding digest challenges to responses </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db2/res__pjsip__authenticator__digest_8c_source.html#l00377">res_pjsip_authenticator_digest.c:377</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aff5f8de6e4d5fac50583a2d406471b9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff5f8de6e4d5fac50583a2d406471b9f">&#9670;&nbsp;</a></span>ast_sip_create_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_create_response </td>
          <td>(</td>
          <td class="paramtype">const pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>st_code</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *&#160;</td>
          <td class="paramname"><em>contact</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data **&#160;</td>
          <td class="paramname"><em>p_tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General purpose method for creating a SIP response. </p>
<p>Its typical use would be to create responses for out of dialog requests.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">rdata</td><td>The rdata from the incoming request. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">st_code</td><td>The response code to transmit. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">contact</td><td>The contact with which this request is associated. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tdata</td><td>The newly-created response</td></tr>
  </table>
  </dd>
</dl>
<p>The provided contact is attached to tdata with its reference bumped, but will not survive for the entire lifetime of tdata since the contact is cleaned up when all supplements have completed execution.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05448">5448</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02670">ast_sip_mod_data_set</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03264">MOD_DATA_CONTACT</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04373">supplement_module</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l00584">register_aor_core()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00215">send_options_response()</a>, and <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l01378">send_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;{</div><div class="line"><a name="l05451"></a><span class="lineno"> 5451</span>&#160;   <span class="keywordtype">int</span> res = pjsip_endpt_create_response(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), rdata, st_code, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, tdata);</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;</div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a>((*tdata)-&gt;pool, (*tdata)-&gt;mod_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>.id, <a class="code" href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(contact));</div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;   }</div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ad4148e8b866195343e8ee93ba9dd229f"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a></div><div class="ttdeci">static pjsip_module supplement_module</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04373">res_pjsip.c:4373</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9937f98867d28da0cc0e8590d9c9ffa4"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a></div><div class="ttdeci">#define ast_sip_mod_data_set(pool, mod_data, id, key, val)</div><div class="ttdoc">Utilizing a mod_data array for a given id, set the value associated with the given key...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02670">res_pjsip.h:2670</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a38381dc3e18f7d4bffe6533bac848ca3"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a></div><div class="ttdeci">#define MOD_DATA_CONTACT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03264">res_pjsip.c:3264</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6245a7a570f7e3909edc946b5584fb9a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6245a7a570f7e3909edc946b5584fb9a">&#9670;&nbsp;</a></span>ast_sip_dict_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_sip_dict_get </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieves the value associated with the given key. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ht</td><td>the hash table/dictionary to search </td></tr>
    <tr><td class="paramname">key</td><td>the key to find</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>value associated with the key, NULL otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05338">5338</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;{</div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hval = 0;</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;</div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;   <span class="keywordflow">if</span> (!ht) {</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;   }</div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;</div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;   <span class="keywordflow">return</span> pj_hash_get(ht, key, PJ_HASH_KEY_STRING, &amp;hval);</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd2eda720356f96b1d56a95321502eeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd2eda720356f96b1d56a95321502eeb">&#9670;&nbsp;</a></span>ast_sip_dict_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* ast_sip_dict_set </td>
          <td>(</td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ht</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>val</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the value for the given key. </p>
<p>Note - if the hash table does not exist one is created first, the key/value pair is set, and the hash table returned.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>the pool to allocate memory in </td></tr>
    <tr><td class="paramname">ht</td><td>the hash table/dictionary in which to store the key/value pair </td></tr>
    <tr><td class="paramname">key</td><td>the key to associate a value with </td></tr>
    <tr><td class="paramname">val</td><td>the value to associate with a key</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">the</td><td>given, or newly created, hash table. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05349">5349</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>
<div class="fragment"><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;{</div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;   <span class="keywordflow">if</span> (!ht) {</div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;      ht = pj_hash_create(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, 11);</div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;   }</div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;</div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;   pj_hash_set(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, ht, key, PJ_HASH_KEY_STRING, 0, <a class="code" href="../../d5/d85/structval.html">val</a>);</div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;</div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;   <span class="keywordflow">return</span> ht;</div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;}</div><div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8871b0dfc62c06643cbfc0e2493d22a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8871b0dfc62c06643cbfc0e2493d22a0">&#9670;&nbsp;</a></span>ast_sip_dlg_set_transport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_dlg_set_transport </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_dialog *&#160;</td>
          <td class="paramname"><em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tpselector *&#160;</td>
          <td class="paramname"><em>selector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the transport on a dialog. </p>
<dl class="section since"><dt>Since</dt><dd>13.15.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td></td></tr>
    <tr><td class="paramname">dlg</td><td></td></tr>
    <tr><td class="paramname">selector</td><td>(optional)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This API calls ast_sip_get_transport_name(endpoint, dlg-&gt;target) and if the result is non-NULL, calls pjsip_dlg_set_transport. If 'selector' is non-NULL, it is updated with the selector used.</dd>
<dd>
It is the responsibility of the caller to unref the passed in selector if one is provided. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03791">3791</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03975">ast_sip_set_tpselector_from_ep_or_uri()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03987">ast_sip_tpselector_unref()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04028">ast_sip_create_dialog_uac()</a>.</p>
<div class="fragment"><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;{</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;   pjsip_sip_uri *uri;</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;   pjsip_tpselector sel = { .type = PJSIP_TPSELECTOR_NONE, };</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;   uri = pjsip_uri_get_uri(dlg-&gt;target);</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;   <span class="keywordflow">if</span> (!selector) {</div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;      selector = &amp;sel;</div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;   }</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a74c80b6cedcf4cc847f2b81ba6437337">ast_sip_set_tpselector_from_ep_or_uri</a>(endpoint, uri, selector);</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;   pjsip_dlg_set_transport(dlg, selector);</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;   <span class="keywordflow">if</span> (selector == &amp;sel) {</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a>(&amp;sel);</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;   }</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a74c80b6cedcf4cc847f2b81ba6437337"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a74c80b6cedcf4cc847f2b81ba6437337">ast_sip_set_tpselector_from_ep_or_uri</a></div><div class="ttdeci">int ast_sip_set_tpselector_from_ep_or_uri(const struct ast_sip_endpoint *endpoint, pjsip_sip_uri *sip_uri, pjsip_tpselector *selector)</div><div class="ttdoc">Sets pjsip_tpselector from an endpoint or uri. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03975">res_pjsip.c:3975</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a9e1ef995698ba16cad6608225b8de946"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a></div><div class="ttdeci">void ast_sip_tpselector_unref(pjsip_tpselector *selector)</div><div class="ttdoc">Unreference a pjsip_tpselector. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03987">res_pjsip.c:3987</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a70a5c3ffebc2d2aaf9a3c5f661d2287c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70a5c3ffebc2d2aaf9a3c5f661d2287c">&#9670;&nbsp;</a></span>ast_sip_dtmf_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_dtmf_to_str </td>
          <td>(</td>
          <td class="paramtype">const enum <a class="el" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1f">ast_sip_dtmf_mode</a>&#160;</td>
          <td class="paramname"><em>dtmf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buf_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the DTMF mode enum value into a string. </p>
<dl class="section since"><dt>Since</dt><dd>13.18.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dtmf</td><td>the dtmf mode </td></tr>
    <tr><td class="paramname">buf</td><td>Buffer to receive dtmf mode string </td></tr>
    <tr><td class="paramname">buf_len</td><td>Buffer length</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05484">5484</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00419">AST_SIP_DTMF_AUTO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00421">AST_SIP_DTMF_AUTO_INFO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00415">AST_SIP_DTMF_INBAND</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00417">AST_SIP_DTMF_INFO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00410">AST_SIP_DTMF_NONE</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00413">AST_SIP_DTMF_RFC_4733</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00159">dtmf_to_str()</a>, and <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01429">pjsip_acf_dtmf_mode_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;{</div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;   <span class="keywordflow">switch</span> (dtmf) {</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe">AST_SIP_DTMF_NONE</a>:</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;none&quot;</span>, buf_len);</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a>:</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;rfc4733&quot;</span>, buf_len);</div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a>:</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;inband&quot;</span>, buf_len);</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1faacdd9acc98ab208a9f83724cc61f667d">AST_SIP_DTMF_INFO</a>:</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;info&quot;</span>, buf_len);</div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a>:</div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;auto&quot;</span>, buf_len);</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a>:</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;auto_info&quot;</span>, buf_len);</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;      <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;   }</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05511"></a><span class="lineno"> 5511</span>&#160;}</div><div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1faacdd9acc98ab208a9f83724cc61f667d"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1faacdd9acc98ab208a9f83724cc61f667d">AST_SIP_DTMF_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00417">res_pjsip.h:417</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00421">res_pjsip.h:421</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00415">res_pjsip.h:415</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00419">res_pjsip.h:419</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00413">res_pjsip.h:413</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe">AST_SIP_DTMF_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00410">res_pjsip.h:410</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afa22bc164a1c4108006f96822318ff14"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afa22bc164a1c4108006f96822318ff14">&#9670;&nbsp;</a></span>ast_sip_failover_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_failover_request </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a request to use the next value in the list of resolved addresses. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tdata</td><td>the tx data from the original request </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>No more addresses to try </td></tr>
    <tr><td class="paramname">1</td><td>The request was successfully re-intialized </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04871">4871</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04937">send_request_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04894">check_request_status()</a>, and <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01056">handle_registration_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;{</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;   pjsip_via_hdr *via;</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;   <span class="keywordflow">if</span> (!tdata || !tdata-&gt;dest_info.addr.count</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;      || (tdata-&gt;dest_info.cur_addr == tdata-&gt;dest_info.addr.count - 1)) {</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;      <span class="comment">/* No more addresses to try */</span></div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;   }</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;   <span class="comment">/* Try next address */</span></div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;   ++tdata-&gt;dest_info.cur_addr;</div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;</div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;   via = (pjsip_via_hdr*)pjsip_msg_find_hdr(tdata-&gt;msg, PJSIP_H_VIA, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;   via-&gt;branch_param.slen = 0;</div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;</div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;   pjsip_tx_data_invalidate_msg(tdata);</div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;</div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a700cedfe01ae2e796a902b52a10b88d5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a700cedfe01ae2e796a902b52a10b88d5">&#9670;&nbsp;</a></span>ast_sip_format_endpoint_ami()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_format_endpoint_ami </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d4/d2f/structast__sip__ami.html">ast_sip_ami</a> *&#160;</td>
          <td class="paramname"><em>ami</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>count</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Formats the endpoint and sends over AMI. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>the endpoint to format and send </td></tr>
    <tr><td class="paramname">endpoint</td><td>ami AMI variable container </td></tr>
    <tr><td class="paramname">count</td><td>the number of formatters operated on </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success, otherwise non-zero on error </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03699">3699</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02767">ast_sip_endpoint_formatter::format_ami</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01676">ami_show_endpoint()</a>.</p>
<div class="fragment"><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;{</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d30/structast__sip__endpoint__formatter.html">ast_sip_endpoint_formatter</a> *i;</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;   *count = 0;</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a>, i, next) {</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;      <span class="keywordflow">if</span> (i-&gt;<a class="code" href="../../d6/d30/structast__sip__endpoint__formatter.html#a7b53303276b0b01f525bd66ec7e7b91e">format_ami</a> &amp;&amp; ((res = i-&gt;<a class="code" href="../../d6/d30/structast__sip__endpoint__formatter.html#a7b53303276b0b01f525bd66ec7e7b91e">format_ami</a>(endpoint, ami)) &lt; 0)) {</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;         <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;      }</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;         (*count)++;</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;      }</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;   }</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint__formatter_html"><div class="ttname"><a href="../../d6/d30/structast__sip__endpoint__formatter.html">ast_sip_endpoint_formatter</a></div><div class="ttdoc">An entity responsible formatting endpoint information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02763">res_pjsip.h:2763</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="structast__sip__endpoint__formatter_html_a7b53303276b0b01f525bd66ec7e7b91e"><div class="ttname"><a href="../../d6/d30/structast__sip__endpoint__formatter.html#a7b53303276b0b01f525bd66ec7e7b91e">ast_sip_endpoint_formatter::format_ami</a></div><div class="ttdeci">int(* format_ami)(const struct ast_sip_endpoint *endpoint, struct ast_sip_ami *ami)</div><div class="ttdoc">Callback used to format endpoint information over AMI. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02767">res_pjsip.h:2767</a></div></div>
<div class="ttc" id="structendpoint__formatters_html"><div class="ttname"><a href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03677">res_pjsip.c:3677</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2941aa89b7c107383f8fe56df635043f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2941aa89b7c107383f8fe56df635043f">&#9670;&nbsp;</a></span>ast_sip_get_host_ip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_get_host_ip </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>af</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_sockaddr *&#160;</td>
          <td class="paramname"><em>addr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the local host address in IP form. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">af</td><td>The address family to retrieve </td></tr>
    <tr><td class="paramname">addr</td><td>A place to store the local host address</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>13.6.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05460">5460</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03277">host_ip_ipv4</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03280">host_ip_ipv4_string</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03283">host_ip_ipv6</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03286">host_ip_ipv6_string</a>.</p>
<div class="fragment"><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;{</div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;   <span class="keywordflow">if</span> (af == pj_AF_INET() &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#ada98f7e6ae63b0ee6f4c0642d67f48ad">host_ip_ipv4_string</a>)) {</div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;      pj_sockaddr_copy_addr(addr, &amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a0509a7fd8d03feaa2d66bcfed88ddf63">host_ip_ipv4</a>);</div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (af == pj_AF_INET6() &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a86180705d1f71413b4f8923366096ab3">host_ip_ipv6_string</a>)) {</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;      pj_sockaddr_copy_addr(addr, &amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8a9f45451fc8ed560864ab05df8d13b9">host_ip_ipv6</a>);</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;   }</div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;</div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a8a9f45451fc8ed560864ab05df8d13b9"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8a9f45451fc8ed560864ab05df8d13b9">host_ip_ipv6</a></div><div class="ttdeci">static pj_sockaddr host_ip_ipv6</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03283">res_pjsip.c:3283</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a86180705d1f71413b4f8923366096ab3"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a86180705d1f71413b4f8923366096ab3">host_ip_ipv6_string</a></div><div class="ttdeci">static char host_ip_ipv6_string[PJ_INET6_ADDRSTRLEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03286">res_pjsip.c:3286</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ada98f7e6ae63b0ee6f4c0642d67f48ad"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ada98f7e6ae63b0ee6f4c0642d67f48ad">host_ip_ipv4_string</a></div><div class="ttdeci">static char host_ip_ipv4_string[PJ_INET6_ADDRSTRLEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03280">res_pjsip.c:3280</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0509a7fd8d03feaa2d66bcfed88ddf63"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0509a7fd8d03feaa2d66bcfed88ddf63">host_ip_ipv4</a></div><div class="ttdeci">static pj_sockaddr host_ip_ipv4</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03277">res_pjsip.c:3277</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6da8e5c5006c0a1c81feb1198ab7e6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6da8e5c5006c0a1c81feb1198ab7e6e">&#9670;&nbsp;</a></span>ast_sip_get_host_ip_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_sip_get_host_ip_string </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>af</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the local host address in string form. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">af</td><td>The address family to retrieve</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-NULL</td><td>success </td></tr>
    <tr><td class="paramname">NULL</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>13.6.0</dd></dl>
<dl class="section note"><dt>Note</dt><dd>An empty string may be returned if the address family is valid but no local address exists </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05473">5473</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03280">host_ip_ipv4_string</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03286">host_ip_ipv6_string</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05081">create_local_sdp()</a>, <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l01704">create_outgoing_sdp_stream()</a>, and <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00146">multihomed_rewrite_sdp()</a>.</p>
<div class="fragment"><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;{</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;   <span class="keywordflow">if</span> (af == pj_AF_INET()) {</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#ada98f7e6ae63b0ee6f4c0642d67f48ad">host_ip_ipv4_string</a>;</div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (af == pj_AF_INET6()) {</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a86180705d1f71413b4f8923366096ab3">host_ip_ipv6_string</a>;</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;   }</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a86180705d1f71413b4f8923366096ab3"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a86180705d1f71413b4f8923366096ab3">host_ip_ipv6_string</a></div><div class="ttdeci">static char host_ip_ipv6_string[PJ_INET6_ADDRSTRLEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03286">res_pjsip.c:3286</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ada98f7e6ae63b0ee6f4c0642d67f48ad"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ada98f7e6ae63b0ee6f4c0642d67f48ad">host_ip_ipv4_string</a></div><div class="ttdeci">static char host_ip_ipv4_string[PJ_INET6_ADDRSTRLEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03280">res_pjsip.c:3280</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a785afb501e315c8a97ad476fb6a8be1d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a785afb501e315c8a97ad476fb6a8be1d">&#9670;&nbsp;</a></span>ast_sip_get_pjsip_endpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_endpoint* ast_sip_get_pjsip_endpoint </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a pointer to the PJSIP endpoint. </p>
<p>This is useful when modules have specific information they need to register with the PJSIP core. </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>endpoint has not been created yet. </td></tr>
    <tr><td class="paramname">non-NULL</td><td>PJSIP endpoint. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">3718</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03272">ast_pjsip_endpoint</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d5e/res__pjsip__acl_8c_source.html#l00215">acl_on_rx_msg()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02835">ast_res_pjsip_cleanup_options_handling()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02918">ast_res_pjsip_init_options_handling()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05448">ast_sip_create_response()</a>, <a class="el" href="../../d1/d94/pjsip__transport__events_8c_source.html#l00382">ast_sip_destroy_transport_events()</a>, <a class="el" href="../../d1/d94/pjsip__transport__events_8c_source.html#l00394">ast_sip_initialize_transport_events()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03440">ast_sip_pubsub_register_body_generator()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05407">ast_sip_send_response()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03554">ast_sip_session_defer_termination()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02798">ast_sip_session_resume_reinvite()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00880">authenticate()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00363">cancel_publish_refresh()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l00544">cancel_registration()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l00760">channel_read_pjsip()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>, <a class="el" href="../../d4/d61/res__pjsip__outbound__authenticator__digest_8c_source.html#l00410">digest_create_request_with_auth()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00943">distribute()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00485">distributor()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03558">do_cli_dump_endpt()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00718">endpoint_lookup()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04751">endpt_send_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04628">endpt_send_request_cb()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00482">exten_state_data_alloc()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00470">exten_state_data_destructor()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00619">exten_state_publisher_cb()</a>, <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00225">filter_on_tx_message()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01007">find_registrar_aor()</a>, <a class="el" href="../../da/db9/pjsip__transport__management_8c_source.html#l00059">keepalive_transport_send_keepalive()</a>, <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l01566">load_module()</a>, <a class="el" href="../../d7/da2/res__hep__pjsip_8c_source.html#l00156">logging_on_rx_msg()</a>, <a class="el" href="../../d7/da2/res__hep__pjsip_8c_source.html#l00083">logging_on_tx_msg()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00288">notify_task()</a>, <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00446">on_rx_process_uris()</a>, <a class="el" href="../../d2/d3b/res__pjsip__dlg__options_8c_source.html#l00039">options_incoming_request()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01121">parse_uri_cb()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03789">pre_session_setup()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03214">publish_request_initial()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03614">pubsub_on_rx_mwi_notify_request()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03326">pubsub_on_rx_publish_request()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l02969">pubsub_on_rx_subscribe_request()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l00900">register_aor()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l00584">register_aor_core()</a>, <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l01076">registrar_on_rx_request()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l04269">reschedule_reinvite()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00373">schedule_publish_refresh()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l00721">schedule_registration()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00215">send_options_response()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l02733">session_reinvite_on_rx_request()</a>, <a class="el" href="../../d4/d43/pjsip__resolver_8c_source.html#l00636">sip_check_transport()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01388">sip_dialog_create_contact()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03813">sip_dialog_create_from()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00935">sip_outbound_publisher_init()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01603">sip_outbound_registration_regc_alloc()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03179">sip_publication_respond()</a>, <a class="el" href="../../d4/d43/pjsip__resolver_8c_source.html#l00683">sip_replace_resolver()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l03588">sip_session_defer_termination_stop_timer()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l01750">subscription_persistence_load()</a>, <a class="el" href="../../df/dfd/config__system_8c_source.html#l00250">system_create_resolver_and_set_nameservers()</a>, <a class="el" href="../../dc/d80/res__pjsip__t38_8c_source.html#l00129">t38_change_state()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00632">transport_apply()</a>, and <a class="el" href="../../d2/db8/res__pjsip__transport__websocket_8c_source.html#l00149">transport_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;{</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>;</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a0154360b6fa47543e1e0f9203a7aa458"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a></div><div class="ttdeci">static pjsip_endpoint * ast_pjsip_endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03272">res_pjsip.c:3272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa1c1bd79cf3f3c57a0efbfd31ff45f2f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa1c1bd79cf3f3c57a0efbfd31ff45f2f">&#9670;&nbsp;</a></span>ast_sip_get_transport_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_get_transport_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_sip_uri *&#160;</td>
          <td class="paramname"><em>sip_uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buf_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the transport name from an endpoint or request uri. </p>
<dl class="section since"><dt>Since</dt><dd>13.15.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td></td></tr>
    <tr><td class="paramname">sip_uri</td><td></td></tr>
    <tr><td class="paramname">buf</td><td>Buffer to receive transport name </td></tr>
    <tr><td class="paramname">buf_len</td><td>Buffer length</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If endpoint-&gt;transport is not NULL, it is returned in buf. Otherwise if sip_uri has an 'x-ast-txp' parameter AND the sip_uri host is an ip4 or ip6 address, its value is returned, </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03762">3762</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05240">ast_copy_pj_str()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00909">AST_SIP_X_AST_TXP</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00910">AST_SIP_X_AST_TXP_LEN</a>, <a class="el" href="../../d4/d27/netsock2_8c_source.html#l00230">ast_sockaddr_parse()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">PARSE_PORT_FORBID</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00817">ast_sip_endpoint::transport</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03975">ast_sip_set_tpselector_from_ep_or_uri()</a>.</p>
<div class="fragment"><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;{</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t x_name = { <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a643c3def003b3009563b8427d10ed0d6">AST_SIP_X_AST_TXP</a>, <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ada35df7749f7a33221d126acc6e13b57">AST_SIP_X_AST_TXP_LEN</a> };</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;   pjsip_param *x_transport;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">transport</a>)) {</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">transport</a>, buf_len);</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;   }</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;   x_transport = pjsip_param_find(&amp;sip_uri-&gt;other_param, &amp;x_name);</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;   <span class="keywordflow">if</span> (!x_transport) {</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;   }</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;   <span class="comment">/* Only use x_transport if the uri host is an ip (4 or 6) address */</span></div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;   host = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(sip_uri-&gt;host.slen + 1);</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(host, &amp;sip_uri-&gt;host, sip_uri-&gt;host.slen + 1);</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, host, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a>)) {</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;   }</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, &amp;x_transport-&gt;value, buf_len);</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_aad98818272870e12d48fe4347aaa46d0"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aad98818272870e12d48fe4347aaa46d0">ast_sockaddr_parse</a></div><div class="ttdeci">int ast_sockaddr_parse(struct ast_sockaddr *addr, const char *str, int flags)</div><div class="ttdoc">Parse an IPv4 or IPv6 address string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d27/netsock2_8c_source.html#l00230">netsock2.c:230</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a44cdbda076f37ba09880ba74d942b606"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">ast_sip_endpoint::transport</a></div><div class="ttdeci">const ast_string_field transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00817">res_pjsip.h:817</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ad60d9d8c34b4f61493c1d85ae02d569fa42789f26318ec8def793a3df3a35efe3">PARSE_PORT_FORBID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l01135">include/asterisk/config.h:1135</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a7da3e1f7ee3fcb77f29d41a76a7528fe"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a7da3e1f7ee3fcb77f29d41a76a7528fe">ast_copy_pj_str</a></div><div class="ttdeci">void ast_copy_pj_str(char *dest, const pj_str_t *src, size_t size)</div><div class="ttdoc">Copy a pj_str_t into a standard character buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05240">res_pjsip.c:5240</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ada35df7749f7a33221d126acc6e13b57"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ada35df7749f7a33221d126acc6e13b57">AST_SIP_X_AST_TXP_LEN</a></div><div class="ttdeci">#define AST_SIP_X_AST_TXP_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00910">res_pjsip.h:910</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a643c3def003b3009563b8427d10ed0d6"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a643c3def003b3009563b8427d10ed0d6">AST_SIP_X_AST_TXP</a></div><div class="ttdeci">#define AST_SIP_X_AST_TXP</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00909">res_pjsip.h:909</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aca93ad473a36034768c5d504ab991e06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aca93ad473a36034768c5d504ab991e06">&#9670;&nbsp;</a></span>ast_sip_identify_endpoint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a>* ast_sip_identify_endpoint </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine the endpoint that has sent a SIP message. </p>
<p>This will call into each of the registered endpoint identifiers' identify_endpoint() callbacks until one returns a non-NULL endpoint. This will return an ao2 object. Its reference count will need to be decremented when completed using the endpoint.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rdata</td><td>The inbound SIP message to use when identifying the endpoint. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>No matching endpoint </td></tr>
    <tr><td class="paramname">non-NULL</td><td>The matching endpoint </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03528">3528</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03425">endpoint_identifier_list::identifier</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00998">ast_sip_endpoint_identifier::identify_endpoint</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00718">endpoint_lookup()</a>.</p>
<div class="fragment"><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;{</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d73/structendpoint__identifier__list.html">endpoint_identifier_list</a> *iter;</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, iter, list) {</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(iter-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a7f1bfe31ef240c6c5e0a688bace06214">identifier</a>-&gt;<a class="code" href="../../d0/d97/structast__sip__endpoint__identifier.html#a70e9eb29aa44b8d1b8e2e158b97bb11c">identify_endpoint</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;      endpoint = iter-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a7f1bfe31ef240c6c5e0a688bace06214">identifier</a>-&gt;<a class="code" href="../../d0/d97/structast__sip__endpoint__identifier.html#a70e9eb29aa44b8d1b8e2e158b97bb11c">identify_endpoint</a>(rdata);</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;      <span class="keywordflow">if</span> (endpoint) {</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;      }</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;   }</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;   <span class="keywordflow">return</span> endpoint;</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="structast__sip__endpoint__identifier_html_a70e9eb29aa44b8d1b8e2e158b97bb11c"><div class="ttname"><a href="../../d0/d97/structast__sip__endpoint__identifier.html#a70e9eb29aa44b8d1b8e2e158b97bb11c">ast_sip_endpoint_identifier::identify_endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint *(* identify_endpoint)(pjsip_rx_data *rdata)</div><div class="ttdoc">Callback used to identify the source of a message. See ast_sip_identify_endpoint for more details...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00998">res_pjsip.h:998</a></div></div>
<div class="ttc" id="structendpoint__identifier__list_html"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html">endpoint_identifier_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03422">res_pjsip.c:3422</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a></div><div class="ttdoc">An entity with which Asterisk communicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00812">res_pjsip.h:812</a></div></div>
<div class="ttc" id="structendpoint__identifier__list_html_a7f1bfe31ef240c6c5e0a688bace06214"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html#a7f1bfe31ef240c6c5e0a688bace06214">endpoint_identifier_list::identifier</a></div><div class="ttdeci">struct ast_sip_endpoint_identifier * identifier</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03425">res_pjsip.c:3425</a></div></div>
<div class="ttc" id="structendpoint__identifiers_html"><div class="ttname"><a href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03429">res_pjsip.c:3429</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae47a39537fdf10ceba2fad9d9c380179"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae47a39537fdf10ceba2fad9d9c380179">&#9670;&nbsp;</a></span>ast_sip_is_content_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_is_content_type </td>
          <td>(</td>
          <td class="paramtype">pjsip_media_type *&#160;</td>
          <td class="paramname"><em>content_type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>subtype</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks if the given content type matches type/subtype. </p>
<p>Compares the pjsip_media_type with the passed type and subtype and returns the result of that comparison. The media type parameters are ignored.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">content_type</td><td>The pjsip_media_type structure to compare </td></tr>
    <tr><td class="paramname">type</td><td>The media type to compare </td></tr>
    <tr><td class="paramname">subtype</td><td>The media subtype to compare </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>No match </td></tr>
    <tr><td class="paramname">-1</td><td>Match </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05259">5259</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00188">compare()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00594">asterisk_publication_devicestate_state_change()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00685">asterisk_publication_mwi_state_change()</a>, <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l00151">check_content_type()</a>, <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00225">filter_on_tx_message()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l03697">pubsub_on_rx_notify_request()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05457">session_outgoing_nat_hook()</a>, and <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02295">video_info_incoming_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;{</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;   pjsip_media_type <a class="code" href="../../d0/de2/app__directory_8c.html#adf773af7f5d8ca288a3a68fc3659d95c">compare</a>;</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;   <span class="keywordflow">if</span> (!content_type) {</div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;   }</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;   pjsip_media_type_init2(&amp;compare, <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, subtype);</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;   <span class="keywordflow">return</span> pjsip_media_type_cmp(content_type, &amp;compare, 0) ? 0 : -1;</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="app__directory_8c_html_adf773af7f5d8ca288a3a68fc3659d95c"><div class="ttname"><a href="../../d0/de2/app__directory_8c.html#adf773af7f5d8ca288a3a68fc3659d95c">compare</a></div><div class="ttdeci">static int compare(const char *text, const char *template)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/de2/app__directory_8c_source.html#l00188">app_directory.c:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afe1cbe99a485f1e003ecc829b5885eeb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe1cbe99a485f1e003ecc829b5885eeb">&#9670;&nbsp;</a></span>ast_sip_modify_id_header()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_modify_id_header </td>
          <td>(</td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_fromto_hdr *&#160;</td>
          <td class="paramname"><em>id_hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d1/dcb/structast__party__id.html">ast_party_id</a> *&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set name and number information on an identity header. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pool</td><td>Memory pool to use for string duplication </td></tr>
    <tr><td class="paramname">id_hdr</td><td>A From, P-Asserted-Identity, or Remote-Party-ID header to modify </td></tr>
    <tr><td class="paramname">id</td><td>The identity information to apply to the header </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05587">5587</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00635">ast_escape_quoted()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00341">ast_party_id::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00343">ast_party_id::number</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00265">ast_party_name::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00292">ast_party_number::str</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00280">ast_party_name::valid</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00298">ast_party_number::valid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00563">add_pai_header()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00699">add_rpid_header()</a>, and <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01637">set_from_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;{</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;   pjsip_name_addr *id_name_addr;</div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;   pjsip_sip_uri *id_uri;</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;</div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;   id_name_addr = (pjsip_name_addr *) id_hdr-&gt;uri;</div><div class="line"><a name="l05593"></a><span class="lineno"> 5593</span>&#160;   id_uri = pjsip_uri_get_uri(id_name_addr-&gt;uri);</div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;</div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;   <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>)) {</div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;         <span class="keywordtype">int</span> name_buf_len = strlen(id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>) * 2 + 1;</div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;         <span class="keywordtype">char</span> *name_buf = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(name_buf_len);</div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;</div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a4b31ed81ab98c5aa5fc1d298874abf54">ast_escape_quoted</a>(id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, name_buf, name_buf_len);</div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;         pj_strdup2(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;id_name_addr-&gt;display, name_buf);</div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;         pj_strdup2(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;id_name_addr-&gt;display, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;      }</div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;   }</div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;</div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;   <span class="keywordflow">if</span> (id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>) {</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;      pj_strdup2(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;id_uri-&gt;user, id-&gt;<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>);</div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;   }</div><div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;}</div><div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="utils_8h_html_a4b31ed81ab98c5aa5fc1d298874abf54"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4b31ed81ab98c5aa5fc1d298874abf54">ast_escape_quoted</a></div><div class="ttdeci">char * ast_escape_quoted(const char *string, char *outbuf, int buflen)</div><div class="ttdoc">Escape characters found in a quoted string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00635">main/utils.c:635</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d0e736f5afb58090c07900cfc4d57e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d0e736f5afb58090c07900cfc4d57e6">&#9670;&nbsp;</a></span>ast_sip_push_task_wait()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int ast_sip_push_task_wait </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *&#160;</td>
          <td class="paramname"><em>serializer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(void *)&#160;</td>
          <td class="paramname"><em>sip_task</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>task_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05176">5176</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05138">ast_sip_push_task()</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01279">sync_task_data::complete</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01278">sync_task_data::cond</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05151">sync_task_data::fail</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01277">sync_task_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05156">sync_task()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05152">sync_task_data::task</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01280">sync_task_data::task_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05218">ast_sip_push_task_wait_serializer()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>.</p>
<div class="fragment"><div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;{</div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;   <span class="comment">/* This method is an onion */</span></div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dc8/structsync__task__data.html">sync_task_data</a> std;</div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;</div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;   memset(&amp;std, 0, <span class="keyword">sizeof</span>(std));</div><div class="line"><a name="l05182"></a><span class="lineno"> 5182</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;std.lock);</div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;std.cond, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;   std.task = sip_task;</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;   std.task_data = <a class="code" href="../../d1/dc8/structsync__task__data.html#ac3dfbfc918763b506931680bcf2040a8">task_data</a>;</div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a>(serializer, <a class="code" href="../../de/d96/res__pjsip_8c.html#af7174c1f990ccb004c6b2d5b2b930af8">sync_task</a>, &amp;std)) {</div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;std.lock);</div><div class="line"><a name="l05189"></a><span class="lineno"> 5189</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;std.cond);</div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;   }</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;</div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;std.lock);</div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;   <span class="keywordflow">while</span> (!std.complete) {</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;std.cond, &amp;std.lock);</div><div class="line"><a name="l05196"></a><span class="lineno"> 5196</span>&#160;   }</div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;std.lock);</div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;</div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;std.lock);</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;std.cond);</div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;   <span class="keywordflow">return</span> std.fail;</div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;}</div><div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsync__task__data_html"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html">sync_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01276">stasis.c:1276</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_ga4f0a0629fa2ca084812772356d8e3565"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#ga4f0a0629fa2ca084812772356d8e3565">ast_sip_push_task</a></div><div class="ttdeci">int ast_sip_push_task(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Pushes a task to SIP servants. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05138">res_pjsip.c:5138</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_af7174c1f990ccb004c6b2d5b2b930af8"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#af7174c1f990ccb004c6b2d5b2b930af8">sync_task</a></div><div class="ttdeci">static int sync_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05156">res_pjsip.c:5156</a></div></div>
<div class="ttc" id="structsync__task__data_html_ac3dfbfc918763b506931680bcf2040a8"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#ac3dfbfc918763b506931680bcf2040a8">sync_task_data::task_data</a></div><div class="ttdeci">void * task_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01280">stasis.c:1280</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8789fca05b6fcb5ca809e7758995959c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8789fca05b6fcb5ca809e7758995959c">&#9670;&nbsp;</a></span>ast_sip_rdata_get_header_value()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_sip_rdata_get_header_value </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_str_t&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a specific header value from rdata. </p>
<dl class="section note"><dt>Note</dt><dd>The returned value does not need to be freed since it's from the rdata pool</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rdata</td><td>The rdata </td></tr>
    <tr><td class="paramname">str</td><td>The header to find</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
    <tr><td class="paramname">The</td><td>header value on success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03543">3543</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c_source.html#l00122">stir_shaken_incoming_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;{</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;   pjsip_generic_string_hdr *hdr;</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;   pj_str_t hdr_val;</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;   hdr = pjsip_msg_find_hdr_by_name(rdata-&gt;msg_info.msg, &amp;<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;   <span class="keywordflow">if</span> (!hdr) {</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;   }</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;   pj_strdup_with_null(rdata-&gt;tp_info.pool, &amp;hdr_val, &amp;hdr-&gt;hvalue);</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;   <span class="keywordflow">return</span> hdr_val.ptr;</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;}</div><div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9619038b1c9446b8aa48f3701b41495"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9619038b1c9446b8aa48f3701b41495">&#9670;&nbsp;</a></span>ast_sip_register_authenticator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_register_authenticator </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de9/structast__sip__authenticator.html">ast_sip_authenticator</a> *&#160;</td>
          <td class="paramname"><em>auth</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a SIP authenticator. </p>
<p>An authenticator has three main purposes: 1) Determining if authentication should be performed on an incoming request 2) Gathering credentials necessary for issuing an authentication challenge 3) Authenticating a request that has credentials</p>
<p>Asterisk provides a default authenticator, but it may be replaced by a custom one if desired.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">auth</td><td>The authenticator to register </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03338">3338</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/db2/res__pjsip__authenticator__digest_8c_source.html#l00542">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;{</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a>) {</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Authenticator %p is already registered. Cannot register a new one\n&quot;</span>, <a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a>);</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;   }</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a> = auth;</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Registered SIP authenticator module %p\n&quot;</span>, auth);</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_ac51146e0275b19fab3031e6176c745e8"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a></div><div class="ttdeci">static struct ast_sip_authenticator * registered_authenticator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03336">res_pjsip.c:3336</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a98cd6c4d4f72f59a48ccbedc8e6634e4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a98cd6c4d4f72f59a48ccbedc8e6634e4">&#9670;&nbsp;</a></span>ast_sip_register_endpoint_formatter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_register_endpoint_formatter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d30/structast__sip__endpoint__formatter.html">ast_sip_endpoint_formatter</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an endpoint formatter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>the formatter to register </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03679">3679</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00189">ast_cli_entry::next</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02918">ast_res_pjsip_init_options_handling()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00370">ast_sip_initialize_sorcery_auth()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l01366">ast_sip_initialize_sorcery_location()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l01618">ast_sip_initialize_sorcery_transport()</a>, and <a class="el" href="../../df/d91/res__pjsip__endpoint__identifier__ip_8c_source.html#l00841">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;{</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a>, obj, next);</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structendpoint__formatters_html"><div class="ttname"><a href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03677">res_pjsip.c:3677</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a66822f0bda04ca112f8f1d0b29e9f4a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66822f0bda04ca112f8f1d0b29e9f4a4">&#9670;&nbsp;</a></span>ast_sip_register_endpoint_identifier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_register_endpoint_identifier </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d97/structast__sip__endpoint__identifier.html">ast_sip_endpoint_identifier</a> *&#160;</td>
          <td class="paramname"><em>identifier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a SIP endpoint identifier. </p>
<p>An endpoint identifier's purpose is to determine which endpoint a given SIP message has come from.</p>
<p>Multiple endpoint identifiers may be registered so that if an endpoint cannot be identified by one identifier, it may be identified by another.</p>
<p>Asterisk provides two endpoint identifiers. One identifies endpoints based on the user part of the From header URI. The other identifies endpoints based on the source IP address.</p>
<p>If the order in which endpoint identifiers is run is important to you, then be sure to load individual endpoint identifier modules in the order you wish for them to be run in modules.conf</p>
<dl class="section note"><dt>Note</dt><dd>endpoint identifiers registered using this method (no name specified) are placed at the front of the endpoint identifiers list ahead of any named identifiers.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>The SIP endpoint identifier to register </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03508">3508</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03431">ast_sip_register_endpoint_identifier_with_name()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l02508">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;{</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#ac769118e31b822fcd28c2b3b3d921c6e">ast_sip_register_endpoint_identifier_with_name</a>(identifier, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ac769118e31b822fcd28c2b3b3d921c6e"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ac769118e31b822fcd28c2b3b3d921c6e">ast_sip_register_endpoint_identifier_with_name</a></div><div class="ttdeci">int ast_sip_register_endpoint_identifier_with_name(struct ast_sip_endpoint_identifier *identifier, const char *name)</div><div class="ttdoc">Register a SIP endpoint identifier with a name. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03431">res_pjsip.c:3431</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac769118e31b822fcd28c2b3b3d921c6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac769118e31b822fcd28c2b3b3d921c6e">&#9670;&nbsp;</a></span>ast_sip_register_endpoint_identifier_with_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_register_endpoint_identifier_with_name </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d97/structast__sip__endpoint__identifier.html">ast_sip_endpoint_identifier</a> *&#160;</td>
          <td class="paramname"><em>identifier</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a SIP endpoint identifier with a name. </p>
<p>An endpoint identifier's purpose is to determine which endpoint a given SIP message has come from.</p>
<p>Multiple endpoint identifiers may be registered so that if an endpoint cannot be identified by one identifier, it may be identified by another.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>The SIP endpoint identifier to register </td></tr>
    <tr><td class="paramname">name</td><td>The name of the endpoint identifier </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03431">3431</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00451">AST_RWLIST_EMPTY</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00701">AST_RWLIST_INSERT_AFTER</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00609">AST_RWLIST_INSERT_BEFORE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00440">AST_RWLIST_NEXT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dd/dfd/config__global_8c_source.html#l00279">ast_sip_get_endpoint_identifier_order()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03425">endpoint_identifier_list::identifier</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03423">endpoint_identifier_list::name</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03424">endpoint_identifier_list::priority</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03508">ast_sip_register_endpoint_identifier()</a>, and <a class="el" href="../../df/dd7/res__pjsip__endpoint__identifier__anonymous_8c_source.html#l00127">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;{</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;   <span class="keywordtype">char</span> *prev, *current, *identifier_order;</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d73/structendpoint__identifier__list.html">endpoint_identifier_list</a> *iter, *id_list_item;</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;   id_list_item = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*id_list_item));</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;   <span class="keywordflow">if</span> (!id_list_item) {</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to add endpoint identifier. Out of memory.\n&quot;</span>);</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;   }</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;   id_list_item-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a7f1bfe31ef240c6c5e0a688bace06214">identifier</a> = <a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a7f1bfe31ef240c6c5e0a688bace06214">identifier</a>;</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;   id_list_item-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Register endpoint identifier %s(%p)\n&quot;</span>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a> ?: <span class="stringliteral">&quot;&quot;</span>, identifier);</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;      <span class="comment">/* if an identifier has no name then place in front */</span></div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, id_list_item, list);</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;   }</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;   <span class="comment">/* see if the name of the identifier is in the global endpoint_identifier_order list */</span></div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;   identifier_order = prev = current = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a17ead55af9630ebe9d2acd8d52833aae">ast_sip_get_endpoint_identifier_order</a>();</div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(identifier_order)) {</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;      id_list_item-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a> = UINT_MAX;</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, id_list_item, list);</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(identifier_order);</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;   }</div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;   id_list_item-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a> = 0;</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;   <span class="keywordflow">while</span> ((current = strchr(current, <span class="charliteral">&#39;,&#39;</span>))) {</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;      ++id_list_item-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a>;</div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;      <span class="keywordflow">if</span> (!strncmp(prev, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, current - prev)</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;         &amp;&amp; strlen(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>) == current - prev) {</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;      }</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;      prev = ++current;</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;   }</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;   <span class="keywordflow">if</span> (!current) {</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;      <span class="comment">/* check to see if it is the only or last item */</span></div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;      <span class="keywordflow">if</span> (!strcmp(prev, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)) {</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;         ++id_list_item-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a>;</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;         id_list_item-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a> = UINT_MAX;</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      }</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;   }</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;   <span class="keywordflow">if</span> (id_list_item-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a> == UINT_MAX || <a class="code" href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a>(&amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>)) {</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;      <span class="comment">/* if not in the endpoint_identifier_order list then consider it less in</span></div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;<span class="comment">         priority and add it to the end */</span></div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, id_list_item, list);</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(identifier_order);</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;   }</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, iter, list) {</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;      <span class="keywordflow">if</span> (id_list_item-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a> &lt; iter-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a1e440af9e86f7a3c2784c3e2bd687d25">priority</a>) {</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#acf8253a64f9a4e2170454f4bf0559e33">AST_RWLIST_INSERT_BEFORE_CURRENT</a>(id_list_item, list);</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;      }</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;</div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a>(iter, list)) {</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a>(&amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, iter, id_list_item, list);</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;      }</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;   }</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(identifier_order);</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a5c021d1e034a53d09360da4d95c76220"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5c021d1e034a53d09360da4d95c76220">AST_RWLIST_NEXT</a></div><div class="ttdeci">#define AST_RWLIST_NEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00440">linkedlists.h:440</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a5937d72e8b39660a1b824af2042c0e9c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a5937d72e8b39660a1b824af2042c0e9c">AST_RWLIST_INSERT_AFTER</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_AFTER</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00701">linkedlists.h:701</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structendpoint__identifier__list_html"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html">endpoint_identifier_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03422">res_pjsip.c:3422</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structendpoint__identifier__list_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html#a8f8f80d37794cde9472343e4487ba3eb">endpoint_identifier_list::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03423">res_pjsip.c:3423</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="linkedlists_8h_html_acf8253a64f9a4e2170454f4bf0559e33"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#acf8253a64f9a4e2170454f4bf0559e33">AST_RWLIST_INSERT_BEFORE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_BEFORE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00609">linkedlists.h:609</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0044f6572f50a89049b3b5272e51b0e7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0044f6572f50a89049b3b5272e51b0e7">AST_RWLIST_EMPTY</a></div><div class="ttdeci">#define AST_RWLIST_EMPTY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00451">linkedlists.h:451</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structendpoint__identifier__list_html_a1e440af9e86f7a3c2784c3e2bd687d25"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html#a1e440af9e86f7a3c2784c3e2bd687d25">endpoint_identifier_list::priority</a></div><div class="ttdeci">unsigned int priority</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03424">res_pjsip.c:3424</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a17ead55af9630ebe9d2acd8d52833aae"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a17ead55af9630ebe9d2acd8d52833aae">ast_sip_get_endpoint_identifier_order</a></div><div class="ttdeci">char * ast_sip_get_endpoint_identifier_order(void)</div><div class="ttdoc">Retrieve the global endpoint_identifier_order setting. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfd/config__global_8c_source.html#l00279">config_global.c:279</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structendpoint__identifier__list_html_a7f1bfe31ef240c6c5e0a688bace06214"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html#a7f1bfe31ef240c6c5e0a688bace06214">endpoint_identifier_list::identifier</a></div><div class="ttdeci">struct ast_sip_endpoint_identifier * identifier</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03425">res_pjsip.c:3425</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structendpoint__identifiers_html"><div class="ttname"><a href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03429">res_pjsip.c:3429</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a4eca4aa28748364a9a873fe023e47c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a4eca4aa28748364a9a873fe023e47c">&#9670;&nbsp;</a></span>ast_sip_register_outbound_authenticator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_register_outbound_authenticator </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structast__sip__outbound__authenticator.html">ast_sip_outbound_authenticator</a> *&#160;</td>
          <td class="paramname"><em>outbound_auth</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register an outbound SIP authenticator. </p>
<p>An outbound authenticator is responsible for creating responses to authentication challenges by remote endpoints.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">auth</td><td>The authenticator to register </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03389">3389</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d61/res__pjsip__outbound__authenticator__digest_8c_source.html#l00581">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;{</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a>) {</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Outbound authenticator %p is already registered. Cannot register a new one\n&quot;</span>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a>);</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;   }</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a> = auth;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Registered SIP outbound authenticator module %p\n&quot;</span>, auth);</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a18741a3257cf9d9ae4f755778d97f716"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a></div><div class="ttdeci">static struct ast_sip_outbound_authenticator * registered_outbound_authenticator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03387">res_pjsip.c:3387</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d923ef44f62dffc05178f762b88f084"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d923ef44f62dffc05178f762b88f084">&#9670;&nbsp;</a></span>ast_sip_register_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_register_service </td>
          <td>(</td>
          <td class="paramtype">pjsip_module *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a SIP service in Asterisk. </p>
<p>This is more-or-less a wrapper around pjsip_endpt_register_module(). Registering a service makes it so that PJSIP will call into the service at appropriate times. For more information about PJSIP module callbacks, see the PJSIP documentation. Asterisk modules that call this function will likely do so at module load time.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>The module that is to be registered with PJSIP </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03315">3315</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03300">register_service()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00573">ast_res_pjsip_init_message_filter()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l01260">ast_sip_initialize_distributor()</a>, <a class="el" href="../../db/d73/pjsip__global__headers_8c_source.html#l00163">ast_sip_initialize_global_headers()</a>, <a class="el" href="../../da/db9/pjsip__transport__management_8c_source.html#l00372">ast_sip_initialize_transport_management()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;{</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#abf53097fa8d7a15c1fca7aa7df5d2071">register_service</a>, &amp;module);</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_abf53097fa8d7a15c1fca7aa7df5d2071"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#abf53097fa8d7a15c1fca7aa7df5d2071">register_service</a></div><div class="ttdeci">static int register_service(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03300">res_pjsip.c:3300</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_gab8c82412fe0432a91d5c7985cfdf9b59"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a></div><div class="ttdeci">int ast_sip_push_task_wait_servant(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to SIP servants and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05204">res_pjsip.c:5204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a51b89c7cffebd4ea3dd0bb2a34eb9a6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51b89c7cffebd4ea3dd0bb2a34eb9a6f">&#9670;&nbsp;</a></span>ast_sip_register_supplement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_register_supplement </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *&#160;</td>
          <td class="paramname"><em>supplement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a supplement to SIP out of dialog processing. </p>
<p>This allows for someone to insert themselves in the processing of out of dialog SIP requests and responses. This, for example could allow for a module to set channel data based on headers in an incoming message. Similarly, a module could reject an incoming request if desired.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">supplement</td><td>The supplement to register </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04511">4511</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00609">AST_RWLIST_INSERT_BEFORE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00740">AST_RWLIST_INSERT_TAIL</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02938">ast_sip_supplement::next</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02892">ast_sip_supplement::priority</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00573">ast_res_pjsip_init_message_filter()</a>, and <a class="el" href="../../d9/d91/res__pjsip__path_8c_source.html#l00252">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;{</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *iter;</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;   <span class="keywordtype">int</span> inserted = 0;</div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>, iter, <a class="code" href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">next</a>) {</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;      <span class="keywordflow">if</span> (iter-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#aa513867e0c879afe032ffc99bac34d3b">priority</a> &gt; supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#aa513867e0c879afe032ffc99bac34d3b">priority</a>) {</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#acf8253a64f9a4e2170454f4bf0559e33">AST_RWLIST_INSERT_BEFORE_CURRENT</a>(supplement, <a class="code" href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">next</a>);</div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;         inserted = 1;</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;      }</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;   }</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;   <span class="keywordflow">if</span> (!inserted) {</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>, supplement, <a class="code" href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">next</a>);</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;   }</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_ab03b800fabdc22f80a5fc2bf746defb2"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">ast_sip_supplement::next</a></div><div class="ttdeci">struct ast_sip_supplement * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02938">res_pjsip.h:2938</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="linkedlists_8h_html_acf8253a64f9a4e2170454f4bf0559e33"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#acf8253a64f9a4e2170454f4bf0559e33">AST_RWLIST_INSERT_BEFORE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_BEFORE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00609">linkedlists.h:609</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadda916488b2d151af4426e2f06ad332"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadda916488b2d151af4426e2f06ad332">AST_RWLIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_TAIL</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00740">linkedlists.h:740</a></div></div>
<div class="ttc" id="structsupplements_html"><div class="ttname"><a href="../../d7/db8/structsupplements.html">supplements</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04509">res_pjsip.c:4509</a></div></div>
<div class="ttc" id="structast__sip__supplement_html"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a></div><div class="ttdoc">A supplement to SIP message processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02888">res_pjsip.h:2888</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_aa513867e0c879afe032ffc99bac34d3b"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#aa513867e0c879afe032ffc99bac34d3b">ast_sip_supplement::priority</a></div><div class="ttdeci">enum ast_sip_supplement_priority priority</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02892">res_pjsip.h:2892</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a22df541cc658cbeb30d34df2902b37ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22df541cc658cbeb30d34df2902b37ef">&#9670;&nbsp;</a></span>ast_sip_requires_authentication()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_requires_authentication </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Determine if an incoming request requires authentication. </p>
<p>This calls into the registered authenticator's requires_authentication callback in order to determine if the request requires authentication.</p>
<p>If there is no registered authenticator, then authentication will be assumed not to be required.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>The endpoint from which the request originates </td></tr>
    <tr><td class="paramname">rdata</td><td>The incoming SIP request </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">non-zero</td><td>The request requires authentication </td></tr>
    <tr><td class="paramname">0</td><td>The request does not require authentication </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03361">3361</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00905">ast_sip_endpoint::allow_unauthenticated_options</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00955">ast_sip_authenticator::requires_authentication</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00880">authenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;{</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;   <span class="keywordflow">if</span> (endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#ab128ab9b20b31b95c793e752f986b35b">allow_unauthenticated_options</a></div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      &amp;&amp; !pjsip_method_cmp(&amp;rdata-&gt;msg_info.msg-&gt;line.req.method, &amp;pjsip_options_method)) {</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Skipping OPTIONS authentication due to endpoint configuration\n&quot;</span>);</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;   }</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a>) {</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No SIP authenticator registered. Assuming authentication is not required\n&quot;</span>);</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;   }</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a>-&gt;<a class="code" href="../../d9/de9/structast__sip__authenticator.html#ae4251ee7afaa0f05d76c91b0f1f60e83">requires_authentication</a>(endpoint, rdata);</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_ac51146e0275b19fab3031e6176c745e8"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a></div><div class="ttdeci">static struct ast_sip_authenticator * registered_authenticator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03336">res_pjsip.c:3336</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__authenticator_html_ae4251ee7afaa0f05d76c91b0f1f60e83"><div class="ttname"><a href="../../d9/de9/structast__sip__authenticator.html#ae4251ee7afaa0f05d76c91b0f1f60e83">ast_sip_authenticator::requires_authentication</a></div><div class="ttdeci">int(* requires_authentication)(struct ast_sip_endpoint *endpoint, pjsip_rx_data *rdata)</div><div class="ttdoc">Check if a request requires authentication See ast_sip_requires_authentication for more details...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00955">res_pjsip.h:955</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_ab128ab9b20b31b95c793e752f986b35b"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#ab128ab9b20b31b95c793e752f986b35b">ast_sip_endpoint::allow_unauthenticated_options</a></div><div class="ttdeci">unsigned int allow_unauthenticated_options</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00905">res_pjsip.h:905</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a833b03a523fee9bde77af138a38e3dfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a833b03a523fee9bde77af138a38e3dfa">&#9670;&nbsp;</a></span>ast_sip_send_out_of_dialog_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_send_out_of_dialog_request </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *token, pjsip_event *e)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General purpose method for sending an Out-Of-Dialog SIP request. </p>
<p>This is a companion function for <a class="el" href="../../de/d96/res__pjsip_8c.html#ac981149e3fb0f7fc8b6e75607b1b2ad0">ast_sip_create_request</a>. The request created there can be passed to this function, though any request may be passed in.</p>
<p>This will automatically set up handling outbound authentication challenges if they arrive.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tdata</td><td>The request to send </td></tr>
    <tr><td class="paramname">endpoint</td><td>Optional. If specified, the out-of-dialog request is sent to the endpoint. </td></tr>
    <tr><td class="paramname">timeout.</td><td>If non-zero, after the timeout the transaction will be terminated and the callback will be called with the PJSIP_EVENT_TIMER type. </td></tr>
    <tr><td class="paramname">token</td><td>Data to be passed to the callback upon receipt of out-of-dialog response. </td></tr>
    <tr><td class="paramname">callback</td><td>Callback to be called upon receipt of out-of-dialog response.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure (out-of-dialog callback will not be called.)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Timeout processing: There are 2 timers associated with this request, PJSIP timer_b which is set globally in the "system" section of pjsip.conf, and the timeout specified on this call. The timer that expires first (before normal completion) will cause the callback to be run with e-&gt;body.tsx_state.type = PJSIP_EVENT_TIMER. The timer that expires second is simply ignored and the callback is not run again. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04993">4993</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00301">ast_sip_message_apply_transport()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02638">ast_sip_mod_data_get</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02670">ast_sip_mod_data_set</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04554">does_method_match()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04751">endpt_send_request()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02890">ast_sip_supplement::method</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03264">MOD_DATA_CONTACT</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02931">ast_sip_supplement::outgoing_request</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04589">send_request_data_alloc()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04373">supplement_module</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00817">ast_sip_endpoint::transport</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05034">ast_sip_send_request()</a>, and <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00847">sip_options_qualify_contact()</a>.</p>
<div class="fragment"><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;{</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *supplement;</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d8e/structsend__request__data.html">send_request_data</a> *req_data;</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *<a class="code" href="../../d9/d03/structcontact.html">contact</a>;</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;   req_data = <a class="code" href="../../de/d96/res__pjsip_8c.html#af13a3926b27d237d40764862b0a6347a">send_request_data_alloc</a>(endpoint, token, callback);</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;   <span class="keywordflow">if</span> (!req_data) {</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;      pjsip_tx_data_dec_ref(tdata);</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;   }</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;</div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;   <span class="keywordflow">if</span> (endpoint) {</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a594764e7c50b75d6e15709572e06a318">ast_sip_message_apply_transport</a>(endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">transport</a>, tdata);</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;   }</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;   contact = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aad194ead974937834375b0ac8d37a7c2">ast_sip_mod_data_get</a>(tdata-&gt;mod_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>.id, <a class="code" href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a>);</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>);</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>, supplement, next) {</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;      <span class="keywordflow">if</span> (supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a1816e986a825275a05d1de0c4297a206">outgoing_request</a></div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;         &amp;&amp; <a class="code" href="../../de/d96/res__pjsip_8c.html#adfed42a1933e5cd396c5125d2199a14a">does_method_match</a>(&amp;tdata-&gt;msg-&gt;line.req.method.name, supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>)) {</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;         supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a1816e986a825275a05d1de0c4297a206">outgoing_request</a>(endpoint, contact, tdata);</div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;      }</div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;   }</div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>);</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;</div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a>(tdata-&gt;pool, tdata-&gt;mod_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>.id, <a class="code" href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(contact);</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b67a512469864e7ed2add9b85e9dd4b">endpt_send_request</a>(endpoint, tdata, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>, req_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#a687c566135e86195175d937499c14956">send_request_cb</a>)</div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;      != PJ_SUCCESS) {</div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(req_data);</div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;   }</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint_html_a44cdbda076f37ba09880ba74d942b606"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">ast_sip_endpoint::transport</a></div><div class="ttdeci">const ast_string_field transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00817">res_pjsip.h:817</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_af13a3926b27d237d40764862b0a6347a"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#af13a3926b27d237d40764862b0a6347a">send_request_data_alloc</a></div><div class="ttdeci">static struct send_request_data * send_request_data_alloc(struct ast_sip_endpoint *endpoint, void *token, void(*callback)(void *token, pjsip_event *e))</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04589">res_pjsip.c:4589</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#a8b44a03925325ceaf2de7b079b1541a1">ast_sip_supplement::method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02890">res_pjsip.h:2890</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ad4148e8b866195343e8ee93ba9dd229f"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a></div><div class="ttdeci">static pjsip_module supplement_module</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04373">res_pjsip.c:4373</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9937f98867d28da0cc0e8590d9c9ffa4"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a></div><div class="ttdeci">#define ast_sip_mod_data_set(pool, mod_data, id, key, val)</div><div class="ttdoc">Utilizing a mod_data array for a given id, set the value associated with the given key...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02670">res_pjsip.h:2670</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aad194ead974937834375b0ac8d37a7c2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aad194ead974937834375b0ac8d37a7c2">ast_sip_mod_data_get</a></div><div class="ttdeci">#define ast_sip_mod_data_get(mod_data, id, key)</div><div class="ttdoc">Using the dictionary stored in mod_data array at a given id, retrieve the value associated with the g...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02638">res_pjsip.h:2638</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b67a512469864e7ed2add9b85e9dd4b"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b67a512469864e7ed2add9b85e9dd4b">endpt_send_request</a></div><div class="ttdeci">static pj_status_t endpt_send_request(struct ast_sip_endpoint *endpoint, pjsip_tx_data *tdata, pj_int32_t timeout, void *token, pjsip_endpt_send_callback cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04751">res_pjsip.c:4751</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_adfed42a1933e5cd396c5125d2199a14a"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#adfed42a1933e5cd396c5125d2199a14a">does_method_match</a></div><div class="ttdeci">static pj_bool_t does_method_match(const pj_str_t *message_method, const char *supplement_method)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04554">res_pjsip.c:4554</a></div></div>
<div class="ttc" id="structast__sip__contact_html"><div class="ttname"><a href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a></div><div class="ttdoc">Contact associated with an address of record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00281">res_pjsip.h:281</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a594764e7c50b75d6e15709572e06a318"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a594764e7c50b75d6e15709572e06a318">ast_sip_message_apply_transport</a></div><div class="ttdeci">void ast_sip_message_apply_transport(const char *transport_name, pjsip_tx_data *tdata)</div><div class="ttdoc">Apply the configuration for a transport to an outgoing message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d17/config__transport_8c_source.html#l00301">config_transport.c:301</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a38381dc3e18f7d4bffe6533bac848ca3"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a></div><div class="ttdeci">#define MOD_DATA_CONTACT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03264">res_pjsip.c:3264</a></div></div>
<div class="ttc" id="structsupplements_html"><div class="ttname"><a href="../../d7/db8/structsupplements.html">supplements</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04509">res_pjsip.c:4509</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__supplement_html"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a></div><div class="ttdoc">A supplement to SIP message processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02888">res_pjsip.h:2888</a></div></div>
<div class="ttc" id="structsend__request__data_html"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html">send_request_data</a></div><div class="ttdoc">Structure to hold information about an outbound request. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04571">res_pjsip.c:4571</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_a1816e986a825275a05d1de0c4297a206"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#a1816e986a825275a05d1de0c4297a206">ast_sip_supplement::outgoing_request</a></div><div class="ttdeci">void(* outgoing_request)(struct ast_sip_endpoint *endpoint, struct ast_sip_contact *contact, struct pjsip_tx_data *tdata)</div><div class="ttdoc">Called on an outgoing SIP request This method is always called from a SIP servant thread...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02931">res_pjsip.h:2931</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a687c566135e86195175d937499c14956"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a687c566135e86195175d937499c14956">send_request_cb</a></div><div class="ttdeci">static void send_request_cb(void *token, pjsip_event *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04937">res_pjsip.c:4937</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9302fd362f9d52147d928c5bc4740433"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9302fd362f9d52147d928c5bc4740433">&#9670;&nbsp;</a></span>ast_sip_send_request()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_send_request </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjsip_dialog *&#160;</td>
          <td class="paramname"><em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *token, pjsip_event *e)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>General purpose method for sending a SIP request. </p>
<p>This is a companion function for <a class="el" href="../../de/d96/res__pjsip_8c.html#ac981149e3fb0f7fc8b6e75607b1b2ad0">ast_sip_create_request</a>. The request created there can be passed to this function, though any request may be passed in.</p>
<p>This will automatically set up handling outbound authentication challenges if they arrive.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tdata</td><td>The request to send </td></tr>
    <tr><td class="paramname">dlg</td><td>Optional. The dialog in which the request is sent. Otherwise it is out-of-dialog. </td></tr>
    <tr><td class="paramname">endpoint</td><td>Optional. If specified, the out-of-dialog request is sent to the endpoint. </td></tr>
    <tr><td class="paramname">token</td><td>Data to be passed to the callback upon receipt of out-of-dialog response. </td></tr>
    <tr><td class="paramname">callback</td><td>Callback to be called upon receipt of out-of-dialog response.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure (out-of-dialog callback will not be called.) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05034">5034</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04993">ast_sip_send_out_of_dialog_request()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04545">send_in_dialog_request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l01221">msg_send()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00751">notify_channel()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00645">notify_contact()</a>, <a class="el" href="../../d8/d41/res__pjsip__notify_8c_source.html#l00709">notify_uri()</a>, <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l00371">send_unsolicited_mwi_notify_to_contact()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02744">sendtext()</a>.</p>
<div class="fragment"><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;{</div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(tdata-&gt;msg-&gt;type == PJSIP_REQUEST_MSG);</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;   <span class="keywordflow">if</span> (dlg) {</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a7daa7ca393a1187a33ce4952c2458c18">send_in_dialog_request</a>(tdata, dlg);</div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a833b03a523fee9bde77af138a38e3dfa">ast_sip_send_out_of_dialog_request</a>(tdata, endpoint, -1, token, callback);</div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;   }</div><div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a833b03a523fee9bde77af138a38e3dfa"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a833b03a523fee9bde77af138a38e3dfa">ast_sip_send_out_of_dialog_request</a></div><div class="ttdeci">int ast_sip_send_out_of_dialog_request(pjsip_tx_data *tdata, struct ast_sip_endpoint *endpoint, int timeout, void *token, void(*callback)(void *token, pjsip_event *e))</div><div class="ttdoc">General purpose method for sending an Out-Of-Dialog SIP request. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04993">res_pjsip.c:4993</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a7daa7ca393a1187a33ce4952c2458c18"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a7daa7ca393a1187a33ce4952c2458c18">send_in_dialog_request</a></div><div class="ttdeci">static int send_in_dialog_request(pjsip_tx_data *tdata, struct pjsip_dialog *dlg)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04545">res_pjsip.c:4545</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a23dc9da0cb0fd4ea9d64fb9901c254a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a23dc9da0cb0fd4ea9d64fb9901c254a4">&#9670;&nbsp;</a></span>ast_sip_send_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_send_response </td>
          <td>(</td>
          <td class="paramtype">pjsip_response_addr *&#160;</td>
          <td class="paramname"><em>res_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>sip_endpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a response to an out of dialog request. </p>
<p>Use this function sparingly, since this does not create a transaction within PJSIP. This means that if the request is retransmitted, it is your responsibility to detect this and not process the same request twice, and to send the same response for each retransmission.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">res_addr</td><td>The response address for this response </td></tr>
    <tr><td class="paramname">tdata</td><td>The response to send </td></tr>
    <tr><td class="paramname">endpoint</td><td>The <a class="el" href="../../d3/d46/structast__sip__endpoint.html" title="An entity with which Asterisk communicates. ">ast_sip_endpoint</a> associated with this response</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05407">5407</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05385">supplement_outgoing_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;{</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a0c1dbd9c8b20b85be851d6920d058d0b">supplement_outgoing_response</a>(tdata, sip_endpoint);</div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;   status = pjsip_endpt_send_response(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), res_addr, tdata, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;   <span class="keywordflow">if</span> (status != PJ_SUCCESS) {</div><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;      pjsip_tx_data_dec_ref(tdata);</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;   }</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;   <span class="keywordflow">return</span> status == PJ_SUCCESS ? 0 : -1;</div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0c1dbd9c8b20b85be851d6920d058d0b"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0c1dbd9c8b20b85be851d6920d058d0b">supplement_outgoing_response</a></div><div class="ttdeci">static void supplement_outgoing_response(pjsip_tx_data *tdata, struct ast_sip_endpoint *sip_endpoint)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05385">res_pjsip.c:5385</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae207f7592aa7a69d0425a77bb8aa494d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae207f7592aa7a69d0425a77bb8aa494d">&#9670;&nbsp;</a></span>ast_sip_send_stateful_response()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_send_stateful_response </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>sip_endpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a stateful response to an out of dialog request. </p>
<p>This creates a transaction within PJSIP, meaning that if the request that we are responding to is retransmitted, we will not attempt to re-handle the request.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rdata</td><td>The request that is being responded to </td></tr>
    <tr><td class="paramname">tdata</td><td>The response to send </td></tr>
    <tr><td class="paramname">endpoint</td><td>The <a class="el" href="../../d3/d46/structast__sip__endpoint.html" title="An entity with which Asterisk communicates. ">ast_sip_endpoint</a> associated with this response</td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>13.4.0</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05420">5420</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02638">ast_sip_mod_data_get</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02670">ast_sip_mod_data_set</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03264">MOD_DATA_CONTACT</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04373">supplement_module</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05385">supplement_outgoing_response()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l00900">register_aor()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00215">send_options_response()</a>, and <a class="el" href="../../da/d83/res__pjsip__messaging_8c_source.html#l01378">send_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;{</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;   pjsip_transaction *tsx;</div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;</div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;   <span class="keywordflow">if</span> (pjsip_tsx_create_uas(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, rdata, &amp;tsx) != PJ_SUCCESS) {</div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *<a class="code" href="../../d9/d03/structcontact.html">contact</a>;</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;      <span class="comment">/* ast_sip_create_response bumps the refcount of the contact and adds it to the tdata.</span></div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;<span class="comment">       * We&#39;ll leak that reference if we don&#39;t get rid of it here.</span></div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;      contact = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aad194ead974937834375b0ac8d37a7c2">ast_sip_mod_data_get</a>(tdata-&gt;mod_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>.id, <a class="code" href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a>);</div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(contact);</div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a>(tdata-&gt;pool, tdata-&gt;mod_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>.id, <a class="code" href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;      pjsip_tx_data_dec_ref(tdata);</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;   }</div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;   pjsip_tsx_recv_msg(tsx, rdata);</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a0c1dbd9c8b20b85be851d6920d058d0b">supplement_outgoing_response</a>(tdata, sip_endpoint);</div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;   <span class="keywordflow">if</span> (pjsip_tsx_send_msg(tsx, tdata) != PJ_SUCCESS) {</div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;      pjsip_tx_data_dec_ref(tdata);</div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;   }</div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;</div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ad4148e8b866195343e8ee93ba9dd229f"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a></div><div class="ttdeci">static pjsip_module supplement_module</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04373">res_pjsip.c:4373</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9937f98867d28da0cc0e8590d9c9ffa4"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a></div><div class="ttdeci">#define ast_sip_mod_data_set(pool, mod_data, id, key, val)</div><div class="ttdoc">Utilizing a mod_data array for a given id, set the value associated with the given key...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02670">res_pjsip.h:2670</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aad194ead974937834375b0ac8d37a7c2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aad194ead974937834375b0ac8d37a7c2">ast_sip_mod_data_get</a></div><div class="ttdeci">#define ast_sip_mod_data_get(mod_data, id, key)</div><div class="ttdoc">Using the dictionary stored in mod_data array at a given id, retrieve the value associated with the g...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02638">res_pjsip.h:2638</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0c1dbd9c8b20b85be851d6920d058d0b"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0c1dbd9c8b20b85be851d6920d058d0b">supplement_outgoing_response</a></div><div class="ttdeci">static void supplement_outgoing_response(pjsip_tx_data *tdata, struct ast_sip_endpoint *sip_endpoint)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05385">res_pjsip.c:5385</a></div></div>
<div class="ttc" id="structast__sip__contact_html"><div class="ttname"><a href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a></div><div class="ttdoc">Contact associated with an address of record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00281">res_pjsip.h:281</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a38381dc3e18f7d4bffe6533bac848ca3"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a></div><div class="ttdeci">#define MOD_DATA_CONTACT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03264">res_pjsip.c:3264</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac41d89bd55a72ddfc32f657e6bc51908"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac41d89bd55a72ddfc32f657e6bc51908">&#9670;&nbsp;</a></span>ast_sip_set_outbound_proxy()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_set_outbound_proxy </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>proxy</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the outbound proxy for an outbound SIP message. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tdata</td><td>The message to set the outbound proxy on </td></tr>
    <tr><td class="paramname">proxy</td><td>SIP uri of the proxy </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05047">5047</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>, <a class="el" href="../../d9/d91/res__pjsip__path_8c_source.html#l00165">path_outgoing_request()</a>, and <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l00847">sip_options_qualify_contact()</a>.</p>
<div class="fragment"><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;{</div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;   pjsip_route_hdr *route;</div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t ROUTE_HNAME = { <span class="stringliteral">&quot;Route&quot;</span>, 5 };</div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;   pj_str_t <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;</div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;   pj_strdup2_with_null(tdata-&gt;pool, &amp;tmp, proxy);</div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;   <span class="keywordflow">if</span> (!(route = pjsip_parse_hdr(tdata-&gt;pool, &amp;ROUTE_HNAME, tmp.ptr, tmp.slen, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;   }</div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;</div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;   pj_list_insert_nodes_before(&amp;tdata-&gt;msg-&gt;hdr, (pjsip_hdr*)route);</div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;</div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;}</div><div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74c80b6cedcf4cc847f2b81ba6437337"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74c80b6cedcf4cc847f2b81ba6437337">&#9670;&nbsp;</a></span>ast_sip_set_tpselector_from_ep_or_uri()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_set_tpselector_from_ep_or_uri </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_sip_uri *&#160;</td>
          <td class="paramname"><em>sip_uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tpselector *&#160;</td>
          <td class="paramname"><em>selector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets pjsip_tpselector from an endpoint or uri. </p>
<dl class="section since"><dt>Since</dt><dd>13.15.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">endpoint</td><td>If endpoint-&gt;transport is set, it's used </td></tr>
    <tr><td class="paramname">sip_uri</td><td>If sip_uri contains a x-ast-txp parameter, it's used </td></tr>
    <tr><td class="paramname">selector</td><td>The selector to be populated</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03975">3975</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03762">ast_sip_get_transport_name()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03957">ast_sip_set_tpselector_from_transport_name()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03791">ast_sip_dlg_set_transport()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04177">create_dialog_uas()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;{</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;   <span class="keywordtype">char</span> transport_name[128];</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#aa1c1bd79cf3f3c57a0efbfd31ff45f2f">ast_sip_get_transport_name</a>(endpoint, sip_uri, transport_name, <span class="keyword">sizeof</span>(transport_name))) {</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;   }</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#ac94b7c59f69d31b962e42098955f8fa4">ast_sip_set_tpselector_from_transport_name</a>(transport_name, selector);</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_ac94b7c59f69d31b962e42098955f8fa4"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ac94b7c59f69d31b962e42098955f8fa4">ast_sip_set_tpselector_from_transport_name</a></div><div class="ttdeci">int ast_sip_set_tpselector_from_transport_name(const char *transport_name, pjsip_tpselector *selector)</div><div class="ttdoc">Sets pjsip_tpselector from ast_sip_transport. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03957">res_pjsip.c:3957</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_aa1c1bd79cf3f3c57a0efbfd31ff45f2f"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#aa1c1bd79cf3f3c57a0efbfd31ff45f2f">ast_sip_get_transport_name</a></div><div class="ttdeci">int ast_sip_get_transport_name(const struct ast_sip_endpoint *endpoint, pjsip_sip_uri *sip_uri, char *buf, size_t buf_len)</div><div class="ttdoc">Get the transport name from an endpoint or request uri. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03762">res_pjsip.c:3762</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a72d9aae56d12729bff60ac4f145db3fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72d9aae56d12729bff60ac4f145db3fc">&#9670;&nbsp;</a></span>ast_sip_set_tpselector_from_transport()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_set_tpselector_from_transport </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d1/d04/structast__sip__transport.html">ast_sip_transport</a> *&#160;</td>
          <td class="paramname"><em>transport</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tpselector *&#160;</td>
          <td class="paramname"><em>selector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets pjsip_tpselector from <a class="el" href="../../d1/d04/structast__sip__transport.html" title="Transport to bind to. ">ast_sip_transport</a>. </p>
<dl class="section since"><dt>Since</dt><dd>13.8.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transport</td><td>The transport to be used </td></tr>
    <tr><td class="paramname">selector</td><td>The selector to be populated </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The transport selector must be unreffed using ast_sip_tpselector_unref </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03907">3907</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l01564">ast_sip_get_transport_state()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00063">AST_TRANSPORT_WS</a>, <a class="el" href="../../db/df1/netsock2_8h_source.html#l00064">AST_TRANSPORT_WSS</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00091">ast_sip_transport_state::factory</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00149">ast_sip_transport_state::flow</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00251">ast_sip_transport::flow</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00089">ast_sip_transport_state::transport</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00193">ast_sip_transport::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03957">ast_sip_set_tpselector_from_transport_name()</a>.</p>
<div class="fragment"><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;{</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dac/structast__sip__transport__state.html">ast_sip_transport_state</a> *transport_state;</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;   transport_state = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ab6000ab7fe69594070bb59b995ccb5ee">ast_sip_get_transport_state</a>(<a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(transport));</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;   <span class="keywordflow">if</span> (!transport_state) {</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to retrieve PJSIP transport state for &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(transport));</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;   }</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;   <span class="comment">/* Only flows maintain dynamic state which needs protection */</span></div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;   <span class="keywordflow">if</span> (transport_state-&gt;<a class="code" href="../../db/dac/structast__sip__transport__state.html#a3a44e2579abfd2c9e9cd570a78b01282">flow</a>) {</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(transport_state);</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;   }</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;   <span class="keywordflow">if</span> (transport_state-&gt;<a class="code" href="../../db/dac/structast__sip__transport__state.html#a7475e193e8f10f809dbde0ddba4ad006">transport</a>) {</div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;      selector-&gt;type = PJSIP_TPSELECTOR_TRANSPORT;</div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;      selector-&gt;u.transport = transport_state-&gt;<a class="code" href="../../db/dac/structast__sip__transport__state.html#a7475e193e8f10f809dbde0ddba4ad006">transport</a>;</div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;      pjsip_transport_add_ref(selector-&gt;u.transport);</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport_state-&gt;<a class="code" href="../../db/dac/structast__sip__transport__state.html#a270761e87121ede08b66619c36c23ebd">factory</a>) {</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;      selector-&gt;type = PJSIP_TPSELECTOR_LISTENER;</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;      selector-&gt;u.listener = transport_state-&gt;<a class="code" href="../../db/dac/structast__sip__transport__state.html#a270761e87121ede08b66619c36c23ebd">factory</a>;</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport-&gt;<a class="code" href="../../d1/d04/structast__sip__transport.html#a412bcf75e793ebae3f463f57410a6046">type</a> == <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a6d8ef74bba673bd5a95d9b2da8116b4f">AST_TRANSPORT_WS</a> || transport-&gt;<a class="code" href="../../d1/d04/structast__sip__transport.html#a412bcf75e793ebae3f463f57410a6046">type</a> == <a class="code" href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a611d4a9fc154cea78fe3f7f768185c4d">AST_TRANSPORT_WSS</a>) {</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;      <span class="comment">/* The WebSocket transport has no factory as it can not create outgoing connections, so</span></div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;<span class="comment">       * even if an endpoint is locked to a WebSocket transport we let the PJSIP logic</span></div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;<span class="comment">       * find the existing connection if available and use it.</span></div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (transport-&gt;<a class="code" href="../../d1/d04/structast__sip__transport.html#a3a44e2579abfd2c9e9cd570a78b01282">flow</a>) {</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;      <span class="comment">/* This is a child of another transport, so we need to establish a new connection */</span></div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;<span class="preprocessor">#ifdef HAVE_PJSIP_TRANSPORT_DISABLE_CONNECTION_REUSE</span></div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;      selector-&gt;disable_connection_reuse = PJ_TRUE;</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Connection reuse could not be disabled on transport &#39;%s&#39; as support is not available\n&quot;</span>,</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;         <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(transport));</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;      res = -1;</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;   }</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;   <span class="keywordflow">if</span> (transport_state-&gt;<a class="code" href="../../db/dac/structast__sip__transport__state.html#a3a44e2579abfd2c9e9cd570a78b01282">flow</a>) {</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(transport_state);</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;   }</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(transport_state, -1);</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;}</div><div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3a611d4a9fc154cea78fe3f7f768185c4d"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a611d4a9fc154cea78fe3f7f768185c4d">AST_TRANSPORT_WSS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00064">netsock2.h:64</a></div></div>
<div class="ttc" id="structast__sip__transport__state_html_a3a44e2579abfd2c9e9cd570a78b01282"><div class="ttname"><a href="../../db/dac/structast__sip__transport__state.html#a3a44e2579abfd2c9e9cd570a78b01282">ast_sip_transport_state::flow</a></div><div class="ttdeci">int flow</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00149">res_pjsip.h:149</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="structast__sip__transport_html_a412bcf75e793ebae3f463f57410a6046"><div class="ttname"><a href="../../d1/d04/structast__sip__transport.html#a412bcf75e793ebae3f463f57410a6046">ast_sip_transport::type</a></div><div class="ttdeci">enum ast_transport type</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00193">res_pjsip.h:193</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__transport__state_html"><div class="ttname"><a href="../../db/dac/structast__sip__transport__state.html">ast_sip_transport_state</a></div><div class="ttdoc">Structure for SIP transport information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00087">res_pjsip.h:87</a></div></div>
<div class="ttc" id="structast__sip__transport__state_html_a7475e193e8f10f809dbde0ddba4ad006"><div class="ttname"><a href="../../db/dac/structast__sip__transport__state.html#a7475e193e8f10f809dbde0ddba4ad006">ast_sip_transport_state::transport</a></div><div class="ttdeci">struct pjsip_transport * transport</div><div class="ttdoc">Transport itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00089">res_pjsip.h:89</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__sip__transport_html_a3a44e2579abfd2c9e9cd570a78b01282"><div class="ttname"><a href="../../d1/d04/structast__sip__transport.html#a3a44e2579abfd2c9e9cd570a78b01282">ast_sip_transport::flow</a></div><div class="ttdeci">int flow</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00251">res_pjsip.h:251</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ab6000ab7fe69594070bb59b995ccb5ee"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ab6000ab7fe69594070bb59b995ccb5ee">ast_sip_get_transport_state</a></div><div class="ttdeci">struct ast_sip_transport_state * ast_sip_get_transport_state(const char *transport_id)</div><div class="ttdoc">Retrieve transport state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d17/config__transport_8c_source.html#l01564">config_transport.c:1564</a></div></div>
<div class="ttc" id="structast__sip__transport__state_html_a270761e87121ede08b66619c36c23ebd"><div class="ttname"><a href="../../db/dac/structast__sip__transport__state.html#a270761e87121ede08b66619c36c23ebd">ast_sip_transport_state::factory</a></div><div class="ttdeci">struct pjsip_tpfactory * factory</div><div class="ttdoc">Transport factory. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00091">res_pjsip.h:91</a></div></div>
<div class="ttc" id="netsock2_8h_html_aa2785c5990a086943fea750c980abbc3a6d8ef74bba673bd5a95d9b2da8116b4f"><div class="ttname"><a href="../../db/df1/netsock2_8h.html#aa2785c5990a086943fea750c980abbc3a6d8ef74bba673bd5a95d9b2da8116b4f">AST_TRANSPORT_WS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/df1/netsock2_8h_source.html#l00063">netsock2.h:63</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac94b7c59f69d31b962e42098955f8fa4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac94b7c59f69d31b962e42098955f8fa4">&#9670;&nbsp;</a></span>ast_sip_set_tpselector_from_transport_name()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_set_tpselector_from_transport_name </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>transport_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tpselector *&#160;</td>
          <td class="paramname"><em>selector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets pjsip_tpselector from <a class="el" href="../../d1/d04/structast__sip__transport.html" title="Transport to bind to. ">ast_sip_transport</a>. </p>
<dl class="section since"><dt>Since</dt><dd>13.8.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">transport_name</td><td>The name of the transport to be used </td></tr>
    <tr><td class="paramname">selector</td><td>The selector to be populated </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success </td></tr>
    <tr><td class="paramname">-1</td><td>failure</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The transport selector must be unreffed using ast_sip_tpselector_unref </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03957">3957</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">ast_sip_get_sorcery()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03907">ast_sip_set_tpselector_from_transport()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l01853">ast_sorcery_retrieve_by_id()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00089">ast_sip_transport_state::transport</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03975">ast_sip_set_tpselector_from_ep_or_uri()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l00557">registration_client_send()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00427">set_transport()</a>, and <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01603">sip_outbound_registration_regc_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;{</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/d04/structast__sip__transport.html">ast_sip_transport</a> *, <a class="code" href="../../db/dac/structast__sip__transport__state.html#a7475e193e8f10f809dbde0ddba4ad006">transport</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(transport_name)) {</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;   }</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;   <a class="code" href="../../db/dac/structast__sip__transport__state.html#a7475e193e8f10f809dbde0ddba4ad006">transport</a> = <a class="code" href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a>(<a class="code" href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a>(), <span class="stringliteral">&quot;transport&quot;</span>, transport_name);</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/dac/structast__sip__transport__state.html#a7475e193e8f10f809dbde0ddba4ad006">transport</a>) {</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to retrieve PJSIP transport &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;         transport_name);</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;   }</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a72d9aae56d12729bff60ac4f145db3fc">ast_sip_set_tpselector_from_transport</a>(<a class="code" href="../../db/dac/structast__sip__transport__state.html#a7475e193e8f10f809dbde0ddba4ad006">transport</a>, selector);</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="sorcery_8h_html_a100106a82d72aa59a66513ef3ad161c8"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a100106a82d72aa59a66513ef3ad161c8">ast_sorcery_retrieve_by_id</a></div><div class="ttdeci">void * ast_sorcery_retrieve_by_id(const struct ast_sorcery *sorcery, const char *type, const char *id)</div><div class="ttdoc">Retrieve an object using its unique identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l01853">sorcery.c:1853</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__sip__transport__state_html_a7475e193e8f10f809dbde0ddba4ad006"><div class="ttname"><a href="../../db/dac/structast__sip__transport__state.html#a7475e193e8f10f809dbde0ddba4ad006">ast_sip_transport_state::transport</a></div><div class="ttdeci">struct pjsip_transport * transport</div><div class="ttdoc">Transport itself. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00089">res_pjsip.h:89</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__sip__transport_html"><div class="ttname"><a href="../../d1/d04/structast__sip__transport.html">ast_sip_transport</a></div><div class="ttdoc">Transport to bind to. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00171">res_pjsip.h:171</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a72d9aae56d12729bff60ac4f145db3fc"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a72d9aae56d12729bff60ac4f145db3fc">ast_sip_set_tpselector_from_transport</a></div><div class="ttdeci">int ast_sip_set_tpselector_from_transport(const struct ast_sip_transport *transport, pjsip_tpselector *selector)</div><div class="ttdoc">Sets pjsip_tpselector from ast_sip_transport. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03907">res_pjsip.c:3907</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a5572d52daf1a841b0f9308df901448c8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a5572d52daf1a841b0f9308df901448c8">ast_sip_get_sorcery</a></div><div class="ttdeci">struct ast_sorcery * ast_sip_get_sorcery(void)</div><div class="ttdoc">Get a pointer to the SIP sorcery structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02404">pjsip_configuration.c:2404</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acca3189197cd95ee5ba26bb695fd6078"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acca3189197cd95ee5ba26bb695fd6078">&#9670;&nbsp;</a></span>ast_sip_str_to_dtmf()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_str_to_dtmf </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>dtmf_mode</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert the DTMF mode name into an enum. </p>
<dl class="section since"><dt>Since</dt><dd>13.18.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dtmf_mode</td><td>dtmf mode as a string</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;=</td><td>0 The enum value </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05513">5513</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00419">AST_SIP_DTMF_AUTO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00421">AST_SIP_DTMF_AUTO_INFO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00415">AST_SIP_DTMF_INBAND</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00417">AST_SIP_DTMF_INFO</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00410">AST_SIP_DTMF_NONE</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00413">AST_SIP_DTMF_RFC_4733</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00146">dtmf_handler()</a>, and <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01530">pjsip_acf_dtmf_mode_write()</a>.</p>
<div class="fragment"><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;{</div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = -1;</div><div class="line"><a name="l05516"></a><span class="lineno"> 5516</span>&#160;</div><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(dtmf_mode, <span class="stringliteral">&quot;info&quot;</span>)) {</div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;      result = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1faacdd9acc98ab208a9f83724cc61f667d">AST_SIP_DTMF_INFO</a>;</div><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(dtmf_mode, <span class="stringliteral">&quot;rfc4733&quot;</span>)) {</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;      result = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a>;</div><div class="line"><a name="l05521"></a><span class="lineno"> 5521</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(dtmf_mode, <span class="stringliteral">&quot;inband&quot;</span>)) {</div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;      result = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a>;</div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(dtmf_mode, <span class="stringliteral">&quot;none&quot;</span>)) {</div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;      result = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe">AST_SIP_DTMF_NONE</a>;</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(dtmf_mode, <span class="stringliteral">&quot;auto&quot;</span>)) {</div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;      result = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a>;</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(dtmf_mode, <span class="stringliteral">&quot;auto_info&quot;</span>)) {</div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;      result = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a>;</div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;   }</div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;}</div><div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1faacdd9acc98ab208a9f83724cc61f667d"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1faacdd9acc98ab208a9f83724cc61f667d">AST_SIP_DTMF_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00417">res_pjsip.h:417</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa30981f3f7f5452293dcd27ddc80e2728">AST_SIP_DTMF_AUTO_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00421">res_pjsip.h:421</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa5e869c7cc77a17055a0f4d14095b95f8">AST_SIP_DTMF_INBAND</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00415">res_pjsip.h:415</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa43325569e4e8a4e171dba3f532ff265b">AST_SIP_DTMF_AUTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00419">res_pjsip.h:419</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fade86b10bcf03fc282a3fdccfc68203e2">AST_SIP_DTMF_RFC_4733</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00413">res_pjsip.h:413</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa545d9a3491f89266f1218b7a07bab1fa0209e768577205ae53148593c9c33bbe">AST_SIP_DTMF_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00410">res_pjsip.h:410</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a00b2e65f1281b71eae7dbf27972e99a8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b2e65f1281b71eae7dbf27972e99a8">&#9670;&nbsp;</a></span>ast_sip_threadpool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a>* ast_sip_threadpool </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Retrieve the SIP threadpool object. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05630">5630</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03274">sip_threadpool</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d8/d25/res__pjsip__mwi_8c_source.html#l01553">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;{</div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a>;</div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a714a1bebd7d5fe9712c059a60e3f5f20"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a></div><div class="ttdeci">static struct ast_threadpool * sip_threadpool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03274">res_pjsip.c:3274</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a93df45b17946f91f1300227febf89a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a93df45b17946f91f1300227febf89a73">&#9670;&nbsp;</a></span>ast_sip_threadpool_queue_size()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long ast_sip_threadpool_queue_size </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Return the size of the SIP threadpool's task queue. </p>
<dl class="section since"><dt>Since</dt><dd>13.7.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05625">5625</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01437">ast_threadpool_queue_size()</a>.</p>
<div class="fragment"><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;{</div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d40/threadpool_8h.html#a6e65e5b2e17e83c008f74b1d93cee2b5">ast_threadpool_queue_size</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a>);</div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a714a1bebd7d5fe9712c059a60e3f5f20"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a></div><div class="ttdeci">static struct ast_threadpool * sip_threadpool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03274">res_pjsip.c:3274</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6e65e5b2e17e83c008f74b1d93cee2b5"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6e65e5b2e17e83c008f74b1d93cee2b5">ast_threadpool_queue_size</a></div><div class="ttdeci">long ast_threadpool_queue_size(struct ast_threadpool *pool)</div><div class="ttdoc">Return the size of the threadpool&amp;#39;s task queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l01437">threadpool.c:1437</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e1ef995698ba16cad6608225b8de946"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e1ef995698ba16cad6608225b8de946">&#9670;&nbsp;</a></span>ast_sip_tpselector_unref()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_tpselector_unref </td>
          <td>(</td>
          <td class="paramtype">pjsip_tpselector *&#160;</td>
          <td class="paramname"><em>selector</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unreference a pjsip_tpselector. </p>
<dl class="section since"><dt>Since</dt><dd>17.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">selector</td><td>The selector to be unreffed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03987">3987</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04028">ast_sip_create_dialog_uac()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03791">ast_sip_dlg_set_transport()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04177">create_dialog_uas()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l00557">registration_client_send()</a>, <a class="el" href="../../df/d3a/res__pjsip__outbound__publish_8c_source.html#l00427">set_transport()</a>, and <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01603">sip_outbound_registration_regc_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;{</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;   <span class="keywordflow">if</span> (selector-&gt;type == PJSIP_TPSELECTOR_TRANSPORT &amp;&amp; selector-&gt;u.transport) {</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;      pjsip_transport_dec_ref(selector-&gt;u.transport);</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;   }</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a8fa30d3e04f251038795393bbd08e75f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8fa30d3e04f251038795393bbd08e75f">&#9670;&nbsp;</a></span>ast_sip_unregister_authenticator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_authenticator </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/de9/structast__sip__authenticator.html">ast_sip_authenticator</a> *&#160;</td>
          <td class="paramname"><em>auth</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a SIP authenticator. </p>
<p>When there is no authenticator registered, requests cannot be challenged or authenticated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">auth</td><td>The authenticator to unregister </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03350">3350</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/db2/res__pjsip__authenticator__digest_8c_source.html#l00558">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;{</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a> != auth) {</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Trying to unregister authenticator %p but authenticator %p registered\n&quot;</span>,</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;            auth, <a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a>);</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;   }</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unregistered SIP authenticator %p\n&quot;</span>, auth);</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_ac51146e0275b19fab3031e6176c745e8"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ac51146e0275b19fab3031e6176c745e8">registered_authenticator</a></div><div class="ttdeci">static struct ast_sip_authenticator * registered_authenticator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03336">res_pjsip.c:3336</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa3ce86eac2bb4697e59839b6020b9712"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa3ce86eac2bb4697e59839b6020b9712">&#9670;&nbsp;</a></span>ast_sip_unregister_endpoint_formatter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_endpoint_formatter </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d6/d30/structast__sip__endpoint__formatter.html">ast_sip_endpoint_formatter</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister an endpoint formatter. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">obj</td><td>the formatter to unregister </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03685">3685</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02835">ast_res_pjsip_cleanup_options_handling()</a>, <a class="el" href="../../d5/dcb/config__auth_8c_source.html#l00426">ast_sip_destroy_sorcery_auth()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l01467">ast_sip_destroy_sorcery_location()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l01692">ast_sip_destroy_sorcery_transport()</a>, and <a class="el" href="../../df/d91/res__pjsip__endpoint__identifier__ip_8c_source.html#l00887">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;{</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/d30/structast__sip__endpoint__formatter.html">ast_sip_endpoint_formatter</a> *i;</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a>, i, next) {</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;      <span class="keywordflow">if</span> (i == obj) {</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(next);</div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;      }</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;   }</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint__formatter_html"><div class="ttname"><a href="../../d6/d30/structast__sip__endpoint__formatter.html">ast_sip_endpoint_formatter</a></div><div class="ttdoc">An entity responsible formatting endpoint information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02763">res_pjsip.h:2763</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structendpoint__formatters_html"><div class="ttname"><a href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03677">res_pjsip.c:3677</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7ba7488bde246be405e2e376f18107ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ba7488bde246be405e2e376f18107ab">&#9670;&nbsp;</a></span>ast_sip_unregister_endpoint_identifier()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_endpoint_identifier </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d97/structast__sip__endpoint__identifier.html">ast_sip_endpoint_identifier</a> *&#160;</td>
          <td class="paramname"><em>identifier</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a SIP endpoint identifier. </p>
<p>This stops an endpoint identifier from being used.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">identifier</td><td>The SIP endoint identifier to unregister </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03513">3513</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03425">endpoint_identifier_list::identifier</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/dd7/res__pjsip__endpoint__identifier__anonymous_8c_source.html#l00133">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;{</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d73/structendpoint__identifier__list.html">endpoint_identifier_list</a> *iter;</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, iter, list) {</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;      <span class="keywordflow">if</span> (iter-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a7f1bfe31ef240c6c5e0a688bace06214">identifier</a> == identifier) {</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(list);</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(iter);</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unregistered endpoint identifier %p\n&quot;</span>, identifier);</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      }</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;   }</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structendpoint__identifier__list_html"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html">endpoint_identifier_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03422">res_pjsip.c:3422</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structendpoint__identifier__list_html_a7f1bfe31ef240c6c5e0a688bace06214"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html#a7f1bfe31ef240c6c5e0a688bace06214">endpoint_identifier_list::identifier</a></div><div class="ttdeci">struct ast_sip_endpoint_identifier * identifier</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03425">res_pjsip.c:3425</a></div></div>
<div class="ttc" id="structendpoint__identifiers_html"><div class="ttname"><a href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03429">res_pjsip.c:3429</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a7f20f3df296fe384f405c5e5a2995a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a7f20f3df296fe384f405c5e5a2995a">&#9670;&nbsp;</a></span>ast_sip_unregister_outbound_authenticator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_outbound_authenticator </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/dc2/structast__sip__outbound__authenticator.html">ast_sip_outbound_authenticator</a> *&#160;</td>
          <td class="paramname"><em>auth</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister an outbound SIP authenticator. </p>
<p>When there is no outbound authenticator registered, authentication challenges will be handled as any other final response would be.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">auth</td><td>The authenticator to unregister </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03401">3401</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d61/res__pjsip__outbound__authenticator__digest_8c_source.html#l00589">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;{</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a> != auth) {</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Trying to unregister outbound authenticator %p but outbound authenticator %p registered\n&quot;</span>,</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;            auth, <a class="code" href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a>);</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;   }</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unregistered SIP outbound authenticator %p\n&quot;</span>, auth);</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a18741a3257cf9d9ae4f755778d97f716"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a18741a3257cf9d9ae4f755778d97f716">registered_outbound_authenticator</a></div><div class="ttdeci">static struct ast_sip_outbound_authenticator * registered_outbound_authenticator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03387">res_pjsip.c:3387</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a15aa09d9084763cdd20b7467a4cd381a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15aa09d9084763cdd20b7467a4cd381a">&#9670;&nbsp;</a></span>ast_sip_unregister_service()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_service </td>
          <td>(</td>
          <td class="paramtype">pjsip_module *&#160;</td>
          <td class="paramname"><em>module</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the opposite of <a class="el" href="../../d8/d8c/res__pjsip_8h.html#a2d923ef44f62dffc05178f762b88f084" title="Register a SIP service in Asterisk. ">ast_sip_register_service()</a>. Unregistering a service means that PJSIP will no longer call into the module any more. This will likely occur when an Asterisk module is unloaded.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">module</td><td>The PJSIP module to unregister </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03331">3331</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03320">unregister_service()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00565">ast_res_pjsip_cleanup_message_filter()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l01334">ast_sip_destroy_distributor()</a>, <a class="el" href="../../db/d73/pjsip__global__headers_8c_source.html#l00181">ast_sip_destroy_global_headers()</a>, <a class="el" href="../../da/db9/pjsip__transport__management_8c_source.html#l00410">ast_sip_destroy_transport_management()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03304">load_module()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l03403">unload_module()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05700">unload_pjsip()</a>.</p>
<div class="fragment"><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;{</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;   <a class="code" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a42cd1bebde23095537a4bfc00d28b75c">unregister_service</a>, &amp;module);</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_gab8c82412fe0432a91d5c7985cfdf9b59"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a></div><div class="ttdeci">int ast_sip_push_task_wait_servant(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to SIP servants and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05204">res_pjsip.c:5204</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a42cd1bebde23095537a4bfc00d28b75c"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a42cd1bebde23095537a4bfc00d28b75c">unregister_service</a></div><div class="ttdeci">static int unregister_service(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03320">res_pjsip.c:3320</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0447e416567fdecaeef948338493d571"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0447e416567fdecaeef948338493d571">&#9670;&nbsp;</a></span>ast_sip_unregister_supplement()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sip_unregister_supplement </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *&#160;</td>
          <td class="paramname"><em>supplement</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unregister a an supplement to SIP out of dialog processing. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">supplement</td><td>The supplement to unregister </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04531">4531</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02938">ast_sip_supplement::next</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00565">ast_res_pjsip_cleanup_message_filter()</a>, and <a class="el" href="../../d9/d91/res__pjsip__path_8c_source.html#l00260">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;{</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *iter;</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>, iter, <a class="code" href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">next</a>) {</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;      <span class="keywordflow">if</span> (supplement == iter) {</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">next</a>);</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;      }</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;   }</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_ab03b800fabdc22f80a5fc2bf746defb2"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">ast_sip_supplement::next</a></div><div class="ttdeci">struct ast_sip_supplement * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02938">res_pjsip.h:2938</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="structsupplements_html"><div class="ttname"><a href="../../d7/db8/structsupplements.html">supplements</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04509">res_pjsip.c:4509</a></div></div>
<div class="ttc" id="structast__sip__supplement_html"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a></div><div class="ttdoc">A supplement to SIP message processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02888">res_pjsip.h:2888</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac73444851015b8a7be33534e4a7d2878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac73444851015b8a7be33534e4a7d2878">&#9670;&nbsp;</a></span>ast_sip_will_uri_survive_restart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_sip_will_uri_survive_restart </td>
          <td>(</td>
          <td class="paramtype">pjsip_sip_uri *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03723">3723</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00845">ast_sip_endpoint::nat</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00620">ast_sip_endpoint_nat_configuration::rewrite_contact</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/db0/res__pjsip__registrar_8c_source.html#l00584">register_aor_core()</a>, and <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00662">subscription_persistence_update()</a>.</p>
<div class="fragment"><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;{</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;   pj_str_t host_name;</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = 1;</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;</div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;   <span class="comment">/* Determine if the contact cannot survive a restart/boot. */</span></div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;   <span class="keywordflow">if</span> (uri-&gt;port == rdata-&gt;pkt_info.src_port</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;      &amp;&amp; !pj_strcmp(&amp;uri-&gt;host,</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;         pj_cstr(&amp;host_name, rdata-&gt;pkt_info.src_name))</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;      <span class="comment">/* We have already checked if the URI scheme is sip: or sips: */</span></div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;      &amp;&amp; PJSIP_TRANSPORT_IS_RELIABLE(rdata-&gt;tp_info.transport)) {</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;      pj_str_t type_name;</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;      <span class="comment">/* Determine the transport parameter value */</span></div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;WSS&quot;</span>, rdata-&gt;tp_info.transport-&gt;type_name)) {</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;         <span class="comment">/* WSS is special, as it needs to be ws. */</span></div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;         pj_cstr(&amp;type_name, <span class="stringliteral">&quot;ws&quot;</span>);</div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;         pj_cstr(&amp;type_name, rdata-&gt;tp_info.transport-&gt;type_name);</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;      }</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;</div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;      <span class="keywordflow">if</span> (!pj_stricmp(&amp;uri-&gt;transport_param, &amp;type_name)</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;         &amp;&amp; (endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#adcbb3c22fb9d5586b8c4fbfa80772123">nat</a>.<a class="code" href="../../d4/d84/structast__sip__endpoint__nat__configuration.html#a20d7239bf42d25de23d8f6ca5b4b7ade">rewrite_contact</a></div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;            <span class="comment">/* Websockets are always rewritten */</span></div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;            || !pj_stricmp(&amp;uri-&gt;transport_param,</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;               pj_cstr(&amp;type_name, <span class="stringliteral">&quot;ws&quot;</span>)))) {</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;<span class="comment">          * The contact was rewritten to the reliable transport&#39;s</span></div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;<span class="comment">          * source address.  Disconnecting the transport for any</span></div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;<span class="comment">          * reason invalidates the contact.</span></div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;         result = 0;</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;      }</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;   }</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint_html_adcbb3c22fb9d5586b8c4fbfa80772123"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#adcbb3c22fb9d5586b8c4fbfa80772123">ast_sip_endpoint::nat</a></div><div class="ttdeci">struct ast_sip_endpoint_nat_configuration nat</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00845">res_pjsip.h:845</a></div></div>
<div class="ttc" id="structast__sip__endpoint__nat__configuration_html_a20d7239bf42d25de23d8f6ca5b4b7ade"><div class="ttname"><a href="../../d4/d84/structast__sip__endpoint__nat__configuration.html#a20d7239bf42d25de23d8f6ca5b4b7ade">ast_sip_endpoint_nat_configuration::rewrite_contact</a></div><div class="ttdeci">unsigned int rewrite_contact</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00620">res_pjsip.h:620</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c47b64c29f38d953bb5fedb3f22c5fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c47b64c29f38d953bb5fedb3f22c5fa">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">xml_sanitization_end_null&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05636">5636</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6b/presence__xml_8c_source.html#l00029">ast_sip_sanitize_xml()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;{</div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;   <span class="keywordtype">char</span> sanitized[8];</div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;</div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;xml_sanitization_end_null&quot;</span>;</div><div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/res_pjsip/&quot;</span>;</div><div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Ensure XML sanitization works as expected with a long string&quot;</span>;</div><div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test sanitizes a string which exceeds the output\n&quot;</span></div><div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;         <span class="stringliteral">&quot;buffer size. Once done the string is confirmed to be NULL terminated.&quot;</span>;</div><div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;   }</div><div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;</div><div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;   <a class="code" href="../../d5/dc3/res__pjsip__presence__xml_8h.html#a02cd535aafba3705439f21c2e0a160ca">ast_sip_sanitize_xml</a>(<span class="stringliteral">&quot;aaaaaaaaaaaa&quot;</span>, sanitized, <span class="keyword">sizeof</span>(sanitized));</div><div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;   <span class="keywordflow">if</span> (sanitized[7] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Sanitized XML string is not null-terminated when it should be\n&quot;</span>);</div><div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;   }</div><div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;</div><div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="res__pjsip__presence__xml_8h_html_a02cd535aafba3705439f21c2e0a160ca"><div class="ttname"><a href="../../d5/dc3/res__pjsip__presence__xml_8h.html#a02cd535aafba3705439f21c2e0a160ca">ast_sip_sanitize_xml</a></div><div class="ttdeci">void ast_sip_sanitize_xml(const char *input, char *output, size_t len)</div><div class="ttdoc">Replace offensive XML characters with XML entities. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/presence__xml_8c_source.html#l00029">presence_xml.c:29</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acb5298d5b642dd1c5b584ed13e6cec2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acb5298d5b642dd1c5b584ed13e6cec2a">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">xml_sanitization_exceeds_buffer&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05661">5661</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d6b/presence__xml_8c_source.html#l00029">ast_sip_sanitize_xml()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l05662"></a><span class="lineno"> 5662</span>&#160;{</div><div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;   <span class="keywordtype">char</span> sanitized[8];</div><div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;</div><div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;xml_sanitization_exceeds_buffer&quot;</span>;</div><div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/res/res_pjsip/&quot;</span>;</div><div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Ensure XML sanitization does not exceed buffer when output won&#39;t fit&quot;</span>;</div><div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <span class="stringliteral">&quot;This test sanitizes a string which before sanitization would\n&quot;</span></div><div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;         <span class="stringliteral">&quot;fit within the output buffer. After sanitization, however, the string would\n&quot;</span></div><div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;         <span class="stringliteral">&quot;exceed the buffer. Once done the string is confirmed to be NULL terminated.&quot;</span>;</div><div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;   }</div><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;</div><div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;   <a class="code" href="../../d5/dc3/res__pjsip__presence__xml_8h.html#a02cd535aafba3705439f21c2e0a160ca">ast_sip_sanitize_xml</a>(<span class="stringliteral">&quot;&lt;&gt;&lt;&gt;&lt;&gt;&amp;&quot;</span>, sanitized, <span class="keyword">sizeof</span>(sanitized));</div><div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;   <span class="keywordflow">if</span> (sanitized[7] != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Sanitized XML string is not null-terminated when it should be\n&quot;</span>);</div><div class="line"><a name="l05681"></a><span class="lineno"> 5681</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;   }</div><div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;</div><div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="res__pjsip__presence__xml_8h_html_a02cd535aafba3705439f21c2e0a160ca"><div class="ttname"><a href="../../d5/dc3/res__pjsip__presence__xml_8h.html#a02cd535aafba3705439f21c2e0a160ca">ast_sip_sanitize_xml</a></div><div class="ttdeci">void ast_sip_sanitize_xml(const char *input, char *output, size_t len)</div><div class="ttdoc">Replace offensive XML characters with XML entities. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d6b/presence__xml_8c_source.html#l00029">presence_xml.c:29</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7661941b5f005f714d8a7df5cbbbdc94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7661941b5f005f714d8a7df5cbbbdc94">&#9670;&nbsp;</a></span>check_request_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int check_request_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d8e/structsend__request__data.html">send_request_data</a> *&#160;</td>
          <td class="paramname"><em>req_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_event *&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04894">4894</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03412">ast_sip_create_request_with_auth()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04871">ast_sip_failover_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04579">send_request_data::challenge_count</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04573">send_request_data::endpoint</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04751">endpt_send_request()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00080">MAX_RX_CHALLENGES</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00855">ast_sip_endpoint::outbound_auths</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04937">send_request_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;{</div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint;</div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;   pjsip_transaction *tsx;</div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;   pjsip_tx_data *tdata;</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;   <span class="keywordflow">if</span> (!(endpoint = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>))) {</div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;   }</div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;   tsx = e-&gt;body.tsx_state.tsx;</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;   <span class="keywordflow">switch</span> (tsx-&gt;status_code) {</div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;   <span class="keywordflow">case</span> 401:</div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;   <span class="keywordflow">case</span> 407:</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;      <span class="comment">/* Resend the request with a challenge response if we are challenged. */</span></div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;      res = ++req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#adf1d515ae84fb802373c34dd6683016d">challenge_count</a> &lt; <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ad20119f55c48a211b2a552abdcada8ea">MAX_RX_CHALLENGES</a> <span class="comment">/* Not in a challenge loop */</span></div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;         &amp;&amp; !<a class="code" href="../../de/d96/res__pjsip_8c.html#aec0c3a5b05e151de8052f6b09950de92">ast_sip_create_request_with_auth</a>(&amp;endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">outbound_auths</a>,</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;            e-&gt;body.tsx_state.src.rdata, tsx-&gt;last_tx, &amp;tdata);</div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;   <span class="keywordflow">case</span> 408:</div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;   <span class="keywordflow">case</span> 503:</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;      <span class="keywordflow">if</span> ((res = <a class="code" href="../../de/d96/res__pjsip_8c.html#afa22bc164a1c4108006f96822318ff14">ast_sip_failover_request</a>(tsx-&gt;last_tx))) {</div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;         tdata = tsx-&gt;last_tx;</div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;<span class="comment">          * Bump the ref since it will be on a new transaction and</span></div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;<span class="comment">          * we don&#39;t want it to go away along with the old transaction.</span></div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;         pjsip_tx_data_add_ref(tdata);</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;      }</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;   }</div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;      res = <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b67a512469864e7ed2add9b85e9dd4b">endpt_send_request</a>(endpoint, tdata, -1,</div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;                req_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#a687c566135e86195175d937499c14956">send_request_cb</a>) == PJ_SUCCESS;</div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;   }</div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(endpoint, -1);</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;}</div><div class="ttc" id="structast__sip__endpoint_html_a045e92a13d3f4b1e0d061b4b6e64f1e1"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a045e92a13d3f4b1e0d061b4b6e64f1e1">ast_sip_endpoint::outbound_auths</a></div><div class="ttdeci">struct ast_sip_auth_vector outbound_auths</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00855">res_pjsip.h:855</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a></div><div class="ttdoc">An entity with which Asterisk communicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00812">res_pjsip.h:812</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b67a512469864e7ed2add9b85e9dd4b"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b67a512469864e7ed2add9b85e9dd4b">endpt_send_request</a></div><div class="ttdeci">static pj_status_t endpt_send_request(struct ast_sip_endpoint *endpoint, pjsip_tx_data *tdata, pj_int32_t timeout, void *token, pjsip_endpt_send_callback cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04751">res_pjsip.c:4751</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ad20119f55c48a211b2a552abdcada8ea"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ad20119f55c48a211b2a552abdcada8ea">MAX_RX_CHALLENGES</a></div><div class="ttdeci">#define MAX_RX_CHALLENGES</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00080">res_pjsip.h:80</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_afa22bc164a1c4108006f96822318ff14"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#afa22bc164a1c4108006f96822318ff14">ast_sip_failover_request</a></div><div class="ttdeci">int ast_sip_failover_request(pjsip_tx_data *tdata)</div><div class="ttdoc">Set a request to use the next value in the list of resolved addresses. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04871">res_pjsip.c:4871</a></div></div>
<div class="ttc" id="structsend__request__data_html_adf1d515ae84fb802373c34dd6683016d"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html#adf1d515ae84fb802373c34dd6683016d">send_request_data::challenge_count</a></div><div class="ttdeci">unsigned int challenge_count</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04579">res_pjsip.c:4579</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a687c566135e86195175d937499c14956"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a687c566135e86195175d937499c14956">send_request_cb</a></div><div class="ttdeci">static void send_request_cb(void *token, pjsip_event *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04937">res_pjsip.c:4937</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_aec0c3a5b05e151de8052f6b09950de92"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#aec0c3a5b05e151de8052f6b09950de92">ast_sip_create_request_with_auth</a></div><div class="ttdeci">int ast_sip_create_request_with_auth(const struct ast_sip_auth_vector *auths, pjsip_rx_data *challenge, pjsip_tx_data *old_request, pjsip_tx_data **new_request)</div><div class="ttdoc">Create a response to an authentication challenge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03412">res_pjsip.c:3412</a></div></div>
<div class="ttc" id="structsend__request__data_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html#a3960205b2a4e7e012dc9f0eae1855f01">send_request_data::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04573">res_pjsip.c:4573</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6021dfa5cb4d9114c224cd5e3ba4c37e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6021dfa5cb4d9114c224cd5e3ba4c37e">&#9670;&nbsp;</a></span>cli_dump_endpt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* cli_dump_endpt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03569">3569</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03558">do_cli_dump_endpt()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;{</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;<span class="preprocessor">#ifdef AST_DEVMODE</span></div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;pjsip dump endpt [details]&quot;</span>;</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;         <span class="stringliteral">&quot;Usage: pjsip dump endpt [details]\n&quot;</span></div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;         <span class="stringliteral">&quot;       Dump the res_pjsip endpt internals.\n&quot;</span></div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;         <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;         <span class="stringliteral">&quot;Warning: PJPROJECT documents that the function used by this\n&quot;</span></div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;         <span class="stringliteral">&quot;CLI command may cause a crash when asking for details because\n&quot;</span></div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;         <span class="stringliteral">&quot;it tries to access all active memory pools.\n&quot;</span>;</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;<span class="comment">       * In non-developer mode we will not document or make easily accessible</span></div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;<span class="comment">       * the details option even though it is still available.  The user has</span></div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;<span class="comment">       * to know it exists to use it.  Presumably they would also be aware of</span></div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;<span class="comment">       * the potential crash warning.</span></div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;pjsip dump endpt&quot;</span>;</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;         <span class="stringliteral">&quot;Usage: pjsip dump endpt\n&quot;</span></div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;         <span class="stringliteral">&quot;       Dump the res_pjsip endpt internals.\n&quot;</span>;</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* AST_DEVMODE */</span><span class="preprocessor"></span></div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;   }</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;</div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;   <span class="keywordflow">if</span> (4 &lt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a></div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;      || (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4 &amp;&amp; strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;details&quot;</span>))) {</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;   }</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;   <a class="code" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#acedf790aa46452b7e6b63f39cc55ddbb">do_cli_dump_endpt</a>, a);</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_gab8c82412fe0432a91d5c7985cfdf9b59"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a></div><div class="ttdeci">int ast_sip_push_task_wait_servant(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to SIP servants and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05204">res_pjsip.c:5204</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_acedf790aa46452b7e6b63f39cc55ddbb"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#acedf790aa46452b7e6b63f39cc55ddbb">do_cli_dump_endpt</a></div><div class="ttdeci">static int do_cli_dump_endpt(void *v_a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03558">res_pjsip.c:3558</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a524724e8e301b61448a7bb40a4a8e94e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a524724e8e301b61448a7bb40a4a8e94e">&#9670;&nbsp;</a></span>cli_show_endpoint_identifiers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* cli_show_endpoint_identifiers </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03609">3609</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/d96/res__pjsip_8c.html#aeb248eaa5cd9af207be8202d1bd0443c">ENDPOINT_IDENTIFIER_FORMAT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01091">lock</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03423">endpoint_identifier_list::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00581">SCOPED_LOCK</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;{</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;<span class="preprocessor">#define ENDPOINT_IDENTIFIER_FORMAT &quot;%-20.20s\n&quot;</span></div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/d73/structendpoint__identifier__list.html">endpoint_identifier_list</a> *iter;</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;pjsip show identifiers&quot;</span>;</div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;Usage: pjsip show identifiers\n&quot;</span></div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;                  <span class="stringliteral">&quot;      List all registered endpoint identifiers\n&quot;</span>;</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;   }</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;        }</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#aeb248eaa5cd9af207be8202d1bd0443c">ENDPOINT_IDENTIFIER_FORMAT</a>, <span class="stringliteral">&quot;Identifier Names:&quot;</span>);</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;   {</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>, <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>);</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>, iter, list) {</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#aeb248eaa5cd9af207be8202d1bd0443c">ENDPOINT_IDENTIFIER_FORMAT</a>,</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;            iter-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> ? iter-&gt;<a class="code" href="../../d3/d73/structendpoint__identifier__list.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> : <span class="stringliteral">&quot;name not specified&quot;</span>);</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;      }</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;   }</div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;<span class="preprocessor">#undef ENDPOINT_IDENTIFIER_FORMAT</span></div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structendpoint__identifier__list_html"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html">endpoint_identifier_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03422">res_pjsip.c:3422</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_aeb248eaa5cd9af207be8202d1bd0443c"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#aeb248eaa5cd9af207be8202d1bd0443c">ENDPOINT_IDENTIFIER_FORMAT</a></div><div class="ttdeci">#define ENDPOINT_IDENTIFIER_FORMAT</div></div>
<div class="ttc" id="structendpoint__identifier__list_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d3/d73/structendpoint__identifier__list.html#a8f8f80d37794cde9472343e4487ba3eb">endpoint_identifier_list::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03423">res_pjsip.c:3423</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="lock_8h_html_a8b9d9f2f2c41ecf3c70587c2510dddfc"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8b9d9f2f2c41ecf3c70587c2510dddfc">SCOPED_LOCK</a></div><div class="ttdeci">#define SCOPED_LOCK(varname, lock, lockfunc, unlockfunc)</div><div class="ttdoc">Scoped Locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00581">lock.h:581</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structendpoint__identifiers_html"><div class="ttname"><a href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03429">res_pjsip.c:3429</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95d5465d94a305efee886a3a3e7fe5df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95d5465d94a305efee886a3a3e7fe5df">&#9670;&nbsp;</a></span>cli_show_settings()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* cli_show_settings </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03640">3640</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/d9f/res__pjsip__cli_8h_source.html#l00036">ast_sip_cli_context::output_buffer</a>, <a class="el" href="../../dd/dfd/config__global_8c_source.html#l00612">sip_cli_print_global()</a>, <a class="el" href="../../df/dfd/config__system_8c_source.html#l00157">sip_cli_print_system()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;{</div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/da9/structast__sip__cli__context.html">ast_sip_cli_context</a> <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;pjsip show settings&quot;</span>;</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> = <span class="stringliteral">&quot;Usage: pjsip show settings\n&quot;</span></div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;                  <span class="stringliteral">&quot;      Show global and system configuration options\n&quot;</span>;</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;   }</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;   <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.output_buffer = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(256);</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.output_buffer) {</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Could not allocate output buffer.\n&quot;</span>);</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;   }</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/dfd/config__global_8c.html#afb4668aa74fd77b67e3661589882f8ee">sip_cli_print_global</a>(&amp;<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>) || <a class="code" href="../../df/dfd/config__system_8c.html#a727f86cf9cff45e0271b34d6a9709511">sip_cli_print_system</a>(&amp;<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>)) {</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.output_buffer);</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Error retrieving settings.\n&quot;</span>);</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;   }</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.output_buffer));</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>.output_buffer);</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;}</div><div class="ttc" id="config__global_8c_html_afb4668aa74fd77b67e3661589882f8ee"><div class="ttname"><a href="../../dd/dfd/config__global_8c.html#afb4668aa74fd77b67e3661589882f8ee">sip_cli_print_global</a></div><div class="ttdeci">int sip_cli_print_global(struct ast_sip_cli_context *context)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfd/config__global_8c_source.html#l00612">config_global.c:612</a></div></div>
<div class="ttc" id="config__system_8c_html_a727f86cf9cff45e0271b34d6a9709511"><div class="ttname"><a href="../../df/dfd/config__system_8c.html#a727f86cf9cff45e0271b34d6a9709511">sip_cli_print_system</a></div><div class="ttdeci">int sip_cli_print_system(struct ast_sip_cli_context *context)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/config__system_8c_source.html#l00157">config_system.c:157</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="structast__sip__cli__context_html"><div class="ttname"><a href="../../d6/da9/structast__sip__cli__context.html">ast_sip_cli_context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d9f/res__pjsip__cli_8h_source.html#l00034">res_pjsip_cli.h:34</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a001d7f718db023957fc1794c311ee1fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a001d7f718db023957fc1794c311ee1fb">&#9670;&nbsp;</a></span>create_dialog_uas()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pjsip_dialog* create_dialog_uas </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_status_t *&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d96/res__pjsip_8c.html#a16e7a09746725d7b3e7a41bdd83cd40f">create_dlg_uac</a>&#160;</td>
          <td class="paramname"><em>create_fun</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04177">4177</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03975">ast_sip_set_tpselector_from_ep_or_uri()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03987">ast_sip_tpselector_unref()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00089">ast_sip_transport_state::transport</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04148">uas_use_sips_contact()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04233">ast_sip_create_dialog_uas()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04249">ast_sip_create_dialog_uas_locked()</a>.</p>
<div class="fragment"><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;{</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;   pjsip_dialog *dlg;</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;   pj_str_t <a class="code" href="../../d9/d03/structcontact.html">contact</a>;</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;   pjsip_transport_type_e <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a> = rdata-&gt;tp_info.transport-&gt;key.type;</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;   pjsip_tpselector selector = { .type = PJSIP_TPSELECTOR_NONE, };</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;   pjsip_transport *transport;</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;   pjsip_contact_hdr *contact_hdr;</div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;   contact_hdr = pjsip_msg_find_hdr(rdata-&gt;msg_info.msg, PJSIP_H_CONTACT, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;   <span class="keywordflow">if</span> (!contact_hdr || <a class="code" href="../../de/d96/res__pjsip_8c.html#a74c80b6cedcf4cc847f2b81ba6437337">ast_sip_set_tpselector_from_ep_or_uri</a>(endpoint, pjsip_uri_get_uri(contact_hdr-&gt;uri),</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;      &amp;selector)) {</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;   }</div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;</div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;   transport = rdata-&gt;tp_info.transport;</div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;   <span class="keywordflow">if</span> (selector.type == PJSIP_TPSELECTOR_TRANSPORT) {</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;      transport = selector.u.transport;</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;   }</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;   type = transport-&gt;key.type;</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;   contact.ptr = pj_pool_alloc(rdata-&gt;tp_info.pool, PJSIP_MAX_URL_SIZE);</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;   contact.slen = pj_ansi_snprintf(contact.ptr, PJSIP_MAX_URL_SIZE,</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;         <span class="stringliteral">&quot;&lt;%s:%s%.*s%s:%d%s%s&gt;&quot;</span>,</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;         <a class="code" href="../../de/d96/res__pjsip_8c.html#a44156c2c09c780fb30a07ab6f2609204">uas_use_sips_contact</a>(rdata) ? <span class="stringliteral">&quot;sips&quot;</span> : <span class="stringliteral">&quot;sip&quot;</span>,</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;         (type &amp; PJSIP_TRANSPORT_IPV6) ? <span class="stringliteral">&quot;[&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;         (<span class="keywordtype">int</span>)transport-&gt;local_name.host.slen,</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;         transport-&gt;local_name.host.ptr,</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;         (type &amp; PJSIP_TRANSPORT_IPV6) ? <span class="stringliteral">&quot;]&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;         transport-&gt;local_name.port,</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;         (type != PJSIP_TRANSPORT_UDP &amp;&amp; type != PJSIP_TRANSPORT_UDP6) ? <span class="stringliteral">&quot;;transport=&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;         (type != PJSIP_TRANSPORT_UDP &amp;&amp; type != PJSIP_TRANSPORT_UDP6) ? pjsip_transport_get_type_name(type) : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;   *<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> = create_fun(pjsip_ua_instance(), rdata, &amp;contact, &amp;dlg);</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;   <span class="keywordflow">if</span> (*<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a> != PJ_SUCCESS) {</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;      <span class="keywordtype">char</span> err[PJ_ERR_MSG_SIZE];</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;      pj_strerror(*<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>, err, <span class="keyword">sizeof</span>(err));</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create dialog with endpoint %s. %s\n&quot;</span>,</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;            <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint), err);</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a>(&amp;selector);</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;   }</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;   dlg-&gt;sess_count++;</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;   pjsip_dlg_set_transport(dlg, &amp;selector);</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;   dlg-&gt;sess_count--;</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a>(&amp;selector);</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;   <span class="keywordflow">return</span> dlg;</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a74c80b6cedcf4cc847f2b81ba6437337"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a74c80b6cedcf4cc847f2b81ba6437337">ast_sip_set_tpselector_from_ep_or_uri</a></div><div class="ttdeci">int ast_sip_set_tpselector_from_ep_or_uri(const struct ast_sip_endpoint *endpoint, pjsip_sip_uri *sip_uri, pjsip_tpselector *selector)</div><div class="ttdoc">Sets pjsip_tpselector from an endpoint or uri. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03975">res_pjsip.c:3975</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a9e1ef995698ba16cad6608225b8de946"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a></div><div class="ttdeci">void ast_sip_tpselector_unref(pjsip_tpselector *selector)</div><div class="ttdoc">Unreference a pjsip_tpselector. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03987">res_pjsip.c:3987</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a44156c2c09c780fb30a07ab6f2609204"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a44156c2c09c780fb30a07ab6f2609204">uas_use_sips_contact</a></div><div class="ttdeci">static int uas_use_sips_contact(pjsip_rx_data *rdata)</div><div class="ttdoc">Determine if a SIPS Contact header is required. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04148">res_pjsip.c:4148</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a19ac5266932008840d797d3946819812"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a19ac5266932008840d797d3946819812">&#9670;&nbsp;</a></span>create_in_dialog_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int create_in_dialog_request </td>
          <td>(</td>
          <td class="paramtype">const pjsip_method *&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjsip_dialog *&#160;</td>
          <td class="paramname"><em>dlg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data **&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04362">4362</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05361">supplement_on_rx_request()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04490">ast_sip_create_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;{</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;   <span class="keywordflow">if</span> (pjsip_dlg_create_request(dlg, <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, -1, tdata) != PJ_SUCCESS) {</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to create in-dialog request.\n&quot;</span>);</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;   }</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;</div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a30c4a2058fe4ecb01a1cb8e4af76d7d2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a30c4a2058fe4ecb01a1cb8e4af76d7d2">&#9670;&nbsp;</a></span>create_out_of_dialog_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int create_out_of_dialog_request </td>
          <td>(</td>
          <td class="paramtype">const pjsip_method *&#160;</td>
          <td class="paramname"><em>method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *&#160;</td>
          <td class="paramname"><em>provided_contact</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data **&#160;</td>
          <td class="paramname"><em>tdata</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">4380</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00821">ast_sip_endpoint::aors</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03994">ast_sip_add_usereqphone()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00304">ast_sip_location_retrieve_contact_from_aor_list()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02670">ast_sip_mod_data_set</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05047">ast_sip_set_outbound_proxy()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03975">ast_sip_set_tpselector_from_ep_or_uri()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03987">ast_sip_tpselector_unref()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00887">ast_sip_endpoint::contact_user</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00831">ast_sip_endpoint::fromdomain</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00829">ast_sip_endpoint::fromuser</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03264">MOD_DATA_CONTACT</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00819">ast_sip_endpoint::outbound_proxy</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03813">sip_dialog_create_from()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04373">supplement_module</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04490">ast_sip_create_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;{</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *, <a class="code" href="../../d9/d03/structcontact.html">contact</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(provided_contact), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;   pj_str_t remote_uri;</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;   pj_str_t from;</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;   pj_pool_t *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>;</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;   pjsip_tpselector selector = { .type = PJSIP_TPSELECTOR_NONE, };</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;   pjsip_uri *sip_uri;</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *fromuser;</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(uri)) {</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;      <span class="keywordflow">if</span> (!endpoint &amp;&amp; (!<a class="code" href="../../d9/d03/structcontact.html">contact</a> || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d9/d03/structcontact.html">contact</a>-&gt;uri))) {</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;An endpoint and/or uri must be specified\n&quot;</span>);</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;      }</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d03/structcontact.html">contact</a>) {</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;         <a class="code" href="../../d9/d03/structcontact.html">contact</a> = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a00fd98f03df089bd6aa358f941ae0dcd">ast_sip_location_retrieve_contact_from_aor_list</a>(endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a50edbc089f02d537b9a487f1a62c889e">aors</a>);</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;      }</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d9/d03/structcontact.html">contact</a> || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d9/d03/structcontact.html">contact</a>-&gt;uri)) {</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to retrieve contact for endpoint %s\n&quot;</span>,</div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;               <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint));</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;      }</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;      pj_cstr(&amp;remote_uri, <a class="code" href="../../d9/d03/structcontact.html">contact</a>-&gt;uri);</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;      pj_cstr(&amp;remote_uri, uri);</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;   }</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;   pool = pjsip_endpt_create_pool(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), <span class="stringliteral">&quot;Outbound request&quot;</span>, 256, 256);</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create PJLIB memory pool\n&quot;</span>);</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;   }</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;   sip_uri = pjsip_parse_uri(pool, remote_uri.ptr, remote_uri.slen, 0);</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;   <span class="keywordflow">if</span> (!sip_uri || (!PJSIP_URI_SCHEME_IS_SIP(sip_uri) &amp;&amp; !PJSIP_URI_SCHEME_IS_SIPS(sip_uri))) {</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create outbound %.*s request to endpoint %s as URI &#39;%s&#39; is not valid\n&quot;</span>,</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;         (<span class="keywordtype">int</span>) pj_strlen(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>-&gt;name), pj_strbuf(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>-&gt;name),</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;         endpoint ? <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint) : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>,</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;         pj_strbuf(&amp;remote_uri));</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;      pjsip_endpt_release_pool(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), pool);</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;   }</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a74c80b6cedcf4cc847f2b81ba6437337">ast_sip_set_tpselector_from_ep_or_uri</a>(endpoint, pjsip_uri_get_uri(sip_uri), &amp;selector);</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;   fromuser = endpoint ? (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#ac73c8898b4e904caa12dd1adcab40126">fromuser</a>) ? endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#ac73c8898b4e904caa12dd1adcab40126">fromuser</a> : <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint)) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#afbb014b5be3be8870fa8607f2d1c0b99">sip_dialog_create_from</a>(pool, &amp;from, fromuser,</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;            endpoint ? endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#aa46f02b6ae40c29d58bff7e415ad9a1b">fromdomain</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;remote_uri, &amp;selector)) {</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create From header for %.*s request to endpoint %s\n&quot;</span>,</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;            (<span class="keywordtype">int</span>) pj_strlen(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>-&gt;name), pj_strbuf(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>-&gt;name),</div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;            endpoint ? <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint) : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>);</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;      pjsip_endpt_release_pool(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), pool);</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a>(&amp;selector);</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;   }</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;   <span class="keywordflow">if</span> (pjsip_endpt_create_request(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, &amp;remote_uri,</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;         &amp;from, &amp;remote_uri, &amp;from, NULL, -1, NULL, tdata) != PJ_SUCCESS) {</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create outbound %.*s request to endpoint %s\n&quot;</span>,</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;            (<span class="keywordtype">int</span>) pj_strlen(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>-&gt;name), pj_strbuf(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>-&gt;name),</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;            endpoint ? <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint) : <span class="stringliteral">&quot;&lt;none&gt;&quot;</span>);</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;      pjsip_endpt_release_pool(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), pool);</div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a>(&amp;selector);</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;   }</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;   pjsip_tx_data_set_transport(*tdata, &amp;selector);</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a>(&amp;selector);</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;   <span class="keywordflow">if</span> (endpoint &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a331b0897216e7fa779ac247698ae299d">contact_user</a>)){</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;      pjsip_contact_hdr *contact_hdr;</div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;      pjsip_sip_uri *contact_uri;</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;      <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t HCONTACT = { <span class="stringliteral">&quot;Contact&quot;</span>, 7 };</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;      <span class="keyword">static</span> <span class="keyword">const</span> pj_str_t HCONTACTSHORT = { <span class="stringliteral">&quot;m&quot;</span>, 1 };</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;      contact_hdr = pjsip_msg_find_hdr_by_names((*tdata)-&gt;msg, &amp;HCONTACT, &amp;HCONTACTSHORT, NULL);</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;      <span class="keywordflow">if</span> (contact_hdr) {</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;         contact_uri = pjsip_uri_get_uri(contact_hdr-&gt;uri);</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;         pj_strdup2((*tdata)-&gt;pool, &amp;contact_uri-&gt;user, endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a331b0897216e7fa779ac247698ae299d">contact_user</a>);</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;      }</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;   }</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;   <span class="comment">/* Add the user=phone parameter if applicable */</span></div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a080baa12d788eb807467308a6cd5c3ac">ast_sip_add_usereqphone</a>(endpoint, (*tdata)-&gt;pool, (*tdata)-&gt;msg-&gt;line.req.uri);</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;   <span class="comment">/* If an outbound proxy is specified on the endpoint apply it to this request */</span></div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;   <span class="keywordflow">if</span> (endpoint &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a8b55fd039a8b14683eae2d3c0a1c86ae">outbound_proxy</a>) &amp;&amp;</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#ac41d89bd55a72ddfc32f657e6bc51908">ast_sip_set_outbound_proxy</a>((*tdata), endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a8b55fd039a8b14683eae2d3c0a1c86ae">outbound_proxy</a>)) {</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to apply outbound proxy on request %.*s to endpoint %s as outbound proxy URI &#39;%s&#39; is not valid\n&quot;</span>,</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;         (<span class="keywordtype">int</span>) pj_strlen(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>-&gt;name), pj_strbuf(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>-&gt;name), <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint),</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;         endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a8b55fd039a8b14683eae2d3c0a1c86ae">outbound_proxy</a>);</div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;      pjsip_endpt_release_pool(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), pool);</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;   }</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a>((*tdata)-&gt;pool, (*tdata)-&gt;mod_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>.id, <a class="code" href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(<a class="code" href="../../d9/d03/structcontact.html">contact</a>));</div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;   <span class="comment">/* We can release this pool since request creation copied all the necessary</span></div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;<span class="comment">    * data into the outbound request&#39;s pool</span></div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;   pjsip_endpt_release_pool(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), pool);</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a080baa12d788eb807467308a6cd5c3ac"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a080baa12d788eb807467308a6cd5c3ac">ast_sip_add_usereqphone</a></div><div class="ttdeci">void ast_sip_add_usereqphone(const struct ast_sip_endpoint *endpoint, pj_pool_t *pool, pjsip_uri *uri)</div><div class="ttdoc">Add &amp;#39;user=phone&amp;#39; parameter to URI if enabled and user is a phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03994">res_pjsip.c:3994</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ac41d89bd55a72ddfc32f657e6bc51908"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ac41d89bd55a72ddfc32f657e6bc51908">ast_sip_set_outbound_proxy</a></div><div class="ttdeci">int ast_sip_set_outbound_proxy(pjsip_tx_data *tdata, const char *proxy)</div><div class="ttdoc">Set the outbound proxy for an outbound SIP message. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05047">res_pjsip.c:5047</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_ac73c8898b4e904caa12dd1adcab40126"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#ac73c8898b4e904caa12dd1adcab40126">ast_sip_endpoint::fromuser</a></div><div class="ttdeci">const ast_string_field fromuser</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00829">res_pjsip.h:829</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a331b0897216e7fa779ac247698ae299d"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a331b0897216e7fa779ac247698ae299d">ast_sip_endpoint::contact_user</a></div><div class="ttdeci">char * contact_user</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00887">res_pjsip.h:887</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ad4148e8b866195343e8ee93ba9dd229f"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a></div><div class="ttdeci">static pjsip_module supplement_module</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04373">res_pjsip.c:4373</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9937f98867d28da0cc0e8590d9c9ffa4"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a></div><div class="ttdeci">#define ast_sip_mod_data_set(pool, mod_data, id, key, val)</div><div class="ttdoc">Utilizing a mod_data array for a given id, set the value associated with the given key...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02670">res_pjsip.h:2670</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a00fd98f03df089bd6aa358f941ae0dcd"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a00fd98f03df089bd6aa358f941ae0dcd">ast_sip_location_retrieve_contact_from_aor_list</a></div><div class="ttdeci">struct ast_sip_contact * ast_sip_location_retrieve_contact_from_aor_list(const char *aor_list)</div><div class="ttdoc">Retrieve the first bound contact from a list of AORs. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dad/location_8c_source.html#l00304">location.c:304</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a8b55fd039a8b14683eae2d3c0a1c86ae"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a8b55fd039a8b14683eae2d3c0a1c86ae">ast_sip_endpoint::outbound_proxy</a></div><div class="ttdeci">const ast_string_field outbound_proxy</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00819">res_pjsip.h:819</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a74c80b6cedcf4cc847f2b81ba6437337"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a74c80b6cedcf4cc847f2b81ba6437337">ast_sip_set_tpselector_from_ep_or_uri</a></div><div class="ttdeci">int ast_sip_set_tpselector_from_ep_or_uri(const struct ast_sip_endpoint *endpoint, pjsip_sip_uri *sip_uri, pjsip_tpselector *selector)</div><div class="ttdoc">Sets pjsip_tpselector from an endpoint or uri. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03975">res_pjsip.c:3975</a></div></div>
<div class="ttc" id="structast__sip__contact_html"><div class="ttname"><a href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a></div><div class="ttdoc">Contact associated with an address of record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00281">res_pjsip.h:281</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a9e1ef995698ba16cad6608225b8de946"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a9e1ef995698ba16cad6608225b8de946">ast_sip_tpselector_unref</a></div><div class="ttdeci">void ast_sip_tpselector_unref(pjsip_tpselector *selector)</div><div class="ttdoc">Unreference a pjsip_tpselector. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03987">res_pjsip.c:3987</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a38381dc3e18f7d4bffe6533bac848ca3"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a></div><div class="ttdeci">#define MOD_DATA_CONTACT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03264">res_pjsip.c:3264</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a50edbc089f02d537b9a487f1a62c889e"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a50edbc089f02d537b9a487f1a62c889e">ast_sip_endpoint::aors</a></div><div class="ttdeci">const ast_string_field aors</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00821">res_pjsip.h:821</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_afbb014b5be3be8870fa8607f2d1c0b99"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#afbb014b5be3be8870fa8607f2d1c0b99">sip_dialog_create_from</a></div><div class="ttdeci">static int sip_dialog_create_from(pj_pool_t *pool, pj_str_t *from, const char *user, const char *domain, const pj_str_t *target, pjsip_tpselector *selector)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03813">res_pjsip.c:3813</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_aa46f02b6ae40c29d58bff7e415ad9a1b"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#aa46f02b6ae40c29d58bff7e415ad9a1b">ast_sip_endpoint::fromdomain</a></div><div class="ttdeci">const ast_string_field fromdomain</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00831">res_pjsip.h:831</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acedf790aa46452b7e6b63f39cc55ddbb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acedf790aa46452b7e6b63f39cc55ddbb">&#9670;&nbsp;</a></span>do_cli_dump_endpt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int do_cli_dump_endpt </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>v_a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03558">3558</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00269">ast_pjproject_log_intercept_begin()</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00278">ast_pjproject_log_intercept_end()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03569">cli_dump_endpt()</a>.</p>
<div class="fragment"><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;{</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> = v_a;</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;   <a class="code" href="../../df/dd5/res__pjproject_8h.html#a0c96966d931f9dd7cfc17de977a02570">ast_pjproject_log_intercept_begin</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>);</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;   pjsip_endpt_dump(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>(), a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4 ? PJ_TRUE : PJ_FALSE);</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;   <a class="code" href="../../df/dd5/res__pjproject_8h.html#a19e6ce2180fca585cab3825dfdadbaa9">ast_pjproject_log_intercept_end</a>();</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="res__pjproject_8h_html_a19e6ce2180fca585cab3825dfdadbaa9"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a19e6ce2180fca585cab3825dfdadbaa9">ast_pjproject_log_intercept_end</a></div><div class="ttdeci">void ast_pjproject_log_intercept_end(void)</div><div class="ttdoc">End PJPROJECT log interception for CLI output. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00278">res_pjproject.c:278</a></div></div>
<div class="ttc" id="structast__cli__args_html"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html">ast_cli_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00158">cli.h:158</a></div></div>
<div class="ttc" id="res__pjproject_8h_html_a0c96966d931f9dd7cfc17de977a02570"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a0c96966d931f9dd7cfc17de977a02570">ast_pjproject_log_intercept_begin</a></div><div class="ttdeci">void ast_pjproject_log_intercept_begin(int fd)</div><div class="ttdoc">Begin PJPROJECT log interception for CLI output. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00269">res_pjproject.c:269</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adfed42a1933e5cd396c5125d2199a14a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfed42a1933e5cd396c5125d2199a14a">&#9670;&nbsp;</a></span>does_method_match()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pj_bool_t does_method_match </td>
          <td>(</td>
          <td class="paramtype">const pj_str_t *&#160;</td>
          <td class="paramname"><em>message_method</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>supplement_method</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04554">4554</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04335">method</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04993">ast_sip_send_out_of_dialog_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04937">send_request_cb()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05361">supplement_on_rx_request()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05385">supplement_outgoing_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;{</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;   pj_str_t <a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>;</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(supplement_method)) {</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;      <span class="keywordflow">return</span> PJ_TRUE;</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;   }</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;   pj_cstr(&amp;method, supplement_method);</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;   <span class="keywordflow">return</span> pj_stristr(&amp;method, <a class="code" href="../../de/d96/res__pjsip_8c.html#a6fdb6e6429a5f709f3b99541190b52c2">message_method</a>) ? PJ_TRUE : PJ_FALSE;</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a6fdb6e6429a5f709f3b99541190b52c2"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a6fdb6e6429a5f709f3b99541190b52c2">message_method</a></div><div class="ttdeci">static const pjsip_method message_method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04332">res_pjsip.c:4332</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b67a512469864e7ed2add9b85e9dd4b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b67a512469864e7ed2add9b85e9dd4b">&#9670;&nbsp;</a></span>endpt_send_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pj_status_t endpt_send_request </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_int32_t&#160;</td>
          <td class="paramname"><em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_endpt_send_callback&#160;</td>
          <td class="paramname"><em>cb</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04751">4751</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../d7/d69/sorcery_8c_source.html#l02312">ast_sorcery_object_get_id()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04611">send_request_wrapper::callback</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04613">send_request_wrapper::cb_called</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04628">endpt_send_request_cb()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04615">send_request_wrapper::send_cb_called</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04703">send_request_timer_callback()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04743">send_request_wrapper_destructor()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04621">send_request_wrapper::tdata</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00086">timeout</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04619">send_request_wrapper::timeout</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04617">send_request_wrapper::timeout_timer</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04568">TIMEOUT_TIMER2</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04567">TIMER_INACTIVE</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04609">send_request_wrapper::token</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04993">ast_sip_send_out_of_dialog_request()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04894">check_request_status()</a>.</p>
<div class="fragment"><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;{</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d12/structsend__request__wrapper.html">send_request_wrapper</a> *req_wrapper;</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;   pj_status_t ret_val;</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;   pjsip_endpoint *endpt = <a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>();</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;   <span class="keywordflow">if</span> (!cb &amp;&amp; <a class="code" href="../../df/d12/structsend__request__wrapper.html#aa80a17db18ac71350fa401959c59e642">token</a>) {</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;      <span class="comment">/* Silly.  Without a callback we cannot do anything with token. */</span></div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;      pjsip_tx_data_dec_ref(<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>);</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;      <span class="keywordflow">return</span> PJ_EINVAL;</div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;   }</div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;   <span class="comment">/* Create wrapper to detect if the callback was actually called on an error. */</span></div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;   req_wrapper = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*req_wrapper), <a class="code" href="../../de/d96/res__pjsip_8c.html#a3e513f92d713b1806188419e2699dfe3">send_request_wrapper_destructor</a>);</div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;   <span class="keywordflow">if</span> (!req_wrapper) {</div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;      pjsip_tx_data_dec_ref(<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>);</div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;      <span class="keywordflow">return</span> PJ_ENOMEM;</div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;   }</div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;%p: Wrapper created\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;   req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#aa80a17db18ac71350fa401959c59e642">token</a> = <a class="code" href="../../df/d12/structsend__request__wrapper.html#aa80a17db18ac71350fa401959c59e642">token</a>;</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;   req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#af2b678f53e7340ade0231510e8f101ab">callback</a> = cb;</div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;   req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a004d94210ba5c4ef7a05a8b0c0c612dc">timeout</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>;</div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;   req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;   req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a> = <a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>;</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;   <span class="comment">/* Add a reference to tdata.  The wrapper destructor cleans it up. */</span></div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;   pjsip_tx_data_add_ref(<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>);</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> &gt; 0) {</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;      pj_time_val timeout_timer_val = { <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> / 1000, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> % 1000 };</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;</div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;      req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a> = PJ_POOL_ALLOC_T(<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>-&gt;pool, pj_timer_entry);</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;%p: Set timer to %d msec\n&quot;</span>, req_wrapper, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>);</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;</div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;      pj_timer_entry_init(req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#aea573ef2e41aa69f9a7ed16473fe6c50">TIMEOUT_TIMER2</a>,</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;         req_wrapper, <a class="code" href="../../de/d96/res__pjsip_8c.html#a33c9a38b5beef1cf120eb9aa0d9205f7">send_request_timer_callback</a>);</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;</div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;      <span class="comment">/* We need to insure that the wrapper and tdata are available if/when the</span></div><div class="line"><a name="l04792"></a><span class="lineno"> 4792</span>&#160;<span class="comment">       * timer callback is executed.</span></div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, +1);</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;      ret_val = pj_timer_heap_schedule(pjsip_endpt_get_timer_heap(endpt),</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;         req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a>, &amp;timeout_timer_val);</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;      <span class="keywordflow">if</span> (ret_val != PJ_SUCCESS) {</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;            <span class="stringliteral">&quot;Failed to set timer.  Not sending %.*s request to endpoint %s.\n&quot;</span>,</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;            (<span class="keywordtype">int</span>) pj_strlen(&amp;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>-&gt;msg-&gt;line.req.method.name),</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;            pj_strbuf(&amp;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>-&gt;msg-&gt;line.req.method.name),</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;            endpoint ? <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint) : <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>);</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(req_wrapper, -2, <span class="stringliteral">&quot;Drop timer and routine ref&quot;</span>);</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;         pjsip_tx_data_dec_ref(<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>);</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;         <span class="keywordflow">return</span> ret_val;</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;      }</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;   }</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;</div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;   <span class="comment">/* We need to insure that the wrapper and tdata are available when the</span></div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;<span class="comment">    * transaction callback is executed.</span></div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, +1);</div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;   ret_val = pjsip_endpt_send_request(endpt, <a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>, -1, req_wrapper, <a class="code" href="../../de/d96/res__pjsip_8c.html#acac0cdc6b74561d7867c71c5f5c86275">endpt_send_request_cb</a>);</div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;   <span class="keywordflow">if</span> (ret_val != PJ_SUCCESS) {</div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;      <span class="keywordtype">char</span> errmsg[PJ_ERR_MSG_SIZE];</div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;      <span class="keywordflow">if</span> (!req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a0d3542cd9ce43292a9917d002f82069e">send_cb_called</a>) {</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;         <span class="comment">/* endpt_send_request_cb is not expected to ever be called now. */</span></div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, -1);</div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;      }</div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;</div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;      <span class="comment">/* Complain of failure to send the request. */</span></div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;      pj_strerror(ret_val, errmsg, <span class="keyword">sizeof</span>(errmsg));</div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Error %d &#39;%s&#39; sending %.*s request to endpoint %s\n&quot;</span>,</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;         (<span class="keywordtype">int</span>) ret_val, errmsg, (<span class="keywordtype">int</span>) pj_strlen(&amp;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>-&gt;msg-&gt;line.req.method.name),</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;         pj_strbuf(&amp;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>-&gt;msg-&gt;line.req.method.name),</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;         endpoint ? <a class="code" href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a>(endpoint) : <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>);</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> &gt; 0) {</div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;         <span class="keywordtype">int</span> timers_cancelled;</div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;</div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(req_wrapper);</div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;         timers_cancelled = pj_timer_heap_cancel_if_active(</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;            pjsip_endpt_get_timer_heap(endpt),</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;            req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#ae4dc0196ed892980b127c470b54ad228">TIMER_INACTIVE</a>);</div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;         <span class="keywordflow">if</span> (timers_cancelled &gt; 0) {</div><div class="line"><a name="l04837"></a><span class="lineno"> 4837</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, -1);</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;         }</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;         <span class="comment">/* Was the callback called? */</span></div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;         <span class="keywordflow">if</span> (req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">cb_called</a>) {</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;<span class="comment">             * Yes so we cannot report any error.  The callback</span></div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;<span class="comment">             * has already freed any resources associated with</span></div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;<span class="comment">             * token.</span></div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;            ret_val = PJ_SUCCESS;</div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;<span class="comment">             * No so we claim it is called so our caller can free</span></div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;<span class="comment">             * any resources associated with token because of</span></div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;<span class="comment">             * failure.</span></div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;            req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">cb_called</a> = 1;</div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;         }</div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(req_wrapper);</div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">cb_called</a>) {</div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;<span class="comment">          * We cannot report any error.  The callback has</span></div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;<span class="comment">          * already freed any resources associated with</span></div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;<span class="comment">          * token.</span></div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;         ret_val = PJ_SUCCESS;</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;      }</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;   }</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;</div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, -1);</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;   <span class="keywordflow">return</span> ret_val;</div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_af2b678f53e7340ade0231510e8f101ab"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#af2b678f53e7340ade0231510e8f101ab">send_request_wrapper::callback</a></div><div class="ttdeci">void(* callback)(void *token, pjsip_event *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04611">res_pjsip.c:4611</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_a004d94210ba5c4ef7a05a8b0c0c612dc"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#a004d94210ba5c4ef7a05a8b0c0c612dc">send_request_wrapper::timeout</a></div><div class="ttdeci">pj_int32_t timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04619">res_pjsip.c:4619</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_acf9dd96d2808f4e242cb184b5decde3f"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">send_request_wrapper::timeout_timer</a></div><div class="ttdeci">pj_timer_entry * timeout_timer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04617">res_pjsip.c:4617</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_aea573ef2e41aa69f9a7ed16473fe6c50"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#aea573ef2e41aa69f9a7ed16473fe6c50">TIMEOUT_TIMER2</a></div><div class="ttdeci">#define TIMEOUT_TIMER2</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04568">res_pjsip.c:4568</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="sorcery_8h_html_a97706283a06cbb44e4f0f9620dd5cf07"><div class="ttname"><a href="../../d8/d25/sorcery_8h.html#a97706283a06cbb44e4f0f9620dd5cf07">ast_sorcery_object_get_id</a></div><div class="ttdeci">const char * ast_sorcery_object_get_id(const void *object)</div><div class="ttdoc">Get the unique identifier of a sorcery object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d69/sorcery_8c_source.html#l02312">sorcery.c:2312</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_abfaeccfce6047ff31260353298ebd543"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">send_request_wrapper::cb_called</a></div><div class="ttdeci">unsigned int cb_called</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04613">res_pjsip.c:4613</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_acac0cdc6b74561d7867c71c5f5c86275"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#acac0cdc6b74561d7867c71c5f5c86275">endpt_send_request_cb</a></div><div class="ttdeci">static void endpt_send_request_cb(void *token, pjsip_event *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04628">res_pjsip.c:4628</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ae4dc0196ed892980b127c470b54ad228"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ae4dc0196ed892980b127c470b54ad228">TIMER_INACTIVE</a></div><div class="ttdeci">#define TIMER_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04567">res_pjsip.c:4567</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a33c9a38b5beef1cf120eb9aa0d9205f7"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a33c9a38b5beef1cf120eb9aa0d9205f7">send_request_timer_callback</a></div><div class="ttdeci">static void send_request_timer_callback(pj_timer_heap_t *theap, pj_timer_entry *entry)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04703">res_pjsip.c:4703</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_a3753fea80c98c041cd89012ca2599cbd"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">send_request_wrapper::tdata</a></div><div class="ttdeci">pjsip_tx_data * tdata</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04621">res_pjsip.c:4621</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html">send_request_wrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04607">res_pjsip.c:4607</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_aa80a17db18ac71350fa401959c59e642"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#aa80a17db18ac71350fa401959c59e642">send_request_wrapper::token</a></div><div class="ttdeci">void * token</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04609">res_pjsip.c:4609</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_a0d3542cd9ce43292a9917d002f82069e"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#a0d3542cd9ce43292a9917d002f82069e">send_request_wrapper::send_cb_called</a></div><div class="ttdeci">unsigned int send_cb_called</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04615">res_pjsip.c:4615</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a3e513f92d713b1806188419e2699dfe3"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a3e513f92d713b1806188419e2699dfe3">send_request_wrapper_destructor</a></div><div class="ttdeci">static void send_request_wrapper_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04743">res_pjsip.c:4743</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acac0cdc6b74561d7867c71c5f5c86275"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acac0cdc6b74561d7867c71c5f5c86275">&#9670;&nbsp;</a></span>endpt_send_request_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void endpt_send_request_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_event *&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04628">4628</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04611">send_request_wrapper::callback</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04613">send_request_wrapper::cb_called</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04615">send_request_wrapper::send_cb_called</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04617">send_request_wrapper::timeout_timer</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04568">TIMEOUT_TIMER2</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04567">TIMER_INACTIVE</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04609">send_request_wrapper::token</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04751">endpt_send_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;{</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d12/structsend__request__wrapper.html">send_request_wrapper</a> *req_wrapper = <a class="code" href="../../df/d12/structsend__request__wrapper.html#aa80a17db18ac71350fa401959c59e642">token</a>;</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">cb_called</a>;</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;<span class="comment">    * Needed because we cannot otherwise tell if this callback was</span></div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;<span class="comment">    * called when pjsip_endpt_send_request() returns error.</span></div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;   req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a0d3542cd9ce43292a9917d002f82069e">send_cb_called</a> = 1;</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;   <span class="keywordflow">if</span> (e-&gt;body.tsx_state.type == PJSIP_EVENT_TIMER) {</div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;%p: PJSIP tsx timer expired\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;      <span class="keywordflow">if</span> (req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a></div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;         &amp;&amp; req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a>-&gt;id != <a class="code" href="../../de/d96/res__pjsip_8c.html#aea573ef2e41aa69f9a7ed16473fe6c50">TIMEOUT_TIMER2</a>) {</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;%p: Timeout already handled\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, -1);</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;      }</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;%p: PJSIP tsx response received\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;   }</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(req_wrapper);</div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;   <span class="comment">/* It&#39;s possible that our own timer was already processing while</span></div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;<span class="comment">    * we were waiting on the lock so check the timer id.  If it&#39;s</span></div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;<span class="comment">    * still TIMER2 then we still need to process.</span></div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;   <span class="keywordflow">if</span> (req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a></div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;      &amp;&amp; req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a>-&gt;id == <a class="code" href="../../de/d96/res__pjsip_8c.html#aea573ef2e41aa69f9a7ed16473fe6c50">TIMEOUT_TIMER2</a>) {</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;      <span class="keywordtype">int</span> timers_cancelled = 0;</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;%p: Cancelling timer\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;      timers_cancelled = pj_timer_heap_cancel_if_active(</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;         pjsip_endpt_get_timer_heap(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>()),</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;         req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">timeout_timer</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#ae4dc0196ed892980b127c470b54ad228">TIMER_INACTIVE</a>);</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;      <span class="keywordflow">if</span> (timers_cancelled &gt; 0) {</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;         <span class="comment">/* If the timer was cancelled the callback will never run so</span></div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;<span class="comment">          * clean up its reference to the wrapper.</span></div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;%p: Timer cancelled\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, -1);</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;<span class="comment">          * If it wasn&#39;t cancelled, it MAY be in the callback already</span></div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;<span class="comment">          * waiting on the lock.  When we release the lock, it will</span></div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;<span class="comment">          * now know not to proceed.</span></div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;%p: Timer already expired\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;      }</div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;   }</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;</div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;   cb_called = req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">cb_called</a>;</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;   req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">cb_called</a> = 1;</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(req_wrapper);</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;   <span class="comment">/* It&#39;s possible that our own timer expired and called the callbacks</span></div><div class="line"><a name="l04688"></a><span class="lineno"> 4688</span>&#160;<span class="comment">    * so no need to call them again.</span></div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;   <span class="keywordflow">if</span> (!cb_called &amp;&amp; req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#af2b678f53e7340ade0231510e8f101ab">callback</a>) {</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;      req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#af2b678f53e7340ade0231510e8f101ab">callback</a>(req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#aa80a17db18ac71350fa401959c59e642">token</a>, e);</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;%p: Callbacks executed\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;   }</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, -1);</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;}</div><div class="ttc" id="structsend__request__wrapper_html_af2b678f53e7340ade0231510e8f101ab"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#af2b678f53e7340ade0231510e8f101ab">send_request_wrapper::callback</a></div><div class="ttdeci">void(* callback)(void *token, pjsip_event *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04611">res_pjsip.c:4611</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_acf9dd96d2808f4e242cb184b5decde3f"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#acf9dd96d2808f4e242cb184b5decde3f">send_request_wrapper::timeout_timer</a></div><div class="ttdeci">pj_timer_entry * timeout_timer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04617">res_pjsip.c:4617</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_aea573ef2e41aa69f9a7ed16473fe6c50"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#aea573ef2e41aa69f9a7ed16473fe6c50">TIMEOUT_TIMER2</a></div><div class="ttdeci">#define TIMEOUT_TIMER2</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04568">res_pjsip.c:4568</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_abfaeccfce6047ff31260353298ebd543"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">send_request_wrapper::cb_called</a></div><div class="ttdeci">unsigned int cb_called</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04613">res_pjsip.c:4613</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ae4dc0196ed892980b127c470b54ad228"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ae4dc0196ed892980b127c470b54ad228">TIMER_INACTIVE</a></div><div class="ttdeci">#define TIMER_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04567">res_pjsip.c:4567</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html">send_request_wrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04607">res_pjsip.c:4607</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_aa80a17db18ac71350fa401959c59e642"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#aa80a17db18ac71350fa401959c59e642">send_request_wrapper::token</a></div><div class="ttdeci">void * token</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04609">res_pjsip.c:4609</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_a0d3542cd9ce43292a9917d002f82069e"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#a0d3542cd9ce43292a9917d002f82069e">send_request_wrapper::send_cb_called</a></div><div class="ttdeci">unsigned int send_cb_called</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04615">res_pjsip.c:4615</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab40ce4ae2a2dd34cb70b0e76190113d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab40ce4ae2a2dd34cb70b0e76190113d">&#9670;&nbsp;</a></span>get_pjsip_method()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const pjsip_method* get_pjsip_method </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>method</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04351">4351</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../de/d96/res__pjsip_8c.html#a8301744a76c3fffcb2043c17a3614dea">methods</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04490">ast_sip_create_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;{</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a8301744a76c3fffcb2043c17a3614dea">methods</a>); ++i) {</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;      <span class="keywordflow">if</span> (!strcmp(<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a8301744a76c3fffcb2043c17a3614dea">methods</a>[i].<a class="code" href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>)) {</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d96/res__pjsip_8c.html#a8301744a76c3fffcb2043c17a3614dea">methods</a>[i].pmethod;</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;      }</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;   }</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8301744a76c3fffcb2043c17a3614dea"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8301744a76c3fffcb2043c17a3614dea">methods</a></div><div class="ttdeci">static struct @481 methods[]</div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8b44a03925325ceaf2de7b079b1541a1">method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04335">res_pjsip.c:4335</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05810">5810</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00573">ast_res_pjsip_init_message_filter()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02918">ast_res_pjsip_init_options_handling()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l01973">ast_res_pjsip_initialize_configuration()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02912">ast_res_pjsip_preinit_options_handling()</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00076">ast_serializer_pool_create()</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00039">ast_serializer_pool_destroy()</a>, <a class="el" href="../../de/dfa/pjsip__scheduler_8c_source.html#l00642">ast_sip_destroy_scheduler()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l01260">ast_sip_initialize_distributor()</a>, <a class="el" href="../../df/dfd/config__system_8c_source.html#l00314">ast_sip_initialize_dns()</a>, <a class="el" href="../../db/d73/pjsip__global__headers_8c_source.html#l00163">ast_sip_initialize_global_headers()</a>, <a class="el" href="../../d4/d43/pjsip__resolver_8c_source.html#l00708">ast_sip_initialize_resolver()</a>, <a class="el" href="../../de/dfa/pjsip__scheduler_8c_source.html#l00614">ast_sip_initialize_scheduler()</a>, <a class="el" href="../../df/dfd/config__system_8c_source.html#l00175">ast_sip_initialize_system()</a>, <a class="el" href="../../d1/d94/pjsip__transport__events_8c_source.html#l00394">ast_sip_initialize_transport_events()</a>, <a class="el" href="../../da/db9/pjsip__transport__management_8c_source.html#l00372">ast_sip_initialize_transport_management()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03315">ast_sip_register_service()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">load_pjsip()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03267">SERIALIZER_POOL_SIZE</a>, <a class="el" href="../../df/dfd/config__system_8c_source.html#l00070">sip_get_threadpool_options()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05296">sip_thread_start()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04373">supplement_module</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00117">ast_threadpool_options::thread_start</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05700">unload_pjsip()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05937">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;{</div><div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>;</div><div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;</div><div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;   <span class="comment">/* pjproject and config_system need to be initialized before all else */</span></div><div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;   <span class="keywordflow">if</span> (pj_init() != PJ_SUCCESS) {</div><div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;   }</div><div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;</div><div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;   <span class="keywordflow">if</span> (pjlib_util_init() != PJ_SUCCESS) {</div><div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;   }</div><div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;</div><div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;   <span class="comment">/* Register PJMEDIA error codes for SDP parsing errors */</span></div><div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;   <span class="keywordflow">if</span> (pj_register_strerror(PJMEDIA_ERRNO_START, PJ_ERRNO_SPACE_SIZE, pjmedia_strerror)</div><div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;      != PJ_SUCCESS) {</div><div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to register pjmedia error codes.  Codes will not be decoded.\n&quot;</span>);</div><div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;   }</div><div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;</div><div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/dfd/config__system_8c.html#ad6b9548e22eb727e26bae19991db6993">ast_sip_initialize_system</a>()) {</div><div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize SIP &#39;system&#39; configuration section. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;   }</div><div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;</div><div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;   <span class="comment">/* The serializer needs threadpool and threadpool needs pjproject to be initialized so it&#39;s next */</span></div><div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;   <a class="code" href="../../df/dfd/config__system_8c.html#ae943dfb3244fee5512c844d5b152fdbd">sip_get_threadpool_options</a>(&amp;<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;   <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>.thread_start = <a class="code" href="../../de/d96/res__pjsip_8c.html#a78bdb7140c5ad9159f992914d661fc1b">sip_thread_start</a>;</div><div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a> = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<span class="stringliteral">&quot;pjsip&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a>) {</div><div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;   }</div><div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;</div><div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#af9d81933501c8c6d11f8fb3af5656093">sip_serializer_pool</a> = <a class="code" href="../../dd/d5f/serializer_8h.html#a59e92ce84852e313b5e3a0dae1ddba4d">ast_serializer_pool_create</a>(</div><div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;      <span class="stringliteral">&quot;pjsip/default&quot;</span>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a7e16c8dcbf9ac1e62d76f82c9cf86845">SERIALIZER_POOL_SIZE</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a>, -1);</div><div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d96/res__pjsip_8c.html#af9d81933501c8c6d11f8fb3af5656093">sip_serializer_pool</a>) {</div><div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create SIP serializer pool. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;   }</div><div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;</div><div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a04664f4928e1bad1a11ec4408b2bfd1f">ast_sip_initialize_scheduler</a>()) {</div><div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to start scheduler. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;   }</div><div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;</div><div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;   <span class="comment">/* Now load all the pjproject infrastructure. */</span></div><div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#ade98e39eec85dedc08b183fea003e011">load_pjsip</a>()) {</div><div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;   }</div><div class="line"><a name="l05858"></a><span class="lineno"> 5858</span>&#160;</div><div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a9caac304c8bc7cddf53d1481aa2c3fcc">ast_sip_initialize_transport_events</a>()) {</div><div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize SIP transport monitor. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;   }</div><div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;</div><div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;   <a class="code" href="../../df/dfd/config__system_8c.html#ae6f6d860ab368b0346ccf87e29146228">ast_sip_initialize_dns</a>();</div><div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;   <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a821dbffce5967676413f56e119fc505b">ast_sip_initialize_global_headers</a>();</div><div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;</div><div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a0667d55c7b9514b54e98057a9de0a297">ast_res_pjsip_preinit_options_handling</a>()) {</div><div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to pre-initialize OPTIONS handling. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;   }</div><div class="line"><a name="l05871"></a><span class="lineno"> 5871</span>&#160;</div><div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#abaa7904f268c4223ddb1cd4a9ffec26b">ast_res_pjsip_initialize_configuration</a>()) {</div><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize SIP configuration. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;   }</div><div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;</div><div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;   <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a123dc5bbd38c4ac27aefbc547215fe8d">ast_sip_initialize_resolver</a>();</div><div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;   <a class="code" href="../../df/dfd/config__system_8c.html#ae6f6d860ab368b0346ccf87e29146228">ast_sip_initialize_dns</a>();</div><div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;</div><div class="line"><a name="l05880"></a><span class="lineno"> 5880</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a08fadb60f10a069de79f4dba862dd4d4">ast_sip_initialize_transport_management</a>()) {</div><div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize SIP transport management. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;   }</div><div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;</div><div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a735963ade93975cb707146c9e53dc711">ast_sip_initialize_distributor</a>()) {</div><div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to register distributor module. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;   }</div><div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;</div><div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a2d923ef44f62dffc05178f762b88f084">ast_sip_register_service</a>(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>)) {</div><div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize supplement hooks. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;   }</div><div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;</div><div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a4839cb39d68fa6302301369d5cc254e1">ast_res_pjsip_init_options_handling</a>(0)) {</div><div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize OPTIONS handling. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;   }</div><div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;</div><div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#adf97bb3c2b736bf98b9e81e1ac570e2d">ast_res_pjsip_init_message_filter</a>()) {</div><div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to initialize message IP updating. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;   }</div><div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;</div><div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a>));</div><div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;</div><div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(xml_sanitization_end_null);</div><div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(xml_sanitization_exceeds_buffer);</div><div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;</div><div class="line"><a name="l05910"></a><span class="lineno"> 5910</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;</div><div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;<a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>:</div><div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a0b24df20d1630da17e7f947a7ed6b3c2">unload_pjsip</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;</div><div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;   <span class="comment">/* These functions all check for NULLs and are safe to call at any time */</span></div><div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;   <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a7f7e8ce10c8f5bce852e756d8455a222">ast_sip_destroy_scheduler</a>();</div><div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;   <a class="code" href="../../dd/d5f/serializer_8h.html#ab24a7208f10fe9bed74475a531f8881e">ast_serializer_pool_destroy</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#af9d81933501c8c6d11f8fb3af5656093">sip_serializer_pool</a>);</div><div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a>);</div><div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;</div><div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;}</div><div class="ttc" id="res__pjsip__private_8h_html_a0667d55c7b9514b54e98057a9de0a297"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a0667d55c7b9514b54e98057a9de0a297">ast_res_pjsip_preinit_options_handling</a></div><div class="ttdeci">int ast_res_pjsip_preinit_options_handling(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dda/pjsip__options_8c_source.html#l02912">pjsip_options.c:2912</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a1959d38582b0da24d4d42766cf13ade8"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a></div><div class="ttdeci">static struct ast_cli_entry cli_commands[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03671">res_pjsip.c:3671</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a821dbffce5967676413f56e119fc505b"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a821dbffce5967676413f56e119fc505b">ast_sip_initialize_global_headers</a></div><div class="ttdeci">void ast_sip_initialize_global_headers(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/pjsip__global__headers_8c_source.html#l00163">pjsip_global_headers.c:163</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a04664f4928e1bad1a11ec4408b2bfd1f"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a04664f4928e1bad1a11ec4408b2bfd1f">ast_sip_initialize_scheduler</a></div><div class="ttdeci">int ast_sip_initialize_scheduler(void)</div><div class="ttdoc">Initialize scheduler. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/pjsip__scheduler_8c_source.html#l00614">pjsip_scheduler.c:614</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a735963ade93975cb707146c9e53dc711"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a735963ade93975cb707146c9e53dc711">ast_sip_initialize_distributor</a></div><div class="ttdeci">int ast_sip_initialize_distributor(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dad/pjsip__distributor_8c_source.html#l01260">pjsip_distributor.c:1260</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="serializer_8h_html_ab24a7208f10fe9bed74475a531f8881e"><div class="ttname"><a href="../../dd/d5f/serializer_8h.html#ab24a7208f10fe9bed74475a531f8881e">ast_serializer_pool_destroy</a></div><div class="ttdeci">int ast_serializer_pool_destroy(struct ast_serializer_pool *pool)</div><div class="ttdoc">Destroy the serializer pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/serializer_8c_source.html#l00039">serializer.c:39</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a714a1bebd7d5fe9712c059a60e3f5f20"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a></div><div class="ttdeci">static struct ast_threadpool * sip_threadpool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03274">res_pjsip.c:3274</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a7f7e8ce10c8f5bce852e756d8455a222"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a7f7e8ce10c8f5bce852e756d8455a222">ast_sip_destroy_scheduler</a></div><div class="ttdeci">int ast_sip_destroy_scheduler(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/pjsip__scheduler_8c_source.html#l00642">pjsip_scheduler.c:642</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a78bdb7140c5ad9159f992914d661fc1b"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a78bdb7140c5ad9159f992914d661fc1b">sip_thread_start</a></div><div class="ttdeci">static void sip_thread_start(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05296">res_pjsip.c:5296</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a08fadb60f10a069de79f4dba862dd4d4"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a08fadb60f10a069de79f4dba862dd4d4">ast_sip_initialize_transport_management</a></div><div class="ttdeci">int ast_sip_initialize_transport_management(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/db9/pjsip__transport__management_8c_source.html#l00372">pjsip_transport_management.c:372</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="config__system_8c_html_ae6f6d860ab368b0346ccf87e29146228"><div class="ttname"><a href="../../df/dfd/config__system_8c.html#ae6f6d860ab368b0346ccf87e29146228">ast_sip_initialize_dns</a></div><div class="ttdeci">void ast_sip_initialize_dns(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/config__system_8c_source.html#l00314">config_system.c:314</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a123dc5bbd38c4ac27aefbc547215fe8d"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a123dc5bbd38c4ac27aefbc547215fe8d">ast_sip_initialize_resolver</a></div><div class="ttdeci">void ast_sip_initialize_resolver(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d43/pjsip__resolver_8c_source.html#l00708">pjsip_resolver.c:708</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a2d923ef44f62dffc05178f762b88f084"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a2d923ef44f62dffc05178f762b88f084">ast_sip_register_service</a></div><div class="ttdeci">int ast_sip_register_service(pjsip_module *module)</div><div class="ttdoc">Register a SIP service in Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03315">res_pjsip.c:3315</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ad4148e8b866195343e8ee93ba9dd229f"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a></div><div class="ttdeci">static pjsip_module supplement_module</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04373">res_pjsip.c:4373</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ade98e39eec85dedc08b183fea003e011"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ade98e39eec85dedc08b183fea003e011">load_pjsip</a></div><div class="ttdeci">static int load_pjsip(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05744">res_pjsip.c:5744</a></div></div>
<div class="ttc" id="config__system_8c_html_ad6b9548e22eb727e26bae19991db6993"><div class="ttname"><a href="../../df/dfd/config__system_8c.html#ad6b9548e22eb727e26bae19991db6993">ast_sip_initialize_system</a></div><div class="ttdeci">int ast_sip_initialize_system(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/config__system_8c_source.html#l00175">config_system.c:175</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="config__system_8c_html_ae943dfb3244fee5512c844d5b152fdbd"><div class="ttname"><a href="../../df/dfd/config__system_8c.html#ae943dfb3244fee5512c844d5b152fdbd">sip_get_threadpool_options</a></div><div class="ttdeci">void sip_get_threadpool_options(struct ast_threadpool_options *threadpool_options)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/config__system_8c_source.html#l00070">config_system.c:70</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a4839cb39d68fa6302301369d5cc254e1"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a4839cb39d68fa6302301369d5cc254e1">ast_res_pjsip_init_options_handling</a></div><div class="ttdeci">int ast_res_pjsip_init_options_handling(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dda/pjsip__options_8c_source.html#l02918">pjsip_options.c:2918</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a9caac304c8bc7cddf53d1481aa2c3fcc"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a9caac304c8bc7cddf53d1481aa2c3fcc">ast_sip_initialize_transport_events</a></div><div class="ttdeci">int ast_sip_initialize_transport_events(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/pjsip__transport__events_8c_source.html#l00394">pjsip_transport_events.c:394</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_af9d81933501c8c6d11f8fb3af5656093"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#af9d81933501c8c6d11f8fb3af5656093">sip_serializer_pool</a></div><div class="ttdeci">static struct ast_serializer_pool * sip_serializer_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03270">res_pjsip.c:3270</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a7e16c8dcbf9ac1e62d76f82c9cf86845"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a7e16c8dcbf9ac1e62d76f82c9cf86845">SERIALIZER_POOL_SIZE</a></div><div class="ttdeci">#define SERIALIZER_POOL_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03267">res_pjsip.c:3267</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_abaa7904f268c4223ddb1cd4a9ffec26b"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#abaa7904f268c4223ddb1cd4a9ffec26b">ast_res_pjsip_initialize_configuration</a></div><div class="ttdeci">int ast_res_pjsip_initialize_configuration(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l01973">pjsip_configuration.c:1973</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0b24df20d1630da17e7f947a7ed6b3c2"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0b24df20d1630da17e7f947a7ed6b3c2">unload_pjsip</a></div><div class="ttdeci">static int unload_pjsip(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05700">res_pjsip.c:5700</a></div></div>
<div class="ttc" id="serializer_8h_html_a59e92ce84852e313b5e3a0dae1ddba4d"><div class="ttname"><a href="../../dd/d5f/serializer_8h.html#a59e92ce84852e313b5e3a0dae1ddba4d">ast_serializer_pool_create</a></div><div class="ttdeci">struct ast_serializer_pool * ast_serializer_pool_create(const char *name, unsigned int size, struct ast_threadpool *threadpool, int timeout)</div><div class="ttdoc">Create a serializer pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/serializer_8c_source.html#l00076">serializer.c:76</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_adf97bb3c2b736bf98b9e81e1ac570e2d"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#adf97bb3c2b736bf98b9e81e1ac570e2d">ast_res_pjsip_init_message_filter</a></div><div class="ttdeci">int ast_res_pjsip_init_message_filter(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00573">pjsip_message_filter.c:573</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ade98e39eec85dedc08b183fea003e011"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade98e39eec85dedc08b183fea003e011">&#9670;&nbsp;</a></span>load_pjsip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_pjsip </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">5744</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00465">ast_pjproject_caching_pool_init()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03272">ast_pjsip_endpoint</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00999">error()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03277">host_ip_ipv4</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03280">host_ip_ipv4_string</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03283">host_ip_ipv6</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03286">host_ip_ipv6_string</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05277">monitor_thread_exec()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05805">never_called_res_pjsip()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05613">remove_request_headers()</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05810">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;{</div><div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flags = 0; <span class="comment">/* no port, no brackets */</span></div><div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;   pj_status_t <a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;</div><div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;   <span class="comment">/* The third parameter is just copied from</span></div><div class="line"><a name="l05750"></a><span class="lineno"> 5750</span>&#160;<span class="comment">    * example code from PJLIB. This can be adjusted</span></div><div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;<span class="comment">    * if necessary.</span></div><div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;   <a class="code" href="../../df/dd5/res__pjproject_8h.html#a87bb9df420d237f2b5eefa7adaa78b01">ast_pjproject_caching_pool_init</a>(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#ac9bd4b5531ad2c0bdff019ac8cf84509">caching_pool</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1024 * 1024);</div><div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;   <span class="keywordflow">if</span> (pjsip_endpt_create(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#ac9bd4b5531ad2c0bdff019ac8cf84509">caching_pool</a>.factory, <span class="stringliteral">&quot;SIP&quot;</span>, &amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>) != PJ_SUCCESS) {</div><div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create PJSIP endpoint structure. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;   }</div><div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;</div><div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;   <span class="comment">/* PJSIP will automatically try to add a Max-Forwards header. Since we want to control that,</span></div><div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;<span class="comment">    * we need to stop PJSIP from doing it automatically</span></div><div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#ab9f2b1e4d6f355170040017d86206aae">remove_request_headers</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>);</div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a463464cc1ce6e364594dbb478645294e">memory_pool</a> = pj_pool_create(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#ac9bd4b5531ad2c0bdff019ac8cf84509">caching_pool</a>.factory, <span class="stringliteral">&quot;SIP&quot;</span>, 1024, 1024, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d96/res__pjsip_8c.html#a463464cc1ce6e364594dbb478645294e">memory_pool</a>) {</div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create memory pool for SIP. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;   }</div><div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;</div><div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;   <span class="keywordflow">if</span> (!pj_gethostip(pj_AF_INET(), &amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a0509a7fd8d03feaa2d66bcfed88ddf63">host_ip_ipv4</a>)) {</div><div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;      pj_sockaddr_print(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a0509a7fd8d03feaa2d66bcfed88ddf63">host_ip_ipv4</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#ada98f7e6ae63b0ee6f4c0642d67f48ad">host_ip_ipv4_string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d96/res__pjsip_8c.html#ada98f7e6ae63b0ee6f4c0642d67f48ad">host_ip_ipv4_string</a>), flags);</div><div class="line"><a name="l05772"></a><span class="lineno"> 5772</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Local IPv4 address determined to be: %s\n&quot;</span>, <a class="code" href="../../de/d96/res__pjsip_8c.html#ada98f7e6ae63b0ee6f4c0642d67f48ad">host_ip_ipv4_string</a>);</div><div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;   }</div><div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;</div><div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;   <span class="keywordflow">if</span> (!pj_gethostip(pj_AF_INET6(), &amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8a9f45451fc8ed560864ab05df8d13b9">host_ip_ipv6</a>)) {</div><div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;      pj_sockaddr_print(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a8a9f45451fc8ed560864ab05df8d13b9">host_ip_ipv6</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a86180705d1f71413b4f8923366096ab3">host_ip_ipv6_string</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a86180705d1f71413b4f8923366096ab3">host_ip_ipv6_string</a>), flags);</div><div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Local IPv6 address determined to be: %s\n&quot;</span>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a86180705d1f71413b4f8923366096ab3">host_ip_ipv6_string</a>);</div><div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;   }</div><div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;</div><div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;   pjsip_tsx_layer_init_module(<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>);</div><div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;   pjsip_ua_init_module(<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;</div><div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#ab6cf5b93870af7bbb34d65dea179b72e">monitor_continue</a> = 1;</div><div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;   status = pj_thread_create(<a class="code" href="../../de/d96/res__pjsip_8c.html#a463464cc1ce6e364594dbb478645294e">memory_pool</a>, <span class="stringliteral">&quot;SIP&quot;</span>, (pj_thread_proc *) &amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a16e4979a0b2c68298a3610c0fea98aa8">monitor_thread_exec</a>,</div><div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, PJ_THREAD_DEFAULT_STACK_SIZE * 2, 0, &amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a5614ba9f86518c2f28300f340b88f2e7">monitor_thread</a>);</div><div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;   <span class="keywordflow">if</span> (status != PJ_SUCCESS) {</div><div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to start SIP monitor thread. Aborting load\n&quot;</span>);</div><div class="line"><a name="l05788"></a><span class="lineno"> 5788</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>;</div><div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;   }</div><div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;</div><div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;</div><div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;<a class="code" href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a>:</div><div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a8a9f45451fc8ed560864ab05df8d13b9"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a8a9f45451fc8ed560864ab05df8d13b9">host_ip_ipv6</a></div><div class="ttdeci">static pj_sockaddr host_ip_ipv6</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03283">res_pjsip.c:3283</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a5614ba9f86518c2f28300f340b88f2e7"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a5614ba9f86518c2f28300f340b88f2e7">monitor_thread</a></div><div class="ttdeci">pj_thread_t * monitor_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05274">res_pjsip.c:5274</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ac9bd4b5531ad2c0bdff019ac8cf84509"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ac9bd4b5531ad2c0bdff019ac8cf84509">caching_pool</a></div><div class="ttdeci">pj_caching_pool caching_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05272">res_pjsip.c:5272</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a86180705d1f71413b4f8923366096ab3"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a86180705d1f71413b4f8923366096ab3">host_ip_ipv6_string</a></div><div class="ttdeci">static char host_ip_ipv6_string[PJ_INET6_ADDRSTRLEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03286">res_pjsip.c:3286</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a16e4979a0b2c68298a3610c0fea98aa8"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a16e4979a0b2c68298a3610c0fea98aa8">monitor_thread_exec</a></div><div class="ttdeci">static void * monitor_thread_exec(void *endpt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05277">res_pjsip.c:5277</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjproject_8h_html_a87bb9df420d237f2b5eefa7adaa78b01"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a87bb9df420d237f2b5eefa7adaa78b01">ast_pjproject_caching_pool_init</a></div><div class="ttdeci">void ast_pjproject_caching_pool_init(pj_caching_pool *cp, const pj_pool_factory_policy *policy, pj_size_t max_capacity)</div><div class="ttdoc">Initialize the caching pool factory. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00465">res_pjproject.c:465</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0154360b6fa47543e1e0f9203a7aa458"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a></div><div class="ttdeci">static pjsip_endpoint * ast_pjsip_endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03272">res_pjsip.c:3272</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ada98f7e6ae63b0ee6f4c0642d67f48ad"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ada98f7e6ae63b0ee6f4c0642d67f48ad">host_ip_ipv4_string</a></div><div class="ttdeci">static char host_ip_ipv4_string[PJ_INET6_ADDRSTRLEN]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03280">res_pjsip.c:3280</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ab6cf5b93870af7bbb34d65dea179b72e"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ab6cf5b93870af7bbb34d65dea179b72e">monitor_continue</a></div><div class="ttdeci">static int monitor_continue</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05275">res_pjsip.c:5275</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a463464cc1ce6e364594dbb478645294e"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a463464cc1ce6e364594dbb478645294e">memory_pool</a></div><div class="ttdeci">pj_pool_t * memory_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05273">res_pjsip.c:5273</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0509a7fd8d03feaa2d66bcfed88ddf63"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0509a7fd8d03feaa2d66bcfed88ddf63">host_ip_ipv4</a></div><div class="ttdeci">static pj_sockaddr host_ip_ipv4</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03277">res_pjsip.c:3277</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ab9f2b1e4d6f355170040017d86206aae"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ab9f2b1e4d6f355170040017d86206aae">remove_request_headers</a></div><div class="ttdeci">static void remove_request_headers(pjsip_endpoint *endpt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05613">res_pjsip.c:5613</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a4a9391ee88e57361b613c4c2fd2bf4aa"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a4a9391ee88e57361b613c4c2fd2bf4aa">error</a></div><div class="ttdeci">int error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00999">utils/frame.c:999</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a16e4979a0b2c68298a3610c0fea98aa8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16e4979a0b2c68298a3610c0fea98aa8">&#9670;&nbsp;</a></span>monitor_thread_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* monitor_thread_exec </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>endpt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05277">5277</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03272">ast_pjsip_endpoint</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">load_pjsip()</a>.</p>
<div class="fragment"><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;{</div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#ab6cf5b93870af7bbb34d65dea179b72e">monitor_continue</a>) {</div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;      <span class="keyword">const</span> pj_time_val delay = {0, 10};</div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;      pjsip_endpt_handle_events(<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>, &amp;delay);</div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;   }</div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0154360b6fa47543e1e0f9203a7aa458"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a></div><div class="ttdeci">static pjsip_endpoint * ast_pjsip_endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03272">res_pjsip.c:3272</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ab6cf5b93870af7bbb34d65dea179b72e"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ab6cf5b93870af7bbb34d65dea179b72e">monitor_continue</a></div><div class="ttdeci">static int monitor_continue</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05275">res_pjsip.c:5275</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9e996d72059de607807c04422c4f7e0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e996d72059de607807c04422c4f7e0b">&#9670;&nbsp;</a></span>never_called_res_pjsip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void never_called_res_pjsip </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05805">5805</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">load_pjsip()</a>.</p>
<div class="fragment"><div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;{</div><div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;   pjmedia_strerror(0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf53097fa8d7a15c1fca7aa7df5d2071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf53097fa8d7a15c1fca7aa7df5d2071">&#9670;&nbsp;</a></span>register_service()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int register_service </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03300">3300</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03272">ast_pjsip_endpoint</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03315">ast_sip_register_service()</a>.</p>
<div class="fragment"><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;{</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;   pjsip_module **module = data;</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>) {</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;There is no PJSIP endpoint. Unable to register services\n&quot;</span>);</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;   }</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;   <span class="keywordflow">if</span> (pjsip_endpt_register_module(<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>, *module) != PJ_SUCCESS) {</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register module %.*s\n&quot;</span>, (<span class="keywordtype">int</span>) pj_strlen(&amp;(*module)-&gt;name), pj_strbuf(&amp;(*module)-&gt;name));</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;   }</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Registered SIP service %.*s (%p)\n&quot;</span>, (<span class="keywordtype">int</span>) pj_strlen(&amp;(*module)-&gt;name), pj_strbuf(&amp;(*module)-&gt;name), *module);</div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;}</div><div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0154360b6fa47543e1e0f9203a7aa458"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a></div><div class="ttdeci">static pjsip_endpoint * ast_pjsip_endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03272">res_pjsip.c:3272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a36a95296ac4d8879271aa934616282dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a36a95296ac4d8879271aa934616282dd">&#9670;&nbsp;</a></span>reload_configuration_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_configuration_task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05692">5692</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02918">ast_res_pjsip_init_options_handling()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02241">ast_res_pjsip_reload_configuration()</a>, and <a class="el" href="../../df/dfd/config__system_8c_source.html#l00314">ast_sip_initialize_dns()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05923">reload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;{</div><div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;   <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a7d45d91fb24ca4a489f9dc2231a549a7">ast_res_pjsip_reload_configuration</a>();</div><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;   <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a4839cb39d68fa6302301369d5cc254e1">ast_res_pjsip_init_options_handling</a>(1);</div><div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;   <a class="code" href="../../df/dfd/config__system_8c.html#ae6f6d860ab368b0346ccf87e29146228">ast_sip_initialize_dns</a>();</div><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;}</div><div class="ttc" id="config__system_8c_html_ae6f6d860ab368b0346ccf87e29146228"><div class="ttname"><a href="../../df/dfd/config__system_8c.html#ae6f6d860ab368b0346ccf87e29146228">ast_sip_initialize_dns</a></div><div class="ttdeci">void ast_sip_initialize_dns(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/config__system_8c_source.html#l00314">config_system.c:314</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a4839cb39d68fa6302301369d5cc254e1"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a4839cb39d68fa6302301369d5cc254e1">ast_res_pjsip_init_options_handling</a></div><div class="ttdeci">int ast_res_pjsip_init_options_handling(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dda/pjsip__options_8c_source.html#l02918">pjsip_options.c:2918</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a7d45d91fb24ca4a489f9dc2231a549a7"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a7d45d91fb24ca4a489f9dc2231a549a7">ast_res_pjsip_reload_configuration</a></div><div class="ttdeci">int ast_res_pjsip_reload_configuration(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02241">pjsip_configuration.c:2241</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c6ac25ea7536c0bc9ed18cbcf917527"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c6ac25ea7536c0bc9ed18cbcf917527">&#9670;&nbsp;</a></span>reload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05923">5923</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05692">reload_configuration_task()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05937">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;{</div><div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;<span class="comment">    * We must wait for the reload to complete so multiple</span></div><div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;<span class="comment">    * reloads cannot happen at the same time.</span></div><div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a36a95296ac4d8879271aa934616282dd">reload_configuration_task</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to reload PJSIP\n&quot;</span>);</div><div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;   }</div><div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;</div><div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_gab8c82412fe0432a91d5c7985cfdf9b59"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a></div><div class="ttdeci">int ast_sip_push_task_wait_servant(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to SIP servants and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05204">res_pjsip.c:5204</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a36a95296ac4d8879271aa934616282dd"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a36a95296ac4d8879271aa934616282dd">reload_configuration_task</a></div><div class="ttdeci">static int reload_configuration_task(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05692">res_pjsip.c:5692</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab9f2b1e4d6f355170040017d86206aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9f2b1e4d6f355170040017d86206aae">&#9670;&nbsp;</a></span>remove_request_headers()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void remove_request_headers </td>
          <td>(</td>
          <td class="paramtype">pjsip_endpoint *&#160;</td>
          <td class="paramname"><em>endpt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05613">5613</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d73/pjsip__global__headers_8c_source.html#l00079">request_headers</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">load_pjsip()</a>.</p>
<div class="fragment"><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;{</div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;   <span class="keyword">const</span> pjsip_hdr *<a class="code" href="../../db/d73/pjsip__global__headers_8c.html#a9a90cc0f0755202a31592391d67f3bab">request_headers</a> = pjsip_endpt_get_request_headers(endpt);</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;   pjsip_hdr *iter = request_headers-&gt;next;</div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;</div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;   <span class="keywordflow">while</span> (iter != request_headers) {</div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;      pjsip_hdr *to_erase = iter;</div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;      iter = iter-&gt;next;</div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;      pj_list_erase(to_erase);</div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;   }</div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;}</div><div class="ttc" id="pjsip__global__headers_8c_html_a9a90cc0f0755202a31592391d67f3bab"><div class="ttname"><a href="../../db/d73/pjsip__global__headers_8c.html#a9a90cc0f0755202a31592391d67f3bab">request_headers</a></div><div class="ttdeci">static struct header_list request_headers</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/pjsip__global__headers_8c_source.html#l00079">pjsip_global_headers.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7daa7ca393a1187a33ce4952c2458c18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7daa7ca393a1187a33ce4952c2458c18">&#9670;&nbsp;</a></span>send_in_dialog_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_in_dialog_request </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct pjsip_dialog *&#160;</td>
          <td class="paramname"><em>dlg</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04545">4545</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05034">ast_sip_send_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;{</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;   <span class="keywordflow">if</span> (pjsip_dlg_send_request(dlg, tdata, -1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) != PJ_SUCCESS) {</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to send in-dialog request.\n&quot;</span>);</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;   }</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a687c566135e86195175d937499c14956"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687c566135e86195175d937499c14956">&#9670;&nbsp;</a></span>send_request_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_request_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_event *&#160;</td>
          <td class="paramname"><em>e</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04937">4937</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04577">send_request_data::callback</a>, <a class="el" href="../../dd/db2/res__pjsip__authenticator__digest_8c_source.html#l00377">challenge()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04894">check_request_status()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04554">does_method_match()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04573">send_request_data::endpoint</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02926">ast_sip_supplement::incoming_response</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02890">ast_sip_supplement::method</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02938">ast_sip_supplement::next</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04575">send_request_data::token</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04871">ast_sip_failover_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;{</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d8e/structsend__request__data.html">send_request_data</a> *req_data = <a class="code" href="../../d5/d8e/structsend__request__data.html#aa80a17db18ac71350fa401959c59e642">token</a>;</div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;   pjsip_rx_data *<a class="code" href="../../dd/db2/res__pjsip__authenticator__digest_8c.html#ad920f57db5e8c4e82e415be692af48a8">challenge</a>;</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *supplement;</div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;   <span class="keywordflow">if</span> (e-&gt;type == PJSIP_EVENT_TSX_STATE) {</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;      <span class="keywordflow">switch</span>(e-&gt;body.tsx_state.type) {</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;      <span class="keywordflow">case</span> PJSIP_EVENT_TRANSPORT_ERROR:</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;      <span class="keywordflow">case</span> PJSIP_EVENT_TIMER:</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;<span class="comment">          * Check the request status on transport error or timeout. A transport</span></div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;<span class="comment">          * error can occur when a TCP socket closes and that can be the result</span></div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;<span class="comment">          * of a 503. Also we may need to failover on a timeout (408).</span></div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a7661941b5f005f714d8a7df5cbbbdc94">check_request_status</a>(req_data, e)) {</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;         }</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;      <span class="keywordflow">case</span> PJSIP_EVENT_RX_MSG:</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;         challenge = e-&gt;body.tsx_state.src.rdata;</div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;<span class="comment">          * Call any supplements that want to know about a response</span></div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;<span class="comment">          * with any received data.</span></div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>);</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>, supplement, <a class="code" href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">next</a>) {</div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;            <span class="keywordflow">if</span> (supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a35b182ebddf01a69cf8341cdc3ace950">incoming_response</a></div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;               &amp;&amp; <a class="code" href="../../de/d96/res__pjsip_8c.html#adfed42a1933e5cd396c5125d2199a14a">does_method_match</a>(&amp;challenge-&gt;msg_info.cseq-&gt;method.name,</div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;                  supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>)) {</div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;               supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a35b182ebddf01a69cf8341cdc3ace950">incoming_response</a>(req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>, challenge);</div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;            }</div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;         }</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>);</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a7661941b5f005f714d8a7df5cbbbdc94">check_request_status</a>(req_data, e)) {</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;<span class="comment">             * Request with challenge response or failover sent.</span></div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;<span class="comment">             * Passed our req_data ref to the new request.</span></div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;         }</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unexpected PJSIP event %u\n&quot;</span>, e-&gt;body.tsx_state.type);</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;      }</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;   }</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;   <span class="keywordflow">if</span> (req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#af2b678f53e7340ade0231510e8f101ab">callback</a>) {</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;      req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#af2b678f53e7340ade0231510e8f101ab">callback</a>(req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#aa80a17db18ac71350fa401959c59e642">token</a>, e);</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;   }</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_data, -1);</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a7661941b5f005f714d8a7df5cbbbdc94"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a7661941b5f005f714d8a7df5cbbbdc94">check_request_status</a></div><div class="ttdeci">static int check_request_status(struct send_request_data *req_data, pjsip_event *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04894">res_pjsip.c:4894</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#a8b44a03925325ceaf2de7b079b1541a1">ast_sip_supplement::method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02890">res_pjsip.h:2890</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_a35b182ebddf01a69cf8341cdc3ace950"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#a35b182ebddf01a69cf8341cdc3ace950">ast_sip_supplement::incoming_response</a></div><div class="ttdeci">void(* incoming_response)(struct ast_sip_endpoint *endpoint, struct pjsip_rx_data *rdata)</div><div class="ttdoc">Called on an incoming SIP response This method is always called from a SIP servant thread...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02926">res_pjsip.h:2926</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_ab03b800fabdc22f80a5fc2bf746defb2"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">ast_sip_supplement::next</a></div><div class="ttdeci">struct ast_sip_supplement * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02938">res_pjsip.h:2938</a></div></div>
<div class="ttc" id="res__pjsip__authenticator__digest_8c_html_ad920f57db5e8c4e82e415be692af48a8"><div class="ttname"><a href="../../dd/db2/res__pjsip__authenticator__digest_8c.html#ad920f57db5e8c4e82e415be692af48a8">challenge</a></div><div class="ttdeci">static void challenge(const char *realm, pjsip_tx_data *tdata, const pjsip_rx_data *rdata, int is_stale)</div><div class="ttdoc">astobj2 callback for adding digest challenges to responses </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/db2/res__pjsip__authenticator__digest_8c_source.html#l00377">res_pjsip_authenticator_digest.c:377</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_adfed42a1933e5cd396c5125d2199a14a"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#adfed42a1933e5cd396c5125d2199a14a">does_method_match</a></div><div class="ttdeci">static pj_bool_t does_method_match(const pj_str_t *message_method, const char *supplement_method)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04554">res_pjsip.c:4554</a></div></div>
<div class="ttc" id="structsend__request__data_html_af2b678f53e7340ade0231510e8f101ab"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html#af2b678f53e7340ade0231510e8f101ab">send_request_data::callback</a></div><div class="ttdeci">void(* callback)(void *token, pjsip_event *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04577">res_pjsip.c:4577</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structsend__request__data_html_aa80a17db18ac71350fa401959c59e642"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html#aa80a17db18ac71350fa401959c59e642">send_request_data::token</a></div><div class="ttdeci">void * token</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04575">res_pjsip.c:4575</a></div></div>
<div class="ttc" id="structsupplements_html"><div class="ttname"><a href="../../d7/db8/structsupplements.html">supplements</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04509">res_pjsip.c:4509</a></div></div>
<div class="ttc" id="structast__sip__supplement_html"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a></div><div class="ttdoc">A supplement to SIP message processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02888">res_pjsip.h:2888</a></div></div>
<div class="ttc" id="structsend__request__data_html"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html">send_request_data</a></div><div class="ttdoc">Structure to hold information about an outbound request. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04571">res_pjsip.c:4571</a></div></div>
<div class="ttc" id="structsend__request__data_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html#a3960205b2a4e7e012dc9f0eae1855f01">send_request_data::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04573">res_pjsip.c:4573</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af13a3926b27d237d40764862b0a6347a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af13a3926b27d237d40764862b0a6347a">&#9670;&nbsp;</a></span>send_request_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/d8e/structsend__request__data.html">send_request_data</a>* send_request_data_alloc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>endpoint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>token</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *token, pjsip_event *e)&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04589">4589</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04577">send_request_data::callback</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04573">send_request_data::endpoint</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04582">send_request_data_destroy()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04575">send_request_data::token</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04993">ast_sip_send_out_of_dialog_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;{</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d8e/structsend__request__data.html">send_request_data</a> *req_data;</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;   req_data = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*req_data), <a class="code" href="../../de/d96/res__pjsip_8c.html#a43763e87e1fb6e6c3acd1e212fc2249b">send_request_data_destroy</a>,</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;   <span class="keywordflow">if</span> (!req_data) {</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;   }</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;   req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(endpoint);</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;   req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#aa80a17db18ac71350fa401959c59e642">token</a> = <a class="code" href="../../d5/d8e/structsend__request__data.html#aa80a17db18ac71350fa401959c59e642">token</a>;</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;   req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#af2b678f53e7340ade0231510e8f101ab">callback</a> = <a class="code" href="../../d5/d8e/structsend__request__data.html#af2b678f53e7340ade0231510e8f101ab">callback</a>;</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;   <span class="keywordflow">return</span> req_data;</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a43763e87e1fb6e6c3acd1e212fc2249b"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a43763e87e1fb6e6c3acd1e212fc2249b">send_request_data_destroy</a></div><div class="ttdeci">static void send_request_data_destroy(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04582">res_pjsip.c:4582</a></div></div>
<div class="ttc" id="structsend__request__data_html_af2b678f53e7340ade0231510e8f101ab"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html#af2b678f53e7340ade0231510e8f101ab">send_request_data::callback</a></div><div class="ttdeci">void(* callback)(void *token, pjsip_event *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04577">res_pjsip.c:4577</a></div></div>
<div class="ttc" id="structsend__request__data_html_aa80a17db18ac71350fa401959c59e642"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html#aa80a17db18ac71350fa401959c59e642">send_request_data::token</a></div><div class="ttdeci">void * token</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04575">res_pjsip.c:4575</a></div></div>
<div class="ttc" id="structsend__request__data_html"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html">send_request_data</a></div><div class="ttdoc">Structure to hold information about an outbound request. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04571">res_pjsip.c:4571</a></div></div>
<div class="ttc" id="structsend__request__data_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html#a3960205b2a4e7e012dc9f0eae1855f01">send_request_data::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04573">res_pjsip.c:4573</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43763e87e1fb6e6c3acd1e212fc2249b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43763e87e1fb6e6c3acd1e212fc2249b">&#9670;&nbsp;</a></span>send_request_data_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_request_data_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04582">4582</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04573">send_request_data::endpoint</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04589">send_request_data_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;{</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d8e/structsend__request__data.html">send_request_data</a> *req_data = obj;</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(req_data-&gt;<a class="code" href="../../d5/d8e/structsend__request__data.html#a3960205b2a4e7e012dc9f0eae1855f01">endpoint</a>);</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structsend__request__data_html"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html">send_request_data</a></div><div class="ttdoc">Structure to hold information about an outbound request. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04571">res_pjsip.c:4571</a></div></div>
<div class="ttc" id="structsend__request__data_html_a3960205b2a4e7e012dc9f0eae1855f01"><div class="ttname"><a href="../../d5/d8e/structsend__request__data.html#a3960205b2a4e7e012dc9f0eae1855f01">send_request_data::endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04573">res_pjsip.c:4573</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33c9a38b5beef1cf120eb9aa0d9205f7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33c9a38b5beef1cf120eb9aa0d9205f7">&#9670;&nbsp;</a></span>send_request_timer_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_request_timer_callback </td>
          <td>(</td>
          <td class="paramtype">pj_timer_heap_t *&#160;</td>
          <td class="paramname"><em>theap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_timer_entry *&#160;</td>
          <td class="paramname"><em>entry</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04703">4703</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04611">send_request_wrapper::callback</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04613">send_request_wrapper::cb_called</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04621">send_request_wrapper::tdata</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04619">send_request_wrapper::timeout</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04568">TIMEOUT_TIMER2</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04567">TIMER_INACTIVE</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04609">send_request_wrapper::token</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04751">endpt_send_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;{</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d12/structsend__request__wrapper.html">send_request_wrapper</a> *req_wrapper = <a class="code" href="../../d3/d96/structentry.html">entry</a>-&gt;user_data;</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">cb_called</a>;</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;%p: Internal tsx timer expired after %d msec\n&quot;</span>,</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;      req_wrapper, req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a004d94210ba5c4ef7a05a8b0c0c612dc">timeout</a>);</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(req_wrapper);</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;<span class="comment">    * If the id is not TIMEOUT_TIMER2 then the timer was cancelled</span></div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;<span class="comment">    * before we got the lock or it was already handled so just clean up.</span></div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d96/structentry.html">entry</a>-&gt;id != <a class="code" href="../../de/d96/res__pjsip_8c.html#aea573ef2e41aa69f9a7ed16473fe6c50">TIMEOUT_TIMER2</a>) {</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(req_wrapper);</div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;%p: Timeout already handled\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, -1);</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;   }</div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;   <a class="code" href="../../d3/d96/structentry.html">entry</a>-&gt;id = <a class="code" href="../../de/d96/res__pjsip_8c.html#ae4dc0196ed892980b127c470b54ad228">TIMER_INACTIVE</a>;</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;</div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;%p: Timer handled here\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;   cb_called = req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">cb_called</a>;</div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;   req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">cb_called</a> = 1;</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(req_wrapper);</div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;   <span class="keywordflow">if</span> (!cb_called &amp;&amp; req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#af2b678f53e7340ade0231510e8f101ab">callback</a>) {</div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;      pjsip_event <a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;</div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;      PJSIP_EVENT_INIT_TX_MSG(event, req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>);</div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;      <span class="keyword">event</span>.body.tsx_state.type = PJSIP_EVENT_TIMER;</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;      req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#af2b678f53e7340ade0231510e8f101ab">callback</a>(req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#aa80a17db18ac71350fa401959c59e642">token</a>, &amp;event);</div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;%p: Callbacks executed\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;   }</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(req_wrapper, -1);</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;}</div><div class="ttc" id="structsend__request__wrapper_html_af2b678f53e7340ade0231510e8f101ab"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#af2b678f53e7340ade0231510e8f101ab">send_request_wrapper::callback</a></div><div class="ttdeci">void(* callback)(void *token, pjsip_event *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04611">res_pjsip.c:4611</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_a004d94210ba5c4ef7a05a8b0c0c612dc"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#a004d94210ba5c4ef7a05a8b0c0c612dc">send_request_wrapper::timeout</a></div><div class="ttdeci">pj_int32_t timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04619">res_pjsip.c:4619</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_aea573ef2e41aa69f9a7ed16473fe6c50"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#aea573ef2e41aa69f9a7ed16473fe6c50">TIMEOUT_TIMER2</a></div><div class="ttdeci">#define TIMEOUT_TIMER2</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04568">res_pjsip.c:4568</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_abfaeccfce6047ff31260353298ebd543"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#abfaeccfce6047ff31260353298ebd543">send_request_wrapper::cb_called</a></div><div class="ttdeci">unsigned int cb_called</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04613">res_pjsip.c:4613</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ae4dc0196ed892980b127c470b54ad228"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ae4dc0196ed892980b127c470b54ad228">TIMER_INACTIVE</a></div><div class="ttdeci">#define TIMER_INACTIVE</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04567">res_pjsip.c:4567</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_a3753fea80c98c041cd89012ca2599cbd"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">send_request_wrapper::tdata</a></div><div class="ttdeci">pjsip_tx_data * tdata</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04621">res_pjsip.c:4621</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html">send_request_wrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04607">res_pjsip.c:4607</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_aa80a17db18ac71350fa401959c59e642"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#aa80a17db18ac71350fa401959c59e642">send_request_wrapper::token</a></div><div class="ttdeci">void * token</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04609">res_pjsip.c:4609</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e513f92d713b1806188419e2699dfe3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e513f92d713b1806188419e2699dfe3">&#9670;&nbsp;</a></span>send_request_wrapper_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_request_wrapper_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04743">4743</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04621">send_request_wrapper::tdata</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04751">endpt_send_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;{</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d12/structsend__request__wrapper.html">send_request_wrapper</a> *req_wrapper = obj;</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;</div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;   pjsip_tx_data_dec_ref(req_wrapper-&gt;<a class="code" href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">tdata</a>);</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;%p: wrapper destroyed\n&quot;</span>, req_wrapper);</div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;}</div><div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html_a3753fea80c98c041cd89012ca2599cbd"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html#a3753fea80c98c041cd89012ca2599cbd">send_request_wrapper::tdata</a></div><div class="ttdeci">pjsip_tx_data * tdata</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04621">res_pjsip.c:4621</a></div></div>
<div class="ttc" id="structsend__request__wrapper_html"><div class="ttname"><a href="../../df/d12/structsend__request__wrapper.html">send_request_wrapper</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04607">res_pjsip.c:4607</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afbb014b5be3be8870fa8607f2d1c0b99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afbb014b5be3be8870fa8607f2d1c0b99">&#9670;&nbsp;</a></span>sip_dialog_create_from()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sip_dialog_create_from </td>
          <td>(</td>
          <td class="paramtype">pj_pool_t *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pj_str_t *&#160;</td>
          <td class="paramname"><em>from</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>user</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>domain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const pj_str_t *&#160;</td>
          <td class="paramname"><em>target</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pjsip_tpselector *&#160;</td>
          <td class="paramname"><em>selector</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03813">3813</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/dfd/config__global_8c_source.html#l00388">ast_sip_get_default_from_user()</a>, <a class="el" href="../../dd/dfd/config__global_8c_source.html#l00324">ast_sip_get_disable_multi_domain()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l00109">type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04028">ast_sip_create_dialog_uac()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;{</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;   pj_str_t <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>, local_addr;</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;   pjsip_uri *uri;</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;   pjsip_sip_uri *sip_uri;</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;   pjsip_transport_type_e <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;   <span class="keywordtype">int</span> local_port;</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;   <span class="keywordtype">char</span> default_user[PJSIP_MAX_URL_SIZE];</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d8/dbc/structuser.html">user</a>)) {</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#ae301746d068c22eaacf9a842c4541c34">ast_sip_get_default_from_user</a>(default_user, <span class="keyword">sizeof</span>(default_user));</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;      <a class="code" href="../../d8/dbc/structuser.html">user</a> = default_user;</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;   }</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;   <span class="comment">/* Parse the provided target URI so we can determine what transport it will end up using */</span></div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;   pj_strdup_with_null(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;tmp, target);</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;   <span class="keywordflow">if</span> (!(uri = pjsip_parse_uri(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, tmp.ptr, tmp.slen, 0)) ||</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;       (!PJSIP_URI_SCHEME_IS_SIP(uri) &amp;&amp; !PJSIP_URI_SCHEME_IS_SIPS(uri))) {</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;   }</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;   sip_uri = pjsip_uri_get_uri(uri);</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;   <span class="comment">/* Determine the transport type to use */</span></div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;   type = pjsip_transport_get_type_from_name(&amp;sip_uri-&gt;transport_param);</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;   <span class="keywordflow">if</span> (PJSIP_URI_SCHEME_IS_SIPS(sip_uri)) {</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;      <span class="keywordflow">if</span> (type == PJSIP_TRANSPORT_UNSPECIFIED</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;         || !(pjsip_transport_get_flag_from_type(type) &amp; PJSIP_TRANSPORT_SECURE)) {</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;         type = PJSIP_TRANSPORT_TLS;</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;      }</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!sip_uri-&gt;transport_param.slen) {</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;      type = PJSIP_TRANSPORT_UDP;</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (type == PJSIP_TRANSPORT_UNSPECIFIED) {</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;   }</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;   <span class="comment">/* If the host is IPv6 turn the transport into an IPv6 version */</span></div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;   <span class="keywordflow">if</span> (pj_strchr(&amp;sip_uri-&gt;host, <span class="charliteral">&#39;:&#39;</span>)) {</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;      type |= PJSIP_TRANSPORT_IPV6;</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;   }</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;   <span class="comment">/* In multidomain scenario, username may contain @ with domain info */</span></div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d8/d8c/res__pjsip_8h.html#aa242d37481e95a685ae02e3559fc5dc7">ast_sip_get_disable_multi_domain</a>() &amp;&amp; strchr(<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="charliteral">&#39;@&#39;</span>)) {</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;      from-&gt;ptr = pj_pool_alloc(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, PJSIP_MAX_URL_SIZE);</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;      from-&gt;slen = pj_ansi_snprintf(from-&gt;ptr, PJSIP_MAX_URL_SIZE,</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;            <span class="stringliteral">&quot;&lt;sip:%s%s%s&gt;&quot;</span>,</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;            <a class="code" href="../../d8/dbc/structuser.html">user</a>,</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;            (type != PJSIP_TRANSPORT_UDP &amp;&amp; type != PJSIP_TRANSPORT_UDP6) ? <span class="stringliteral">&quot;;transport=&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;            (type != PJSIP_TRANSPORT_UDP &amp;&amp; type != PJSIP_TRANSPORT_UDP6) ? pjsip_transport_get_type_name(type) : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;   }</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../dd/dac/structdomain.html">domain</a>)) {</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;      from-&gt;ptr = pj_pool_alloc(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, PJSIP_MAX_URL_SIZE);</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;      from-&gt;slen = pj_ansi_snprintf(from-&gt;ptr, PJSIP_MAX_URL_SIZE,</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;            <span class="stringliteral">&quot;&lt;sip:%s@%s%s%s&gt;&quot;</span>,</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;            <a class="code" href="../../d8/dbc/structuser.html">user</a>,</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;            <a class="code" href="../../dd/dac/structdomain.html">domain</a>,</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;            (type != PJSIP_TRANSPORT_UDP &amp;&amp; type != PJSIP_TRANSPORT_UDP6) ? <span class="stringliteral">&quot;;transport=&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;            (type != PJSIP_TRANSPORT_UDP &amp;&amp; type != PJSIP_TRANSPORT_UDP6) ? pjsip_transport_get_type_name(type) : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;   }</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;   <span class="comment">/* Get the local bound address for the transport that will be used when communicating with the provided URI */</span></div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;   <span class="keywordflow">if</span> (pjsip_tpmgr_find_local_addr(pjsip_endpt_get_tpmgr(<a class="code" href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a>()), <a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, type, selector,</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;                           &amp;local_addr, &amp;local_port) != PJ_SUCCESS) {</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;</div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;      <span class="comment">/* If no local address can be retrieved using the transport manager use the host one */</span></div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;      pj_strdup(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, &amp;local_addr, pj_gethostname());</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;      local_port = pjsip_transport_get_default_port_for_type(PJSIP_TRANSPORT_UDP);</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;   }</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;   <span class="comment">/* If IPv6 was specified in the transport, set the proper type */</span></div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;   <span class="keywordflow">if</span> (pj_strchr(&amp;local_addr, <span class="charliteral">&#39;:&#39;</span>)) {</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;      type |= PJSIP_TRANSPORT_IPV6;</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;   }</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;   from-&gt;ptr = pj_pool_alloc(<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, PJSIP_MAX_URL_SIZE);</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;   from-&gt;slen = pj_ansi_snprintf(from-&gt;ptr, PJSIP_MAX_URL_SIZE,</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;                  <span class="stringliteral">&quot;&lt;sip:%s@%s%.*s%s:%d%s%s&gt;&quot;</span>,</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;                  <a class="code" href="../../d8/dbc/structuser.html">user</a>,</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;                  (type &amp; PJSIP_TRANSPORT_IPV6) ? <span class="stringliteral">&quot;[&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;                  (<span class="keywordtype">int</span>)local_addr.slen,</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;                  local_addr.ptr,</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;                  (type &amp; PJSIP_TRANSPORT_IPV6) ? <span class="stringliteral">&quot;]&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;                  local_port,</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;                  (type != PJSIP_TRANSPORT_UDP &amp;&amp; type != PJSIP_TRANSPORT_UDP6) ? <span class="stringliteral">&quot;;transport=&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;                  (type != PJSIP_TRANSPORT_UDP &amp;&amp; type != PJSIP_TRANSPORT_UDP6) ? pjsip_transport_get_type_name(type) : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="structdomain_html"><div class="ttname"><a href="../../dd/dac/structdomain.html">domain</a></div><div class="ttdoc">Domain data structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/sip_8h_source.html#l00888">sip.h:888</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aa242d37481e95a685ae02e3559fc5dc7"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aa242d37481e95a685ae02e3559fc5dc7">ast_sip_get_disable_multi_domain</a></div><div class="ttdeci">unsigned int ast_sip_get_disable_multi_domain(void)</div><div class="ttdoc">Retrieve the system setting &amp;#39;disable multi domain&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfd/config__global_8c_source.html#l00324">config_global.c:324</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_ae301746d068c22eaacf9a842c4541c34"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#ae301746d068c22eaacf9a842c4541c34">ast_sip_get_default_from_user</a></div><div class="ttdeci">void ast_sip_get_default_from_user(char *from_user, size_t size)</div><div class="ttdoc">Retrieve the global default from user. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/dfd/config__global_8c_source.html#l00388">config_global.c:388</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a785afb501e315c8a97ad476fb6a8be1d"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a785afb501e315c8a97ad476fb6a8be1d">ast_sip_get_pjsip_endpoint</a></div><div class="ttdeci">pjsip_endpoint * ast_sip_get_pjsip_endpoint(void)</div><div class="ttdoc">Get a pointer to the PJSIP endpoint. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03718">res_pjsip.c:3718</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78bdb7140c5ad9159f992914d661fc1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78bdb7140c5ad9159f992914d661fc1b">&#9670;&nbsp;</a></span>sip_thread_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void sip_thread_start </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05296">5296</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00073">desc</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05292">pj_thread_storage</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05293">servant_id_storage</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05294">SIP_SERVANT_ID</a>, and <a class="el" href="../../df/d44/app__meetme_8c_source.html#l01089">thread</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05810">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;{</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;   pj_thread_desc *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a>;</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;   pj_thread_t *<a class="code" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>;</div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;   uint32_t *servant_id;</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;   servant_id = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#ae18a720e05208f389355777d6b9a1db7">servant_id_storage</a>, <span class="keyword">sizeof</span>(*servant_id));</div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;   <span class="keywordflow">if</span> (!servant_id) {</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not set SIP servant ID in thread-local storage.\n&quot;</span>);</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;   }</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;   *servant_id = <a class="code" href="../../de/d96/res__pjsip_8c.html#a65ff7a79c301b471ec3ea43b533121e9">SIP_SERVANT_ID</a>;</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;   desc = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#a885e6f9577102981b862e68b879057ce">pj_thread_storage</a>, <span class="keyword">sizeof</span>(pj_thread_desc));</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;   <span class="keywordflow">if</span> (!desc) {</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not get thread desc from thread-local storage. Expect awful things to occur\n&quot;</span>);</div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;   }</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;   pj_bzero(*desc, <span class="keyword">sizeof</span>(*desc));</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;   <span class="keywordflow">if</span> (pj_thread_register(<span class="stringliteral">&quot;Asterisk Thread&quot;</span>, *desc, &amp;thread) != PJ_SUCCESS) {</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Couldn&#39;t register thread with PJLIB.\n&quot;</span>);</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;   }</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;}</div><div class="ttc" id="app__meetme_8c_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01089">app_meetme.c:1089</a></div></div>
<div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a885e6f9577102981b862e68b879057ce"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a885e6f9577102981b862e68b879057ce">pj_thread_storage</a></div><div class="ttdeci">static struct ast_threadstorage pj_thread_storage</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05292">res_pjsip.c:5292</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a787f82faccb7c1f40a2539a14855601b"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a787f82faccb7c1f40a2539a14855601b">desc</a></div><div class="ttdeci">static const char desc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00073">cdr_mysql.c:73</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a65ff7a79c301b471ec3ea43b533121e9"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a65ff7a79c301b471ec3ea43b533121e9">SIP_SERVANT_ID</a></div><div class="ttdeci">#define SIP_SERVANT_ID</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05294">res_pjsip.c:5294</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ae18a720e05208f389355777d6b9a1db7"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ae18a720e05208f389355777d6b9a1db7">servant_id_storage</a></div><div class="ttdeci">static struct ast_threadstorage servant_id_storage</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05293">res_pjsip.c:5293</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af26876047d193d84e5e490d97e3cca67"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af26876047d193d84e5e490d97e3cca67">&#9670;&nbsp;</a></span>stop_monitor_thread()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stop_monitor_thread </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05286">5286</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05700">unload_pjsip()</a>.</p>
<div class="fragment"><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;{</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#ab6cf5b93870af7bbb34d65dea179b72e">monitor_continue</a> = 0;</div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;   pj_thread_join(<a class="code" href="../../de/d96/res__pjsip_8c.html#a5614ba9f86518c2f28300f340b88f2e7">monitor_thread</a>);</div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a5614ba9f86518c2f28300f340b88f2e7"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a5614ba9f86518c2f28300f340b88f2e7">monitor_thread</a></div><div class="ttdeci">pj_thread_t * monitor_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05274">res_pjsip.c:5274</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ab6cf5b93870af7bbb34d65dea179b72e"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ab6cf5b93870af7bbb34d65dea179b72e">monitor_continue</a></div><div class="ttdeci">static int monitor_continue</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05275">res_pjsip.c:5275</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a968724a2543e0d95c238f4c09ce1bbda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a968724a2543e0d95c238f4c09ce1bbda">&#9670;&nbsp;</a></span>supplement_on_rx_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static pj_bool_t supplement_on_rx_request </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05361">5361</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l00969">ast_pjsip_rdata_get_endpoint()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04554">does_method_match()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02910">ast_sip_supplement::incoming_request</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02890">ast_sip_supplement::method</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02938">ast_sip_supplement::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04362">create_in_dialog_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;{</div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *supplement;</div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;   <span class="keywordflow">if</span> (pjsip_rdata_get_dlg(rdata)) {</div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;      <span class="keywordflow">return</span> PJ_FALSE;</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;   }</div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;</div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>);</div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>, supplement, <a class="code" href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">next</a>) {</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;      <span class="keywordflow">if</span> (supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a20c8c9aa351212de2e9b8523f4b96428">incoming_request</a></div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;         &amp;&amp; <a class="code" href="../../de/d96/res__pjsip_8c.html#adfed42a1933e5cd396c5125d2199a14a">does_method_match</a>(&amp;rdata-&gt;msg_info.msg-&gt;line.req.method.name, supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>)) {</div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *endpoint;</div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;</div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;         endpoint = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a0dc7590db76dcdc0105abc92072d1b06">ast_pjsip_rdata_get_endpoint</a>(rdata);</div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;         supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a20c8c9aa351212de2e9b8523f4b96428">incoming_request</a>(endpoint, rdata);</div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(endpoint);</div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;      }</div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;   }</div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>);</div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;</div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;   <span class="keywordflow">return</span> PJ_FALSE;</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#a8b44a03925325ceaf2de7b079b1541a1">ast_sip_supplement::method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02890">res_pjsip.h:2890</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a0dc7590db76dcdc0105abc92072d1b06"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a0dc7590db76dcdc0105abc92072d1b06">ast_pjsip_rdata_get_endpoint</a></div><div class="ttdeci">struct ast_sip_endpoint * ast_pjsip_rdata_get_endpoint(pjsip_rx_data *rdata)</div><div class="ttdoc">Get the looked-up endpoint on an out-of dialog request or response. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dad/pjsip__distributor_8c_source.html#l00969">pjsip_distributor.c:969</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_ab03b800fabdc22f80a5fc2bf746defb2"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#ab03b800fabdc22f80a5fc2bf746defb2">ast_sip_supplement::next</a></div><div class="ttdeci">struct ast_sip_supplement * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02938">res_pjsip.h:2938</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a></div><div class="ttdoc">An entity with which Asterisk communicates. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00812">res_pjsip.h:812</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_adfed42a1933e5cd396c5125d2199a14a"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#adfed42a1933e5cd396c5125d2199a14a">does_method_match</a></div><div class="ttdeci">static pj_bool_t does_method_match(const pj_str_t *message_method, const char *supplement_method)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04554">res_pjsip.c:4554</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_a20c8c9aa351212de2e9b8523f4b96428"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#a20c8c9aa351212de2e9b8523f4b96428">ast_sip_supplement::incoming_request</a></div><div class="ttdeci">int(* incoming_request)(struct ast_sip_endpoint *endpoint, struct pjsip_rx_data *rdata)</div><div class="ttdoc">Called on incoming SIP request This method can indicate a failure in processing in its return...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02910">res_pjsip.h:2910</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structsupplements_html"><div class="ttname"><a href="../../d7/db8/structsupplements.html">supplements</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04509">res_pjsip.c:4509</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__supplement_html"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a></div><div class="ttdoc">A supplement to SIP message processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02888">res_pjsip.h:2888</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c1dbd9c8b20b85be851d6920d058d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c1dbd9c8b20b85be851d6920d058d0b">&#9670;&nbsp;</a></span>supplement_outgoing_response()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void supplement_outgoing_response </td>
          <td>(</td>
          <td class="paramtype">pjsip_tx_data *&#160;</td>
          <td class="paramname"><em>tdata</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/d46/structast__sip__endpoint.html">ast_sip_endpoint</a> *&#160;</td>
          <td class="paramname"><em>sip_endpoint</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05385">5385</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00301">ast_sip_message_apply_transport()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02638">ast_sip_mod_data_get</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02670">ast_sip_mod_data_set</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04554">does_method_match()</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02890">ast_sip_supplement::method</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03264">MOD_DATA_CONTACT</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l02936">ast_sip_supplement::outgoing_response</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04373">supplement_module</a>, and <a class="el" href="../../d8/d8c/res__pjsip_8h_source.html#l00817">ast_sip_endpoint::transport</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05407">ast_sip_send_response()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05420">ast_sip_send_stateful_response()</a>.</p>
<div class="fragment"><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;{</div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a> *supplement;</div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;   pjsip_cseq_hdr *cseq = pjsip_msg_find_hdr(tdata-&gt;msg, PJSIP_H_CSEQ, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a> *<a class="code" href="../../d9/d03/structcontact.html">contact</a> = <a class="code" href="../../d8/d8c/res__pjsip_8h.html#aad194ead974937834375b0ac8d37a7c2">ast_sip_mod_data_get</a>(tdata-&gt;mod_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>.id, <a class="code" href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a>);</div><div class="line"><a name="l05390"></a><span class="lineno"> 5390</span>&#160;</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;   <span class="keywordflow">if</span> (sip_endpoint) {</div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;      <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a594764e7c50b75d6e15709572e06a318">ast_sip_message_apply_transport</a>(sip_endpoint-&gt;<a class="code" href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">transport</a>, tdata);</div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;   }</div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;</div><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>);</div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>, supplement, next) {</div><div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;      <span class="keywordflow">if</span> (supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a2a56da76e62991c185cc0fd9b7af771c">outgoing_response</a> &amp;&amp; <a class="code" href="../../de/d96/res__pjsip_8c.html#adfed42a1933e5cd396c5125d2199a14a">does_method_match</a>(&amp;cseq-&gt;method.name, supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a8b44a03925325ceaf2de7b079b1541a1">method</a>)) {</div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;         supplement-&gt;<a class="code" href="../../df/d71/structast__sip__supplement.html#a2a56da76e62991c185cc0fd9b7af771c">outgoing_response</a>(sip_endpoint, contact, tdata);</div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;      }</div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;   }</div><div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/db8/structsupplements.html">supplements</a>);</div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;</div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;   <a class="code" href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a>(tdata-&gt;pool, tdata-&gt;mod_data, <a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>.id, <a class="code" href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(contact);</div><div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;}</div><div class="ttc" id="structast__sip__supplement_html_a2a56da76e62991c185cc0fd9b7af771c"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#a2a56da76e62991c185cc0fd9b7af771c">ast_sip_supplement::outgoing_response</a></div><div class="ttdeci">void(* outgoing_response)(struct ast_sip_endpoint *endpoint, struct ast_sip_contact *contact, struct pjsip_tx_data *tdata)</div><div class="ttdoc">Called on an outgoing SIP response This method is always called from a SIP servant thread...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02936">res_pjsip.h:2936</a></div></div>
<div class="ttc" id="structast__sip__endpoint_html_a44cdbda076f37ba09880ba74d942b606"><div class="ttname"><a href="../../d3/d46/structast__sip__endpoint.html#a44cdbda076f37ba09880ba74d942b606">ast_sip_endpoint::transport</a></div><div class="ttdeci">const ast_string_field transport</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00817">res_pjsip.h:817</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__sip__supplement_html_a8b44a03925325ceaf2de7b079b1541a1"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html#a8b44a03925325ceaf2de7b079b1541a1">ast_sip_supplement::method</a></div><div class="ttdeci">const char * method</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02890">res_pjsip.h:2890</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ad4148e8b866195343e8ee93ba9dd229f"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a></div><div class="ttdeci">static pjsip_module supplement_module</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04373">res_pjsip.c:4373</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a9937f98867d28da0cc0e8590d9c9ffa4"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a9937f98867d28da0cc0e8590d9c9ffa4">ast_sip_mod_data_set</a></div><div class="ttdeci">#define ast_sip_mod_data_set(pool, mod_data, id, key, val)</div><div class="ttdoc">Utilizing a mod_data array for a given id, set the value associated with the given key...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02670">res_pjsip.h:2670</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_aad194ead974937834375b0ac8d37a7c2"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#aad194ead974937834375b0ac8d37a7c2">ast_sip_mod_data_get</a></div><div class="ttdeci">#define ast_sip_mod_data_get(mod_data, id, key)</div><div class="ttdoc">Using the dictionary stored in mod_data array at a given id, retrieve the value associated with the g...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02638">res_pjsip.h:2638</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_adfed42a1933e5cd396c5125d2199a14a"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#adfed42a1933e5cd396c5125d2199a14a">does_method_match</a></div><div class="ttdeci">static pj_bool_t does_method_match(const pj_str_t *message_method, const char *supplement_method)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04554">res_pjsip.c:4554</a></div></div>
<div class="ttc" id="structast__sip__contact_html"><div class="ttname"><a href="../../d8/d8a/structast__sip__contact.html">ast_sip_contact</a></div><div class="ttdoc">Contact associated with an address of record. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l00281">res_pjsip.h:281</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="res__pjsip_8h_html_a594764e7c50b75d6e15709572e06a318"><div class="ttname"><a href="../../d8/d8c/res__pjsip_8h.html#a594764e7c50b75d6e15709572e06a318">ast_sip_message_apply_transport</a></div><div class="ttdeci">void ast_sip_message_apply_transport(const char *transport_name, pjsip_tx_data *tdata)</div><div class="ttdoc">Apply the configuration for a transport to an outgoing message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d17/config__transport_8c_source.html#l00301">config_transport.c:301</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a38381dc3e18f7d4bffe6533bac848ca3"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a38381dc3e18f7d4bffe6533bac848ca3">MOD_DATA_CONTACT</a></div><div class="ttdeci">#define MOD_DATA_CONTACT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03264">res_pjsip.c:3264</a></div></div>
<div class="ttc" id="structsupplements_html"><div class="ttname"><a href="../../d7/db8/structsupplements.html">supplements</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04509">res_pjsip.c:4509</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__sip__supplement_html"><div class="ttname"><a href="../../df/d71/structast__sip__supplement.html">ast_sip_supplement</a></div><div class="ttdoc">A supplement to SIP message processing. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8c/res__pjsip_8h_source.html#l02888">res_pjsip.h:2888</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7174c1f990ccb004c6b2d5b2b930af8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7174c1f990ccb004c6b2d5b2b930af8">&#9670;&nbsp;</a></span>sync_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int sync_task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05156">5156</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01279">sync_task_data::complete</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01278">sync_task_data::cond</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05151">sync_task_data::fail</a>, <a class="el" href="../../d0/df4/stasis_8c_source.html#l01277">sync_task_data::lock</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05152">sync_task_data::task</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l01280">sync_task_data::task_data</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05176">ast_sip_push_task_wait()</a>.</p>
<div class="fragment"><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;{</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/dc8/structsync__task__data.html">sync_task_data</a> *std = data;</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;   <span class="keywordtype">int</span> ret;</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;</div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;   std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#a68eaf9a59ffba031bf1dc152e3b023e0">fail</a> = std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#aa463c643c64d3840936f1b725356ea79">task</a>(std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#ac3dfbfc918763b506931680bcf2040a8">task_data</a>);</div><div class="line"><a name="l05162"></a><span class="lineno"> 5162</span>&#160;</div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;<span class="comment">    * Once we unlock std-&gt;lock after signaling, we cannot access</span></div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;<span class="comment">    * std again.  The thread waiting within ast_sip_push_task_wait()</span></div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;<span class="comment">    * is free to continue and release its local variable (std).</span></div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;   std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#a520408f4775914f7510cc59db5a60b38">complete</a> = 1;</div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;   ret = std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#a68eaf9a59ffba031bf1dc152e3b023e0">fail</a>;</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;std-&gt;<a class="code" href="../../d1/dc8/structsync__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;}</div><div class="ttc" id="structsync__task__data_html_a520408f4775914f7510cc59db5a60b38"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#a520408f4775914f7510cc59db5a60b38">sync_task_data::complete</a></div><div class="ttdeci">int complete</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01279">stasis.c:1279</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structsync__task__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">sync_task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01278">stasis.c:1278</a></div></div>
<div class="ttc" id="structsync__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">sync_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01277">stasis.c:1277</a></div></div>
<div class="ttc" id="structsync__task__data_html_aa463c643c64d3840936f1b725356ea79"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#aa463c643c64d3840936f1b725356ea79">sync_task_data::task</a></div><div class="ttdeci">int(* task)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05152">res_pjsip.c:5152</a></div></div>
<div class="ttc" id="structsync__task__data_html_a68eaf9a59ffba031bf1dc152e3b023e0"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#a68eaf9a59ffba031bf1dc152e3b023e0">sync_task_data::fail</a></div><div class="ttdeci">int fail</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05151">res_pjsip.c:5151</a></div></div>
<div class="ttc" id="structsync__task__data_html"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html">sync_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01276">stasis.c:1276</a></div></div>
<div class="ttc" id="structsync__task__data_html_ac3dfbfc918763b506931680bcf2040a8"><div class="ttname"><a href="../../d1/dc8/structsync__task__data.html#ac3dfbfc918763b506931680bcf2040a8">sync_task_data::task_data</a></div><div class="ttdeci">void * task_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01280">stasis.c:1280</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a44156c2c09c780fb30a07ab6f2609204"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44156c2c09c780fb30a07ab6f2609204">&#9670;&nbsp;</a></span>uas_use_sips_contact()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int uas_use_sips_contact </td>
          <td>(</td>
          <td class="paramtype">pjsip_rx_data *&#160;</td>
          <td class="paramname"><em>rdata</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Determine if a SIPS Contact header is required. </p>
<p>This uses the guideline provided in RFC 3261 Section 12.1.1 to determine if the Contact header must be a sips: URI.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rdata</td><td>The incoming dialog-starting request </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>SIPS not required </td></tr>
    <tr><td class="paramname">1</td><td>SIPS required </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04148">4148</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04177">create_dialog_uas()</a>.</p>
<div class="fragment"><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;{</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;   pjsip_rr_hdr *record_route;</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;   <span class="keywordflow">if</span> (PJSIP_URI_SCHEME_IS_SIPS(rdata-&gt;msg_info.msg-&gt;line.req.uri)) {</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;   }</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;   record_route = pjsip_msg_find_hdr(rdata-&gt;msg_info.msg, PJSIP_H_RECORD_ROUTE, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;   <span class="keywordflow">if</span> (record_route) {</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;      <span class="keywordflow">if</span> (PJSIP_URI_SCHEME_IS_SIPS(&amp;record_route-&gt;name_addr)) {</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;      }</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;      pjsip_contact_hdr *<a class="code" href="../../d9/d03/structcontact.html">contact</a>;</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;      contact = pjsip_msg_find_hdr(rdata-&gt;msg_info.msg, PJSIP_H_CONTACT, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(contact != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;      <span class="keywordflow">if</span> (PJSIP_URI_SCHEME_IS_SIPS(contact-&gt;uri)) {</div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;      }</div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;   }</div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;</div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcontact_html"><div class="ttname"><a href="../../d9/d03/structcontact.html">contact</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8f/reqresp__parser_8h_source.html#l00035">reqresp_parser.h:35</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05937">5937</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00316">AST_MODFLAG_GLOBAL_SYMBOLS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00326">AST_MODPRI_CHANNEL_DEPEND</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d6/dd3/serializer_8c_source.html#l00039">ast_serializer_pool_destroy()</a>, <a class="el" href="../../de/dfa/pjsip__scheduler_8c_source.html#l00642">ast_sip_destroy_scheduler()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05204">ast_sip_push_task_wait_servant()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05810">load_module()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00741">reload()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05923">reload_module()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05700">unload_pjsip()</a>.</p>
<div class="fragment"><div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;{</div><div class="line"><a name="l05939"></a><span class="lineno"> 5939</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(xml_sanitization_end_null);</div><div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(xml_sanitization_exceeds_buffer);</div><div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a>));</div><div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;</div><div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;   <span class="comment">/* The thread this is called from cannot call PJSIP/PJLIB functions,</span></div><div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;<span class="comment">    * so we have to push the work to the threadpool to handle</span></div><div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;   <a class="code" href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d96/res__pjsip_8c.html#a0b24df20d1630da17e7f947a7ed6b3c2">unload_pjsip</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;   <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a7f7e8ce10c8f5bce852e756d8455a222">ast_sip_destroy_scheduler</a>();</div><div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;   <a class="code" href="../../dd/d5f/serializer_8h.html#ab24a7208f10fe9bed74475a531f8881e">ast_serializer_pool_destroy</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#af9d81933501c8c6d11f8fb3af5656093">sip_serializer_pool</a>);</div><div class="line"><a name="l05949"></a><span class="lineno"> 5949</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(<a class="code" href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a>);</div><div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;</div><div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;}</div><div class="ttc" id="res__pjsip_8c_html_a1959d38582b0da24d4d42766cf13ade8"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a1959d38582b0da24d4d42766cf13ade8">cli_commands</a></div><div class="ttdeci">static struct ast_cli_entry cli_commands[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03671">res_pjsip.c:3671</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="serializer_8h_html_ab24a7208f10fe9bed74475a531f8881e"><div class="ttname"><a href="../../dd/d5f/serializer_8h.html#ab24a7208f10fe9bed74475a531f8881e">ast_serializer_pool_destroy</a></div><div class="ttdeci">int ast_serializer_pool_destroy(struct ast_serializer_pool *pool)</div><div class="ttdoc">Destroy the serializer pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dd3/serializer_8c_source.html#l00039">serializer.c:39</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a714a1bebd7d5fe9712c059a60e3f5f20"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a714a1bebd7d5fe9712c059a60e3f5f20">sip_threadpool</a></div><div class="ttdeci">static struct ast_threadpool * sip_threadpool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03274">res_pjsip.c:3274</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a7f7e8ce10c8f5bce852e756d8455a222"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a7f7e8ce10c8f5bce852e756d8455a222">ast_sip_destroy_scheduler</a></div><div class="ttdeci">int ast_sip_destroy_scheduler(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfa/pjsip__scheduler_8c_source.html#l00642">pjsip_scheduler.c:642</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="group__pjsip__threading_html_gab8c82412fe0432a91d5c7985cfdf9b59"><div class="ttname"><a href="../../d7/dfa/group__pjsip__threading.html#gab8c82412fe0432a91d5c7985cfdf9b59">ast_sip_push_task_wait_servant</a></div><div class="ttdeci">int ast_sip_push_task_wait_servant(struct ast_taskprocessor *serializer, int(*sip_task)(void *), void *task_data)</div><div class="ttdoc">Push a task to SIP servants and wait for it to complete. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05204">res_pjsip.c:5204</a></div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_af9d81933501c8c6d11f8fb3af5656093"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#af9d81933501c8c6d11f8fb3af5656093">sip_serializer_pool</a></div><div class="ttdeci">static struct ast_serializer_pool * sip_serializer_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03270">res_pjsip.c:3270</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0b24df20d1630da17e7f947a7ed6b3c2"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0b24df20d1630da17e7f947a7ed6b3c2">unload_pjsip</a></div><div class="ttdeci">static int unload_pjsip(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05700">res_pjsip.c:5700</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0b24df20d1630da17e7f947a7ed6b3c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0b24df20d1630da17e7f947a7ed6b3c2">&#9670;&nbsp;</a></span>unload_pjsip()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_pjsip </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05700">5700</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00472">ast_pjproject_caching_pool_destroy()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03272">ast_pjsip_endpoint</a>, <a class="el" href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00565">ast_res_pjsip_cleanup_message_filter()</a>, <a class="el" href="../../df/dda/pjsip__options_8c_source.html#l02835">ast_res_pjsip_cleanup_options_handling()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l02219">ast_res_pjsip_destroy_configuration()</a>, <a class="el" href="../../d7/dad/pjsip__distributor_8c_source.html#l01334">ast_sip_destroy_distributor()</a>, <a class="el" href="../../db/d73/pjsip__global__headers_8c_source.html#l00181">ast_sip_destroy_global_headers()</a>, <a class="el" href="../../df/dfd/config__system_8c_source.html#l00245">ast_sip_destroy_system()</a>, <a class="el" href="../../d1/d94/pjsip__transport__events_8c_source.html#l00382">ast_sip_destroy_transport_events()</a>, <a class="el" href="../../da/db9/pjsip__transport__management_8c_source.html#l00410">ast_sip_destroy_transport_management()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03331">ast_sip_unregister_service()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05273">memory_pool</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05286">stop_monitor_thread()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04373">supplement_module</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05810">load_module()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05937">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;{</div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;<span class="comment">    * These calls need the pjsip endpoint and serializer to clean up.</span></div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;<span class="comment">    * If they&#39;re not set, then there&#39;s nothing to clean up anyway.</span></div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a> &amp;&amp; <a class="code" href="../../de/d96/res__pjsip_8c.html#af9d81933501c8c6d11f8fb3af5656093">sip_serializer_pool</a>) {</div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;      <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a8e0d0db605abf9317fb188c31c621ec9">ast_res_pjsip_cleanup_options_handling</a>();</div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;      <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#aecc9ed17b968cc54eda31efa7b28d8e6">ast_res_pjsip_cleanup_message_filter</a>();</div><div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;      <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a9d4c45d5ffa5e568fabe0e3cc5593624">ast_sip_destroy_distributor</a>();</div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;      <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#a9b6999f8dfb05cb156429f8210ad63ec">ast_sip_destroy_transport_management</a>();</div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;      <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#acf41da6fad04209c4d5dd1c35320357b">ast_res_pjsip_destroy_configuration</a>();</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;      <a class="code" href="../../df/dfd/config__system_8c.html#a1d2d73b7aa2c0941a34cec3e34f4c6df">ast_sip_destroy_system</a>();</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;      <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#ac55bfdd300bf469795337bf0c0958b33">ast_sip_destroy_global_headers</a>();</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#a15aa09d9084763cdd20b7467a4cd381a">ast_sip_unregister_service</a>(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a>);</div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;      <a class="code" href="../../d7/d5c/res__pjsip__private_8h.html#ae6499d162acf6fb02b75f909f47693ad">ast_sip_destroy_transport_events</a>();</div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;   }</div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;</div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a5614ba9f86518c2f28300f340b88f2e7">monitor_thread</a>) {</div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#af26876047d193d84e5e490d97e3cca67">stop_monitor_thread</a>();</div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#a5614ba9f86518c2f28300f340b88f2e7">monitor_thread</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;   }</div><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;</div><div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#a463464cc1ce6e364594dbb478645294e">memory_pool</a>) {</div><div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;      <span class="comment">/* This mimics the behavior of pj_pool_safe_release</span></div><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;<span class="comment">       * which was introduced in pjproject 2.6.</span></div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;      pj_pool_t *temp_pool = <a class="code" href="../../de/d96/res__pjsip_8c.html#a463464cc1ce6e364594dbb478645294e">memory_pool</a>;</div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;</div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;      <a class="code" href="../../de/d96/res__pjsip_8c.html#a463464cc1ce6e364594dbb478645294e">memory_pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;      pj_pool_release(temp_pool);</div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;   }</div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;</div><div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;   <a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;</div><div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d96/res__pjsip_8c.html#ac9bd4b5531ad2c0bdff019ac8cf84509">caching_pool</a>.lock) {</div><div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;      <a class="code" href="../../df/dd5/res__pjproject_8h.html#a2ce5e75f8b8e29d166785477a5034ebd">ast_pjproject_caching_pool_destroy</a>(&amp;<a class="code" href="../../de/d96/res__pjsip_8c.html#ac9bd4b5531ad2c0bdff019ac8cf84509">caching_pool</a>);</div><div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;   }</div><div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;</div><div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;   pj_shutdown();</div><div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;</div><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;}</div><div class="ttc" id="res__pjproject_8h_html_a2ce5e75f8b8e29d166785477a5034ebd"><div class="ttname"><a href="../../df/dd5/res__pjproject_8h.html#a2ce5e75f8b8e29d166785477a5034ebd">ast_pjproject_caching_pool_destroy</a></div><div class="ttdeci">void ast_pjproject_caching_pool_destroy(pj_caching_pool *cp)</div><div class="ttdoc">Destroy caching pool factory and all cached pools. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/deb/res__pjproject_8c_source.html#l00472">res_pjproject.c:472</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_ac55bfdd300bf469795337bf0c0958b33"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#ac55bfdd300bf469795337bf0c0958b33">ast_sip_destroy_global_headers</a></div><div class="ttdeci">void ast_sip_destroy_global_headers(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d73/pjsip__global__headers_8c_source.html#l00181">pjsip_global_headers.c:181</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a5614ba9f86518c2f28300f340b88f2e7"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a5614ba9f86518c2f28300f340b88f2e7">monitor_thread</a></div><div class="ttdeci">pj_thread_t * monitor_thread</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05274">res_pjsip.c:5274</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ac9bd4b5531ad2c0bdff019ac8cf84509"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ac9bd4b5531ad2c0bdff019ac8cf84509">caching_pool</a></div><div class="ttdeci">pj_caching_pool caching_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05272">res_pjsip.c:5272</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a8e0d0db605abf9317fb188c31c621ec9"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a8e0d0db605abf9317fb188c31c621ec9">ast_res_pjsip_cleanup_options_handling</a></div><div class="ttdeci">void ast_res_pjsip_cleanup_options_handling(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dda/pjsip__options_8c_source.html#l02835">pjsip_options.c:2835</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_ae6499d162acf6fb02b75f909f47693ad"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#ae6499d162acf6fb02b75f909f47693ad">ast_sip_destroy_transport_events</a></div><div class="ttdeci">void ast_sip_destroy_transport_events(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d94/pjsip__transport__events_8c_source.html#l00382">pjsip_transport_events.c:382</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a15aa09d9084763cdd20b7467a4cd381a"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a15aa09d9084763cdd20b7467a4cd381a">ast_sip_unregister_service</a></div><div class="ttdeci">void ast_sip_unregister_service(pjsip_module *module)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03331">res_pjsip.c:3331</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a9b6999f8dfb05cb156429f8210ad63ec"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a9b6999f8dfb05cb156429f8210ad63ec">ast_sip_destroy_transport_management</a></div><div class="ttdeci">void ast_sip_destroy_transport_management(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/db9/pjsip__transport__management_8c_source.html#l00410">pjsip_transport_management.c:410</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_ad4148e8b866195343e8ee93ba9dd229f"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#ad4148e8b866195343e8ee93ba9dd229f">supplement_module</a></div><div class="ttdeci">static pjsip_module supplement_module</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l04373">res_pjsip.c:4373</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0154360b6fa47543e1e0f9203a7aa458"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a></div><div class="ttdeci">static pjsip_endpoint * ast_pjsip_endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03272">res_pjsip.c:3272</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_af9d81933501c8c6d11f8fb3af5656093"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#af9d81933501c8c6d11f8fb3af5656093">sip_serializer_pool</a></div><div class="ttdeci">static struct ast_serializer_pool * sip_serializer_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03270">res_pjsip.c:3270</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a463464cc1ce6e364594dbb478645294e"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a463464cc1ce6e364594dbb478645294e">memory_pool</a></div><div class="ttdeci">pj_pool_t * memory_pool</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05273">res_pjsip.c:5273</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_acf41da6fad04209c4d5dd1c35320357b"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#acf41da6fad04209c4d5dd1c35320357b">ast_res_pjsip_destroy_configuration</a></div><div class="ttdeci">void ast_res_pjsip_destroy_configuration(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df6/pjsip__configuration_8c_source.html#l02219">pjsip_configuration.c:2219</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_aecc9ed17b968cc54eda31efa7b28d8e6"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#aecc9ed17b968cc54eda31efa7b28d8e6">ast_res_pjsip_cleanup_message_filter</a></div><div class="ttdeci">void ast_res_pjsip_cleanup_message_filter(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d9e/pjsip__message__filter_8c_source.html#l00565">pjsip_message_filter.c:565</a></div></div>
<div class="ttc" id="config__system_8c_html_a1d2d73b7aa2c0941a34cec3e34f4c6df"><div class="ttname"><a href="../../df/dfd/config__system_8c.html#a1d2d73b7aa2c0941a34cec3e34f4c6df">ast_sip_destroy_system</a></div><div class="ttdeci">void ast_sip_destroy_system(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dfd/config__system_8c_source.html#l00245">config_system.c:245</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_af26876047d193d84e5e490d97e3cca67"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#af26876047d193d84e5e490d97e3cca67">stop_monitor_thread</a></div><div class="ttdeci">static void stop_monitor_thread(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l05286">res_pjsip.c:5286</a></div></div>
<div class="ttc" id="res__pjsip__private_8h_html_a9d4c45d5ffa5e568fabe0e3cc5593624"><div class="ttname"><a href="../../d7/d5c/res__pjsip__private_8h.html#a9d4c45d5ffa5e568fabe0e3cc5593624">ast_sip_destroy_distributor</a></div><div class="ttdeci">void ast_sip_destroy_distributor(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dad/pjsip__distributor_8c_source.html#l01334">pjsip_distributor.c:1334</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a42cd1bebde23095537a4bfc00d28b75c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42cd1bebde23095537a4bfc00d28b75c">&#9670;&nbsp;</a></span>unregister_service()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unregister_service </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03320">3320</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03272">ast_pjsip_endpoint</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03331">ast_sip_unregister_service()</a>.</p>
<div class="fragment"><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;{</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;   pjsip_module **module = data;</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>) {</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;   }</div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;   pjsip_endpt_unregister_module(<a class="code" href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a>, *module);</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Unregistered SIP service %.*s\n&quot;</span>, (<span class="keywordtype">int</span>) pj_strlen(&amp;(*module)-&gt;name), pj_strbuf(&amp;(*module)-&gt;name));</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;}</div><div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a0154360b6fa47543e1e0f9203a7aa458"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a0154360b6fa47543e1e0f9203a7aa458">ast_pjsip_endpoint</a></div><div class="ttdeci">static pjsip_endpoint * ast_pjsip_endpoint</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03272">res_pjsip.c:3272</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a835b27a90d895a488e4e14cc3d2dee8c">AST_MODFLAG_GLOBAL_SYMBOLS</a> | <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Basic SIP resource&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload_module, .load_pri = AST_MODPRI_CHANNEL_DEPEND - 5, .requires = &quot;dnsmgr,res_pjproject,res_sorcery_config,res_sorcery_memory,res_sorcery_astdb&quot;, .optional_modules = &quot;res_statsd&quot;, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05962">5962</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05962">5962</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a0154360b6fa47543e1e0f9203a7aa458"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0154360b6fa47543e1e0f9203a7aa458">&#9670;&nbsp;</a></span>ast_pjsip_endpoint</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_endpoint* ast_pjsip_endpoint</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03272">3272</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03718">ast_sip_get_pjsip_endpoint()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">load_pjsip()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05277">monitor_thread_exec()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03300">register_service()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05700">unload_pjsip()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03320">unregister_service()</a>.</p>

</div>
</div>
<a id="ac9bd4b5531ad2c0bdff019ac8cf84509"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9bd4b5531ad2c0bdff019ac8cf84509">&#9670;&nbsp;</a></span>caching_pool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pj_caching_pool caching_pool</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05272">5272</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a1959d38582b0da24d4d42766cf13ade8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1959d38582b0da24d4d42766cf13ade8">&#9670;&nbsp;</a></span>cli_commands</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_commands[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../de/d96/res__pjsip_8c.html#a6021dfa5cb4d9114c224cd5e3ba4c37e">cli_dump_endpt</a> , .summary =  <span class="stringliteral">&quot;Dump the res_pjsip endpt internals&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../de/d96/res__pjsip_8c.html#a95d5465d94a305efee886a3a3e7fe5df">cli_show_settings</a> , .summary =  <span class="stringliteral">&quot;Show global and system configuration options&quot;</span> ,},</div><div class="line">   { .handler =  <a class="code" href="../../de/d96/res__pjsip_8c.html#a524724e8e301b61448a7bb40a4a8e94e">cli_show_endpoint_identifiers</a> , .summary =  <span class="stringliteral">&quot;List registered endpoint identifiers&quot;</span> ,}</div><div class="line">}</div><div class="ttc" id="res__pjsip_8c_html_a6021dfa5cb4d9114c224cd5e3ba4c37e"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a6021dfa5cb4d9114c224cd5e3ba4c37e">cli_dump_endpt</a></div><div class="ttdeci">static char * cli_dump_endpt(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03569">res_pjsip.c:3569</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a524724e8e301b61448a7bb40a4a8e94e"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a524724e8e301b61448a7bb40a4a8e94e">cli_show_endpoint_identifiers</a></div><div class="ttdeci">static char * cli_show_endpoint_identifiers(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03609">res_pjsip.c:3609</a></div></div>
<div class="ttc" id="res__pjsip_8c_html_a95d5465d94a305efee886a3a3e7fe5df"><div class="ttname"><a href="../../de/d96/res__pjsip_8c.html#a95d5465d94a305efee886a3a3e7fe5df">cli_show_settings</a></div><div class="ttdeci">static char * cli_show_settings(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d96/res__pjsip_8c_source.html#l03640">res_pjsip.c:3640</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03671">3671</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a5179defebcbf5bb65e7aa4ca78d35b2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5179defebcbf5bb65e7aa4ca78d35b2e">&#9670;&nbsp;</a></span>endpoint_formatters</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a>   <a class="el" href="../../d7/dcc/structendpoint__formatters.html">endpoint_formatters</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a28c282d2d7112c63b8e0ec904446ae6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a28c282d2d7112c63b8e0ec904446ae6b">&#9670;&nbsp;</a></span>endpoint_identifiers</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a>   <a class="el" href="../../d1/da7/structendpoint__identifiers.html">endpoint_identifiers</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a0509a7fd8d03feaa2d66bcfed88ddf63"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0509a7fd8d03feaa2d66bcfed88ddf63">&#9670;&nbsp;</a></span>host_ip_ipv4</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_sockaddr host_ip_ipv4</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Local host address for IPv4 </p>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03277">3277</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05460">ast_sip_get_host_ip()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">load_pjsip()</a>.</p>

</div>
</div>
<a id="ada98f7e6ae63b0ee6f4c0642d67f48ad"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada98f7e6ae63b0ee6f4c0642d67f48ad">&#9670;&nbsp;</a></span>host_ip_ipv4_string</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char host_ip_ipv4_string[PJ_INET6_ADDRSTRLEN]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Local host address for IPv4 (string form) </p>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03280">3280</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05460">ast_sip_get_host_ip()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05473">ast_sip_get_host_ip_string()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">load_pjsip()</a>.</p>

</div>
</div>
<a id="a8a9f45451fc8ed560864ab05df8d13b9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a9f45451fc8ed560864ab05df8d13b9">&#9670;&nbsp;</a></span>host_ip_ipv6</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pj_sockaddr host_ip_ipv6</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Local host address for IPv6 </p>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03283">3283</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05460">ast_sip_get_host_ip()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">load_pjsip()</a>.</p>

</div>
</div>
<a id="a86180705d1f71413b4f8923366096ab3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86180705d1f71413b4f8923366096ab3">&#9670;&nbsp;</a></span>host_ip_ipv6_string</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char host_ip_ipv6_string[PJ_INET6_ADDRSTRLEN]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Local host address for IPv6 (string form) </p>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03286">3286</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05460">ast_sip_get_host_ip()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05473">ast_sip_get_host_ip_string()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05744">load_pjsip()</a>.</p>

</div>
</div>
<a id="a12cdab6fe7e85798a584508b60486885"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12cdab6fe7e85798a584508b60486885">&#9670;&nbsp;</a></span>info_method</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const pjsip_method info_method = {PJSIP_OTHER_METHOD, {&quot;INFO&quot;, 4} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04331">4331</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a463464cc1ce6e364594dbb478645294e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a463464cc1ce6e364594dbb478645294e">&#9670;&nbsp;</a></span>memory_pool</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pj_pool_t* memory_pool</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05273">5273</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05700">unload_pjsip()</a>.</p>

</div>
</div>
<a id="a6fdb6e6429a5f709f3b99541190b52c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fdb6e6429a5f709f3b99541190b52c2">&#9670;&nbsp;</a></span>message_method</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const pjsip_method message_method = {PJSIP_OTHER_METHOD, {&quot;MESSAGE&quot;, 7} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04332">4332</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a8b44a03925325ceaf2de7b079b1541a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b44a03925325ceaf2de7b079b1541a1">&#9670;&nbsp;</a></span>method</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* method</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04335">4335</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l04615">__sip_pretend_ack()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00491">ast_ari_invoke()</a>, <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00790">ast_websocket_uri_cb()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l01355">delayed_request_alloc()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04554">does_method_match()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l04142">has_supplement()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01839">httpd_process_request()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00400">ident_handler()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00441">ident_to_str()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09795">mark_method_allowed()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09800">mark_method_unallowed()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09811">mark_parsed_methods()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00744">misdn_cfg_is_group_method()</a>, <a class="el" href="../../d8/dd4/res__srtp_8c_source.html#l00802">res_sdp_crypto_parse_offer()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00382">sip_endpoint_identifier_str2type()</a>, <a class="el" href="../../d3/dc6/func__sorcery_8c_source.html#l00079">sorcery_function_read()</a>, and <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l01429">update_connected_line_information()</a>.</p>

</div>
</div>
<a id="a8301744a76c3fffcb2043c17a3614dea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8301744a76c3fffcb2043c17a3614dea">&#9670;&nbsp;</a></span>methods</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   methods[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12657">get_auth_methods()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04351">get_pjsip_method()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00441">ident_to_str()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09838">parse_allowed_methods()</a>, and <a class="el" href="../../d3/dc6/func__sorcery_8c_source.html#l00079">sorcery_function_read()</a>.</p>

</div>
</div>
<a id="ab6cf5b93870af7bbb34d65dea179b72e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6cf5b93870af7bbb34d65dea179b72e">&#9670;&nbsp;</a></span>monitor_continue</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int monitor_continue</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05275">5275</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a5614ba9f86518c2f28300f340b88f2e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5614ba9f86518c2f28300f340b88f2e7">&#9670;&nbsp;</a></span>monitor_thread</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">pj_thread_t* monitor_thread</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05274">5274</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a885e6f9577102981b862e68b879057ce"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a885e6f9577102981b862e68b879057ce">&#9670;&nbsp;</a></span>pj_thread_storage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> pj_thread_storage = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#acd1ff5e1228969321088d10842407b01">__init_pj_thread_storage</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05292">5292</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05296">sip_thread_start()</a>.</p>

</div>
</div>
<a id="acbc0a9631742cb870f6ba56dcef1b75b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acbc0a9631742cb870f6ba56dcef1b75b">&#9670;&nbsp;</a></span>pmethod</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const pjsip_method* pmethod</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04336">4336</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04490">ast_sip_create_request()</a>.</p>

</div>
</div>
<a id="ac51146e0275b19fab3031e6176c745e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac51146e0275b19fab3031e6176c745e8">&#9670;&nbsp;</a></span>registered_authenticator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/de9/structast__sip__authenticator.html">ast_sip_authenticator</a>* registered_authenticator</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03336">3336</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a18741a3257cf9d9ae4f755778d97f716"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18741a3257cf9d9ae4f755778d97f716">&#9670;&nbsp;</a></span>registered_outbound_authenticator</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/dc2/structast__sip__outbound__authenticator.html">ast_sip_outbound_authenticator</a>* registered_outbound_authenticator</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03387">3387</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="ae18a720e05208f389355777d6b9a1db7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae18a720e05208f389355777d6b9a1db7">&#9670;&nbsp;</a></span>servant_id_storage</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> servant_id_storage = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../de/d96/res__pjsip_8c.html#af3b7bde712a55b6c90d027699fada098">__init_servant_id_storage</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05293">5293</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05321">ast_sip_thread_is_servant()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05296">sip_thread_start()</a>.</p>

</div>
</div>
<a id="af9d81933501c8c6d11f8fb3af5656093"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9d81933501c8c6d11f8fb3af5656093">&#9670;&nbsp;</a></span>sip_serializer_pool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d08/structast__serializer__pool.html">ast_serializer_pool</a>* sip_serializer_pool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pool of serializers to use if not supplied. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03270">3270</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

</div>
</div>
<a id="a714a1bebd7d5fe9712c059a60e3f5f20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a714a1bebd7d5fe9712c059a60e3f5f20">&#9670;&nbsp;</a></span>sip_threadpool</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a>* sip_threadpool</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l03274">3274</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05630">ast_sip_threadpool()</a>.</p>

</div>
</div>
<a id="ad4148e8b866195343e8ee93ba9dd229f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad4148e8b866195343e8ee93ba9dd229f">&#9670;&nbsp;</a></span>supplement_module</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pjsip_module supplement_module</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04373">4373</a> of file <a class="el" href="../../de/d96/res__pjsip_8c_source.html">res_pjsip.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05448">ast_sip_create_response()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04993">ast_sip_send_out_of_dialog_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05420">ast_sip_send_stateful_response()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l04380">create_out_of_dialog_request()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05810">load_module()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05385">supplement_outgoing_response()</a>, and <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05700">unload_pjsip()</a>.</p>

</div>
</div>
<a id="a49168494a1abd3d3c923fe6024723f5b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49168494a1abd3d3c923fe6024723f5b">&#9670;&nbsp;</a></span>supplements</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/db8/structsupplements.html">supplements</a>   <a class="el" href="../../d7/db8/structsupplements.html">supplements</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:29 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
