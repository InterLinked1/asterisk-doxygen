<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_threadpool.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_threadpool.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>threadpool unit tests  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d8c/logger_8h_source.html">asterisk/logger.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d1e/taskprocessor_8h_source.html">asterisk/taskprocessor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d40/threadpool_8h_source.html">asterisk/threadpool.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_threadpool.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d1/d79/test__threadpool_8c__incl.png" border="0" usemap="#test__threadpool_8c" alt=""/></div>
<map name="test__threadpool_8c" id="test__threadpool_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="356,304,440,331"/>
<area shape="rect" id="node22" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1247,304,1381,331"/>
<area shape="rect" id="node23" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1517,453,1631,480"/>
<area shape="rect" id="node30" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="2091,528,2217,555"/>
<area shape="rect" id="node32" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1574,80,1710,107"/>
<area shape="rect" id="node38" href="../../d0/d1e/taskprocessor_8h.html" title="An API for managing task processing threads that can be shared across modules. " alt="" coords="2243,80,2420,107"/>
<area shape="rect" id="node39" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="1180,80,1293,107"/>
<area shape="rect" id="node41" href="../../d3/d40/threadpool_8h.html" title="asterisk/threadpool.h" alt="" coords="2445,80,2602,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="811,603,966,629"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="803,379,940,405"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,379,140,405"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="815,677,962,704"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1033,528,1176,555"/>
<area shape="rect" id="node26" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1798,603,1945,629"/>
<area shape="rect" id="node31" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1219,379,1369,405"/>
<area shape="rect" id="node25" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1720,528,1783,555"/>
<area shape="rect" id="node29" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="1437,528,1588,555"/>
<area shape="rect" id="node33" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1653,155,1767,181"/>
<area shape="rect" id="node34" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="1474,229,1613,256"/>
<area shape="rect" id="node35" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1637,229,1783,256"/>
<area shape="rect" id="node36" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1959,304,2117,331"/>
<area shape="rect" id="node37" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1167,229,1298,256"/>
<area shape="rect" id="node40" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1098,155,1199,181"/>
</map>
</div>
</div>
<p><a href="../../de/dec/test__threadpool_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8100a9ace154561dd79a7230054b2d6f"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a8100a9ace154561dd79a7230054b2d6f">AST_TEST_DEFINE</a> (threadpool_push)</td></tr>
<tr class="separator:a8100a9ace154561dd79a7230054b2d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32abaeec0a660c572ca4a8f4035dc467"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a32abaeec0a660c572ca4a8f4035dc467">AST_TEST_DEFINE</a> (threadpool_initial_threads)</td></tr>
<tr class="separator:a32abaeec0a660c572ca4a8f4035dc467"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5d3a9b85cc62b4dcae1c7f8a9bb094a2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a5d3a9b85cc62b4dcae1c7f8a9bb094a2">AST_TEST_DEFINE</a> (threadpool_thread_creation)</td></tr>
<tr class="separator:a5d3a9b85cc62b4dcae1c7f8a9bb094a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9376a103c7192bf2df2d2ed4af3f28c"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#af9376a103c7192bf2df2d2ed4af3f28c">AST_TEST_DEFINE</a> (threadpool_thread_destruction)</td></tr>
<tr class="separator:af9376a103c7192bf2df2d2ed4af3f28c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15520783158466daddbc189806873a8b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a15520783158466daddbc189806873a8b">AST_TEST_DEFINE</a> (threadpool_thread_timeout)</td></tr>
<tr class="separator:a15520783158466daddbc189806873a8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a413a39510276e8c5d49932c858ec0768"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a413a39510276e8c5d49932c858ec0768">AST_TEST_DEFINE</a> (threadpool_thread_timeout_thrash)</td></tr>
<tr class="separator:a413a39510276e8c5d49932c858ec0768"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f6c913432ea5a27ca528e9e1a682236"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a7f6c913432ea5a27ca528e9e1a682236">AST_TEST_DEFINE</a> (threadpool_one_task_one_thread)</td></tr>
<tr class="separator:a7f6c913432ea5a27ca528e9e1a682236"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33bfbe1af58636fca33bc30a19475b4d"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a33bfbe1af58636fca33bc30a19475b4d">AST_TEST_DEFINE</a> (threadpool_one_thread_one_task)</td></tr>
<tr class="separator:a33bfbe1af58636fca33bc30a19475b4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5048880c99239eb0430812d003c1d26"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#ad5048880c99239eb0430812d003c1d26">AST_TEST_DEFINE</a> (threadpool_one_thread_multiple_tasks)</td></tr>
<tr class="separator:ad5048880c99239eb0430812d003c1d26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a314ddc1594626939cf96c899124459fc"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a314ddc1594626939cf96c899124459fc">AST_TEST_DEFINE</a> (threadpool_auto_increment)</td></tr>
<tr class="separator:a314ddc1594626939cf96c899124459fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a310d9e3f067bd0057802d81397e0a317"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a310d9e3f067bd0057802d81397e0a317">AST_TEST_DEFINE</a> (threadpool_max_size)</td></tr>
<tr class="separator:a310d9e3f067bd0057802d81397e0a317"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26a30162413f710096670648fe163b7b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a26a30162413f710096670648fe163b7b">AST_TEST_DEFINE</a> (threadpool_reactivation)</td></tr>
<tr class="separator:a26a30162413f710096670648fe163b7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acaa29fa9b35e46ed357db11d15b17362"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#acaa29fa9b35e46ed357db11d15b17362">AST_TEST_DEFINE</a> (threadpool_task_distribution)</td></tr>
<tr class="separator:acaa29fa9b35e46ed357db11d15b17362"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e061666664b6edf8883c1abe7e8fc10"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a3e061666664b6edf8883c1abe7e8fc10">AST_TEST_DEFINE</a> (threadpool_more_destruction)</td></tr>
<tr class="separator:a3e061666664b6edf8883c1abe7e8fc10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae63abe0407a60d4ab4700c3b3b0b5854"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#ae63abe0407a60d4ab4700c3b3b0b5854">AST_TEST_DEFINE</a> (threadpool_serializer)</td></tr>
<tr class="separator:ae63abe0407a60d4ab4700c3b3b0b5854"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f4daba8740f782de9513a9262120a0e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a7f4daba8740f782de9513a9262120a0e">AST_TEST_DEFINE</a> (threadpool_serializer_dupe)</td></tr>
<tr class="separator:a7f4daba8740f782de9513a9262120a0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95e19fb5b2104eaf9d0f97278e0c7995"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a> (void *data)</td></tr>
<tr class="separator:a95e19fb5b2104eaf9d0f97278e0c7995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0ae2e361c57a1934caeb46ac0aaef7f"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a> (void)</td></tr>
<tr class="separator:ad0ae2e361c57a1934caeb46ac0aaef7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c708a5128d1d0d2193b2923b3128343"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a> (struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd)</td></tr>
<tr class="separator:a8c708a5128d1d0d2193b2923b3128343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a244b29f011d19373f9d4d77d822cbba9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a244b29f011d19373f9d4d77d822cbba9">has_complex_started</a> (struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd)</td></tr>
<tr class="separator:a244b29f011d19373f9d4d77d822cbba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8640da84c2bffa19c818229137de4c7d"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</td></tr>
<tr class="separator:a8640da84c2bffa19c818229137de4c7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea8a9ac548fd9bf6c437c7fa1303928"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a> (struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd)</td></tr>
<tr class="separator:aaea8a9ac548fd9bf6c437c7fa1303928"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add68fe51ab0c6cdbc35a81b830a0d8ed"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a> (void *data)</td></tr>
<tr class="separator:add68fe51ab0c6cdbc35a81b830a0d8ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abff46b259c53f29cccea096421a69835"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a> (void)</td></tr>
<tr class="separator:abff46b259c53f29cccea096421a69835"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af71fd11423041890bf63e52c24dc15f3"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a> (struct <a class="el" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std)</td></tr>
<tr class="separator:af71fd11423041890bf63e52c24dc15f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a32d310c35c655ac4a9ce3815aed53e"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a> (void)</td></tr>
<tr class="separator:a3a32d310c35c655ac4a9ce3815aed53e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a772da13134d0192ccc674e3ab839f908"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a772da13134d0192ccc674e3ab839f908">test_emptied</a> (struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="separator:a772da13134d0192ccc674e3ab839f908"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fe44572b360b3afab4bf8f7df38db77"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a4fe44572b360b3afab4bf8f7df38db77">test_shutdown</a> (struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="separator:a4fe44572b360b3afab4bf8f7df38db77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff1cc7ae18d9e83bb77be1392e20980d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#aff1cc7ae18d9e83bb77be1392e20980d">test_state_changed</a> (struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>, int active_threads, int idle_threads)</td></tr>
<tr class="separator:aff1cc7ae18d9e83bb77be1392e20980d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc27a40e3aabb446b5b4218bad5b4c36"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#abc27a40e3aabb446b5b4218bad5b4c36">test_task_pushed</a> (struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a>, struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>, int was_empty)</td></tr>
<tr class="separator:abc27a40e3aabb446b5b4218bad5b4c36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b9223386e4ed61302f6209c58f2d79d"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std)</td></tr>
<tr class="separator:a4b9223386e4ed61302f6209c58f2d79d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a459011e0b0c6974685a4cd8365361771"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a> (struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd)</td></tr>
<tr class="separator:a459011e0b0c6974685a4cd8365361771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a65aca16da1f3fc4287e22c30891d9ef3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a65aca16da1f3fc4287e22c30891d9ef3">wait_for_complex_start</a> (struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd)</td></tr>
<tr class="separator:a65aca16da1f3fc4287e22c30891d9ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae725033b3f1e53b3adbccda5c1e4d584"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld)</td></tr>
<tr class="separator:ae725033b3f1e53b3adbccda5c1e4d584"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e927304cce64b1828fd32252ef97b0a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a4e927304cce64b1828fd32252ef97b0a">wait_for_task_pushed</a> (struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="el" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a>)</td></tr>
<tr class="separator:a4e927304cce64b1828fd32252ef97b0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc220e2e2cc811c2c10a59e35081244a"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld, int num_active, int num_idle)</td></tr>
<tr class="separator:abc220e2e2cc811c2c10a59e35081244a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9267dd7c8b5470603a248626777cf98b"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a9267dd7c8b5470603a248626777cf98b">wait_until_thread_state_task_pushed</a> (struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="el" href="../../d8/d89/structtest.html">test</a>, struct <a class="el" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld, int num_active, int num_idle, int num_tasks)</td></tr>
<tr class="separator:a9267dd7c8b5470603a248626777cf98b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;threadpool <a class="el" href="../../d8/d89/structtest.html">test</a> module&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a555eea08e0e87da38c116bd77648596b"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../df/d64/structast__threadpool__listener__callbacks.html">ast_threadpool_listener_callbacks</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></td></tr>
<tr class="separator:a555eea08e0e87da38c116bd77648596b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>threadpool unit tests </p>
<dl class="section author"><dt>Author</dt><dd>Mark Michelson <a href="#" onclick="location.href='mai'+'lto:'+'mmi'+'ch'+'els'+'on'+'@di'+'gi'+'um.'+'co'+'m'; return false;">mmich<span style="display: none;">.nosp@m.</span>elso<span style="display: none;">.nosp@m.</span>n@dig<span style="display: none;">.nosp@m.</span>ium.<span style="display: none;">.nosp@m.</span>com</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01843">1843</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01843">1843</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01843">1843</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

</div>
</div>
<a id="a8100a9ace154561dd79a7230054b2d6f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8100a9ace154561dd79a7230054b2d6f">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_push&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00288">288</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00142">simple_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00118">simple_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00130">simple_task_data_free()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00177">wait_for_task_pushed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;{</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      .max_size = 0,</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   };</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;push&quot;</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test task&quot;</span>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;         <span class="stringliteral">&quot;Basic threadpool test&quot;</span>;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   std = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <span class="keywordflow">if</span> (!std) {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std)) {</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#a4e927304cce64b1828fd32252ef97b0a">wait_for_task_pushed</a>(listener);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 1, 1, 0, 0, 0);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;}</div><div class="ttc" id="test__threadpool_8c_html_a4e927304cce64b1828fd32252ef97b0a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a4e927304cce64b1828fd32252ef97b0a">wait_for_task_pushed</a></div><div class="ttdeci">static void wait_for_task_pushed(struct ast_threadpool_listener *listener)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00177">test_threadpool.c:177</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_af71fd11423041890bf63e52c24dc15f3"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a></div><div class="ttdeci">static void simple_task_data_free(struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00130">test_threadpool.c:130</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_add68fe51ab0c6cdbc35a81b830a0d8ed"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a></div><div class="ttdeci">static int simple_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00142">test_threadpool.c:142</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abff46b259c53f29cccea096421a69835"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a></div><div class="ttdeci">static struct simple_task_data * simple_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00118">test_threadpool.c:118</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32abaeec0a660c572ca4a8f4035dc467"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32abaeec0a660c572ca4a8f4035dc467">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_initial_threads&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00350">350</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;{</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      .initial_size = 3,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;      .max_size = 0,</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   };</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;initial_threads&quot;</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test threadpool initialization state&quot;</span>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;         <span class="stringliteral">&quot;Ensure that a threadpool created with a specific size contains the\n&quot;</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;         <span class="stringliteral">&quot;proper number of idle threads.&quot;</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 3);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;}</div><div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5d3a9b85cc62b4dcae1c7f8a9bb094a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5d3a9b85cc62b4dcae1c7f8a9bb094a2">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[3/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_thread_creation&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00402">402</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;{</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      .max_size = 0,</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   };</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;thread_creation&quot;</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test threadpool thread creation&quot;</span>;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;         <span class="stringliteral">&quot;Ensure that threads can be added to a threadpool&quot;</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   }</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="comment">/* Now let&#39;s create a thread. It should start active, then go</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">    * idle immediately</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 1);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9376a103c7192bf2df2d2ed4af3f28c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9376a103c7192bf2df2d2ed4af3f28c">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[4/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_thread_destruction&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00457">457</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;{</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      .max_size = 0,</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   };</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;thread_destruction&quot;</span>;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test threadpool thread destruction&quot;</span>;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;         <span class="stringliteral">&quot;Ensure that threads are properly destroyed in a threadpool&quot;</span>;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   }</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   }</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 3);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 3);</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   }</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 0, 0, 0, 0, 3, 0);</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 2);</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 2);</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a15520783158466daddbc189806873a8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15520783158466daddbc189806873a8b">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[5/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_thread_timeout&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00521">521</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      .idle_timeout = 2,</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;      .max_size = 0,</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   };</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;thread_timeout&quot;</span>;</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test threadpool thread timeout&quot;</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;         <span class="stringliteral">&quot;Ensure that a thread with a two second timeout dies as expected.&quot;</span>;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   }</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   }</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   }</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   }</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 1);</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 0, 0, 0, 0, 1, 0);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 0);</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 0, 0, 0, 0, 0, 0);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a413a39510276e8c5d49932c858ec0768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a413a39510276e8c5d49932c858ec0768">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[6/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_thread_timeout_thrash&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00588">588</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00079">ast_threadpool_options::idle_timeout</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00142">simple_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00118">simple_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00130">simple_task_data_free()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00194">wait_for_completion()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;{</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;      .idle_timeout = 1,</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      .auto_increment = 1,</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      .max_size = 1,</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   };</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keywordtype">int</span> iteration;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;thread_timeout_thrash&quot;</span>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Thrash threadpool thread timeout&quot;</span>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;         <span class="stringliteral">&quot;Repeatedly queue a task when a threadpool thread should timeout.&quot;</span>;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   }</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   }</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;   }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;   }</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 1);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   <span class="keywordflow">for</span> (iteration = 0; iteration &lt; 30; ++iteration) {</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;         .tv_sec = start.tv_sec + options.<a class="code" href="../../de/de6/structast__threadpool__options.html#a55f8da70e65091a4533dae72885d0227">idle_timeout</a>,</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;         .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;      };</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;      std = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;      <span class="keywordflow">if</span> (!std) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;      }</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <span class="comment">/* Wait until the threadpool thread should timeout due to being idle */</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) != ETIMEDOUT) {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;         <span class="comment">/* This purposely left empty as we want to loop waiting for a time out */</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std)) {</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;         res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;         res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std);</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;      }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;      <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;         <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      }</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 0);</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 1, 30, 0, 0, 1);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="structast__threadpool__options_html_a55f8da70e65091a4533dae72885d0227"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html#a55f8da70e65091a4533dae72885d0227">ast_threadpool_options::idle_timeout</a></div><div class="ttdeci">int idle_timeout</div><div class="ttdoc">Time limit in seconds for idle threads. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00079">threadpool.h:79</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_af71fd11423041890bf63e52c24dc15f3"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a></div><div class="ttdeci">static void simple_task_data_free(struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00130">test_threadpool.c:130</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_add68fe51ab0c6cdbc35a81b830a0d8ed"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a></div><div class="ttdeci">static int simple_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00142">test_threadpool.c:142</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a4b9223386e4ed61302f6209c58f2d79d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_completion(struct ast_test *test, struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00194">test_threadpool.c:194</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abff46b259c53f29cccea096421a69835"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a></div><div class="ttdeci">static struct simple_task_data * simple_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00118">test_threadpool.c:118</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f6c913432ea5a27ca528e9e1a682236"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f6c913432ea5a27ca528e9e1a682236">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[7/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_one_task_one_thread&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00679">679</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00142">simple_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00118">simple_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00130">simple_task_data_free()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00194">wait_for_completion()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00217">wait_for_empty_notice()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;{</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      .max_size = 0,</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   };</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;one_task_one_thread&quot;</span>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test a single task with a single thread&quot;</span>;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;         <span class="stringliteral">&quot;Push a task into an empty threadpool, then add a thread to the pool.&quot;</span>;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   }</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   std = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;   <span class="keywordflow">if</span> (!std) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   }</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std)) {</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   }</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 1);</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   <span class="comment">/* Threads added to the pool are active when they start,</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="comment">    * so the newly-created thread should immediately execute</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">    * the waiting task.</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   }</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   }</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;   <span class="comment">/* After completing the task, the thread should go idle */</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;   }</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 1, 1, 0, 1, 1);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std);</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_af71fd11423041890bf63e52c24dc15f3"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a></div><div class="ttdeci">static void simple_task_data_free(struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00130">test_threadpool.c:130</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_add68fe51ab0c6cdbc35a81b830a0d8ed"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a></div><div class="ttdeci">static int simple_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00142">test_threadpool.c:142</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a4b9223386e4ed61302f6209c58f2d79d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_completion(struct ast_test *test, struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00194">test_threadpool.c:194</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abff46b259c53f29cccea096421a69835"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a></div><div class="ttdeci">static struct simple_task_data * simple_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00118">test_threadpool.c:118</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_ae725033b3f1e53b3adbccda5c1e4d584"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_empty_notice(struct ast_test *test, struct test_listener_data *tld)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00217">test_threadpool.c:217</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33bfbe1af58636fca33bc30a19475b4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33bfbe1af58636fca33bc30a19475b4d">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[8/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_one_thread_one_task&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00763">763</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00142">simple_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00118">simple_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00130">simple_task_data_free()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00194">wait_for_completion()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00217">wait_for_empty_notice()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;{</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      .max_size = 0,</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   };</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;one_thread_one_task&quot;</span>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test a single thread with a single task&quot;</span>;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;         <span class="stringliteral">&quot;Add a thread to the pool and then push a task to it.&quot;</span>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   }</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   }</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   }</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;   }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   std = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;   <span class="keywordflow">if</span> (!std) {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   }</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 1);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std)) {</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   }</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="comment">/* After completing the task, the thread should go idle */</span></div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   }</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 1, 1, 0, 1, 1);</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std);</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_af71fd11423041890bf63e52c24dc15f3"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a></div><div class="ttdeci">static void simple_task_data_free(struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00130">test_threadpool.c:130</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_add68fe51ab0c6cdbc35a81b830a0d8ed"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a></div><div class="ttdeci">static int simple_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00142">test_threadpool.c:142</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a4b9223386e4ed61302f6209c58f2d79d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_completion(struct ast_test *test, struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00194">test_threadpool.c:194</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abff46b259c53f29cccea096421a69835"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a></div><div class="ttdeci">static struct simple_task_data * simple_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00118">test_threadpool.c:118</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_ae725033b3f1e53b3adbccda5c1e4d584"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_empty_notice(struct ast_test *test, struct test_listener_data *tld)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00217">test_threadpool.c:217</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad5048880c99239eb0430812d003c1d26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5048880c99239eb0430812d003c1d26">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[9/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_one_thread_multiple_tasks&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00848">848</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00142">simple_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00118">simple_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00130">simple_task_data_free()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00194">wait_for_completion()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00217">wait_for_empty_notice()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;{</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std3 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      .max_size = 0,</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   };</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;one_thread_multiple_tasks&quot;</span>;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test a single thread with multiple tasks&quot;</span>;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;         <span class="stringliteral">&quot;Add a thread to the pool and then push three tasks to it.&quot;</span>;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;   }</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;   }</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;   }</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   }</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   std1 = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   std2 = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   std3 = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keywordflow">if</span> (!std1 || !std2 || !std3) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   }</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 1);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;   }</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;   res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std1)) {</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std2)) {</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   }</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std3)) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   }</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std1);</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;   }</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std2);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std3);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   }</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   }</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 0, 3, 0, 1, 1);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std1);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std2);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std3);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_af71fd11423041890bf63e52c24dc15f3"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a></div><div class="ttdeci">static void simple_task_data_free(struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00130">test_threadpool.c:130</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_add68fe51ab0c6cdbc35a81b830a0d8ed"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a></div><div class="ttdeci">static int simple_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00142">test_threadpool.c:142</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a4b9223386e4ed61302f6209c58f2d79d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_completion(struct ast_test *test, struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00194">test_threadpool.c:194</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abff46b259c53f29cccea096421a69835"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a></div><div class="ttdeci">static struct simple_task_data * simple_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00118">test_threadpool.c:118</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_ae725033b3f1e53b3adbccda5c1e4d584"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_empty_notice(struct ast_test *test, struct test_listener_data *tld)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00217">test_threadpool.c:217</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a314ddc1594626939cf96c899124459fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a314ddc1594626939cf96c899124459fc">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[10/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_auto_increment&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00989">989</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00142">simple_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00118">simple_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00130">simple_task_data_free()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00194">wait_for_completion()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00217">wait_for_empty_notice()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00954">wait_until_thread_state_task_pushed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;{</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std3 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std4 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      .auto_increment = 3,</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      .max_size = 0,</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;   };</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;auto_increment&quot;</span>;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test that the threadpool grows as tasks are added&quot;</span>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;         <span class="stringliteral">&quot;Create an empty threadpool and push a task to it. Once the task is\n&quot;</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;         <span class="stringliteral">&quot;pushed, the threadpool should add three threads and be able to\n&quot;</span></div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;         <span class="stringliteral">&quot;handle the task. The threads should then go idle&quot;</span>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   }</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   }</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;   }</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   }</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   std1 = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   std2 = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   std3 = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   std4 = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   <span class="keywordflow">if</span> (!std1 || !std2 || !std3 || !std4) {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   }</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std1)) {</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   }</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <span class="comment">/* Pushing the task should result in the threadpool growing</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;<span class="comment">    * by three threads. This will allow the task to actually execute</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std1);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;   }</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld);</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 3);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   }</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <span class="comment">/* Now push three tasks into the pool and ensure the pool does not</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="comment">    * grow.</span></div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;   res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std2)) {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;   }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std3)) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   }</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std4)) {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std2);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   }</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std3);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std4);</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   }</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld);</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   }</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a9267dd7c8b5470603a248626777cf98b">wait_until_thread_state_task_pushed</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 3, 4);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std1);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std2);</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std3);</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std4);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;}</div><div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_af71fd11423041890bf63e52c24dc15f3"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a></div><div class="ttdeci">static void simple_task_data_free(struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00130">test_threadpool.c:130</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_add68fe51ab0c6cdbc35a81b830a0d8ed"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a></div><div class="ttdeci">static int simple_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00142">test_threadpool.c:142</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a4b9223386e4ed61302f6209c58f2d79d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_completion(struct ast_test *test, struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00194">test_threadpool.c:194</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abff46b259c53f29cccea096421a69835"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a></div><div class="ttdeci">static struct simple_task_data * simple_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00118">test_threadpool.c:118</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a9267dd7c8b5470603a248626777cf98b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a9267dd7c8b5470603a248626777cf98b">wait_until_thread_state_task_pushed</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state_task_pushed(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle, int num_tasks)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00954">test_threadpool.c:954</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_ae725033b3f1e53b3adbccda5c1e4d584"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_empty_notice(struct ast_test *test, struct test_listener_data *tld)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00217">test_threadpool.c:217</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a310d9e3f067bd0057802d81397e0a317"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a310d9e3f067bd0057802d81397e0a317">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[11/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_max_size&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01117">1117</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00142">simple_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00118">simple_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00130">simple_task_data_free()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00194">wait_for_completion()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;{</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      .auto_increment = 3,</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      .max_size = 2,</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   };</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;max_size&quot;</span>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test that the threadpool does not exceed its maximum size restriction&quot;</span>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;         <span class="stringliteral">&quot;Create an empty threadpool and push a task to it. Once the task is\n&quot;</span></div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;         <span class="stringliteral">&quot;pushed, the threadpool should attempt to grow by three threads, but the\n&quot;</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;         <span class="stringliteral">&quot;pool&#39;s restrictions should only allow two threads to be added.&quot;</span>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   }</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   }</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   }</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   std = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   <span class="keywordflow">if</span> (!std) {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   }</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std)) {</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   }</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 2);</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   }</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 1, 1, 0, 2, 1);</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;}</div><div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_af71fd11423041890bf63e52c24dc15f3"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a></div><div class="ttdeci">static void simple_task_data_free(struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00130">test_threadpool.c:130</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_add68fe51ab0c6cdbc35a81b830a0d8ed"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a></div><div class="ttdeci">static int simple_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00142">test_threadpool.c:142</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a4b9223386e4ed61302f6209c58f2d79d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_completion(struct ast_test *test, struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00194">test_threadpool.c:194</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abff46b259c53f29cccea096421a69835"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a></div><div class="ttdeci">static struct simple_task_data * simple_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00118">test_threadpool.c:118</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26a30162413f710096670648fe163b7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26a30162413f710096670648fe163b7b">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[12/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_reactivation&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01189">1189</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00142">simple_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00118">simple_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00130">simple_task_data_free()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00194">wait_for_completion()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00217">wait_for_empty_notice()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;{</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;      .max_size = 0,</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   };</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;reactivation&quot;</span>;</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test that a threadpool reactivates when work is added&quot;</span>;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;         <span class="stringliteral">&quot;Push a task into a threadpool. Make sure the task executes and the\n&quot;</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;         <span class="stringliteral">&quot;thread goes idle. Then push a second task and ensure that the thread\n&quot;</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;         <span class="stringliteral">&quot;awakens and executes the second task.&quot;</span>;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   }</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   }</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   }</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   }</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   std1 = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   std2 = <a class="code" href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a>();</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   <span class="keywordflow">if</span> (!std1 || !std2) {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std1)) {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   }</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 1);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std1);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   }</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 1, 1, 0, 1, 1);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   }</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   <span class="comment">/* Now make sure the threadpool reactivates when we add a second task */</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a>, std2)) {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, std2);</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;   }</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld);</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   }</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 1, 2, 0, 1, 1);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std1);</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a>(std2);</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_af71fd11423041890bf63e52c24dc15f3"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#af71fd11423041890bf63e52c24dc15f3">simple_task_data_free</a></div><div class="ttdeci">static void simple_task_data_free(struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00130">test_threadpool.c:130</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_add68fe51ab0c6cdbc35a81b830a0d8ed"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#add68fe51ab0c6cdbc35a81b830a0d8ed">simple_task</a></div><div class="ttdeci">static int simple_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00142">test_threadpool.c:142</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a4b9223386e4ed61302f6209c58f2d79d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a4b9223386e4ed61302f6209c58f2d79d">wait_for_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_completion(struct ast_test *test, struct simple_task_data *std)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00194">test_threadpool.c:194</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abff46b259c53f29cccea096421a69835"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abff46b259c53f29cccea096421a69835">simple_task_data_alloc</a></div><div class="ttdeci">static struct simple_task_data * simple_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00118">test_threadpool.c:118</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_ae725033b3f1e53b3adbccda5c1e4d584"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#ae725033b3f1e53b3adbccda5c1e4d584">wait_for_empty_notice</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_empty_notice(struct ast_test *test, struct test_listener_data *tld)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00217">test_threadpool.c:217</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acaa29fa9b35e46ed357db11d15b17362"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acaa29fa9b35e46ed357db11d15b17362">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[13/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_task_distribution&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01415">1415</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01334">complex_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01308">complex_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01321">complex_task_data_free()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01350">poke_worker()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01393">wait_for_complex_completion()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;{</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      .max_size = 0,</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;   };</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;task_distribution&quot;</span>;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test that tasks are evenly distributed to threads&quot;</span>;</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;         <span class="stringliteral">&quot;Push two tasks into a threadpool. Ensure that each is handled by\n&quot;</span></div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;         <span class="stringliteral">&quot;a separate thread&quot;</span>;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   }</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   }</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;   }</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   }</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;   ctd1 = <a class="code" href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a>();</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   ctd2 = <a class="code" href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a>();</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;   <span class="keywordflow">if</span> (!ctd1 || !ctd2) {</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   }</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a>, ctd1)) {</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   }</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a>, ctd2)) {</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;   }</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 2);</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 2, 0);</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 0, 2, 2, 0, 0);</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   }</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   <span class="comment">/* The tasks are stalled until we poke them */</span></div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(ctd1);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(ctd2);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a>(ctd1);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   }</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a>(ctd2);</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   }</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 2);</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   }</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 0, 2, 0, 2, 1);</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a>(ctd1);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a>(ctd2);</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8c708a5128d1d0d2193b2923b3128343"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a></div><div class="ttdeci">static void complex_task_data_free(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01321">test_threadpool.c:1321</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_aaea8a9ac548fd9bf6c437c7fa1303928"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a></div><div class="ttdeci">static void poke_worker(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01350">test_threadpool.c:1350</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structcomplex__task__data_html"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01299">test_threadpool.c:1299</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a459011e0b0c6974685a4cd8365361771"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_complex_completion(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01393">test_threadpool.c:1393</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a95e19fb5b2104eaf9d0f97278e0c7995"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a></div><div class="ttdeci">static int complex_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01334">test_threadpool.c:1334</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_ad0ae2e361c57a1934caeb46ac0aaef7f"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a></div><div class="ttdeci">static struct complex_task_data * complex_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01308">test_threadpool.c:1308</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3e061666664b6edf8883c1abe7e8fc10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3e061666664b6edf8883c1abe7e8fc10">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[14/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_more_destruction&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01514">1514</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00893">ast_threadpool_listener_alloc()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00874">ast_threadpool_set_size()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01334">complex_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01308">complex_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01321">complex_task_data_free()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01476">listener()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">listener_check()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01350">poke_worker()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">test_alloc()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01393">wait_for_complex_completion()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>
<div class="fragment"><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;{</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *<a class="code" href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      .initial_size = 0,</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;      .max_size = 0,</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;   };</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;more_destruction&quot;</span>;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test that threads are destroyed as expected&quot;</span>;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;         <span class="stringliteral">&quot;Push two tasks into a threadpool. Set the threadpool size to 4\n&quot;</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;         <span class="stringliteral">&quot;Ensure that there are 2 active and 2 idle threads. Then shrink the\n&quot;</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;         <span class="stringliteral">&quot;threadpool down to 1 thread. Ensure that the thread leftover is active\n&quot;</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;         <span class="stringliteral">&quot;and ensure that both tasks complete.&quot;</span>;</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;   }</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   tld = <a class="code" href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a>();</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   }</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   listener = <a class="code" href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a>(&amp;<a class="code" href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a>, tld);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;   <span class="keywordflow">if</span> (!listener) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   }</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name, listener, &amp;options);</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;   }</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;   ctd1 = <a class="code" href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a>();</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;   ctd2 = <a class="code" href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a>();</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;   <span class="keywordflow">if</span> (!ctd1 || !ctd2) {</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;   }</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a>, ctd1)) {</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;   }</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a>, ctd2)) {</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   }</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 4);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 2, 2);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;   }</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 0, 2, 2, 2, 0);</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   }</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a>(pool, 1);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   <span class="comment">/* Shrinking the threadpool should kill off the two idle threads</span></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;<span class="comment">    * and one of the active threads.</span></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 1, 0);</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   }</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 0, 2, 1, 0, 0);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;   }</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   <span class="comment">/* The tasks are stalled until we poke them */</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(ctd1);</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(ctd2);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a>(ctd1);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   }</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a>(ctd2);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;   }</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, tld, 0, 1);</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, listener, 1, 0, 2, 0, 1, 1);</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(listener);</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a>(ctd1);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a>(ctd2);</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tld);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_acd7a437bf7aa6a7335cf1e96655258d1"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#acd7a437bf7aa6a7335cf1e96655258d1">ast_threadpool_set_size</a></div><div class="ttdeci">void ast_threadpool_set_size(struct ast_threadpool *threadpool, unsigned int size)</div><div class="ttdoc">Set the number of threads for the thread pool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00874">threadpool.c:874</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8c708a5128d1d0d2193b2923b3128343"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a></div><div class="ttdeci">static void complex_task_data_free(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01321">test_threadpool.c:1321</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a8640da84c2bffa19c818229137de4c7d"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8640da84c2bffa19c818229137de4c7d">listener_check</a></div><div class="ttdeci">static enum ast_test_result_state listener_check(struct ast_test *test, struct ast_threadpool_listener *listener, int task_pushed, int was_empty, int num_tasks, int num_active, int num_idle, int empty_notice)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00241">test_threadpool.c:241</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a3a32d310c35c655ac4a9ce3815aed53e"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a3a32d310c35c655ac4a9ce3815aed53e">test_alloc</a></div><div class="ttdeci">static struct test_listener_data * test_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00053">test_threadpool.c:53</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="asterisk_8c_html_adc01bca6281492dfec5ae217cf32fc34"><div class="ttname"><a href="../../d5/d03/asterisk_8c.html#adc01bca6281492dfec5ae217cf32fc34">listener</a></div><div class="ttdeci">static void * listener(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01476">asterisk.c:1476</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_aaea8a9ac548fd9bf6c437c7fa1303928"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a></div><div class="ttdeci">static void poke_worker(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01350">test_threadpool.c:1350</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a555eea08e0e87da38c116bd77648596b"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a555eea08e0e87da38c116bd77648596b">test_callbacks</a></div><div class="ttdeci">static const struct ast_threadpool_listener_callbacks test_callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00105">test_threadpool.c:105</a></div></div>
<div class="ttc" id="threadpool_8h_html_a3e1d943184d2d6260b6718e5629bbc24"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a3e1d943184d2d6260b6718e5629bbc24">ast_threadpool_listener_alloc</a></div><div class="ttdeci">struct ast_threadpool_listener * ast_threadpool_listener_alloc(const struct ast_threadpool_listener_callbacks *callbacks, void *user_data)</div><div class="ttdoc">Allocate a threadpool listener. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00893">threadpool.c:893</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structcomplex__task__data_html"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01299">test_threadpool.c:1299</a></div></div>
<div class="ttc" id="structast__threadpool__listener_html"><div class="ttname"><a href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a></div><div class="ttdoc">listener for a threadpool </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00110">threadpool.c:110</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a459011e0b0c6974685a4cd8365361771"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_complex_completion(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01393">test_threadpool.c:1393</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a95e19fb5b2104eaf9d0f97278e0c7995"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a></div><div class="ttdeci">static int complex_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01334">test_threadpool.c:1334</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_ad0ae2e361c57a1934caeb46ac0aaef7f"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a></div><div class="ttdeci">static struct complex_task_data * complex_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01308">test_threadpool.c:1308</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae63abe0407a60d4ab4700c3b3b0b5854"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63abe0407a60d4ab4700c3b3b0b5854">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[15/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_serializer&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01630">1630</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01175">ast_taskprocessor_push()</a>, <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00956">ast_threadpool_push()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01432">ast_threadpool_serializer()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01334">complex_task()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01308">complex_task_data_alloc()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01321">complex_task_data_free()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01375">has_complex_started()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01350">poke_worker()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01393">wait_for_complex_completion()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01357">wait_for_complex_start()</a>.</p>
<div class="fragment"><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;{</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;   <span class="keywordtype">int</span> started = 0;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   <span class="keywordtype">int</span> finished = 0;</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *uut = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *data1 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *data2 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *data3 = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      .initial_size = 2,</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;      .max_size = 0,</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   };</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;threadpool_serializer&quot;</span>;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test that serializers&quot;</span>;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;         <span class="stringliteral">&quot;Ensures that tasks enqueued to a serialize execute in sequence.&quot;</span>;</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;   }</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<span class="stringliteral">&quot;threadpool_serializer&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;options);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Could not create threadpool\n&quot;</span>);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;   }</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;   uut = <a class="code" href="../../d3/d40/threadpool_8h.html#a6e86f51d34ae17fd6f38b8379883bf87">ast_threadpool_serializer</a>(<span class="stringliteral">&quot;ser1&quot;</span>, pool);</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;   data1 = <a class="code" href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a>();</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;   data2 = <a class="code" href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a>();</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   data3 = <a class="code" href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a>();</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   <span class="keywordflow">if</span> (!uut || !data1 || !data2 || !data3) {</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Allocation failed\n&quot;</span>);</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;   }</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   <span class="comment">/* This should start right away */</span></div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(uut, <a class="code" href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a>, data1)) {</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to enqueue data1\n&quot;</span>);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;   }</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;   started = <a class="code" href="../../de/dec/test__threadpool_8c.html#a65aca16da1f3fc4287e22c30891d9ef3">wait_for_complex_start</a>(data1);</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;   <span class="keywordflow">if</span> (!started) {</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to start data1\n&quot;</span>);</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;   }</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;   <span class="comment">/* This should not start until data 1 is complete */</span></div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a>(uut, <a class="code" href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a>, data2)) {</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to enqueue data2\n&quot;</span>);</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;   }</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;   started = <a class="code" href="../../de/dec/test__threadpool_8c.html#a244b29f011d19373f9d4d77d822cbba9">has_complex_started</a>(data2);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;   <span class="keywordflow">if</span> (started) {</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;data2 started out of order\n&quot;</span>);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;   }</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;   <span class="comment">/* But the free thread in the pool can still run */</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a>(pool, <a class="code" href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a>, data3)) {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to enqueue data3\n&quot;</span>);</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;   }</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   started = <a class="code" href="../../de/dec/test__threadpool_8c.html#a65aca16da1f3fc4287e22c30891d9ef3">wait_for_complex_start</a>(data3);</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   <span class="keywordflow">if</span> (!started) {</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to start data3\n&quot;</span>);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   }</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   <span class="comment">/* Finishing data1 should allow data2 to start */</span></div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(data1);</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   finished = <a class="code" href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a>(data1) == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   <span class="keywordflow">if</span> (!finished) {</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;data1 couldn&#39;t finish\n&quot;</span>);</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   }</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   started = <a class="code" href="../../de/dec/test__threadpool_8c.html#a65aca16da1f3fc4287e22c30891d9ef3">wait_for_complex_start</a>(data2);</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   <span class="keywordflow">if</span> (!started) {</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Failed to start data2\n&quot;</span>);</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   }</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   <span class="comment">/* Finish up */</span></div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(data2);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;   finished = <a class="code" href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a>(data2) == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;   <span class="keywordflow">if</span> (!finished) {</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;data2 couldn&#39;t finish\n&quot;</span>);</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;   }</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(data3);</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;   finished = <a class="code" href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a>(data3) == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   <span class="keywordflow">if</span> (!finished) {</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;data3 couldn&#39;t finish\n&quot;</span>);</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;   }</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(data1);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(data2);</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a>(data3);</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(uut);</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a>(data1);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a>(data2);</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <a class="code" href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a>(data3);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;}</div><div class="ttc" id="test__threadpool_8c_html_a8c708a5128d1d0d2193b2923b3128343"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a8c708a5128d1d0d2193b2923b3128343">complex_task_data_free</a></div><div class="ttdeci">static void complex_task_data_free(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01321">test_threadpool.c:1321</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6e86f51d34ae17fd6f38b8379883bf87"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6e86f51d34ae17fd6f38b8379883bf87">ast_threadpool_serializer</a></div><div class="ttdeci">struct ast_taskprocessor * ast_threadpool_serializer(const char *name, struct ast_threadpool *pool)</div><div class="ttdoc">Serialized execution of tasks within a ast_threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l01432">threadpool.c:1432</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a244b29f011d19373f9d4d77d822cbba9"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a244b29f011d19373f9d4d77d822cbba9">has_complex_started</a></div><div class="ttdeci">static int has_complex_started(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01375">test_threadpool.c:1375</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_aaea8a9ac548fd9bf6c437c7fa1303928"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#aaea8a9ac548fd9bf6c437c7fa1303928">poke_worker</a></div><div class="ttdeci">static void poke_worker(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01350">test_threadpool.c:1350</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a65aca16da1f3fc4287e22c30891d9ef3"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a65aca16da1f3fc4287e22c30891d9ef3">wait_for_complex_start</a></div><div class="ttdeci">static int wait_for_complex_start(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01357">test_threadpool.c:1357</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a6703b90076af2b709e18c532e702da76"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6703b90076af2b709e18c532e702da76">ast_threadpool_push</a></div><div class="ttdeci">int ast_threadpool_push(struct ast_threadpool *pool, int(*task)(void *data), void *data) attribute_warn_unused_result</div><div class="ttdoc">Push a task to the threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00956">threadpool.c:956</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structcomplex__task__data_html"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01299">test_threadpool.c:1299</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a6b2508ba0a6b8f43ae6d3963f3189585"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a6b2508ba0a6b8f43ae6d3963f3189585">ast_taskprocessor_push</a></div><div class="ttdeci">int ast_taskprocessor_push(struct ast_taskprocessor *tps, int(*task_exe)(void *datap), void *datap) attribute_warn_unused_result</div><div class="ttdoc">Push a task into the specified taskprocessor queue and signal the taskprocessor thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01175">taskprocessor.c:1175</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a459011e0b0c6974685a4cd8365361771"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a459011e0b0c6974685a4cd8365361771">wait_for_complex_completion</a></div><div class="ttdeci">static enum ast_test_result_state wait_for_complex_completion(struct complex_task_data *ctd)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01393">test_threadpool.c:1393</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_a95e19fb5b2104eaf9d0f97278e0c7995"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#a95e19fb5b2104eaf9d0f97278e0c7995">complex_task</a></div><div class="ttdeci">static int complex_task(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01334">test_threadpool.c:1334</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_ad0ae2e361c57a1934caeb46ac0aaef7f"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#ad0ae2e361c57a1934caeb46ac0aaef7f">complex_task_data_alloc</a></div><div class="ttdeci">static struct complex_task_data * complex_task_data_alloc(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01308">test_threadpool.c:1308</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f4daba8740f782de9513a9262120a0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f4daba8740f782de9513a9262120a0e">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[16/16]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">threadpool_serializer_dupe&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01747">1747</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/deb/taskprocessor_8c_source.html#l01109">ast_taskprocessor_unreference()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00915">ast_threadpool_create()</a>, <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00071">AST_THREADPOOL_OPTIONS_VERSION</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l01432">ast_threadpool_serializer()</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00965">ast_threadpool_shutdown()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">pool</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, and <a class="el" href="../../d3/d40/threadpool_8h_source.html#l00073">ast_threadpool_options::version</a>.</p>
<div class="fragment"><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;{</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *<a class="code" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *uut = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a> *there_can_be_only_one = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      .version = <a class="code" href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a>,</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      .idle_timeout = 0,</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      .auto_increment = 0,</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      .initial_size = 2,</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;      .max_size = 0,</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   };</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = <span class="stringliteral">&quot;threadpool_serializer_dupe&quot;</span>;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <span class="stringliteral">&quot;/main/threadpool/&quot;</span>;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test that serializers are uniquely named&quot;</span>;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;         <span class="stringliteral">&quot;Creating two serializers with the same name should\n&quot;</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;         <span class="stringliteral">&quot;result in error.&quot;</span>;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;   }</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;   pool = <a class="code" href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a>(<span class="stringliteral">&quot;threadpool_serializer&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;options);</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   <span class="keywordflow">if</span> (!pool) {</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Could not create threadpool\n&quot;</span>);</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;   }</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   uut = <a class="code" href="../../d3/d40/threadpool_8h.html#a6e86f51d34ae17fd6f38b8379883bf87">ast_threadpool_serializer</a>(<span class="stringliteral">&quot;highlander&quot;</span>, pool);</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;   <span class="keywordflow">if</span> (!uut) {</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Allocation failed\n&quot;</span>);</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;   }</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;   there_can_be_only_one = <a class="code" href="../../d3/d40/threadpool_8h.html#a6e86f51d34ae17fd6f38b8379883bf87">ast_threadpool_serializer</a>(<span class="stringliteral">&quot;highlander&quot;</span>, pool);</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;   <span class="keywordflow">if</span> (there_can_be_only_one) {</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(there_can_be_only_one);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(<a class="code" href="../../d8/d89/structtest.html">test</a>, <span class="stringliteral">&quot;Duplicate name error\n&quot;</span>);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;   }</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;   res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;   <a class="code" href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a>(uut);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;   <a class="code" href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a>(pool);</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;}</div><div class="ttc" id="threadpool_8h_html_a6e86f51d34ae17fd6f38b8379883bf87"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a6e86f51d34ae17fd6f38b8379883bf87">ast_threadpool_serializer</a></div><div class="ttdeci">struct ast_taskprocessor * ast_threadpool_serializer(const char *name, struct ast_threadpool *pool)</div><div class="ttdoc">Serialized execution of tasks within a ast_threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l01432">threadpool.c:1432</a></div></div>
<div class="ttc" id="structast__threadpool__options_html"><div class="ttname"><a href="../../de/de6/structast__threadpool__options.html">ast_threadpool_options</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00070">threadpool.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="threadpool_8h_html_ae95119c74a92ef5c17f55421b278a25c"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#ae95119c74a92ef5c17f55421b278a25c">AST_THREADPOOL_OPTIONS_VERSION</a></div><div class="ttdeci">#define AST_THREADPOOL_OPTIONS_VERSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d40/threadpool_8h_source.html#l00071">threadpool.h:71</a></div></div>
<div class="ttc" id="res__rtp__asterisk_8c_html_a2e57658a5d3ef6c4ef2774c9d5868e7c"><div class="ttname"><a href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a></div><div class="ttdeci">static pj_pool_t * pool</div><div class="ttdoc">Global memory pool for configuration and timers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00236">res_rtp_asterisk.c:236</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="threadpool_8h_html_abf6fc4af30779217d37047cbb1fddd1a"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#abf6fc4af30779217d37047cbb1fddd1a">ast_threadpool_create</a></div><div class="ttdeci">struct ast_threadpool * ast_threadpool_create(const char *name, struct ast_threadpool_listener *listener, const struct ast_threadpool_options *options)</div><div class="ttdoc">Create a new threadpool. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00915">threadpool.c:915</a></div></div>
<div class="ttc" id="threadpool_8h_html_a45bebfa26a1737c170f723ac86299bba"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#a45bebfa26a1737c170f723ac86299bba">ast_threadpool_shutdown</a></div><div class="ttdeci">void ast_threadpool_shutdown(struct ast_threadpool *pool)</div><div class="ttdoc">Shut down a threadpool and destroy it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00965">threadpool.c:965</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="structast__taskprocessor_html"><div class="ttname"><a href="../../db/d17/structast__taskprocessor.html">ast_taskprocessor</a></div><div class="ttdoc">A ast_taskprocessor structure is a singleton by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l00069">taskprocessor.c:69</a></div></div>
<div class="ttc" id="structast__threadpool_html"><div class="ttname"><a href="../../d5/d10/structast__threadpool.html">ast_threadpool</a></div><div class="ttdoc">An opaque threadpool structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00036">threadpool.c:36</a></div></div>
<div class="ttc" id="taskprocessor_8h_html_a32492eb2480cb8c46ad669622cff8556"><div class="ttname"><a href="../../d0/d1e/taskprocessor_8h.html#a32492eb2480cb8c46ad669622cff8556">ast_taskprocessor_unreference</a></div><div class="ttdeci">void * ast_taskprocessor_unreference(struct ast_taskprocessor *tps)</div><div class="ttdoc">Unreference the specified taskprocessor and its reference count will decrement. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/deb/taskprocessor_8c_source.html#l01109">taskprocessor.c:1109</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a95e19fb5b2104eaf9d0f97278e0c7995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95e19fb5b2104eaf9d0f97278e0c7995">&#9670;&nbsp;</a></span>complex_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int complex_task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01334">1334</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00203">ast_cond_wait</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01302">complex_task_data::continue_task</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01303">complex_task_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01305">complex_task_data::notify_cond</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01304">complex_task_data::stall_cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01301">complex_task_data::task_executed</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01300">complex_task_data::task_started</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01415">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;{</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd = data;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   <span class="comment">/* Notify that we started */</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">task_started</a> = 1;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">notify_cond</a>);</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <span class="keywordflow">while</span> (!ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#aa6e966307d9e3c358fb74554a1ba3ddb">continue_task</a>) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a24165d5d4d1cffc00026292ab3437e62">stall_cond</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   }</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   <span class="comment">/* We got poked. Finish up */</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;   ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">task_executed</a> = 1;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">notify_cond</a>);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;}</div><div class="ttc" id="structcomplex__task__data_html_aa6e966307d9e3c358fb74554a1ba3ddb"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#aa6e966307d9e3c358fb74554a1ba3ddb">complex_task_data::continue_task</a></div><div class="ttdeci">int continue_task</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01302">test_threadpool.c:1302</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_a7fd45e714f60260c225e3b0b5d46a6c1"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">complex_task_data::task_executed</a></div><div class="ttdeci">int task_executed</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01301">test_threadpool.c:1301</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_af67260723c60ba8198f79fd4d6f45f7d"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">complex_task_data::notify_cond</a></div><div class="ttdeci">ast_cond_t notify_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01305">test_threadpool.c:1305</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_a34eeab68fcb108d9d173cc7c79a02c5d"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">complex_task_data::task_started</a></div><div class="ttdeci">int task_started</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01300">test_threadpool.c:1300</a></div></div>
<div class="ttc" id="structcomplex__task__data_html"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01299">test_threadpool.c:1299</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">complex_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01303">test_threadpool.c:1303</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_a24165d5d4d1cffc00026292ab3437e62"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#a24165d5d4d1cffc00026292ab3437e62">complex_task_data::stall_cond</a></div><div class="ttdeci">ast_cond_t stall_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01304">test_threadpool.c:1304</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad0ae2e361c57a1934caeb46ac0aaef7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0ae2e361c57a1934caeb46ac0aaef7f">&#9670;&nbsp;</a></span>complex_task_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a>* complex_task_data_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01308">1308</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01303">complex_task_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01305">complex_task_data::notify_cond</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01304">complex_task_data::stall_cond</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01415">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;{</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *ctd = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ctd));</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;   <span class="keywordflow">if</span> (!ctd) {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a24165d5d4d1cffc00026292ab3437e62">stall_cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">notify_cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <span class="keywordflow">return</span> ctd;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;}</div><div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_af67260723c60ba8198f79fd4d6f45f7d"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">complex_task_data::notify_cond</a></div><div class="ttdeci">ast_cond_t notify_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01305">test_threadpool.c:1305</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structcomplex__task__data_html"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01299">test_threadpool.c:1299</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">complex_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01303">test_threadpool.c:1303</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_a24165d5d4d1cffc00026292ab3437e62"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#a24165d5d4d1cffc00026292ab3437e62">complex_task_data::stall_cond</a></div><div class="ttdeci">ast_cond_t stall_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01304">test_threadpool.c:1304</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8c708a5128d1d0d2193b2923b3128343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8c708a5128d1d0d2193b2923b3128343">&#9670;&nbsp;</a></span>complex_task_data_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void complex_task_data_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *&#160;</td>
          <td class="paramname"><em>ctd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01321">1321</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01303">complex_task_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01305">complex_task_data::notify_cond</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01304">complex_task_data::stall_cond</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01415">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;{</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <span class="keywordflow">if</span> (!ctd) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   }</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a24165d5d4d1cffc00026292ab3437e62">stall_cond</a>);</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">notify_cond</a>);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ctd);</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;}</div><div class="ttc" id="structcomplex__task__data_html_af67260723c60ba8198f79fd4d6f45f7d"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">complex_task_data::notify_cond</a></div><div class="ttdeci">ast_cond_t notify_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01305">test_threadpool.c:1305</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">complex_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01303">test_threadpool.c:1303</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_a24165d5d4d1cffc00026292ab3437e62"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#a24165d5d4d1cffc00026292ab3437e62">complex_task_data::stall_cond</a></div><div class="ttdeci">ast_cond_t stall_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01304">test_threadpool.c:1304</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a244b29f011d19373f9d4d77d822cbba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a244b29f011d19373f9d4d77d822cbba9">&#9670;&nbsp;</a></span>has_complex_started()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int has_complex_started </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *&#160;</td>
          <td class="paramname"><em>ctd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01375">1375</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01303">complex_task_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01305">complex_task_data::notify_cond</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01300">complex_task_data::task_started</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01630">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;{</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;      .tv_sec = start.tv_sec + 1,</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;   };</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   <span class="keywordflow">while</span> (!ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">task_started</a>) {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">notify_cond</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) == ETIMEDOUT) {</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;      }</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;   }</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <span class="keywordflow">return</span> ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">task_started</a>;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_af67260723c60ba8198f79fd4d6f45f7d"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">complex_task_data::notify_cond</a></div><div class="ttdeci">ast_cond_t notify_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01305">test_threadpool.c:1305</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_a34eeab68fcb108d9d173cc7c79a02c5d"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">complex_task_data::task_started</a></div><div class="ttdeci">int task_started</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01300">test_threadpool.c:1300</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">complex_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01303">test_threadpool.c:1303</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8640da84c2bffa19c818229137de4c7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8640da84c2bffa19c818229137de4c7d">&#9670;&nbsp;</a></span>listener_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> listener_check </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>task_pushed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>was_empty</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_tasks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_idle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>empty_notice</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00241">241</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00905">ast_threadpool_listener_get_user_data()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00047">test_listener_data::empty_notice</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00043">test_listener_data::num_active</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00044">test_listener_data::num_idle</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00046">test_listener_data::num_tasks</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00045">test_listener_data::task_pushed</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00048">test_listener_data::was_empty</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00288">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;{</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a>(listener);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <span class="keywordflow">if</span> (tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">task_pushed</a> != <a class="code" href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">task_pushed</a>) {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Expected task %sto be pushed, but it was%s\n&quot;</span>,</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;            <a class="code" href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">task_pushed</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">task_pushed</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; not&quot;</span>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordflow">if</span> (tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a37cdff51e63f885b3a82f34a6673bfbb">was_empty</a> != <a class="code" href="../../dd/d94/structtest__listener__data.html#a37cdff51e63f885b3a82f34a6673bfbb">was_empty</a>) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Expected %sto be empty, but it was%s\n&quot;</span>,</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <a class="code" href="../../dd/d94/structtest__listener__data.html#a37cdff51e63f885b3a82f34a6673bfbb">was_empty</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a37cdff51e63f885b3a82f34a6673bfbb">was_empty</a> ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot; not&quot;</span>);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   }</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordflow">if</span> (tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">num_tasks</a>!= <a class="code" href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">num_tasks</a>) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Expected %d tasks to be pushed, but got %d\n&quot;</span>,</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">num_tasks</a>, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">num_tasks</a>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   }</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordflow">if</span> (tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">num_active</a> != <a class="code" href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">num_active</a>) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Expected %d active threads, but got %d\n&quot;</span>,</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <a class="code" href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">num_active</a>, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">num_active</a>);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <span class="keywordflow">if</span> (tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">num_idle</a> != <a class="code" href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">num_idle</a>) {</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Expected %d idle threads, but got %d\n&quot;</span>,</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <a class="code" href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">num_idle</a>, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">num_idle</a>);</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keywordflow">if</span> (tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1571ddcde71c7f7105e616e349f6fdd4">empty_notice</a> != <a class="code" href="../../dd/d94/structtest__listener__data.html#a1571ddcde71c7f7105e616e349f6fdd4">empty_notice</a>) {</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Expected %s empty notice, but got %s\n&quot;</span>,</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <a class="code" href="../../dd/d94/structtest__listener__data.html#a37cdff51e63f885b3a82f34a6673bfbb">was_empty</a> ? <span class="stringliteral">&quot;an&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">task_pushed</a> ? <span class="stringliteral">&quot;one&quot;</span> : <span class="stringliteral">&quot;none&quot;</span>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   }</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;}</div><div class="ttc" id="structtest__listener__data_html_aba5708946c809ea7e18ce45b88a104be"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">test_listener_data::num_idle</a></div><div class="ttdeci">int num_idle</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00044">test_threadpool.c:44</a></div></div>
<div class="ttc" id="structtest__listener__data_html_acabb76141a8e1b125551bab4cc352cf3"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">test_listener_data::num_tasks</a></div><div class="ttdeci">int num_tasks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00046">test_threadpool.c:46</a></div></div>
<div class="ttc" id="structtest__listener__data_html_af15fb2b7bf74066c2d078cf41aff6e96"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">test_listener_data::num_active</a></div><div class="ttdeci">int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00043">test_threadpool.c:43</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="threadpool_8h_html_aa9bee831e887eb53e72a7e161d5c19de"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a></div><div class="ttdeci">void * ast_threadpool_listener_get_user_data(const struct ast_threadpool_listener *listener)</div><div class="ttdoc">Get the threadpool listener&amp;#39;s user data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00905">threadpool.c:905</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1571ddcde71c7f7105e616e349f6fdd4"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1571ddcde71c7f7105e616e349f6fdd4">test_listener_data::empty_notice</a></div><div class="ttdeci">int empty_notice</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00047">test_threadpool.c:47</a></div></div>
<div class="ttc" id="structtest__listener__data_html_ab0af5a7a1af50fd64365483407adc126"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">test_listener_data::task_pushed</a></div><div class="ttdeci">int task_pushed</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00045">test_threadpool.c:45</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a37cdff51e63f885b3a82f34a6673bfbb"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a37cdff51e63f885b3a82f34a6673bfbb">test_listener_data::was_empty</a></div><div class="ttdeci">int was_empty</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00048">test_threadpool.c:48</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01822">1822</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, and <a class="el" href="../../d8/db9/test_8c_source.html#l00194">ast_test_register()</a>.</p>
<div class="fragment"><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;{</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_push);</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_initial_threads);</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_thread_creation);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_thread_destruction);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_thread_timeout);</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_thread_timeout_thrash);</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_one_task_one_thread);</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_one_thread_one_task);</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_one_thread_multiple_tasks);</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_auto_increment);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_max_size);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_reactivation);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_task_distribution);</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_more_destruction);</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_serializer);</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a>(threadpool_serializer_dupe);</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="test_8c_html_a1f590015fdc57f020e4cc2280ce351fa"><div class="ttname"><a href="../../d8/db9/test_8c.html#a1f590015fdc57f020e4cc2280ce351fa">ast_test_register</a></div><div class="ttdeci">int ast_test_register(ast_test_cb_t *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00194">test.c:194</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaea8a9ac548fd9bf6c437c7fa1303928"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea8a9ac548fd9bf6c437c7fa1303928">&#9670;&nbsp;</a></span>poke_worker()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void poke_worker </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *&#160;</td>
          <td class="paramname"><em>ctd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01350">1350</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01302">complex_task_data::continue_task</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01303">complex_task_data::lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01304">complex_task_data::stall_cond</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01415">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;{</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#aa6e966307d9e3c358fb74554a1ba3ddb">continue_task</a> = 1;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a24165d5d4d1cffc00026292ab3437e62">stall_cond</a>);</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;}</div><div class="ttc" id="structcomplex__task__data_html_aa6e966307d9e3c358fb74554a1ba3ddb"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#aa6e966307d9e3c358fb74554a1ba3ddb">complex_task_data::continue_task</a></div><div class="ttdeci">int continue_task</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01302">test_threadpool.c:1302</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">complex_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01303">test_threadpool.c:1303</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_a24165d5d4d1cffc00026292ab3437e62"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#a24165d5d4d1cffc00026292ab3437e62">complex_task_data::stall_cond</a></div><div class="ttdeci">ast_cond_t stall_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01304">test_threadpool.c:1304</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="add68fe51ab0c6cdbc35a81b830a0d8ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add68fe51ab0c6cdbc35a81b830a0d8ed">&#9670;&nbsp;</a></span>simple_task()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int simple_task </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00142">142</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00115">simple_task_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00114">simple_task_data::lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00113">simple_task_data::task_executed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00288">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;{</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std = data;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">task_executed</a> = 1;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;}</div><div class="ttc" id="structsimple__task__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">simple_task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00115">test_threadpool.c:115</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structsimple__task__data_html_a7fd45e714f60260c225e3b0b5d46a6c1"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">simple_task_data::task_executed</a></div><div class="ttdeci">int task_executed</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00113">test_threadpool.c:113</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structsimple__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">simple_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00114">test_threadpool.c:114</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abff46b259c53f29cccea096421a69835"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abff46b259c53f29cccea096421a69835">&#9670;&nbsp;</a></span>simple_task_data_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a>* simple_task_data_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00118">118</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00115">simple_task_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00114">simple_task_data::lock</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00288">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;{</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *std = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*std));</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="keywordflow">if</span> (!std) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   }</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <span class="keywordflow">return</span> std;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="ttc" id="structsimple__task__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">simple_task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00115">test_threadpool.c:115</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsimple__task__data_html"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00112">test_threadpool.c:112</a></div></div>
<div class="ttc" id="structsimple__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">simple_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00114">test_threadpool.c:114</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af71fd11423041890bf63e52c24dc15f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af71fd11423041890bf63e52c24dc15f3">&#9670;&nbsp;</a></span>simple_task_data_free()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void simple_task_data_free </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *&#160;</td>
          <td class="paramname"><em>std</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00130">130</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00115">simple_task_data::cond</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00114">simple_task_data::lock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00288">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <span class="keywordflow">if</span> (!std) {</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   }</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(std);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="ttc" id="structsimple__task__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">simple_task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00115">test_threadpool.c:115</a></div></div>
<div class="ttc" id="structsimple__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">simple_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00114">test_threadpool.c:114</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a32d310c35c655ac4a9ce3815aed53e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a32d310c35c655ac4a9ce3815aed53e">&#9670;&nbsp;</a></span>test_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a>* test_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00053">53</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00199">ast_cond_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00184">ast_mutex_init</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00288">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;{</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*tld));</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;   <span class="keywordflow">if</span> (!tld) {</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;   }</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   <span class="keywordflow">return</span> tld;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;}</div><div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a772da13134d0192ccc674e3ab839f908"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a772da13134d0192ccc674e3ab839f908">&#9670;&nbsp;</a></span>test_emptied()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_emptied </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00089">89</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00905">ast_threadpool_listener_get_user_data()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00047">test_listener_data::empty_notice</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>.</p>
<div class="fragment"><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;{</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a>(listener);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;   tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1571ddcde71c7f7105e616e349f6fdd4">empty_notice</a> = 1;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;}</div><div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="threadpool_8h_html_aa9bee831e887eb53e72a7e161d5c19de"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a></div><div class="ttdeci">void * ast_threadpool_listener_get_user_data(const struct ast_threadpool_listener *listener)</div><div class="ttdoc">Get the threadpool listener&amp;#39;s user data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00905">threadpool.c:905</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1571ddcde71c7f7105e616e349f6fdd4"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1571ddcde71c7f7105e616e349f6fdd4">test_listener_data::empty_notice</a></div><div class="ttdeci">int empty_notice</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00047">test_threadpool.c:47</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fe44572b360b3afab4bf8f7df38db77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fe44572b360b3afab4bf8f7df38db77">&#9670;&nbsp;</a></span>test_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_shutdown </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00098">98</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00200">ast_cond_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00186">ast_mutex_destroy</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00905">ast_threadpool_listener_get_user_data()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>.</p>
<div class="fragment"><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;{</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a>(listener);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div><div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="threadpool_8h_html_aa9bee831e887eb53e72a7e161d5c19de"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a></div><div class="ttdeci">void * ast_threadpool_listener_get_user_data(const struct ast_threadpool_listener *listener)</div><div class="ttdoc">Get the threadpool listener&amp;#39;s user data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00905">threadpool.c:905</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aff1cc7ae18d9e83bb77be1392e20980d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff1cc7ae18d9e83bb77be1392e20980d">&#9670;&nbsp;</a></span>test_state_changed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_state_changed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>active_threads</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>idle_threads</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00064">64</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00905">ast_threadpool_listener_get_user_data()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00043">test_listener_data::num_active</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00044">test_listener_data::num_idle</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>.</p>
<div class="fragment"><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;{</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a>(listener);</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">num_active</a> = active_threads;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">num_idle</a> = idle_threads;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Thread state: %d active, %d idle\n&quot;</span>, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">num_active</a>, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">num_idle</a>);</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div><div class="ttc" id="structtest__listener__data_html_aba5708946c809ea7e18ce45b88a104be"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">test_listener_data::num_idle</a></div><div class="ttdeci">int num_idle</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00044">test_threadpool.c:44</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="structtest__listener__data_html_af15fb2b7bf74066c2d078cf41aff6e96"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">test_listener_data::num_active</a></div><div class="ttdeci">int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00043">test_threadpool.c:43</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="threadpool_8h_html_aa9bee831e887eb53e72a7e161d5c19de"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a></div><div class="ttdeci">void * ast_threadpool_listener_get_user_data(const struct ast_threadpool_listener *listener)</div><div class="ttdoc">Get the threadpool listener&amp;#39;s user data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00905">threadpool.c:905</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc27a40e3aabb446b5b4218bad5b4c36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc27a40e3aabb446b5b4218bad5b4c36">&#9670;&nbsp;</a></span>test_task_pushed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_task_pushed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d10/structast__threadpool.html">ast_threadpool</a> *&#160;</td>
          <td class="paramname"><em>pool</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>was_empty</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00077">77</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00201">ast_cond_signal</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00905">ast_threadpool_listener_get_user_data()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00046">test_listener_data::num_tasks</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00045">test_listener_data::task_pushed</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00048">test_listener_data::was_empty</a>.</p>
<div class="fragment"><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;{</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a>(listener);</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">task_pushed</a> = 1;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;   ++tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">num_tasks</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a37cdff51e63f885b3a82f34a6673bfbb">was_empty</a> = <a class="code" href="../../dd/d94/structtest__listener__data.html#a37cdff51e63f885b3a82f34a6673bfbb">was_empty</a>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div><div class="ttc" id="structtest__listener__data_html_acabb76141a8e1b125551bab4cc352cf3"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">test_listener_data::num_tasks</a></div><div class="ttdeci">int num_tasks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00046">test_threadpool.c:46</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="threadpool_8h_html_aa9bee831e887eb53e72a7e161d5c19de"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a></div><div class="ttdeci">void * ast_threadpool_listener_get_user_data(const struct ast_threadpool_listener *listener)</div><div class="ttdoc">Get the threadpool listener&amp;#39;s user data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00905">threadpool.c:905</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
<div class="ttc" id="structtest__listener__data_html_ab0af5a7a1af50fd64365483407adc126"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">test_listener_data::task_pushed</a></div><div class="ttdeci">int task_pushed</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00045">test_threadpool.c:45</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a37cdff51e63f885b3a82f34a6673bfbb"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a37cdff51e63f885b3a82f34a6673bfbb">test_listener_data::was_empty</a></div><div class="ttdeci">int was_empty</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00048">test_threadpool.c:48</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01801">1801</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/db9/test_8c_source.html#l00218">ast_test_unregister()</a>.</p>
<div class="fragment"><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;{</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_push);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_initial_threads);</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_thread_creation);</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_thread_destruction);</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_thread_timeout);</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_thread_timeout_thrash);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_one_task_one_thread);</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_one_thread_one_task);</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_one_thread_multiple_tasks);</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_auto_increment);</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_max_size);</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_reactivation);</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_task_distribution);</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_more_destruction);</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_serializer);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   <a class="code" href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a>(threadpool_serializer_dupe);</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;}</div><div class="ttc" id="test_8c_html_a6af70dd120f998296a3d32239998b5f1"><div class="ttname"><a href="../../d8/db9/test_8c.html#a6af70dd120f998296a3d32239998b5f1">ast_test_unregister</a></div><div class="ttdeci">int ast_test_unregister(ast_test_cb_t *cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00218">test.c:218</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b9223386e4ed61302f6209c58f2d79d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b9223386e4ed61302f6209c58f2d79d">&#9670;&nbsp;</a></span>wait_for_completion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> wait_for_completion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8e/structsimple__task__data.html">simple_task_data</a> *&#160;</td>
          <td class="paramname"><em>std</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00194">194</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00115">simple_task_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00114">simple_task_data::lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00113">simple_task_data::task_executed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00588">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;      .tv_sec = start.tv_sec + 5,</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   };</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keywordflow">while</span> (!std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">task_executed</a>) {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) == ETIMEDOUT) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      }</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <span class="keywordflow">if</span> (!std-&gt;<a class="code" href="../../d2/d8e/structsimple__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">task_executed</a>) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Task execution did not occur\n&quot;</span>);</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div><div class="ttc" id="structsimple__task__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#a1c7181c39f99ee801943a0d0aa9872b9">simple_task_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00115">test_threadpool.c:115</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structsimple__task__data_html_a7fd45e714f60260c225e3b0b5d46a6c1"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">simple_task_data::task_executed</a></div><div class="ttdeci">int task_executed</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00113">test_threadpool.c:113</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structsimple__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d2/d8e/structsimple__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">simple_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00114">test_threadpool.c:114</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a459011e0b0c6974685a4cd8365361771"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a459011e0b0c6974685a4cd8365361771">&#9670;&nbsp;</a></span>wait_for_complex_completion()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> wait_for_complex_completion </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *&#160;</td>
          <td class="paramname"><em>ctd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01393">1393</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01303">complex_task_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01305">complex_task_data::notify_cond</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01301">complex_task_data::task_executed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01415">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;{</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;      .tv_sec = start.tv_sec + 5,</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   };</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;   <span class="keywordflow">while</span> (!ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">task_executed</a>) {</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">notify_cond</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) == ETIMEDOUT) {</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;      }</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   }</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   <span class="keywordflow">if</span> (!ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">task_executed</a>) {</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   }</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_a7fd45e714f60260c225e3b0b5d46a6c1"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#a7fd45e714f60260c225e3b0b5d46a6c1">complex_task_data::task_executed</a></div><div class="ttdeci">int task_executed</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01301">test_threadpool.c:1301</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_af67260723c60ba8198f79fd4d6f45f7d"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">complex_task_data::notify_cond</a></div><div class="ttdeci">ast_cond_t notify_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01305">test_threadpool.c:1305</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">complex_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01303">test_threadpool.c:1303</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a65aca16da1f3fc4287e22c30891d9ef3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a65aca16da1f3fc4287e22c30891d9ef3">&#9670;&nbsp;</a></span>wait_for_complex_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int wait_for_complex_start </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d49/structcomplex__task__data.html">complex_task_data</a> *&#160;</td>
          <td class="paramname"><em>ctd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01357">1357</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01303">complex_task_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01305">complex_task_data::notify_cond</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01300">complex_task_data::task_started</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01630">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;{</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      .tv_sec = start.tv_sec + 5,</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   };</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keywordflow">while</span> (!ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">task_started</a>) {</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">notify_cond</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) == ETIMEDOUT) {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;   }</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <span class="keywordflow">return</span> ctd-&gt;<a class="code" href="../../d4/d49/structcomplex__task__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">task_started</a>;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_af67260723c60ba8198f79fd4d6f45f7d"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#af67260723c60ba8198f79fd4d6f45f7d">complex_task_data::notify_cond</a></div><div class="ttdeci">ast_cond_t notify_cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01305">test_threadpool.c:1305</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_a34eeab68fcb108d9d173cc7c79a02c5d"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#a34eeab68fcb108d9d173cc7c79a02c5d">complex_task_data::task_started</a></div><div class="ttdeci">int task_started</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01300">test_threadpool.c:1300</a></div></div>
<div class="ttc" id="structcomplex__task__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../d4/d49/structcomplex__task__data.html#adf04f66344e3fb0a6f6a69bf39d19902">complex_task_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l01303">test_threadpool.c:1303</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae725033b3f1e53b3adbccda5c1e4d584"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae725033b3f1e53b3adbccda5c1e4d584">&#9670;&nbsp;</a></span>wait_for_empty_notice()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> wait_for_empty_notice </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *&#160;</td>
          <td class="paramname"><em>tld</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00217">217</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00047">test_listener_data::empty_notice</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00679">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      .tv_sec = start.tv_sec + 5,</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   };</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <span class="keywordflow">while</span> (!tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1571ddcde71c7f7105e616e349f6fdd4">empty_notice</a>) {</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) == ETIMEDOUT) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      }</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <span class="keywordflow">if</span> (!tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1571ddcde71c7f7105e616e349f6fdd4">empty_notice</a>) {</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Test listener not notified that threadpool is empty\n&quot;</span>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1571ddcde71c7f7105e616e349f6fdd4"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1571ddcde71c7f7105e616e349f6fdd4">test_listener_data::empty_notice</a></div><div class="ttdeci">int empty_notice</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00047">test_threadpool.c:47</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e927304cce64b1828fd32252ef97b0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e927304cce64b1828fd32252ef97b0a">&#9670;&nbsp;</a></span>wait_for_task_pushed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void wait_for_task_pushed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d12/structast__threadpool__listener.html">ast_threadpool_listener</a> *&#160;</td>
          <td class="paramname"><em>listener</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00177">177</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d1/dc7/threadpool_8c_source.html#l00905">ast_threadpool_listener_get_user_data()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00045">test_listener_data::task_pushed</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00288">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;{</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *tld = <a class="code" href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a>(listener);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;      .tv_sec = start.tv_sec + 5,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   };</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="keywordflow">while</span> (!tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">task_pushed</a>) {</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) == ETIMEDOUT) {</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;      }</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   }</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="structtest__listener__data_html"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html">test_listener_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00042">test_threadpool.c:42</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="threadpool_8h_html_aa9bee831e887eb53e72a7e161d5c19de"><div class="ttname"><a href="../../d3/d40/threadpool_8h.html#aa9bee831e887eb53e72a7e161d5c19de">ast_threadpool_listener_get_user_data</a></div><div class="ttdeci">void * ast_threadpool_listener_get_user_data(const struct ast_threadpool_listener *listener)</div><div class="ttdoc">Get the threadpool listener&amp;#39;s user data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc7/threadpool_8c_source.html#l00905">threadpool.c:905</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="structtest__listener__data_html_ab0af5a7a1af50fd64365483407adc126"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#ab0af5a7a1af50fd64365483407adc126">test_listener_data::task_pushed</a></div><div class="ttdeci">int task_pushed</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00045">test_threadpool.c:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc220e2e2cc811c2c10a59e35081244a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc220e2e2cc811c2c10a59e35081244a">&#9670;&nbsp;</a></span>wait_until_thread_state()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> wait_until_thread_state </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *&#160;</td>
          <td class="paramname"><em>tld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_idle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">151</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00043">test_listener_data::num_active</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00044">test_listener_data::num_idle</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00587">SCOPED_MUTEX</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00350">AST_TEST_DEFINE()</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00954">wait_until_thread_state_task_pushed()</a>.</p>
<div class="fragment"><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      .tv_sec = start.tv_sec + 5,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      .tv_nsec = start.tv_usec * 1000</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   };</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <span class="keywordflow">while</span> (!(tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">num_active</a> == num_active &amp;&amp; tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">num_idle</a> == num_idle)) {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;end) == ETIMEDOUT) {</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   }</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <span class="keywordflow">if</span> (tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">num_active</a> != num_active &amp;&amp; tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">num_idle</a> != num_idle) {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Number of active threads and idle threads not what was expected.\n&quot;</span>);</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Expected %d active threads but got %d\n&quot;</span>, num_active, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">num_active</a>);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Expected %d idle threads but got %d\n&quot;</span>, num_idle, tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">num_idle</a>);</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="ttc" id="structtest__listener__data_html_aba5708946c809ea7e18ce45b88a104be"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#aba5708946c809ea7e18ce45b88a104be">test_listener_data::num_idle</a></div><div class="ttdeci">int num_idle</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00044">test_threadpool.c:44</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="structtest__listener__data_html_af15fb2b7bf74066c2d078cf41aff6e96"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#af15fb2b7bf74066c2d078cf41aff6e96">test_listener_data::num_active</a></div><div class="ttdeci">int num_active</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00043">test_threadpool.c:43</a></div></div>
<div class="ttc" id="lock_8h_html_ab13590ad27fac3b9c7c7b792c603c9b3"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab13590ad27fac3b9c7c7b792c603c9b3">SCOPED_MUTEX</a></div><div class="ttdeci">#define SCOPED_MUTEX(varname, lock)</div><div class="ttdoc">scoped lock specialization for mutexes </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00587">lock.h:587</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9267dd7c8b5470603a248626777cf98b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9267dd7c8b5470603a248626777cf98b">&#9670;&nbsp;</a></span>wait_until_thread_state_task_pushed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> wait_until_thread_state_task_pushed </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d9/d79/structast__test.html">ast_test</a> *&#160;</td>
          <td class="paramname"><em>test</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d94/structtest__listener__data.html">test_listener_data</a> *&#160;</td>
          <td class="paramname"><em>tld</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_active</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_idle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>num_tasks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00954">954</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00204">ast_cond_timedwait</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00129">ast_test_status_update</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00050">test_listener_data::cond</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00049">test_listener_data::lock</a>, <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00046">test_listener_data::num_tasks</a>, and <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00151">wait_until_thread_state()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00989">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;{</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a> res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <span class="keyword">struct </span>timeval start;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   <span class="keyword">struct </span>timespec <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   res = <a class="code" href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a>(test, tld, num_active, num_idle);</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>) {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   }</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>.tv_sec = start.tv_sec + 5;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>.tv_nsec = start.tv_usec * 1000;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <span class="keywordflow">while</span> (tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">num_tasks</a> != num_tasks) {</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>, &amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>, &amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>) == ETIMEDOUT) {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <span class="keywordflow">if</span> (tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">num_tasks</a> != num_tasks) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Number of tasks pushed %d does not match expected %d\n&quot;</span>,</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;            tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">num_tasks</a>, num_tasks);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      res = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   }</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;tld-&gt;<a class="code" href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;}</div><div class="ttc" id="structtest__listener__data_html_acabb76141a8e1b125551bab4cc352cf3"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#acabb76141a8e1b125551bab4cc352cf3">test_listener_data::num_tasks</a></div><div class="ttdeci">int num_tasks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00046">test_threadpool.c:46</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="structtest__listener__data_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#a1c7181c39f99ee801943a0d0aa9872b9">test_listener_data::cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00050">test_threadpool.c:50</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="structtest__listener__data_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../dd/d94/structtest__listener__data.html#adf04f66344e3fb0a6f6a69bf39d19902">test_listener_data::lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00049">test_threadpool.c:49</a></div></div>
<div class="ttc" id="test__threadpool_8c_html_abc220e2e2cc811c2c10a59e35081244a"><div class="ttname"><a href="../../de/dec/test__threadpool_8c.html#abc220e2e2cc811c2c10a59e35081244a">wait_until_thread_state</a></div><div class="ttdeci">static enum ast_test_result_state wait_until_thread_state(struct ast_test *test, struct test_listener_data *tld, int num_active, int num_idle)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dec/test__threadpool_8c_source.html#l00151">test_threadpool.c:151</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044">ast_test_result_state</a></div><div class="ttdeci">ast_test_result_state</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00200">test.h:200</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;threadpool <a class="el" href="../../d8/d89/structtest.html">test</a> module&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01843">1843</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l01843">1843</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

</div>
</div>
<a id="a555eea08e0e87da38c116bd77648596b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a555eea08e0e87da38c116bd77648596b">&#9670;&nbsp;</a></span>test_callbacks</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../df/d64/structast__threadpool__listener__callbacks.html">ast_threadpool_listener_callbacks</a> test_callbacks</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/dec/test__threadpool_8c_source.html#l00105">105</a> of file <a class="el" href="../../de/dec/test__threadpool_8c_source.html">test_threadpool.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:59 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
