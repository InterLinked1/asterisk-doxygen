<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_stasis_state.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_stasis_state.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/dd6/conversions_8h_source.html">asterisk/conversions.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d96/stasis__state_8h_source.html">asterisk/stasis_state.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_stasis_state.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/df5/test__stasis__state_8c__incl.png" border="0" usemap="#test__stasis__state_8c" alt=""/></div>
<map name="test__stasis__state_8c" id="test__stasis__state_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="417,379,501,405"/>
<area shape="rect" id="node22" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1500,379,1635,405"/>
<area shape="rect" id="node32" href="../../da/dd6/conversions_8h.html" title="Conversion utility functions. " alt="" coords="1424,80,1588,107"/>
<area shape="rect" id="node33" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1751,155,1887,181"/>
<area shape="rect" id="node39" href="../../d1/d96/stasis__state_8h.html" title="Stasis State API. " alt="" coords="1851,80,2017,107"/>
<area shape="rect" id="node44" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="1329,155,1443,181"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="903,677,1058,704"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="885,453,1023,480"/>
<area shape="rect" id="node21" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="5,453,140,480"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="907,752,1054,779"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1212,603,1355,629"/>
<area shape="rect" id="node23" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1671,528,1784,555"/>
<area shape="rect" id="node26" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1977,677,2123,704"/>
<area shape="rect" id="node31" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1488,453,1639,480"/>
<area shape="rect" id="node25" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1899,603,1961,629"/>
<area shape="rect" id="node29" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="1616,603,1767,629"/>
<area shape="rect" id="node30" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="2088,603,2215,629"/>
<area shape="rect" id="node34" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1818,229,1933,256"/>
<area shape="rect" id="node35" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="2225,304,2363,331"/>
<area shape="rect" id="node36" href="../../d5/deb/localtime_8h.html" title="Custom localtime functions for multiple timezones. " alt="" coords="1714,304,1861,331"/>
<area shape="rect" id="node37" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2225,379,2382,405"/>
<area shape="rect" id="node38" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1407,304,1538,331"/>
<area shape="rect" id="node40" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1951,155,2077,181"/>
<area shape="rect" id="node41" href="../../d4/d05/json_8h.html" title="Asterisk JSON abstraction layer. " alt="" coords="1957,229,2071,256"/>
<area shape="rect" id="node42" href="../../db/d45/manager_8h.html" title="The AMI &#45; Asterisk Manager Interface &#45; is a TCP protocol created to manage Asterisk with third&#45;party ..." alt="" coords="2244,229,2389,256"/>
<area shape="rect" id="node43" href="../../dd/d20/event_8h.html" title="asterisk/event.h" alt="" coords="2096,229,2220,256"/>
<area shape="rect" id="node45" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1334,229,1435,256"/>
</map>
</div>
</div>
<p><a href="../../de/d6b/test__stasis__state_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/dee/structfoo__data.html">foo_data</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a2cc1eed188871ba866b7a96d39357193"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a2cc1eed188871ba866b7a96d39357193">MANAGER_TOPIC</a>&#160;&#160;&#160;&quot;foo&quot;</td></tr>
<tr class="separator:a2cc1eed188871ba866b7a96d39357193"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7db2ac7b82dcf987b9832f15f771e2b4"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>&#160;&#160;&#160;&quot;/stasis/core/<a class="el" href="../../d4/d88/structstate.html">state</a>/&quot;</td></tr>
<tr class="separator:a7db2ac7b82dcf987b9832f15f771e2b4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c3aa778b25387dabaabf18f3cd4c5b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a>&#160;&#160;&#160;500</td></tr>
<tr class="separator:a6c3aa778b25387dabaabf18f3cd4c5b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77910384c0d6856aaeae6f4629b2a8ec"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a77910384c0d6856aaeae6f4629b2a8ec">AST_TEST_DEFINE</a> (implicit_publish)</td></tr>
<tr class="separator:a77910384c0d6856aaeae6f4629b2a8ec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22b4ba3e8f45dce72b0463e88cf4eb01"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a22b4ba3e8f45dce72b0463e88cf4eb01">AST_TEST_DEFINE</a> (explicit_publish)</td></tr>
<tr class="separator:a22b4ba3e8f45dce72b0463e88cf4eb01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad75d1481d69b3fcbef50382999aa7bdd"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ad75d1481d69b3fcbef50382999aa7bdd">AST_VECTOR</a> (<a class="el" href="../../df/dab/structsubscriptions.html">subscriptions</a>, struct <a class="el" href="../../d7/d67/structstasis__state__subscriber.html">stasis_state_subscriber</a> *)</td></tr>
<tr class="separator:ad75d1481d69b3fcbef50382999aa7bdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34071213e3aa5e8767bf6197fbd9953b"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a34071213e3aa5e8767bf6197fbd9953b">AST_VECTOR</a> (<a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a>, struct <a class="el" href="../../df/dcc/structstasis__state__publisher.html">stasis_state_publisher</a> *)</td></tr>
<tr class="separator:a34071213e3aa5e8767bf6197fbd9953b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81a8315f5172ab5254166a12612a32e1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a81a8315f5172ab5254166a12612a32e1">create_foo_type_message</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a81a8315f5172ab5254166a12612a32e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e57b575ecb56d3ccd97c77f52530a2e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a8e57b575ecb56d3ccd97c77f52530a2e">explicit_publish_cb</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg, void *user_data)</td></tr>
<tr class="separator:a8e57b575ecb56d3ccd97c77f52530a2e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae344c77cd5a06c7eabaea660b37ab1a0"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type</a> (void)</td></tr>
<tr class="separator:ae344c77cd5a06c7eabaea660b37ab1a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77e17f0694f330edbb200bad71dae0db"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a77e17f0694f330edbb200bad71dae0db">foo_type_cb</a> (void *data, struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="el" href="../../d8/d9e/structmessage.html">message</a>)</td></tr>
<tr class="separator:a77e17f0694f330edbb200bad71dae0db"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05f46fa7c9922307a63899959997f747"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a05f46fa7c9922307a63899959997f747">handle_validate</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, struct <a class="el" href="../../d7/d67/structstasis__state__subscriber.html">stasis_state_subscriber</a> *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>)</td></tr>
<tr class="separator:a05f46fa7c9922307a63899959997f747"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5311f346e3f2d7b19a4e4053a76a7966"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a5311f346e3f2d7b19a4e4053a76a7966">implicit_publish_cb</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg, void *user_data)</td></tr>
<tr class="separator:a5311f346e3f2d7b19a4e4053a76a7966"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03d41f70e6c91defcf6a3a6cc3fc419"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a> (struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *manager, <a class="el" href="../../d1/d96/stasis__state_8h.html#a38a9925f7539e3a27a8dcab3c6946bde">on_stasis_state</a> cb, void *user_data)</td></tr>
<tr class="separator:af03d41f70e6c91defcf6a3a6cc3fc419"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a826dd01e9e988a4063d0b19b5835e513"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a826dd01e9e988a4063d0b19b5835e513">publishers_create</a> (struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *manager, struct <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a> *pubs)</td></tr>
<tr class="separator:a826dd01e9e988a4063d0b19b5835e513"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41024eaf57b4d549960970e71d82542f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a41024eaf57b4d549960970e71d82542f">publishers_destroy</a> (struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *manager, struct <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a> *pubs)</td></tr>
<tr class="separator:a41024eaf57b4d549960970e71d82542f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2dee08c4572b2210e3dee50e24099ab"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ab2dee08c4572b2210e3dee50e24099ab">STASIS_MESSAGE_TYPE_DEFN</a> (<a class="el" href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type</a>)</td></tr>
<tr class="separator:ab2dee08c4572b2210e3dee50e24099ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6fdecb3683f39cb84441615e5b26a9b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#af6fdecb3683f39cb84441615e5b26a9b">subscriptions_create</a> (struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *manager, struct <a class="el" href="../../df/dab/structsubscriptions.html">subscriptions</a> *subs)</td></tr>
<tr class="separator:af6fdecb3683f39cb84441615e5b26a9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad8d2c9b2bf8b880440666e1c2333e2a6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ad8d2c9b2bf8b880440666e1c2333e2a6">subscriptions_destroy</a> (struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *manager, struct <a class="el" href="../../df/dab/structsubscriptions.html">subscriptions</a> *subs)</td></tr>
<tr class="separator:ad8d2c9b2bf8b880440666e1c2333e2a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af6954aed60c2b595ad03954fe9a839b6"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#af6954aed60c2b595ad03954fe9a839b6">validate_data</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>, struct <a class="el" href="../../d5/dee/structfoo__data.html">foo_data</a> *foo)</td></tr>
<tr class="separator:af6954aed60c2b595ad03954fe9a839b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Stasis <a class="el" href="../../d4/d88/structstate.html">state</a> testing&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0230a9dab4dd3ca682d1fbbef1b9f08e"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a></td></tr>
<tr class="separator:a0230a9dab4dd3ca682d1fbbef1b9f08e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d286e1f756a9483a2a2a6f36d5f9d8c"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d5/d92/structstasis__state__observer.html">stasis_state_observer</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a7d286e1f756a9483a2a2a6f36d5f9d8c">foo_observer</a></td></tr>
<tr class="separator:a7d286e1f756a9483a2a2a6f36d5f9d8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9b16608d553c3fa63b6e5218b32205e"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a></td></tr>
<tr class="separator:ac9b16608d553c3fa63b6e5218b32205e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f0dce8a44c15bed19a04f53ad002b8f"><td class="memItemLeft" align="right" valign="top">static size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a></td></tr>
<tr class="separator:a5f0dce8a44c15bed19a04f53ad002b8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a2cc1eed188871ba866b7a96d39357193"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2cc1eed188871ba866b7a96d39357193">&#9670;&nbsp;</a></span>MANAGER_TOPIC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MANAGER_TOPIC&#160;&#160;&#160;&quot;foo&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00036">36</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00356">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a7db2ac7b82dcf987b9832f15f771e2b4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7db2ac7b82dcf987b9832f15f771e2b4">&#9670;&nbsp;</a></span>test_category</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define test_category&#160;&#160;&#160;&quot;/stasis/core/<a class="el" href="../../d4/d88/structstate.html">state</a>/&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00032">32</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00356">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a6c3aa778b25387dabaabf18f3cd4c5b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c3aa778b25387dabaabf18f3cd4c5b0">&#9670;&nbsp;</a></span>TOPIC_COUNT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TOPIC_COUNT&#160;&#160;&#160;500</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00034">34</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00205">publishers_create()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00179">publishers_destroy()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00131">subscriptions_create()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00466">466</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00466">466</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00466">466</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

</div>
</div>
<a id="a77910384c0d6856aaeae6f4629b2a8ec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77910384c0d6856aaeae6f4629b2a8ec">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">implicit_publish&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00356">356</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00272">implicit_publish_cb()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00036">MANAGER_TOPIC</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00328">publish()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00179">publishers_destroy()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00324">stasis_state_manager_create()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00131">subscriptions_create()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00113">subscriptions_destroy()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00032">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *, manager, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dab/structsubscriptions.html">subscriptions</a> subs;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="keywordtype">int</span> rc = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test implicit publishing of stasis state&quot;</span>;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary;</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   manager = <a class="code" href="../../d1/d96/stasis__state_8h.html#a1e620ce0dace97fda1d99361dda73c9b">stasis_state_manager_create</a>(<a class="code" href="../../de/d6b/test__stasis__state_8c.html#a2cc1eed188871ba866b7a96d39357193">MANAGER_TOPIC</a>);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, manager != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../de/d6b/test__stasis__state_8c.html#af6fdecb3683f39cb84441615e5b26a9b">subscriptions_create</a>(manager, &amp;subs));</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   ast_test_validate_cleanup(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a>(manager, <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5311f346e3f2d7b19a4e4053a76a7966">implicit_publish_cb</a>, manager),</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d6b/test__stasis__state_8c.html#ad8d2c9b2bf8b880440666e1c2333e2a6">subscriptions_destroy</a>(manager, &amp;subs) || <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a41024eaf57b4d549960970e71d82542f">publishers_destroy</a>(manager, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   }</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">    * State subscriptions add a ref a state. The state in turn adds a ref</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">    * to the manager. So if more than one ref is held on the manager before</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">    * exiting, there is a ref leak some place.</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(manager, 0) != 1) {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Memory leak - Too many references held on manager\n&quot;</span>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   }</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;}</div><div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_af03d41f70e6c91defcf6a3a6cc3fc419"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a></div><div class="ttdeci">static int publish(struct stasis_state_manager *manager, on_stasis_state cb, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00328">test_stasis_state.c:328</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_af6fdecb3683f39cb84441615e5b26a9b"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#af6fdecb3683f39cb84441615e5b26a9b">subscriptions_create</a></div><div class="ttdeci">static int subscriptions_create(struct stasis_state_manager *manager, struct subscriptions *subs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00131">test_stasis_state.c:131</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="stasis__state_8h_html_a1e620ce0dace97fda1d99361dda73c9b"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#a1e620ce0dace97fda1d99361dda73c9b">stasis_state_manager_create</a></div><div class="ttdeci">struct stasis_state_manager * stasis_state_manager_create(const char *topic_name)</div><div class="ttdoc">Create a stasis state manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00324">stasis_state.c:324</a></div></div>
<div class="ttc" id="structsubscriptions_html"><div class="ttname"><a href="../../df/dab/structsubscriptions.html">subscriptions</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00534">res_pjsip_pubsub.c:534</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_ad8d2c9b2bf8b880440666e1c2333e2a6"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ad8d2c9b2bf8b880440666e1c2333e2a6">subscriptions_destroy</a></div><div class="ttdeci">static int subscriptions_destroy(struct stasis_state_manager *manager, struct subscriptions *subs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00113">test_stasis_state.c:113</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a41024eaf57b4d549960970e71d82542f"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a41024eaf57b4d549960970e71d82542f">publishers_destroy</a></div><div class="ttdeci">static int publishers_destroy(struct stasis_state_manager *manager, struct publishers *pubs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00179">test_stasis_state.c:179</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__state__manager_html"><div class="ttname"><a href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00079">stasis_state.c:79</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a5311f346e3f2d7b19a4e4053a76a7966"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a5311f346e3f2d7b19a4e4053a76a7966">implicit_publish_cb</a></div><div class="ttdeci">static int implicit_publish_cb(const char *id, struct stasis_message *msg, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00272">test_stasis_state.c:272</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a2cc1eed188871ba866b7a96d39357193"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a2cc1eed188871ba866b7a96d39357193">MANAGER_TOPIC</a></div><div class="ttdeci">#define MANAGER_TOPIC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00036">test_stasis_state.c:36</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00032">test_stasis_state.c:32</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a22b4ba3e8f45dce72b0463e88cf4eb01"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22b4ba3e8f45dce72b0463e88cf4eb01">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">explicit_publish&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00399">399</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00203">AST_TEST_FAIL</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">cleanup()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00293">explicit_publish_cb()</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00036">MANAGER_TOPIC</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00328">publish()</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00057">publishers</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00205">publishers_create()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00179">publishers_destroy()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00324">stasis_state_manager_create()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00131">subscriptions_create()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00113">subscriptions_destroy()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00032">test_category</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, and <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;{</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *, manager, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dab/structsubscriptions.html">subscriptions</a> subs;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a> pubs;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordtype">int</span> rc = <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a>;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test explicit publishing of stasis state&quot;</span>;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description = <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   }</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   manager = <a class="code" href="../../d1/d96/stasis__state_8h.html#a1e620ce0dace97fda1d99361dda73c9b">stasis_state_manager_create</a>(<a class="code" href="../../de/d6b/test__stasis__state_8c.html#a2cc1eed188871ba866b7a96d39357193">MANAGER_TOPIC</a>);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, manager != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../de/d6b/test__stasis__state_8c.html#af6fdecb3683f39cb84441615e5b26a9b">subscriptions_create</a>(manager, &amp;subs));</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;   ast_test_validate_cleanup(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../de/d6b/test__stasis__state_8c.html#a826dd01e9e988a4063d0b19b5835e513">publishers_create</a>(manager, &amp;pubs), rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   ast_test_validate_cleanup(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a>(manager, <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a8e57b575ecb56d3ccd97c77f52530a2e">explicit_publish_cb</a>, &amp;pubs),</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;      rc, <a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<a class="code" href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a>:</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d6b/test__stasis__state_8c.html#ad8d2c9b2bf8b880440666e1c2333e2a6">subscriptions_destroy</a>(manager, &amp;subs) || <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a41024eaf57b4d549960970e71d82542f">publishers_destroy</a>(manager, &amp;pubs)) {</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   }</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">    * State subscriptions add a ref a state. The state in turn adds a ref</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">    * to the manager. So if more than one ref is held on the manager before</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">    * exiting, there is a ref leak some place.</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(manager, 0) != 1) {</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Memory leak - Too many references held on manager\n&quot;</span>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a>;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;   }</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <span class="keywordflow">return</span> rc;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;}</div><div class="ttc" id="res__pjsip__exten__state_8c_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a></div><div class="ttdeci">static struct ao2_container * publishers</div><div class="ttdoc">Container of active outbound extension state publishers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00057">res_pjsip_exten_state.c:57</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_af03d41f70e6c91defcf6a3a6cc3fc419"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#af03d41f70e6c91defcf6a3a6cc3fc419">publish</a></div><div class="ttdeci">static int publish(struct stasis_state_manager *manager, on_stasis_state cb, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00328">test_stasis_state.c:328</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_af6fdecb3683f39cb84441615e5b26a9b"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#af6fdecb3683f39cb84441615e5b26a9b">subscriptions_create</a></div><div class="ttdeci">static int subscriptions_create(struct stasis_state_manager *manager, struct subscriptions *subs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00131">test_stasis_state.c:131</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a826dd01e9e988a4063d0b19b5835e513"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a826dd01e9e988a4063d0b19b5835e513">publishers_create</a></div><div class="ttdeci">static int publishers_create(struct stasis_state_manager *manager, struct publishers *pubs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00205">test_stasis_state.c:205</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="stasis__state_8h_html_a1e620ce0dace97fda1d99361dda73c9b"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#a1e620ce0dace97fda1d99361dda73c9b">stasis_state_manager_create</a></div><div class="ttdeci">struct stasis_state_manager * stasis_state_manager_create(const char *topic_name)</div><div class="ttdoc">Create a stasis state manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00324">stasis_state.c:324</a></div></div>
<div class="ttc" id="structsubscriptions_html"><div class="ttname"><a href="../../df/dab/structsubscriptions.html">subscriptions</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l00534">res_pjsip_pubsub.c:534</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_ad8d2c9b2bf8b880440666e1c2333e2a6"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ad8d2c9b2bf8b880440666e1c2333e2a6">subscriptions_destroy</a></div><div class="ttdeci">static int subscriptions_destroy(struct stasis_state_manager *manager, struct subscriptions *subs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00113">test_stasis_state.c:113</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a41024eaf57b4d549960970e71d82542f"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a41024eaf57b4d549960970e71d82542f">publishers_destroy</a></div><div class="ttdeci">static int publishers_destroy(struct stasis_state_manager *manager, struct publishers *pubs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00179">test_stasis_state.c:179</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structstasis__state__manager_html"><div class="ttname"><a href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00079">stasis_state.c:79</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a8e57b575ecb56d3ccd97c77f52530a2e"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a8e57b575ecb56d3ccd97c77f52530a2e">explicit_publish_cb</a></div><div class="ttdeci">static int explicit_publish_cb(const char *id, struct stasis_message *msg, void *user_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00293">test_stasis_state.c:293</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a2cc1eed188871ba866b7a96d39357193"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a2cc1eed188871ba866b7a96d39357193">MANAGER_TOPIC</a></div><div class="ttdeci">#define MANAGER_TOPIC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00036">test_stasis_state.c:36</a></div></div>
<div class="ttc" id="pbx__realtime_8c_html_a10b51e1931bd03dd172cbfb9d3d67efb"><div class="ttname"><a href="../../d2/d2c/pbx__realtime_8c.html#a10b51e1931bd03dd172cbfb9d3d67efb">cleanup</a></div><div class="ttdeci">static void * cleanup(void *unused)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d2c/pbx__realtime_8c_source.html#l00124">pbx_realtime.c:124</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a7db2ac7b82dcf987b9832f15f771e2b4"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a7db2ac7b82dcf987b9832f15f771e2b4">test_category</a></div><div class="ttdeci">#define test_category</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00032">test_stasis_state.c:32</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8a11a3a19eb4c9fd2ba654d95df1adb6">AST_TEST_FAIL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00203">test.h:203</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad75d1481d69b3fcbef50382999aa7bdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad75d1481d69b3fcbef50382999aa7bdd">&#9670;&nbsp;</a></span>AST_VECTOR() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_VECTOR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../df/dab/structsubscriptions.html">subscriptions</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d67/structstasis__state__subscriber.html">stasis_state_subscriber</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a34071213e3aa5e8767bf6197fbd9953b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34071213e3aa5e8767bf6197fbd9953b">&#9670;&nbsp;</a></span>AST_VECTOR() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_VECTOR </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/dcc/structstasis__state__publisher.html">stasis_state_publisher</a> *&#160;</td>
          <td class="paramname">&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a81a8315f5172ab5254166a12612a32e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81a8315f5172ab5254166a12612a32e1">&#9670;&nbsp;</a></span>create_foo_type_message()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a>* create_foo_type_message </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00246">246</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d1e/conversions_8c_source.html#l00119">ast_str_to_umax()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00045">foo_data::bar</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00140">stasis_message_create_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00293">explicit_publish_cb()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00272">implicit_publish_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;{</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dee/structfoo__data.html">foo_data</a> *foo;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   foo = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*foo), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keywordflow">if</span> (!foo) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to allocate foo data for &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/dd6/conversions_8h.html#a67521f6b0e263fa60fc078861f5cc825">ast_str_to_umax</a>(<span class="keywordtype">id</span>, &amp;foo-&gt;<a class="code" href="../../d5/dee/structfoo__data.html#a9784c6df82ee72ffe49210bff2499995">bar</a>)) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to convert the state&#39;s id &#39;%s&#39; to numeric\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(foo, -1);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   }</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a>(<a class="code" href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type</a>(), foo, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create stasis message for &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(foo, -1);</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordflow">return</span> msg;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;}</div><div class="ttc" id="conversions_8h_html_a67521f6b0e263fa60fc078861f5cc825"><div class="ttname"><a href="../../da/dd6/conversions_8h.html#a67521f6b0e263fa60fc078861f5cc825">ast_str_to_umax</a></div><div class="ttdeci">int ast_str_to_umax(const char *str, uintmax_t *res)</div><div class="ttdoc">Convert the given string to an unsigned max size integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/conversions_8c_source.html#l00119">conversions.c:119</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_ae344c77cd5a06c7eabaea660b37ab1a0"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type</a></div><div class="ttdeci">struct stasis_message_type * foo_type(void)</div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structfoo__data_html_a9784c6df82ee72ffe49210bff2499995"><div class="ttname"><a href="../../d5/dee/structfoo__data.html#a9784c6df82ee72ffe49210bff2499995">foo_data::bar</a></div><div class="ttdeci">size_t bar</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00045">test_stasis_state.c:45</a></div></div>
<div class="ttc" id="structfoo__data_html"><div class="ttname"><a href="../../d5/dee/structfoo__data.html">foo_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00044">test_stasis_state.c:44</a></div></div>
<div class="ttc" id="stasis_8h_html_a08010732dcea60e116e54fca0133d582"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a08010732dcea60e116e54fca0133d582">stasis_message_create_full</a></div><div class="ttdeci">struct stasis_message * stasis_message_create_full(struct stasis_message_type *type, void *data, const struct ast_eid *eid)</div><div class="ttdoc">Create a new message for an entity. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00140">stasis_message.c:140</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e57b575ecb56d3ccd97c77f52530a2e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e57b575ecb56d3ccd97c77f52530a2e">&#9670;&nbsp;</a></span>explicit_publish_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int explicit_publish_cb </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00293">293</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01032">CMP_STOP</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00246">create_foo_type_message()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00057">publishers</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00562">stasis_state_publish()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00552">stasis_state_publisher_id()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00063">validate_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00399">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;{</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="comment">/* For each state object create and publish new state data */</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a> *pubs = user_data;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dcc/structstasis__state__publisher.html">stasis_state_publisher</a> *pub = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dee/structfoo__data.html">foo_data</a> *foo = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d6b/test__stasis__state_8c.html#af6954aed60c2b595ad03954fe9a839b6">validate_data</a>(<span class="keywordtype">id</span>, foo)) {</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   }</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   msg = <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a81a8315f5172ab5254166a12612a32e1">create_foo_type_message</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(pubs); ++i) {</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;      <span class="keywordflow">if</span> (!strcmp(<a class="code" href="../../d1/d96/stasis__state_8h.html#acb3e1eb79879c114539587a240b455ab">stasis_state_publisher_id</a>(<a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(pubs, i)), <span class="keywordtype">id</span>)) {</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;         pub = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(pubs, i);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">if</span> (!pub) {</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to locate publisher for id &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   }</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <a class="code" href="../../d1/d96/stasis__state_8h.html#ae22f3fe7bbecf70b943d4b72ec9ffcea">stasis_state_publish</a>(pub, msg);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;}</div><div class="ttc" id="res__pjsip__exten__state_8c_html_adb838b688e98c705b8668af938b5f85a"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a></div><div class="ttdeci">static struct ao2_container * publishers</div><div class="ttdoc">Container of active outbound extension state publishers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00057">res_pjsip_exten_state.c:57</a></div></div>
<div class="ttc" id="structstasis__state__publisher_html"><div class="ttname"><a href="../../df/dcc/structstasis__state__publisher.html">stasis_state_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00519">stasis_state.c:519</a></div></div>
<div class="ttc" id="stasis__state_8h_html_acb3e1eb79879c114539587a240b455ab"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#acb3e1eb79879c114539587a240b455ab">stasis_state_publisher_id</a></div><div class="ttdeci">const char * stasis_state_publisher_id(const struct stasis_state_publisher *pub)</div><div class="ttdoc">Retrieve the publisher&amp;#39;s underlying state&amp;#39;s unique id. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00552">stasis_state.c:552</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_af6954aed60c2b595ad03954fe9a839b6"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#af6954aed60c2b595ad03954fe9a839b6">validate_data</a></div><div class="ttdeci">static int validate_data(const char *id, struct foo_data *foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00063">test_stasis_state.c:63</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a81a8315f5172ab5254166a12612a32e1"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a81a8315f5172ab5254166a12612a32e1">create_foo_type_message</a></div><div class="ttdeci">static struct stasis_message * create_foo_type_message(const char *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00246">test_stasis_state.c:246</a></div></div>
<div class="ttc" id="structfoo__data_html"><div class="ttname"><a href="../../d5/dee/structfoo__data.html">foo_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00044">test_stasis_state.c:44</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="stasis__state_8h_html_ae22f3fe7bbecf70b943d4b72ec9ffcea"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#ae22f3fe7bbecf70b943d4b72ec9ffcea">stasis_state_publish</a></div><div class="ttdeci">void stasis_state_publish(struct stasis_state_publisher *pub, struct stasis_message *msg)</div><div class="ttdoc">Publish to a managed state (topic) using a publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00562">stasis_state.c:562</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae344c77cd5a06c7eabaea660b37ab1a0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae344c77cd5a06c7eabaea660b37ab1a0">&#9670;&nbsp;</a></span>foo_type()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a>* foo_type </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00246">create_foo_type_message()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00454">load_module()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00444">unload_module()</a>.</p>

</div>
</div>
<a id="a77e17f0694f330edbb200bad71dae0db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a77e17f0694f330edbb200bad71dae0db">&#9670;&nbsp;</a></span>foo_type_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void foo_type_cb </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *&#160;</td>
          <td class="paramname"><em>sub</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>message</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00108">108</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00131">subscriptions_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;{</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;   <span class="comment">/* No op since we are not really testing stasis topic handling here */</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a05f46fa7c9922307a63899959997f747"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a05f46fa7c9922307a63899959997f747">&#9670;&nbsp;</a></span>handle_validate()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_validate </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d67/structstasis__state__subscriber.html">stasis_state_subscriber</a> *&#160;</td>
          <td class="paramname"><em>sub</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00096">96</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00497">stasis_state_subscriber_data()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00063">validate_data()</a>.</p>
<div class="fragment"><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;{</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dee/structfoo__data.html">foo_data</a> *foo = <a class="code" href="../../d1/d96/stasis__state_8h.html#a3effc7b9731f157205bb2b65c3a2f1b8">stasis_state_subscriber_data</a>(sub);</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;   <a class="code" href="../../de/d6b/test__stasis__state_8c.html#af6954aed60c2b595ad03954fe9a839b6">validate_data</a>(<span class="keywordtype">id</span>, foo);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(foo);</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div><div class="ttc" id="stasis__state_8h_html_a3effc7b9731f157205bb2b65c3a2f1b8"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#a3effc7b9731f157205bb2b65c3a2f1b8">stasis_state_subscriber_data</a></div><div class="ttdeci">void * stasis_state_subscriber_data(struct stasis_state_subscriber *sub)</div><div class="ttdoc">Retrieve the last known state stasis message payload for the subscriber. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00497">stasis_state.c:497</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_af6954aed60c2b595ad03954fe9a839b6"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#af6954aed60c2b595ad03954fe9a839b6">validate_data</a></div><div class="ttdeci">static int validate_data(const char *id, struct foo_data *foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00063">test_stasis_state.c:63</a></div></div>
<div class="ttc" id="structfoo__data_html"><div class="ttname"><a href="../../d5/dee/structfoo__data.html">foo_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00044">test_stasis_state.c:44</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5311f346e3f2d7b19a4e4053a76a7966"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5311f346e3f2d7b19a4e4053a76a7966">&#9670;&nbsp;</a></span>implicit_publish_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int implicit_publish_cb </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d7/d55/structstasis__message.html">stasis_message</a> *&#160;</td>
          <td class="paramname"><em>msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00272">272</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01032">CMP_STOP</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00246">create_foo_type_message()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message_data()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00638">stasis_state_publish_by_id()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00063">validate_data()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00356">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;{</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   <span class="comment">/* For each state object create and publish new state data */</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dee/structfoo__data.html">foo_data</a> *foo = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(msg);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d6b/test__stasis__state_8c.html#af6954aed60c2b595ad03954fe9a839b6">validate_data</a>(<span class="keywordtype">id</span>, foo)) {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   }</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;   msg = <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a81a8315f5172ab5254166a12612a32e1">create_foo_type_message</a>(<span class="keywordtype">id</span>);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <span class="comment">/* Now publish it on the managed state object */</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <a class="code" href="../../d1/d96/stasis__state_8h.html#a2dbc6c2a3b37e5ab135e410681a23142">stasis_state_publish_by_id</a>(user_data, <span class="keywordtype">id</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, msg);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(msg, -1);</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_af6954aed60c2b595ad03954fe9a839b6"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#af6954aed60c2b595ad03954fe9a839b6">validate_data</a></div><div class="ttdeci">static int validate_data(const char *id, struct foo_data *foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00063">test_stasis_state.c:63</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis__state_8h_html_a2dbc6c2a3b37e5ab135e410681a23142"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#a2dbc6c2a3b37e5ab135e410681a23142">stasis_state_publish_by_id</a></div><div class="ttdeci">void stasis_state_publish_by_id(struct stasis_state_manager *manager, const char *id, const struct ast_eid *eid, struct stasis_message *msg)</div><div class="ttdoc">Publish to a managed named by id topic, and add an implicit subscriber. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00638">stasis_state.c:638</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a81a8315f5172ab5254166a12612a32e1"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a81a8315f5172ab5254166a12612a32e1">create_foo_type_message</a></div><div class="ttdeci">static struct stasis_message * create_foo_type_message(const char *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00246">test_stasis_state.c:246</a></div></div>
<div class="ttc" id="structfoo__data_html"><div class="ttname"><a href="../../d5/dee/structfoo__data.html">foo_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00044">test_stasis_state.c:44</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00454">454</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type()</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l01501">STASIS_MESSAGE_TYPE_INIT</a>.</p>
<div class="fragment"><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;{</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type</a>) != 0) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(implicit_publish);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(explicit_publish);</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_ae344c77cd5a06c7eabaea660b37ab1a0"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type</a></div><div class="ttdeci">struct stasis_message_type * foo_type(void)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af03d41f70e6c91defcf6a3a6cc3fc419"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af03d41f70e6c91defcf6a3a6cc3fc419">&#9670;&nbsp;</a></span>publish()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int publish </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *&#160;</td>
          <td class="paramname"><em>manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/d96/stasis__state_8h.html#a38a9925f7539e3a27a8dcab3c6946bde">on_stasis_state</a>&#160;</td>
          <td class="paramname"><em>cb</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>user_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00328">328</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00061">expect_null</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00058">running_total</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00740">stasis_state_callback_all()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00055">sum_total</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00356">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;{</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;   <span class="comment">/* First time there is no state data */</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a> = 1;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a> = 0;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <a class="code" href="../../d1/d96/stasis__state_8h.html#a248667e66debb56942035089d06a5421">stasis_state_callback_all</a>(manager, cb, user_data);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a> != <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a>) {</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed manager_callback (1): running=%zu, sum=%zu\n&quot;</span>,</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a>, <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;   <span class="comment">/* Second time check valid state data exists */</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a> = <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a> = 0;</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <a class="code" href="../../d1/d96/stasis__state_8h.html#a248667e66debb56942035089d06a5421">stasis_state_callback_all</a>(manager, cb, user_data);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a> != <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a>) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed manager_callback (2): running=%zu, sum=%zu\n&quot;</span>,</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;            <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a>, <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;}</div><div class="ttc" id="test__stasis__state_8c_html_ac9b16608d553c3fa63b6e5218b32205e"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a></div><div class="ttdeci">static size_t running_total</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00058">test_stasis_state.c:58</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="stasis__state_8h_html_a248667e66debb56942035089d06a5421"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#a248667e66debb56942035089d06a5421">stasis_state_callback_all</a></div><div class="ttdeci">void stasis_state_callback_all(struct stasis_state_manager *manager, on_stasis_state handler, void *data)</div><div class="ttdoc">For each managed state call the given handler. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00740">stasis_state.c:740</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a0230a9dab4dd3ca682d1fbbef1b9f08e"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a></div><div class="ttdeci">static int expect_null</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00061">test_stasis_state.c:61</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a5f0dce8a44c15bed19a04f53ad002b8f"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a></div><div class="ttdeci">static size_t sum_total</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00055">test_stasis_state.c:55</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a826dd01e9e988a4063d0b19b5835e513"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a826dd01e9e988a4063d0b19b5835e513">&#9670;&nbsp;</a></span>publishers_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int publishers_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *&#160;</td>
          <td class="paramname"><em>manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a> *&#160;</td>
          <td class="paramname"><em>pubs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00205">205</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00179">publishers_destroy()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00531">stasis_state_add_publisher()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00034">TOPIC_COUNT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00399">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;{</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(pubs, <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a>)) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   }</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a>; ++i) {</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/dcc/structstasis__state__publisher.html">stasis_state_publisher</a> *pub;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordtype">char</span> <span class="keywordtype">id</span>[32];</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      <span class="keywordflow">if</span> (snprintf(<span class="keywordtype">id</span>, 10, <span class="stringliteral">&quot;%zu&quot;</span>, i) == -1) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to convert publisher id to string\n&quot;</span>);</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      }</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      <span class="comment">/* Create the state publisher */</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      pub = <a class="code" href="../../d1/d96/stasis__state_8h.html#aef7869676ec68c22cc1ac42cadaa36c9">stasis_state_add_publisher</a>(manager, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      <span class="keywordflow">if</span> (!pub) {</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create a state publisher for id &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      }</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(pubs, pub)) {</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to add to publisher to vector for id &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(pub, -1);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      }</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <span class="keywordflow">if</span> (i != TOPIC_COUNT) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create all publishers: count=%zu\n&quot;</span>, i);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a41024eaf57b4d549960970e71d82542f">publishers_destroy</a>(manager, pubs);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div><div class="ttc" id="structstasis__state__publisher_html"><div class="ttname"><a href="../../df/dcc/structstasis__state__publisher.html">stasis_state_publisher</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00519">stasis_state.c:519</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a41024eaf57b4d549960970e71d82542f"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a41024eaf57b4d549960970e71d82542f">publishers_destroy</a></div><div class="ttdeci">static int publishers_destroy(struct stasis_state_manager *manager, struct publishers *pubs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00179">test_stasis_state.c:179</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="stasis__state_8h_html_aef7869676ec68c22cc1ac42cadaa36c9"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#aef7869676ec68c22cc1ac42cadaa36c9">stasis_state_add_publisher</a></div><div class="ttdeci">struct stasis_state_publisher * stasis_state_add_publisher(struct stasis_state_manager *manager, const char *id)</div><div class="ttdoc">Add a publisher to the managed state for the given id. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00531">stasis_state.c:531</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a6c3aa778b25387dabaabf18f3cd4c5b0"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a></div><div class="ttdeci">#define TOPIC_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00034">test_stasis_state.c:34</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41024eaf57b4d549960970e71d82542f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41024eaf57b4d549960970e71d82542f">&#9670;&nbsp;</a></span>publishers_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int publishers_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *&#160;</td>
          <td class="paramname"><em>manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d2/d3d/res__pjsip__exten__state_8c.html#adb838b688e98c705b8668af938b5f85a">publishers</a> *&#160;</td>
          <td class="paramname"><em>pubs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00179">179</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00865">AST_VECTOR_CALLBACK_VOID</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00658">stasis_state_remove_publish_by_id()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00034">TOPIC_COUNT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00356">AST_TEST_DEFINE()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00205">publishers_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="keywordflow">if</span> (pubs) {</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;      <span class="comment">/* Remove explicit publishers */</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a>(pubs, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(pubs);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   }</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a>; ++i) {</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;      <span class="keywordtype">char</span> <span class="keywordtype">id</span>[32];</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;      <span class="comment">/* Remove implicit publishers */</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;      <span class="keywordflow">if</span> (snprintf(<span class="keywordtype">id</span>, 10, <span class="stringliteral">&quot;%zu&quot;</span>, i) == -1) {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to convert publisher id to string\n&quot;</span>);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;      }</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;      <a class="code" href="../../d1/d96/stasis__state_8h.html#acd6a2d9bb8e46b049966355cda567a37">stasis_state_remove_publish_by_id</a>(manager, <span class="keywordtype">id</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   }</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="stasis__state_8h_html_acd6a2d9bb8e46b049966355cda567a37"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#acd6a2d9bb8e46b049966355cda567a37">stasis_state_remove_publish_by_id</a></div><div class="ttdeci">void stasis_state_remove_publish_by_id(struct stasis_state_manager *manager, const char *id, const struct ast_eid *eid, struct stasis_message *msg)</div><div class="ttdoc">Publish to a managed named by id topic, and remove an implicit publisher. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00658">stasis_state.c:658</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a6c3aa778b25387dabaabf18f3cd4c5b0"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a></div><div class="ttdeci">#define TOPIC_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00034">test_stasis_state.c:34</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="vector_8h_html_aeb9853664dde8a7df8bc7ea180d73d54"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a></div><div class="ttdeci">#define AST_VECTOR_CALLBACK_VOID(vec, callback,...)</div><div class="ttdoc">Execute a callback on every element in a vector disregarding callback return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00865">vector.h:865</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2dee08c4572b2210e3dee50e24099ab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2dee08c4572b2210e3dee50e24099ab">&#9670;&nbsp;</a></span>STASIS_MESSAGE_TYPE_DEFN()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">STASIS_MESSAGE_TYPE_DEFN </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>foo stasis message type </p>

</div>
</div>
<a id="af6fdecb3683f39cb84441615e5b26a9b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6fdecb3683f39cb84441615e5b26a9b">&#9670;&nbsp;</a></span>subscriptions_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int subscriptions_create </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *&#160;</td>
          <td class="paramname"><em>manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/dab/structsubscriptions.html">subscriptions</a> *&#160;</td>
          <td class="paramname"><em>subs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00131">131</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00256">AST_VECTOR_APPEND</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00113">AST_VECTOR_INIT</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00061">expect_null</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00108">foo_type_cb()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00058">running_total</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00688">stasis_state_add_observer()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00446">stasis_state_subscribe_pool()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00240">sub</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00113">subscriptions_destroy()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00055">sum_total</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00034">TOPIC_COUNT</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00356">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;{</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <span class="keywordtype">size_t</span> i;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d96/stasis__state_8h.html#a7228670846162446fdf5bd2500c1f64d">stasis_state_add_observer</a>(manager, &amp;<a class="code" href="../../de/d6b/test__stasis__state_8c.html#a7d286e1f756a9483a2a2a6f36d5f9d8c">foo_observer</a>) ||</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      <a class="code" href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a>(subs, <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a>)) {</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   }</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a> = <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a> = 0;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a> = 1;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a>; ++i) {</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/d67/structstasis__state__subscriber.html">stasis_state_subscriber</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keywordtype">char</span> <span class="keywordtype">id</span>[32];</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <span class="keywordflow">if</span> (snprintf(<span class="keywordtype">id</span>, 10, <span class="stringliteral">&quot;%zu&quot;</span>, i) == -1) {</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to convert subscriber id to string\n&quot;</span>);</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      }</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;      sub = <a class="code" href="../../d1/d96/stasis__state_8h.html#af61eaf43040b329d68b476e647f6a7d6">stasis_state_subscribe_pool</a>(manager, <span class="keywordtype">id</span>, <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a77e17f0694f330edbb200bad71dae0db">foo_type_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;      <span class="keywordflow">if</span> (!sub) {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create a state subscriber for id &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;      }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a>(subs, sub)) {</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to add to foo_sub to vector for id &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sub, -1);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;      }</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;      <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a> += i;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   }</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   <span class="keywordflow">if</span> (i != TOPIC_COUNT || <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a> != <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a>) {</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to create all subscriptions: running=%zu, sum=%zu\n&quot;</span>,</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a>, <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a>);</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ad8d2c9b2bf8b880440666e1c2333e2a6">subscriptions_destroy</a>(manager, subs);</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div><div class="ttc" id="stasis__state_8h_html_af61eaf43040b329d68b476e647f6a7d6"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#af61eaf43040b329d68b476e647f6a7d6">stasis_state_subscribe_pool</a></div><div class="ttdeci">struct stasis_state_subscriber * stasis_state_subscribe_pool(struct stasis_state_manager *manager, const char *id, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a subscriber, and subscribe to its underlying stasis topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00446">stasis_state.c:446</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a77e17f0694f330edbb200bad71dae0db"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a77e17f0694f330edbb200bad71dae0db">foo_type_cb</a></div><div class="ttdeci">static void foo_type_cb(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00108">test_stasis_state.c:108</a></div></div>
<div class="ttc" id="vector_8h_html_ae9d6199727f88a8c2407cb0e004e634a"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ae9d6199727f88a8c2407cb0e004e634a">AST_VECTOR_APPEND</a></div><div class="ttdeci">#define AST_VECTOR_APPEND(vec, elem)</div><div class="ttdoc">Append an element to a vector, growing the vector if needed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00256">vector.h:256</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a7d286e1f756a9483a2a2a6f36d5f9d8c"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a7d286e1f756a9483a2a2a6f36d5f9d8c">foo_observer</a></div><div class="ttdeci">struct stasis_state_observer foo_observer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00103">test_stasis_state.c:103</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stasis__state_8h_html_a7228670846162446fdf5bd2500c1f64d"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#a7228670846162446fdf5bd2500c1f64d">stasis_state_add_observer</a></div><div class="ttdeci">int stasis_state_add_observer(struct stasis_state_manager *manager, struct stasis_state_observer *observer)</div><div class="ttdoc">Add an observer to receive managed state related events. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00688">stasis_state.c:688</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_ac9b16608d553c3fa63b6e5218b32205e"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a></div><div class="ttdeci">static size_t running_total</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00058">test_stasis_state.c:58</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_ad8d2c9b2bf8b880440666e1c2333e2a6"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ad8d2c9b2bf8b880440666e1c2333e2a6">subscriptions_destroy</a></div><div class="ttdeci">static int subscriptions_destroy(struct stasis_state_manager *manager, struct subscriptions *subs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00113">test_stasis_state.c:113</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="vector_8h_html_ad9d555fa89da1bfc691181993499f785"><div class="ttname"><a href="../../d6/d68/vector_8h.html#ad9d555fa89da1bfc691181993499f785">AST_VECTOR_INIT</a></div><div class="ttdeci">#define AST_VECTOR_INIT(vec, size)</div><div class="ttdoc">Initialize a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00113">vector.h:113</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a0230a9dab4dd3ca682d1fbbef1b9f08e"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a></div><div class="ttdeci">static int expect_null</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00061">test_stasis_state.c:61</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a6c3aa778b25387dabaabf18f3cd4c5b0"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a6c3aa778b25387dabaabf18f3cd4c5b0">TOPIC_COUNT</a></div><div class="ttdeci">#define TOPIC_COUNT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00034">test_stasis_state.c:34</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a5f0dce8a44c15bed19a04f53ad002b8f"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a></div><div class="ttdeci">static size_t sum_total</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00055">test_stasis_state.c:55</a></div></div>
<div class="ttc" id="structstasis__state__subscriber_html"><div class="ttname"><a href="../../d7/d67/structstasis__state__subscriber.html">stasis_state_subscriber</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00384">stasis_state.c:384</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad8d2c9b2bf8b880440666e1c2333e2a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad8d2c9b2bf8b880440666e1c2333e2a6">&#9670;&nbsp;</a></span>subscriptions_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int subscriptions_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d25/structstasis__state__manager.html">stasis_state_manager</a> *&#160;</td>
          <td class="paramname"><em>manager</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/dab/structsubscriptions.html">subscriptions</a> *&#160;</td>
          <td class="paramname"><em>subs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00113">113</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00865">AST_VECTOR_CALLBACK_VOID</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00174">AST_VECTOR_FREE</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00061">expect_null</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00058">running_total</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00700">stasis_state_remove_observer()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00477">stasis_state_unsubscribe_and_join()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00055">sum_total</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00356">AST_TEST_DEFINE()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00131">subscriptions_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;{</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a> = <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a> = 0;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a>(subs, <a class="code" href="../../d1/d96/stasis__state_8h.html#a858f0158644f3bb53e1298c98a93f300">stasis_state_unsubscribe_and_join</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <a class="code" href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a>(subs);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;   <a class="code" href="../../d1/d96/stasis__state_8h.html#a48ab5b2a6061ca20c816a9ccdf85aeeb">stasis_state_remove_observer</a>(manager, &amp;<a class="code" href="../../de/d6b/test__stasis__state_8c.html#a7d286e1f756a9483a2a2a6f36d5f9d8c">foo_observer</a>);</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a> != <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a>) {</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to destroy all subscriptions: running=%zu, sum=%zu\n&quot;</span>,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a>, <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div><div class="ttc" id="vector_8h_html_a66aaa4efda59c52384b03c38e781124d"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a66aaa4efda59c52384b03c38e781124d">AST_VECTOR_FREE</a></div><div class="ttdeci">#define AST_VECTOR_FREE(vec)</div><div class="ttdoc">Deallocates this vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00174">vector.h:174</a></div></div>
<div class="ttc" id="stasis__state_8h_html_a48ab5b2a6061ca20c816a9ccdf85aeeb"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#a48ab5b2a6061ca20c816a9ccdf85aeeb">stasis_state_remove_observer</a></div><div class="ttdeci">void stasis_state_remove_observer(struct stasis_state_manager *manager, struct stasis_state_observer *observer)</div><div class="ttdoc">Remove an observer (will no longer receive managed state related events). </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00700">stasis_state.c:700</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a7d286e1f756a9483a2a2a6f36d5f9d8c"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a7d286e1f756a9483a2a2a6f36d5f9d8c">foo_observer</a></div><div class="ttdeci">struct stasis_state_observer foo_observer</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00103">test_stasis_state.c:103</a></div></div>
<div class="ttc" id="stasis__state_8h_html_a858f0158644f3bb53e1298c98a93f300"><div class="ttname"><a href="../../d1/d96/stasis__state_8h.html#a858f0158644f3bb53e1298c98a93f300">stasis_state_unsubscribe_and_join</a></div><div class="ttdeci">void * stasis_state_unsubscribe_and_join(struct stasis_state_subscriber *sub)</div><div class="ttdoc">Unsubscribe from the stasis topic, block until the final message is received, and then unsubscribe fr...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d1d/stasis__state_8c_source.html#l00477">stasis_state.c:477</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_ac9b16608d553c3fa63b6e5218b32205e"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a></div><div class="ttdeci">static size_t running_total</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00058">test_stasis_state.c:58</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a0230a9dab4dd3ca682d1fbbef1b9f08e"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a></div><div class="ttdeci">static int expect_null</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00061">test_stasis_state.c:61</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a5f0dce8a44c15bed19a04f53ad002b8f"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a5f0dce8a44c15bed19a04f53ad002b8f">sum_total</a></div><div class="ttdeci">static size_t sum_total</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00055">test_stasis_state.c:55</a></div></div>
<div class="ttc" id="vector_8h_html_aeb9853664dde8a7df8bc7ea180d73d54"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aeb9853664dde8a7df8bc7ea180d73d54">AST_VECTOR_CALLBACK_VOID</a></div><div class="ttdeci">#define AST_VECTOR_CALLBACK_VOID(vec, callback,...)</div><div class="ttdoc">Execute a callback on every element in a vector disregarding callback return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00865">vector.h:865</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00444">444</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type()</a>, and <a class="el" href="../../dd/d79/stasis_8h_source.html#l01523">STASIS_MESSAGE_TYPE_CLEANUP</a>.</p>
<div class="fragment"><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;{</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(implicit_publish);</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(explicit_publish);</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type</a>);</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;}</div><div class="ttc" id="stasis_8h_html_a31197e193b1dfd6c122ff6d7c7f6b3fa"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_CLEANUP(name)</div><div class="ttdoc">Boiler-plate messaging macro for cleaning up message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01523">stasis.h:1523</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_ae344c77cd5a06c7eabaea660b37ab1a0"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ae344c77cd5a06c7eabaea660b37ab1a0">foo_type</a></div><div class="ttdeci">struct stasis_message_type * foo_type(void)</div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af6954aed60c2b595ad03954fe9a839b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af6954aed60c2b595ad03954fe9a839b6">&#9670;&nbsp;</a></span>validate_data()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int validate_data </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dee/structfoo__data.html">foo_data</a> *&#160;</td>
          <td class="paramname"><em>foo</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00063">63</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d1e/conversions_8c_source.html#l00119">ast_str_to_umax()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00045">foo_data::bar</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00061">expect_null</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00058">running_total</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00293">explicit_publish_cb()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00096">handle_validate()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00272">implicit_publish_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   <span class="keywordtype">size_t</span> num;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../da/dd6/conversions_8h.html#a67521f6b0e263fa60fc078861f5cc825">ast_str_to_umax</a>(<span class="keywordtype">id</span>, &amp;num)) {</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to convert the state&#39;s id &#39;%s&#39; to numeric\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;   }</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;   <a class="code" href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a> += num;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <span class="keywordflow">if</span> (!foo) {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a>) {</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;      }</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Expected state data for &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a>) {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Expected NULL state data for &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   <span class="keywordflow">if</span> (foo-&gt;<a class="code" href="../../d5/dee/structfoo__data.html#a9784c6df82ee72ffe49210bff2499995">bar</a> != num) {</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unexpected state data for &#39;%s&#39;\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;   }</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;}</div><div class="ttc" id="conversions_8h_html_a67521f6b0e263fa60fc078861f5cc825"><div class="ttname"><a href="../../da/dd6/conversions_8h.html#a67521f6b0e263fa60fc078861f5cc825">ast_str_to_umax</a></div><div class="ttdeci">int ast_str_to_umax(const char *str, uintmax_t *res)</div><div class="ttdoc">Convert the given string to an unsigned max size integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d1e/conversions_8c_source.html#l00119">conversions.c:119</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_ac9b16608d553c3fa63b6e5218b32205e"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#ac9b16608d553c3fa63b6e5218b32205e">running_total</a></div><div class="ttdeci">static size_t running_total</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00058">test_stasis_state.c:58</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="test__stasis__state_8c_html_a0230a9dab4dd3ca682d1fbbef1b9f08e"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a0230a9dab4dd3ca682d1fbbef1b9f08e">expect_null</a></div><div class="ttdeci">static int expect_null</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00061">test_stasis_state.c:61</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structfoo__data_html_a9784c6df82ee72ffe49210bff2499995"><div class="ttname"><a href="../../d5/dee/structfoo__data.html#a9784c6df82ee72ffe49210bff2499995">foo_data::bar</a></div><div class="ttdeci">size_t bar</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00045">test_stasis_state.c:45</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Stasis <a class="el" href="../../d4/d88/structstate.html">state</a> testing&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00466">466</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00466">466</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

</div>
</div>
<a id="a0230a9dab4dd3ca682d1fbbef1b9f08e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0230a9dab4dd3ca682d1fbbef1b9f08e">&#9670;&nbsp;</a></span>expect_null</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int expect_null</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>This value is set to check if state data is NULL before publishing </p>

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00061">61</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00328">publish()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00131">subscriptions_create()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00113">subscriptions_destroy()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00063">validate_data()</a>.</p>

</div>
</div>
<a id="a7d286e1f756a9483a2a2a6f36d5f9d8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d286e1f756a9483a2a2a6f36d5f9d8c">&#9670;&nbsp;</a></span>foo_observer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/d92/structstasis__state__observer.html">stasis_state_observer</a> foo_observer</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .on_subscribe = <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a05f46fa7c9922307a63899959997f747">handle_validate</a>,</div><div class="line">   .on_unsubscribe = <a class="code" href="../../de/d6b/test__stasis__state_8c.html#a05f46fa7c9922307a63899959997f747">handle_validate</a></div><div class="line">}</div><div class="ttc" id="test__stasis__state_8c_html_a05f46fa7c9922307a63899959997f747"><div class="ttname"><a href="../../de/d6b/test__stasis__state_8c.html#a05f46fa7c9922307a63899959997f747">handle_validate</a></div><div class="ttdeci">static void handle_validate(const char *id, struct stasis_state_subscriber *sub)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d6b/test__stasis__state_8c_source.html#l00096">test_stasis_state.c:96</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00103">103</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

</div>
</div>
<a id="ac9b16608d553c3fa63b6e5218b32205e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9b16608d553c3fa63b6e5218b32205e">&#9670;&nbsp;</a></span>running_total</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t running_total</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Test variable that tracks the running total of state ids </p>

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00058">58</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00328">publish()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00131">subscriptions_create()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00113">subscriptions_destroy()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00063">validate_data()</a>.</p>

</div>
</div>
<a id="a5f0dce8a44c15bed19a04f53ad002b8f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f0dce8a44c15bed19a04f53ad002b8f">&#9670;&nbsp;</a></span>sum_total</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t sum_total</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>For testing purposes each subscribed state's id is a number. This value is the summation of all id's. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00055">55</a> of file <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html">test_stasis_state.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00328">publish()</a>, <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00131">subscriptions_create()</a>, and <a class="el" href="../../de/d6b/test__stasis__state_8c_source.html#l00113">subscriptions_destroy()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:59 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
