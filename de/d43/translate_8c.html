<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: translate.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">translate.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Translate via the use of pseudo channels.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;sys/time.h&gt;</code><br />
<code>#include &lt;sys/resource.h&gt;</code><br />
<code>#include &lt;math.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d39/translate_8h_source.html">asterisk/translate.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html">asterisk/frame.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d7/d00/sched_8h_source.html">asterisk/sched.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d45/term_8h_source.html">asterisk/term.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d0a/format_8h_source.html">asterisk/format.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for translate.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d9/dea/translate_8c__incl.png" border="0" usemap="#translate_8c" alt=""/></div>
<map name="translate_8c" id="translate_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="83,229,167,256"/>
<area shape="rect" id="node13" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="691,528,804,555"/>
<area shape="rect" id="node21" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1105,80,1244,107"/>
<area shape="rect" id="node27" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="648,453,799,480"/>
<area shape="rect" id="node29" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1933,304,2064,331"/>
<area shape="rect" id="node32" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="2192,229,2319,256"/>
<area shape="rect" id="node44" href="../../db/d39/translate_8h.html" title="Support for translation of data formats. translate.c. " alt="" coords="2290,155,2435,181"/>
<area shape="rect" id="node47" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1624,80,1760,107"/>
<area shape="rect" id="node48" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="2340,80,2467,107"/>
<area shape="rect" id="node49" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="308,229,409,256"/>
<area shape="rect" id="node50" href="../../db/d45/term_8h.html" title="Handy terminal functions for vt* terms. " alt="" coords="2776,80,2895,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="410,677,565,704"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="62,453,199,480"/>
<area shape="rect" id="node9" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="111,304,246,331"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="414,752,561,779"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="332,603,475,629"/>
<area shape="rect" id="node15" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1095,603,1158,629"/>
<area shape="rect" id="node16" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1053,677,1200,704"/>
<area shape="rect" id="node19" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="567,603,718,629"/>
<area shape="rect" id="node20" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1214,603,1340,629"/>
<area shape="rect" id="node22" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="993,155,1137,181"/>
<area shape="rect" id="node23" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1117,229,1232,256"/>
<area shape="rect" id="node24" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1361,304,1518,331"/>
<area shape="rect" id="node26" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="223,379,358,405"/>
<area shape="rect" id="node28" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1772,229,1931,256"/>
<area shape="rect" id="node31" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1746,155,1910,181"/>
<area shape="rect" id="node34" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="761,379,908,405"/>
<area shape="rect" id="node35" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1362,155,1488,181"/>
<area shape="rect" id="node36" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="636,155,742,181"/>
<area shape="rect" id="node37" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="535,379,686,405"/>
<area shape="rect" id="node38" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1955,229,2116,256"/>
<area shape="rect" id="node39" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="97,155,268,181"/>
<area shape="rect" id="node40" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="394,155,510,181"/>
<area shape="rect" id="node41" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1564,155,1721,181"/>
<area shape="rect" id="node42" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1212,155,1337,181"/>
<area shape="rect" id="node43" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="818,155,968,181"/>
<area shape="rect" id="node25" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="860,304,990,331"/>
<area shape="rect" id="node30" href="../../d1/d16/codec_8h.html" title="Codec API. " alt="" coords="1910,379,2036,405"/>
<area shape="rect" id="node33" href="../../d1/d84/endian_8h.html" title="Asterisk architecture endianess compatibility definitions. " alt="" coords="2138,304,2269,331"/>
<area shape="rect" id="node45" href="../../d2/d66/plc_8h.html" title="SpanDSP &#45; a series of DSP components for telephony. " alt="" coords="2394,229,2501,256"/>
<area shape="rect" id="node46" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="2525,229,2701,256"/>
</map>
</div>
</div>
<p><a href="../../de/d43/translate_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/dd9/structtranslator__path.html">translator_path</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d7/d9a/structtranslators.html">translators</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">the list of translators  <a href="../../d7/d9a/structtranslators.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a156cf40de75af9ffa214b0afd940bc3e"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a156cf40de75af9ffa214b0afd940bc3e">format_sample_rate_absdiff</a>(fmt1,  fmt2)</td></tr>
<tr class="separator:a156cf40de75af9ffa214b0afd940bc3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af70f5e37045ec1a53a47262ef03e0f51"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#af70f5e37045ec1a53a47262ef03e0f51">GROW_INDEX</a>&#160;&#160;&#160;16</td></tr>
<tr class="separator:af70f5e37045ec1a53a47262ef03e0f51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a501c42d8b4c759beceb3a35e4d72298c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a501c42d8b4c759beceb3a35e4d72298c">INIT_INDEX</a>&#160;&#160;&#160;32</td></tr>
<tr class="separator:a501c42d8b4c759beceb3a35e4d72298c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac83a107ff74dbfdd57b5f8272d787674"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#ac83a107ff74dbfdd57b5f8272d787674">MAX_RECALC</a>&#160;&#160;&#160;1000</td></tr>
<tr class="separator:ac83a107ff74dbfdd57b5f8272d787674"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abe05dca45e9caafe572c781d67f6d5be"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#abe05dca45e9caafe572c781d67f6d5be">__ast_register_translator</a> (struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *t, struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *mod)</td></tr>
<tr class="memdesc:abe05dca45e9caafe572c781d67f6d5be"><td class="mdescLeft">&#160;</td><td class="mdescRight">register codec translator  <a href="#abe05dca45e9caafe572c781d67f6d5be">More...</a><br /></td></tr>
<tr class="separator:abe05dca45e9caafe572c781d67f6d5be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a322db3b4265c81d69c9fde343ba722c0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a322db3b4265c81d69c9fde343ba722c0">add_codec2index</a> (struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *codec)</td></tr>
<tr class="separator:a322db3b4265c81d69c9fde343ba722c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7838b495e22798cfce427b03f53cde9"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#ae7838b495e22798cfce427b03f53cde9">ast_trans_frameout</a> (struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *pvt, int datalen, int samples)</td></tr>
<tr class="memdesc:ae7838b495e22798cfce427b03f53cde9"><td class="mdescLeft">&#160;</td><td class="mdescRight">generic frameout routine. If samples and datalen are 0, take whatever is in pvt and reset them, otherwise take the values in the caller and leave alone the pvt values.  <a href="#ae7838b495e22798cfce427b03f53cde9">More...</a><br /></td></tr>
<tr class="separator:ae7838b495e22798cfce427b03f53cde9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a060685dc55cc6e7f63053c68da2878"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a8a060685dc55cc6e7f63053c68da2878">ast_translate</a> (struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *path, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f, int consume)</td></tr>
<tr class="memdesc:a8a060685dc55cc6e7f63053c68da2878"><td class="mdescLeft">&#160;</td><td class="mdescRight">do the actual translation  <a href="#a8a060685dc55cc6e7f63053c68da2878">More...</a><br /></td></tr>
<tr class="separator:a8a060685dc55cc6e7f63053c68da2878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57042913ae83bc388ddd52d820277aa3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a57042913ae83bc388ddd52d820277aa3">ast_translate_available_formats</a> (struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *dest, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *src, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>)</td></tr>
<tr class="memdesc:a57042913ae83bc388ddd52d820277aa3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find available formats.  <a href="#a57042913ae83bc388ddd52d820277aa3">More...</a><br /></td></tr>
<tr class="separator:a57042913ae83bc388ddd52d820277aa3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afec16338d64bcbd935b1faf7db038965"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#afec16338d64bcbd935b1faf7db038965">ast_translate_init</a> (void)</td></tr>
<tr class="memdesc:afec16338d64bcbd935b1faf7db038965"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the translation matrix and index to format conversion table.  <a href="#afec16338d64bcbd935b1faf7db038965">More...</a><br /></td></tr>
<tr class="separator:afec16338d64bcbd935b1faf7db038965"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a090b4cfdbd2469519ba23049f98f32ff"><td class="memItemLeft" align="right" valign="top">unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a090b4cfdbd2469519ba23049f98f32ff">ast_translate_path_steps</a> (struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *dst_format, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *src_format)</td></tr>
<tr class="memdesc:a090b4cfdbd2469519ba23049f98f32ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the number of steps required to convert from 'src' to 'dest'.  <a href="#a090b4cfdbd2469519ba23049f98f32ff">More...</a><br /></td></tr>
<tr class="separator:a090b4cfdbd2469519ba23049f98f32ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a41bf29f002044f89c9cb7411e7abbc58"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a41bf29f002044f89c9cb7411e7abbc58">ast_translate_path_to_str</a> (struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *p, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>)</td></tr>
<tr class="memdesc:a41bf29f002044f89c9cb7411e7abbc58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts a string representation of the translation path into outbuf.  <a href="#a41bf29f002044f89c9cb7411e7abbc58">More...</a><br /></td></tr>
<tr class="separator:a41bf29f002044f89c9cb7411e7abbc58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a218ce7bb198b02c22181311665acfbf5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a218ce7bb198b02c22181311665acfbf5">ast_translator_activate</a> (struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *t)</td></tr>
<tr class="memdesc:a218ce7bb198b02c22181311665acfbf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Activate a previously deactivated translator.  <a href="#a218ce7bb198b02c22181311665acfbf5">More...</a><br /></td></tr>
<tr class="separator:a218ce7bb198b02c22181311665acfbf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67f43da0468e888ba70f0d001499e3e7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a67f43da0468e888ba70f0d001499e3e7">ast_translator_best_choice</a> (struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *dst_cap, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *src_cap, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> **dst_fmt_out, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> **src_fmt_out)</td></tr>
<tr class="memdesc:a67f43da0468e888ba70f0d001499e3e7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate our best translator source format, given costs, and a desired destination.  <a href="#a67f43da0468e888ba70f0d001499e3e7">More...</a><br /></td></tr>
<tr class="separator:a67f43da0468e888ba70f0d001499e3e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a82cd07a0b63aa5f570c85210cffddbe5"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a82cd07a0b63aa5f570c85210cffddbe5">ast_translator_build_path</a> (struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *dst, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *src)</td></tr>
<tr class="memdesc:a82cd07a0b63aa5f570c85210cffddbe5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a chain of translators based upon the given source and dest formats.  <a href="#a82cd07a0b63aa5f570c85210cffddbe5">More...</a><br /></td></tr>
<tr class="separator:a82cd07a0b63aa5f570c85210cffddbe5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f45354f9e1abc2910205e744bef9384"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a5f45354f9e1abc2910205e744bef9384">ast_translator_deactivate</a> (struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *t)</td></tr>
<tr class="memdesc:a5f45354f9e1abc2910205e744bef9384"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deactivate a translator.  <a href="#a5f45354f9e1abc2910205e744bef9384">More...</a><br /></td></tr>
<tr class="separator:a5f45354f9e1abc2910205e744bef9384"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b1080a581790d3573b18f6a29b9d032"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a3b1080a581790d3573b18f6a29b9d032">ast_translator_free_path</a> (struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *p)</td></tr>
<tr class="memdesc:a3b1080a581790d3573b18f6a29b9d032"><td class="mdescLeft">&#160;</td><td class="mdescRight">Frees a translator path Frees the given translator path structure.  <a href="#a3b1080a581790d3573b18f6a29b9d032">More...</a><br /></td></tr>
<tr class="separator:a3b1080a581790d3573b18f6a29b9d032"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3db4bb4ca3540f7d09a9d57e820dbe8a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a3db4bb4ca3540f7d09a9d57e820dbe8a">ast_unregister_translator</a> (struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *t)</td></tr>
<tr class="memdesc:a3db4bb4ca3540f7d09a9d57e820dbe8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">unregister codec translator  <a href="#a3db4bb4ca3540f7d09a9d57e820dbe8a">More...</a><br /></td></tr>
<tr class="separator:a3db4bb4ca3540f7d09a9d57e820dbe8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f7ba81f933b321cf6259f7bf36e6b48"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a1f7ba81f933b321cf6259f7bf36e6b48">check_translation_path</a> (struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *dest, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *src, struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *<a class="el" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *src_fmt, enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="separator:a1f7ba81f933b321cf6259f7bf36e6b48"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2ff67fa32217b6827c6f17927bb9472"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a> (struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *codec)</td></tr>
<tr class="separator:ab2ff67fa32217b6827c6f17927bb9472"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac2cf931ca857d66b5f628c478f007f76"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#ac2cf931ca857d66b5f628c478f007f76">codec_append_name</a> (const struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *codec, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>)</td></tr>
<tr class="separator:ac2cf931ca857d66b5f628c478f007f76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32a465c859aab8751fec512e617bcd70"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a32a465c859aab8751fec512e617bcd70">codec_to_index</a> (unsigned int <a class="el" href="../../d1/da4/res__corosync_8c.html#a2465fd4497a7402ad72da7d6e03f9934">id</a>)</td></tr>
<tr class="separator:a32a465c859aab8751fec512e617bcd70"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14c01f75699ba4580c4351be88a03ff6"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a14c01f75699ba4580c4351be88a03ff6">complete_trans_path_choice</a> (const char *<a class="el" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>)</td></tr>
<tr class="separator:a14c01f75699ba4580c4351be88a03ff6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a52e268c1afbb047c041d654d036fe47b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a52e268c1afbb047c041d654d036fe47b">default_frameout</a> (struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *pvt)</td></tr>
<tr class="separator:a52e268c1afbb047c041d654d036fe47b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd32a6ef4f3c191685ae65f8439407e7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a> (struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *pvt)</td></tr>
<tr class="separator:acd32a6ef4f3c191685ae65f8439407e7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af1b46547497054e6c1e782c3cb54d35f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a> (struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *<a class="el" href="../../da/d45/chan__alsa_8c.html#a98f5e70e98f6dc48e3c5ba316066d540">format</a>)</td></tr>
<tr class="separator:af1b46547497054e6c1e782c3cb54d35f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee1bfcdafcc358c9ead7a53e05e1c35a"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#aee1bfcdafcc358c9ead7a53e05e1c35a">framein</a> (struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *pvt, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="memdesc:aee1bfcdafcc358c9ead7a53e05e1c35a"><td class="mdescLeft">&#160;</td><td class="mdescRight">framein wrapper, deals with bound checks.  <a href="#aee1bfcdafcc358c9ead7a53e05e1c35a">More...</a><br /></td></tr>
<tr class="separator:aee1bfcdafcc358c9ead7a53e05e1c35a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbb07f0735a0f32daa23a7751461d500"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#abbb07f0735a0f32daa23a7751461d500">generate_computational_cost</a> (struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *t, int seconds)</td></tr>
<tr class="separator:abbb07f0735a0f32daa23a7751461d500"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe44d8a282a7252be9de819190f8e840"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#abe44d8a282a7252be9de819190f8e840">generate_interpolated_slin</a> (struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *p, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</td></tr>
<tr class="separator:abe44d8a282a7252be9de819190f8e840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adccbb0706edea3272a49428564046bf2"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#adccbb0706edea3272a49428564046bf2">generate_table_cost</a> (struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *src, struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *dst)</td></tr>
<tr class="separator:adccbb0706edea3272a49428564046bf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a43d75309415c6f46f89e2f12bafd43a7"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a43d75309415c6f46f89e2f12bafd43a7">handle_cli_core_show_translation</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a43d75309415c6f46f89e2f12bafd43a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a26d50066349146cb6a593c9038aa7028"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a26d50066349146cb6a593c9038aa7028">handle_cli_recalc</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a26d50066349146cb6a593c9038aa7028"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a113db2d8bd5e4c6457bf3706e85fdd71"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a113db2d8bd5e4c6457bf3706e85fdd71">handle_show_translation_path</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, const char *codec_name, unsigned int sample_rate)</td></tr>
<tr class="separator:a113db2d8bd5e4c6457bf3706e85fdd71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac973ca316d62f9d6d5f0798f19e6a8ca"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#ac973ca316d62f9d6d5f0798f19e6a8ca">handle_show_translation_table</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ac973ca316d62f9d6d5f0798f19e6a8ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06415aec16fdea5dfa764836ad809dc0"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a06415aec16fdea5dfa764836ad809dc0">index2codec</a> (int index)</td></tr>
<tr class="separator:a06415aec16fdea5dfa764836ad809dc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a536df40ff0da97c33331db8fa31d2fc2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a536df40ff0da97c33331db8fa31d2fc2">matrix_clear</a> (void)</td></tr>
<tr class="separator:a536df40ff0da97c33331db8fa31d2fc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a364459b5b3f78e68329c2dfc828a4cd6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/dd9/structtranslator__path.html">translator_path</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a> (unsigned int x, unsigned int y)</td></tr>
<tr class="separator:a364459b5b3f78e68329c2dfc828a4cd6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d86147d86592846866d3f2913a4dd87"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a> (int samples)</td></tr>
<tr class="memdesc:a3d86147d86592846866d3f2913a4dd87"><td class="mdescLeft">&#160;</td><td class="mdescRight">rebuild a translation matrix.  <a href="#a3d86147d86592846866d3f2913a4dd87">More...</a><br /></td></tr>
<tr class="separator:a3d86147d86592846866d3f2913a4dd87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c09bc7e7bb9baac6a8dbd22da6bb9af"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a5c09bc7e7bb9baac6a8dbd22da6bb9af">matrix_resize</a> (int init)</td></tr>
<tr class="separator:a5c09bc7e7bb9baac6a8dbd22da6bb9af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af03e251d10db6eed6af2e54bd1377071"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#af03e251d10db6eed6af2e54bd1377071">newpvt</a> (struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *t, struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *explicit_dst)</td></tr>
<tr class="memdesc:af03e251d10db6eed6af2e54bd1377071"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate the descriptor, required outbuf space, and possibly desc.  <a href="#af03e251d10db6eed6af2e54bd1377071">More...</a><br /></td></tr>
<tr class="separator:af03e251d10db6eed6af2e54bd1377071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab89cdbdc754ab3fa0ae698176636ef03"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#ab89cdbdc754ab3fa0ae698176636ef03">translate_shutdown</a> (void)</td></tr>
<tr class="separator:ab89cdbdc754ab3fa0ae698176636ef03"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a664e361807a29bba28e6cc3d333f57d8"><td class="memItemLeft" align="right" valign="top">static unsigned int *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a></td></tr>
<tr class="memdesc:a664e361807a29bba28e6cc3d333f57d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">table for converting index to format values.  <a href="#a664e361807a29bba28e6cc3d333f57d8">More...</a><br /></td></tr>
<tr class="separator:a664e361807a29bba28e6cc3d333f57d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab7f8cbe73fc8db1de51dcdbcec03bd9"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/dd9/structtranslator__path.html">translator_path</a> **&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a></td></tr>
<tr class="memdesc:aab7f8cbe73fc8db1de51dcdbcec03bd9"><td class="mdescLeft">&#160;</td><td class="mdescRight">a matrix that, for any pair of supported formats, indicates the total cost of translation and the first step. The full path can be reconstricted iterating on the matrix until step-&gt;dstfmt == desired_format.  <a href="#aab7f8cbe73fc8db1de51dcdbcec03bd9">More...</a><br /></td></tr>
<tr class="separator:aab7f8cbe73fc8db1de51dcdbcec03bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acc94a293fbe86a42647621894b524890"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#acc94a293fbe86a42647621894b524890">cli_translate</a> []</td></tr>
<tr class="separator:acc94a293fbe86a42647621894b524890"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a121e720f03859a0b5afd89ac1bb4f840"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a></td></tr>
<tr class="separator:a121e720f03859a0b5afd89ac1bb4f840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c961d2031c896562556d389e7e4debf"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a></td></tr>
<tr class="separator:a5c961d2031c896562556d389e7e4debf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bb2839fae7b799fae04adf7c2285797"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a></td></tr>
<tr class="separator:a3bb2839fae7b799fae04adf7c2285797"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a45feed165df2bd5800f87a143859a4ff"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d7/d9a/structtranslators.html">translators</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d43/translate_8c.html#a45feed165df2bd5800f87a143859a4ff">translators</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td></tr>
<tr class="separator:a45feed165df2bd5800f87a143859a4ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Translate via the use of pseudo channels. </p>
<dl class="section author"><dt>Author</dt><dd>Mark Spencer <a href="#" onclick="location.href='mai'+'lto:'+'mar'+'ks'+'ter'+'@d'+'igi'+'um'+'.co'+'m'; return false;">marks<span style="display: none;">.nosp@m.</span>ter@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a156cf40de75af9ffa214b0afd940bc3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a156cf40de75af9ffa214b0afd940bc3e">&#9670;&nbsp;</a></span>format_sample_rate_absdiff</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define format_sample_rate_absdiff</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt1, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">fmt2&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">({ \</div><div class="line">   unsigned <span class="keywordtype">int</span> rate1 = <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(fmt1); \</div><div class="line">   unsigned <span class="keywordtype">int</span> rate2 = <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(fmt2); \</div><div class="line">   (rate1 &gt; rate2 ? rate1 - rate2 : rate2 - rate1); \</div><div class="line">})</div><div class="ttc" id="format_8h_html_a499e920008f775eebadd958a42e85862"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a></div><div class="ttdeci">unsigned int ast_format_get_sample_rate(const struct ast_format *format)</div><div class="ttdoc">Get the sample rate of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00379">format.c:379</a></div></div>
</div><!-- fragment --><p>Calculate the absolute difference between sample rate of two formats. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01378">1378</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01385">ast_translator_best_choice()</a>.</p>

</div>
</div>
<a id="af70f5e37045ec1a53a47262ef03e0f51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af70f5e37045ec1a53a47262ef03e0f51">&#9670;&nbsp;</a></span>GROW_INDEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define GROW_INDEX&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00091">91</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00194">matrix_resize()</a>.</p>

</div>
</div>
<a id="a501c42d8b4c759beceb3a35e4d72298c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a501c42d8b4c759beceb3a35e4d72298c">&#9670;&nbsp;</a></span>INIT_INDEX</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INIT_INDEX&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00089">89</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00194">matrix_resize()</a>.</p>

</div>
</div>
<a id="ac83a107ff74dbfdd57b5f8272d787674"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac83a107ff74dbfdd57b5f8272d787674">&#9670;&nbsp;</a></span>MAX_RECALC</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_RECALC&#160;&#160;&#160;1000</td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000080">Todo:</a></b></dt><dd>TODO: sample frames for each supported input format. We build this on the fly, by taking an SLIN frame and using the existing converter to play with it. </dd></dl>
<p>max sample recalc </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00054">54</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00969">handle_cli_recalc()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abe05dca45e9caafe572c781d67f6d5be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe05dca45e9caafe572c781d67f6d5be">&#9670;&nbsp;</a></span>__ast_register_translator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __ast_register_translator </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td>
          <td class="paramname"><em>mod</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>register codec translator </p>
<p>Register a translator This registers a codec translator with asterisk. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01220">1220</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00189">ast_translator::active</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00147">add_codec2index()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00326">ast_codec_get()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00609">AST_RWLIST_INSERT_BEFORE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00717">AST_RWLIST_INSERT_HEAD</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">b</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00182">ast_translator::buf_size</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00124">codec2index()</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00047">COLOR_BLACK</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00057">COLOR_MAGENTA</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00147">ast_translator::comp_cost</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00094">cur_max_index</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00468">default_frameout()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00140">ast_translator::dst_codec</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00191">ast_translator::dst_fmt_index</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00158">ast_translator::frameout</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00690">generate_computational_cost()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00768">generate_table_cost()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00194">matrix_resize()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00187">ast_translator::module</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00046">ast_codec::name</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00138">ast_translator::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00139">ast_translator::src_codec</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00190">ast_translator::src_fmt_index</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00145">ast_translator::table_cost</a>, <a class="el" href="../../d5/de5/term_8c_source.html#l00184">term_color()</a>, <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00050">ast_codec::type</a>.</p>
<div class="fragment"><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;{</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d29/structast__translator.html">ast_translator</a> *u;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[80];</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *, <a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *, <a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a> = <a class="code" href="../../d1/d16/codec_8h.html#a3d3b570342f0bbd5b8fe0bb67edec760">ast_codec_get</a>(t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>) {</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to register translator: unknown source codec %s\n&quot;</span>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   }</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a> = <a class="code" href="../../d1/d16/codec_8h.html#a3d3b570342f0bbd5b8fe0bb67edec760">ast_codec_get</a>(t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>) {</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to register translator: unknown destination codec %s\n&quot;</span>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   }</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d43/translate_8c.html#a322db3b4265c81d69c9fde343ba722c0">add_codec2index</a>(<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>) || <a class="code" href="../../de/d43/translate_8c.html#a322db3b4265c81d69c9fde343ba722c0">add_codec2index</a>(<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>)) {</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d43/translate_8c.html#a5c09bc7e7bb9baac6a8dbd22da6bb9af">matrix_resize</a>(0)) {</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Translator matrix can not represent any more translators.  Out of resources.\n&quot;</span>);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      }</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#a322db3b4265c81d69c9fde343ba722c0">add_codec2index</a>(<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>);</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#a322db3b4265c81d69c9fde343ba722c0">add_codec2index</a>(<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   <span class="keywordflow">if</span> (!mod) {</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Missing module pointer, you need to supply one\n&quot;</span>);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   <span class="keywordflow">if</span> (!t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a4c813abab25e4df4e95d8f0b0ca61500">buf_size</a>) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;empty buf size, you need to supply one\n&quot;</span>);</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   }</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   <span class="keywordflow">if</span> (!t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8f4b015560da5592624a98cbdcf4a995">table_cost</a> &amp;&amp; !(t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8f4b015560da5592624a98cbdcf4a995">table_cost</a> = <a class="code" href="../../de/d43/translate_8c.html#adccbb0706edea3272a49428564046bf2">generate_table_cost</a>(<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>, <a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>))) {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Table cost could not be generated for %s, &quot;</span></div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;         <span class="stringliteral">&quot;Please set table_cost variable on translator.\n&quot;</span>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;   t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a> = mod;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;   t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a433b554c82f740d313b751dbf71082ee">src_fmt_index</a> = <a class="code" href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a>(<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">dst_fmt_index</a> = <a class="code" href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a>(<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   t-&gt;<a class="code" href="../../db/d29/structast__translator.html#aa5805c5e936174e5092bf7a5b78e7e64">active</a> = 1;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a433b554c82f740d313b751dbf71082ee">src_fmt_index</a> &lt; 0 || t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">dst_fmt_index</a> &lt; 0) {</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid translator path: (%s codec is not valid)\n&quot;</span>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a433b554c82f740d313b751dbf71082ee">src_fmt_index</a> &lt; 0 ? <span class="stringliteral">&quot;starting&quot;</span> : <span class="stringliteral">&quot;ending&quot;</span>);</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   }</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a433b554c82f740d313b751dbf71082ee">src_fmt_index</a> &gt;= <a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a>) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Source codec %s is larger than cur_max_index\n&quot;</span>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;   }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">dst_fmt_index</a> &gt;= <a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a>) {</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Destination codec %s is larger than cur_max_index\n&quot;</span>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   }</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a4c813abab25e4df4e95d8f0b0ca61500">buf_size</a>) {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment">       * Align buf_size properly, rounding up to the machine-specific</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment">       * alignment for pointers.</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <span class="keyword">struct </span>_test_align { <span class="keywordtype">void</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>; } p;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="keywordtype">int</span> align = (<span class="keywordtype">char</span> *)&amp;p.b - (<span class="keywordtype">char</span> *)&amp;p.a;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a4c813abab25e4df4e95d8f0b0ca61500">buf_size</a> = ((t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a4c813abab25e4df4e95d8f0b0ca61500">buf_size</a> + align - 1) / align) * align;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;   }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a37ac28603c7f4f2f3bc2fb1e6930a00e">frameout</a> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a37ac28603c7f4f2f3bc2fb1e6930a00e">frameout</a> = <a class="code" href="../../de/d43/translate_8c.html#a52e268c1afbb047c041d654d036fe47b">default_frameout</a>;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   }</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#abbb07f0735a0f32daa23a7751461d500">generate_computational_cost</a>(t, 1);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Registered translator &#39;%s&#39; from codec %s to %s, table cost, %d, computational cost %d\n&quot;</span>,</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;       <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(tmp, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">name</a>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, <a class="code" href="../../db/d45/term_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a>, <span class="keyword">sizeof</span>(tmp)),</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;       t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8f4b015560da5592624a98cbdcf4a995">table_cost</a>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a>);</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   <span class="comment">/* find any existing translators that provide this same srcfmt/dstfmt,</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;<span class="comment">      and put this one in order based on computational cost */</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>, u, list) {</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="keywordflow">if</span> ((u-&gt;<a class="code" href="../../db/d29/structast__translator.html#a433b554c82f740d313b751dbf71082ee">src_fmt_index</a> == t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a433b554c82f740d313b751dbf71082ee">src_fmt_index</a>) &amp;&amp;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;          (u-&gt;<a class="code" href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">dst_fmt_index</a> == t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">dst_fmt_index</a>) &amp;&amp;</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;          (u-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a> &gt; t-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a>)) {</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#acf8253a64f9a4e2170454f4bf0559e33">AST_RWLIST_INSERT_BEFORE_CURRENT</a>(t, list);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;         t = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      }</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   }</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;   <span class="comment">/* if no existing translator was found for this codec combination,</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment">      add it to the beginning of the list */</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   <span class="keywordflow">if</span> (t) {</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>, t, list);</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   }</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a>(0);</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div><div class="ttc" id="structast__codec_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">ast_codec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name for this codec. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00046">codec.h:46</a></div></div>
<div class="ttc" id="translate_8c_html_a5c09bc7e7bb9baac6a8dbd22da6bb9af"><div class="ttname"><a href="../../de/d43/translate_8c.html#a5c09bc7e7bb9baac6a8dbd22da6bb9af">matrix_resize</a></div><div class="ttdeci">static int matrix_resize(int init)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00194">translate.c:194</a></div></div>
<div class="ttc" id="translate_8c_html_a3d86147d86592846866d3f2913a4dd87"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a></div><div class="ttdeci">static void matrix_rebuild(int samples)</div><div class="ttdoc">rebuild a translation matrix. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00824">translate.c:824</a></div></div>
<div class="ttc" id="structast__translator_html"><div class="ttname"><a href="../../db/d29/structast__translator.html">ast_translator</a></div><div class="ttdoc">Descriptor of a translator. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00137">translate.h:137</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__translator_html_a433b554c82f740d313b751dbf71082ee"><div class="ttname"><a href="../../db/d29/structast__translator.html#a433b554c82f740d313b751dbf71082ee">ast_translator::src_fmt_index</a></div><div class="ttdeci">int src_fmt_index</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00190">translate.h:190</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__translator_html_a8f4b015560da5592624a98cbdcf4a995"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8f4b015560da5592624a98cbdcf4a995">ast_translator::table_cost</a></div><div class="ttdeci">int table_cost</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00145">translate.h:145</a></div></div>
<div class="ttc" id="structast__translator_html_a69c9aeee8d4f56279cd7e041976ba66c"><div class="ttname"><a href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">ast_translator::dst_fmt_index</a></div><div class="ttdeci">int dst_fmt_index</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00191">translate.h:191</a></div></div>
<div class="ttc" id="translate_8c_html_a52e268c1afbb047c041d654d036fe47b"><div class="ttname"><a href="../../de/d43/translate_8c.html#a52e268c1afbb047c041d654d036fe47b">default_frameout</a></div><div class="ttdeci">static struct ast_frame * default_frameout(struct ast_trans_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00468">translate.c:468</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="translate_8c_html_a322db3b4265c81d69c9fde343ba722c0"><div class="ttname"><a href="../../de/d43/translate_8c.html#a322db3b4265c81d69c9fde343ba722c0">add_codec2index</a></div><div class="ttdeci">static int add_codec2index(struct ast_codec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00147">translate.c:147</a></div></div>
<div class="ttc" id="codec_8h_html_a3d3b570342f0bbd5b8fe0bb67edec760"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a3d3b570342f0bbd5b8fe0bb67edec760">ast_codec_get</a></div><div class="ttdeci">struct ast_codec * ast_codec_get(const char *name, enum ast_media_type type, unsigned int sample_rate)</div><div class="ttdoc">Retrieve a codec given a name, type, and sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00326">codec.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structast__translator_html_a8637433cfbb88aeb10ce2ed5dcba0eb1"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">ast_translator::module</a></div><div class="ttdeci">struct ast_module * module</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00187">translate.h:187</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aacc5f6b7c25e361d11d40137fd55a8e8"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aacc5f6b7c25e361d11d40137fd55a8e8">AST_RWLIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_HEAD</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00717">linkedlists.h:717</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="linkedlists_8h_html_acf8253a64f9a4e2170454f4bf0559e33"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#acf8253a64f9a4e2170454f4bf0559e33">AST_RWLIST_INSERT_BEFORE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_INSERT_BEFORE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00609">linkedlists.h:609</a></div></div>
<div class="ttc" id="structast__translator_html_a4c813abab25e4df4e95d8f0b0ca61500"><div class="ttname"><a href="../../db/d29/structast__translator.html#a4c813abab25e4df4e95d8f0b0ca61500">ast_translator::buf_size</a></div><div class="ttdeci">int buf_size</div><div class="ttdoc">size of outbuf, in bytes. Mandatory. The wrapper code will also allocate an AST_FRIENDLY_OFFSET space...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00182">translate.h:182</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="term_8h_html_a7b6c72116c334f40bf7c1e50e793c93b"><div class="ttname"><a href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a></div><div class="ttdeci">char * term_color(char *outbuf, const char *inbuf, int fgcolor, int bgcolor, int maxout)</div><div class="ttdoc">Colorize a specified string by adding terminal color codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00184">term.c:184</a></div></div>
<div class="ttc" id="term_8h_html_aba2a7fe77a7501e5844370eec0185207"><div class="ttname"><a href="../../db/d45/term_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a></div><div class="ttdeci">#define COLOR_BLACK</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00047">term.h:47</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="structast__translator_html_af79a76d35f0dc9d6e5aee149ac5946e1"><div class="ttname"><a href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">ast_translator::dst_codec</a></div><div class="ttdeci">struct ast_codec dst_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00140">translate.h:140</a></div></div>
<div class="ttc" id="translate_8c_html_ab2ff67fa32217b6827c6f17927bb9472"><div class="ttname"><a href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a></div><div class="ttdeci">static int codec2index(struct ast_codec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00124">translate.c:124</a></div></div>
<div class="ttc" id="structast__translator_html_a8300e275ac746b701ea61f617be84851"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">ast_translator::src_codec</a></div><div class="ttdeci">struct ast_codec src_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00139">translate.h:139</a></div></div>
<div class="ttc" id="structast__codec_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_codec::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Sample rate (number of samples carried in a second) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00052">codec.h:52</a></div></div>
<div class="ttc" id="structast__translator_html_aa5805c5e936174e5092bf7a5b78e7e64"><div class="ttname"><a href="../../db/d29/structast__translator.html#aa5805c5e936174e5092bf7a5b78e7e64">ast_translator::active</a></div><div class="ttdeci">int active</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00189">translate.h:189</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__translator_html_a37ac28603c7f4f2f3bc2fb1e6930a00e"><div class="ttname"><a href="../../db/d29/structast__translator.html#a37ac28603c7f4f2f3bc2fb1e6930a00e">ast_translator::frameout</a></div><div class="ttdeci">struct ast_frame *(* frameout)(struct ast_trans_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00158">translate.h:158</a></div></div>
<div class="ttc" id="translate_8c_html_abbb07f0735a0f32daa23a7751461d500"><div class="ttname"><a href="../../de/d43/translate_8c.html#abbb07f0735a0f32daa23a7751461d500">generate_computational_cost</a></div><div class="ttdeci">static void generate_computational_cost(struct ast_translator *t, int seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00690">translate.c:690</a></div></div>
<div class="ttc" id="structast__codec_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_codec::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Type of media this codec contains. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="translate_8c_html_a121e720f03859a0b5afd89ac1bb4f840"><div class="ttname"><a href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a></div><div class="ttdeci">static int cur_max_index</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00094">translate.c:94</a></div></div>
<div class="ttc" id="structast__translator_html_ac782b27c1b87673e4eddde7bdd3e5253"><div class="ttname"><a href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">ast_translator::comp_cost</a></div><div class="ttdeci">int comp_cost</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00147">translate.h:147</a></div></div>
<div class="ttc" id="translate_8c_html_adccbb0706edea3272a49428564046bf2"><div class="ttname"><a href="../../de/d43/translate_8c.html#adccbb0706edea3272a49428564046bf2">generate_table_cost</a></div><div class="ttdeci">static int generate_table_cost(struct ast_codec *src, struct ast_codec *dst)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00768">translate.c:768</a></div></div>
<div class="ttc" id="structast__codec_html"><div class="ttname"><a href="../../d5/d53/structast__codec.html">ast_codec</a></div><div class="ttdoc">Represents a media codec within Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00042">codec.h:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
<div class="ttc" id="structast__translator_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">ast_translator::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00138">translate.h:138</a></div></div>
<div class="ttc" id="term_8h_html_a8deb0beccea721b35bdb1b4f7264fe75"><div class="ttname"><a href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a></div><div class="ttdeci">#define COLOR_MAGENTA</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00057">term.h:57</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a322db3b4265c81d69c9fde343ba722c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a322db3b4265c81d69c9fde343ba722c0">&#9670;&nbsp;</a></span>add_codec2index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int add_codec2index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *&#160;</td>
          <td class="paramname"><em>codec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00147">147</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d43/translate_8c_source.html#l00083">__indextable</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00124">codec2index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00094">cur_max_index</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00044">ast_codec::id</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00096">index_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01220">__ast_register_translator()</a>.</p>
<div class="fragment"><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;{</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a>(codec) != -1) {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="comment">/* format is already already indexed */</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;   }</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a> == (<a class="code" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a>)) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;      <span class="keywordflow">return</span> -1; <span class="comment">/* hit max length */</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   }</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a>[<a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a>] = codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a>++;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="ttc" id="translate_8c_html_a5c961d2031c896562556d389e7e4debf"><div class="ttname"><a href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a></div><div class="ttdeci">static int index_size</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00096">translate.c:96</a></div></div>
<div class="ttc" id="translate_8c_html_a3bb2839fae7b799fae04adf7c2285797"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a></div><div class="ttdeci">static ast_rwlock_t tablelock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00086">translate.c:86</a></div></div>
<div class="ttc" id="structast__codec_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d5/d53/structast__codec.html#ab7ce6f462afaf105224b0ca772a33c43">ast_codec::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdoc">Internal unique identifier for this codec, set at registration time (starts at 1) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00044">codec.h:44</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="translate_8c_html_ab2ff67fa32217b6827c6f17927bb9472"><div class="ttname"><a href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a></div><div class="ttdeci">static int codec2index(struct ast_codec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00124">translate.c:124</a></div></div>
<div class="ttc" id="translate_8c_html_a664e361807a29bba28e6cc3d333f57d8"><div class="ttname"><a href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a></div><div class="ttdeci">static unsigned int * __indextable</div><div class="ttdoc">table for converting index to format values. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00083">translate.c:83</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="translate_8c_html_a121e720f03859a0b5afd89ac1bb4f840"><div class="ttname"><a href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a></div><div class="ttdeci">static int cur_max_index</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00094">translate.c:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae7838b495e22798cfce427b03f53cde9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7838b495e22798cfce427b03f53cde9">&#9670;&nbsp;</a></span>ast_trans_frameout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* ast_trans_frameout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td>
          <td class="paramname"><em>pvt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>datalen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>samples</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>generic frameout routine. If samples and datalen are 0, take whatever is in pvt and reset them, otherwise take the values in the caller and leave alone the pvt values. </p>
<p>generic frameout function </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00438">438</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">ast_frisolate</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00221">ast_trans_pvt::c</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00218">ast_trans_pvt::datalen</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00215">ast_trans_pvt::f</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/d47/structast__trans__pvt.html#ae28026b11aaf3740f9101a5a66d19105">ast_trans_pvt::outbuf</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, and <a class="el" href="../../db/d39/translate_8h_source.html#l00216">ast_trans_pvt::samples</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00468">default_frameout()</a>, <a class="el" href="../../d0/dd5/codec__adpcm_8c_source.html#l00256">lintoadpcm_frameout()</a>, <a class="el" href="../../dc/d47/codec__codec2_8c_source.html#l00105">lintocodec2_frameout()</a>, <a class="el" href="../../d0/d10/codec__gsm_8c_source.html#l00138">lintogsm_frameout()</a>, <a class="el" href="../../dc/d8e/codec__ilbc_8c_source.html#l00163">lintoilbc_frameout()</a>, <a class="el" href="../../dd/df9/codec__lpc10_8c_source.html#l00159">lintolpc10_frameout()</a>, and <a class="el" href="../../dc/d23/codec__speex_8c_source.html#l00273">lintospeex_frameout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;{</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = &amp;pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>) {</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;      f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = <a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;      <span class="keywordflow">if</span> (pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a37672e6b906143604cefd3e959777b31">samples</a> == 0) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;      }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;      f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;      pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a37672e6b906143604cefd3e959777b31">samples</a> = 0;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   }</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>) {</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ae28026b11aaf3740f9101a5a66d19105">outbuf</a>.<a class="code" href="../../d1/d47/structast__trans__pvt.html#a9df78bd38aa81763ad1c56f3de8d5d3e">c</a>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">if</span> (!f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>) {</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;         f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;         f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ae28026b11aaf3740f9101a5a66d19105">outbuf</a>.<a class="code" href="../../d1/d47/structast__trans__pvt.html#a9df78bd38aa81763ad1c56f3de8d5d3e">c</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;      }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;      pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = 0;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   }</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a>(f);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;}</div><div class="ttc" id="structast__trans__pvt_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#ad67e07841d1233e596e6f822a3c81f6b">ast_trans_pvt::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdoc">actual space used in outbuf </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00218">translate.h:218</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">ast_trans_pvt::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00215">translate.h:215</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_ae28026b11aaf3740f9101a5a66d19105"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#ae28026b11aaf3740f9101a5a66d19105">ast_trans_pvt::outbuf</a></div><div class="ttdeci">union ast_trans_pvt::@327 outbuf</div></div>
<div class="ttc" id="structast__trans__pvt_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a37672e6b906143604cefd3e959777b31">ast_trans_pvt::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00216">translate.h:216</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a314496ce1d74ed7fdb9c5319c5e2e953"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a314496ce1d74ed7fdb9c5319c5e2e953">ast_frisolate</a></div><div class="ttdeci">#define ast_frisolate(fr)</div><div class="ttdoc">Makes a frame independent of any static storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00577">include/asterisk/frame.h:577</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__trans__pvt_html_a9df78bd38aa81763ad1c56f3de8d5d3e"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a9df78bd38aa81763ad1c56f3de8d5d3e">ast_trans_pvt::c</a></div><div class="ttdeci">char * c</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00221">translate.h:221</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8a060685dc55cc6e7f63053c68da2878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8a060685dc55cc6e7f63053c68da2878">&#9670;&nbsp;</a></span>ast_translate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* ast_translate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>consume</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>do the actual translation </p>
<p>translates one or more frames Apply an input frame into the translator and receive zero or one output frames. Consume determines whether the original frame should be freed. In case the frame type is AST_FRAME_RTCP, the frame is not translated but passed to the translator codecs via the feedback callback, and a pointer to ast_null_frame is returned after that. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00565">565</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00379">ast_format_get_sample_rate()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00121">AST_FRAME_CNG</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">AST_FRAME_RTCP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00143">AST_FRFLAG_HAS_TIMING_INFO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00438">AST_LIST_NEXT</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00094">ast_set2_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00138">ast_tveq()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02298">ast_tvsub()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00108">ast_tvzero()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">ast_frame::delivery</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00162">ast_translator::feedback</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00396">framein()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00536">generate_interpolated_slin()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">ast_frame::len</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00227">ast_trans_pvt::next</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00228">ast_trans_pvt::nextin</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00229">ast_trans_pvt::nextout</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">ast_frame::seqno</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00214">ast_trans_pvt::t</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">ast_frame::ts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l03529">__ast_read()</a>, <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00077">ast_slinfactory_feed()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05194">ast_write_stream()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00209">ast_writestream()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00878">audiohook_list_translate_to_native()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00832">audiohook_list_translate_to_slin()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00380">audiohook_read_frame_helper()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l03383">fax_gateway_framehook()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00203">softmix_process_write_audio()</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;{</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *p = path;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <span class="keyword">struct </span>timeval delivery;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordtype">int</span> has_timing_info;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;   <span class="keywordtype">long</span> ts;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <span class="keywordtype">long</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;   <span class="keywordtype">int</span> seqno;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="comment">/* Just pass the feedback to the right callback, if it exists.</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">       * This &quot;translation&quot; does nothing so return a null frame. */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *tp;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;      <span class="keywordflow">for</span> (tp = p; tp; tp = tp-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a94fba7dd372be8c1dd51053a289d4d2d">next</a>) {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;         <span class="keywordflow">if</span> (tp-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a42ab0482dd65d87049c2835f1a80b9e9">feedback</a>)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;            tp-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a42ab0482dd65d87049c2835f1a80b9e9">feedback</a>(tp, f);</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;      }</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;      <span class="keywordflow">return</span> &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   }</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;   has_timing_info = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(f, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a>);</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   ts = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   len = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   seqno = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>)) {</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">nextin</a>)) {</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;         <span class="comment">/* Make sure this is in line with what we were expecting */</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4328bab15b049cb2643de72c73497960">ast_tveq</a>(path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">nextin</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>)) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <span class="comment">/* The time has changed between what we expected and this</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">               most recent time on the new packet.  If we have a</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">               valid prediction adjust our output time appropriately */</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a>)) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;               path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a> = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a>,</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                          <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>, path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">nextin</a>));</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;            }</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;            path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">nextin</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;         }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;         <span class="comment">/* This is our first pass.  Make sure the timing looks good */</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;         path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">nextin</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;         path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      <span class="comment">/* Predict next incoming sample */</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">nextin</a> = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">nextin</a>, <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;          f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>, <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)));</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   }</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   delivery = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;   <span class="keywordflow">for</span> (out = f; out &amp;&amp; p ; p = p-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a94fba7dd372be8c1dd51053a289d4d2d">next</a>) {</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *current = <a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <span class="keywordflow">do</span> {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;         <a class="code" href="../../de/d43/translate_8c.html#aee1bfcdafcc358c9ead7a53e05e1c35a">framein</a>(p, current);</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;         current = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(current, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;      } <span class="keywordflow">while</span> (current);</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordflow">if</span> (out != f) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(out);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      }</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;      out = p-&gt;t-&gt;frameout(p);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;   }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;   <span class="keywordflow">if</span> (!out) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;      out = <a class="code" href="../../de/d43/translate_8c.html#abe44d8a282a7252be9de819190f8e840">generate_interpolated_slin</a>(path, f);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   }</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   <span class="keywordflow">if</span> (out) {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="comment">/* we have a frame, play with times */</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a>)) {</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *current = <a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;         <span class="keywordflow">do</span> {</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            <span class="comment">/* Regenerate prediction after a discontinuity */</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a>)) {</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;               path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            }</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            <span class="comment">/* Use next predicted outgoing timestamp */</span></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            current-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a> = path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a>;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="comment">/* Invalidate prediction if we&#39;re entering a silence period */</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            <span class="keywordflow">if</span> (current-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a>) {</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;               path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a> = <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 0);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <span class="comment">/* Predict next outgoing timestamp from samples in this</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">               frame. */</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;               path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a> = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a>, <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                  current-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>, <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(current-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>)));</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;            }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;            <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> != current-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(current, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a>)) {</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(4, <span class="stringliteral">&quot;Sample size different %d vs %d\n&quot;</span>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>, current-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(current, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a>);</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;            }</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;            current = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(current, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;         } <span class="keywordflow">while</span> (current);</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         out-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">delivery</a> = <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 0);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a67b6713ff86cf82aaed821e9a87d1c21">ast_set2_flag</a>(out, has_timing_info, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a>);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;         <span class="keywordflow">if</span> (has_timing_info) {</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;            out-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a> = <a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;            out-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;            out-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> = <a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;         }</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;         <span class="comment">/* Invalidate prediction if we&#39;re entering a silence period */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;         <span class="keywordflow">if</span> (out-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a>) {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;            path-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a> = <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 0);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;         }</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="keywordflow">if</span> (consume) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;   }</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;}</div><div class="ttc" id="structast__frame_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">ast_frame::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">include/asterisk/frame.h:195</a></div></div>
<div class="ttc" id="utils_8h_html_a67b6713ff86cf82aaed821e9a87d1c21"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a67b6713ff86cf82aaed821e9a87d1c21">ast_set2_flag</a></div><div class="ttdeci">#define ast_set2_flag(p, value, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00094">utils.h:94</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="time_8h_html_a4328bab15b049cb2643de72c73497960"><div class="ttname"><a href="../../de/df7/time_8h.html#a4328bab15b049cb2643de72c73497960">ast_tveq</a></div><div class="ttdeci">int ast_tveq(struct timeval _a, struct timeval _b)</div><div class="ttdoc">Returns true if the two struct timeval arguments are equal. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00138">time.h:138</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00143">include/asterisk/frame.h:143</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="structast__frame_html_a1eb46dcb363821328c0d2a758549216b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ast_frame::ts</a></div><div class="ttdeci">long ts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">include/asterisk/frame.h:191</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a94fba7dd372be8c1dd51053a289d4d2d"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a94fba7dd372be8c1dd51053a289d4d2d">ast_trans_pvt::next</a></div><div class="ttdeci">struct ast_trans_pvt * next</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00227">translate.h:227</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a88c9aeea48ba0da726fcc0c5538967c4"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">ast_trans_pvt::nextin</a></div><div class="ttdeci">struct timeval nextin</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00228">translate.h:228</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="translate_8c_html_aee1bfcdafcc358c9ead7a53e05e1c35a"><div class="ttname"><a href="../../de/d43/translate_8c.html#aee1bfcdafcc358c9ead7a53e05e1c35a">framein</a></div><div class="ttdeci">static int framein(struct ast_trans_pvt *pvt, struct ast_frame *f)</div><div class="ttdoc">framein wrapper, deals with bound checks. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00396">translate.c:396</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">include/asterisk/frame.h:135</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="structast__translator_html_a42ab0482dd65d87049c2835f1a80b9e9"><div class="ttname"><a href="../../db/d29/structast__translator.html#a42ab0482dd65d87049c2835f1a80b9e9">ast_translator::feedback</a></div><div class="ttdeci">void(* feedback)(struct ast_trans_pvt *pvt, struct ast_frame *feedback)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00162">translate.h:162</a></div></div>
<div class="ttc" id="structast__trans__pvt_html"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a></div><div class="ttdoc">Default structure for translators, with the basic fields and buffers, all allocated as part of the sa...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00213">translate.h:213</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a64ecb74967a1bc4c00d65c65939f74f5"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">ast_trans_pvt::nextout</a></div><div class="ttdeci">struct timeval nextout</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00229">translate.h:229</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a8089c2a7198a1063db9e6c3f904482a4">AST_FRAME_CNG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00121">include/asterisk/frame.h:121</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="structast__frame_html_a41a708025486b4c9383e7432e9ba3f0e"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a41a708025486b4c9383e7432e9ba3f0e">ast_frame::delivery</a></div><div class="ttdeci">struct timeval delivery</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00185">include/asterisk/frame.h:185</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="format_8h_html_a499e920008f775eebadd958a42e85862"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a></div><div class="ttdeci">unsigned int ast_format_get_sample_rate(const struct ast_format *format)</div><div class="ttdoc">Get the sample rate of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00379">format.c:379</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_aa6d45f7a0477a1eb0d1f2ca362986d5a"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">ast_trans_pvt::t</a></div><div class="ttdeci">struct ast_translator * t</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00214">translate.h:214</a></div></div>
<div class="ttc" id="time_8h_html_aa13b651c18bc6004cab21ac041d44dd8"><div class="ttname"><a href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a></div><div class="ttdeci">struct timeval ast_tvsub(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the difference of two timevals a - b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02298">extconf.c:2298</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="structast__frame_html_aaccba9d5adc3f6c39aad767db95ba484"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">ast_frame::len</a></div><div class="ttdeci">long len</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">include/asterisk/frame.h:193</a></div></div>
<div class="ttc" id="translate_8c_html_abe44d8a282a7252be9de819190f8e840"><div class="ttname"><a href="../../de/d43/translate_8c.html#abe44d8a282a7252be9de819190f8e840">generate_interpolated_slin</a></div><div class="ttdeci">static struct ast_frame * generate_interpolated_slin(struct ast_trans_pvt *p, struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00536">translate.c:536</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a57042913ae83bc388ddd52d820277aa3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57042913ae83bc388ddd52d820277aa3">&#9670;&nbsp;</a></span>ast_translate_available_formats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_translate_available_formats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find available formats. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>possible destination formats </td></tr>
    <tr><td class="paramname">src</td><td>source formats </td></tr>
    <tr><td class="paramname">result</td><td>capabilities structure to store available formats in</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the destination formats that are available in the source or translatable</dd></dl>
<p>The result will include all formats from 'dest' that are either present in 'src' or translatable from a format present in 'src'.</p>
<dl class="section note"><dt>Note</dt><dd>Only a single audio format and a single video format can be present in 'src', or the function will produce unexpected results. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01571">1571</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00548">ast_format_cap_get_compatible_format()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00033">AST_MEDIA_TYPE_VIDEO</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l01513">check_translation_path()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l02633">ast_rtp_instance_available_formats()</a>.</p>
<div class="fragment"><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;{</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *cur_dest, *cur_src;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   <span class="keywordtype">int</span> index;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(dest); ++index) {</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      <span class="keywordflow">if</span> (!(cur_dest = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(dest, index))) {</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      }</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      <span class="comment">/* We give preference to a joint format structure if possible */</span></div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <span class="keywordflow">if</span> ((cur_src = <a class="code" href="../../d0/d3c/format__cap_8h.html#ab28f00a6d84ac7e28a3169770cedd391">ast_format_cap_get_compatible_format</a>(src, cur_dest))) {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(result, cur_src, 0);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cur_src, -1);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;         <span class="comment">/* Otherwise we just use the destination format */</span></div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(result, cur_dest, 0);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      }</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cur_dest, -1);</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;   }</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;   <span class="comment">/* if we don&#39;t have a source format, we just have to try all</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment">      possible destination formats */</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   <span class="keywordflow">if</span> (!src) {</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   }</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;   <span class="keywordflow">for</span> (index = 0; index &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(src); ++index) {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <span class="keywordflow">if</span> (!(cur_src = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(src, index))) {</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      }</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#a1f7ba81f933b321cf6259f7bf36e6b48">check_translation_path</a>(dest, src, result,</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                   cur_src, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>);</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#a1f7ba81f933b321cf6259f7bf36e6b48">check_translation_path</a>(dest, src, result,</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                   cur_src, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a>);</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cur_src, -1);</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   }</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;}</div><div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab28f00a6d84ac7e28a3169770cedd391"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab28f00a6d84ac7e28a3169770cedd391">ast_format_cap_get_compatible_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_compatible_format(const struct ast_format_cap *cap, const struct ast_format *format)</div><div class="ttdoc">Find if input ast_format is within the capabilities of the ast_format_cap object then return the comp...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00548">format_cap.c:548</a></div></div>
<div class="ttc" id="translate_8c_html_a1f7ba81f933b321cf6259f7bf36e6b48"><div class="ttname"><a href="../../de/d43/translate_8c.html#a1f7ba81f933b321cf6259f7bf36e6b48">check_translation_path</a></div><div class="ttdeci">static void check_translation_path(struct ast_format_cap *dest, struct ast_format_cap *src, struct ast_format_cap *result, struct ast_format *src_fmt, enum ast_media_type type)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01513">translate.c:1513</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a4086fb0449fa236dbbf9041e5a818e99">AST_MEDIA_TYPE_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00033">codec.h:33</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afec16338d64bcbd935b1faf7db038965"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afec16338d64bcbd935b1faf7db038965">&#9670;&nbsp;</a></span>ast_translate_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_translate_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the translation matrix and index to format conversion table. </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">-1</td><td>on failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01630">1630</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00222">ast_rwlock_init</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00194">matrix_resize()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l01613">translate_shutdown()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;{</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;   res = <a class="code" href="../../de/d43/translate_8c.html#a5c09bc7e7bb9baac6a8dbd22da6bb9af">matrix_resize</a>(1);</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   res |= <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../de/d43/translate_8c.html#acc94a293fbe86a42647621894b524890">cli_translate</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../de/d43/translate_8c.html#acc94a293fbe86a42647621894b524890">cli_translate</a>));</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../de/d43/translate_8c.html#ab89cdbdc754ab3fa0ae698176636ef03">translate_shutdown</a>);</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="translate_8c_html_a5c09bc7e7bb9baac6a8dbd22da6bb9af"><div class="ttname"><a href="../../de/d43/translate_8c.html#a5c09bc7e7bb9baac6a8dbd22da6bb9af">matrix_resize</a></div><div class="ttdeci">static int matrix_resize(int init)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00194">translate.c:194</a></div></div>
<div class="ttc" id="translate_8c_html_acc94a293fbe86a42647621894b524890"><div class="ttname"><a href="../../de/d43/translate_8c.html#acc94a293fbe86a42647621894b524890">cli_translate</a></div><div class="ttdeci">static struct ast_cli_entry cli_translate[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01215">translate.c:1215</a></div></div>
<div class="ttc" id="translate_8c_html_a3bb2839fae7b799fae04adf7c2285797"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a></div><div class="ttdeci">static ast_rwlock_t tablelock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00086">translate.c:86</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="lock_8h_html_a9b07039db138693d1ebe02c3e99ddcab"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a9b07039db138693d1ebe02c3e99ddcab">ast_rwlock_init</a></div><div class="ttdeci">#define ast_rwlock_init(rwlock)</div><div class="ttdoc">wrapper for rwlock with tracking enabled </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00222">lock.h:222</a></div></div>
<div class="ttc" id="translate_8c_html_ab89cdbdc754ab3fa0ae698176636ef03"><div class="ttname"><a href="../../de/d43/translate_8c.html#ab89cdbdc754ab3fa0ae698176636ef03">translate_shutdown</a></div><div class="ttdeci">static void translate_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01613">translate.c:1613</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a090b4cfdbd2469519ba23049f98f32ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a090b4cfdbd2469519ba23049f98f32ff">&#9670;&nbsp;</a></span>ast_translate_path_steps()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int ast_translate_path_steps </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the number of steps required to convert from 'src' to 'dest'. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>destination format </td></tr>
    <tr><td class="paramname">src</td><td>source format </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the number of translation steps required, or -1 if no path is available </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01491">1491</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00133">format2index()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00282">matrix_get()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00062">translator_path::multistep</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00060">translator_path::step</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l06738">ast_channel_make_compatible_helper()</a>.</p>
<div class="fragment"><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;{</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <span class="comment">/* convert bitwise format numbers into array indices */</span></div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;   <span class="keywordtype">int</span> src = <a class="code" href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a>(src_format);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="keywordtype">int</span> dest = <a class="code" href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a>(dst_format);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   <span class="keywordflow">if</span> (src &lt; 0 || dest &lt; 0) {</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No translator path: (%s codec is not valid)\n&quot;</span>, src &lt; 0 ? <span class="stringliteral">&quot;starting&quot;</span> : <span class="stringliteral">&quot;ending&quot;</span>);</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   }</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(src, dest)-&gt;step) {</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;      res = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(src, dest)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#ac3bacd261c78ba863d0567afcf6ad2fc">multistep</a> + 1;</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;   }</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="translate_8c_html_af1b46547497054e6c1e782c3cb54d35f"><div class="ttname"><a href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a></div><div class="ttdeci">static int format2index(struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00133">translate.c:133</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="translate_8c_html_a364459b5b3f78e68329c2dfc828a4cd6"><div class="ttname"><a href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a></div><div class="ttdeci">static struct translator_path * matrix_get(unsigned int x, unsigned int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00282">translate.c:282</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="structtranslator__path_html_ac3bacd261c78ba863d0567afcf6ad2fc"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html#ac3bacd261c78ba863d0567afcf6ad2fc">translator_path::multistep</a></div><div class="ttdeci">uint8_t multistep</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00062">translate.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a41bf29f002044f89c9cb7411e7abbc58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a41bf29f002044f89c9cb7411e7abbc58">&#9670;&nbsp;</a></span>ast_translate_path_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_translate_path_to_str </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>str</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Puts a string representation of the translation path into outbuf. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>translator structure containing the translation path </td></tr>
    <tr><td class="paramname">str</td><td><a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> output buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">on</td><td>success pointer to beginning of outbuf. on failure "". </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00928">928</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00919">codec_append_name()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00140">ast_translator::dst_codec</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00227">ast_trans_pvt::next</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00139">ast_translator::src_codec</a>, and <a class="el" href="../../db/d39/translate_8h_source.html#l00214">ast_trans_pvt::t</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l00949">chan_pjsip_write_stream()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04662">generate_status()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01610">handle_showchan()</a>, and <a class="el" href="../../d2/ddd/app__dumpchan_8c_source.html#l00069">serialize_showchan()</a>.</p>
<div class="fragment"><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;{</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   <span class="keywordflow">if</span> (!p || !p-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>) {</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   }</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(*str);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#ac2cf931ca857d66b5f628c478f007f76">codec_append_name</a>(&amp;p-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>, str);</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <span class="keywordflow">while</span> (p) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(str, 0, <span class="stringliteral">&quot;-&gt;&quot;</span>);</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#ac2cf931ca857d66b5f628c478f007f76">codec_append_name</a>(&amp;p-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>, str);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;      p = p-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a94fba7dd372be8c1dd51053a289d4d2d">next</a>;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   }</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(*str);</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a94fba7dd372be8c1dd51053a289d4d2d"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a94fba7dd372be8c1dd51053a289d4d2d">ast_trans_pvt::next</a></div><div class="ttdeci">struct ast_trans_pvt * next</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00227">translate.h:227</a></div></div>
<div class="ttc" id="structast__translator_html_af79a76d35f0dc9d6e5aee149ac5946e1"><div class="ttname"><a href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">ast_translator::dst_codec</a></div><div class="ttdeci">struct ast_codec dst_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00140">translate.h:140</a></div></div>
<div class="ttc" id="structast__translator_html_a8300e275ac746b701ea61f617be84851"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">ast_translator::src_codec</a></div><div class="ttdeci">struct ast_codec src_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00139">translate.h:139</a></div></div>
<div class="ttc" id="translate_8c_html_ac2cf931ca857d66b5f628c478f007f76"><div class="ttname"><a href="../../de/d43/translate_8c.html#ac2cf931ca857d66b5f628c478f007f76">codec_append_name</a></div><div class="ttdeci">static void codec_append_name(const struct ast_codec *codec, struct ast_str **buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00919">translate.c:919</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_aa6d45f7a0477a1eb0d1f2ca362986d5a"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">ast_trans_pvt::t</a></div><div class="ttdeci">struct ast_translator * t</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00214">translate.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a218ce7bb198b02c22181311665acfbf5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a218ce7bb198b02c22181311665acfbf5">&#9670;&nbsp;</a></span>ast_translator_activate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_translator_activate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Activate a previously deactivated translator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>translator to activate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>Enables the specified translator for use. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01361">1361</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d39/translate_8h_source.html#l00189">ast_translator::active</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>.</p>
<div class="fragment"><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;{</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   t-&gt;<a class="code" href="../../db/d29/structast__translator.html#aa5805c5e936174e5092bf7a5b78e7e64">active</a> = 1;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a>(0);</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;}</div><div class="ttc" id="translate_8c_html_a3d86147d86592846866d3f2913a4dd87"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a></div><div class="ttdeci">static void matrix_rebuild(int samples)</div><div class="ttdoc">rebuild a translation matrix. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00824">translate.c:824</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="structast__translator_html_aa5805c5e936174e5092bf7a5b78e7e64"><div class="ttname"><a href="../../db/d29/structast__translator.html#aa5805c5e936174e5092bf7a5b78e7e64">ast_translator::active</a></div><div class="ttdeci">int active</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00189">translate.h:189</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a67f43da0468e888ba70f0d001499e3e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a67f43da0468e888ba70f0d001499e3e7">&#9670;&nbsp;</a></span>ast_translator_best_choice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_translator_best_choice </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>dst_cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>src_cap</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> **&#160;</td>
          <td class="paramname"><em>dst_fmt_out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> **&#160;</td>
          <td class="paramname"><em>src_fmt_out</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate our best translator source format, given costs, and a desired destination. </p>
<p>Chooses the best translation path. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01385">1385</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00517">ao2_replace</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00746">ast_format_cap_empty()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00630">ast_format_cap_get_compatible()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00379">ast_format_get_sample_rate()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00133">format2index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01378">format_sample_rate_absdiff</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00282">matrix_get()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00062">translator_path::multistep</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00060">translator_path::step</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00061">translator_path::table_cost</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l06738">ast_channel_make_compatible_helper()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12458">iax2_request()</a>, <a class="el" href="../../de/d47/core__local_8c_source.html#l00940">local_request_with_stream_topology()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06309">request_channel()</a>, and <a class="el" href="../../d4/d28/channel_8c_source.html#l05680">set_format()</a>.</p>
<div class="fragment"><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;{</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> besttablecost = INT_MAX;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> beststeps = INT_MAX;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *fmt;</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *dst;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *src;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, best, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, bestdst, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *joint_cap;</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a>(dst_cap) || <a class="code" href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a>(src_cap)) {</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Cannot determine best translation path since one capability supports no formats\n&quot;</span>);</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   }</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   joint_cap = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   <span class="keywordflow">if</span> (!joint_cap) {</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   }</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a>(dst_cap, src_cap, joint_cap);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(joint_cap); ++i, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(fmt)) {</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;      fmt = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(joint_cap, i);</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">if</span> (!fmt</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;         || <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(fmt) != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      }</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">if</span> (!best</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;         || <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(best) &lt; <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(fmt)) {</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(best, fmt);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;      }</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   }</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(joint_cap, -1);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   <span class="keywordflow">if</span> (best) {</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(*dst_fmt_out, best);</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(*src_fmt_out, best);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <span class="comment">/* need to translate */</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(dst_cap); ++i, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(dst)) {</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;      dst = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(dst_cap, i);</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;      <span class="keywordflow">if</span> (!dst</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;         || <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(dst) != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      }</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;      <span class="keywordflow">for</span> (j = 0; j &lt; <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(src_cap); ++j, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(src)) {</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;         <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;         <span class="keywordtype">int</span> y;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;         src = <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(src_cap, j);</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;         <span class="keywordflow">if</span> (!src</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            || <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(src) != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;         }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;         x = <a class="code" href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a>(src);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;         y = <a class="code" href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a>(dst);</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;         <span class="keywordflow">if</span> (x &lt; 0 || y &lt; 0) {</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;         }</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y) || !(<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;step)) {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;         }</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;table_cost &lt; besttablecost</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;            || <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;multistep &lt; beststeps) {</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;            <span class="comment">/* better than what we have so far */</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(best, src);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(bestdst, dst);</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;            besttablecost = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a4fa3dab9c6c239873b6a05add82c5e69">table_cost</a>;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;            beststeps = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#ac3bacd261c78ba863d0567afcf6ad2fc">multistep</a>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;table_cost == besttablecost</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;               &amp;&amp; <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;multistep == beststeps) {</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> gap_selected = <a class="code" href="../../de/d43/translate_8c.html#a156cf40de75af9ffa214b0afd940bc3e">format_sample_rate_absdiff</a>(best, bestdst);</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;            <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> gap_current = <a class="code" href="../../de/d43/translate_8c.html#a156cf40de75af9ffa214b0afd940bc3e">format_sample_rate_absdiff</a>(src, dst);</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;            <span class="keywordflow">if</span> (gap_current &lt; gap_selected) {</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;               <span class="comment">/* better than what we have so far */</span></div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(best, src);</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;               <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(bestdst, dst);</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;               besttablecost = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a4fa3dab9c6c239873b6a05add82c5e69">table_cost</a>;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;               beststeps = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#ac3bacd261c78ba863d0567afcf6ad2fc">multistep</a>;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;            }</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;         }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      }</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   }</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="keywordflow">if</span> (!best) {</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   }</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(*dst_fmt_out, bestdst);</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a>(*src_fmt_out, best);</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;}</div><div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="translate_8c_html_af1b46547497054e6c1e782c3cb54d35f"><div class="ttname"><a href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a></div><div class="ttdeci">static int format2index(struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00133">translate.c:133</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="translate_8c_html_a156cf40de75af9ffa214b0afd940bc3e"><div class="ttname"><a href="../../de/d43/translate_8c.html#a156cf40de75af9ffa214b0afd940bc3e">format_sample_rate_absdiff</a></div><div class="ttdeci">#define format_sample_rate_absdiff(fmt1, fmt2)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01378">translate.c:1378</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="translate_8c_html_a364459b5b3f78e68329c2dfc828a4cd6"><div class="ttname"><a href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a></div><div class="ttdeci">static struct translator_path * matrix_get(unsigned int x, unsigned int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00282">translate.c:282</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structtranslator__path_html_a4fa3dab9c6c239873b6a05add82c5e69"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html#a4fa3dab9c6c239873b6a05add82c5e69">translator_path::table_cost</a></div><div class="ttdeci">uint32_t table_cost</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00061">translate.c:61</a></div></div>
<div class="ttc" id="structtranslator__path_html_ac3bacd261c78ba863d0567afcf6ad2fc"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html#ac3bacd261c78ba863d0567afcf6ad2fc">translator_path::multistep</a></div><div class="ttdeci">uint8_t multistep</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00062">translate.c:62</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa81c8462bd0574f4f9e09e71f2772f44"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa81c8462bd0574f4f9e09e71f2772f44">ao2_replace</a></div><div class="ttdeci">#define ao2_replace(dst, src)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00517">astobj2.h:517</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="format_8h_html_a499e920008f775eebadd958a42e85862"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a></div><div class="ttdeci">unsigned int ast_format_get_sample_rate(const struct ast_format *format)</div><div class="ttdoc">Get the sample rate of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00379">format.c:379</a></div></div>
<div class="ttc" id="format__cap_8h_html_a09809d02373dbc26b136f52cc98f7513"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a09809d02373dbc26b136f52cc98f7513">ast_format_cap_empty</a></div><div class="ttdeci">int ast_format_cap_empty(const struct ast_format_cap *cap)</div><div class="ttdoc">Determine if a format cap has no formats in it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00746">format_cap.c:746</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
<div class="ttc" id="format__cap_8h_html_a43950f716385bc78a73de04acd6a7eb4"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a43950f716385bc78a73de04acd6a7eb4">ast_format_cap_get_compatible</a></div><div class="ttdeci">int ast_format_cap_get_compatible(const struct ast_format_cap *cap1, const struct ast_format_cap *cap2, struct ast_format_cap *result)</div><div class="ttdoc">Find the compatible formats between two capabilities structures. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00630">format_cap.c:630</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a82cd07a0b63aa5f570c85210cffddbe5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a82cd07a0b63aa5f570c85210cffddbe5">&#9670;&nbsp;</a></span>ast_translator_build_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a>* ast_translator_build_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>src</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a chain of translators based upon the given source and dest formats. </p>
<p>Builds a translator path Build a path (possibly NULL) from source to dest. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00485">485</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00379">ast_format_get_sample_rate()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00475">ast_translator_free_path()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00226">ast_tv()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00140">ast_translator::dst_codec</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00191">ast_translator::dst_fmt_index</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00133">format2index()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00282">matrix_get()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00311">newpvt()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00227">ast_trans_pvt::next</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00228">ast_trans_pvt::nextin</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00229">ast_trans_pvt::nextout</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00060">translator_path::step</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00214">ast_trans_pvt::t</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00050">ast_codec::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d28/channel_8c_source.html#l05575">ast_set_read_format_path()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05611">ast_set_write_format_path()</a>, <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00077">ast_slinfactory_feed()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00209">ast_writestream()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00878">audiohook_list_translate_to_native()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00832">audiohook_list_translate_to_slin()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00380">audiohook_read_frame_helper()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05680">set_format()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00203">softmix_process_write_audio()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00159">softmix_translate_helper_change_rate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;{</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *head = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *tail = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;   <span class="keywordtype">int</span> src_index, dst_index;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   src_index = <a class="code" href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a>(src);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   dst_index = <a class="code" href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a>(dst);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;   <span class="keywordflow">if</span> (src_index &lt; 0 || dst_index &lt; 0) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No translator path: (%s codec is not valid)\n&quot;</span>, src_index &lt; 0 ? <span class="stringliteral">&quot;starting&quot;</span> : <span class="stringliteral">&quot;ending&quot;</span>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   }</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;   <span class="keywordflow">while</span> (src_index != dst_index) {</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *cur;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *explicit_dst = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../db/d29/structast__translator.html">ast_translator</a> *t = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(src_index, dst_index)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a2d3b3aeb7224f2e738f8a48739fa5043">step</a>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">if</span> (!t) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No translator path from %s to %s\n&quot;</span>,</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(src), <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(dst));</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;         <a class="code" href="../../de/d43/translate_8c.html#a3b1080a581790d3573b18f6a29b9d032">ast_translator_free_path</a>(head);</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      }</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <span class="keywordflow">if</span> ((t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a> == <a class="code" href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a>(dst)) &amp;&amp; (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> == <a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(dst))) {</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;         explicit_dst = dst;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;      }</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keywordflow">if</span> (!(cur = <a class="code" href="../../de/d43/translate_8c.html#af03e251d10db6eed6af2e54bd1377071">newpvt</a>(t, explicit_dst))) {</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to build translator step from %s to %s\n&quot;</span>,</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(src), <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(dst));</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;         <a class="code" href="../../de/d43/translate_8c.html#a3b1080a581790d3573b18f6a29b9d032">ast_translator_free_path</a>(head);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;      }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;      <span class="keywordflow">if</span> (!head) {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;         head = cur;</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;         tail-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a94fba7dd372be8c1dd51053a289d4d2d">next</a> = cur;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      }</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      tail = cur;</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      cur-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">nextin</a> = cur-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">nextout</a> = <a class="code" href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a>(0, 0);</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <span class="comment">/* Keep going if this isn&#39;t the final destination */</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      src_index = cur-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">dst_fmt_index</a>;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   }</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <span class="keywordflow">return</span> head;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;}</div><div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="structast__translator_html"><div class="ttname"><a href="../../db/d29/structast__translator.html">ast_translator</a></div><div class="ttdoc">Descriptor of a translator. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00137">translate.h:137</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__translator_html_a69c9aeee8d4f56279cd7e041976ba66c"><div class="ttname"><a href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">ast_translator::dst_fmt_index</a></div><div class="ttdeci">int dst_fmt_index</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00191">translate.h:191</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a94fba7dd372be8c1dd51053a289d4d2d"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a94fba7dd372be8c1dd51053a289d4d2d">ast_trans_pvt::next</a></div><div class="ttdeci">struct ast_trans_pvt * next</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00227">translate.h:227</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structtranslator__path_html_a2d3b3aeb7224f2e738f8a48739fa5043"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html#a2d3b3aeb7224f2e738f8a48739fa5043">translator_path::step</a></div><div class="ttdeci">struct ast_translator * step</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00060">translate.c:60</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a88c9aeea48ba0da726fcc0c5538967c4"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a88c9aeea48ba0da726fcc0c5538967c4">ast_trans_pvt::nextin</a></div><div class="ttdeci">struct timeval nextin</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00228">translate.h:228</a></div></div>
<div class="ttc" id="translate_8c_html_af1b46547497054e6c1e782c3cb54d35f"><div class="ttname"><a href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a></div><div class="ttdeci">static int format2index(struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00133">translate.c:133</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="translate_8c_html_a3b1080a581790d3573b18f6a29b9d032"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3b1080a581790d3573b18f6a29b9d032">ast_translator_free_path</a></div><div class="ttdeci">void ast_translator_free_path(struct ast_trans_pvt *p)</div><div class="ttdoc">Frees a translator path Frees the given translator path structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00475">translate.c:475</a></div></div>
<div class="ttc" id="translate_8c_html_a364459b5b3f78e68329c2dfc828a4cd6"><div class="ttname"><a href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a></div><div class="ttdeci">static struct translator_path * matrix_get(unsigned int x, unsigned int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00282">translate.c:282</a></div></div>
<div class="ttc" id="translate_8c_html_af03e251d10db6eed6af2e54bd1377071"><div class="ttname"><a href="../../de/d43/translate_8c.html#af03e251d10db6eed6af2e54bd1377071">newpvt</a></div><div class="ttdeci">static struct ast_trans_pvt * newpvt(struct ast_translator *t, struct ast_format *explicit_dst)</div><div class="ttdoc">Allocate the descriptor, required outbuf space, and possibly desc. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00311">translate.c:311</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="structast__translator_html_af79a76d35f0dc9d6e5aee149ac5946e1"><div class="ttname"><a href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">ast_translator::dst_codec</a></div><div class="ttdeci">struct ast_codec dst_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00140">translate.h:140</a></div></div>
<div class="ttc" id="structast__trans__pvt_html"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a></div><div class="ttdoc">Default structure for translators, with the basic fields and buffers, all allocated as part of the sa...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00213">translate.h:213</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a64ecb74967a1bc4c00d65c65939f74f5"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a64ecb74967a1bc4c00d65c65939f74f5">ast_trans_pvt::nextout</a></div><div class="ttdeci">struct timeval nextout</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00229">translate.h:229</a></div></div>
<div class="ttc" id="structast__codec_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_codec::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Sample rate (number of samples carried in a second) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00052">codec.h:52</a></div></div>
<div class="ttc" id="time_8h_html_aebf04439f206cc509472ce4b6da48a5a"><div class="ttname"><a href="../../de/df7/time_8h.html#aebf04439f206cc509472ce4b6da48a5a">ast_tv</a></div><div class="ttdeci">struct timeval ast_tv(ast_time_t sec, ast_suseconds_t usec)</div><div class="ttdoc">Returns a timeval from sec, usec. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00226">time.h:226</a></div></div>
<div class="ttc" id="format_8h_html_a499e920008f775eebadd958a42e85862"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a499e920008f775eebadd958a42e85862">ast_format_get_sample_rate</a></div><div class="ttdeci">unsigned int ast_format_get_sample_rate(const struct ast_format *format)</div><div class="ttdoc">Get the sample rate of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00379">format.c:379</a></div></div>
<div class="ttc" id="structast__codec_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_codec::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Type of media this codec contains. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_aa6d45f7a0477a1eb0d1f2ca362986d5a"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">ast_trans_pvt::t</a></div><div class="ttdeci">struct ast_translator * t</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00214">translate.h:214</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5f45354f9e1abc2910205e744bef9384"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f45354f9e1abc2910205e744bef9384">&#9670;&nbsp;</a></span>ast_translator_deactivate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_translator_deactivate </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deactivate a translator. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">t</td><td>translator to deactivate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>nothing</dd></dl>
<p>Disables the specified translator from being used. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01369">1369</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d39/translate_8h_source.html#l00189">ast_translator::active</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>.</p>
<div class="fragment"><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;{</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   t-&gt;<a class="code" href="../../db/d29/structast__translator.html#aa5805c5e936174e5092bf7a5b78e7e64">active</a> = 0;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a>(0);</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;}</div><div class="ttc" id="translate_8c_html_a3d86147d86592846866d3f2913a4dd87"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a></div><div class="ttdeci">static void matrix_rebuild(int samples)</div><div class="ttdoc">rebuild a translation matrix. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00824">translate.c:824</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="structast__translator_html_aa5805c5e936174e5092bf7a5b78e7e64"><div class="ttname"><a href="../../db/d29/structast__translator.html#aa5805c5e936174e5092bf7a5b78e7e64">ast_translator::active</a></div><div class="ttdeci">int active</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00189">translate.h:189</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3b1080a581790d3573b18f6a29b9d032"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b1080a581790d3573b18f6a29b9d032">&#9670;&nbsp;</a></span>ast_translator_free_path()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_translator_free_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td>
          <td class="paramname"><em>tr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Frees a translator path Frees the given translator path structure. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tr</td><td>translator path to get rid of </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00475">475</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d43/translate_8c_source.html#l00291">destroy()</a>, and <a class="el" href="../../db/d39/translate_8h_source.html#l00227">ast_trans_pvt::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00133">ast_audiohook_destroy()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00594">ast_audiohook_detach_list()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02192">ast_channel_destructor()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05575">ast_set_read_format_path()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05611">ast_set_write_format_path()</a>, <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00058">ast_slinfactory_destroy()</a>, <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00077">ast_slinfactory_feed()</a>, <a class="el" href="../../df/dcf/slinfactory_8c_source.html#l00204">ast_slinfactory_flush()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00485">ast_translator_build_path()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00209">ast_writestream()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00878">audiohook_list_translate_to_native()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00832">audiohook_list_translate_to_slin()</a>, <a class="el" href="../../d9/d4f/audiohook_8c_source.html#l00380">audiohook_read_frame_helper()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l02331">conf_free()</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00383">filestream_destructor()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02492">free_translation()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05680">set_format()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00159">softmix_translate_helper_change_rate()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00271">softmix_translate_helper_cleanup()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00130">softmix_translate_helper_free_entry()</a>.</p>
<div class="fragment"><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;{</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *pn = p;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <span class="keywordflow">while</span> ( (p = pn) ) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      pn = p-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a94fba7dd372be8c1dd51053a289d4d2d">next</a>;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a>(p);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;}</div><div class="ttc" id="structast__trans__pvt_html_a94fba7dd372be8c1dd51053a289d4d2d"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a94fba7dd372be8c1dd51053a289d4d2d">ast_trans_pvt::next</a></div><div class="ttdeci">struct ast_trans_pvt * next</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00227">translate.h:227</a></div></div>
<div class="ttc" id="structast__trans__pvt_html"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a></div><div class="ttdoc">Default structure for translators, with the basic fields and buffers, all allocated as part of the sa...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00213">translate.h:213</a></div></div>
<div class="ttc" id="translate_8c_html_acd32a6ef4f3c191685ae65f8439407e7"><div class="ttname"><a href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a></div><div class="ttdeci">static void destroy(struct ast_trans_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00291">translate.c:291</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3db4bb4ca3540f7d09a9d57e820dbe8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3db4bb4ca3540f7d09a9d57e820dbe8a">&#9670;&nbsp;</a></span>ast_unregister_translator()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_unregister_translator </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *&#160;</td>
          <td class="paramname"><em>t</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>unregister codec translator </p>
<p>Unregister a translator Unregisters the given tranlator. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01333">1333</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00569">AST_RWLIST_REMOVE_CURRENT</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00544">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00616">AST_RWLIST_TRAVERSE_SAFE_END</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l01834">ast_shutting_down()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00047">COLOR_BLACK</a>, <a class="el" href="../../db/d45/term_8h_source.html#l00057">COLOR_MAGENTA</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00140">ast_translator::dst_codec</a>, <a class="el" href="../../db/d29/structast__translator.html#ae677d42c6c869892486e648b4bd4a435">ast_translator::list</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00046">ast_codec::name</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00138">ast_translator::name</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00139">ast_translator::src_codec</a>, <a class="el" href="../../d5/de5/term_8c_source.html#l00184">term_color()</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d35/codec__a__mu_8c_source.html#l00119">unload_module()</a>, and <a class="el" href="../../de/d52/codec__dahdi_8c_source.html#l00757">unregister_translators()</a>.</p>
<div class="fragment"><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;{</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>[80];</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d29/structast__translator.html">ast_translator</a> *u;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;   <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>, u, <a class="code" href="../../db/d29/structast__translator.html#ae677d42c6c869892486e648b4bd4a435">list</a>) {</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <span class="keywordflow">if</span> (u == t) {</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a>(<a class="code" href="../../db/d29/structast__translator.html#ae677d42c6c869892486e648b4bd4a435">list</a>);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Unregistered translator &#39;%s&#39; from codec %s to %s\n&quot;</span>,</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;            <a class="code" href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a>(tmp, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">name</a>, <a class="code" href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a>, <a class="code" href="../../db/d45/term_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a>, <span class="keyword">sizeof</span>(tmp)),</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;            t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;         found = 1;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;      }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   }</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   <span class="keywordflow">if</span> (found &amp;&amp; !<a class="code" href="../../db/db2/asterisk_8h.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a>()) {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a>(0);</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keywordflow">return</span> (u ? 0 : -1);</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;}</div><div class="ttc" id="structast__codec_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">ast_codec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name for this codec. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00046">codec.h:46</a></div></div>
<div class="ttc" id="asterisk_8h_html_a6b112b17aed018d85c397e7591948793"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a6b112b17aed018d85c397e7591948793">ast_shutting_down</a></div><div class="ttdeci">int ast_shutting_down(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l01834">asterisk.c:1834</a></div></div>
<div class="ttc" id="translate_8c_html_a3d86147d86592846866d3f2913a4dd87"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a></div><div class="ttdeci">static void matrix_rebuild(int samples)</div><div class="ttdoc">rebuild a translation matrix. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00824">translate.c:824</a></div></div>
<div class="ttc" id="structast__translator_html"><div class="ttname"><a href="../../db/d29/structast__translator.html">ast_translator</a></div><div class="ttdoc">Descriptor of a translator. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00137">translate.h:137</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a02212548652c9eb0f3db38dc4e4bd285"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a02212548652c9eb0f3db38dc4e4bd285">AST_RWLIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_RWLIST_REMOVE_CURRENT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00569">linkedlists.h:569</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a21be6da4b2146b04b4868c2be5cae750"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a21be6da4b2146b04b4868c2be5cae750">AST_RWLIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_BEGIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00544">linkedlists.h:544</a></div></div>
<div class="ttc" id="term_8h_html_a7b6c72116c334f40bf7c1e50e793c93b"><div class="ttname"><a href="../../db/d45/term_8h.html#a7b6c72116c334f40bf7c1e50e793c93b">term_color</a></div><div class="ttdeci">char * term_color(char *outbuf, const char *inbuf, int fgcolor, int bgcolor, int maxout)</div><div class="ttdoc">Colorize a specified string by adding terminal color codes. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/de5/term_8c_source.html#l00184">term.c:184</a></div></div>
<div class="ttc" id="term_8h_html_aba2a7fe77a7501e5844370eec0185207"><div class="ttname"><a href="../../db/d45/term_8h.html#aba2a7fe77a7501e5844370eec0185207">COLOR_BLACK</a></div><div class="ttdeci">#define COLOR_BLACK</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00047">term.h:47</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="structast__translator_html_af79a76d35f0dc9d6e5aee149ac5946e1"><div class="ttname"><a href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">ast_translator::dst_codec</a></div><div class="ttdeci">struct ast_codec dst_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00140">translate.h:140</a></div></div>
<div class="ttc" id="structast__translator_html_ae677d42c6c869892486e648b4bd4a435"><div class="ttname"><a href="../../db/d29/structast__translator.html#ae677d42c6c869892486e648b4bd4a435">ast_translator::list</a></div><div class="ttdeci">struct ast_translator::@326 list</div></div>
<div class="ttc" id="structast__translator_html_a8300e275ac746b701ea61f617be84851"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">ast_translator::src_codec</a></div><div class="ttdeci">struct ast_codec src_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00139">translate.h:139</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a6bf0e81cb6ef01532ddebaba68f6de28"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a6bf0e81cb6ef01532ddebaba68f6de28">AST_RWLIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE_SAFE_END</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00616">linkedlists.h:616</a></div></div>
<div class="ttc" id="structast__translator_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">ast_translator::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00138">translate.h:138</a></div></div>
<div class="ttc" id="term_8h_html_a8deb0beccea721b35bdb1b4f7264fe75"><div class="ttname"><a href="../../db/d45/term_8h.html#a8deb0beccea721b35bdb1b4f7264fe75">COLOR_MAGENTA</a></div><div class="ttdeci">#define COLOR_MAGENTA</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/term_8h_source.html#l00057">term.h:57</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f7ba81f933b321cf6259f7bf36e6b48"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f7ba81f933b321cf6259f7bf36e6b48">&#9670;&nbsp;</a></span>check_translation_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void check_translation_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *&#160;</td>
          <td class="paramname"><em>result</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>src_fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212">ast_media_type</a>&#160;</td>
          <td class="paramname"><em>type</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01513">1513</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00395">ast_format_cap_count()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00400">ast_format_cap_get_format()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00583">ast_format_cap_iscompatible_format()</a>, <a class="el" href="../../d3/dc9/format__cap_8c_source.html#l00497">ast_format_cap_remove()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00036">AST_FORMAT_CMP_EQUAL</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00354">ast_format_get_type()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00133">format2index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00282">matrix_get()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00060">translator_path::step</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01571">ast_translate_available_formats()</a>.</p>
<div class="fragment"><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;{</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(src_fmt) != <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   }</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;   <span class="comment">/* For a given source format, traverse the list of</span></div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;<span class="comment">      known formats to determine whether there exists</span></div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;<span class="comment">      a translation path from the source format to the</span></div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="comment">      destination format. */</span></div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;   <span class="keywordflow">for</span> (i = <a class="code" href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a>(result) - 1; 0 &lt;= i; i--) {</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="keywordtype">int</span> index, src_index;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *, fmt, <a class="code" href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a>(result, i), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a>(fmt) != <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      }</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      <span class="comment">/* if this is not a desired format, nothing to do */</span></div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(dest, fmt) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;      }</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;      <span class="comment">/* if the source is supplying this format, then</span></div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;<span class="comment">         we can leave it in the result */</span></div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a>(src, fmt) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>) {</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;      }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      <span class="comment">/* if this is a pass-through format, not in the source,</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">         we cannot transcode. Therefore, remove it from the result */</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      src_index = <a class="code" href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a>(src_fmt);</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      index = <a class="code" href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a>(fmt);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <span class="keywordflow">if</span> (src_index &lt; 0 || index &lt; 0) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a3cb486542a5cd1b216e631f80f3d593c">ast_format_cap_remove</a>(result, fmt);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      <span class="comment">/* if we don&#39;t have a translation path from the src</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<span class="comment">         to this format, remove it from the result */</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(src_index, index)-&gt;step) {</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a3cb486542a5cd1b216e631f80f3d593c">ast_format_cap_remove</a>(result, fmt);</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      }</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <span class="comment">/* now check the opposite direction */</span></div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(index, src_index)-&gt;step) {</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;         <a class="code" href="../../d0/d3c/format__cap_8h.html#a3cb486542a5cd1b216e631f80f3d593c">ast_format_cap_remove</a>(result, fmt);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      }</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;   }</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00036">format.h:36</a></div></div>
<div class="ttc" id="format_8h_html_a0aba6e17ced3e85e838ea097baa5ddc7"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a0aba6e17ced3e85e838ea097baa5ddc7">ast_format_get_type</a></div><div class="ttdeci">enum ast_media_type ast_format_get_type(const struct ast_format *format)</div><div class="ttdoc">Get the media type of a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00354">format.c:354</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="format__cap_8h_html_aefb7d3623f4d8a582168e7aaf509459c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aefb7d3623f4d8a582168e7aaf509459c">ast_format_cap_count</a></div><div class="ttdeci">size_t ast_format_cap_count(const struct ast_format_cap *cap)</div><div class="ttdoc">Get the number of formats present within the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00395">format_cap.c:395</a></div></div>
<div class="ttc" id="translate_8c_html_af1b46547497054e6c1e782c3cb54d35f"><div class="ttname"><a href="../../de/d43/translate_8c.html#af1b46547497054e6c1e782c3cb54d35f">format2index</a></div><div class="ttdeci">static int format2index(struct ast_format *format)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00133">translate.c:133</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4fadd3c35438f866e29eddc68283bce6"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4fadd3c35438f866e29eddc68283bce6">ast_format_cap_iscompatible_format</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cap_iscompatible_format(const struct ast_format_cap *cap, const struct ast_format *format)</div><div class="ttdoc">Find if ast_format is within the capabilities of the ast_format_cap object. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00583">format_cap.c:583</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="translate_8c_html_a364459b5b3f78e68329c2dfc828a4cd6"><div class="ttname"><a href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a></div><div class="ttdeci">static struct translator_path * matrix_get(unsigned int x, unsigned int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00282">translate.c:282</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="format__cap_8h_html_a3cb486542a5cd1b216e631f80f3d593c"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a3cb486542a5cd1b216e631f80f3d593c">ast_format_cap_remove</a></div><div class="ttdeci">int ast_format_cap_remove(struct ast_format_cap *cap, struct ast_format *format)</div><div class="ttdoc">Remove format capability from capability structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00497">format_cap.c:497</a></div></div>
<div class="ttc" id="format__cap_8h_html_a5d2c52e9d892cd7c6488563cf00ba9bc"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a5d2c52e9d892cd7c6488563cf00ba9bc">ast_format_cap_get_format</a></div><div class="ttdeci">struct ast_format * ast_format_cap_get_format(const struct ast_format_cap *cap, int position)</div><div class="ttdoc">Get the format at a specific index. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00400">format_cap.c:400</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2ff67fa32217b6827c6f17927bb9472"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2ff67fa32217b6827c6f17927bb9472">&#9670;&nbsp;</a></span>codec2index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int codec2index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *&#160;</td>
          <td class="paramname"><em>codec</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00124">124</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d43/translate_8c_source.html#l00104">codec_to_index()</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00044">ast_codec::id</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01220">__ast_register_translator()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00147">add_codec2index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01099">handle_show_translation_path()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00988">handle_show_translation_table()</a>.</p>
<div class="fragment"><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;{</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d43/translate_8c.html#a32a465c859aab8751fec512e617bcd70">codec_to_index</a>(codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#ab7ce6f462afaf105224b0ca772a33c43">id</a>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;}</div><div class="ttc" id="structast__codec_html_ab7ce6f462afaf105224b0ca772a33c43"><div class="ttname"><a href="../../d5/d53/structast__codec.html#ab7ce6f462afaf105224b0ca772a33c43">ast_codec::id</a></div><div class="ttdeci">unsigned int id</div><div class="ttdoc">Internal unique identifier for this codec, set at registration time (starts at 1) ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00044">codec.h:44</a></div></div>
<div class="ttc" id="translate_8c_html_a32a465c859aab8751fec512e617bcd70"><div class="ttname"><a href="../../de/d43/translate_8c.html#a32a465c859aab8751fec512e617bcd70">codec_to_index</a></div><div class="ttdeci">static int codec_to_index(unsigned int id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00104">translate.c:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac2cf931ca857d66b5f628c478f007f76"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac2cf931ca857d66b5f628c478f007f76">&#9670;&nbsp;</a></span>codec_append_name()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void codec_append_name </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *&#160;</td>
          <td class="paramname"><em>codec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>buf</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00919">919</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00046">ast_codec::name</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00928">ast_translate_path_to_str()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l01099">handle_show_translation_path()</a>.</p>
<div class="fragment"><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;{</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;   <span class="keywordflow">if</span> (codec) {</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;(%s@%u)&quot;</span>, codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(buf, 0, <span class="stringliteral">&quot;(nothing)&quot;</span>);</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;}</div><div class="ttc" id="structast__codec_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">ast_codec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name for this codec. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00046">codec.h:46</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__codec_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_codec::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Sample rate (number of samples carried in a second) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00052">codec.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32a465c859aab8751fec512e617bcd70"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32a465c859aab8751fec512e617bcd70">&#9670;&nbsp;</a></span>codec_to_index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int codec_to_index </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00104">104</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d43/translate_8c_source.html#l00083">__indextable</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00233">ast_rwlock_rdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00094">cur_max_index</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00124">codec2index()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00133">format2index()</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a>; x++) {</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a>[x] == <span class="keywordtype">id</span>) {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         <span class="comment">/* format already exists in index2format table */</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;         <span class="keywordflow">return</span> x;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      }</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;   }</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;   <span class="keywordflow">return</span> -1; <span class="comment">/* not found */</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;}</div><div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="translate_8c_html_a3bb2839fae7b799fae04adf7c2285797"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a></div><div class="ttdeci">static ast_rwlock_t tablelock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00086">translate.c:86</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="translate_8c_html_a664e361807a29bba28e6cc3d333f57d8"><div class="ttname"><a href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a></div><div class="ttdeci">static unsigned int * __indextable</div><div class="ttdoc">table for converting index to format values. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00083">translate.c:83</a></div></div>
<div class="ttc" id="translate_8c_html_a121e720f03859a0b5afd89ac1bb4f840"><div class="ttname"><a href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a></div><div class="ttdeci">static int cur_max_index</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00094">translate.c:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a14c01f75699ba4580c4351be88a03ff6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a14c01f75699ba4580c4351be88a03ff6">&#9670;&nbsp;</a></span>complete_trans_path_choice()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* complete_trans_path_choice </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>word</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00945">945</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l02726">ast_cli_completion_add()</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00337">ast_codec_get_by_id()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00046">ast_codec::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00050">ast_codec::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01164">handle_cli_core_show_translation()</a>.</p>
<div class="fragment"><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;{</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <span class="keywordtype">int</span> i = 1;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <span class="keywordtype">int</span> wordlen = strlen(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *codec;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keywordflow">while</span> ((codec = <a class="code" href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a>(i))) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;      ++i;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">if</span> (codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(codec, -1);</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;      }</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, wordlen)) {</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a>(<a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>))) {</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(codec, -1);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;         }</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(codec, -1);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   }</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;}</div><div class="ttc" id="structast__codec_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">ast_codec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name for this codec. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00046">codec.h:46</a></div></div>
<div class="ttc" id="codec_8h_html_aa22f18a97d3eb0d00d4938bfe9d2592c"><div class="ttname"><a href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a></div><div class="ttdeci">struct ast_codec * ast_codec_get_by_id(int id)</div><div class="ttdoc">Retrieve a codec given the unique identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00337">codec.c:337</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__codec_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_codec::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Type of media this codec contains. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="cli_8h_html_a6f5f6c330757d980065d3f887c62237f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a6f5f6c330757d980065d3f887c62237f">ast_cli_completion_add</a></div><div class="ttdeci">int ast_cli_completion_add(char *value)</div><div class="ttdoc">Add a result to a request for completion options. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l02726">main/cli.c:2726</a></div></div>
<div class="ttc" id="structast__codec_html"><div class="ttname"><a href="../../d5/d53/structast__codec.html">ast_codec</a></div><div class="ttdoc">Represents a media codec within Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00042">codec.h:42</a></div></div>
<div class="ttc" id="codecs_2gsm_2inc_2private_8h_html_a0b023cbb2bf7d034c2269d58d7455ac8"><div class="ttname"><a href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a></div><div class="ttdeci">short word</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da0/codecs_2gsm_2inc_2private_8h_source.html#l00012">codecs/gsm/inc/private.h:12</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a52e268c1afbb047c041d654d036fe47b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a52e268c1afbb047c041d654d036fe47b">&#9670;&nbsp;</a></span>default_frameout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* default_frameout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td>
          <td class="paramname"><em>pvt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00468">468</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d43/translate_8c_source.html#l00438">ast_trans_frameout()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01220">__ast_register_translator()</a>.</p>
<div class="fragment"><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;{</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d43/translate_8c.html#ae7838b495e22798cfce427b03f53cde9">ast_trans_frameout</a>(pvt, 0, 0);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div><div class="ttc" id="translate_8c_html_ae7838b495e22798cfce427b03f53cde9"><div class="ttname"><a href="../../de/d43/translate_8c.html#ae7838b495e22798cfce427b03f53cde9">ast_trans_frameout</a></div><div class="ttdeci">struct ast_frame * ast_trans_frameout(struct ast_trans_pvt *pvt, int datalen, int samples)</div><div class="ttdoc">generic frameout routine. If samples and datalen are 0, take whatever is in pvt and reset them...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00438">translate.c:438</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd32a6ef4f3c191685ae65f8439407e7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd32a6ef4f3c191685ae65f8439407e7">&#9670;&nbsp;</a></span>destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td>
          <td class="paramname"><em>pvt</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00291">291</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00469">ast_module_unref</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00166">ast_translator::destroy</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00237">ast_trans_pvt::explicit_dst</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00215">ast_trans_pvt::f</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00187">ast_translator::module</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, and <a class="el" href="../../db/d39/translate_8h_source.html#l00214">ast_trans_pvt::t</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00475">ast_translator_free_path()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00690">generate_computational_cost()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00311">newpvt()</a>, and <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l01492">rtp_ioqueue_thread_remove()</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d29/structast__translator.html">ast_translator</a> *t = pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a330aef024ad91c13954a127a6d09c73e">destroy</a>) {</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;      t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a330aef024ad91c13954a127a6d09c73e">destroy</a>(pvt);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   }</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>);</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">if</span> (pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ac3fe940eb9f3a9f1b0c9268577457c64">explicit_dst</a>) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ac3fe940eb9f3a9f1b0c9268577457c64">explicit_dst</a>, -1);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ac3fe940eb9f3a9f1b0c9268577457c64">explicit_dst</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   }</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(pvt);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div><div class="ttc" id="structast__translator_html"><div class="ttname"><a href="../../db/d29/structast__translator.html">ast_translator</a></div><div class="ttdoc">Descriptor of a translator. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00137">translate.h:137</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">ast_trans_pvt::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00215">translate.h:215</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="module_8h_html_a15896c26e51e8162df5eb9a0124c841f"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a></div><div class="ttdeci">#define ast_module_unref(mod)</div><div class="ttdoc">Release a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00469">module.h:469</a></div></div>
<div class="ttc" id="structast__translator_html_a8637433cfbb88aeb10ce2ed5dcba0eb1"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">ast_translator::module</a></div><div class="ttdeci">struct ast_module * module</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00187">translate.h:187</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__translator_html_a330aef024ad91c13954a127a6d09c73e"><div class="ttname"><a href="../../db/d29/structast__translator.html#a330aef024ad91c13954a127a6d09c73e">ast_translator::destroy</a></div><div class="ttdeci">void(* destroy)(struct ast_trans_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00166">translate.h:166</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_ac3fe940eb9f3a9f1b0c9268577457c64"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#ac3fe940eb9f3a9f1b0c9268577457c64">ast_trans_pvt::explicit_dst</a></div><div class="ttdeci">struct ast_format * explicit_dst</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00237">translate.h:237</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_aa6d45f7a0477a1eb0d1f2ca362986d5a"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">ast_trans_pvt::t</a></div><div class="ttdeci">struct ast_translator * t</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00214">translate.h:214</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af1b46547497054e6c1e782c3cb54d35f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af1b46547497054e6c1e782c3cb54d35f">&#9670;&nbsp;</a></span>format2index()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int format2index </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>format</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00133">133</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/da6/format_8c_source.html#l00329">ast_format_get_codec_id()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00104">codec_to_index()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01491">ast_translate_path_steps()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01385">ast_translator_best_choice()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00485">ast_translator_build_path()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l01513">check_translation_path()</a>.</p>
<div class="fragment"><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d43/translate_8c.html#a32a465c859aab8751fec512e617bcd70">codec_to_index</a>(<a class="code" href="../../d0/d0a/format_8h.html#a22b99f6d58d54938ec6753f3865f0005">ast_format_get_codec_id</a>(format));</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;}</div><div class="ttc" id="translate_8c_html_a32a465c859aab8751fec512e617bcd70"><div class="ttname"><a href="../../de/d43/translate_8c.html#a32a465c859aab8751fec512e617bcd70">codec_to_index</a></div><div class="ttdeci">static int codec_to_index(unsigned int id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00104">translate.c:104</a></div></div>
<div class="ttc" id="format_8h_html_a22b99f6d58d54938ec6753f3865f0005"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a22b99f6d58d54938ec6753f3865f0005">ast_format_get_codec_id</a></div><div class="ttdeci">unsigned int ast_format_get_codec_id(const struct ast_format *format)</div><div class="ttdoc">Get the codec identifier associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00329">format.c:329</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aee1bfcdafcc358c9ead7a53e05e1c35a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee1bfcdafcc358c9ead7a53e05e1c35a">&#9670;&nbsp;</a></span>framein()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int framein </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td>
          <td class="paramname"><em>pvt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>framein wrapper, deals with bound checks. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00396">396</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00084">ast_copy_flags</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00143">AST_FRFLAG_HAS_TIMING_INFO</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00177">ast_translator::buffer_samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00140">ast_translator::dst_codec</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00215">ast_trans_pvt::f</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00154">ast_translator::framein</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">ast_frame::len</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00138">ast_translator::name</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00185">ast_translator::native_plc</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00216">ast_trans_pvt::samples</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">ast_frame::seqno</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00139">ast_translator::src_codec</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00214">ast_trans_pvt::t</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">ast_frame::ts</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00565">ast_translate()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00690">generate_computational_cost()</a>.</p>
<div class="fragment"><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;{</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="comment">/* Copy the last in jb timing info to the pvt */</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(&amp;pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>, f, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a>);</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ts</a>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a>;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">seqno</a>;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;   <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> == 0) {</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <span class="comment">/* Do not log empty audio frame */</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">if</span> (!f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> || strcasecmp(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a>, <span class="stringliteral">&quot;ast_prod&quot;</span>)) {</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;no samples for %s\n&quot;</span>, pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      }</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   }</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keywordflow">if</span> (pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a4583efe82087786f5079af61aeca941f">buffer_samples</a>) { <span class="comment">/* do not pass empty frames to callback */</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keywordtype">int</span> src_srate = pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      <span class="keywordtype">int</span> dst_srate = pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(src_srate &gt; 0);</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> == 0) { <span class="comment">/* perform native PLC if available */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;         <span class="comment">/* If the codec has native PLC, then do that */</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;         <span class="keywordflow">if</span> (!pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#af540080885eb0c238243d54a20a4e201">native_plc</a>)</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">if</span> (pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a37672e6b906143604cefd3e959777b31">samples</a> + (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> * dst_srate / src_srate) &gt; pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a4583efe82087786f5079af61aeca941f">buffer_samples</a>) {</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Out of buffer space\n&quot;</span>);</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;      }</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;   }</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   <span class="comment">/* we require a framein routine, wouldn&#39;t know how to do</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">    * it otherwise.</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keywordflow">return</span> pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a79d1573b307ab86e40ef1d26a7e370b2">framein</a>(pvt, f);</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;}</div><div class="ttc" id="structast__frame_html_ab793262012344621455faf9266acbac2"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ab793262012344621455faf9266acbac2">ast_frame::seqno</a></div><div class="ttdeci">int seqno</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00195">include/asterisk/frame.h:195</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac6bea760bc75e449a80b8cc28bf9a2feae8f674e19f6450e2b746c8a52c11649a">AST_FRFLAG_HAS_TIMING_INFO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00143">include/asterisk/frame.h:143</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">ast_trans_pvt::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00215">translate.h:215</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__frame_html_a1eb46dcb363821328c0d2a758549216b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a1eb46dcb363821328c0d2a758549216b">ast_frame::ts</a></div><div class="ttdeci">long ts</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00191">include/asterisk/frame.h:191</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="utils_8h_html_ab9da1c7265610eff83ed6146f104dc6f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a></div><div class="ttdeci">#define ast_copy_flags(dest, src, flagz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00084">utils.h:84</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="structast__translator_html_af540080885eb0c238243d54a20a4e201"><div class="ttname"><a href="../../db/d29/structast__translator.html#af540080885eb0c238243d54a20a4e201">ast_translator::native_plc</a></div><div class="ttdeci">int native_plc</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00185">translate.h:185</a></div></div>
<div class="ttc" id="structast__translator_html_af79a76d35f0dc9d6e5aee149ac5946e1"><div class="ttname"><a href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">ast_translator::dst_codec</a></div><div class="ttdeci">struct ast_codec dst_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00140">translate.h:140</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a37672e6b906143604cefd3e959777b31">ast_trans_pvt::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00216">translate.h:216</a></div></div>
<div class="ttc" id="structast__translator_html_a8300e275ac746b701ea61f617be84851"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">ast_translator::src_codec</a></div><div class="ttdeci">struct ast_codec src_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00139">translate.h:139</a></div></div>
<div class="ttc" id="structast__codec_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_codec::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Sample rate (number of samples carried in a second) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00052">codec.h:52</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_aa6d45f7a0477a1eb0d1f2ca362986d5a"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">ast_trans_pvt::t</a></div><div class="ttdeci">struct ast_translator * t</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00214">translate.h:214</a></div></div>
<div class="ttc" id="structast__frame_html_aaccba9d5adc3f6c39aad767db95ba484"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">ast_frame::len</a></div><div class="ttdeci">long len</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">include/asterisk/frame.h:193</a></div></div>
<div class="ttc" id="structast__translator_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">ast_translator::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00138">translate.h:138</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="structast__translator_html_a79d1573b307ab86e40ef1d26a7e370b2"><div class="ttname"><a href="../../db/d29/structast__translator.html#a79d1573b307ab86e40ef1d26a7e370b2">ast_translator::framein</a></div><div class="ttdeci">int(* framein)(struct ast_trans_pvt *pvt, struct ast_frame *in)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00154">translate.h:154</a></div></div>
<div class="ttc" id="structast__translator_html_a4583efe82087786f5079af61aeca941f"><div class="ttname"><a href="../../db/d29/structast__translator.html#a4583efe82087786f5079af61aeca941f">ast_translator::buffer_samples</a></div><div class="ttdeci">int buffer_samples</div><div class="ttdoc">size of outbuf, in samples. Leave it 0 if you want the framein callback deal with the frame...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00177">translate.h:177</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abbb07f0735a0f32daa23a7751461d500"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abbb07f0735a0f32daa23a7751461d500">&#9670;&nbsp;</a></span>generate_computational_cost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void generate_computational_cost </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>seconds</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00690">690</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">ast_frfree</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00147">ast_translator::comp_cost</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00291">destroy()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00140">ast_translator::dst_codec</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00396">framein()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00158">ast_translator::frameout</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00138">ast_translator::name</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00311">newpvt()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00219">ast_trans_pvt::pvt</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00170">ast_translator::sample</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01220">__ast_register_translator()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>.</p>
<div class="fragment"><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;{</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   <span class="keywordtype">int</span> num_samples = 0;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *<a class="code" href="../../d1/d47/structast__trans__pvt.html#a77153a7ab7ba05031fbbb4e67aa9dcfc">pvt</a>;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="keyword">struct </span>rusage start;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <span class="keyword">struct </span>rusage <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <span class="keywordtype">int</span> cost;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="keywordtype">int</span> out_rate = t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="keywordflow">if</span> (!seconds) {</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      seconds = 1;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   }</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   <span class="comment">/* If they don&#39;t make samples, give them a terrible score */</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   <span class="keywordflow">if</span> (!t-&gt;<a class="code" href="../../db/d29/structast__translator.html#aa94a74324261a79e3f931c14db722129">sample</a>) {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Translator &#39;%s&#39; does not produce sample frames.\n&quot;</span>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;      t-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a> = 999999;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;   }</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;   pvt = <a class="code" href="../../de/d43/translate_8c.html#af03e251d10db6eed6af2e54bd1377071">newpvt</a>(t, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <span class="keywordflow">if</span> (!pvt) {</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Translator &#39;%s&#39; appears to be broken and will probably fail.\n&quot;</span>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      t-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a> = 999999;</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;   getrusage(RUSAGE_SELF, &amp;start);</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;   <span class="comment">/* Call the encoder until we&#39;ve processed the required number of samples */</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <span class="keywordflow">while</span> (num_samples &lt; seconds * out_rate) {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = t-&gt;<a class="code" href="../../db/d29/structast__translator.html#aa94a74324261a79e3f931c14db722129">sample</a>();</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;      <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Translator &#39;%s&#39; failed to produce a sample frame.\n&quot;</span>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">name</a>);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;         <a class="code" href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a>(pvt);</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;         t-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a> = 999999;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;      }</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#aee1bfcdafcc358c9ead7a53e05e1c35a">framein</a>(pvt, f);</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;      <span class="keywordflow">while</span> ((f = t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a37ac28603c7f4f2f3bc2fb1e6930a00e">frameout</a>(pvt))) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;         num_samples += f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;      }</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   }</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   getrusage(RUSAGE_SELF, &amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>);</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   cost = ((<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>.ru_utime.tv_sec - start.ru_utime.tv_sec) * 1000000) + <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>.ru_utime.tv_usec - start.ru_utime.tv_usec;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;   cost += ((<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>.ru_stime.tv_sec - start.ru_stime.tv_sec) * 1000000) + <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>.ru_stime.tv_usec - start.ru_stime.tv_usec;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a>(pvt);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   t-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a> = cost / seconds;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;   <span class="keywordflow">if</span> (!t-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a>) {</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      t-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a> = 1;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   }</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div><div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a77153a7ab7ba05031fbbb4e67aa9dcfc"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a77153a7ab7ba05031fbbb4e67aa9dcfc">ast_trans_pvt::pvt</a></div><div class="ttdeci">void * pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00219">translate.h:219</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="translate_8c_html_aee1bfcdafcc358c9ead7a53e05e1c35a"><div class="ttname"><a href="../../de/d43/translate_8c.html#aee1bfcdafcc358c9ead7a53e05e1c35a">framein</a></div><div class="ttdeci">static int framein(struct ast_trans_pvt *pvt, struct ast_frame *f)</div><div class="ttdoc">framein wrapper, deals with bound checks. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00396">translate.c:396</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="translate_8c_html_af03e251d10db6eed6af2e54bd1377071"><div class="ttname"><a href="../../de/d43/translate_8c.html#af03e251d10db6eed6af2e54bd1377071">newpvt</a></div><div class="ttdeci">static struct ast_trans_pvt * newpvt(struct ast_translator *t, struct ast_format *explicit_dst)</div><div class="ttdoc">Allocate the descriptor, required outbuf space, and possibly desc. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00311">translate.c:311</a></div></div>
<div class="ttc" id="structast__translator_html_af79a76d35f0dc9d6e5aee149ac5946e1"><div class="ttname"><a href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">ast_translator::dst_codec</a></div><div class="ttdeci">struct ast_codec dst_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00140">translate.h:140</a></div></div>
<div class="ttc" id="structast__trans__pvt_html"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a></div><div class="ttdoc">Default structure for translators, with the basic fields and buffers, all allocated as part of the sa...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00213">translate.h:213</a></div></div>
<div class="ttc" id="translate_8c_html_acd32a6ef4f3c191685ae65f8439407e7"><div class="ttname"><a href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a></div><div class="ttdeci">static void destroy(struct ast_trans_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00291">translate.c:291</a></div></div>
<div class="ttc" id="structast__translator_html_aa94a74324261a79e3f931c14db722129"><div class="ttname"><a href="../../db/d29/structast__translator.html#aa94a74324261a79e3f931c14db722129">ast_translator::sample</a></div><div class="ttdeci">struct ast_frame *(* sample)(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00170">translate.h:170</a></div></div>
<div class="ttc" id="structast__codec_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_codec::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Sample rate (number of samples carried in a second) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00052">codec.h:52</a></div></div>
<div class="ttc" id="structast__translator_html_a37ac28603c7f4f2f3bc2fb1e6930a00e"><div class="ttname"><a href="../../db/d29/structast__translator.html#a37ac28603c7f4f2f3bc2fb1e6930a00e">ast_translator::frameout</a></div><div class="ttdeci">struct ast_frame *(* frameout)(struct ast_trans_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00158">translate.h:158</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__translator_html_ac782b27c1b87673e4eddde7bdd3e5253"><div class="ttname"><a href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">ast_translator::comp_cost</a></div><div class="ttdeci">int comp_cost</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00147">translate.h:147</a></div></div>
<div class="ttc" id="structast__translator_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">ast_translator::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00138">translate.h:138</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abe44d8a282a7252be9de819190f8e840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe44d8a282a7252be9de819190f8e840">&#9670;&nbsp;</a></span>generate_interpolated_slin()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a>* generate_interpolated_slin </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *&#160;</td>
          <td class="paramname"><em>p</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>f</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00536">536</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00520">ast_format_cache_get_slin_by_rate()</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../d9/d29/format__cache_8c_source.html#l00041">ast_format_slin</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">ast_frdup</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../d7/d5b/options_8h_source.html#l00134">ast_opt_generic_plc</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00237">ast_trans_pvt::explicit_dst</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">ast_frame::samples</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00565">ast_translate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;{</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> res = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> };</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">    * If we&#39;ve gotten here then we should have an interpolated frame that was not handled</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">    * by the translation codec. So create an interpolated frame in the appropriate format</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">    * that was going to be written. This frame might be handled later by other resources.</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">    * For instance, generic plc.</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">    * Note, generic plc is currently only available for the format type &#39;slin&#39; (8KHz only -</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">    * The generic plc code appears to have been based around that). Generic plc is filled</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">    * in later on frame write.</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d5b/options_8h.html#aec9ad52a51bdb17fb149b63bfb9244bf">ast_opt_generic_plc</a> || f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> != 0 ||</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(p-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ac3fe940eb9f3a9f1b0c9268577457c64">explicit_dst</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   }</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   res.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../db/d1c/format__cache_8h.html#ab660f51155ceeabb4abd0e25cd3a11a6">ast_format_cache_get_slin_by_rate</a>(8000); <span class="comment">/* ref bumped on dup */</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   res.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   res.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = 0;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;   res.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   res.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(&amp;res);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="options_8h_html_aec9ad52a51bdb17fb149b63bfb9244bf"><div class="ttname"><a href="../../d7/d5b/options_8h.html#aec9ad52a51bdb17fb149b63bfb9244bf">ast_opt_generic_plc</a></div><div class="ttdeci">#define ast_opt_generic_plc</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5b/options_8h_source.html#l00134">options.h:134</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_ac3fe940eb9f3a9f1b0c9268577457c64"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#ac3fe940eb9f3a9f1b0c9268577457c64">ast_trans_pvt::explicit_dst</a></div><div class="ttdeci">struct ast_format * explicit_dst</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00237">translate.h:237</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="format__cache_8h_html_ab660f51155ceeabb4abd0e25cd3a11a6"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#ab660f51155ceeabb4abd0e25cd3a11a6">ast_format_cache_get_slin_by_rate</a></div><div class="ttdeci">struct ast_format * ast_format_cache_get_slin_by_rate(unsigned int rate)</div><div class="ttdoc">Retrieve the best signed linear format given a sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00520">format_cache.c:520</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adccbb0706edea3272a49428564046bf2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adccbb0706edea3272a49428564046bf2">&#9670;&nbsp;</a></span>generate_table_cost()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int generate_table_cost </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a> *&#160;</td>
          <td class="paramname"><em>dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00768">768</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00076">AST_TRANS_COST_LL_LL_DOWNSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00066">AST_TRANS_COST_LL_LL_ORIGSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00071">AST_TRANS_COST_LL_LL_UPSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00078">AST_TRANS_COST_LL_LY_DOWNSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00068">AST_TRANS_COST_LL_LY_ORIGSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00073">AST_TRANS_COST_LL_LY_UPSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00083">AST_TRANS_COST_LL_UNKNOWN</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00098">AST_TRANS_COST_LY_LL_DOWNSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00088">AST_TRANS_COST_LY_LL_ORIGSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00093">AST_TRANS_COST_LY_LL_UPSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00100">AST_TRANS_COST_LY_LY_DOWNSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00090">AST_TRANS_COST_LY_LY_ORIGSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00095">AST_TRANS_COST_LY_LY_UPSAMP</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00105">AST_TRANS_COST_LY_UNKNOWN</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00046">ast_codec::name</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00050">ast_codec::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01220">__ast_register_translator()</a>.</p>
<div class="fragment"><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;{</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keywordtype">int</span> src_rate = src-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <span class="keywordtype">int</span> src_ll = 0;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="keywordtype">int</span> dst_rate = dst-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <span class="keywordtype">int</span> dst_ll = 0;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <span class="keywordflow">if</span> ((src-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) ||</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;       (dst-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>)) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      <span class="comment">/* This method of generating table cost is limited to audio.</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="comment">       * Translators for media other than audio must manually set their</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="comment">       * table cost. */</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   }</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   src_ll = !strcmp(src-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;slin&quot;</span>);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   dst_ll = !strcmp(dst-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;slin&quot;</span>);</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <span class="keywordflow">if</span> (src_ll) {</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;      <span class="keywordflow">if</span> (dst_ll &amp;&amp; (src_rate == dst_rate)) {</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eae79390c2d9616cba91babc70f1720b9d">AST_TRANS_COST_LL_LL_ORIGSAMP</a>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!dst_ll &amp;&amp; (src_rate == dst_rate)) {</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eabc38b4d7a9bb5dc02fa5dd64d819bbb6">AST_TRANS_COST_LL_LY_ORIGSAMP</a>;</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst_ll &amp;&amp; (src_rate &lt; dst_rate)) {</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea52707859f25dee220ec5a929b31130fa">AST_TRANS_COST_LL_LL_UPSAMP</a>;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!dst_ll &amp;&amp; (src_rate &lt; dst_rate)) {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eac3ee7cc47efbd1b180e475b718b703dc">AST_TRANS_COST_LL_LY_UPSAMP</a>;</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst_ll &amp;&amp; (src_rate &gt; dst_rate)) {</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea34670ec3b3565b3f38d1c4ca78ab6d41">AST_TRANS_COST_LL_LL_DOWNSAMP</a>;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!dst_ll &amp;&amp; (src_rate &gt; dst_rate)) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eaad8662392e86d801e258a320dc3664b0">AST_TRANS_COST_LL_LY_DOWNSAMP</a>;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea9764e7d9fcd7036ec6789d620c7cc21f">AST_TRANS_COST_LL_UNKNOWN</a>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;      <span class="keywordflow">if</span> (dst_ll &amp;&amp; (src_rate == dst_rate)) {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea82cae462888ce4a53f91d464e7cb8fc4">AST_TRANS_COST_LY_LL_ORIGSAMP</a>;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!dst_ll &amp;&amp; (src_rate == dst_rate)) {</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea51543ffba9a2e48a1551b94c3f1eb593">AST_TRANS_COST_LY_LY_ORIGSAMP</a>;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst_ll &amp;&amp; (src_rate &lt; dst_rate)) {</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eaccfe9fb71393d35bebe7f7ae5e4e9e1a">AST_TRANS_COST_LY_LL_UPSAMP</a>;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!dst_ll &amp;&amp; (src_rate &lt; dst_rate)) {</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eac4f42abe94ab7c8a4d1826ff37a1b2b5">AST_TRANS_COST_LY_LY_UPSAMP</a>;</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dst_ll &amp;&amp; (src_rate &gt; dst_rate)) {</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eaa6d735e8764f3a1305291f80dc8862d6">AST_TRANS_COST_LY_LL_DOWNSAMP</a>;</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!dst_ll &amp;&amp; (src_rate &gt; dst_rate)) {</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea03bcb0149d4b0c7a61e5b752949af309">AST_TRANS_COST_LY_LY_DOWNSAMP</a>;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eac0d3fa3098bbbf544eb7cf633347f70a">AST_TRANS_COST_LY_UNKNOWN</a>;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;      }</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;   }</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;}</div><div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38eaccfe9fb71393d35bebe7f7ae5e4e9e1a"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eaccfe9fb71393d35bebe7f7ae5e4e9e1a">AST_TRANS_COST_LY_LL_UPSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00093">translate.h:93</a></div></div>
<div class="ttc" id="structast__codec_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">ast_codec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name for this codec. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00046">codec.h:46</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38ea34670ec3b3565b3f38d1c4ca78ab6d41"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea34670ec3b3565b3f38d1c4ca78ab6d41">AST_TRANS_COST_LL_LL_DOWNSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00076">translate.h:76</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38ea9764e7d9fcd7036ec6789d620c7cc21f"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea9764e7d9fcd7036ec6789d620c7cc21f">AST_TRANS_COST_LL_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00083">translate.h:83</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38ea51543ffba9a2e48a1551b94c3f1eb593"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea51543ffba9a2e48a1551b94c3f1eb593">AST_TRANS_COST_LY_LY_ORIGSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00090">translate.h:90</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38ea03bcb0149d4b0c7a61e5b752949af309"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea03bcb0149d4b0c7a61e5b752949af309">AST_TRANS_COST_LY_LY_DOWNSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00100">translate.h:100</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38ea52707859f25dee220ec5a929b31130fa"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea52707859f25dee220ec5a929b31130fa">AST_TRANS_COST_LL_LL_UPSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00071">translate.h:71</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38eabc38b4d7a9bb5dc02fa5dd64d819bbb6"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eabc38b4d7a9bb5dc02fa5dd64d819bbb6">AST_TRANS_COST_LL_LY_ORIGSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00068">translate.h:68</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38eaad8662392e86d801e258a320dc3664b0"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eaad8662392e86d801e258a320dc3664b0">AST_TRANS_COST_LL_LY_DOWNSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00078">translate.h:78</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38eaa6d735e8764f3a1305291f80dc8862d6"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eaa6d735e8764f3a1305291f80dc8862d6">AST_TRANS_COST_LY_LL_DOWNSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00098">translate.h:98</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38ea82cae462888ce4a53f91d464e7cb8fc4"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38ea82cae462888ce4a53f91d464e7cb8fc4">AST_TRANS_COST_LY_LL_ORIGSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00088">translate.h:88</a></div></div>
<div class="ttc" id="structast__codec_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_codec::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Sample rate (number of samples carried in a second) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00052">codec.h:52</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38eae79390c2d9616cba91babc70f1720b9d"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eae79390c2d9616cba91babc70f1720b9d">AST_TRANS_COST_LL_LL_ORIGSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00066">translate.h:66</a></div></div>
<div class="ttc" id="structast__codec_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_codec::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Type of media this codec contains. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38eac3ee7cc47efbd1b180e475b718b703dc"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eac3ee7cc47efbd1b180e475b718b703dc">AST_TRANS_COST_LL_LY_UPSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00073">translate.h:73</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38eac4f42abe94ab7c8a4d1826ff37a1b2b5"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eac4f42abe94ab7c8a4d1826ff37a1b2b5">AST_TRANS_COST_LY_LY_UPSAMP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00095">translate.h:95</a></div></div>
<div class="ttc" id="translate_8h_html_a85d34d6843629445aecd2c954b6ba38eac0d3fa3098bbbf544eb7cf633347f70a"><div class="ttname"><a href="../../db/d39/translate_8h.html#a85d34d6843629445aecd2c954b6ba38eac0d3fa3098bbbf544eb7cf633347f70a">AST_TRANS_COST_LY_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00105">translate.h:105</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a43d75309415c6f46f89e2f12bafd43a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a43d75309415c6f46f89e2f12bafd43a7">&#9670;&nbsp;</a></span>handle_cli_core_show_translation()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_cli_core_show_translation </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01164">1164</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l01811">ast_cli_complete()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00945">complete_trans_path_choice()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00969">handle_cli_recalc()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01099">handle_show_translation_path()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00988">handle_show_translation_table()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;{</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;   <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> option[] = { <span class="stringliteral">&quot;recalc&quot;</span>, <span class="stringliteral">&quot;paths&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> };</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show translation&quot;</span>;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;         <span class="stringliteral">&quot;Usage: &#39;core show translation&#39; can be used in two ways.\n&quot;</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;         <span class="stringliteral">&quot;       1. &#39;core show translation [recalc [&lt;recalc seconds&gt;]]\n&quot;</span></div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;         <span class="stringliteral">&quot;          Displays known codec translators and the cost associated\n&quot;</span></div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;         <span class="stringliteral">&quot;          with each conversion.  If the argument &#39;recalc&#39; is supplied along\n&quot;</span></div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;         <span class="stringliteral">&quot;          with optional number of seconds to test a new test will be performed\n&quot;</span></div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;         <span class="stringliteral">&quot;          as the chart is being displayed.\n&quot;</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;         <span class="stringliteral">&quot;       2. &#39;core show translation paths [codec [sample_rate]]&#39;\n&quot;</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;         <span class="stringliteral">&quot;           This will display all the translation paths associated with a codec.\n&quot;</span></div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;         <span class="stringliteral">&quot;           If a codec has multiple sample rates, the sample rate must be\n&quot;</span></div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;         <span class="stringliteral">&quot;           provided as well.\n&quot;</span>;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 3) {</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, option, -1);</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;      }</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 4 &amp;&amp; !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], option[1])) {</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d43/translate_8c.html#a14c01f75699ba4580c4351be88a03ff6">complete_trans_path_choice</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>);</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;      }</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;      <span class="comment">/* BUGBUG - add tab completion for sample rates */</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   }</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 6)</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3] &amp;&amp; !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], option[1]) &amp;&amp; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 5) { <span class="comment">/* show paths */</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d43/translate_8c.html#a113db2d8bd5e4c6457bf3706e85fdd71">handle_show_translation_path</a>(a, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], 0);</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3] &amp;&amp; !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], option[1]) &amp;&amp; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 6) {</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> sample_rate;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;      <span class="keywordflow">if</span> (sscanf(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5], <span class="stringliteral">&quot;%30u&quot;</span>, &amp;sample_rate) != 1) {</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Invalid sample rate: %s.\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[5]);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      }</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../de/d43/translate_8c.html#a113db2d8bd5e4c6457bf3706e85fdd71">handle_show_translation_path</a>(a, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4], sample_rate);</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3] &amp;&amp; !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], option[0])) { <span class="comment">/* recalc and then fall through to show table */</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#a26d50066349146cb6a593c9038aa7028">handle_cli_recalc</a>(a);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &gt; 3) { <span class="comment">/* wrong input */</span></div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;   }</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d43/translate_8c.html#ac973ca316d62f9d6d5f0798f19e6a8ca">handle_show_translation_table</a>(a);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="translate_8c_html_a26d50066349146cb6a593c9038aa7028"><div class="ttname"><a href="../../de/d43/translate_8c.html#a26d50066349146cb6a593c9038aa7028">handle_cli_recalc</a></div><div class="ttdeci">static void handle_cli_recalc(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00969">translate.c:969</a></div></div>
<div class="ttc" id="cli_8h_html_a2a43f82ed19e84f386787154f2f22fc9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a2a43f82ed19e84f386787154f2f22fc9">ast_cli_complete</a></div><div class="ttdeci">char * ast_cli_complete(const char *word, const char *const choices[], int pos)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l01811">main/cli.c:1811</a></div></div>
<div class="ttc" id="translate_8c_html_a113db2d8bd5e4c6457bf3706e85fdd71"><div class="ttname"><a href="../../de/d43/translate_8c.html#a113db2d8bd5e4c6457bf3706e85fdd71">handle_show_translation_path</a></div><div class="ttdeci">static char * handle_show_translation_path(struct ast_cli_args *a, const char *codec_name, unsigned int sample_rate)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01099">translate.c:1099</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="translate_8c_html_a14c01f75699ba4580c4351be88a03ff6"><div class="ttname"><a href="../../de/d43/translate_8c.html#a14c01f75699ba4580c4351be88a03ff6">complete_trans_path_choice</a></div><div class="ttdeci">static char * complete_trans_path_choice(const char *word)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00945">translate.c:945</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="translate_8c_html_ac973ca316d62f9d6d5f0798f19e6a8ca"><div class="ttname"><a href="../../de/d43/translate_8c.html#ac973ca316d62f9d6d5f0798f19e6a8ca">handle_show_translation_table</a></div><div class="ttdeci">static char * handle_show_translation_table(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00988">translate.c:988</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a26d50066349146cb6a593c9038aa7028"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a26d50066349146cb6a593c9038aa7028">&#9670;&nbsp;</a></span>handle_cli_recalc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void handle_cli_recalc </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00969">969</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00054">MAX_RECALC</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01164">handle_cli_core_show_translation()</a>.</p>
<div class="fragment"><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;{</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <span class="keywordtype">int</span> time = a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4] ? atoi(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[4]) : 1;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   <span class="keywordflow">if</span> (time &lt;= 0) {</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;         Recalc must be greater than 0.  Defaulting to 1.\n&quot;</span>);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      time = 1;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <span class="keywordflow">if</span> (time &gt; <a class="code" href="../../de/d43/translate_8c.html#ac83a107ff74dbfdd57b5f8272d787674">MAX_RECALC</a>) {</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;         Maximum limit of recalc exceeded by %d, truncating value to %d\n&quot;</span>, time - <a class="code" href="../../de/d43/translate_8c.html#ac83a107ff74dbfdd57b5f8272d787674">MAX_RECALC</a>, <a class="code" href="../../de/d43/translate_8c.html#ac83a107ff74dbfdd57b5f8272d787674">MAX_RECALC</a>);</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      time = <a class="code" href="../../de/d43/translate_8c.html#ac83a107ff74dbfdd57b5f8272d787674">MAX_RECALC</a>;</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   }</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;         Recalculating Codec Translation (number of sample seconds: %d)\n\n&quot;</span>, time);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a>(time);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;}</div><div class="ttc" id="translate_8c_html_a3d86147d86592846866d3f2913a4dd87"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a></div><div class="ttdeci">static void matrix_rebuild(int samples)</div><div class="ttdoc">rebuild a translation matrix. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00824">translate.c:824</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="translate_8c_html_ac83a107ff74dbfdd57b5f8272d787674"><div class="ttname"><a href="../../de/d43/translate_8c.html#ac83a107ff74dbfdd57b5f8272d787674">MAX_RECALC</a></div><div class="ttdeci">#define MAX_RECALC</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00054">translate.c:54</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a113db2d8bd5e4c6457bf3706e85fdd71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a113db2d8bd5e4c6457bf3706e85fdd71">&#9670;&nbsp;</a></span>handle_show_translation_path()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_show_translation_path </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>codec_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>sample_rate</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01099">1099</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00326">ast_codec_get()</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00337">ast_codec_get_by_id()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00653">ast_str_reset()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00124">codec2index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00919">codec_append_name()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00191">ast_translator::dst_fmt_index</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00282">matrix_get()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00046">ast_codec::name</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00139">ast_translator::src_codec</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00060">translator_path::step</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00050">ast_codec::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01164">handle_cli_core_show_translation()</a>.</p>
<div class="fragment"><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;{</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   <span class="keywordtype">int</span> i = 1;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(1024);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d29/structast__translator.html">ast_translator</a> *step;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *dst_codec;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *src_codec = <a class="code" href="../../d1/d16/codec_8h.html#a3d3b570342f0bbd5b8fe0bb67edec760">ast_codec_get</a>(codec_name, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>, <a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>);</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   <span class="keywordflow">if</span> (!src_codec) {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Source codec \&quot;%s\&quot; is not found.\n&quot;</span>, codec_name);</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   }</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;--- Translation paths SRC Codec \&quot;%s\&quot; sample rate %u ---\n&quot;</span>,</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;      codec_name, src_codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>);</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   <span class="keywordflow">while</span> ((dst_codec = <a class="code" href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a>(i))) {</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      <span class="keywordtype">int</span> src, dst;</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;      <span class="keywordtype">char</span> src_buffer[64];</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;      <span class="keywordtype">char</span> dst_buffer[64];</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      ++i;</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;      <span class="keywordflow">if</span> (src_codec == dst_codec ||</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;          dst_codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(dst_codec, -1);</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;      }</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      dst = <a class="code" href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a>(dst_codec);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;      src = <a class="code" href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a>(src_codec);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      <span class="keywordflow">if</span> (src &lt; 0 || dst &lt; 0) {</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;str, 0, <span class="stringliteral">&quot;No Translation Path&quot;</span>);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;         step = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(src, dst)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a2d3b3aeb7224f2e738f8a48739fa5043">step</a>;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;         <span class="keywordflow">if</span> (step) {</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;            <a class="code" href="../../de/d43/translate_8c.html#ac2cf931ca857d66b5f628c478f007f76">codec_append_name</a>(&amp;step-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>, &amp;str);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;            <span class="keywordflow">while</span> (src != dst) {</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;               src = step-&gt;<a class="code" href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">dst_fmt_index</a>;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;               step = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(src, dst)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a2d3b3aeb7224f2e738f8a48739fa5043">step</a>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;               <span class="keywordflow">if</span> (!step) {</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;str, 0, <span class="stringliteral">&quot;-&gt;&quot;</span>);</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;                  <a class="code" href="../../de/d43/translate_8c.html#ac2cf931ca857d66b5f628c478f007f76">codec_append_name</a>(dst_codec, &amp;str);</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;               }</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;str, 0, <span class="stringliteral">&quot;-&gt;&quot;</span>);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;               <a class="code" href="../../de/d43/translate_8c.html#ac2cf931ca857d66b5f628c478f007f76">codec_append_name</a>(&amp;step-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">src_codec</a>, &amp;str);</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;            }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;         }</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      }</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;      snprintf(src_buffer, <span class="keyword">sizeof</span>(src_buffer), <span class="stringliteral">&quot;%s:%u&quot;</span>, src_codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, src_codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      snprintf(dst_buffer, <span class="keyword">sizeof</span>(dst_buffer), <span class="stringliteral">&quot;%s:%u&quot;</span>, dst_codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, dst_codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\t%-16.16s To %-16.16s: %-60.60s\n&quot;</span>,</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;         src_buffer, dst_buffer, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(str));</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a>(str);</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(dst_codec, -1);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;   }</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(src_codec, -1);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;}</div><div class="ttc" id="structast__codec_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">ast_codec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name for this codec. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00046">codec.h:46</a></div></div>
<div class="ttc" id="structast__translator_html"><div class="ttname"><a href="../../db/d29/structast__translator.html">ast_translator</a></div><div class="ttdoc">Descriptor of a translator. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00137">translate.h:137</a></div></div>
<div class="ttc" id="codec_8h_html_aa22f18a97d3eb0d00d4938bfe9d2592c"><div class="ttname"><a href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a></div><div class="ttdeci">struct ast_codec * ast_codec_get_by_id(int id)</div><div class="ttdoc">Retrieve a codec given the unique identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00337">codec.c:337</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="structast__translator_html_a69c9aeee8d4f56279cd7e041976ba66c"><div class="ttname"><a href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">ast_translator::dst_fmt_index</a></div><div class="ttdeci">int dst_fmt_index</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00191">translate.h:191</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="codec_8h_html_a3d3b570342f0bbd5b8fe0bb67edec760"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a3d3b570342f0bbd5b8fe0bb67edec760">ast_codec_get</a></div><div class="ttdeci">struct ast_codec * ast_codec_get(const char *name, enum ast_media_type type, unsigned int sample_rate)</div><div class="ttdoc">Retrieve a codec given a name, type, and sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00326">codec.c:326</a></div></div>
<div class="ttc" id="structtranslator__path_html_a2d3b3aeb7224f2e738f8a48739fa5043"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html#a2d3b3aeb7224f2e738f8a48739fa5043">translator_path::step</a></div><div class="ttdeci">struct ast_translator * step</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00060">translate.c:60</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="translate_8c_html_a364459b5b3f78e68329c2dfc828a4cd6"><div class="ttname"><a href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a></div><div class="ttdeci">static struct translator_path * matrix_get(unsigned int x, unsigned int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00282">translate.c:282</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="translate_8c_html_ab2ff67fa32217b6827c6f17927bb9472"><div class="ttname"><a href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a></div><div class="ttdeci">static int codec2index(struct ast_codec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00124">translate.c:124</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__translator_html_a8300e275ac746b701ea61f617be84851"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8300e275ac746b701ea61f617be84851">ast_translator::src_codec</a></div><div class="ttdeci">struct ast_codec src_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00139">translate.h:139</a></div></div>
<div class="ttc" id="translate_8c_html_ac2cf931ca857d66b5f628c478f007f76"><div class="ttname"><a href="../../de/d43/translate_8c.html#ac2cf931ca857d66b5f628c478f007f76">codec_append_name</a></div><div class="ttdeci">static void codec_append_name(const struct ast_codec *codec, struct ast_str **buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00919">translate.c:919</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="structast__codec_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_codec::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Sample rate (number of samples carried in a second) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00052">codec.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_a8239b9ad10367bfc936e9b60ff7706a8"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a8239b9ad10367bfc936e9b60ff7706a8">ast_str_reset</a></div><div class="ttdeci">void ast_str_reset(struct ast_str *buf)</div><div class="ttdoc">Reset the content of a dynamic string. Useful before a series of ast_str_append. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00653">strings.h:653</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="structast__codec_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_codec::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Type of media this codec contains. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="structast__codec_html"><div class="ttname"><a href="../../d5/d53/structast__codec.html">ast_codec</a></div><div class="ttdoc">Represents a media codec within Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00042">codec.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac973ca316d62f9d6d5f0798f19e6a8ca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac973ca316d62f9d6d5f0798f19e6a8ca">&#9670;&nbsp;</a></span>handle_show_translation_table()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_show_translation_table </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00988">988</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00337">ast_codec_get_by_id()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00032">AST_MEDIA_TYPE_AUDIO</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00077">AST_RWLIST_RDLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00124">codec2index()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00282">matrix_get()</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00046">ast_codec::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00060">translator_path::step</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00061">translator_path::table_cost</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00050">ast_codec::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01164">handle_cli_core_show_translation()</a>.</p>
<div class="fragment"><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;{</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordtype">int</span> x, y, i, k;</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   <span class="keywordtype">int</span> longest = 7; <span class="comment">/* slin192 */</span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="keywordtype">int</span> max_codec_index = 0, curlen = 0;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(1024);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *codec;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <span class="comment">/* Get the length of the longest (usable?) codec name,</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">      so we know how wide the left side should be */</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keywordflow">for</span> (i = 1; (codec = <a class="code" href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a>(i)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(codec, -1), ++i) {</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;      ++max_codec_index;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;      <span class="keywordflow">if</span> (codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>) {</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      }</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      curlen = strlen(codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <span class="keywordflow">if</span> (curlen &gt; longest) {</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;         longest = curlen;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;   }</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;         Translation times between formats (in microseconds) for one second of data\n&quot;</span>);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;          Source Format (Rows) Destination Format (Columns)\n\n&quot;</span>);</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt;= max_codec_index; i++) {</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *row = i ? <a class="code" href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a>(i) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;      x = -1;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;      <span class="keywordflow">if</span> ((i &gt; 0) &amp;&amp; (row-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>)) {</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(row, -1);</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;      <span class="keywordflow">if</span> ((i &gt; 0) &amp;&amp; (x = <a class="code" href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a>(row)) == -1) {</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(row, -1);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      }</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;out, 0, <span class="stringliteral">&quot; &quot;</span>);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      <span class="keywordflow">for</span> (k = 0; k &lt;= max_codec_index; k++) {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;         <span class="keywordtype">int</span> adjust = 0;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *col = k ? <a class="code" href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a>(k) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;         y = -1;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;         <span class="keywordflow">if</span> ((k &gt; 0) &amp;&amp; (col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a> != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a>)) {</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(col, -1);</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;         }</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;         <span class="keywordflow">if</span> ((k &gt; 0) &amp;&amp; (y = <a class="code" href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a>(col)) == -1) {</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(col, -1);</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;         }</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;         <span class="keywordflow">if</span> (k &gt; 0) {</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;            curlen = strlen(col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;            <span class="keywordflow">if</span> (!strcmp(col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;slin&quot;</span>) ||</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;               !strcmp(col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;speex&quot;</span>) ||</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;               !strcmp(col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;silk&quot;</span>)) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;               adjust = log10(col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a> / 1000) + 1;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;               curlen = curlen + adjust;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;            }</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;         }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;         <span class="keywordflow">if</span> (curlen &lt; 5) {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;            curlen = 5;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;         }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;         <span class="keywordflow">if</span> (x &gt;= 0 &amp;&amp; y &gt;= 0 &amp;&amp; <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;step) {</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;            <span class="comment">/* Actual codec output */</span></div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;%*u&quot;</span>, curlen + 1, (<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;table_cost/100));</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == 0 &amp;&amp; k &gt; 0) {</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;            <span class="comment">/* Top row - use a dynamic size */</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;            <span class="keywordflow">if</span> (!strcmp(col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;slin&quot;</span>) ||</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;               !strcmp(col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;speex&quot;</span>) ||</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;               !strcmp(col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;silk&quot;</span>)) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;%*s%u&quot;</span>, curlen - adjust + 1,</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;                  col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a> / 1000);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;%*s&quot;</span>, curlen + 1, col-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;            }</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (k == 0 &amp;&amp; i &gt; 0) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;            <span class="comment">/* Left column - use a static size. */</span></div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;            <span class="keywordflow">if</span> (!strcmp(row-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;slin&quot;</span>) ||</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;               !strcmp(row-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;speex&quot;</span>) ||</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;               !strcmp(row-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;silk&quot;</span>)) {</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;               <span class="keywordtype">int</span> adjust_row = log10(row-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a> / 1000) + 1;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;%*s%u&quot;</span>, longest - adjust_row,</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                  row-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, row-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a> / 1000);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;%*s&quot;</span>, longest, row-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;            }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &gt;= 0 &amp;&amp; y &gt;= 0) {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;            <span class="comment">/* Codec not supported */</span></div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;%*s&quot;</span>, curlen + 1, <span class="stringliteral">&quot;-&quot;</span>);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;            <span class="comment">/* Upper left hand corner */</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;%*s&quot;</span>, longest, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;         }</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(col);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(out));</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(row);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   }</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(out);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;}</div><div class="ttc" id="structast__codec_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">ast_codec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name for this codec. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00046">codec.h:46</a></div></div>
<div class="ttc" id="codec_8h_html_aa22f18a97d3eb0d00d4938bfe9d2592c"><div class="ttname"><a href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a></div><div class="ttdeci">struct ast_codec * ast_codec_get_by_id(int id)</div><div class="ttdoc">Retrieve a codec given the unique identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00337">codec.c:337</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0a0fe104cc2cc36a43784f886f3ae7dc"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0a0fe104cc2cc36a43784f886f3ae7dc">AST_RWLIST_RDLOCK</a></div><div class="ttdeci">#define AST_RWLIST_RDLOCK(head)</div><div class="ttdoc">Read locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00077">linkedlists.h:77</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="translate_8c_html_a364459b5b3f78e68329c2dfc828a4cd6"><div class="ttname"><a href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a></div><div class="ttdeci">static struct translator_path * matrix_get(unsigned int x, unsigned int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00282">translate.c:282</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="translate_8c_html_ab2ff67fa32217b6827c6f17927bb9472"><div class="ttname"><a href="../../de/d43/translate_8c.html#ab2ff67fa32217b6827c6f17927bb9472">codec2index</a></div><div class="ttdeci">static int codec2index(struct ast_codec *codec)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00124">translate.c:124</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__codec_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_codec::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Sample rate (number of samples carried in a second) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00052">codec.h:52</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structast__codec_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_codec::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Type of media this codec contains. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="structast__codec_html"><div class="ttname"><a href="../../d5/d53/structast__codec.html">ast_codec</a></div><div class="ttdoc">Represents a media codec within Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00042">codec.h:42</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06415aec16fdea5dfa764836ad809dc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06415aec16fdea5dfa764836ad809dc0">&#9670;&nbsp;</a></span>index2codec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/d53/structast__codec.html">ast_codec</a>* index2codec </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00170">170</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d43/translate_8c_source.html#l00083">__indextable</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00337">ast_codec_get_by_id()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00233">ast_rwlock_rdlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00094">cur_max_index</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>.</p>
<div class="fragment"><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *codec;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   <span class="keywordflow">if</span> (index &gt;= <a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a>) {</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   }</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   codec = <a class="code" href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a>(<a class="code" href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a>[index]);</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   <span class="keywordflow">return</span> codec;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div><div class="ttc" id="lock_8h_html_a7330ac9d36b05bad68b188c2dcfa42d7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a7330ac9d36b05bad68b188c2dcfa42d7">ast_rwlock_rdlock</a></div><div class="ttdeci">#define ast_rwlock_rdlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00233">lock.h:233</a></div></div>
<div class="ttc" id="translate_8c_html_a3bb2839fae7b799fae04adf7c2285797"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a></div><div class="ttdeci">static ast_rwlock_t tablelock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00086">translate.c:86</a></div></div>
<div class="ttc" id="codec_8h_html_aa22f18a97d3eb0d00d4938bfe9d2592c"><div class="ttname"><a href="../../d1/d16/codec_8h.html#aa22f18a97d3eb0d00d4938bfe9d2592c">ast_codec_get_by_id</a></div><div class="ttdeci">struct ast_codec * ast_codec_get_by_id(int id)</div><div class="ttdoc">Retrieve a codec given the unique identifier. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00337">codec.c:337</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="translate_8c_html_a664e361807a29bba28e6cc3d333f57d8"><div class="ttname"><a href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a></div><div class="ttdeci">static unsigned int * __indextable</div><div class="ttdoc">table for converting index to format values. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00083">translate.c:83</a></div></div>
<div class="ttc" id="translate_8c_html_a121e720f03859a0b5afd89ac1bb4f840"><div class="ttname"><a href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a></div><div class="ttdeci">static int cur_max_index</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00094">translate.c:94</a></div></div>
<div class="ttc" id="structast__codec_html"><div class="ttname"><a href="../../d5/d53/structast__codec.html">ast_codec</a></div><div class="ttdoc">Represents a media codec within Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00042">codec.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a536df40ff0da97c33331db8fa31d2fc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a536df40ff0da97c33331db8fa31d2fc2">&#9670;&nbsp;</a></span>matrix_clear()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void matrix_clear </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00268">268</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d43/translate_8c_source.html#l00096">index_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>.</p>
<div class="fragment"><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;{</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a>; x++) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      memset(<a class="code" href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a>[x], <span class="charliteral">&#39;\0&#39;</span>, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../de/dd9/structtranslator__path.html">translator_path</a>) * (index_size));</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="ttc" id="translate_8c_html_a5c961d2031c896562556d389e7e4debf"><div class="ttname"><a href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a></div><div class="ttdeci">static int index_size</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00096">translate.c:96</a></div></div>
<div class="ttc" id="structtranslator__path_html"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html">translator_path</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00059">translate.c:59</a></div></div>
<div class="ttc" id="translate_8c_html_aab7f8cbe73fc8db1de51dcdbcec03bd9"><div class="ttname"><a href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a></div><div class="ttdeci">static struct translator_path ** __matrix</div><div class="ttdoc">a matrix that, for any pair of supported formats, indicates the total cost of translation and the fir...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00076">translate.c:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a364459b5b3f78e68329c2dfc828a4cd6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a364459b5b3f78e68329c2dfc828a4cd6">&#9670;&nbsp;</a></span>matrix_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../de/dd9/structtranslator__path.html">translator_path</a>* matrix_get </td>
          <td>(</td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00282">282</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01491">ast_translate_path_steps()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01385">ast_translator_best_choice()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00485">ast_translator_build_path()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01513">check_translation_path()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01099">handle_show_translation_path()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00988">handle_show_translation_table()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a>[x] + y;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;}</div><div class="ttc" id="translate_8c_html_aab7f8cbe73fc8db1de51dcdbcec03bd9"><div class="ttname"><a href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a></div><div class="ttdeci">static struct translator_path ** __matrix</div><div class="ttdoc">a matrix that, for any pair of supported formats, indicates the total cost of translation and the fir...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00076">translate.c:76</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d86147d86592846866d3f2913a4dd87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d86147d86592846866d3f2913a4dd87">&#9670;&nbsp;</a></span>matrix_rebuild()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void matrix_rebuild </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>samples</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>rebuild a translation matrix. </p>
<dl class="section note"><dt>Note</dt><dd>This function expects the list of translators to be locked </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00824">824</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/d39/translate_8h_source.html#l00189">ast_translator::active</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00493">AST_RWLIST_TRAVERSE</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00147">ast_translator::comp_cost</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00094">cur_max_index</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00191">ast_translator::dst_fmt_index</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00690">generate_computational_cost()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00170">index2codec()</a>, <a class="el" href="../../db/d29/structast__translator.html#ae677d42c6c869892486e648b4bd4a435">ast_translator::list</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00241">LOG_DEBUG</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00268">matrix_clear()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00282">matrix_get()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00062">translator_path::multistep</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00046">ast_codec::name</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00190">ast_translator::src_fmt_index</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00060">translator_path::step</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00061">translator_path::table_cost</a>, and <a class="el" href="../../db/d39/translate_8h_source.html#l00145">ast_translator::table_cost</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01220">__ast_register_translator()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01361">ast_translator_activate()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01369">ast_translator_deactivate()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l01333">ast_unregister_translator()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00969">handle_cli_recalc()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00194">matrix_resize()</a>.</p>
<div class="fragment"><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;{</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/d29/structast__translator.html">ast_translator</a> *t;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="keywordtype">int</span> newtablecost;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keywordtype">int</span> x;      <span class="comment">/* source format index */</span></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   <span class="keywordtype">int</span> y;      <span class="comment">/* intermediate format index */</span></div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordtype">int</span> z;      <span class="comment">/* destination format index */</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Resetting translation matrix\n&quot;</span>);</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a536df40ff0da97c33331db8fa31d2fc2">matrix_clear</a>();</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;   <span class="comment">/* first, compute all direct costs */</span></div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>, t, <a class="code" href="../../db/d29/structast__translator.html#ae677d42c6c869892486e648b4bd4a435">list</a>) {</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;      <span class="keywordflow">if</span> (!t-&gt;<a class="code" href="../../db/d29/structast__translator.html#aa5805c5e936174e5092bf7a5b78e7e64">active</a>) {</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;      }</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;      x = t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a433b554c82f740d313b751dbf71082ee">src_fmt_index</a>;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;      z = t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">dst_fmt_index</a>;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;      <span class="keywordflow">if</span> (samples) {</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;         <a class="code" href="../../de/d43/translate_8c.html#abbb07f0735a0f32daa23a7751461d500">generate_computational_cost</a>(t, samples);</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      }</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;      <span class="comment">/* This new translator is the best choice if any of the below are true.</span></div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;<span class="comment">       * 1. no translation path is set between x and z yet.</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;<span class="comment">       * 2. the new table cost is less.</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;<span class="comment">       * 3. the new computational cost is less.  Computational cost is only used</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;<span class="comment">       *    to break a tie between two identical translation paths.</span></div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;step ||</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;         (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8f4b015560da5592624a98cbdcf4a995">table_cost</a> &lt; <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;step-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a4fa3dab9c6c239873b6a05add82c5e69">table_cost</a>) ||</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;         (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">comp_cost</a> &lt; <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;step-&gt;comp_cost)) {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;         <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a2d3b3aeb7224f2e738f8a48739fa5043">step</a> = t;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;         <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a4fa3dab9c6c239873b6a05add82c5e69">table_cost</a> = t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8f4b015560da5592624a98cbdcf4a995">table_cost</a>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   }</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">    * For each triple x, y, z of distinct formats, check if there is</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;<span class="comment">    * a path from x to z through y which is cheaper than what is</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;<span class="comment">    * currently known, and in case, update the matrix.</span></div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;<span class="comment">    * Repeat until the matrix is stable.</span></div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;      <span class="keywordtype">int</span> changed = 0;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a>; x++) {      <span class="comment">/* source format */</span></div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;         <span class="keywordflow">for</span> (y = 0; y &lt; <a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a>; y++) {  <span class="comment">/* intermediate format */</span></div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;            <span class="keywordflow">if</span> (x == y) {                      <span class="comment">/* skip ourselves */</span></div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;            <span class="keywordflow">for</span> (z = 0; z &lt; <a class="code" href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a>; z++) {  <span class="comment">/* dst format */</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;               <span class="keywordflow">if</span> ((z == x || z == y) ||        <span class="comment">/* skip null conversions */</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                  !<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;step ||   <span class="comment">/* no path from x to y */</span></div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                  !<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(y, z)-&gt;step) {   <span class="comment">/* no path from y to z */</span></div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                  <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;               }</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;               <span class="comment">/* calculate table cost from x-&gt;y-&gt;z */</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;               newtablecost = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a4fa3dab9c6c239873b6a05add82c5e69">table_cost</a> + <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(y, z)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a4fa3dab9c6c239873b6a05add82c5e69">table_cost</a>;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;               <span class="comment">/* if no step already exists between x and z OR the new cost of using the intermediate</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">                * step is cheaper, use this step. */</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;step || (newtablecost &lt; <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8f4b015560da5592624a98cbdcf4a995">table_cost</a>)) {</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                  <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a2d3b3aeb7224f2e738f8a48739fa5043">step</a> = <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, y)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a2d3b3aeb7224f2e738f8a48739fa5043">step</a>;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                  <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#a4fa3dab9c6c239873b6a05add82c5e69">table_cost</a> = newtablecost;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                  <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;<a class="code" href="../../de/dd9/structtranslator__path.html#ac3bacd261c78ba863d0567afcf6ad2fc">multistep</a> = 1;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                  changed++;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(10)) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                     <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *x_codec = <a class="code" href="../../de/d43/translate_8c.html#a06415aec16fdea5dfa764836ad809dc0">index2codec</a>(x);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                     <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *y_codec = <a class="code" href="../../de/d43/translate_8c.html#a06415aec16fdea5dfa764836ad809dc0">index2codec</a>(y);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                     <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *z_codec = <a class="code" href="../../de/d43/translate_8c.html#a06415aec16fdea5dfa764836ad809dc0">index2codec</a>(z);</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>,</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        <span class="stringliteral">&quot;Discovered %u cost path from %s to %s, via %s\n&quot;</span>,</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                        <a class="code" href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a>(x, z)-&gt;table_cost, x_codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>,</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                        y_codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, z_codec-&gt;<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                     <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(x_codec, -1);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                     <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(y_codec, -1);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                     <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(z_codec, -1);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;                  }</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;               }</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;            }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;         }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;      }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">if</span> (!changed) {</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;      }</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   }</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;}</div><div class="ttc" id="structast__codec_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">ast_codec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name for this codec. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00046">codec.h:46</a></div></div>
<div class="ttc" id="structast__translator_html"><div class="ttname"><a href="../../db/d29/structast__translator.html">ast_translator</a></div><div class="ttdoc">Descriptor of a translator. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00137">translate.h:137</a></div></div>
<div class="ttc" id="structast__translator_html_a433b554c82f740d313b751dbf71082ee"><div class="ttname"><a href="../../db/d29/structast__translator.html#a433b554c82f740d313b751dbf71082ee">ast_translator::src_fmt_index</a></div><div class="ttdeci">int src_fmt_index</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00190">translate.h:190</a></div></div>
<div class="ttc" id="structast__translator_html_a8f4b015560da5592624a98cbdcf4a995"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8f4b015560da5592624a98cbdcf4a995">ast_translator::table_cost</a></div><div class="ttdeci">int table_cost</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00145">translate.h:145</a></div></div>
<div class="ttc" id="structast__translator_html_a69c9aeee8d4f56279cd7e041976ba66c"><div class="ttname"><a href="../../db/d29/structast__translator.html#a69c9aeee8d4f56279cd7e041976ba66c">ast_translator::dst_fmt_index</a></div><div class="ttdeci">int dst_fmt_index</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00191">translate.h:191</a></div></div>
<div class="ttc" id="structtranslator__path_html_a2d3b3aeb7224f2e738f8a48739fa5043"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html#a2d3b3aeb7224f2e738f8a48739fa5043">translator_path::step</a></div><div class="ttdeci">struct ast_translator * step</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00060">translate.c:60</a></div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="translate_8c_html_a536df40ff0da97c33331db8fa31d2fc2"><div class="ttname"><a href="../../de/d43/translate_8c.html#a536df40ff0da97c33331db8fa31d2fc2">matrix_clear</a></div><div class="ttdeci">static void matrix_clear(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00268">translate.c:268</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a944b82566722f2247aa35f1328402c98"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a944b82566722f2247aa35f1328402c98">AST_RWLIST_TRAVERSE</a></div><div class="ttdeci">#define AST_RWLIST_TRAVERSE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00493">linkedlists.h:493</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="translate_8c_html_a364459b5b3f78e68329c2dfc828a4cd6"><div class="ttname"><a href="../../de/d43/translate_8c.html#a364459b5b3f78e68329c2dfc828a4cd6">matrix_get</a></div><div class="ttdeci">static struct translator_path * matrix_get(unsigned int x, unsigned int y)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00282">translate.c:282</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="structast__translator_html_ae677d42c6c869892486e648b4bd4a435"><div class="ttname"><a href="../../db/d29/structast__translator.html#ae677d42c6c869892486e648b4bd4a435">ast_translator::list</a></div><div class="ttdeci">struct ast_translator::@326 list</div></div>
<div class="ttc" id="translate_8c_html_a06415aec16fdea5dfa764836ad809dc0"><div class="ttname"><a href="../../de/d43/translate_8c.html#a06415aec16fdea5dfa764836ad809dc0">index2codec</a></div><div class="ttdeci">static struct ast_codec * index2codec(int index)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00170">translate.c:170</a></div></div>
<div class="ttc" id="structtranslator__path_html_a4fa3dab9c6c239873b6a05add82c5e69"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html#a4fa3dab9c6c239873b6a05add82c5e69">translator_path::table_cost</a></div><div class="ttdeci">uint32_t table_cost</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00061">translate.c:61</a></div></div>
<div class="ttc" id="structtranslator__path_html_ac3bacd261c78ba863d0567afcf6ad2fc"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html#ac3bacd261c78ba863d0567afcf6ad2fc">translator_path::multistep</a></div><div class="ttdeci">uint8_t multistep</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00062">translate.c:62</a></div></div>
<div class="ttc" id="structast__translator_html_aa5805c5e936174e5092bf7a5b78e7e64"><div class="ttname"><a href="../../db/d29/structast__translator.html#aa5805c5e936174e5092bf7a5b78e7e64">ast_translator::active</a></div><div class="ttdeci">int active</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00189">translate.h:189</a></div></div>
<div class="ttc" id="translate_8c_html_abbb07f0735a0f32daa23a7751461d500"><div class="ttname"><a href="../../de/d43/translate_8c.html#abbb07f0735a0f32daa23a7751461d500">generate_computational_cost</a></div><div class="ttdeci">static void generate_computational_cost(struct ast_translator *t, int seconds)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00690">translate.c:690</a></div></div>
<div class="ttc" id="translate_8c_html_a121e720f03859a0b5afd89ac1bb4f840"><div class="ttname"><a href="../../de/d43/translate_8c.html#a121e720f03859a0b5afd89ac1bb4f840">cur_max_index</a></div><div class="ttdeci">static int cur_max_index</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00094">translate.c:94</a></div></div>
<div class="ttc" id="structast__translator_html_ac782b27c1b87673e4eddde7bdd3e5253"><div class="ttname"><a href="../../db/d29/structast__translator.html#ac782b27c1b87673e4eddde7bdd3e5253">ast_translator::comp_cost</a></div><div class="ttdeci">int comp_cost</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00147">translate.h:147</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
<div class="ttc" id="structast__codec_html"><div class="ttname"><a href="../../d5/d53/structast__codec.html">ast_codec</a></div><div class="ttdoc">Represents a media codec within Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00042">codec.h:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5c09bc7e7bb9baac6a8dbd22da6bb9af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c09bc7e7bb9baac6a8dbd22da6bb9af">&#9670;&nbsp;</a></span>matrix_resize()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int matrix_resize </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>init</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00194">194</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d43/translate_8c_source.html#l00083">__indextable</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00150">AST_RWLIST_UNLOCK</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00051">AST_RWLIST_WRLOCK</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00091">GROW_INDEX</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00096">index_size</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00089">INIT_INDEX</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01220">__ast_register_translator()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l01630">ast_translate_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;{</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/dd9/structtranslator__path.html">translator_path</a> **tmp_matrix = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *tmp_table = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="keywordtype">int</span> old_index;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   old_index = <a class="code" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keywordflow">if</span> (init) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a> += <a class="code" href="../../de/d43/translate_8c.html#a501c42d8b4c759beceb3a35e4d72298c">INIT_INDEX</a>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <a class="code" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a> += <a class="code" href="../../de/d43/translate_8c.html#af70f5e37045ec1a53a47262ef03e0f51">GROW_INDEX</a>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="comment">/* make new 2d array of translator_path structures */</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <span class="keywordflow">if</span> (!(tmp_matrix = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../de/dd9/structtranslator__path.html">translator_path</a> *) * (<a class="code" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a>)))) {</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      <span class="keywordflow">goto</span> resize_cleanup;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;   }</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a>; x++) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;      <span class="keywordflow">if</span> (!(tmp_matrix[x] = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../de/dd9/structtranslator__path.html">translator_path</a>) * (index_size)))) {</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;         <span class="keywordflow">goto</span> resize_cleanup;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;   }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;   <span class="comment">/* make new index table */</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="keywordflow">if</span> (!(tmp_table = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) * index_size))) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      <span class="keywordflow">goto</span> resize_cleanup;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <span class="comment">/* if everything went well this far, free the old and use the new */</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keywordflow">if</span> (!init) {</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; old_index; x++) {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a>[x]);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      }</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a>);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      memcpy(tmp_table, <a class="code" href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) * old_index);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   }</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   <span class="comment">/* now copy them over */</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a> = tmp_matrix;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a> = tmp_table;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a>(0);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;resize_cleanup:</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a>(&amp;<a class="code" href="../../d7/d9a/structtranslators.html">translators</a>);</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="keywordflow">if</span> (tmp_matrix) {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a>; x++) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tmp_matrix[x]);</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      }</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tmp_matrix);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   }</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(tmp_table);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div><div class="ttc" id="translate_8c_html_af70f5e37045ec1a53a47262ef03e0f51"><div class="ttname"><a href="../../de/d43/translate_8c.html#af70f5e37045ec1a53a47262ef03e0f51">GROW_INDEX</a></div><div class="ttdeci">#define GROW_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00091">translate.c:91</a></div></div>
<div class="ttc" id="translate_8c_html_a5c961d2031c896562556d389e7e4debf"><div class="ttname"><a href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a></div><div class="ttdeci">static int index_size</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00096">translate.c:96</a></div></div>
<div class="ttc" id="translate_8c_html_a3d86147d86592846866d3f2913a4dd87"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3d86147d86592846866d3f2913a4dd87">matrix_rebuild</a></div><div class="ttdeci">static void matrix_rebuild(int samples)</div><div class="ttdoc">rebuild a translation matrix. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00824">translate.c:824</a></div></div>
<div class="ttc" id="translate_8c_html_a3bb2839fae7b799fae04adf7c2285797"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a></div><div class="ttdeci">static ast_rwlock_t tablelock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00086">translate.c:86</a></div></div>
<div class="ttc" id="structtranslator__path_html"><div class="ttname"><a href="../../de/dd9/structtranslator__path.html">translator_path</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00059">translate.c:59</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2d0cf4182bade9f773fb16ff12abe595"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2d0cf4182bade9f773fb16ff12abe595">AST_RWLIST_WRLOCK</a></div><div class="ttdeci">#define AST_RWLIST_WRLOCK(head)</div><div class="ttdoc">Write locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00051">linkedlists.h:51</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a2e9a2518b5029b96671aff6701bd5138"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a2e9a2518b5029b96671aff6701bd5138">AST_RWLIST_UNLOCK</a></div><div class="ttdeci">#define AST_RWLIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a read/write based list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00150">linkedlists.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="translate_8c_html_aab7f8cbe73fc8db1de51dcdbcec03bd9"><div class="ttname"><a href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a></div><div class="ttdeci">static struct translator_path ** __matrix</div><div class="ttdoc">a matrix that, for any pair of supported formats, indicates the total cost of translation and the fir...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00076">translate.c:76</a></div></div>
<div class="ttc" id="structtranslators_html"><div class="ttname"><a href="../../d7/d9a/structtranslators.html">translators</a></div><div class="ttdoc">the list of translators </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d52/codec__dahdi_8c_source.html#l00281">codec_dahdi.c:281</a></div></div>
<div class="ttc" id="translate_8c_html_a664e361807a29bba28e6cc3d333f57d8"><div class="ttname"><a href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a></div><div class="ttdeci">static unsigned int * __indextable</div><div class="ttdoc">table for converting index to format values. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00083">translate.c:83</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
<div class="ttc" id="translate_8c_html_a501c42d8b4c759beceb3a35e4d72298c"><div class="ttname"><a href="../../de/d43/translate_8c.html#a501c42d8b4c759beceb3a35e4d72298c">INIT_INDEX</a></div><div class="ttdeci">#define INIT_INDEX</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00089">translate.c:89</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af03e251d10db6eed6af2e54bd1377071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af03e251d10db6eed6af2e54bd1377071">&#9670;&nbsp;</a></span>newpvt()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a>* newpvt </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../db/d29/structast__translator.html">ast_translator</a> *&#160;</td>
          <td class="paramname"><em>t</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d98/structast__format.html">ast_format</a> *&#160;</td>
          <td class="paramname"><em>explicit_dst</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Allocate the descriptor, required outbuf space, and possibly desc. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00311">311</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d5/def/codec_8c_source.html#l00326">ast_codec_get()</a>, <a class="el" href="../../db/d1c/format__cache_8h_source.html#l00286">ast_format_cache_get</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00196">ast_format_create()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">AST_FRIENDLY_OFFSET</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00443">ast_module_ref</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00469">ast_module_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00182">ast_translator::buf_size</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00221">ast_trans_pvt::c</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00184">ast_translator::desc_size</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00291">destroy()</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00140">ast_translator::dst_codec</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00237">ast_trans_pvt::explicit_dst</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00215">ast_trans_pvt::f</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00143">ast_translator::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">ast_frame_subclass::format</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">ast_frame::mallocd</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00187">ast_translator::module</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00046">ast_codec::name</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00138">ast_translator::name</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00151">ast_translator::newpvt</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">ast_frame::offset</a>, <a class="el" href="../../d1/d47/structast__trans__pvt.html#ae28026b11aaf3740f9101a5a66d19105">ast_trans_pvt::outbuf</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00219">ast_trans_pvt::pvt</a>, <a class="el" href="../../d1/d16/codec_8h_source.html#l00052">ast_codec::sample_rate</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">ast_frame::src</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../db/d39/translate_8h_source.html#l00214">ast_trans_pvt::t</a>, and <a class="el" href="../../d1/d16/codec_8h_source.html#l00050">ast_codec::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00485">ast_translator_build_path()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00690">generate_computational_cost()</a>.</p>
<div class="fragment"><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;{</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *<a class="code" href="../../d1/d47/structast__trans__pvt.html#a77153a7ab7ba05031fbbb4e67aa9dcfc">pvt</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <span class="keywordtype">char</span> *ofs;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">    * compute the required size adding private descriptor,</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">    * buffer, AST_FRIENDLY_OFFSET.</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   len = <span class="keyword">sizeof</span>(*pvt) + t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a0f96ba898b665b247108f83d84ce412c">desc_size</a>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a4c813abab25e4df4e95d8f0b0ca61500">buf_size</a>)</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      len += <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a> + t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a4c813abab25e4df4e95d8f0b0ca61500">buf_size</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   pvt = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, len);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">if</span> (!pvt) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   }</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a> = <a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   ofs = (<span class="keywordtype">char</span> *)(pvt + 1);   <span class="comment">/* pointer to data space */</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a0f96ba898b665b247108f83d84ce412c">desc_size</a>) {     <span class="comment">/* first comes the descriptor */</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a77153a7ab7ba05031fbbb4e67aa9dcfc">pvt</a> = ofs;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;      ofs += t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a0f96ba898b665b247108f83d84ce412c">desc_size</a>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   }</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a4c813abab25e4df4e95d8f0b0ca61500">buf_size</a>) {<span class="comment">/* finally buffer and header */</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ae28026b11aaf3740f9101a5a66d19105">outbuf</a>.<a class="code" href="../../d1/d47/structast__trans__pvt.html#a9df78bd38aa81763ad1c56f3de8d5d3e">c</a> = ofs + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;   }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">    * If the format has an attribute module, explicit_dst includes the (joined)</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">    * result of the SDP negotiation. For example with the Opus Codec, the format</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">    * knows whether both parties want to do forward-error correction (FEC).</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ac3fe940eb9f3a9f1b0c9268577457c64">explicit_dst</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(explicit_dst);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#a8dea6491bedba471fc44574d76438577">ast_module_ref</a>(t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a>);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <span class="comment">/* call local init routine, if present */</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keywordflow">if</span> (t-&gt;<a class="code" href="../../db/d29/structast__translator.html#aca1b780c4eb6d81ebead941dec32b510">newpvt</a> &amp;&amp; t-&gt;<a class="code" href="../../db/d29/structast__translator.html#aca1b780c4eb6d81ebead941dec32b510">newpvt</a>(pvt)) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(pvt);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a>(t-&gt;<a class="code" href="../../db/d29/structast__translator.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">module</a>);</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   }</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <span class="comment">/* Setup normal static translation frame. */</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">mallocd</a> = 0;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">src</a> = pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">name</a>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ae28026b11aaf3740f9101a5a66d19105">outbuf</a>.<a class="code" href="../../d1/d47/structast__trans__pvt.html#a9df78bd38aa81763ad1c56f3de8d5d3e">c</a>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">    * If the translator has not provided a format</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">    * A) use the joined one,</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">    * B) use the cached one, or</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">    * C) create one.</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <span class="keywordflow">if</span> (!pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#ac3fe940eb9f3a9f1b0c9268577457c64">explicit_dst</a>);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      <span class="keywordflow">if</span> (!pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>)) {</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;         pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../db/d1c/format__cache_8h.html#a729e49563608ebaed919c901257dc623">ast_format_cache_get</a>(pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">t</a>-&gt;<a class="code" href="../../db/d29/structast__translator.html#a6bd2bb5fcc7628a640958994a22f997c">format</a>);</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      }</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      <span class="keywordflow">if</span> (!pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) {</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d5/d53/structast__codec.html">ast_codec</a> *codec = <a class="code" href="../../d1/d16/codec_8h.html#a3d3b570342f0bbd5b8fe0bb67edec760">ast_codec_get</a>(t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>,</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;            t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">type</a>, t-&gt;<a class="code" href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">dst_codec</a>.<a class="code" href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">sample_rate</a>);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;         <span class="keywordflow">if</span> (!codec) {</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to get destination codec\n&quot;</span>);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;            <a class="code" href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a>(pvt);</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         }</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;         pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../d0/d0a/format_8h.html#a6188bf502f8d5bf56abbcc3424c3b099">ast_format_create</a>(codec);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(codec, -1);</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;      <span class="keywordflow">if</span> (!pvt-&gt;<a class="code" href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">f</a>.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>) {</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to create format\n&quot;</span>);</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;         <a class="code" href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a>(pvt);</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      }</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;   }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;   <span class="keywordflow">return</span> pvt;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div><div class="ttc" id="structast__codec_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a8f8f80d37794cde9472343e4487ba3eb">ast_codec::name</a></div><div class="ttdeci">const char * name</div><div class="ttdoc">Name for this codec. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00046">codec.h:46</a></div></div>
<div class="ttc" id="structast__translator_html_a6bd2bb5fcc7628a640958994a22f997c"><div class="ttname"><a href="../../db/d29/structast__translator.html#a6bd2bb5fcc7628a640958994a22f997c">ast_translator::format</a></div><div class="ttdeci">const char * format</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00143">translate.h:143</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="structast__translator_html_aca1b780c4eb6d81ebead941dec32b510"><div class="ttname"><a href="../../db/d29/structast__translator.html#aca1b780c4eb6d81ebead941dec32b510">ast_translator::newpvt</a></div><div class="ttdeci">int(* newpvt)(struct ast_trans_pvt *)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00151">translate.h:151</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="format_8h_html_a6188bf502f8d5bf56abbcc3424c3b099"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a6188bf502f8d5bf56abbcc3424c3b099">ast_format_create</a></div><div class="ttdeci">struct ast_format * ast_format_create(struct ast_codec *codec)</div><div class="ttdoc">Create a new media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00196">format.c:196</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a735f764b1095611ace084e7c6c06857d"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a735f764b1095611ace084e7c6c06857d">ast_trans_pvt::f</a></div><div class="ttdeci">struct ast_frame f</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00215">translate.h:215</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="codec_8h_html_a3d3b570342f0bbd5b8fe0bb67edec760"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a3d3b570342f0bbd5b8fe0bb67edec760">ast_codec_get</a></div><div class="ttdeci">struct ast_codec * ast_codec_get(const char *name, enum ast_media_type type, unsigned int sample_rate)</div><div class="ttdoc">Retrieve a codec given a name, type, and sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/def/codec_8c_source.html#l00326">codec.c:326</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a77153a7ab7ba05031fbbb4e67aa9dcfc"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a77153a7ab7ba05031fbbb4e67aa9dcfc">ast_trans_pvt::pvt</a></div><div class="ttdeci">void * pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00219">translate.h:219</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="format__cache_8h_html_a729e49563608ebaed919c901257dc623"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a729e49563608ebaed919c901257dc623">ast_format_cache_get</a></div><div class="ttdeci">#define ast_format_cache_get(name)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d1c/format__cache_8h_source.html#l00286">format_cache.h:286</a></div></div>
<div class="ttc" id="module_8h_html_a15896c26e51e8162df5eb9a0124c841f"><div class="ttname"><a href="../../d5/d16/module_8h.html#a15896c26e51e8162df5eb9a0124c841f">ast_module_unref</a></div><div class="ttdeci">#define ast_module_unref(mod)</div><div class="ttdoc">Release a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00469">module.h:469</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="structast__translator_html_a8637433cfbb88aeb10ce2ed5dcba0eb1"><div class="ttname"><a href="../../db/d29/structast__translator.html#a8637433cfbb88aeb10ce2ed5dcba0eb1">ast_translator::module</a></div><div class="ttdeci">struct ast_module * module</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00187">translate.h:187</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="structast__frame_html_af51e37c9331049b1e3d250a7c8bc3c26"><div class="ttname"><a href="../../d0/d99/structast__frame.html#af51e37c9331049b1e3d250a7c8bc3c26">ast_frame::src</a></div><div class="ttdeci">const char * src</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00181">include/asterisk/frame.h:181</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__translator_html_a4c813abab25e4df4e95d8f0b0ca61500"><div class="ttname"><a href="../../db/d29/structast__translator.html#a4c813abab25e4df4e95d8f0b0ca61500">ast_translator::buf_size</a></div><div class="ttdeci">int buf_size</div><div class="ttdoc">size of outbuf, in bytes. Mandatory. The wrapper code will also allocate an AST_FRIENDLY_OFFSET space...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00182">translate.h:182</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_ae28026b11aaf3740f9101a5a66d19105"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#ae28026b11aaf3740f9101a5a66d19105">ast_trans_pvt::outbuf</a></div><div class="ttdeci">union ast_trans_pvt::@327 outbuf</div></div>
<div class="ttc" id="structast__translator_html_af79a76d35f0dc9d6e5aee149ac5946e1"><div class="ttname"><a href="../../db/d29/structast__translator.html#af79a76d35f0dc9d6e5aee149ac5946e1">ast_translator::dst_codec</a></div><div class="ttdeci">struct ast_codec dst_codec</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00140">translate.h:140</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_ac3fe940eb9f3a9f1b0c9268577457c64"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#ac3fe940eb9f3a9f1b0c9268577457c64">ast_trans_pvt::explicit_dst</a></div><div class="ttdeci">struct ast_format * explicit_dst</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00237">translate.h:237</a></div></div>
<div class="ttc" id="structast__trans__pvt_html"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a></div><div class="ttdoc">Default structure for translators, with the basic fields and buffers, all allocated as part of the sa...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00213">translate.h:213</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="translate_8c_html_acd32a6ef4f3c191685ae65f8439407e7"><div class="ttname"><a href="../../de/d43/translate_8c.html#acd32a6ef4f3c191685ae65f8439407e7">destroy</a></div><div class="ttdeci">static void destroy(struct ast_trans_pvt *pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00291">translate.c:291</a></div></div>
<div class="ttc" id="structast__translator_html_a0f96ba898b665b247108f83d84ce412c"><div class="ttname"><a href="../../db/d29/structast__translator.html#a0f96ba898b665b247108f83d84ce412c">ast_translator::desc_size</a></div><div class="ttdeci">int desc_size</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00184">translate.h:184</a></div></div>
<div class="ttc" id="structast__codec_html_a1c086f81c095b0efd7a87ee29fc5ba7e"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a1c086f81c095b0efd7a87ee29fc5ba7e">ast_codec::sample_rate</a></div><div class="ttdeci">unsigned int sample_rate</div><div class="ttdoc">Sample rate (number of samples carried in a second) </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00052">codec.h:52</a></div></div>
<div class="ttc" id="structast__frame_html_aed16590d48f41d89f31e0cf347f5cd99"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed16590d48f41d89f31e0cf347f5cd99">ast_frame::mallocd</a></div><div class="ttdeci">int mallocd</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00175">include/asterisk/frame.h:175</a></div></div>
<div class="ttc" id="structast__codec_html_a57b08a6ad7a004d70eba4a1b6867a084"><div class="ttname"><a href="../../d5/d53/structast__codec.html#a57b08a6ad7a004d70eba4a1b6867a084">ast_codec::type</a></div><div class="ttdeci">enum ast_media_type type</div><div class="ttdoc">Type of media this codec contains. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00050">codec.h:50</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_aa6d45f7a0477a1eb0d1f2ca362986d5a"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#aa6d45f7a0477a1eb0d1f2ca362986d5a">ast_trans_pvt::t</a></div><div class="ttdeci">struct ast_translator * t</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00214">translate.h:214</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="structast__trans__pvt_html_a9df78bd38aa81763ad1c56f3de8d5d3e"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html#a9df78bd38aa81763ad1c56f3de8d5d3e">ast_trans_pvt::c</a></div><div class="ttdeci">char * c</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00221">translate.h:221</a></div></div>
<div class="ttc" id="structast__codec_html"><div class="ttname"><a href="../../d5/d53/structast__codec.html">ast_codec</a></div><div class="ttdoc">Represents a media codec within Asterisk. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00042">codec.h:42</a></div></div>
<div class="ttc" id="structast__translator_html_a3777dbae63a15da001b2baa317a25149"><div class="ttname"><a href="../../db/d29/structast__translator.html#a3777dbae63a15da001b2baa317a25149">ast_translator::name</a></div><div class="ttdeci">char name[80]</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00138">translate.h:138</a></div></div>
<div class="ttc" id="module_8h_html_a8dea6491bedba471fc44574d76438577"><div class="ttname"><a href="../../d5/d16/module_8h.html#a8dea6491bedba471fc44574d76438577">ast_module_ref</a></div><div class="ttdeci">#define ast_module_ref(mod)</div><div class="ttdoc">Hold a reference to the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00443">module.h:443</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab89cdbdc754ab3fa0ae698176636ef03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab89cdbdc754ab3fa0ae698176636ef03">&#9670;&nbsp;</a></span>translate_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void translate_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01613">1613</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d43/translate_8c_source.html#l00083">__indextable</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00231">ast_rwlock_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00232">ast_rwlock_unlock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00234">ast_rwlock_wrlock</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00096">index_size</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01630">ast_translate_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;{</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../de/d43/translate_8c.html#acc94a293fbe86a42647621894b524890">cli_translate</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../de/d43/translate_8c.html#acc94a293fbe86a42647621894b524890">cli_translate</a>));</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a>; x++) {</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a>[x]);</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;   }</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a>);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(<a class="code" href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a>);</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;   <a class="code" href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab1d35b9611e8b5143ec695ead1b5d8d1">ast_rwlock_destroy</a>(&amp;<a class="code" href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a>);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;}</div><div class="ttc" id="translate_8c_html_a5c961d2031c896562556d389e7e4debf"><div class="ttname"><a href="../../de/d43/translate_8c.html#a5c961d2031c896562556d389e7e4debf">index_size</a></div><div class="ttdeci">static int index_size</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00096">translate.c:96</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="translate_8c_html_acc94a293fbe86a42647621894b524890"><div class="ttname"><a href="../../de/d43/translate_8c.html#acc94a293fbe86a42647621894b524890">cli_translate</a></div><div class="ttdeci">static struct ast_cli_entry cli_translate[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01215">translate.c:1215</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="lock_8h_html_ab1d35b9611e8b5143ec695ead1b5d8d1"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab1d35b9611e8b5143ec695ead1b5d8d1">ast_rwlock_destroy</a></div><div class="ttdeci">#define ast_rwlock_destroy(rwlock)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00231">lock.h:231</a></div></div>
<div class="ttc" id="translate_8c_html_a3bb2839fae7b799fae04adf7c2285797"><div class="ttname"><a href="../../de/d43/translate_8c.html#a3bb2839fae7b799fae04adf7c2285797">tablelock</a></div><div class="ttdeci">static ast_rwlock_t tablelock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00086">translate.c:86</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="lock_8h_html_ac2920a1db37313ec46bd91dc83bf9c8a"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac2920a1db37313ec46bd91dc83bf9c8a">ast_rwlock_unlock</a></div><div class="ttdeci">#define ast_rwlock_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00232">lock.h:232</a></div></div>
<div class="ttc" id="translate_8c_html_aab7f8cbe73fc8db1de51dcdbcec03bd9"><div class="ttname"><a href="../../de/d43/translate_8c.html#aab7f8cbe73fc8db1de51dcdbcec03bd9">__matrix</a></div><div class="ttdeci">static struct translator_path ** __matrix</div><div class="ttdoc">a matrix that, for any pair of supported formats, indicates the total cost of translation and the fir...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00076">translate.c:76</a></div></div>
<div class="ttc" id="translate_8c_html_a664e361807a29bba28e6cc3d333f57d8"><div class="ttname"><a href="../../de/d43/translate_8c.html#a664e361807a29bba28e6cc3d333f57d8">__indextable</a></div><div class="ttdeci">static unsigned int * __indextable</div><div class="ttdoc">table for converting index to format values. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00083">translate.c:83</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="lock_8h_html_a045bd81ceab2de81e42af338ad7cf121"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a045bd81ceab2de81e42af338ad7cf121">ast_rwlock_wrlock</a></div><div class="ttdeci">#define ast_rwlock_wrlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00234">lock.h:234</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a664e361807a29bba28e6cc3d333f57d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a664e361807a29bba28e6cc3d333f57d8">&#9670;&nbsp;</a></span>__indextable</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">unsigned int* __indextable</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>table for converting index to format values. </p>
<dl class="section note"><dt>Note</dt><dd>this table is protected by the table_lock. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00083">83</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00147">add_codec2index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00104">codec_to_index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00170">index2codec()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00194">matrix_resize()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l01613">translate_shutdown()</a>.</p>

</div>
</div>
<a id="aab7f8cbe73fc8db1de51dcdbcec03bd9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab7f8cbe73fc8db1de51dcdbcec03bd9">&#9670;&nbsp;</a></span>__matrix</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/dd9/structtranslator__path.html">translator_path</a>** __matrix</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>a matrix that, for any pair of supported formats, indicates the total cost of translation and the first step. The full path can be reconstricted iterating on the matrix until step-&gt;dstfmt == desired_format. </p>
<p>Array indexes are 'src' and 'dest', in that order.</p>
<p>Note: the lock in the 'translators' list is also used to protect this structure. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00076">76</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

</div>
</div>
<a id="acc94a293fbe86a42647621894b524890"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc94a293fbe86a42647621894b524890">&#9670;&nbsp;</a></span>cli_translate</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_translate[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../de/d43/translate_8c.html#a43d75309415c6f46f89e2f12bafd43a7">handle_cli_core_show_translation</a> , .summary =  <span class="stringliteral">&quot;Display translation matrix&quot;</span> ,}</div><div class="line">}</div><div class="ttc" id="translate_8c_html_a43d75309415c6f46f89e2f12bafd43a7"><div class="ttname"><a href="../../de/d43/translate_8c.html#a43d75309415c6f46f89e2f12bafd43a7">handle_cli_core_show_translation</a></div><div class="ttdeci">static char * handle_cli_core_show_translation(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01164">translate.c:1164</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l01215">1215</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

</div>
</div>
<a id="a121e720f03859a0b5afd89ac1bb4f840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a121e720f03859a0b5afd89ac1bb4f840">&#9670;&nbsp;</a></span>cur_max_index</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int cur_max_index</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>the current largest index used by the __matrix and __indextable arrays </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00094">94</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l01220">__ast_register_translator()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00147">add_codec2index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00104">codec_to_index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00170">index2codec()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l00824">matrix_rebuild()</a>.</p>

</div>
</div>
<a id="a5c961d2031c896562556d389e7e4debf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c961d2031c896562556d389e7e4debf">&#9670;&nbsp;</a></span>index_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int index_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>the largest index that can be used in either the __indextable or __matrix before resize must occur </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00096">96</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d43/translate_8c_source.html#l00147">add_codec2index()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00268">matrix_clear()</a>, <a class="el" href="../../de/d43/translate_8c_source.html#l00194">matrix_resize()</a>, and <a class="el" href="../../de/d43/translate_8c_source.html#l01613">translate_shutdown()</a>.</p>

</div>
</div>
<a id="a3bb2839fae7b799fae04adf7c2285797"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bb2839fae7b799fae04adf7c2285797">&#9670;&nbsp;</a></span>tablelock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a04e2a4450668b0cd2be05edd6259df19">ast_rwlock_t</a> tablelock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>protects the __indextable for resizing </p>

<p class="definition">Definition at line <a class="el" href="../../de/d43/translate_8c_source.html#l00086">86</a> of file <a class="el" href="../../de/d43/translate_8c_source.html">translate.c</a>.</p>

</div>
</div>
<a id="a45feed165df2bd5800f87a143859a4ff"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a45feed165df2bd5800f87a143859a4ff">&#9670;&nbsp;</a></span>translators</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d7/d9a/structtranslators.html">translators</a>   <a class="el" href="../../d7/d9a/structtranslators.html">translators</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a> = { PTHREAD_RWLOCK_INITIALIZER , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} } , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:47:00 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
