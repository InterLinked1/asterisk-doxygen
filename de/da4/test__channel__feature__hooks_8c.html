<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: test_channel_feature_hooks.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_59425e443f801f1f2fd8bbe4959a3ccf.html">tests</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">test_channel_feature_hooks.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Channel features unit tests.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d2/ddc/test_8h_source.html">asterisk/test.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/df7/time_8h_source.html">asterisk/time.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d1e/bridge__basic_8h_source.html">asterisk/bridge_basic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/d47/features_8h_source.html">asterisk/features.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/d1c/format__cache_8h_source.html">asterisk/format_cache.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for test_channel_feature_hooks.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d7/d79/test__channel__feature__hooks_8c__incl.png" border="0" usemap="#test__channel__feature__hooks_8c" alt=""/></div>
<map name="test__channel__feature__hooks_8c" id="test__channel__feature__hooks_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="86,543,170,569"/>
<area shape="rect" id="node14" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="1644,169,1780,196"/>
<area shape="rect" id="node16" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="1499,916,1562,943"/>
<area shape="rect" id="node24" href="../../d2/ddc/test_8h.html" title="Test Framework API. " alt="" coords="238,468,351,495"/>
<area shape="rect" id="node26" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1060,393,1199,420"/>
<area shape="rect" id="node41" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="897,169,1025,196"/>
<area shape="rect" id="node47" href="../../d4/d1e/bridge__basic_8h.html" title="Basic bridge subclass API. " alt="" coords="1049,95,1217,121"/>
<area shape="rect" id="node48" href="../../de/d47/features_8h.html" title="Call Parking and Pickup API Includes code and algorithms from the Zapata library. ..." alt="" coords="783,95,924,121"/>
<area shape="rect" id="node50" href="../../db/d1c/format__cache_8h.html" title="Media Format Cache API. " alt="" coords="2547,95,2723,121"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="623,991,777,1017"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="437,767,574,793"/>
<area shape="rect" id="node13" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="166,617,301,644"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="627,1065,773,1092"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="967,916,1110,943"/>
<area shape="rect" id="node15" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1404,543,1519,569"/>
<area shape="rect" id="node19" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1029,841,1142,868"/>
<area shape="rect" id="node20" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1987,617,2144,644"/>
<area shape="rect" id="node21" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="325,617,456,644"/>
<area shape="rect" id="node18" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="1531,991,1677,1017"/>
<area shape="rect" id="node22" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="323,692,458,719"/>
<area shape="rect" id="node23" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="819,767,970,793"/>
<area shape="rect" id="node25" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="340,543,441,569"/>
<area shape="rect" id="node27" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1173,468,1317,495"/>
<area shape="rect" id="node28" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="2151,692,2310,719"/>
<area shape="rect" id="node29" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1902,468,2066,495"/>
<area shape="rect" id="node30" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1173,692,1299,719"/>
<area shape="rect" id="node31" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="477,468,624,495"/>
<area shape="rect" id="node32" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2142,468,2269,495"/>
<area shape="rect" id="node33" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="891,468,997,495"/>
<area shape="rect" id="node34" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="894,543,1045,569"/>
<area shape="rect" id="node35" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1542,468,1703,495"/>
<area shape="rect" id="node36" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="43,468,213,495"/>
<area shape="rect" id="node37" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="649,468,765,495"/>
<area shape="rect" id="node38" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="1123,617,1280,644"/>
<area shape="rect" id="node39" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1341,468,1467,495"/>
<area shape="rect" id="node40" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1727,468,1878,495"/>
<area shape="rect" id="node42" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="1035,319,1223,345"/>
<area shape="rect" id="node43" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="1030,244,1215,271"/>
<area shape="rect" id="node44" href="../../dd/dff/bridge__roles_8h.html" title="Channel Bridging Roles API. " alt="" coords="719,393,886,420"/>
<area shape="rect" id="node45" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="1291,244,1402,271"/>
<area shape="rect" id="node46" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="891,244,1005,271"/>
<area shape="rect" id="node49" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="874,319,985,345"/>
</map>
</div>
</div>
<p><a href="../../de/da4/test__channel__feature__hooks_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a86d2cbfb5a0c115147944a541cc355e0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a86d2cbfb5a0c115147944a541cc355e0">CHANNEL_TECH_NAME</a>&#160;&#160;&#160;&quot;FeaturesTestChannel&quot;</td></tr>
<tr class="separator:a86d2cbfb5a0c115147944a541cc355e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae769050eb9d3154ec3dd13c52fe316a2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ae769050eb9d3154ec3dd13c52fe316a2">HANGUP_CHANNEL</a>(<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="memdesc:ae769050eb9d3154ec3dd13c52fe316a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hang up a test channel safely.  <a href="#ae769050eb9d3154ec3dd13c52fe316a2">More...</a><br /></td></tr>
<tr class="separator:ae769050eb9d3154ec3dd13c52fe316a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0582474af034d9ac84cc3a5feb39932f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a0582474af034d9ac84cc3a5feb39932f">START_ALICE</a>(<a class="el" href="../../d4/d84/structchannel.html">channel</a>)&#160;&#160;&#160;<a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ad5ff5a4643a99f1af2fe970ba14f933d">START_CHANNEL</a>(<a class="el" href="../../d4/d84/structchannel.html">channel</a>, &quot;Alice&quot;, &quot;100&quot;)</td></tr>
<tr class="memdesc:a0582474af034d9ac84cc3a5feb39932f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a> for Alice.  <a href="#a0582474af034d9ac84cc3a5feb39932f">More...</a><br /></td></tr>
<tr class="separator:a0582474af034d9ac84cc3a5feb39932f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1fbffdc495195f776fffa540989e6b0d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a1fbffdc495195f776fffa540989e6b0d">START_BOB</a>(<a class="el" href="../../d4/d84/structchannel.html">channel</a>)&#160;&#160;&#160;<a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ad5ff5a4643a99f1af2fe970ba14f933d">START_CHANNEL</a>(<a class="el" href="../../d4/d84/structchannel.html">channel</a>, &quot;Bob&quot;, &quot;200&quot;)</td></tr>
<tr class="memdesc:a1fbffdc495195f776fffa540989e6b0d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a <a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a> for Bob.  <a href="#a1fbffdc495195f776fffa540989e6b0d">More...</a><br /></td></tr>
<tr class="separator:a1fbffdc495195f776fffa540989e6b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ff5a4643a99f1af2fe970ba14f933d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ad5ff5a4643a99f1af2fe970ba14f933d">START_CHANNEL</a>(<a class="el" href="../../d4/d84/structchannel.html">channel</a>,  <a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>,  <a class="el" href="../../d6/d49/structnumber.html">number</a>)</td></tr>
<tr class="separator:ad5ff5a4643a99f1af2fe970ba14f933d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e74d36fb5a15206804bc19db329922a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a9e74d36fb5a15206804bc19db329922a">TEST_BACKEND_NAME</a>&#160;&#160;&#160;&quot;Features Test Logging&quot;</td></tr>
<tr class="separator:a9e74d36fb5a15206804bc19db329922a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add35ea2349b86888eef95d404e6faebf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>&#160;&#160;&#160;&quot;/channels/features/&quot;</td></tr>
<tr class="separator:add35ea2349b86888eef95d404e6faebf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1895df02147a8d1e6291b31d51523ea9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a1895df02147a8d1e6291b31d51523ea9">TEST_CHANNEL_FORMAT</a>&#160;&#160;&#160;<a class="el" href="../../d9/d29/format__cache_8c.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></td></tr>
<tr class="separator:a1895df02147a8d1e6291b31d51523ea9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b51c562019050716e17f2d4b8c9fad6"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a4b51c562019050716e17f2d4b8c9fad6">AST_TEST_DEFINE</a> (test_features_channel_dtmf)</td></tr>
<tr class="separator:a4b51c562019050716e17f2d4b8c9fad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6856a8c221433ecf3e390350f1d5670"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ac6856a8c221433ecf3e390350f1d5670">AST_TEST_DEFINE</a> (test_features_channel_interval)</td></tr>
<tr class="separator:ac6856a8c221433ecf3e390350f1d5670"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ba579137e3652d5d3b2afb3da0741c5"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a8ba579137e3652d5d3b2afb3da0741c5">feature_callback</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, void *obj)</td></tr>
<tr class="separator:a8ba579137e3652d5d3b2afb3da0741c5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4aab087f903dfe2609a124a828903cb5"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a4aab087f903dfe2609a124a828903cb5">safe_bridge_destroy</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge)</td></tr>
<tr class="separator:a4aab087f903dfe2609a124a828903cb5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a987d4f1e5d92597fac228fa99bcb56be"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a987d4f1e5d92597fac228fa99bcb56be">safe_channel_release</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="separator:a987d4f1e5d92597fac228fa99bcb56be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af740ed3a2c9611cea944eb969455fa4a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#af740ed3a2c9611cea944eb969455fa4a">stream_periodic_frames</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, int ms, int interval_ms)</td></tr>
<tr class="separator:af740ed3a2c9611cea944eb969455fa4a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1316f70fe1398e0891201b563f2ca7a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a> (int secs, long nanosecs)</td></tr>
<tr class="separator:ab1316f70fe1398e0891201b563f2ca7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae022bf7ec3f76aa702ef17d916dd6e8d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ae022bf7ec3f76aa702ef17d916dd6e8d">wait_for_bridged</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="memdesc:ae022bf7ec3f76aa702ef17d916dd6e8d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until a channel is bridged.  <a href="#ae022bf7ec3f76aa702ef17d916dd6e8d">More...</a><br /></td></tr>
<tr class="separator:ae022bf7ec3f76aa702ef17d916dd6e8d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa72a17f50cccaea6f57d261a9150d29c"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#aa72a17f50cccaea6f57d261a9150d29c">wait_for_unbridged</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="el" href="../../d4/d84/structchannel.html">channel</a>)</td></tr>
<tr class="memdesc:aa72a17f50cccaea6f57d261a9150d29c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait until a channel is not bridged.  <a href="#aa72a17f50cccaea6f57d261a9150d29c">More...</a><br /></td></tr>
<tr class="separator:aa72a17f50cccaea6f57d261a9150d29c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Bridge Features Unit Tests&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a25247c86c3dce6882cfdc03db82114c6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a></td></tr>
<tr class="memdesc:a25247c86c3dce6882cfdc03db82114c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">A channel technology used for the unit tests.  <a href="#a25247c86c3dce6882cfdc03db82114c6">More...</a><br /></td></tr>
<tr class="separator:a25247c86c3dce6882cfdc03db82114c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Channel features unit tests. </p>
<dl class="section author"><dt>Author</dt><dd>Kinsey Moore <a href="#" onclick="location.href='mai'+'lto:'+'kmo'+'or'+'e@d'+'ig'+'ium'+'.c'+'om'; return false;">kmoor<span style="display: none;">.nosp@m.</span>e@di<span style="display: none;">.nosp@m.</span>gium.<span style="display: none;">.nosp@m.</span>com</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a86d2cbfb5a0c115147944a541cc355e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86d2cbfb5a0c115147944a541cc355e0">&#9670;&nbsp;</a></span>CHANNEL_TECH_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CHANNEL_TECH_NAME&#160;&#160;&#160;&quot;FeaturesTestChannel&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00045">45</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

</div>
</div>
<a id="ae769050eb9d3154ec3dd13c52fe316a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae769050eb9d3154ec3dd13c52fe316a2">&#9670;&nbsp;</a></span>HANGUP_CHANNEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HANGUP_CHANNEL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d4/d84/structchannel.html">channel</a></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hang up a test channel safely. </p>

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00107">107</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a0582474af034d9ac84cc3a5feb39932f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0582474af034d9ac84cc3a5feb39932f">&#9670;&nbsp;</a></span>START_ALICE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define START_ALICE</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d4/d84/structchannel.html">channel</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ad5ff5a4643a99f1af2fe970ba14f933d">START_CHANNEL</a>(<a class="el" href="../../d4/d84/structchannel.html">channel</a>, &quot;Alice&quot;, &quot;100&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a> for Alice. </p>

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00090">90</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a1fbffdc495195f776fffa540989e6b0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1fbffdc495195f776fffa540989e6b0d">&#9670;&nbsp;</a></span>START_BOB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define START_BOB</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d4/d84/structchannel.html">channel</a></td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#ad5ff5a4643a99f1af2fe970ba14f933d">START_CHANNEL</a>(<a class="el" href="../../d4/d84/structchannel.html">channel</a>, &quot;Bob&quot;, &quot;200&quot;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a <a class="el" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a> for Bob. </p>

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00093">93</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="ad5ff5a4643a99f1af2fe970ba14f933d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad5ff5a4643a99f1af2fe970ba14f933d">&#9670;&nbsp;</a></span>START_CHANNEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define START_CHANNEL</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d4/d84/structchannel.html">channel</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><a class="el" href="../../d6/d49/structnumber.html">number</a>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00095">95</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

</div>
</div>
<a id="a9e74d36fb5a15206804bc19db329922a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e74d36fb5a15206804bc19db329922a">&#9670;&nbsp;</a></span>TEST_BACKEND_NAME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_BACKEND_NAME&#160;&#160;&#160;&quot;Features Test Logging&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00047">47</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

</div>
</div>
<a id="add35ea2349b86888eef95d404e6faebf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add35ea2349b86888eef95d404e6faebf">&#9670;&nbsp;</a></span>TEST_CATEGORY</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_CATEGORY&#160;&#160;&#160;&quot;/channels/features/&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00043">43</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>

</div>
</div>
<a id="a1895df02147a8d1e6291b31d51523ea9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1895df02147a8d1e6291b31d51523ea9">&#9670;&nbsp;</a></span>TEST_CHANNEL_FORMAT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TEST_CHANNEL_FORMAT&#160;&#160;&#160;<a class="el" href="../../d9/d29/format__cache_8c.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00049">49</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00344">load_module()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00358">358</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00358">358</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00358">358</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

</div>
</div>
<a id="a4b51c562019050716e17f2d4b8c9fad6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b51c562019050716e17f2d4b8c9fad6">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_features_channel_dtmf&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">160</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03617">ast_bridge_basic_new()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01952">ast_bridge_depart()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03245">ast_bridge_dtmf_hook()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03720">ast_bridge_features_cleanup()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03687">ast_bridge_features_init()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01924">ast_bridge_impart()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00602">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11152">ast_channel_feature_hooks_append()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">AST_FRAME_DTMF</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00130">feature_callback()</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00107">HANGUP_CHANNEL</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">ast_frame_subclass::integer</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">ast_frame::len</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00122">safe_bridge_destroy()</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00114">safe_channel_release()</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00090">START_ALICE</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00093">START_BOB</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00138">stream_periodic_frames()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">ast_frame::subclass</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00043">TEST_CATEGORY</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00066">wait_for_bridged()</a>, and <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00078">wait_for_unbridged()</a>.</p>
<div class="fragment"><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan_alice, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a987d4f1e5d92597fac228fa99bcb56be">safe_channel_release</a>);</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan_bob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a987d4f1e5d92597fac228fa99bcb56be">safe_channel_release</a>);</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a4aab087f903dfe2609a124a828903cb5">safe_bridge_destroy</a>);</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a4aab087f903dfe2609a124a828903cb5">safe_bridge_destroy</a>);</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> features;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;   <span class="keywordtype">int</span> callback_executed = 0;</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> f = { <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>, };</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test running DTMF hooks on a channel via the feature hooks mechanism&quot;</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;         <span class="stringliteral">&quot;This test creates two channels, adds a DTMF hook to one, places them into\n&quot;</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;         <span class="stringliteral">&quot;a bridge, and verifies that the DTMF hook added to the channel feature\n&quot;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;         <span class="stringliteral">&quot;hooks can be triggered once the channel is bridged.&quot;</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   }</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="comment">/* Create the bridges */</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   bridge1 = <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a>();</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, bridge1 != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   bridge2 = <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a>();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, bridge2 != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   <span class="comment">/* Create channels that will go into the bridge */</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a0582474af034d9ac84cc3a5feb39932f">START_ALICE</a>(chan_alice);</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a1fbffdc495195f776fffa540989e6b0d">START_BOB</a>(chan_bob);</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;   <span class="comment">/* Setup the features and add them to alice */</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a>(&amp;features);</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../dc/d7a/bridge__features_8h.html#a48ebc85ae4e4a203014711dc3a492ac5">ast_bridge_dtmf_hook</a>(&amp;features, <span class="stringliteral">&quot;##**&quot;</span>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a8ba579137e3652d5d3b2afb3da0741c5">feature_callback</a>, &amp;callback_executed, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0));</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d5/d7b/channel_8h.html#a7a6c7334e6dbd91a2bffb826a338a922">ast_channel_feature_hooks_append</a>(chan_alice, &amp;features));</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;features);</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="comment">/* Bridge the channels */</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge1, chan_alice, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>));</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge1, chan_bob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>));</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ae022bf7ec3f76aa702ef17d916dd6e8d">wait_for_bridged</a>(chan_alice);</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="comment">/* Execute the feature */</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = 100;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <span class="charliteral">&#39;#&#39;</span>;</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan_alice, &amp;f);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan_alice, &amp;f);</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <span class="charliteral">&#39;*&#39;</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan_alice, &amp;f);</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan_alice, &amp;f);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#af740ed3a2c9611cea944eb969455fa4a">stream_periodic_frames</a>(chan_alice, 1000, 20);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <span class="comment">/* Remove the channels from the bridge */</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a>(chan_alice));</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a>(chan_bob));</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#aa72a17f50cccaea6f57d261a9150d29c">wait_for_unbridged</a>(chan_alice);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;   <span class="comment">/* Bridge the channels again to ensure that the feature hook remains on the channel */</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge2, chan_alice, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>));</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge2, chan_bob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>));</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ae022bf7ec3f76aa702ef17d916dd6e8d">wait_for_bridged</a>(chan_alice);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;   <span class="comment">/* Execute the feature */</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">len</a> = 100;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <span class="charliteral">&#39;#&#39;</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan_alice, &amp;f);</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan_alice, &amp;f);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   f.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> = <span class="charliteral">&#39;*&#39;</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan_alice, &amp;f);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan_alice, &amp;f);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#af740ed3a2c9611cea944eb969455fa4a">stream_periodic_frames</a>(chan_alice, 1000, 20);</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;   <span class="comment">/* Remove the channels from the bridge */</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a>(chan_alice));</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a>(chan_bob));</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="comment">/* Hangup the channels */</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ae769050eb9d3154ec3dd13c52fe316a2">HANGUP_CHANNEL</a>(chan_alice);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ae769050eb9d3154ec3dd13c52fe316a2">HANGUP_CHANNEL</a>(chan_bob);</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, callback_executed == 2);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="bridge__features_8h_html_aafc3026d777c0bf6899e93263178e102"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a></div><div class="ttdeci">void ast_bridge_features_cleanup(struct ast_bridge_features *features)</div><div class="ttdoc">Clean up the contents of a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03720">bridge.c:3720</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a987d4f1e5d92597fac228fa99bcb56be"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a987d4f1e5d92597fac228fa99bcb56be">safe_channel_release</a></div><div class="ttdeci">static void safe_channel_release(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00114">test_channel_feature_hooks.c:114</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a8ba579137e3652d5d3b2afb3da0741c5"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a8ba579137e3652d5d3b2afb3da0741c5">feature_callback</a></div><div class="ttdeci">static int feature_callback(struct ast_bridge_channel *bridge_channel, void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00130">test_channel_feature_hooks.c:130</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3128b52009fb3dd764dce90ea377fce1"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a></div><div class="ttdeci">int ast_bridge_features_init(struct ast_bridge_features *features)</div><div class="ttdoc">Initialize bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03687">bridge.c:3687</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_ae022bf7ec3f76aa702ef17d916dd6e8d"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#ae022bf7ec3f76aa702ef17d916dd6e8d">wait_for_bridged</a></div><div class="ttdeci">static void wait_for_bridged(struct ast_channel *channel)</div><div class="ttdoc">Wait until a channel is bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00066">test_channel_feature_hooks.c:66</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="bridge_8h_html_a582e1dd73a483ac881cff01fa07f39ae"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a></div><div class="ttdeci">int ast_bridge_impart(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, enum ast_bridge_impart_flags flags) attribute_warn_unused_result</div><div class="ttdoc">Impart a channel to a bridge (non-blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01924">bridge.c:1924</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00602">bridge.h:602</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="bridge_8h_html_a0075715d330c8492e03c6d3ca3f48e13"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a></div><div class="ttdeci">int ast_bridge_depart(struct ast_channel *chan)</div><div class="ttdoc">Depart a channel from a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01952">bridge.c:1952</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a4aab087f903dfe2609a124a828903cb5"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a4aab087f903dfe2609a124a828903cb5">safe_bridge_destroy</a></div><div class="ttdeci">static void safe_bridge_destroy(struct ast_bridge *bridge)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00122">test_channel_feature_hooks.c:122</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_aa72a17f50cccaea6f57d261a9150d29c"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#aa72a17f50cccaea6f57d261a9150d29c">wait_for_unbridged</a></div><div class="ttdeci">static void wait_for_unbridged(struct ast_channel *channel)</div><div class="ttdoc">Wait until a channel is not bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00078">test_channel_feature_hooks.c:78</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a48ebc85ae4e4a203014711dc3a492ac5"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a48ebc85ae4e4a203014711dc3a492ac5">ast_bridge_dtmf_hook</a></div><div class="ttdeci">int ast_bridge_dtmf_hook(struct ast_bridge_features *features, const char *dtmf, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Attach a DTMF hook to a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03245">bridge.c:3245</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="bridge__basic_8h_html_a1410fb71fa67f9ee92f15b18439b7571"><div class="ttname"><a href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a></div><div class="ttdeci">struct ast_bridge * ast_bridge_basic_new(void)</div><div class="ttdoc">Create a new basic class bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/bridge__basic_8c_source.html#l03617">bridge_basic.c:3617</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a1fbffdc495195f776fffa540989e6b0d"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a1fbffdc495195f776fffa540989e6b0d">START_BOB</a></div><div class="ttdeci">#define START_BOB(channel)</div><div class="ttdoc">Create a test_features_chan_tech for Bob. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00093">test_channel_feature_hooks.c:93</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00043">test_channel_feature_hooks.c:43</a></div></div>
<div class="ttc" id="channel_8h_html_a7a6c7334e6dbd91a2bffb826a338a922"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a6c7334e6dbd91a2bffb826a338a922">ast_channel_feature_hooks_append</a></div><div class="ttdeci">int ast_channel_feature_hooks_append(struct ast_channel *chan, struct ast_bridge_features *features)</div><div class="ttdoc">Appends to the channel-attached features a channel has access to upon being bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11152">channel.c:11152</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a0582474af034d9ac84cc3a5feb39932f"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a0582474af034d9ac84cc3a5feb39932f">START_ALICE</a></div><div class="ttdeci">#define START_ALICE(channel)</div><div class="ttdoc">Create a test_features_chan_tech for Alice. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00090">test_channel_feature_hooks.c:90</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_ae769050eb9d3154ec3dd13c52fe316a2"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#ae769050eb9d3154ec3dd13c52fe316a2">HANGUP_CHANNEL</a></div><div class="ttdeci">#define HANGUP_CHANNEL(channel)</div><div class="ttdoc">Hang up a test channel safely. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00107">test_channel_feature_hooks.c:107</a></div></div>
<div class="ttc" id="structast__frame_html_aaccba9d5adc3f6c39aad767db95ba484"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aaccba9d5adc3f6c39aad767db95ba484">ast_frame::len</a></div><div class="ttdeci">long len</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00193">include/asterisk/frame.h:193</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_af740ed3a2c9611cea944eb969455fa4a"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#af740ed3a2c9611cea944eb969455fa4a">stream_periodic_frames</a></div><div class="ttdeci">static void stream_periodic_frames(struct ast_channel *chan, int ms, int interval_ms)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00138">test_channel_feature_hooks.c:138</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac6856a8c221433ecf3e390350f1d5670"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6856a8c221433ecf3e390350f1d5670">&#9670;&nbsp;</a></span>AST_TEST_DEFINE() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">AST_TEST_DEFINE </td>
          <td>(</td>
          <td class="paramtype">test_features_channel_interval&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00253">253</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03617">ast_bridge_basic_new()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01952">ast_bridge_depart()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03720">ast_bridge_features_cleanup()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03687">ast_bridge_features_init()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01924">ast_bridge_impart()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00602">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03382">ast_bridge_interval_hook()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l11152">ast_channel_feature_hooks_append()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00201">AST_TEST_NOT_RUN</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00202">AST_TEST_PASS</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00130">feature_callback()</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00107">HANGUP_CHANNEL</a>, <a class="el" href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip::info()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00122">safe_bridge_destroy()</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00114">safe_channel_release()</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00090">START_ALICE</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00093">START_BOB</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00043">TEST_CATEGORY</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00208">TEST_EXECUTE</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00207">TEST_INIT</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00057">test_nanosleep()</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00066">wait_for_bridged()</a>, and <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00078">wait_for_unbridged()</a>.</p>
<div class="fragment"><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;{</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan_alice, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a987d4f1e5d92597fac228fa99bcb56be">safe_channel_release</a>);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, chan_bob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a987d4f1e5d92597fac228fa99bcb56be">safe_channel_release</a>);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a4aab087f903dfe2609a124a828903cb5">safe_bridge_destroy</a>);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, bridge2, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a4aab087f903dfe2609a124a828903cb5">safe_bridge_destroy</a>);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> features;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;   <span class="keywordtype">int</span> callback_executed = 0;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a>:</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;name = __func__;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;category = <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;summary = <span class="stringliteral">&quot;Test running interval hooks on a channel via the feature hooks mechanism&quot;</span>;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;      <a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>-&gt;description =</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;         <span class="stringliteral">&quot;This test creates two channels, adds an interval hook to one, places them\n&quot;</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;         <span class="stringliteral">&quot;into a bridge, and verifies that the interval hook added to the channel\n&quot;</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;         <span class="stringliteral">&quot;feature hooks is triggered once the channel is bridged.&quot;</span>;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a>;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a>:</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;   }</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="comment">/* Create the bridges */</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   bridge1 = <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a>();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, bridge1 != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   bridge2 = <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a>();</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, bridge2 != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <span class="comment">/* Create channels that will go into the bridge */</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a0582474af034d9ac84cc3a5feb39932f">START_ALICE</a>(chan_alice);</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a1fbffdc495195f776fffa540989e6b0d">START_BOB</a>(chan_bob);</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   <span class="comment">/* Setup the features and add them to alice */</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a>(&amp;features);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a>(&amp;features, 0, 1000, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a8ba579137e3652d5d3b2afb3da0741c5">feature_callback</a>, &amp;callback_executed, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0));</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d5/d7b/channel_8h.html#a7a6c7334e6dbd91a2bffb826a338a922">ast_channel_feature_hooks_append</a>(chan_alice, &amp;features));</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;features);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="comment">/* Bridge the channels */</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge1, chan_alice, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>));</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge1, chan_bob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>));</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ae022bf7ec3f76aa702ef17d916dd6e8d">wait_for_bridged</a>(chan_alice);</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="comment">/* Let the interval hook execute once */</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a>(1, 500000000);</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   <span class="comment">/* Remove the channels from the bridge */</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a>(chan_alice));</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a>(chan_bob));</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#aa72a17f50cccaea6f57d261a9150d29c">wait_for_unbridged</a>(chan_alice);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, callback_executed &gt;= 1);</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   callback_executed = 0;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <span class="comment">/* Bridge the channels again to ensure that the feature hook remains on the channel */</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge2, chan_alice, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>));</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge2, chan_bob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a>));</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ae022bf7ec3f76aa702ef17d916dd6e8d">wait_for_bridged</a>(chan_alice);</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="comment">/* Let the interval hook execute once */</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a>(1, 500000000);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   <span class="comment">/* Remove the channels from the bridge */</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a>(chan_alice));</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, !<a class="code" href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a>(chan_bob));</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="comment">/* Hangup the channels */</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ae769050eb9d3154ec3dd13c52fe316a2">HANGUP_CHANNEL</a>(chan_alice);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ae769050eb9d3154ec3dd13c52fe316a2">HANGUP_CHANNEL</a>(chan_bob);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;   ast_test_validate(<a class="code" href="../../d8/d89/structtest.html">test</a>, callback_executed &gt;= 1);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="bridge__features_8h_html_aafc3026d777c0bf6899e93263178e102"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a></div><div class="ttdeci">void ast_bridge_features_cleanup(struct ast_bridge_features *features)</div><div class="ttdoc">Clean up the contents of a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03720">bridge.c:3720</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a987d4f1e5d92597fac228fa99bcb56be"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a987d4f1e5d92597fac228fa99bcb56be">safe_channel_release</a></div><div class="ttdeci">static void safe_channel_release(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00114">test_channel_feature_hooks.c:114</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a8ba579137e3652d5d3b2afb3da0741c5"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a8ba579137e3652d5d3b2afb3da0741c5">feature_callback</a></div><div class="ttdeci">static int feature_callback(struct ast_bridge_channel *bridge_channel, void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00130">test_channel_feature_hooks.c:130</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2adb2586ef58bb9dd2f84a7d592ecf3e0e">TEST_EXECUTE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00208">test.h:208</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3128b52009fb3dd764dce90ea377fce1"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a></div><div class="ttdeci">int ast_bridge_features_init(struct ast_bridge_features *features)</div><div class="ttdoc">Initialize bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03687">bridge.c:3687</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_ae022bf7ec3f76aa702ef17d916dd6e8d"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#ae022bf7ec3f76aa702ef17d916dd6e8d">wait_for_bridged</a></div><div class="ttdeci">static void wait_for_bridged(struct ast_channel *channel)</div><div class="ttdoc">Wait until a channel is bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00066">test_channel_feature_hooks.c:66</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a0689ac4326c7a771e1b6ed1e4cde53e2a21df97525a6ac371a7fb604dfa8ea67b">TEST_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00207">test.h:207</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a8cf2ae27807baf798d726d630693cc8c">AST_TEST_NOT_RUN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00201">test.h:201</a></div></div>
<div class="ttc" id="bridge_8h_html_a582e1dd73a483ac881cff01fa07f39ae"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a></div><div class="ttdeci">int ast_bridge_impart(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, enum ast_bridge_impart_flags flags) attribute_warn_unused_result</div><div class="ttdoc">Impart a channel to a bridge (non-blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01924">bridge.c:1924</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_ab1316f70fe1398e0891201b563f2ca7a"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a></div><div class="ttdeci">static void test_nanosleep(int secs, long nanosecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00057">test_channel_feature_hooks.c:57</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a01be425a6fb9fefd36905b542e903087">AST_BRIDGE_IMPART_CHAN_DEPARTABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00602">bridge.h:602</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3e9bdb7b62b531f001b7dcb5c39b3551"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a></div><div class="ttdeci">int ast_bridge_interval_hook(struct ast_bridge_features *features, enum ast_bridge_hook_timer_option flags, unsigned int interval, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Attach an interval hook to a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03382">bridge.c:3382</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="bridge_8h_html_a0075715d330c8492e03c6d3ca3f48e13"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0075715d330c8492e03c6d3ca3f48e13">ast_bridge_depart</a></div><div class="ttdeci">int ast_bridge_depart(struct ast_channel *chan)</div><div class="ttdoc">Depart a channel from a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01952">bridge.c:1952</a></div></div>
<div class="ttc" id="test_8h_html_aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b"><div class="ttname"><a href="../../d2/ddc/test_8h.html#aad2aec78205d328d23894a6598cc4044a7a3ab73c870a7ce6cf1a0f3cfd42a37b">AST_TEST_PASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00202">test.h:202</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a4aab087f903dfe2609a124a828903cb5"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a4aab087f903dfe2609a124a828903cb5">safe_bridge_destroy</a></div><div class="ttdeci">static void safe_bridge_destroy(struct ast_bridge *bridge)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00122">test_channel_feature_hooks.c:122</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_aa72a17f50cccaea6f57d261a9150d29c"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#aa72a17f50cccaea6f57d261a9150d29c">wait_for_unbridged</a></div><div class="ttdeci">static void wait_for_unbridged(struct ast_channel *channel)</div><div class="ttdoc">Wait until a channel is not bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00078">test_channel_feature_hooks.c:78</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="bridge__basic_8h_html_a1410fb71fa67f9ee92f15b18439b7571"><div class="ttname"><a href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a></div><div class="ttdeci">struct ast_bridge * ast_bridge_basic_new(void)</div><div class="ttdoc">Create a new basic class bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/bridge__basic_8c_source.html#l03617">bridge_basic.c:3617</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a1fbffdc495195f776fffa540989e6b0d"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a1fbffdc495195f776fffa540989e6b0d">START_BOB</a></div><div class="ttdeci">#define START_BOB(channel)</div><div class="ttdoc">Create a test_features_chan_tech for Bob. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00093">test_channel_feature_hooks.c:93</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_add35ea2349b86888eef95d404e6faebf"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#add35ea2349b86888eef95d404e6faebf">TEST_CATEGORY</a></div><div class="ttdeci">#define TEST_CATEGORY</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00043">test_channel_feature_hooks.c:43</a></div></div>
<div class="ttc" id="channel_8h_html_a7a6c7334e6dbd91a2bffb826a338a922"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a6c7334e6dbd91a2bffb826a338a922">ast_channel_feature_hooks_append</a></div><div class="ttdeci">int ast_channel_feature_hooks_append(struct ast_channel *chan, struct ast_bridge_features *features)</div><div class="ttdoc">Appends to the channel-attached features a channel has access to upon being bridged. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l11152">channel.c:11152</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a0582474af034d9ac84cc3a5feb39932f"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a0582474af034d9ac84cc3a5feb39932f">START_ALICE</a></div><div class="ttdeci">#define START_ALICE(channel)</div><div class="ttdoc">Create a test_features_chan_tech for Alice. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00090">test_channel_feature_hooks.c:90</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_ae769050eb9d3154ec3dd13c52fe316a2"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#ae769050eb9d3154ec3dd13c52fe316a2">HANGUP_CHANNEL</a></div><div class="ttdeci">#define HANGUP_CHANNEL(channel)</div><div class="ttdoc">Hang up a test channel safely. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00107">test_channel_feature_hooks.c:107</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ba579137e3652d5d3b2afb3da0741c5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ba579137e3652d5d3b2afb3da0741c5">&#9670;&nbsp;</a></span>feature_callback()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int feature_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00130">130</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;{</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   <span class="keywordtype">int</span> *callback_executed = obj;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   (*callback_executed)++;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00344">344</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l00539">ast_channel_register()</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00052">ast_format_cap_alloc</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00103">ast_format_cap_append</a>, <a class="el" href="../../d0/d3c/format__cap_8h_source.html#l00038">AST_FORMAT_CAP_FLAG_DEFAULT</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00127">AST_TEST_REGISTER</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00633">ast_channel_tech::capabilities</a>, and <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00049">TEST_CHANNEL_FORMAT</a>.</p>
<div class="fragment"><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;{</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>) {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(<a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a1895df02147a8d1e6291b31d51523ea9">TEST_CHANNEL_FORMAT</a>, 0);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(&amp;<a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a>);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_features_channel_dtmf);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a>(test_features_channel_interval);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div><div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="test_8h_html_a34f64a69c09d98ceb693b077efd7ef97"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a34f64a69c09d98ceb693b077efd7ef97">AST_TEST_REGISTER</a></div><div class="ttdeci">#define AST_TEST_REGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00127">test.h:127</a></div></div>
<div class="ttc" id="channel_8h_html_ab5f3776fda943e52820ceeee5835c1b4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a></div><div class="ttdeci">int ast_channel_register(const struct ast_channel_tech *tech)</div><div class="ttdoc">Register a channel technology (a new channel driver) Called by a channel module to register the kind ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00539">channel.c:539</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a25247c86c3dce6882cfdc03db82114c6"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a></div><div class="ttdeci">static struct ast_channel_tech test_features_chan_tech</div><div class="ttdoc">A channel technology used for the unit tests. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00052">test_channel_feature_hooks.c:52</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a1895df02147a8d1e6291b31d51523ea9"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a1895df02147a8d1e6291b31d51523ea9">TEST_CHANNEL_FORMAT</a></div><div class="ttdeci">#define TEST_CHANNEL_FORMAT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00049">test_channel_feature_hooks.c:49</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4aab087f903dfe2609a124a828903cb5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4aab087f903dfe2609a124a828903cb5">&#9670;&nbsp;</a></span>safe_bridge_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void safe_bridge_destroy </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00122">122</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d95/bridge_8c_source.html#l00970">ast_bridge_destroy()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   }</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(bridge, 0);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div><div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a987d4f1e5d92597fac228fa99bcb56be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a987d4f1e5d92597fac228fa99bcb56be">&#9670;&nbsp;</a></span>safe_channel_release()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void safe_channel_release </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00114">114</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l01584">ast_channel_release()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;{</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   }</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a015abb5b26bfba6ca64f10fd9e0468ba">ast_channel_release</a>(chan);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div><div class="ttc" id="channel_8h_html_a015abb5b26bfba6ca64f10fd9e0468ba"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a015abb5b26bfba6ca64f10fd9e0468ba">ast_channel_release</a></div><div class="ttdeci">struct ast_channel * ast_channel_release(struct ast_channel *chan)</div><div class="ttdoc">Unlink and release reference to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01584">channel.c:1584</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af740ed3a2c9611cea944eb969455fa4a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af740ed3a2c9611cea944eb969455fa4a">&#9670;&nbsp;</a></span>stream_periodic_frames()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void stream_periodic_frames </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>interval_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00138">138</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/d55/main_2frame_8c_source.html#l00079">ast_null_frame</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01139">ast_queue_frame()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00057">test_nanosleep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;{</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   <span class="keywordtype">long</span> nanosecs;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(chan != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0 &lt; ms);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0 &lt; interval_ms);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   nanosecs = interval_ms * 1000000L;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;   <span class="keywordflow">while</span> (0 &lt; ms) {</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a>(chan, &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;      <span class="keywordflow">if</span> (interval_ms &lt; ms) {</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;         ms -= interval_ms;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;         nanosecs = ms * 1000000L;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;         ms = 0;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;      <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a>(0, nanosecs);</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_ab1316f70fe1398e0891201b563f2ca7a"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a></div><div class="ttdeci">static void test_nanosleep(int secs, long nanosecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00057">test_channel_feature_hooks.c:57</a></div></div>
<div class="ttc" id="channel_8h_html_a6cbcba5661d55216968cde8fdf913c89"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6cbcba5661d55216968cde8fdf913c89">ast_queue_frame</a></div><div class="ttdeci">int ast_queue_frame(struct ast_channel *chan, struct ast_frame *f)</div><div class="ttdoc">Queue one or more frames to a channel&amp;#39;s frame queue. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01139">channel.c:1139</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1316f70fe1398e0891201b563f2ca7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1316f70fe1398e0891201b563f2ca7a">&#9670;&nbsp;</a></span>test_nanosleep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void test_nanosleep </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>secs</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>nanosecs</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00057">57</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00253">AST_TEST_DEFINE()</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00138">stream_periodic_frames()</a>, <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00066">wait_for_bridged()</a>, and <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00078">wait_for_unbridged()</a>.</p>
<div class="fragment"><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;   <span class="keyword">struct </span>timespec sleep_time = {secs, nanosecs};</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;   <span class="keywordflow">while</span> ((nanosleep(&amp;sleep_time, &amp;sleep_time) == -1) &amp;&amp; (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EINTR)) {</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   }</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div><div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00332">332</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00570">ast_channel_unregister()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00128">AST_TEST_UNREGISTER</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00633">ast_channel_tech::capabilities</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_features_channel_dtmf);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a>(test_features_channel_interval);</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(&amp;<a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a>);</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>);</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a>.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;}</div><div class="ttc" id="channel_8h_html_a53b708b7fc71dcbcd33acae0ad4d7ef8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a></div><div class="ttdeci">void ast_channel_unregister(const struct ast_channel_tech *tech)</div><div class="ttdoc">Unregister a channel technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00570">channel.c:570</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="test_8h_html_a79bc64a935b14b1b181156e5ada58ead"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a79bc64a935b14b1b181156e5ada58ead">AST_TEST_UNREGISTER</a></div><div class="ttdeci">#define AST_TEST_UNREGISTER(cb)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00128">test.h:128</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_a25247c86c3dce6882cfdc03db82114c6"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a25247c86c3dce6882cfdc03db82114c6">test_features_chan_tech</a></div><div class="ttdeci">static struct ast_channel_tech test_features_chan_tech</div><div class="ttdoc">A channel technology used for the unit tests. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00052">test_channel_feature_hooks.c:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae022bf7ec3f76aa702ef17d916dd6e8d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae022bf7ec3f76aa702ef17d916dd6e8d">&#9670;&nbsp;</a></span>wait_for_bridged()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void wait_for_bridged </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait until a channel is bridged. </p>

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00066">66</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l10746">ast_channel_is_bridged()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, and <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00057">test_nanosleep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;{</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(channel);</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(channel)) {</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(channel);</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;      <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a>(0, 1000000);</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(channel);</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   }</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(channel);</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_ab1316f70fe1398e0891201b563f2ca7a"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a></div><div class="ttdeci">static void test_nanosleep(int secs, long nanosecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00057">test_channel_feature_hooks.c:57</a></div></div>
<div class="ttc" id="channel_8h_html_aa0a52e573af67cb0f29095177128d186"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a></div><div class="ttdeci">int ast_channel_is_bridged(const struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10746">channel.c:10746</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa72a17f50cccaea6f57d261a9150d29c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa72a17f50cccaea6f57d261a9150d29c">&#9670;&nbsp;</a></span>wait_for_unbridged()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void wait_for_unbridged </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wait until a channel is not bridged. </p>

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00078">78</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d28/channel_8c_source.html#l10746">ast_channel_is_bridged()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, and <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00057">test_nanosleep()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00160">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;{</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(channel);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a>(channel)) {</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(channel);</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;      <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a>(0, 1000000);</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(channel);</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;   }</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(channel);</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="test__channel__feature__hooks_8c_html_ab1316f70fe1398e0891201b563f2ca7a"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#ab1316f70fe1398e0891201b563f2ca7a">test_nanosleep</a></div><div class="ttdeci">static void test_nanosleep(int secs, long nanosecs)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00057">test_channel_feature_hooks.c:57</a></div></div>
<div class="ttc" id="channel_8h_html_aa0a52e573af67cb0f29095177128d186"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aa0a52e573af67cb0f29095177128d186">ast_channel_is_bridged</a></div><div class="ttdeci">int ast_channel_is_bridged(const struct ast_channel *chan)</div><div class="ttdoc">Determine if a channel is in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10746">channel.c:10746</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Bridge Features Unit Tests&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c.html#a6e79b87e069c15a5fb21826e5eed0971">AST_BUILDOPT_SUM</a>, .load = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>, .unload = <a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>, .load_pri = <a class="el" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58a1d1eb207e01a2d3bf6aa6ba271c27dee">AST_MODPRI_DEFAULT</a>, .support_level = <a class="el" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a634484c0074e7b6b630756fab09e2c15">AST_MODULE_SUPPORT_CORE</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00358">358</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00358">358</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

</div>
</div>
<a id="a25247c86c3dce6882cfdc03db82114c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a25247c86c3dce6882cfdc03db82114c6">&#9670;&nbsp;</a></span>test_features_chan_tech</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> test_features_chan_tech</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .type = <a class="code" href="../../de/da4/test__channel__feature__hooks_8c.html#a86d2cbfb5a0c115147944a541cc355e0">CHANNEL_TECH_NAME</a>,</div><div class="line">   .description = <span class="stringliteral">&quot;Mock channel technology for Features tests&quot;</span>,</div><div class="line">}</div><div class="ttc" id="test__channel__feature__hooks_8c_html_a86d2cbfb5a0c115147944a541cc355e0"><div class="ttname"><a href="../../de/da4/test__channel__feature__hooks_8c.html#a86d2cbfb5a0c115147944a541cc355e0">CHANNEL_TECH_NAME</a></div><div class="ttdeci">#define CHANNEL_TECH_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00045">test_channel_feature_hooks.c:45</a></div></div>
</div><!-- fragment -->
<p>A channel technology used for the unit tests. </p>

<p class="definition">Definition at line <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html#l00052">52</a> of file <a class="el" href="../../de/da4/test__channel__feature__hooks_8c_source.html">test_channel_feature_hooks.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:46:54 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
