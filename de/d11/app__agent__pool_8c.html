<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: app_agent_pool.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">app_agent_pool.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Call center agent pool.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html">asterisk/app.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d16/module_8h_source.html">asterisk/module.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d7b/channel_8h_source.html">asterisk/channel.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/dde/bridge__internal_8h_source.html">asterisk/bridge_internal.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d1e/bridge__basic_8h_source.html">asterisk/bridge_basic.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d8/d85/bridge__after_8h_source.html">asterisk/bridge_after.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/dfe/config__options_8h_source.html">asterisk/config_options.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html">asterisk/features_config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d1/d0f/stringfields_8h_source.html">asterisk/stringfields.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d4a/stasis__channels_8h_source.html">asterisk/stasis_channels.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/da3/causes_8h_source.html">asterisk/causes.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for app_agent_pool.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d8/da4/app__agent__pool_8c__incl.png" border="0" usemap="#app__agent__pool_8c" alt=""/></div>
<map name="app__agent__pool_8c" id="app__agent__pool_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="314,603,398,629"/>
<area shape="rect" id="node6" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1844,304,1945,331"/>
<area shape="rect" id="node11" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="2842,603,3000,629"/>
<area shape="rect" id="node13" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1870,453,2004,480"/>
<area shape="rect" id="node14" href="../../d3/d93/include_2asterisk_2app_8h.html" title="Application convenience functions, designed to give consistent look and feel to Asterisk apps..." alt="" coords="2584,304,2696,331"/>
<area shape="rect" id="node17" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1199,229,1310,256"/>
<area shape="rect" id="node18" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1342,304,1481,331"/>
<area shape="rect" id="node38" href="../../d5/d16/module_8h.html" title="Asterisk module definitions. " alt="" coords="2606,229,2742,256"/>
<area shape="rect" id="node39" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="1377,80,1505,107"/>
<area shape="rect" id="node44" href="../../d5/dde/bridge__internal_8h.html" title="Private Bridging API. " alt="" coords="2634,80,2816,107"/>
<area shape="rect" id="node45" href="../../d4/d1e/bridge__basic_8h.html" title="Basic bridge subclass API. " alt="" coords="2841,80,3009,107"/>
<area shape="rect" id="node46" href="../../d8/d85/bridge__after_8h.html" title="After Bridge Execution API. " alt="" coords="3034,80,3198,107"/>
<area shape="rect" id="node47" href="../../db/dfe/config__options_8h.html" title="Configuration option&#45;handling. " alt="" coords="2071,304,2251,331"/>
<area shape="rect" id="node48" href="../../d0/daa/include_2asterisk_2features__config_8h.html" title="asterisk/features_config.h" alt="" coords="2978,155,3165,181"/>
<area shape="rect" id="node49" href="../../d9/d4a/stasis__channels_8h.html" title="asterisk/stasis_channels.h" alt="" coords="2217,229,2406,256"/>
<area shape="rect" id="node50" href="../../d4/da3/causes_8h.html" title="Internal Asterisk hangup causes. " alt="" coords="3222,80,3356,107"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="194,677,349,704"/>
<area shape="rect" id="node4" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1196,677,1334,704"/>
<area shape="rect" id="node5" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="374,677,508,704"/>
<area shape="rect" id="node7" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="796,528,947,555"/>
<area shape="rect" id="node9" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="2398,379,2529,405"/>
<area shape="rect" id="node8" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="815,603,928,629"/>
<area shape="rect" id="node10" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="2312,528,2426,555"/>
<area shape="rect" id="node12" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="2474,453,2653,480"/>
<area shape="rect" id="node15" href="../../d2/d4d/file_8h.html" title="Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. " alt="" coords="2857,379,2964,405"/>
<area shape="rect" id="node16" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="2249,379,2374,405"/>
<area shape="rect" id="node21" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="1598,528,1729,555"/>
<area shape="rect" id="node24" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="506,379,653,405"/>
<area shape="rect" id="node31" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="214,453,377,480"/>
<area shape="rect" id="node34" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1191,304,1318,331"/>
<area shape="rect" id="node35" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="987,304,1167,331"/>
<area shape="rect" id="node36" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="44,528,184,555"/>
<area shape="rect" id="node37" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="2396,304,2531,331"/>
<area shape="rect" id="node19" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="2080,453,2224,480"/>
<area shape="rect" id="node20" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1584,453,1743,480"/>
<area shape="rect" id="node22" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="960,379,1124,405"/>
<area shape="rect" id="node23" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="1082,453,1208,480"/>
<area shape="rect" id="node25" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="2098,379,2224,405"/>
<area shape="rect" id="node26" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1149,379,1256,405"/>
<area shape="rect" id="node27" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="658,453,808,480"/>
<area shape="rect" id="node28" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1331,379,1492,405"/>
<area shape="rect" id="node29" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="209,528,380,555"/>
<area shape="rect" id="node30" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="264,379,380,405"/>
<area shape="rect" id="node32" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="778,379,936,405"/>
<area shape="rect" id="node33" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1516,379,1667,405"/>
<area shape="rect" id="node40" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="1347,229,1535,256"/>
<area shape="rect" id="node41" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="1479,155,1664,181"/>
<area shape="rect" id="node42" href="../../dd/dff/bridge__roles_8h.html" title="Channel Bridging Roles API. " alt="" coords="692,155,859,181"/>
<area shape="rect" id="node43" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="1292,155,1403,181"/>
</map>
</div>
</div>
<p><a href="../../de/d11/app__agent__pool_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d4/d01/structagent__cfg.html">agent_cfg</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d86/structagent__complete.html">agent_complete</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure representing an agent.  <a href="../../dd/d4d/structagent__pvt.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d4f/structagents__cfg.html">agents_cfg</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aad1cee1e03f1e1c5ad4067940fdab5b0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent)&#160;&#160;&#160;<a class="el" href="../../de/d11/app__agent__pool_8c.html#abcc455cab3ad2f3eeda4797611d1c0ed">_agent_lock</a>(agent, __FILE__, __PRETTY_FUNCTION__, __LINE__, #agent)</td></tr>
<tr class="memdesc:aad1cee1e03f1e1c5ad4067940fdab5b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the agent.  <a href="#aad1cee1e03f1e1c5ad4067940fdab5b0">More...</a><br /></td></tr>
<tr class="separator:aad1cee1e03f1e1c5ad4067940fdab5b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec4e1bc1cab0249a428af2157c2514a1"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent)&#160;&#160;&#160;<a class="el" href="../../de/d11/app__agent__pool_8c.html#a221957559e467e3d6793e2eaf2c58352">_agent_unlock</a>(agent, __FILE__, __PRETTY_FUNCTION__, __LINE__, #agent)</td></tr>
<tr class="memdesc:aec4e1bc1cab0249a428af2157c2514a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the agent.  <a href="#aec4e1bc1cab0249a428af2157c2514a1">More...</a><br /></td></tr>
<tr class="separator:aec4e1bc1cab0249a428af2157c2514a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34d3e99d5529e36506d0ee8a9982c281"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a34d3e99d5529e36506d0ee8a9982c281">AST_MAX_BUF</a>&#160;&#160;&#160;256</td></tr>
<tr class="separator:a34d3e99d5529e36506d0ee8a9982c281"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d78ba0e31a3a17b37273be121850718"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a1d78ba0e31a3a17b37273be121850718">CALLER_SAFETY_TIMEOUT_TIME</a>&#160;&#160;&#160;(2 * 60 * 1000)</td></tr>
<tr class="separator:a1d78ba0e31a3a17b37273be121850718"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd2c9505e0edcb47e18669f60500acf0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#afd2c9505e0edcb47e18669f60500acf0">FORMAT_HDR</a>&#160;&#160;&#160;&quot;%-8s %-20s %-11s %-30s %s\n&quot;</td></tr>
<tr class="separator:afd2c9505e0edcb47e18669f60500acf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4090d7655fc829efc4a37a3144759c7c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a4090d7655fc829efc4a37a3144759c7c">FORMAT_ROW</a>&#160;&#160;&#160;&quot;%-8s %-20s %-11s %-30s %s\n&quot;</td></tr>
<tr class="separator:a4090d7655fc829efc4a37a3144759c7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab9353a3e165a7fd78b69b27e36d49e8b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ab9353a3e165a7fd78b69b27e36d49e8b">LOGIN_WAIT_TIMEOUT_TIME</a>&#160;&#160;&#160;5</td></tr>
<tr class="separator:ab9353a3e165a7fd78b69b27e36d49e8b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:abcb60ae8dded463f56a7c35857f1e501"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#abcb60ae8dded463f56a7c35857f1e501">AGENT_LOGIN_OPT_FLAGS</a> { <a class="el" href="../../de/d11/app__agent__pool_8c.html#abcb60ae8dded463f56a7c35857f1e501a9c6a0359498684912cb0a3810e03138d">OPT_SILENT</a> = (1 &lt;&lt; 0)
 }</td></tr>
<tr class="separator:abcb60ae8dded463f56a7c35857f1e501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba0c7c74e5144e318659f810dbc6d5e8"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8">agent_override_flags</a> { <a class="el" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd">AGENT_FLAG_ACK_CALL</a> = (1 &lt;&lt; 0), 
<a class="el" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93">AGENT_FLAG_DTMF_ACCEPT</a> = (1 &lt;&lt; 1), 
<a class="el" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827">AGENT_FLAG_AUTO_LOGOFF</a> = (1 &lt;&lt; 2), 
<a class="el" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832">AGENT_FLAG_WRAPUP_TIME</a> = (1 &lt;&lt; 3)
 }</td></tr>
<tr class="separator:aba0c7c74e5144e318659f810dbc6d5e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae60dcdeaa28da0fc60d394eaf1a6edd7"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7">agent_state</a> { <br />
&#160;&#160;<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86">AGENT_STATE_LOGGED_OUT</a>, 
<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0">AGENT_STATE_PROBATION_WAIT</a>, 
<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a>, 
<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a>, 
<br />
&#160;&#160;<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a>, 
<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49">AGENT_STATE_ON_CALL</a>, 
<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621">AGENT_STATE_CALL_WRAPUP</a>, 
<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a>
<br />
 }</td></tr>
<tr class="separator:ae60dcdeaa28da0fc60d394eaf1a6edd7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a88b7c88fed6b80fd18f34f97757dfc04">__reg_module</a> (void)</td></tr>
<tr class="separator:a88b7c88fed6b80fd18f34f97757dfc04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afeab1257bd17282b95875499393a147a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#afeab1257bd17282b95875499393a147a">__unreg_module</a> (void)</td></tr>
<tr class="separator:afeab1257bd17282b95875499393a147a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abcc455cab3ad2f3eeda4797611d1c0ed"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#abcc455cab3ad2f3eeda4797611d1c0ed">_agent_lock</a> (struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent, const char *file, const char *function, int line, const char *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>)</td></tr>
<tr class="separator:abcc455cab3ad2f3eeda4797611d1c0ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a221957559e467e3d6793e2eaf2c58352"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a221957559e467e3d6793e2eaf2c58352">_agent_unlock</a> (struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent, const char *file, const char *function, int line, const char *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>)</td></tr>
<tr class="separator:a221957559e467e3d6793e2eaf2c58352"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6558aa820bc9dd1eebac76ee2e2951f0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a6558aa820bc9dd1eebac76ee2e2951f0">action_agent_logoff</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:a6558aa820bc9dd1eebac76ee2e2951f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0c9069d554e6ace86b060a06c56d2ba3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a0c9069d554e6ace86b060a06c56d2ba3">action_agents</a> (struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *s, const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *m)</td></tr>
<tr class="separator:a0c9069d554e6ace86b060a06c56d2ba3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8f0089dcfc5a0c38a72eaa0aeb3014e0"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a8f0089dcfc5a0c38a72eaa0aeb3014e0">agent_after_bridge_cb</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, void *data)</td></tr>
<tr class="separator:a8f0089dcfc5a0c38a72eaa0aeb3014e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a99d2d56a1bc356d880b7dfa6921cf32f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a99d2d56a1bc356d880b7dfa6921cf32f">agent_after_bridge_cb_failed</a> (enum <a class="el" href="../../d8/d85/bridge__after_8h.html#a1b15a371c654cfe77de053afe0994b9c">ast_bridge_after_cb_reason</a> reason, void *data)</td></tr>
<tr class="separator:a99d2d56a1bc356d880b7dfa6921cf32f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a951f3727bbc983c0b9a20bac17650c44"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a951f3727bbc983c0b9a20bac17650c44">agent_alert</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const void *payload, size_t payload_size)</td></tr>
<tr class="separator:a951f3727bbc983c0b9a20bac17650c44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5733bc2f13f35fe0d8bde13939b50e07"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a5733bc2f13f35fe0d8bde13939b50e07">agent_bridge_channel_get_lock</a> (struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent)</td></tr>
<tr class="separator:a5733bc2f13f35fe0d8bde13939b50e07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad29a97a56d35dd72e739c27429ad2287"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ad29a97a56d35dd72e739c27429ad2287">agent_cfg_alloc</a> (const char *<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>)</td></tr>
<tr class="separator:ad29a97a56d35dd72e739c27429ad2287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a5ecab02628d53e614a259d45b1d520"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a6a5ecab02628d53e614a259d45b1d520">agent_cfg_destructor</a> (void *vdoomed)</td></tr>
<tr class="separator:a6a5ecab02628d53e614a259d45b1d520"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a355c423d8d2b38bf42751345e082f211"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a355c423d8d2b38bf42751345e082f211">agent_cfg_find</a> (struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="el" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, const char *username)</td></tr>
<tr class="separator:a355c423d8d2b38bf42751345e082f211"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81b479dda160b217188d44dffc86361f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a81b479dda160b217188d44dffc86361f">agent_cfg_sort_cmp</a> (const void *obj_left, const void *obj_right, int flags)</td></tr>
<tr class="separator:a81b479dda160b217188d44dffc86361f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad828f7da4ade54724a517f3e85f46130"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ad828f7da4ade54724a517f3e85f46130">agent_connect_caller</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent)</td></tr>
<tr class="separator:ad828f7da4ade54724a517f3e85f46130"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec6f971b8bba2801e4ab3a92917860f1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a> (const char *agent_id)</td></tr>
<tr class="separator:aec6f971b8bba2801e4ab3a92917860f1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf1606296839a7252342273de8f9f563"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#acf1606296839a7252342273de8f9f563">agent_function_read</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *cmd, char *data, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</td></tr>
<tr class="separator:acf1606296839a7252342273de8f9f563"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5485fc780d3e0cce2d98b85aad2c846c"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a5485fc780d3e0cce2d98b85aad2c846c">agent_handle_logoff_cmd</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a5485fc780d3e0cce2d98b85aad2c846c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5975e0ec066ec59aaca8d2e01989ac7b"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a5975e0ec066ec59aaca8d2e01989ac7b">agent_handle_show_all</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:a5975e0ec066ec59aaca8d2e01989ac7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc9e89f7dbd8c807535fbced0f99287"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#adcc9e89f7dbd8c807535fbced0f99287">agent_handle_show_online</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:adcc9e89f7dbd8c807535fbced0f99287"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf5e2903a4ceff8c71544f7760ebc970"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#abf5e2903a4ceff8c71544f7760ebc970">agent_handle_show_specific</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:abf5e2903a4ceff8c71544f7760ebc970"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55ac80086debb254e9d1f21d210e3705"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a> (struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent)</td></tr>
<tr class="separator:a55ac80086debb254e9d1f21d210e3705"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae896354e27dbb9fd8ece2a88f4d88d0d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ae896354e27dbb9fd8ece2a88f4d88d0d">agent_login_channel_config</a> (struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</td></tr>
<tr class="separator:ae896354e27dbb9fd8ece2a88f4d88d0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6f3c6c02f7961bd6939f302cafa0f4f"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ae6f3c6c02f7961bd6939f302cafa0f4f">agent_login_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="memdesc:ae6f3c6c02f7961bd6939f302cafa0f4f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dialplan AgentLogin application to log in an agent.  <a href="#ae6f3c6c02f7961bd6939f302cafa0f4f">More...</a><br /></td></tr>
<tr class="separator:ae6f3c6c02f7961bd6939f302cafa0f4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a90c12fe1cfd5f897d788df917f0af3af"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a90c12fe1cfd5f897d788df917f0af3af">agent_logoff_request</a> (const char *agent_id, int soft)</td></tr>
<tr class="separator:a90c12fe1cfd5f897d788df917f0af3af"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeaea7aa68d00de5f86fcc523d6f2c55a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#aeaea7aa68d00de5f86fcc523d6f2c55a">agent_logout</a> (struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent)</td></tr>
<tr class="separator:aeaea7aa68d00de5f86fcc523d6f2c55a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7efec5e491195982d97dbb426026cfc"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ad7efec5e491195982d97dbb426026cfc">agent_mark</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:ad7efec5e491195982d97dbb426026cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad63565be83f2a9e10382f7adb483965c"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ad63565be83f2a9e10382f7adb483965c">agent_pvt_cmp</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:ad63565be83f2a9e10382f7adb483965c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c84929318242d3454e982dce5668aae"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a7c84929318242d3454e982dce5668aae">agent_pvt_destructor</a> (void *vdoomed)</td></tr>
<tr class="separator:a7c84929318242d3454e982dce5668aae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a5f74a4e24b8c032bd9698c1f2af510"><td class="memItemLeft" align="right" valign="top">static enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a3a5f74a4e24b8c032bd9698c1f2af510">agent_pvt_devstate_get</a> (const char *agent_id)</td></tr>
<tr class="separator:a3a5f74a4e24b8c032bd9698c1f2af510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0c3d04727ae30c5deac61abe52b5fdd"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ab0c3d04727ae30c5deac61abe52b5fdd">agent_pvt_new</a> (struct <a class="el" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *cfg)</td></tr>
<tr class="separator:ab0c3d04727ae30c5deac61abe52b5fdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32d9fcd6bfb0ed9371e6dbae8a994bda"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a32d9fcd6bfb0ed9371e6dbae8a994bda">agent_pvt_sort_cmp</a> (const void *obj_left, const void *obj_right, int flags)</td></tr>
<tr class="separator:a32d9fcd6bfb0ed9371e6dbae8a994bda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a392237b28b1ee658981b450fcf3fe363"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a392237b28b1ee658981b450fcf3fe363">agent_request_exec</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *data)</td></tr>
<tr class="memdesc:a392237b28b1ee658981b450fcf3fe363"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dialplan AgentRequest application to locate an agent to talk with.  <a href="#a392237b28b1ee658981b450fcf3fe363">More...</a><br /></td></tr>
<tr class="separator:a392237b28b1ee658981b450fcf3fe363"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e005c499b7e949c3f1a290e88acb71d"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a8e005c499b7e949c3f1a290e88acb71d">agent_run</a> (struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged)</td></tr>
<tr class="separator:a8e005c499b7e949c3f1a290e88acb71d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e0c76b6d740600bf9e322b87d04dfb4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a4e0c76b6d740600bf9e322b87d04dfb4">agent_show_requested</a> (struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, int online_only)</td></tr>
<tr class="separator:a4e0c76b6d740600bf9e322b87d04dfb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a46a46dbbf30cbb25031b5276fc7e3d98"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a46a46dbbf30cbb25031b5276fc7e3d98">agent_sweep</a> (void *obj, void *arg, int flags)</td></tr>
<tr class="separator:a46a46dbbf30cbb25031b5276fc7e3d98"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad2b4b080213b6b09e799374f4529ecc2"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ad2b4b080213b6b09e799374f4529ecc2">agents_cfg_alloc</a> (void)</td></tr>
<tr class="separator:ad2b4b080213b6b09e799374f4529ecc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3bc870eb2da8463a4fb53bf2fee5bdf4"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a3bc870eb2da8463a4fb53bf2fee5bdf4">agents_cfg_destructor</a> (void *vdoomed)</td></tr>
<tr class="separator:a3bc870eb2da8463a4fb53bf2fee5bdf4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada8114db41c738d45b72e605ebd7ac7f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ada8114db41c738d45b72e605ebd7ac7f">agents_mark</a> (void)</td></tr>
<tr class="separator:ada8114db41c738d45b72e605ebd7ac7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acda8801e5f7029b4afec1a19ecae16b2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#acda8801e5f7029b4afec1a19ecae16b2">agents_post_apply_config</a> (void)</td></tr>
<tr class="separator:acda8801e5f7029b4afec1a19ecae16b2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1a2f2b62c60544be70fc0cff132bdcf"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ae1a2f2b62c60544be70fc0cff132bdcf">agents_sweep</a> (void)</td></tr>
<tr class="separator:ae1a2f2b62c60544be70fc0cff132bdcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2b53789591de3558859d20a0800a9eda"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a2b53789591de3558859d20a0800a9eda">AO2_GLOBAL_OBJ_STATIC</a> (<a class="el" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>)</td></tr>
<tr class="separator:a2b53789591de3558859d20a0800a9eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6cabea39e02dfbba5213d98b312276e8"><td class="memItemLeft" align="right" valign="top">static&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a6cabea39e02dfbba5213d98b312276e8">AO2_GLOBAL_OBJ_STATIC</a> (agent_holding)</td></tr>
<tr class="separator:a6cabea39e02dfbba5213d98b312276e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae">AST_MODULE_SELF_SYM</a> (void)</td></tr>
<tr class="separator:a4fb0aca9bbcdb9709fa52a70aded6cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5a8115993ab0d49f73d77a11718a869"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#af5a8115993ab0d49f73d77a11718a869">bridge_agent_hold_ack</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, void *hook_pvt)</td></tr>
<tr class="separator:af5a8115993ab0d49f73d77a11718a869"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c861b7f9ac3693f06669b575dc6e16b"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a6c861b7f9ac3693f06669b575dc6e16b">bridge_agent_hold_deferred_create</a> (void)</td></tr>
<tr class="separator:a6c861b7f9ac3693f06669b575dc6e16b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab30350ac6df6da6e60c63534b3f2e6f2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ab30350ac6df6da6e60c63534b3f2e6f2">bridge_agent_hold_dissolving</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *self)</td></tr>
<tr class="memdesc:ab30350ac6df6da6e60c63534b3f2e6f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">The bridge is being dissolved.  <a href="#ab30350ac6df6da6e60c63534b3f2e6f2">More...</a><br /></td></tr>
<tr class="separator:ab30350ac6df6da6e60c63534b3f2e6f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1578ec878aa2014f6550270ad1468f94"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a1578ec878aa2014f6550270ad1468f94">bridge_agent_hold_heartbeat</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, void *hook_pvt)</td></tr>
<tr class="separator:a1578ec878aa2014f6550270ad1468f94"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ac128d97cc9176ba058342d94b90afb"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a6ac128d97cc9176ba058342d94b90afb">bridge_agent_hold_new</a> (void)</td></tr>
<tr class="separator:a6ac128d97cc9176ba058342d94b90afb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae637f8fbe936d377d08099c192d5414f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ae637f8fbe936d377d08099c192d5414f">bridge_agent_hold_pull</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *self, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="separator:ae637f8fbe936d377d08099c192d5414f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61441e0cbefa5859ff1953c2248eeef3"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a61441e0cbefa5859ff1953c2248eeef3">bridge_agent_hold_push</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *self, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *swap)</td></tr>
<tr class="separator:a61441e0cbefa5859ff1953c2248eeef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f905c96aa9c5adc8d4e297e3cf89f61"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a7f905c96aa9c5adc8d4e297e3cf89f61">bridge_init_agent_hold</a> (void)</td></tr>
<tr class="separator:a7f905c96aa9c5adc8d4e297e3cf89f61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aab6ab498f59aece6e53aa7102c0077e2"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#aab6ab498f59aece6e53aa7102c0077e2">caller_abort_agent</a> (struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent)</td></tr>
<tr class="separator:aab6ab498f59aece6e53aa7102c0077e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33214b7c3d67d8ea8652269fc5afb0d0"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a33214b7c3d67d8ea8652269fc5afb0d0">caller_joined_bridge</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, void *hook_pvt)</td></tr>
<tr class="separator:a33214b7c3d67d8ea8652269fc5afb0d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa635926514981b733c8cc5afaf0def9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#aaa635926514981b733c8cc5afaf0def9">caller_safety_timeout</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, void *hook_pvt)</td></tr>
<tr class="separator:aaa635926514981b733c8cc5afaf0def9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb0201bc573414e692523e87814100f9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#afb0201bc573414e692523e87814100f9">clear_agent_status</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const void *payload, size_t payload_size)</td></tr>
<tr class="separator:afb0201bc573414e692523e87814100f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac543f4a511c682ff550c23f1c8f7870c"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ac543f4a511c682ff550c23f1c8f7870c">complete_agent</a> (const char *<a class="el" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, int <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="separator:ac543f4a511c682ff550c23f1c8f7870c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97ba140fa091ecedd7cb9029a5e2ac36"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a97ba140fa091ecedd7cb9029a5e2ac36">complete_agent_logoff</a> (const char *<a class="el" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, int <a class="el" href="../../d4/d88/structstate.html">state</a>)</td></tr>
<tr class="separator:a97ba140fa091ecedd7cb9029a5e2ac36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa54a01cf670832c6ad6fe44fc9bc20bb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#aa54a01cf670832c6ad6fe44fc9bc20bb">complete_agent_logoff_search</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="separator:aa54a01cf670832c6ad6fe44fc9bc20bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7ac094b1e03eda5eef727a0c1988141"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ac7ac094b1e03eda5eef727a0c1988141">complete_agent_search</a> (void *obj, void *arg, void *data, int flags)</td></tr>
<tr class="separator:ac7ac094b1e03eda5eef727a0c1988141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a656be8c315c7512b34037d5445b1fc05"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a656be8c315c7512b34037d5445b1fc05">CONFIG_INFO_STANDARD</a> (cfg_info, <a class="el" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>, <a class="el" href="../../de/d11/app__agent__pool_8c.html#ad2b4b080213b6b09e799374f4529ecc2">agents_cfg_alloc</a>,.files=<a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae45e38e10e4b85b3161bdd0cb45b81ef">agents_conf</a>),.post_apply_config=<a class="el" href="../../de/d11/app__agent__pool_8c.html#acda8801e5f7029b4afec1a19ecae16b2">agents_post_apply_config</a>,)</td></tr>
<tr class="separator:a656be8c315c7512b34037d5445b1fc05"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a542b526fd6c81c6193101dfbe970c2be"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a542b526fd6c81c6193101dfbe970c2be">destroy_config</a> (void)</td></tr>
<tr class="separator:a542b526fd6c81c6193101dfbe970c2be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed5779f84d4ebb67745d801d3ebede43"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#aed5779f84d4ebb67745d801d3ebede43">load_config</a> (void)</td></tr>
<tr class="separator:aed5779f84d4ebb67745d801d3ebede43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a> (void)</td></tr>
<tr class="separator:ac3382bf6da54c56b37069bd76bbdf4f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1982509765f4870f1f63412a53ea668"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> (void)</td></tr>
<tr class="separator:ad1982509765f4870f1f63412a53ea668"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f0c90a579585c460312c6c4d2caf216"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a6f0c90a579585c460312c6c4d2caf216">send_agent_login</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *agent)</td></tr>
<tr class="separator:a6f0c90a579585c460312c6c4d2caf216"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c8999dd893779d9c04cbf4a70e9e2a1"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a7c8999dd893779d9c04cbf4a70e9e2a1">send_agent_logoff</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, const char *agent, long logintime)</td></tr>
<tr class="separator:a7c8999dd893779d9c04cbf4a70e9e2a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a5ef1db5b0d29922a128c9422069729"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a7a5ef1db5b0d29922a128c9422069729">send_alert_to_agent</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *agent_id)</td></tr>
<tr class="separator:a7a5ef1db5b0d29922a128c9422069729"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a32da61f3d1a1faa6ae5211f81eb52341"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a32da61f3d1a1faa6ae5211f81eb52341">send_colp_to_agent</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>)</td></tr>
<tr class="separator:a32da61f3d1a1faa6ae5211f81eb52341"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad09fa931f468002152a3cc2d5ce25eae"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a> (void)</td></tr>
<tr class="separator:ad09fa931f468002152a3cc2d5ce25eae"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ab22f32016155f7f403e7178767163d7d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a> = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Call center agent <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> <a class="el" href="../../d3/d82/res__ari__applications_8c.html#a3b6853104a5ce7444515cf21e0aff2f3">applications</a>&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload, .load_pri = AST_MODPRI_DEVSTATE_PROVIDER, }</td></tr>
<tr class="separator:ab22f32016155f7f403e7178767163d7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1ef7f429bd53528befc06ac4d0f5ff3b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a1ef7f429bd53528befc06ac4d0f5ff3b">agent_function</a></td></tr>
<tr class="separator:a1ef7f429bd53528befc06ac4d0f5ff3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc4d1d983728ada524c84213c2536921"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#adc4d1d983728ada524c84213c2536921">agent_holding_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:adc4d1d983728ada524c84213c2536921"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe9c246e6907a134e70926a4a761ef15"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#abe9c246e6907a134e70926a4a761ef15">agent_login_opts</a> [128] = { [ 's' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../dc/df4/app__voicemail_8c.html#a336fb8db39bd98439132b0eda882849ea9c6a0359498684912cb0a3810e03138d">OPT_SILENT</a> }, }</td></tr>
<tr class="separator:abe9c246e6907a134e70926a4a761ef15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5cbaa6e72ca2e17b3339e7031d113dc1"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a5cbaa6e72ca2e17b3339e7031d113dc1">agent_type</a></td></tr>
<tr class="separator:a5cbaa6e72ca2e17b3339e7031d113dc1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a383a6ddb87cd8afb52a9ade91d706ba9"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a383a6ddb87cd8afb52a9ade91d706ba9">agent_type_blacklist</a> []</td></tr>
<tr class="separator:a383a6ddb87cd8afb52a9ade91d706ba9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adb1d2a9b5b0247cdd038c09a4ca3e41b"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a> [] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../de/d11/app__agent__pool_8c.html#a5cbaa6e72ca2e17b3339e7031d113dc1">agent_type</a>)</td></tr>
<tr class="separator:adb1d2a9b5b0247cdd038c09a4ca3e41b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a02691f29ac4d0ddd46ef7ebd90c3958d"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></td></tr>
<tr class="separator:a02691f29ac4d0ddd46ef7ebd90c3958d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae45e38e10e4b85b3161bdd0cb45b81ef"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ae45e38e10e4b85b3161bdd0cb45b81ef">agents_conf</a></td></tr>
<tr class="separator:ae45e38e10e4b85b3161bdd0cb45b81ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a358f094a1d14b589ace3b278972be56f"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a358f094a1d14b589ace3b278972be56f">app_agent_login</a> [] = &quot;AgentLogin&quot;</td></tr>
<tr class="separator:a358f094a1d14b589ace3b278972be56f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a872ee537b540de2ccaea4e62ed2dc016"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a872ee537b540de2ccaea4e62ed2dc016">app_agent_request</a> [] = &quot;AgentRequest&quot;</td></tr>
<tr class="separator:a872ee537b540de2ccaea4e62ed2dc016"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60e83b9aa660040fed4d5377966cc21"><td class="memItemLeft" align="right" valign="top">static const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ad60e83b9aa660040fed4d5377966cc21">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td></tr>
<tr class="separator:ad60e83b9aa660040fed4d5377966cc21"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ec2310ede2b9b46427e10e8e0cb43e6"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d2/dd3/structast__bridge__methods.html">ast_bridge_methods</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a5ec2310ede2b9b46427e10e8e0cb43e6">bridge_agent_hold_v_table</a></td></tr>
<tr class="separator:a5ec2310ede2b9b46427e10e8e0cb43e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a86ce161e89fb61c8534e1eca1cdcf618"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a86ce161e89fb61c8534e1eca1cdcf618">cli_agents</a> []</td></tr>
<tr class="separator:a86ce161e89fb61c8534e1eca1cdcf618"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72c28e8d8b5bf63d00102468e6ac4907"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d11/app__agent__pool_8c.html#a72c28e8d8b5bf63d00102468e6ac4907">general_type</a></td></tr>
<tr class="separator:a72c28e8d8b5bf63d00102468e6ac4907"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Call center agent pool. </p>
<dl class="section author"><dt>Author</dt><dd>Richard Mudgett <a href="#" onclick="location.href='mai'+'lto:'+'rmu'+'dg'+'ett'+'@d'+'igi'+'um'+'.co'+'m'; return false;">rmudg<span style="display: none;">.nosp@m.</span>ett@<span style="display: none;">.nosp@m.</span>digiu<span style="display: none;">.nosp@m.</span>m.co<span style="display: none;">.nosp@m.</span>m</a></dd></dl>
<p>See Also: </p><ul>
<li><a class="el" href="../../d8/d87/AstCREDITS.html">CREDITS</a> </li>
<li>Config_agent </li>
</ul>

<p class="definition">Definition in file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aad1cee1e03f1e1c5ad4067940fdab5b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad1cee1e03f1e1c5ad4067940fdab5b0">&#9670;&nbsp;</a></span>agent_lock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define agent_lock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">agent</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../de/d11/app__agent__pool_8c.html#abcc455cab3ad2f3eeda4797611d1c0ed">_agent_lock</a>(agent, __FILE__, __PRETTY_FUNCTION__, __LINE__, #agent)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock the agent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>Agent to lock</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">658</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01633">agent_after_bridge_cb_failed()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01660">agent_bridge_channel_get_lock()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02184">agent_function_read()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02426">agent_handle_show_specific()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00690">agent_lock_logged()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02040">agent_login_channel_config()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00975">agent_logoff_request()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00874">agent_mark()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00732">agent_pvt_devstate_get()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01520">agent_run()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02327">agent_show_requested()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00889">agent_sweep()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00935">agents_post_apply_config()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00905">agents_sweep()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01085">bridge_agent_hold_ack()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">bridge_agent_hold_heartbeat()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">caller_abort_agent()</a>.</p>

</div>
</div>
<a id="aec4e1bc1cab0249a428af2157c2514a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec4e1bc1cab0249a428af2157c2514a1">&#9670;&nbsp;</a></span>agent_unlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define agent_unlock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">agent</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../de/d11/app__agent__pool_8c.html#a221957559e467e3d6793e2eaf2c58352">_agent_unlock</a>(agent, __FILE__, __PRETTY_FUNCTION__, __LINE__, #agent)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock the agent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">agent</td><td>Agent to unlock</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">671</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01660">agent_bridge_channel_get_lock()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02184">agent_function_read()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02426">agent_handle_show_specific()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00690">agent_lock_logged()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02040">agent_login_channel_config()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00975">agent_logoff_request()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01481">agent_logout()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00874">agent_mark()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00732">agent_pvt_devstate_get()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01520">agent_run()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02327">agent_show_requested()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00889">agent_sweep()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00935">agents_post_apply_config()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00905">agents_sweep()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01085">bridge_agent_hold_ack()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">bridge_agent_hold_heartbeat()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">caller_abort_agent()</a>.</p>

</div>
</div>
<a id="a34d3e99d5529e36506d0ee8a9982c281"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34d3e99d5529e36506d0ee8a9982c281">&#9670;&nbsp;</a></span>AST_MAX_BUF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_MAX_BUF&#160;&#160;&#160;256</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00336">336</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>.</p>

</div>
</div>
<a id="a1d78ba0e31a3a17b37273be121850718"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d78ba0e31a3a17b37273be121850718">&#9670;&nbsp;</a></span>CALLER_SAFETY_TIMEOUT_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CALLER_SAFETY_TIMEOUT_TIME&#160;&#160;&#160;(2 * 60 * 1000)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Maximum wait time (in ms) for the custom_beep file to play announcing the caller. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00339">339</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>.</p>

</div>
</div>
<a id="afd2c9505e0edcb47e18669f60500acf0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afd2c9505e0edcb47e18669f60500acf0">&#9670;&nbsp;</a></span>FORMAT_HDR</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT_HDR&#160;&#160;&#160;&quot;%-8s %-20s %-11s %-30s %s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02327">agent_show_requested()</a>.</p>

</div>
</div>
<a id="a4090d7655fc829efc4a37a3144759c7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4090d7655fc829efc4a37a3144759c7c">&#9670;&nbsp;</a></span>FORMAT_ROW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORMAT_ROW&#160;&#160;&#160;&quot;%-8s %-20s %-11s %-30s %s\n&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02327">agent_show_requested()</a>.</p>

</div>
</div>
<a id="ab9353a3e165a7fd78b69b27e36d49e8b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab9353a3e165a7fd78b69b27e36d49e8b">&#9670;&nbsp;</a></span>LOGIN_WAIT_TIMEOUT_TIME</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOGIN_WAIT_TIMEOUT_TIME&#160;&#160;&#160;5</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Number of seconds to wait for local channel optimizations to complete. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00342">342</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">bridge_agent_hold_heartbeat()</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="abcb60ae8dded463f56a7c35857f1e501"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcb60ae8dded463f56a7c35857f1e501">&#9670;&nbsp;</a></span>AGENT_LOGIN_OPT_FLAGS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/d11/app__agent__pool_8c.html#abcb60ae8dded463f56a7c35857f1e501">AGENT_LOGIN_OPT_FLAGS</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="abcb60ae8dded463f56a7c35857f1e501a9c6a0359498684912cb0a3810e03138d"></a>OPT_SILENT&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02096">2096</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;                           {</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#abcb60ae8dded463f56a7c35857f1e501a9c6a0359498684912cb0a3810e03138d">OPT_SILENT</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;};</div><div class="ttc" id="app__agent__pool_8c_html_abcb60ae8dded463f56a7c35857f1e501a9c6a0359498684912cb0a3810e03138d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#abcb60ae8dded463f56a7c35857f1e501a9c6a0359498684912cb0a3810e03138d">OPT_SILENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02097">app_agent_pool.c:2097</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba0c7c74e5144e318659f810dbc6d5e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba0c7c74e5144e318659f810dbc6d5e8">&#9670;&nbsp;</a></span>agent_override_flags</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8">agent_override_flags</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Agent config option override flags. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd"></a>AGENT_FLAG_ACK_CALL&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93"></a>AGENT_FLAG_DTMF_ACCEPT&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827"></a>AGENT_FLAG_AUTO_LOGOFF&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832"></a>AGENT_FLAG_WRAPUP_TIME&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00586">586</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                          {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd">AGENT_FLAG_ACK_CALL</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93">AGENT_FLAG_DTMF_ACCEPT</a> = (1 &lt;&lt; 1),</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827">AGENT_FLAG_AUTO_LOGOFF</a> = (1 &lt;&lt; 2),</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832">AGENT_FLAG_WRAPUP_TIME</a> = (1 &lt;&lt; 3),</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;};</div><div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827">AGENT_FLAG_AUTO_LOGOFF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00589">app_agent_pool.c:589</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93">AGENT_FLAG_DTMF_ACCEPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00588">app_agent_pool.c:588</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832">AGENT_FLAG_WRAPUP_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00590">app_agent_pool.c:590</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd">AGENT_FLAG_ACK_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00587">app_agent_pool.c:587</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae60dcdeaa28da0fc60d394eaf1a6edd7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae60dcdeaa28da0fc60d394eaf1a6edd7">&#9670;&nbsp;</a></span>agent_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7">agent_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86"></a>AGENT_STATE_LOGGED_OUT&#160;</td><td class="fielddoc"><p>The agent is defined but an agent is not present. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0"></a>AGENT_STATE_PROBATION_WAIT&#160;</td><td class="fielddoc"><p>Forced initial login wait to allow any local channel optimizations to happen. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a"></a>AGENT_STATE_READY_FOR_CALL&#160;</td><td class="fielddoc"><p>The agent is ready for a call. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532"></a>AGENT_STATE_CALL_PRESENT&#160;</td><td class="fielddoc"><p>The agent has a call waiting to connect. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7"></a>AGENT_STATE_CALL_WAIT_ACK&#160;</td><td class="fielddoc"><p>The agent needs to ack the call. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49"></a>AGENT_STATE_ON_CALL&#160;</td><td class="fielddoc"><p>The agent is connected with a call. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621"></a>AGENT_STATE_CALL_WRAPUP&#160;</td><td class="fielddoc"><p>The agent is resting between calls. </p>
</td></tr>
<tr><td class="fieldname"><a id="ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2"></a>AGENT_STATE_LOGGING_OUT&#160;</td><td class="fielddoc"><p>The agent is being kicked out. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00566">566</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;                 {<span class="comment"></span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">   /*! The agent is defined but an agent is not present. */</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86">AGENT_STATE_LOGGED_OUT</a>,<span class="comment"></span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">   /*! Forced initial login wait to allow any local channel optimizations to happen. */</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0">AGENT_STATE_PROBATION_WAIT</a>,<span class="comment"></span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">   /*! The agent is ready for a call. */</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a>,<span class="comment"></span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">   /*! The agent has a call waiting to connect. */</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a>,<span class="comment"></span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">   /*! The agent needs to ack the call. */</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a>,<span class="comment"></span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">   /*! The agent is connected with a call. */</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49">AGENT_STATE_ON_CALL</a>,<span class="comment"></span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">   /*! The agent is resting between calls. */</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621">AGENT_STATE_CALL_WRAPUP</a>,<span class="comment"></span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">   /*! The agent is being kicked out. */</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a>,</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;};</div><div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621">AGENT_STATE_CALL_WRAPUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00580">app_agent_pool.c:580</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86">AGENT_STATE_LOGGED_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00568">app_agent_pool.c:568</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49">AGENT_STATE_ON_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00578">app_agent_pool.c:578</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00582">app_agent_pool.c:582</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00574">app_agent_pool.c:574</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0">AGENT_STATE_PROBATION_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00570">app_agent_pool.c:570</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00572">app_agent_pool.c:572</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00576">app_agent_pool.c:576</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a88b7c88fed6b80fd18f34f97757dfc04"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a88b7c88fed6b80fd18f34f97757dfc04">&#9670;&nbsp;</a></span>__reg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __reg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02716">2716</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="afeab1257bd17282b95875499393a147a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afeab1257bd17282b95875499393a147a">&#9670;&nbsp;</a></span>__unreg_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __unreg_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02716">2716</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="abcc455cab3ad2f3eeda4797611d1c0ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abcc455cab3ad2f3eeda4797611d1c0ed">&#9670;&nbsp;</a></span>_agent_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _agent_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00659">659</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00222">__ao2_lock()</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00703">AO2_LOCK_REQ_MUTEX</a>.</p>
<div class="fragment"><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;{</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ae8abe54e1e1460641ed987db20e75e81">__ao2_lock</a>(agent, <a class="code" href="../../d5/da5/astobj2_8h.html#a4e9f309cb90824e22969f0cf1b5b445da1381af5f17622000f344130ef673987b">AO2_LOCK_REQ_MUTEX</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="keyword">function</span>, line, <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae8abe54e1e1460641ed987db20e75e81"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae8abe54e1e1460641ed987db20e75e81">__ao2_lock</a></div><div class="ttdeci">int __ao2_lock(void *a, enum ao2_lock_req lock_how, const char *file, const char *func, int line, const char *var)</div><div class="ttdoc">Lock an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00222">astobj2.c:222</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="astobj2_8h_html_a4e9f309cb90824e22969f0cf1b5b445da1381af5f17622000f344130ef673987b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a4e9f309cb90824e22969f0cf1b5b445da1381af5f17622000f344130ef673987b">AO2_LOCK_REQ_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00703">astobj2.h:703</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a221957559e467e3d6793e2eaf2c58352"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a221957559e467e3d6793e2eaf2c58352">&#9670;&nbsp;</a></span>_agent_unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _agent_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00672">672</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00288">__ao2_unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;{</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ae77cde78a0e0ae3e75a2911857bfadc5">__ao2_unlock</a>(agent, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="keyword">function</span>, line, <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae77cde78a0e0ae3e75a2911857bfadc5"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae77cde78a0e0ae3e75a2911857bfadc5">__ao2_unlock</a></div><div class="ttdeci">int __ao2_unlock(void *a, const char *file, const char *func, int line, const char *var)</div><div class="ttdoc">Unlock an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00288">astobj2.c:288</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6558aa820bc9dd1eebac76ee2e2951f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6558aa820bc9dd1eebac76ee2e2951f0">&#9670;&nbsp;</a></span>action_agent_logoff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_agent_logoff </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02605">2605</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00975">agent_logoff_request()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03191">astman_send_ack()</a>, and <a class="el" href="../../d4/d10/manager_8c_source.html#l03159">astman_send_error()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;{</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *agent = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Agent&quot;</span>);</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *soft_s = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Soft&quot;</span>); <span class="comment">/* &quot;true&quot; is don&#39;t hangup */</span></div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(agent)) {</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No agent specified&quot;</span>);</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;   }</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;</div><div class="line"><a name="l02615"></a><span class="lineno"> 2615</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d11/app__agent__pool_8c.html#a90c12fe1cfd5f897d788df917f0af3af">agent_logoff_request</a>(agent, <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(soft_s))) {</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Agent logged out&quot;</span>);</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No such agent&quot;</span>);</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;   }</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;}</div><div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a90c12fe1cfd5f897d788df917f0af3af"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a90c12fe1cfd5f897d788df917f0af3af">agent_logoff_request</a></div><div class="ttdeci">static int agent_logoff_request(const char *agent_id, int soft)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00975">app_agent_pool.c:975</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0c9069d554e6ace86b060a06c56d2ba3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0c9069d554e6ace86b060a06c56d2ba3">&#9670;&nbsp;</a></span>action_agents()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int action_agents </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/d8a/structmansession.html">mansession</a> *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d8/d9e/structmessage.html">message</a> *&#160;</td>
          <td class="paramname"><em>m</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">2527</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00690">agent_lock_logged()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l00451">ast_channel_snapshot_create()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00561">ast_manager_build_channel_state_string()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00336">AST_MAX_BUF</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03080">astman_append()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02820">astman_get_header()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03245">astman_send_list_complete_end()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03237">astman_send_list_complete_start()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03201">astman_send_listack()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00634">agent_pvt::call_start</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::full_name</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00630">agent_pvt::login_start</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;{</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<span class="keywordtype">id</span> = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;   <span class="keywordtype">char</span> id_text[<a class="code" href="../../de/d11/app__agent__pool_8c.html#a34d3e99d5529e36506d0ee8a9982c281">AST_MAX_BUF</a>];</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(4096);</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;   <span class="keywordtype">int</span> num_agents = 0;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<span class="keywordtype">id</span>)) {</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      snprintf(id_text, <span class="keyword">sizeof</span>(id_text), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, <span class="keywordtype">id</span>);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;      id_text[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;   }</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a>(s, m, <span class="stringliteral">&quot;Agents will follow&quot;</span>, <span class="stringliteral">&quot;start&quot;</span>);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, 0);</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;   <span class="keywordflow">for</span> (; (agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1)) {</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;      logged = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a>(agent);</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;<span class="comment">       * Status Values:</span></div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;<span class="comment">       * AGENT_LOGGEDOFF - Agent isn&#39;t logged in</span></div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;<span class="comment">       * AGENT_IDLE      - Agent is logged in, and waiting for call</span></div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;<span class="comment">       * AGENT_ONCALL    - Agent is logged in, and on a call</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;<span class="comment">       * AGENT_UNKNOWN   - Don&#39;t know anything about agent. Shouldn&#39;t ever get this.</span></div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;out, 0, <span class="stringliteral">&quot;Agent: %s\r\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;Name: %s\r\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a6d121225508f464976ccd1f571cc3ba1">full_name</a>);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;      <span class="keywordflow">if</span> (logged) {</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *talking_to_chan;</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *logged_headers;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, logged_snapshot, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga7f4919ce97dcdee0a98979ca4de29242">ast_channel_snapshot_create</a>(logged), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;         <span class="keywordflow">if</span> (!logged_snapshot</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;            || !(logged_headers =</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;                <a class="code" href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a>(logged_snapshot))) {</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;            <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;         }</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;         talking_to_chan = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(logged, <span class="stringliteral">&quot;BRIDGEPEER&quot;</span>);</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(talking_to_chan)) {</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;Status: %s\r\n&quot;</span>, <span class="stringliteral">&quot;AGENT_ONCALL&quot;</span>);</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;TalkingToChan: %s\r\n&quot;</span>, talking_to_chan);</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;CallStarted: %ld\n&quot;</span>, (<span class="keywordtype">long</span>) agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#aa09f4acec5c1e337edce28217f8f685c">call_start</a>);</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;Status: %s\r\n&quot;</span>, <span class="stringliteral">&quot;AGENT_IDLE&quot;</span>);</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;         }</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;LoggedInTime: %ld\r\n&quot;</span>, (<span class="keywordtype">long</span>) agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#acd6bb3b5d452161627e0c4b204977401">login_start</a>);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(logged_headers));</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(logged_headers);</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;Status: %s\r\n&quot;</span>, <span class="stringliteral">&quot;AGENT_LOGGEDOFF&quot;</span>);</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;      }</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s, <span class="stringliteral">&quot;Event: Agents\r\n&quot;</span></div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;         <span class="stringliteral">&quot;%s%s\r\n&quot;</span>,</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(out), id_text);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;      ++num_agents;</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;   }</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a>(s, m, <span class="stringliteral">&quot;AgentsComplete&quot;</span>, num_agents);</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a>(s);</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="structagent__cfg_html_a6d121225508f464976ccd1f571cc3ba1"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a6d121225508f464976ccd1f571cc3ba1">agent_cfg::full_name</a></div><div class="ttdeci">const ast_string_field full_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga58c3e3da5d31739cafaee1df6ddf9342"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a></div><div class="ttdeci">void astman_send_list_complete_start(struct mansession *s, const struct message *m, const char *event_name, int count)</div><div class="ttdoc">Start the list complete event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03237">manager.c:3237</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga7f4919ce97dcdee0a98979ca4de29242"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga7f4919ce97dcdee0a98979ca4de29242">ast_channel_snapshot_create</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_create(struct ast_channel *chan)</div><div class="ttdoc">Generate a snapshot of the channel state. This is an ao2 object, so ao2_cleanup() to deallocate...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00451">stasis_channels.c:451</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a34d3e99d5529e36506d0ee8a9982c281"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a34d3e99d5529e36506d0ee8a9982c281">AST_MAX_BUF</a></div><div class="ttdeci">#define AST_MAX_BUF</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00336">app_agent_pool.c:336</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gabf7c909efbfc26d0d9c66786c83b8f69"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a></div><div class="ttdeci">void astman_send_list_complete_end(struct mansession *s)</div><div class="ttdoc">End the list complete event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03245">manager.c:3245</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a55ac80086debb254e9d1f21d210e3705"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a></div><div class="ttdeci">static struct ast_channel * agent_lock_logged(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00690">app_agent_pool.c:690</a></div></div>
<div class="ttc" id="manager_8h_html_a777cde87d12b331902f862ec44641688"><div class="ttname"><a href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string(const struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00561">manager_channels.c:561</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structagent__pvt_html_acd6bb3b5d452161627e0c4b204977401"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#acd6bb3b5d452161627e0c4b204977401">agent_pvt::login_start</a></div><div class="ttdeci">time_t login_start</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00630">app_agent_pool.c:630</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="structagent__pvt_html_aa09f4acec5c1e337edce28217f8f685c"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#aa09f4acec5c1e337edce28217f8f685c">agent_pvt::call_start</a></div><div class="ttdeci">time_t call_start</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00634">app_agent_pool.c:634</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga0ee6ee1f4d200f711e2983bffe770a72"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a></div><div class="ttdeci">void astman_send_listack(struct mansession *s, const struct message *m, char *msg, char *listflag)</div><div class="ttdoc">Send ack in manager transaction to begin a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03201">manager.c:3201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8f0089dcfc5a0c38a72eaa0aeb3014e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8f0089dcfc5a0c38a72eaa0aeb3014e0">&#9670;&nbsp;</a></span>agent_after_bridge_cb()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_after_bridge_cb </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01618">1618</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01520">agent_run()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">bridge_agent_hold_heartbeat()</a>.</p>
<div class="fragment"><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;{</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, chan, 0);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;   }</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: New agent channel %s.\n&quot;</span>,</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a8e005c499b7e949c3f1a290e88acb71d">agent_run</a>(agent, chan);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;}</div><div class="ttc" id="app__agent__pool_8c_html_a8e005c499b7e949c3f1a290e88acb71d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a8e005c499b7e949c3f1a290e88acb71d">agent_run</a></div><div class="ttdeci">static void agent_run(struct agent_pvt *agent, struct ast_channel *logged)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01520">app_agent_pool.c:1520</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a99d2d56a1bc356d880b7dfa6921cf32f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a99d2d56a1bc356d880b7dfa6921cf32f">&#9670;&nbsp;</a></span>agent_after_bridge_cb_failed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_after_bridge_cb_failed </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../d8/d85/bridge__after_8h.html#a1b15a371c654cfe77de053afe0994b9c">ast_bridge_after_cb_reason</a>&#160;</td>
          <td class="paramname"><em>reason</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01633">1633</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01481">agent_logout()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../df/db6/bridge__after_8c_source.html#l00296">ast_bridge_after_cb_reason_string()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00083">ast_channel::data</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">bridge_agent_hold_heartbeat()</a>.</p>
<div class="fragment"><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;{</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, chan, 0);</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   }</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Agent %s: Forced logout.  Lost control of %s because: %s\n&quot;</span>,</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;      <a class="code" href="../../d8/d85/bridge__after_8h.html#a1ccac2dce2e8c4f62baed1f63b225a15">ast_bridge_after_cb_reason_string</a>(reason));</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aeaea7aa68d00de5f86fcc523d6f2c55a">agent_logout</a>(agent);</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="bridge__after_8h_html_a1ccac2dce2e8c4f62baed1f63b225a15"><div class="ttname"><a href="../../d8/d85/bridge__after_8h.html#a1ccac2dce2e8c4f62baed1f63b225a15">ast_bridge_after_cb_reason_string</a></div><div class="ttdeci">const char * ast_bridge_after_cb_reason_string(enum ast_bridge_after_cb_reason reason)</div><div class="ttdoc">Get a string representation of an after bridge callback reason. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/db6/bridge__after_8c_source.html#l00296">bridge_after.c:296</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structast__channel_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_channel::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00083">channel_internal_api.c:83</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aeaea7aa68d00de5f86fcc523d6f2c55a"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aeaea7aa68d00de5f86fcc523d6f2c55a">agent_logout</a></div><div class="ttdeci">static void agent_logout(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01481">app_agent_pool.c:1481</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a951f3727bbc983c0b9a20bac17650c44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a951f3727bbc983c0b9a20bac17650c44">&#9670;&nbsp;</a></span>agent_alert()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_alert </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">1738</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00384">agent_cfg::ack_call</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00636">agent_pvt::ack_time</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00587">AGENT_FLAG_ACK_CALL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00588">AGENT_FLAG_DTMF_ACCEPT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00574">AGENT_STATE_CALL_PRESENT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00576">AGENT_STATE_CALL_WAIT_ACK</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00495">ast_bridge_channel_clear_roles()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00447">ast_bridge_channel_establish_roles()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00379">ast_channel_set_bridge_role_option()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d2/d4d/file_8h_source.html#l00048">AST_DIGIT_ANY</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l00187">ast_stopstream()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01814">ast_stream_and_wait()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::beep_sound</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">digit</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::dtmf_accept</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00610">agent_pvt::override_ack_call</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::override_dtmf_accept</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00625">agent_pvt::state</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01812">send_alert_to_agent()</a>.</p>
<div class="fragment"><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;{</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *agent_id = payload;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *playfile;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *dtmf_accept;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;   <span class="keywordtype">char</span> dtmf[2];</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, agent_id, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent &#39;%s&#39; does not exist.  Where did it go?\n&quot;</span>, agent_id);</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   }</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   <span class="comment">/* Change holding bridge participant role&#39;s idle mode to silence */</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;   <a class="code" href="../../dd/dff/bridge__roles_8h.html#af01f5cb3712ef0b120433da770f645ab">ast_bridge_channel_clear_roles</a>(bridge_channel);</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;   <a class="code" href="../../dd/dff/bridge__roles_8h.html#a3c1bc5238aea4e2d19c9894c1b68a457">ast_channel_set_bridge_role_option</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;holding_participant&quot;</span>, <span class="stringliteral">&quot;idle_mode&quot;</span>, <span class="stringliteral">&quot;silence&quot;</span>);</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;   <a class="code" href="../../dd/dff/bridge__roles_8h.html#ad449a795348a52aefe000f13a1d015f8">ast_bridge_channel_establish_roles</a>(bridge_channel);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   playfile = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#af22047b6d8545b610cde6ad3e397fd79">beep_sound</a>);</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;   <span class="comment">/* Determine which DTMF digits interrupt the alerting signal. */</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(agent, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd">AGENT_FLAG_ACK_CALL</a>)</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      ? agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a9e221b3d2bfe1c52281667c3cb15195e">override_ack_call</a> : agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#ad2306ec3a17979bc94169e842e87391c">ack_call</a>) {</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;      dtmf_accept = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(agent, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93">AGENT_FLAG_DTMF_ACCEPT</a>)</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;         ? agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a255ab96bed8587b3757a2143ed9fa03e">override_dtmf_accept</a> : agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a7e4d44394d3f9e352012ab905cac069e">dtmf_accept</a>;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="comment">/* Only the first digit of the ack will stop playback. */</span></div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;      dtmf[0] = *dtmf_accept;</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;      dtmf[1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      dtmf_accept = dtmf;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      dtmf_accept = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   }</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;   <span class="comment">/* Alert the agent. */</span></div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;   digit = <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, playfile,</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dtmf_accept) ? <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a> : dtmf_accept);</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;   <span class="keywordflow">switch</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a>) {</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a>:</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dtmf_accept)) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;         agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a>;</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;         agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5068662d1a4020ad70203c75f620c74d">ack_time</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;         <span class="keywordflow">if</span> (0 &lt; digit) {</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;            <span class="comment">/* Playback was interrupted by a digit. */</span></div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;            <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;            <a class="code" href="../../de/d41/bridge__channel_8h.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a>(bridge_channel, digit);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;         }</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      }</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <span class="comment">/* Connect to caller now. */</span></div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Immediately connecting to call.\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#ad828f7da4ade54724a517f3e85f46130">agent_connect_caller</a>(bridge_channel, agent);<span class="comment">/* Will unlock agent. */</span></div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;   }</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5068662d1a4020ad70203c75f620c74d"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5068662d1a4020ad70203c75f620c74d">agent_pvt::ack_time</a></div><div class="ttdeci">struct timeval ack_time</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00636">app_agent_pool.c:636</a></div></div>
<div class="ttc" id="bridge__roles_8h_html_af01f5cb3712ef0b120433da770f645ab"><div class="ttname"><a href="../../dd/dff/bridge__roles_8h.html#af01f5cb3712ef0b120433da770f645ab">ast_bridge_channel_clear_roles</a></div><div class="ttdeci">void ast_bridge_channel_clear_roles(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Clear all roles from a bridge_channel&amp;#39;s role list. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00495">bridge_roles.c:495</a></div></div>
<div class="ttc" id="structagent__pvt_html_a255ab96bed8587b3757a2143ed9fa03e"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a255ab96bed8587b3757a2143ed9fa03e">agent_pvt::override_dtmf_accept</a></div><div class="ttdeci">const ast_string_field override_dtmf_accept</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="file_8h_html_afa92b0106fb7a918ea994c2867ac0a04"><div class="ttname"><a href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a></div><div class="ttdeci">#define AST_DIGIT_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00048">file.h:48</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structagent__pvt_html_a2b63413544f313e27f0a2893dfa5e251"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">agent_pvt::state</a></div><div class="ttdeci">enum agent_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00625">app_agent_pool.c:625</a></div></div>
<div class="ttc" id="structagent__cfg_html_af22047b6d8545b610cde6ad3e397fd79"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#af22047b6d8545b610cde6ad3e397fd79">agent_cfg::beep_sound</a></div><div class="ttdeci">const ast_string_field beep_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93">AGENT_FLAG_DTMF_ACCEPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00588">app_agent_pool.c:588</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd">AGENT_FLAG_ACK_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00587">app_agent_pool.c:587</a></div></div>
<div class="ttc" id="structagent__cfg_html_ad2306ec3a17979bc94169e842e87391c"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#ad2306ec3a17979bc94169e842e87391c">agent_cfg::ack_call</a></div><div class="ttdeci">int ack_call</div><div class="ttdoc">TRUE if agent needs to ack a call to accept it. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00384">app_agent_pool.c:384</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a69864377e8f1cf05ba95f1645bc98c65"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a></div><div class="ttdeci">void ast_bridge_channel_feature_digit(struct ast_bridge_channel *bridge_channel, int digit)</div><div class="ttdoc">Add a DTMF digit to the collected digits to match against DTMF features. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01762">bridge_channel.c:1762</a></div></div>
<div class="ttc" id="bridge__roles_8h_html_ad449a795348a52aefe000f13a1d015f8"><div class="ttname"><a href="../../dd/dff/bridge__roles_8h.html#ad449a795348a52aefe000f13a1d015f8">ast_bridge_channel_establish_roles</a></div><div class="ttdeci">int ast_bridge_channel_establish_roles(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Clone the roles from a bridge_channel&amp;#39;s attached ast_channel onto the bridge_channel&amp;#39;s role list...</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00447">bridge_roles.c:447</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structagent__cfg_html_a7e4d44394d3f9e352012ab905cac069e"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a7e4d44394d3f9e352012ab905cac069e">agent_cfg::dtmf_accept</a></div><div class="ttdeci">const ast_string_field dtmf_accept</div><div class="ttdoc">DTMF string for an agent to accept a call. * *. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00574">app_agent_pool.c:574</a></div></div>
<div class="ttc" id="bridge__roles_8h_html_a3c1bc5238aea4e2d19c9894c1b68a457"><div class="ttname"><a href="../../dd/dff/bridge__roles_8h.html#a3c1bc5238aea4e2d19c9894c1b68a457">ast_channel_set_bridge_role_option</a></div><div class="ttdeci">int ast_channel_set_bridge_role_option(struct ast_channel *channel, const char *role_name, const char *option, const char *value)</div><div class="ttdoc">Set a role option on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00379">bridge_roles.c:379</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="file_8h_html_a95b94a020720147325a486e210b36775"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a></div><div class="ttdeci">int ast_stream_and_wait(struct ast_channel *chan, const char *file, const char *digits)</div><div class="ttdoc">stream file until digit If the file name is non-empty, try to play it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01814">file.c:1814</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ad828f7da4ade54724a517f3e85f46130"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ad828f7da4ade54724a517f3e85f46130">agent_connect_caller</a></div><div class="ttdeci">static void agent_connect_caller(struct ast_bridge_channel *bridge_channel, struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01034">app_agent_pool.c:1034</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00576">app_agent_pool.c:576</a></div></div>
<div class="ttc" id="structagent__pvt_html_a9e221b3d2bfe1c52281667c3cb15195e"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a9e221b3d2bfe1c52281667c3cb15195e">agent_pvt::override_ack_call</a></div><div class="ttdeci">unsigned int override_ack_call</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00610">app_agent_pool.c:610</a></div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5733bc2f13f35fe0d8bde13939b50e07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5733bc2f13f35fe0d8bde13939b50e07">&#9670;&nbsp;</a></span>agent_bridge_channel_get_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a>* agent_bridge_channel_get_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td>
          <td class="paramname"><em>agent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01660">1660</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10783">ast_channel_get_bridge_channel()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00643">agent_pvt::logged</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">caller_abort_agent()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01847">caller_joined_bridge()</a>.</p>
<div class="fragment"><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;{</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged;</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *<a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;      logged = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;      <span class="keywordflow">if</span> (!logged) {</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;         <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      }</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(logged);</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(logged);</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;      bc = <a class="code" href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a>(logged);</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="keywordflow">if</span> (!bc) {</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;         <span class="keywordflow">if</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a> != logged) {</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;         }</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      }</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bc);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;      <span class="keywordflow">if</span> (bc-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a> != logged || agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a> != logged) {</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bc);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bc, -1);</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;      }</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a>;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;   }</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="gsm__explode_8c_html_a4e819f902d7ae632dd5ae75b29372f1b"><div class="ttname"><a href="../../d8/d34/gsm__explode_8c.html#a4e819f902d7ae632dd5ae75b29372f1b">bc</a></div><div class="ttdeci">#define bc</div></div>
<div class="ttc" id="structagent__pvt_html_a7d442bd00b142ff82e79c2052d69dcdb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">agent_pvt::logged</a></div><div class="ttdeci">struct ast_channel * logged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00643">app_agent_pool.c:643</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a9b6409c38af733c46eead884d86dd284"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a></div><div class="ttdeci">struct ast_bridge_channel * ast_channel_get_bridge_channel(struct ast_channel *chan)</div><div class="ttdoc">Get a reference to the channel&amp;#39;s bridge pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10783">channel.c:10783</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad29a97a56d35dd72e739c27429ad2287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad29a97a56d35dd72e739c27429ad2287">&#9670;&nbsp;</a></span>agent_cfg_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* agent_cfg_alloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00434">434</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00427">agent_cfg_destructor()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::username</a>.</p>
<div class="fragment"><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;{</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *cfg;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*cfg), <a class="code" href="../../de/d11/app__agent__pool_8c.html#a6a5ecab02628d53e614a259d45b1d520">agent_cfg_destructor</a>,</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <span class="keywordflow">if</span> (!cfg || <a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(cfg, 64)) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cfg);</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;   }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(cfg, <a class="code" href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">username</a>, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div><div class="ttc" id="structagent__cfg_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">agent_cfg::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structagent__cfg_html"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html">agent_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00348">app_agent_pool.c:348</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a6a5ecab02628d53e614a259d45b1d520"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a6a5ecab02628d53e614a259d45b1d520">agent_cfg_destructor</a></div><div class="ttdeci">static void agent_cfg_destructor(void *vdoomed)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00427">app_agent_pool.c:427</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6a5ecab02628d53e614a259d45b1d520"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a5ecab02628d53e614a259d45b1d520">&#9670;&nbsp;</a></span>agent_cfg_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_cfg_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vdoomed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00427">427</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00434">agent_cfg_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *doomed = vdoomed;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(doomed);</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;}</div><div class="ttc" id="structagent__cfg_html"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html">agent_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00348">app_agent_pool.c:348</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a355c423d8d2b38bf42751345e082f211"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a355c423d8d2b38bf42751345e082f211">&#9670;&nbsp;</a></span>agent_cfg_find()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* agent_cfg_find </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a> *&#160;</td>
          <td class="paramname"><em>agents</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>username</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00448">448</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>.</p>
<div class="fragment"><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;{</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(agents, <a class="code" href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">username</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;}</div><div class="ttc" id="structagent__cfg_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">agent_cfg::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a81b479dda160b217188d44dffc86361f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81b479dda160b217188d44dffc86361f">&#9670;&nbsp;</a></span>agent_cfg_sort_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_cfg_sort_cmp </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj_right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00405">405</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01156">OBJ_PARTIAL_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01154">OBJ_POINTER</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00512">agents_cfg_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;{</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *cfg_left = obj_left;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *cfg_right = obj_right;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = obj_right;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keywordflow">switch</span> (flags &amp; (<a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>)) {</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>:</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      right_key = cfg_right-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">username</a>;</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>:</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      cmp = strcmp(cfg_left-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">username</a>, right_key);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>:</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      cmp = strncmp(cfg_left-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">username</a>, right_key, strlen(right_key));</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;   }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keywordflow">return</span> cmp;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="ttc" id="structagent__cfg_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">agent_cfg::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2448088751e4d494d1981c7f4b84e8d0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a></div><div class="ttdeci">#define OBJ_POINTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01154">astobj2.h:1154</a></div></div>
<div class="ttc" id="structagent__cfg_html"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html">agent_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00348">app_agent_pool.c:348</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab0b4e11aba1e0a898b5d75427d3b13fa"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a></div><div class="ttdeci">#define OBJ_PARTIAL_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01156">astobj2.h:1156</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad828f7da4ade54724a517f3e85f46130"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad828f7da4ade54724a517f3e85f46130">&#9670;&nbsp;</a></span>agent_connect_caller()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_connect_caller </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">1034</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00578">AGENT_STATE_ON_CALL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00463">ao2_t_ref</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00104">AST_BRIDGE_BUILTIN_AUTOMIXMON</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01484">ast_bridge_channel_write_callback()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01155">ast_bridge_channel_write_control_data()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00970">ast_bridge_destroy()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03151">ast_bridge_features_do()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02508">ast_bridge_move()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">AST_CONTROL_ANSWER</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00314">AUTO_MONITOR_START</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00634">agent_pvt::call_start</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00641">agent_pvt::caller_bridge</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01017">clear_agent_status()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00386">agent_cfg::record_agent_calls</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00326">ast_bridge_features_automixmonitor::start_stop</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00625">agent_pvt::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01085">bridge_agent_hold_ack()</a>.</p>
<div class="fragment"><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;{</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *caller_bridge;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <span class="keywordtype">int</span> record_agent_calls;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   record_agent_calls = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#afa345a7167ae253354866a0e845058b2">record_agent_calls</a>;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;   caller_bridge = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49">AGENT_STATE_ON_CALL</a>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   time(&amp;agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#aa09f4acec5c1e337edce28217f8f685c">call_start</a>);</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   <span class="keywordflow">if</span> (!caller_bridge) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <span class="comment">/* Reset agent. */</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>,</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;         <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;   }</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   res = <a class="code" href="../../d4/d56/bridge_8h.html#af0e3d51ad653134a92545dec4610b83a">ast_bridge_move</a>(caller_bridge, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>,</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;      <span class="comment">/* Reset agent. */</span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(caller_bridge, 0);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>,</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;         <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   }</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   res = <a class="code" href="../../de/d41/bridge__channel_8h.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a>(bridge_channel, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      || <a class="code" href="../../de/d41/bridge__channel_8h.html#ae014c66309327185b609d7e3ccf21af5">ast_bridge_channel_write_callback</a>(bridge_channel, 0, <a class="code" href="../../de/d11/app__agent__pool_8c.html#afb0201bc573414e692523e87814100f9">clear_agent_status</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;      <span class="comment">/* Reset agent. */</span></div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(caller_bridge, 0);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   }</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">if</span> (record_agent_calls) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/d41/structast__bridge__features__automixmonitor.html">ast_bridge_features_automixmonitor</a> <a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a> = {</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;         .start_stop = <a class="code" href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a26916a61be33d13623f6fd1d8865d7ca">AUTO_MONITOR_START</a>,</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         };</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">       * The agent is in the new bridge so we can invoke the</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;<span class="comment">       * mixmonitor hook to only start recording.</span></div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#a5ad28c249794c7354336fc512fab8f7a">ast_bridge_features_do</a>(<a class="code" href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a9075785271a9e2a18bb65c99a6bd7744">AST_BRIDGE_BUILTIN_AUTOMIXMON</a>, bridge_channel, &amp;options);</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   }</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a>(caller_bridge, -1, <span class="stringliteral">&quot;Agent successfully in caller_bridge&quot;</span>);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a14c61bcab109a520a96d30c56ba5fcde"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a14c61bcab109a520a96d30c56ba5fcde">ao2_t_ref</a></div><div class="ttdeci">#define ao2_t_ref(o, delta, tag)</div><div class="ttdoc">Reference/unreference an object and return the old refcount. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00463">astobj2.h:463</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a5ad28c249794c7354336fc512fab8f7a"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a5ad28c249794c7354336fc512fab8f7a">ast_bridge_features_do</a></div><div class="ttdeci">int ast_bridge_features_do(enum ast_bridge_builtin_feature feature, struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdoc">Invoke a built in feature hook now. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03151">bridge.c:3151</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="structagent__pvt_html_a2b63413544f313e27f0a2893dfa5e251"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">agent_pvt::state</a></div><div class="ttdeci">enum agent_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00625">app_agent_pool.c:625</a></div></div>
<div class="ttc" id="structagent__cfg_html_afa345a7167ae253354866a0e845058b2"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#afa345a7167ae253354866a0e845058b2">agent_cfg::record_agent_calls</a></div><div class="ttdeci">int record_agent_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00386">app_agent_pool.c:386</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49">AGENT_STATE_ON_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00578">app_agent_pool.c:578</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a9d7ca6b64c5bd875d4f16e8aef443497"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a></div><div class="ttdeci">int ast_bridge_channel_write_control_data(struct ast_bridge_channel *bridge_channel, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Write a control frame into the bridge with data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01155">bridge_channel.c:1155</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a9e3135920bd5bdbfd8c57fdaaa6b1dbe">AST_CONTROL_ANSWER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00281">include/asterisk/frame.h:281</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ae014c66309327185b609d7e3ccf21af5"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ae014c66309327185b609d7e3ccf21af5">ast_bridge_channel_write_callback</a></div><div class="ttdeci">int ast_bridge_channel_write_callback(struct ast_bridge_channel *bridge_channel, enum ast_bridge_channel_custom_callback_option flags, ast_bridge_custom_callback_fn callback, const void *payload, size_t payload_size)</div><div class="ttdoc">Write a bridge action custom callback frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01484">bridge_channel.c:1484</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structagent__pvt_html_a6b2557c443982571cceb9005c5bec611"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">agent_pvt::caller_bridge</a></div><div class="ttdeci">struct ast_bridge * caller_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00641">app_agent_pool.c:641</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_afb0201bc573414e692523e87814100f9"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#afb0201bc573414e692523e87814100f9">clear_agent_status</a></div><div class="ttdeci">static void clear_agent_status(struct ast_bridge_channel *bridge_channel, const void *payload, size_t payload_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01017">app_agent_pool.c:1017</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="structast__bridge__features__automixmonitor_html"><div class="ttname"><a href="../../d7/d41/structast__bridge__features__automixmonitor.html">ast_bridge_features_automixmonitor</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00324">bridge_features.h:324</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ac5edca1f8aa8a5ea765cea146507a882a26916a61be33d13623f6fd1d8865d7ca"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ac5edca1f8aa8a5ea765cea146507a882a26916a61be33d13623f6fd1d8865d7ca">AUTO_MONITOR_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00314">bridge_features.h:314</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="bridge_8h_html_af0e3d51ad653134a92545dec4610b83a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#af0e3d51ad653134a92545dec4610b83a">ast_bridge_move</a></div><div class="ttdeci">int ast_bridge_move(struct ast_bridge *dst_bridge, struct ast_bridge *src_bridge, struct ast_channel *chan, struct ast_channel *swap, int attempt_recovery)</div><div class="ttdoc">Move a channel from one bridge to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l02508">bridge.c:2508</a></div></div>
<div class="ttc" id="structagent__pvt_html_aa09f4acec5c1e337edce28217f8f685c"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#aa09f4acec5c1e337edce28217f8f685c">agent_pvt::call_start</a></div><div class="ttdeci">time_t call_start</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00634">app_agent_pool.c:634</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a59c3a69424e1d3c627ece7aeb5f0bdb3a9075785271a9e2a18bb65c99a6bd7744"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a59c3a69424e1d3c627ece7aeb5f0bdb3a9075785271a9e2a18bb65c99a6bd7744">AST_BRIDGE_BUILTIN_AUTOMIXMON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00104">bridge_features.h:104</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aec6f971b8bba2801e4ab3a92917860f1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aec6f971b8bba2801e4ab3a92917860f1">&#9670;&nbsp;</a></span>agent_devstate_changed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_devstate_changed </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00756">756</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/da2/devicestate_8h_source.html#l00053">AST_DEVICE_UNKNOWN</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00070">AST_DEVSTATE_CACHABLE</a>, and <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00510">ast_devstate_changed()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01481">agent_logout()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00761">agent_pvt_destructor()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00935">agents_post_apply_config()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">bridge_agent_hold_heartbeat()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;{</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <span class="stringliteral">&quot;Agent:%s&quot;</span>, agent_id);</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_a62a8e6bc4b82dd797e505688f9f29bff"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a></div><div class="ttdeci">int ast_devstate_changed(enum ast_device_state state, enum ast_devstate_cache cachable, const char *fmt,...)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00510">devicestate.c:510</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acf1606296839a7252342273de8f9f563"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acf1606296839a7252342273de8f9f563">&#9670;&nbsp;</a></span>agent_function_read()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_function_read </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02184">2184</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00690">agent_lock_logged()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01300">AST_NONSTANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::full_name</a>, <a class="el" href="../../d8/d4f/test__config_8c_source.html#l01463">item</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00643">agent_pvt::logged</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::moh</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00146">status</a>.</p>
<div class="fragment"><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;{</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged;</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(agentid);</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d8/d4f/test__config_8c.html#aecdc7cbd5dfa76493c0212caa55d706c">item</a>);</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;   );</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;   <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a> ?: <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#accfcb380df76a64251d88ef49c2dd4e3">AST_NONSTANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse, <span class="charliteral">&#39;:&#39;</span>);</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.agentid)) {</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;The AGENT function requires an argument - agentid!\n&quot;</span>);</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.item) {</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;      <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.item = <span class="stringliteral">&quot;status&quot;</span>;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   }</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.agentid, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Agent &#39;%s&#39; not found!\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.agentid);</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;   }</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.item, <span class="stringliteral">&quot;status&quot;</span>)) {</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;      <span class="keywordflow">if</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>) {</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;         status = <span class="stringliteral">&quot;LOGGEDIN&quot;</span>;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;         status = <span class="stringliteral">&quot;LOGGEDOUT&quot;</span>;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;      }</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, status, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.item, <span class="stringliteral">&quot;name&quot;</span>)) {</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a6d121225508f464976ccd1f571cc3ba1">full_name</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.item, <span class="stringliteral">&quot;mohclass&quot;</span>)) {</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a6c0ebcc78965d8817651856e7914631d">moh</a>, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.item, <span class="stringliteral">&quot;channel&quot;</span>)) {</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;      logged = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a>(agent);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;      <span class="keywordflow">if</span> (logged) {</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;         <span class="keywordtype">char</span> *pos;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(logged), <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;         pos = strrchr(buf, <span class="charliteral">&#39;-&#39;</span>);</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;         <span class="keywordflow">if</span> (pos) {</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            *pos = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;         }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      }</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.item, <span class="stringliteral">&quot;fullchannel&quot;</span>)) {</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      logged = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a>(agent);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      <span class="keywordflow">if</span> (logged) {</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(logged), <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      }</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;   }</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structagent__cfg_html_a6d121225508f464976ccd1f571cc3ba1"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a6d121225508f464976ccd1f571cc3ba1">agent_cfg::full_name</a></div><div class="ttdeci">const ast_string_field full_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structagent__pvt_html_a7d442bd00b142ff82e79c2052d69dcdb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">agent_pvt::logged</a></div><div class="ttdeci">struct ast_channel * logged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00643">app_agent_pool.c:643</a></div></div>
<div class="ttc" id="test__config_8c_html_aecdc7cbd5dfa76493c0212caa55d706c"><div class="ttname"><a href="../../d8/d4f/test__config_8c.html#aecdc7cbd5dfa76493c0212caa55d706c">item</a></div><div class="ttdeci">static struct aco_type item</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4f/test__config_8c_source.html#l01463">test_config.c:1463</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="structast__channel_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_channel::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00083">channel_internal_api.c:83</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a55ac80086debb254e9d1f21d210e3705"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a></div><div class="ttdeci">static struct ast_channel * agent_lock_logged(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00690">app_agent_pool.c:690</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_accfcb380df76a64251d88ef49c2dd4e3"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#accfcb380df76a64251d88ef49c2dd4e3">AST_NONSTANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_NONSTANDARD_APP_ARGS(args, parse, sep)</div><div class="ttdoc">Performs the &amp;#39;nonstandard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01300">include/asterisk/app.h:1300</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="structagent__cfg_html_a6c0ebcc78965d8817651856e7914631d"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a6c0ebcc78965d8817651856e7914631d">agent_cfg::moh</a></div><div class="ttdeci">const ast_string_field moh</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5485fc780d3e0cce2d98b85aad2c846c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5485fc780d3e0cce2d98b85aad2c846c">&#9670;&nbsp;</a></span>agent_handle_logoff_cmd()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* agent_handle_logoff_cmd </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02485">2485</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00975">agent_logoff_request()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02309">complete_agent_logoff()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;{</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;agent logoff&quot;</span>;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;         <span class="stringliteral">&quot;Usage: agent logoff &lt;agent-id&gt; [soft]\n&quot;</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;         <span class="stringliteral">&quot;       Sets an agent as no longer logged in.\n&quot;</span></div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;         <span class="stringliteral">&quot;       If &#39;soft&#39; is specified, do not hangup existing calls.\n&quot;</span>;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#a97ba140fa091ecedd7cb9029a5e2ac36">complete_agent_logoff</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 3 &amp;&amp; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a> == 0</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;         &amp;&amp; (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>)</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;            || !strncasecmp(<span class="stringliteral">&quot;soft&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, strlen(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>)))) {</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;soft&quot;</span>);</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      }</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;   }</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> &lt; 3 || 4 &lt; a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a>) {</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;   }</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4 &amp;&amp; strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;soft&quot;</span>)) {</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;   }</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d11/app__agent__pool_8c.html#a90c12fe1cfd5f897d788df917f0af3af">agent_logoff_request</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4)) {</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Logging out %s\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;   }</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a90c12fe1cfd5f897d788df917f0af3af"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a90c12fe1cfd5f897d788df917f0af3af">agent_logoff_request</a></div><div class="ttdeci">static int agent_logoff_request(const char *agent_id, int soft)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00975">app_agent_pool.c:975</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a97ba140fa091ecedd7cb9029a5e2ac36"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a97ba140fa091ecedd7cb9029a5e2ac36">complete_agent_logoff</a></div><div class="ttdeci">static char * complete_agent_logoff(const char *word, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02309">app_agent_pool.c:2309</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5975e0ec066ec59aaca8d2e01989ac7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5975e0ec066ec59aaca8d2e01989ac7b">&#9670;&nbsp;</a></span>agent_handle_show_all()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* agent_handle_show_all </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02404">2404</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02327">agent_show_requested()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;{</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;agent show all&quot;</span>;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;         <span class="stringliteral">&quot;Usage: agent show all\n&quot;</span></div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;         <span class="stringliteral">&quot;       Provides summary information for all agents.\n&quot;</span>;</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;   }</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;   }</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a4e0c76b6d740600bf9e322b87d04dfb4">agent_show_requested</a>(a, 0);</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a4e0c76b6d740600bf9e322b87d04dfb4"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a4e0c76b6d740600bf9e322b87d04dfb4">agent_show_requested</a></div><div class="ttdeci">static void agent_show_requested(struct ast_cli_args *a, int online_only)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02327">app_agent_pool.c:2327</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adcc9e89f7dbd8c807535fbced0f99287"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcc9e89f7dbd8c807535fbced0f99287">&#9670;&nbsp;</a></span>agent_handle_show_online()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* agent_handle_show_online </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02382">2382</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02327">agent_show_requested()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;{</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;agent show online&quot;</span>;</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;         <span class="stringliteral">&quot;Usage: agent show online\n&quot;</span></div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;         <span class="stringliteral">&quot;       Provides summary information for logged in agents.\n&quot;</span>;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;   }</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;   }</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a4e0c76b6d740600bf9e322b87d04dfb4">agent_show_requested</a>(a, 1);</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;}</div><div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a4e0c76b6d740600bf9e322b87d04dfb4"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a4e0c76b6d740600bf9e322b87d04dfb4">agent_show_requested</a></div><div class="ttdeci">static void agent_show_requested(struct ast_cli_args *a, int online_only)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02327">app_agent_pool.c:2327</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abf5e2903a4ceff8c71544f7760ebc970"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf5e2903a4ceff8c71544f7760ebc970">&#9670;&nbsp;</a></span>agent_handle_show_specific()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* agent_handle_show_specific </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02426">2426</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00690">agent_lock_logged()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00160">ast_cli_args::argc</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00161">ast_cli_args::argv</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00071">AST_CLI_YESNO</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00255">ast_devstate_str()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::beep_sound</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00634">agent_pvt::call_start</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00045">CLI_SHOWUSAGE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02277">complete_agent()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00627">agent_pvt::devstate</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::full_name</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00630">agent_pvt::login_start</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::moh</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00165">ast_cli_args::n</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00164">ast_cli_args::pos</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00386">agent_cfg::record_agent_calls</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00163">ast_cli_args::word</a>.</p>
<div class="fragment"><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;{</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(4096);</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;agent show&quot;</span>;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;         <span class="stringliteral">&quot;Usage: agent show &lt;agent-id&gt;\n&quot;</span></div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;         <span class="stringliteral">&quot;       Show information about the &lt;agent-id&gt; agent\n&quot;</span>;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;      <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a> == 2) {</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ac543f4a511c682ff550c23f1c8f7870c">complete_agent</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      }</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;   }</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;   }</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;Agent &#39;%s&#39; not found\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   }</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   logged = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a>(agent);</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;out, 0, <span class="stringliteral">&quot;Id: %s\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;Name: %s\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a6d121225508f464976ccd1f571cc3ba1">full_name</a>);</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;Beep: %s\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#af22047b6d8545b610cde6ad3e397fd79">beep_sound</a>);</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;MOH: %s\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a6c0ebcc78965d8817651856e7914631d">moh</a>);</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;RecordCalls: %s\n&quot;</span>, <a class="code" href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#afa345a7167ae253354866a0e845058b2">record_agent_calls</a>));</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;State: %s\n&quot;</span>, <a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">devstate</a>));</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;   <span class="keywordflow">if</span> (logged) {</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *talking_with;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;LoggedInChannel: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(logged));</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;LoggedInTime: %ld\n&quot;</span>, (<span class="keywordtype">long</span>) agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#acd6bb3b5d452161627e0c4b204977401">login_start</a>);</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;      talking_with = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(logged, <span class="stringliteral">&quot;BRIDGEPEER&quot;</span>);</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(talking_with)) {</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;TalkingWith: %s\n&quot;</span>, talking_with);</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;out, 0, <span class="stringliteral">&quot;CallStarted: %ld\n&quot;</span>, (<span class="keywordtype">long</span>) agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#aa09f4acec5c1e337edce28217f8f685c">call_start</a>);</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;      }</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;   }</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(out));</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structagent__cfg_html_a6d121225508f464976ccd1f571cc3ba1"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a6d121225508f464976ccd1f571cc3ba1">agent_cfg::full_name</a></div><div class="ttdeci">const ast_string_field full_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structagent__cfg_html_af22047b6d8545b610cde6ad3e397fd79"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#af22047b6d8545b610cde6ad3e397fd79">agent_cfg::beep_sound</a></div><div class="ttdeci">const ast_string_field beep_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="structagent__cfg_html_afa345a7167ae253354866a0e845058b2"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#afa345a7167ae253354866a0e845058b2">agent_cfg::record_agent_calls</a></div><div class="ttdeci">int record_agent_calls</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00386">app_agent_pool.c:386</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1b46e6ee7b5c070d8ec3b45f5bc49a92"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">agent_pvt::devstate</a></div><div class="ttdeci">enum ast_device_state devstate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00627">app_agent_pool.c:627</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a55ac80086debb254e9d1f21d210e3705"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a></div><div class="ttdeci">static struct ast_channel * agent_lock_logged(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00690">app_agent_pool.c:690</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="devicestate_8h_html_a6190de57ac370315e51f2c46724d5b10"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a></div><div class="ttdeci">const char * ast_devstate_str(enum ast_device_state devstate) attribute_pure</div><div class="ttdoc">Convert device state to text string that is easier to parse. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00255">devicestate.c:255</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structagent__pvt_html_acd6bb3b5d452161627e0c4b204977401"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#acd6bb3b5d452161627e0c4b204977401">agent_pvt::login_start</a></div><div class="ttdeci">time_t login_start</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00630">app_agent_pool.c:630</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structagent__cfg_html_a6c0ebcc78965d8817651856e7914631d"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a6c0ebcc78965d8817651856e7914631d">agent_cfg::moh</a></div><div class="ttdeci">const ast_string_field moh</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ac543f4a511c682ff550c23f1c8f7870c"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ac543f4a511c682ff550c23f1c8f7870c">complete_agent</a></div><div class="ttdeci">static char * complete_agent(const char *word, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02277">app_agent_pool.c:2277</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="structagent__pvt_html_aa09f4acec5c1e337edce28217f8f685c"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#aa09f4acec5c1e337edce28217f8f685c">agent_pvt::call_start</a></div><div class="ttdeci">time_t call_start</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00634">app_agent_pool.c:634</a></div></div>
<div class="ttc" id="cli_8h_html_a29e703082f8137e165097c41f249e6d1"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a29e703082f8137e165097c41f249e6d1">AST_CLI_YESNO</a></div><div class="ttdeci">#define AST_CLI_YESNO(x)</div><div class="ttdoc">Return Yes or No depending on the argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00071">cli.h:71</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a55ac80086debb254e9d1f21d210e3705"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a55ac80086debb254e9d1f21d210e3705">&#9670;&nbsp;</a></span>agent_lock_logged()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a>* agent_lock_logged </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td>
          <td class="paramname"><em>agent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00690">690</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00643">agent_pvt::logged</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02184">agent_function_read()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02426">agent_handle_show_specific()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00975">agent_logoff_request()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02327">agent_show_requested()</a>.</p>
<div class="fragment"><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;{</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      <span class="keywordflow">if</span> (!agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>) { <span class="comment">/* No owner. Nothing to do. */</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      }</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;      <span class="comment">/* If we don&#39;t ref the logged, it could be killed when we unlock the agent. */</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;      logged = <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      <span class="comment">/* Locking logged requires us to lock channel, then agent. */</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(logged);</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      <span class="comment">/* Check if logged changed during agent unlock period */</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">if</span> (logged != agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;         <span class="comment">/* Channel changed. Unref and do another pass. */</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;         <span class="comment">/* Channel stayed the same. Return it. */</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;         <span class="keywordflow">return</span> logged;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      }</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;   }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structagent__pvt_html_a7d442bd00b142ff82e79c2052d69dcdb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">agent_pvt::logged</a></div><div class="ttdeci">struct ast_channel * logged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00643">app_agent_pool.c:643</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae896354e27dbb9fd8ece2a88f4d88d0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae896354e27dbb9fd8ece2a88f4d88d0d">&#9670;&nbsp;</a></span>agent_login_channel_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_login_channel_config </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02040">2040</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00587">AGENT_FLAG_ACK_CALL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00589">AGENT_FLAG_AUTO_LOGOFF</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00588">AGENT_FLAG_DTMF_ACCEPT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00590">AGENT_FLAG_WRAPUP_TIME</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00892">ast_channel_connected()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00084">ast_copy_flags</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00196">AST_FLAGS_ALL</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02031">ast_party_connected_line_copy()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02072">ast_party_connected_line_free()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02022">ast_party_connected_line_init()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00082">connected</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00610">agent_pvt::override_ack_call</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00606">agent_pvt::override_auto_logoff</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00608">agent_pvt::override_wrapup_time</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00602">agent_pvt::waiting_colp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;{</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> opts = { 0 };</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>;</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> override_ack_call = 0;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> override_auto_logoff = 0;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> override_wrapup_time = 0;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *override_dtmf_accept = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>);</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   <span class="comment">/* Get config values from channel. */</span></div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(chan));</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;AGENTACKCALL&quot;</span>);</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var)) {</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;      override_ack_call = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(var) ? 1 : 0;</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;opts, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd">AGENT_FLAG_ACK_CALL</a>);</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;   }</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;AGENTACCEPTDTMF&quot;</span>);</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var)) {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      override_dtmf_accept = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(var);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;opts, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93">AGENT_FLAG_DTMF_ACCEPT</a>);</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;   }</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;AGENTAUTOLOGOFF&quot;</span>);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var)) {</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="keywordflow">if</span> (sscanf(var, <span class="stringliteral">&quot;%u&quot;</span>, &amp;override_auto_logoff) == 1) {</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;opts, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827">AGENT_FLAG_AUTO_LOGOFF</a>);</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;      }</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;   }</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;AGENTWRAPUPTIME&quot;</span>);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var)) {</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;      <span class="keywordflow">if</span> (sscanf(var, <span class="stringliteral">&quot;%u&quot;</span>, &amp;override_wrapup_time) == 1) {</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;opts, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832">AGENT_FLAG_WRAPUP_TIME</a>);</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;      }</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;   }</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;   <span class="comment">/* Set config values on agent. */</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1e4986d38981a6836446fd6e0947bfaa">waiting_colp</a>);</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1e4986d38981a6836446fd6e0947bfaa">waiting_colp</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>;</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(agent, override_dtmf_accept, override_dtmf_accept);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a>(agent, &amp;opts, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a0db93def45062b0b68b3cfc92828056e">override_auto_logoff</a> = override_auto_logoff;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#aafe46fa9fde27806c85eea0f7e012b98">override_wrapup_time</a> = override_wrapup_time;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a9e221b3d2bfe1c52281667c3cb15195e">override_ack_call</a> = override_ack_call;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;}</div><div class="ttc" id="channel_8h_html_abf514b9d96a1821a33fec8c64ee4e26f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a></div><div class="ttdeci">void ast_party_connected_line_init(struct ast_party_connected_line *init)</div><div class="ttdoc">Initialize the given connected line structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02022">channel.c:2022</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827">AGENT_FLAG_AUTO_LOGOFF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00589">app_agent_pool.c:589</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93">AGENT_FLAG_DTMF_ACCEPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00588">app_agent_pool.c:588</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832">AGENT_FLAG_WRAPUP_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00590">app_agent_pool.c:590</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd">AGENT_FLAG_ACK_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00587">app_agent_pool.c:587</a></div></div>
<div class="ttc" id="utils_8h_html_ab9da1c7265610eff83ed6146f104dc6f"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab9da1c7265610eff83ed6146f104dc6f">ast_copy_flags</a></div><div class="ttdeci">#define ast_copy_flags(dest, src, flagz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00084">utils.h:84</a></div></div>
<div class="ttc" id="channel_8h_html_a40fc421536e02d30fecaa51a255b4144"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a></div><div class="ttdeci">void ast_party_connected_line_free(struct ast_party_connected_line *doomed)</div><div class="ttdoc">Destroy the connected line information contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02072">channel.c:2072</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="channel_8h_html_a10f23f1907b804485f62973f66cd9aef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00892">channel_internal_api.c:892</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="structast__party__connected__line_html"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a></div><div class="ttdoc">Connected Line/Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00457">channel.h:457</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="utils_8h_html_afb8683b4d96960d7a82a86a974a57599"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a></div><div class="ttdeci">#define AST_FLAGS_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00196">utils.h:196</a></div></div>
<div class="ttc" id="structagent__pvt_html_aafe46fa9fde27806c85eea0f7e012b98"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#aafe46fa9fde27806c85eea0f7e012b98">agent_pvt::override_wrapup_time</a></div><div class="ttdeci">unsigned int override_wrapup_time</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00608">app_agent_pool.c:608</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="channel_8h_html_a5d3c15fe1dffda82e6dc03ca7b26526a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5d3c15fe1dffda82e6dc03ca7b26526a">ast_party_connected_line_copy</a></div><div class="ttdeci">void ast_party_connected_line_copy(struct ast_party_connected_line *dest, const struct ast_party_connected_line *src)</div><div class="ttdoc">Copy the source connected line information to the destination connected line. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02031">channel.c:2031</a></div></div>
<div class="ttc" id="structagent__pvt_html_a0db93def45062b0b68b3cfc92828056e"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a0db93def45062b0b68b3cfc92828056e">agent_pvt::override_auto_logoff</a></div><div class="ttdeci">unsigned int override_auto_logoff</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00606">app_agent_pool.c:606</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a414b69d7583bb4cfc6daf5276aac6d14"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a></div><div class="ttdeci">char connected</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00082">eagi_proxy.c:82</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1e4986d38981a6836446fd6e0947bfaa"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1e4986d38981a6836446fd6e0947bfaa">agent_pvt::waiting_colp</a></div><div class="ttdeci">struct ast_party_connected_line waiting_colp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00602">app_agent_pool.c:602</a></div></div>
<div class="ttc" id="structagent__pvt_html_a9e221b3d2bfe1c52281667c3cb15195e"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a9e221b3d2bfe1c52281667c3cb15195e">agent_pvt::override_ack_call</a></div><div class="ttdeci">unsigned int override_ack_call</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00610">app_agent_pool.c:610</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae6f3c6c02f7961bd6939f302cafa0f4f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6f3c6c02f7961bd6939f302cafa0f4f">&#9670;&nbsp;</a></span>agent_login_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_login_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dialplan AgentLogin application to log in an agent. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel attempting to login as an agent. </td></tr>
    <tr><td class="paramname">data</td><td>Application parameters</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>To continue in dialplan. </td></tr>
    <tr><td class="paramname">-1</td><td>To hangup. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">2112</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02040">agent_login_channel_config()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02101">agent_login_opts</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01520">agent_run()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02814">ast_answer()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02906">ast_app_parse_options()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../d2/d4d/file_8h_source.html#l00047">AST_DIGIT_NONE</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01814">ast_stream_and_wait()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01419">bridge_agent_hold_deferred_create()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02097">OPT_SILENT</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">options</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01439">send_agent_login()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;{</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> opts;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(agent_id);</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(other);     <span class="comment">/* Any remaining unused arguments */</span></div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   );</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *, agent, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d11/app__agent__pool_8c.html#a6c861b7f9ac3693f06669b575dc6e16b">bridge_agent_hold_deferred_create</a>()) {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;   }</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan)) {</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;   }</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.agent_id)) {</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;AgentLogin requires an AgentId\n&quot;</span>);</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   }</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#abe9c246e6907a134e70926a4a761ef15">agent_login_opts</a>, &amp;opts, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.options)) {</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="comment">/* General invalid option syntax. */</span></div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   <span class="comment">/* Find the agent. */</span></div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.agent_id, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Agent &#39;%s&#39; does not exist.\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.agent_id);</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;INVALID&quot;</span>);</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;   }</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;   <span class="comment">/* Has someone already logged in as this agent already? */</span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   <span class="keywordflow">if</span> (agent-&gt;logged) {</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Agent &#39;%s&#39; already logged in.\n&quot;</span>, agent-&gt;username);</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;ALREADY_LOGGED_IN&quot;</span>);</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;   }</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;   agent-&gt;logged = <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(chan);</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;   agent-&gt;last_disconnect = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;   time(&amp;agent-&gt;login_start);</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;   agent-&gt;deferred_logoff = 0;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae896354e27dbb9fd8ece2a88f4d88d0d">agent_login_channel_config</a>(agent, chan);</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opts, <a class="code" href="../../de/d11/app__agent__pool_8c.html#abcb60ae8dded463f56a7c35857f1e501a9c6a0359498684912cb0a3810e03138d">OPT_SILENT</a>)) {</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(chan, <span class="stringliteral">&quot;agent-loginok&quot;</span>, <a class="code" href="../../d2/d4d/file_8h.html#abb7bdff3c549191072878402b0a0ca9c">AST_DIGIT_NONE</a>);</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;   }</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Agent &#39;%s&#39; logged in (format %s/%s)\n&quot;</span>, agent-&gt;username,</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(chan)),</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;      <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(chan)));</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a6f0c90a579585c460312c6c4d2caf216">send_agent_login</a>(chan, agent-&gt;username);</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a8e005c499b7e949c3f1a290e88acb71d">agent_run</a>(agent, chan);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a8e005c499b7e949c3f1a290e88acb71d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a8e005c499b7e949c3f1a290e88acb71d">agent_run</a></div><div class="ttdeci">static void agent_run(struct agent_pvt *agent, struct ast_channel *logged)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01520">app_agent_pool.c:1520</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a6f0c90a579585c460312c6c4d2caf216"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a6f0c90a579585c460312c6c4d2caf216">send_agent_login</a></div><div class="ttdeci">static void send_agent_login(struct ast_channel *chan, const char *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01439">app_agent_pool.c:1439</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae896354e27dbb9fd8ece2a88f4d88d0d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae896354e27dbb9fd8ece2a88f4d88d0d">agent_login_channel_config</a></div><div class="ttdeci">static void agent_login_channel_config(struct agent_pvt *agent, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02040">app_agent_pool.c:2040</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_abcb60ae8dded463f56a7c35857f1e501a9c6a0359498684912cb0a3810e03138d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#abcb60ae8dded463f56a7c35857f1e501a9c6a0359498684912cb0a3810e03138d">OPT_SILENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02097">app_agent_pool.c:2097</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af40039f1c49c16d0f6fa33fe9c43a0cb"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a></div><div class="ttdeci">int ast_app_parse_options(const struct ast_app_option *options, struct ast_flags *flags, char **args, char *optstr)</div><div class="ttdoc">Parses a string containing application options and sets flags/arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02906">main/app.c:2906</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="file_8h_html_abb7bdff3c549191072878402b0a0ca9c"><div class="ttname"><a href="../../d2/d4d/file_8h.html#abb7bdff3c549191072878402b0a0ca9c">AST_DIGIT_NONE</a></div><div class="ttdeci">#define AST_DIGIT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00047">file.h:47</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a6c861b7f9ac3693f06669b575dc6e16b"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a6c861b7f9ac3693f06669b575dc6e16b">bridge_agent_hold_deferred_create</a></div><div class="ttdeci">static int bridge_agent_hold_deferred_create(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01419">app_agent_pool.c:1419</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="file_8h_html_a95b94a020720147325a486e210b36775"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a></div><div class="ttdeci">int ast_stream_and_wait(struct ast_channel *chan, const char *file, const char *digits)</div><div class="ttdoc">stream file until digit If the file name is non-empty, try to play it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01814">file.c:1814</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_abe9c246e6907a134e70926a4a761ef15"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#abe9c246e6907a134e70926a4a761ef15">agent_login_opts</a></div><div class="ttdeci">static const struct ast_app_option agent_login_opts[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02101">app_agent_pool.c:2101</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_aec583a3e25358ee552a4f3df53914cd0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a></div><div class="ttdeci">int ast_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02814">channel.c:2814</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a90c12fe1cfd5f897d788df917f0af3af"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a90c12fe1cfd5f897d788df917f0af3af">&#9670;&nbsp;</a></span>agent_logoff_request()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_logoff_request </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>soft</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00975">975</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00690">agent_lock_logged()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../de/d11/app__agent__pool_8c.html#a2b53789591de3558859d20a0800a9eda">AO2_GLOBAL_OBJ_STATIC()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02476">ast_softhangup()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01149">AST_SOFTHANGUP_EXPLICIT</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02605">action_agent_logoff()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02485">agent_handle_logoff_cmd()</a>.</p>
<div class="fragment"><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;{</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *, agent, <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, agent_id, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   }</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   logged = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a>(agent);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <span class="keywordflow">if</span> (logged) {</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <span class="keywordflow">if</span> (soft) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;         agent-&gt;deferred_logoff = 1;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(logged, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a>);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      }</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   }</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01149">channel.h:1149</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a55ac80086debb254e9d1f21d210e3705"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a></div><div class="ttdeci">static struct ast_channel * agent_lock_logged(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00690">app_agent_pool.c:690</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeaea7aa68d00de5f86fcc523d6f2c55a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeaea7aa68d00de5f86fcc523d6f2c55a">&#9670;&nbsp;</a></span>agent_logout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_logout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td>
          <td class="paramname"><em>agent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01481">1481</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00756">agent_devstate_changed()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00568">AGENT_STATE_LOGGED_OUT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00970">ast_bridge_destroy()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00077">ast_clear_flag</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00058">AST_DEVICE_UNAVAILABLE</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00196">AST_FLAGS_ALL</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00641">agent_pvt::caller_bridge</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00627">agent_pvt::devstate</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00643">agent_pvt::logged</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00630">agent_pvt::login_start</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01454">send_agent_logoff()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00625">agent_pvt::state</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01633">agent_after_bridge_cb_failed()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01520">agent_run()</a>.</p>
<div class="fragment"><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;{</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *caller_bridge;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   <span class="keywordtype">long</span> time_logged_in;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   time_logged_in = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#acd6bb3b5d452161627e0c4b204977401">login_start</a>;</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   logged = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   caller_bridge = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a>;</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86">AGENT_STATE_LOGGED_OUT</a>;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">devstate</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>;</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(agent, <a class="code" href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a>);</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   <span class="keywordflow">if</span> (caller_bridge) {</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(caller_bridge, 0);</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   }</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(logged);</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a7c8999dd893779d9c04cbf4a70e9e2a1">send_agent_logoff</a>(logged, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, time_logged_in);</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(2, <span class="stringliteral">&quot;Agent &#39;%s&#39; logged out.  Logged in for %ld seconds.\n&quot;</span>,</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, time_logged_in);</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structagent__pvt_html_a2b63413544f313e27f0a2893dfa5e251"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">agent_pvt::state</a></div><div class="ttdeci">enum agent_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00625">app_agent_pool.c:625</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86">AGENT_STATE_LOGGED_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00568">app_agent_pool.c:568</a></div></div>
<div class="ttc" id="structagent__pvt_html_a7d442bd00b142ff82e79c2052d69dcdb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">agent_pvt::logged</a></div><div class="ttdeci">struct ast_channel * logged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00643">app_agent_pool.c:643</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00058">devicestate.h:58</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structagent__pvt_html_a6b2557c443982571cceb9005c5bec611"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">agent_pvt::caller_bridge</a></div><div class="ttdeci">struct ast_bridge * caller_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00641">app_agent_pool.c:641</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1b46e6ee7b5c070d8ec3b45f5bc49a92"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">agent_pvt::devstate</a></div><div class="ttdeci">enum ast_device_state devstate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00627">app_agent_pool.c:627</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="structagent__pvt_html_acd6bb3b5d452161627e0c4b204977401"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#acd6bb3b5d452161627e0c4b204977401">agent_pvt::login_start</a></div><div class="ttdeci">time_t login_start</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00630">app_agent_pool.c:630</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="utils_8h_html_afb8683b4d96960d7a82a86a974a57599"><div class="ttname"><a href="../../d5/d60/utils_8h.html#afb8683b4d96960d7a82a86a974a57599">AST_FLAGS_ALL</a></div><div class="ttdeci">#define AST_FLAGS_ALL</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00196">utils.h:196</a></div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a7c8999dd893779d9c04cbf4a70e9e2a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a7c8999dd893779d9c04cbf4a70e9e2a1">send_agent_logoff</a></div><div class="ttdeci">static void send_agent_logoff(struct ast_channel *chan, const char *agent, long logintime)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01454">app_agent_pool.c:1454</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec6f971b8bba2801e4ab3a92917860f1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a></div><div class="ttdeci">static void agent_devstate_changed(const char *agent_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00756">app_agent_pool.c:756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7efec5e491195982d97dbb426026cfc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7efec5e491195982d97dbb426026cfc">&#9670;&nbsp;</a></span>agent_mark()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_mark </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00874">874</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00616">agent_pvt::the_mark</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00884">agents_mark()</a>.</p>
<div class="fragment"><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;{</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent = obj;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a3612e1393049830a205c9fb3857ce295">the_mark</a> = 1;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;}</div><div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="structagent__pvt_html_a3612e1393049830a205c9fb3857ce295"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a3612e1393049830a205c9fb3857ce295">agent_pvt::the_mark</a></div><div class="ttdeci">unsigned int the_mark</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00616">app_agent_pool.c:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad63565be83f2a9e10382f7adb483965c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad63565be83f2a9e10382f7adb483965c">&#9670;&nbsp;</a></span>agent_pvt_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_pvt_cmp </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00852">852</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00643">agent_pvt::logged</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01156">OBJ_PARTIAL_KEY</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01154">OBJ_POINTER</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;{</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent = obj;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d4d/structagent__pvt.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> &amp; (<a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>)) {</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>:</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>:</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>:</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;      cmp = <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      <span class="keywordflow">if</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a> == arg) {</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;         cmp = <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;         cmp = 0;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;      }</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   }</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <span class="keywordflow">return</span> cmp;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2448088751e4d494d1981c7f4b84e8d0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a></div><div class="ttdeci">#define OBJ_POINTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01154">astobj2.h:1154</a></div></div>
<div class="ttc" id="structagent__pvt_html_a7d442bd00b142ff82e79c2052d69dcdb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">agent_pvt::logged</a></div><div class="ttdeci">struct ast_channel * logged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00643">app_agent_pool.c:643</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab0b4e11aba1e0a898b5d75427d3b13fa"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a></div><div class="ttdeci">#define OBJ_PARTIAL_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01156">astobj2.h:1156</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="structagent__pvt_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#ac92588540e8c1d014a08cd8a45462b19">agent_pvt::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00604">app_agent_pool.c:604</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c84929318242d3454e982dce5668aae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c84929318242d3454e982dce5668aae">&#9670;&nbsp;</a></span>agent_pvt_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_pvt_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vdoomed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00761">761</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00756">agent_devstate_changed()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00970">ast_bridge_destroy()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02072">ast_party_connected_line_free()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00368">ast_string_field_free_memory</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00641">agent_pvt::caller_bridge</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00643">agent_pvt::logged</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00602">agent_pvt::waiting_colp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00784">agent_pvt_new()</a>.</p>
<div class="fragment"><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;{</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *doomed = vdoomed;</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;   <span class="comment">/* Make sure device state reflects agent destruction. */</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>)) {</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Destroyed.\n&quot;</span>, doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a>(doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1e4986d38981a6836446fd6e0947bfaa">waiting_colp</a>);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <span class="keywordflow">if</span> (doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a>) {</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a>, 0);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;      doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="keywordflow">if</span> (doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>) {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;      doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a> = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   }</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   doomed-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(doomed);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;}</div><div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="structagent__pvt_html_a7d442bd00b142ff82e79c2052d69dcdb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">agent_pvt::logged</a></div><div class="ttdeci">struct ast_channel * logged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00643">app_agent_pool.c:643</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="channel_8h_html_a40fc421536e02d30fecaa51a255b4144"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a></div><div class="ttdeci">void ast_party_connected_line_free(struct ast_party_connected_line *doomed)</div><div class="ttdoc">Destroy the connected line information contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02072">channel.c:2072</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structagent__pvt_html_a6b2557c443982571cceb9005c5bec611"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">agent_pvt::caller_bridge</a></div><div class="ttdeci">struct ast_bridge * caller_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00641">app_agent_pool.c:641</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1e4986d38981a6836446fd6e0947bfaa"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1e4986d38981a6836446fd6e0947bfaa">agent_pvt::waiting_colp</a></div><div class="ttdeci">struct ast_party_connected_line waiting_colp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00602">app_agent_pool.c:602</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec6f971b8bba2801e4ab3a92917860f1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a></div><div class="ttdeci">static void agent_devstate_changed(const char *agent_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00756">app_agent_pool.c:756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3a5f74a4e24b8c032bd9698c1f2af510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a5f74a4e24b8c032bd9698c1f2af510">&#9670;&nbsp;</a></span>agent_pvt_devstate_get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static enum <a class="el" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> agent_pvt_devstate_get </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent_id</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00732">732</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00057">AST_DEVICE_INVALID</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00627">agent_pvt::devstate</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;{</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> dev_state = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, agent_id, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;   <span class="keywordflow">if</span> (agent) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;      dev_state = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">devstate</a>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;   }</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;   <span class="keywordflow">return</span> dev_state;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;}</div><div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1b46e6ee7b5c070d8ec3b45f5bc49a92"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">agent_pvt::devstate</a></div><div class="ttdeci">enum ast_device_state devstate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00627">app_agent_pool.c:627</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab0c3d04727ae30c5deac61abe52b5fdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab0c3d04727ae30c5deac61abe52b5fdd">&#9670;&nbsp;</a></span>agent_pvt_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a>* agent_pvt_new </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *&#160;</td>
          <td class="paramname"><em>cfg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00784">784</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00761">agent_pvt_destructor()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00411">ao2_alloc</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00058">AST_DEVICE_UNAVAILABLE</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02022">ast_party_connected_line_init()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00353">ast_string_field_init</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00627">agent_pvt::devstate</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::username</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00602">agent_pvt::waiting_colp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00935">agents_post_apply_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;{</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*agent), <a class="code" href="../../de/d11/app__agent__pool_8c.html#a7c84929318242d3454e982dce5668aae">agent_pvt_destructor</a>);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   }</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(agent, 32)) {</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   }</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(agent, <a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, cfg-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1e4986d38981a6836446fd6e0947bfaa">waiting_colp</a>);</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, +1);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a> = <a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>;</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;   agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">devstate</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a>;</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;   <span class="keywordflow">return</span> agent;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;}</div><div class="ttc" id="channel_8h_html_abf514b9d96a1821a33fec8c64ee4e26f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a></div><div class="ttdeci">void ast_party_connected_line_init(struct ast_party_connected_line *init)</div><div class="ttdoc">Initialize the given connected line structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02022">channel.c:2022</a></div></div>
<div class="ttc" id="structagent__cfg_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">agent_cfg::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a7c84929318242d3454e982dce5668aae"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a7c84929318242d3454e982dce5668aae">agent_pvt_destructor</a></div><div class="ttdeci">static void agent_pvt_destructor(void *vdoomed)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00761">app_agent_pool.c:761</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeafac147cbabf3ccb80e50e86027710549">AST_DEVICE_UNAVAILABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00058">devicestate.h:58</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1b46e6ee7b5c070d8ec3b45f5bc49a92"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">agent_pvt::devstate</a></div><div class="ttdeci">enum ast_device_state devstate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00627">app_agent_pool.c:627</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1e4986d38981a6836446fd6e0947bfaa"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1e4986d38981a6836446fd6e0947bfaa">agent_pvt::waiting_colp</a></div><div class="ttdeci">struct ast_party_connected_line waiting_colp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00602">app_agent_pool.c:602</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32d9fcd6bfb0ed9371e6dbae8a994bda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32d9fcd6bfb0ed9371e6dbae8a994bda">&#9670;&nbsp;</a></span>agent_pvt_sort_cmp()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_pvt_sort_cmp </td>
          <td>(</td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj_left</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>obj_right</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00820">820</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01156">OBJ_PARTIAL_KEY</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01154">OBJ_POINTER</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;{</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent_left = obj_left;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent_right = obj_right;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *right_key = obj_right;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   <span class="keywordtype">int</span> cmp;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../dd/d4d/structagent__pvt.html#ac92588540e8c1d014a08cd8a45462b19">flags</a> &amp; (<a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>)) {</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>:</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;      right_key = agent_right-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>;</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>:</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      cmp = strcmp(agent_left-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, right_key);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>:</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;      cmp = strncmp(agent_left-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, right_key, strlen(right_key));</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;   }</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;   <span class="keywordflow">return</span> cmp;</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2448088751e4d494d1981c7f4b84e8d0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a></div><div class="ttdeci">#define OBJ_POINTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01154">astobj2.h:1154</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab0b4e11aba1e0a898b5d75427d3b13fa"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a></div><div class="ttdeci">#define OBJ_PARTIAL_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01156">astobj2.h:1156</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="structagent__pvt_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#ac92588540e8c1d014a08cd8a45462b19">agent_pvt::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00604">app_agent_pool.c:604</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a392237b28b1ee658981b450fcf3fe363"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a392237b28b1ee658981b450fcf3fe363">&#9670;&nbsp;</a></span>agent_request_exec()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_request_exec </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Dialplan AgentRequest application to locate an agent to talk with. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>Channel wanting to talk with an agent. </td></tr>
    <tr><td class="paramname">data</td><td>Application parameters</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>To continue in dialplan. </td></tr>
    <tr><td class="paramname">-1</td><td>To hangup. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">1889</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00674">__ao2_cleanup()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01660">agent_bridge_channel_get_lock()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00756">agent_devstate_changed()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00574">AGENT_STATE_CALL_PRESENT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00568">AGENT_STATE_LOGGED_OUT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00582">AGENT_STATE_LOGGING_OUT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00572">AGENT_STATE_READY_FOR_CALL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/dde/test__func__file_8c_source.html#l00046">args</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">AST_APP_ARG</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03617">ast_bridge_basic_new()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00970">ast_bridge_destroy()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03720">ast_bridge_features_cleanup()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03687">ast_bridge_features_init()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00183">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03382">ast_bridge_interval_hook()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01667">ast_bridge_join()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03338">ast_bridge_join_hook()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00549">AST_BRIDGE_JOIN_PASS_REFERENCE</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00888">ast_channel_caller()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00997">ast_channel_softhangup_internal_flag()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00445">ast_check_hangup()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08389">ast_connected_line_copy_from_caller()</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">AST_DECLARE_APP_ARGS</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00055">AST_DEVICE_INUSE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00988">AST_FLAG_ZOMBIE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02072">ast_party_connected_line_free()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02022">ast_party_connected_line_init()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01127">AST_SOFTHANGUP_ASYNCGOTO</a>, <a class="el" href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">AST_STANDARD_APP_ARGS</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01419">bridge_agent_hold_deferred_create()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">caller_abort_agent()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01847">caller_joined_bridge()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01722">caller_safety_timeout()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00339">CALLER_SAFETY_TIMEOUT_TIME</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">parse()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01818">send_colp_to_agent()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;{</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *caller_bridge;</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *logged;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> caller_features;</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>,</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(agent_id);</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(other);     <span class="comment">/* Any remaining unused arguments */</span></div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;   );</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *, agent, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d11/app__agent__pool_8c.html#a6c861b7f9ac3693f06669b575dc6e16b">bridge_agent_hold_deferred_create</a>()) {</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;   }</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>, parse);</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.agent_id)) {</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;AgentRequest requires an AgentId\n&quot;</span>);</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;   }</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;   <span class="comment">/* Find the agent. */</span></div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.agent_id, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Agent &#39;%s&#39; does not exist.\n&quot;</span>, <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>.agent_id);</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;INVALID&quot;</span>);</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;   }</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a>(&amp;caller_features)) {</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;   }</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;   <span class="comment">/* Add safety timeout hook. */</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, +1);</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a>(&amp;caller_features, 0, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a1d78ba0e31a3a17b37273be121850718">CALLER_SAFETY_TIMEOUT_TIME</a>,</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aaa635926514981b733c8cc5afaf0def9">caller_safety_timeout</a>, agent, <a class="code" href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>)) {</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;caller_features);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;   }</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;   <span class="comment">/* Setup the alert agent on caller joining the bridge hook. */</span></div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, +1);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a5ef8af740b139874195a394ba4abee3d">ast_bridge_join_hook</a>(&amp;caller_features, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a33214b7c3d67d8ea8652269fc5afb0d0">caller_joined_bridge</a>, agent,</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a>, 0)) {</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;caller_features);</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;   }</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   caller_bridge = <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a>();</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;   <span class="keywordflow">if</span> (!caller_bridge) {</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;caller_features);</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;   }</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;   <span class="keywordflow">switch</span> (agent-&gt;state) {</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86">AGENT_STATE_LOGGED_OUT</a>:</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a>:</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(caller_bridge, 0);</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;caller_features);</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Agent &#39;%s&#39; not logged in.\n&quot;</span>, agent-&gt;username);</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;NOT_LOGGED_IN&quot;</span>);</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a>:</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(caller_bridge, +1);</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;      agent-&gt;caller_bridge = caller_bridge;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      agent-&gt;state = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a>;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;      agent-&gt;devstate = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>;</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(caller_bridge, 0);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;caller_features);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Agent &#39;%s&#39; is busy.\n&quot;</span>, agent-&gt;username);</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;BUSY&quot;</span>);</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   }</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a>(agent-&gt;username);</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;   <span class="comment">/* Get COLP for agent. */</span></div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>);</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan));</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   logged = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a5733bc2f13f35fe0d8bde13939b50e07">agent_bridge_channel_get_lock</a>(agent);</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;   <span class="keywordflow">if</span> (!logged) {</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>);</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aab6ab498f59aece6e53aa7102c0077e2">caller_abort_agent</a>(agent);</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(caller_bridge, 0);</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;caller_features);</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Agent &#39;%s&#39; not logged in.\n&quot;</span>, agent-&gt;username);</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;NOT_LOGGED_IN&quot;</span>);</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   }</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a32da61f3d1a1faa6ae5211f81eb52341">send_colp_to_agent</a>(logged, &amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>);</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(logged);</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(logged, -1);</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a>(&amp;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a>);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a>(caller_bridge, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;caller_features, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d">AST_BRIDGE_JOIN_PASS_REFERENCE</a>)) {</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aab6ab498f59aece6e53aa7102c0077e2">caller_abort_agent</a>(agent);</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Agent &#39;%s&#39;: Caller %s failed to join the bridge.\n&quot;</span>,</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;         agent-&gt;username, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;ERROR&quot;</span>);</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   }</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;caller_features);</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <span class="comment">/* Determine if we need to continue in the dialplan after the bridge. */</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan) &amp; <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4">AST_SOFTHANGUP_ASYNCGOTO</a>) {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;<span class="comment">       * The bridge was broken for a hangup that isn&#39;t real.</span></div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;<span class="comment">       * Don&#39;t run the h extension, because the channel isn&#39;t</span></div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;<span class="comment">       * really hung up.  This should really only happen with</span></div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;<span class="comment">       * AST_SOFTHANGUP_ASYNCGOTO.</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      res = 0;</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;         || <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a>)</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;         || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>));</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;   }</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;   <span class="keywordflow">return</span> res ? -1 : 0;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="channel_8h_html_abf514b9d96a1821a33fec8c64ee4e26f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abf514b9d96a1821a33fec8c64ee4e26f">ast_party_connected_line_init</a></div><div class="ttdeci">void ast_party_connected_line_init(struct ast_party_connected_line *init)</div><div class="ttdoc">Initialize the given connected line structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02022">channel.c:2022</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="bridge__features_8h_html_aafc3026d777c0bf6899e93263178e102"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a></div><div class="ttdeci">void ast_bridge_features_cleanup(struct ast_bridge_features *features)</div><div class="ttdoc">Clean up the contents of a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03720">bridge.c:3720</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a1d78ba0e31a3a17b37273be121850718"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a1d78ba0e31a3a17b37273be121850718">CALLER_SAFETY_TIMEOUT_TIME</a></div><div class="ttdeci">#define CALLER_SAFETY_TIMEOUT_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00339">app_agent_pool.c:339</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a5ef8af740b139874195a394ba4abee3d"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a5ef8af740b139874195a394ba4abee3d">ast_bridge_join_hook</a></div><div class="ttdeci">int ast_bridge_join_hook(struct ast_bridge_features *features, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Unregisters a handler for a built in interval feature. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03338">bridge.c:3338</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00183">bridge_features.h:183</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86">AGENT_STATE_LOGGED_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00568">app_agent_pool.c:568</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3128b52009fb3dd764dce90ea377fce1"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a></div><div class="ttdeci">int ast_bridge_features_init(struct ast_bridge_features *features)</div><div class="ttdoc">Initialize bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03687">bridge.c:3687</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab940ba7749a2a12c3e9a356bd26fd744"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a></div><div class="ttdeci">void __ao2_cleanup(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00674">astobj2.c:674</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="channel_8h_html_a40fc421536e02d30fecaa51a255b4144"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a40fc421536e02d30fecaa51a255b4144">ast_party_connected_line_free</a></div><div class="ttdeci">void ast_party_connected_line_free(struct ast_party_connected_line *doomed)</div><div class="ttdoc">Destroy the connected line information contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02072">channel.c:2072</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00582">app_agent_pool.c:582</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00574">app_agent_pool.c:574</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a33214b7c3d67d8ea8652269fc5afb0d0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a33214b7c3d67d8ea8652269fc5afb0d0">caller_joined_bridge</a></div><div class="ttdeci">static int caller_joined_bridge(struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01847">app_agent_pool.c:1847</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a32da61f3d1a1faa6ae5211f81eb52341"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a32da61f3d1a1faa6ae5211f81eb52341">send_colp_to_agent</a></div><div class="ttdeci">static int send_colp_to_agent(struct ast_bridge_channel *bridge_channel, struct ast_party_connected_line *connected)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01818">app_agent_pool.c:1818</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3e9bdb7b62b531f001b7dcb5c39b3551"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a></div><div class="ttdeci">int ast_bridge_interval_hook(struct ast_bridge_features *features, enum ast_bridge_hook_timer_option flags, unsigned int interval, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Attach an interval hook to a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03382">bridge.c:3382</a></div></div>
<div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aab6ab498f59aece6e53aa7102c0077e2"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aab6ab498f59aece6e53aa7102c0077e2">caller_abort_agent</a></div><div class="ttdeci">static void caller_abort_agent(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01696">app_agent_pool.c:1696</a></div></div>
<div class="ttc" id="structast__party__connected__line_html"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a></div><div class="ttdoc">Connected Line/Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00457">channel.h:457</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a6c861b7f9ac3693f06669b575dc6e16b"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a6c861b7f9ac3693f06669b575dc6e16b">bridge_agent_hold_deferred_create</a></div><div class="ttdeci">static int bridge_agent_hold_deferred_create(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01419">app_agent_pool.c:1419</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5a26796fa52cc5857446eec8d16a4b718d">AST_FLAG_ZOMBIE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00988">channel.h:988</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="bridge_8h_html_a116a27b8e1e111729ee1828d4fab6b5a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a></div><div class="ttdeci">int ast_bridge_join(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, struct ast_bridge_tech_optimizations *tech_args, enum ast_bridge_join_flags flags)</div><div class="ttdoc">Join a channel to a bridge (blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01667">bridge.c:1667</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4">AST_SOFTHANGUP_ASYNCGOTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01127">channel.h:1127</a></div></div>
<div class="ttc" id="channel_8h_html_adac99999f1e55833e7f903979d67b48b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a></div><div class="ttdeci">int ast_channel_softhangup_internal_flag(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00997">channel_internal_api.c:997</a></div></div>
<div class="ttc" id="bridge__basic_8h_html_a1410fb71fa67f9ee92f15b18439b7571"><div class="ttname"><a href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a></div><div class="ttdeci">struct ast_bridge * ast_bridge_basic_new(void)</div><div class="ttdoc">Create a new basic class bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/bridge__basic_8c_source.html#l03617">bridge_basic.c:3617</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00572">app_agent_pool.c:572</a></div></div>
<div class="ttc" id="channel_8h_html_accf4e9753bd5d7316f4988e74486552b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#accf4e9753bd5d7316f4988e74486552b">ast_connected_line_copy_from_caller</a></div><div class="ttdeci">void ast_connected_line_copy_from_caller(struct ast_party_connected_line *dest, const struct ast_party_caller *src)</div><div class="ttdoc">Copy the caller information to the connected line information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08389">channel.c:8389</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a5733bc2f13f35fe0d8bde13939b50e07"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a5733bc2f13f35fe0d8bde13939b50e07">agent_bridge_channel_get_lock</a></div><div class="ttdeci">static struct ast_bridge_channel * agent_bridge_channel_get_lock(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01660">app_agent_pool.c:1660</a></div></div>
<div class="ttc" id="bridge_8h_html_ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d">AST_BRIDGE_JOIN_PASS_REFERENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00549">bridge.h:549</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a414b69d7583bb4cfc6daf5276aac6d14"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a414b69d7583bb4cfc6daf5276aac6d14">connected</a></div><div class="ttdeci">char connected</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00082">eagi_proxy.c:82</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aaa635926514981b733c8cc5afaf0def9"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aaa635926514981b733c8cc5afaf0def9">caller_safety_timeout</a></div><div class="ttdeci">static int caller_safety_timeout(struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01722">app_agent_pool.c:1722</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec6f971b8bba2801e4ab3a92917860f1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a></div><div class="ttdeci">static void agent_devstate_changed(const char *agent_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00756">app_agent_pool.c:756</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8e005c499b7e949c3f1a290e88acb71d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e005c499b7e949c3f1a290e88acb71d">&#9670;&nbsp;</a></span>agent_run()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_run </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>logged</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01520">1520</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01481">agent_logout()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00582">AGENT_STATE_LOGGING_OUT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00456">agents_cfg::agents</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00970">ast_bridge_destroy()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03720">ast_bridge_features_cleanup()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03687">ast_bridge_features_init()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01667">ast_bridge_join()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00549">AST_BRIDGE_JOIN_PASS_REFERENCE</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00431">ast_channel_hangupcause_set()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l09189">ast_channel_update_connected_line()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00459">ast_check_hangup_locked()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00641">agent_pvt::caller_bridge</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">cfg_handle</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00622">agent_pvt::dead</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00613">agent_pvt::deferred_logoff</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00638">agent_pvt::last_disconnect</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00643">agent_pvt::logged</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00625">agent_pvt::state</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00602">agent_pvt::waiting_colp</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01618">agent_after_bridge_cb()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;{</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> features;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a>(&amp;features)) {</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(logged, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;      <span class="keywordflow">goto</span> agent_run_cleanup;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;   }</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d4f/structagents__cfg.html">agents_cfg</a> *cfgs;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *cfg_new;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *cfg_old;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *holding;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *caller_bridge;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a>(logged, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      holding = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(agent_holding);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;      <span class="keywordflow">if</span> (!holding) {</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Someone destroyed the agent holding bridge.\n&quot;</span>,</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;            agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      }</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;<span class="comment">       * When the agent channel leaves the bridging system we usually</span></div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;<span class="comment">       * want to put the agent back into the holding bridge for the</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;<span class="comment">       * next caller.</span></div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a>(holding, logged, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;features, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d">AST_BRIDGE_JOIN_PASS_REFERENCE</a>);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <span class="keywordflow">if</span> (logged != agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;         <span class="comment">/* This channel is no longer the logged in agent. */</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      }</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;      <span class="keywordflow">if</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1d67f434933f43ad9deb32da61dda2b6">dead</a>) {</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;         <span class="comment">/* The agent is no longer configured. */</span></div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;      }</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;      <span class="comment">/* Update the agent&#39;s config before rejoining the holding bridge. */</span></div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;      cfgs = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;      <span class="keywordflow">if</span> (!cfgs) {</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;         <span class="comment">/* There is no agent configuration.  All agents were destroyed. */</span></div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;      }</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;      cfg_new = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(cfgs-&gt;<a class="code" href="../../dd/d4f/structagents__cfg.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>);</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfgs, -1);</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;      <span class="keywordflow">if</span> (!cfg_new) {</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;         <span class="comment">/* The agent is no longer configured. */</span></div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;      }</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      cfg_old = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a> = cfg_new;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a41ef42b3f54f9920060abbedc977fea9">last_disconnect</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;      <span class="comment">/* Clear out any caller bridge before rejoining the holding bridge. */</span></div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;      caller_bridge = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a>;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg_old, -1);</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;      <span class="keywordflow">if</span> (caller_bridge) {</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(caller_bridge, 0);</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;      }</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;      <span class="keywordflow">if</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a> == <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a></div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;         || agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#acc12f7a44f078cee9f52face3f7787f1">deferred_logoff</a></div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;         || <a class="code" href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(logged)) {</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;         <span class="comment">/* The agent was requested to logout or hungup. */</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;      }</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment">       * It is safe to access agent-&gt;waiting_colp without a lock.  It</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment">       * is only setup on agent login and not changed.</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ee3ff7bf7773329e9e20143f0ba2f69">ast_channel_update_connected_line</a>(logged, &amp;agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1e4986d38981a6836446fd6e0947bfaa">waiting_colp</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;   }</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;features);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;agent_run_cleanup:</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   <span class="keywordflow">if</span> (logged != agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;<span class="comment">       * We are no longer the agent channel because of local channel</span></div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="comment">       * optimization.</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Channel %s is no longer the agent.\n&quot;</span>,</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;         agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(logged));</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;   }</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aeaea7aa68d00de5f86fcc523d6f2c55a">agent_logout</a>(agent);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;}</div><div class="ttc" id="bridge__features_8h_html_aafc3026d777c0bf6899e93263178e102"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a></div><div class="ttdeci">void ast_bridge_features_cleanup(struct ast_bridge_features *features)</div><div class="ttdoc">Clean up the contents of a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03720">bridge.c:3720</a></div></div>
<div class="ttc" id="structagents__cfg_html"><div class="ttname"><a href="../../dd/d4f/structagents__cfg.html">agents_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00454">app_agent_pool.c:454</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="structagent__pvt_html_a2b63413544f313e27f0a2893dfa5e251"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">agent_pvt::state</a></div><div class="ttdeci">enum agent_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00625">app_agent_pool.c:625</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="channel_8h_html_ae6b4b7ba458e88fdbb2df9f39d935337"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae6b4b7ba458e88fdbb2df9f39d935337">ast_channel_hangupcause_set</a></div><div class="ttdeci">void ast_channel_hangupcause_set(struct ast_channel *chan, int value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00431">channel_internal_api.c:431</a></div></div>
<div class="ttc" id="channel_8h_html_a723ac44c92b9edb6c1a731e01edacb4a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a></div><div class="ttdeci">int ast_check_hangup_locked(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00459">channel.c:459</a></div></div>
<div class="ttc" id="structagent__pvt_html_acc12f7a44f078cee9f52face3f7787f1"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#acc12f7a44f078cee9f52face3f7787f1">agent_pvt::deferred_logoff</a></div><div class="ttdeci">unsigned int deferred_logoff</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00613">app_agent_pool.c:613</a></div></div>
<div class="ttc" id="structagents__cfg_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../dd/d4f/structagents__cfg.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents_cfg::agents</a></div><div class="ttdeci">struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00456">app_agent_pool.c:456</a></div></div>
<div class="ttc" id="channel_8h_html_a7ee3ff7bf7773329e9e20143f0ba2f69"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ee3ff7bf7773329e9e20143f0ba2f69">ast_channel_update_connected_line</a></div><div class="ttdeci">void ast_channel_update_connected_line(struct ast_channel *chan, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Indicate that the connected line information has changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l09189">channel.c:9189</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3128b52009fb3dd764dce90ea377fce1"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a></div><div class="ttdeci">int ast_bridge_features_init(struct ast_bridge_features *features)</div><div class="ttdoc">Initialize bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03687">bridge.c:3687</a></div></div>
<div class="ttc" id="structagent__pvt_html_a7d442bd00b142ff82e79c2052d69dcdb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">agent_pvt::logged</a></div><div class="ttdeci">struct ast_channel * logged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00643">app_agent_pool.c:643</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="structagent__cfg_html"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html">agent_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00348">app_agent_pool.c:348</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00582">app_agent_pool.c:582</a></div></div>
<div class="ttc" id="structagent__pvt_html_a6b2557c443982571cceb9005c5bec611"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">agent_pvt::caller_bridge</a></div><div class="ttdeci">struct ast_bridge * caller_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00641">app_agent_pool.c:641</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aeaea7aa68d00de5f86fcc523d6f2c55a"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aeaea7aa68d00de5f86fcc523d6f2c55a">agent_logout</a></div><div class="ttdeci">static void agent_logout(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01481">app_agent_pool.c:1481</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="structagent__pvt_html_a41ef42b3f54f9920060abbedc977fea9"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a41ef42b3f54f9920060abbedc977fea9">agent_pvt::last_disconnect</a></div><div class="ttdeci">struct timeval last_disconnect</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00638">app_agent_pool.c:638</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1d67f434933f43ad9deb32da61dda2b6"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1d67f434933f43ad9deb32da61dda2b6">agent_pvt::dead</a></div><div class="ttdeci">unsigned int dead</div><div class="ttdoc">TRUE if the agent is no longer configured and is being destroyed. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00622">app_agent_pool.c:622</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="bridge_8h_html_a116a27b8e1e111729ee1828d4fab6b5a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a></div><div class="ttdeci">int ast_bridge_join(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, struct ast_bridge_tech_optimizations *tech_args, enum ast_bridge_join_flags flags)</div><div class="ttdoc">Join a channel to a bridge (blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01667">bridge.c:1667</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ace59e73cd525ae17e77397b0cc7f7302"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a></div><div class="ttdeci">static corosync_cfg_handle_t cfg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00284">res_corosync.c:284</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge_8h_html_ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d">AST_BRIDGE_JOIN_PASS_REFERENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00549">bridge.h:549</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1e4986d38981a6836446fd6e0947bfaa"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1e4986d38981a6836446fd6e0947bfaa">agent_pvt::waiting_colp</a></div><div class="ttdeci">struct ast_party_connected_line waiting_colp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00602">app_agent_pool.c:602</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e0c76b6d740600bf9e322b87d04dfb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e0c76b6d740600bf9e322b87d04dfb4">&#9670;&nbsp;</a></span>agent_show_requested()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agent_show_requested </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>online_only</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02327">2327</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00690">agent_lock_logged()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00255">ast_devstate_str()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00800">ast_str_alloca</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00627">agent_pvt::devstate</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../de/d11/app__agent__pool_8c.html#afd2c9505e0edcb47e18669f60500acf0">FORMAT_HDR</a>, <a class="el" href="../../de/d11/app__agent__pool_8c.html#a4090d7655fc829efc4a37a3144759c7c">FORMAT_ROW</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::full_name</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02404">agent_handle_show_all()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02382">agent_handle_show_online()</a>.</p>
<div class="fragment"><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;{</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="preprocessor">#define FORMAT_HDR &quot;%-8s %-20s %-11s %-30s %s\n&quot;</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="preprocessor">#define FORMAT_ROW &quot;%-8s %-20s %-11s %-30s %s\n&quot;</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(512);</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> agents_total = 0;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> agents_logged_in = 0;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> agents_talking = 0;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#afd2c9505e0edcb47e18669f60500acf0">FORMAT_HDR</a>, <span class="stringliteral">&quot;Agent-ID&quot;</span>, <span class="stringliteral">&quot;Name&quot;</span>, <span class="stringliteral">&quot;State&quot;</span>, <span class="stringliteral">&quot;Channel&quot;</span>, <span class="stringliteral">&quot;Talking with&quot;</span>);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, 0);</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <span class="keywordflow">for</span> (; (agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1)) {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;      ++agents_total;</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;      logged = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a>(agent);</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <span class="keywordflow">if</span> (logged) {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *talking_with;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;         ++agents_logged_in;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;         talking_with = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(logged, <span class="stringliteral">&quot;BRIDGEPEER&quot;</span>);</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(talking_with)) {</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;            ++agents_talking;</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;            talking_with = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;         }</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;out, 0, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a4090d7655fc829efc4a37a3144759c7c">FORMAT_ROW</a>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a6d121225508f464976ccd1f571cc3ba1">full_name</a>,</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;            <a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">devstate</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(logged), talking_with);</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(logged);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;out, 0, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a4090d7655fc829efc4a37a3144759c7c">FORMAT_ROW</a>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a6d121225508f464976ccd1f571cc3ba1">full_name</a>,</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;            <a class="code" href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">devstate</a>), <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      }</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;      <span class="keywordflow">if</span> (!online_only || logged) {</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(out));</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;      }</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;   }</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\nDefined agents: %u, Logged in: %u, Talking: %u\n&quot;</span>,</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;      agents_total, agents_logged_in, agents_talking);</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="preprocessor">#undef FORMAT_HDR</span></div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;<span class="preprocessor">#undef FORMAT_ROW</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a4090d7655fc829efc4a37a3144759c7c"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a4090d7655fc829efc4a37a3144759c7c">FORMAT_ROW</a></div><div class="ttdeci">#define FORMAT_ROW</div></div>
<div class="ttc" id="structagent__cfg_html_a6d121225508f464976ccd1f571cc3ba1"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a6d121225508f464976ccd1f571cc3ba1">agent_cfg::full_name</a></div><div class="ttdeci">const ast_string_field full_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_afd2c9505e0edcb47e18669f60500acf0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#afd2c9505e0edcb47e18669f60500acf0">FORMAT_HDR</a></div><div class="ttdeci">#define FORMAT_HDR</div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1b46e6ee7b5c070d8ec3b45f5bc49a92"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">agent_pvt::devstate</a></div><div class="ttdeci">enum ast_device_state devstate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00627">app_agent_pool.c:627</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a55ac80086debb254e9d1f21d210e3705"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a55ac80086debb254e9d1f21d210e3705">agent_lock_logged</a></div><div class="ttdeci">static struct ast_channel * agent_lock_logged(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00690">app_agent_pool.c:690</a></div></div>
<div class="ttc" id="devicestate_8h_html_a6190de57ac370315e51f2c46724d5b10"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a6190de57ac370315e51f2c46724d5b10">ast_devstate_str</a></div><div class="ttdeci">const char * ast_devstate_str(enum ast_device_state devstate) attribute_pure</div><div class="ttdoc">Convert device state to text string that is easier to parse. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00255">devicestate.c:255</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a46a46dbbf30cbb25031b5276fc7e3d98"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a46a46dbbf30cbb25031b5276fc7e3d98">&#9670;&nbsp;</a></span>agent_sweep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int agent_sweep </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00889">889</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00622">agent_pvt::dead</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00616">agent_pvt::the_mark</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00905">agents_sweep()</a>.</p>
<div class="fragment"><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;{</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent = obj;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <span class="keywordtype">int</span> cmp = 0;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   <span class="keywordflow">if</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a3612e1393049830a205c9fb3857ce295">the_mark</a>) {</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a3612e1393049830a205c9fb3857ce295">the_mark</a> = 0;</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1d67f434933f43ad9deb32da61dda2b6">dead</a> = 1;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;      <span class="comment">/* Unlink dead agents immediately. */</span></div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;      cmp = <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   }</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordflow">return</span> cmp;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;}</div><div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="structagent__pvt_html_a3612e1393049830a205c9fb3857ce295"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a3612e1393049830a205c9fb3857ce295">agent_pvt::the_mark</a></div><div class="ttdeci">unsigned int the_mark</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00616">app_agent_pool.c:616</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1d67f434933f43ad9deb32da61dda2b6"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1d67f434933f43ad9deb32da61dda2b6">agent_pvt::dead</a></div><div class="ttdeci">unsigned int dead</div><div class="ttdoc">TRUE if the agent is no longer configured and is being destroyed. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00622">app_agent_pool.c:622</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad2b4b080213b6b09e799374f4529ecc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad2b4b080213b6b09e799374f4529ecc2">&#9670;&nbsp;</a></span>agents_cfg_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* agents_cfg_alloc </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00512">512</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/dfe/config__options_8h_source.html#l00182">ACO_FILES</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00405">agent_cfg_sort_cmp()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00456">agents_cfg::agents</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00492">agents_cfg_destructor()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00935">agents_post_apply_config()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00369">AO2_ALLOC_OPT_LOCK_NOLOCK</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00406">ao2_alloc_options</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01192">AO2_CONTAINER_ALLOC_OPT_DUPS_REJECT</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01358">ao2_container_alloc_rbtree</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">cfg_handle</a>, <a class="el" href="../../de/d11/app__agent__pool_8c.html#a656be8c315c7512b34037d5445b1fc05">CONFIG_INFO_STANDARD()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;{</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4f/structagents__cfg.html">agents_cfg</a> *cfg;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;   cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a>(<span class="keyword">sizeof</span>(*cfg), <a class="code" href="../../de/d11/app__agent__pool_8c.html#a3bc870eb2da8463a4fb53bf2fee5bdf4">agents_cfg_destructor</a>,</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;   cfg-&gt;<a class="code" href="../../dd/d4f/structagents__cfg.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a>,</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#afe7a6b368052cb171d371d873b7520acadaba53a115685d6a8944dd2c6a8d7bfb">AO2_CONTAINER_ALLOC_OPT_DUPS_REJECT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a81b479dda160b217188d44dffc86361f">agent_cfg_sort_cmp</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keywordflow">if</span> (!cfg-&gt;<a class="code" href="../../dd/d4f/structagents__cfg.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>) {</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1);</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      cfg = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   }</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   <span class="keywordflow">return</span> cfg;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;}</div><div class="ttc" id="app__agent__pool_8c_html_a81b479dda160b217188d44dffc86361f"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a81b479dda160b217188d44dffc86361f">agent_cfg_sort_cmp</a></div><div class="ttdeci">static int agent_cfg_sort_cmp(const void *obj_left, const void *obj_right, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00405">app_agent_pool.c:405</a></div></div>
<div class="ttc" id="structagents__cfg_html"><div class="ttname"><a href="../../dd/d4f/structagents__cfg.html">agents_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00454">app_agent_pool.c:454</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a23b60f2636bcfbc4dfeea6cc21bf847b">AO2_ALLOC_OPT_LOCK_NOLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00369">astobj2.h:369</a></div></div>
<div class="ttc" id="structagents__cfg_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../dd/d4f/structagents__cfg.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents_cfg::agents</a></div><div class="ttdeci">struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00456">app_agent_pool.c:456</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab3c44e28d661616129b7819069effe61"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab3c44e28d661616129b7819069effe61">ao2_alloc_options</a></div><div class="ttdeci">#define ao2_alloc_options(data_size, destructor_fn, options)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00406">astobj2.h:406</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a3bc870eb2da8463a4fb53bf2fee5bdf4"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a3bc870eb2da8463a4fb53bf2fee5bdf4">agents_cfg_destructor</a></div><div class="ttdeci">static void agents_cfg_destructor(void *vdoomed)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00492">app_agent_pool.c:492</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9657c4f40f012fc1d426c3c94b3d32c0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a></div><div class="ttdeci">#define ao2_container_alloc_rbtree(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01358">astobj2.h:1358</a></div></div>
<div class="ttc" id="astobj2_8h_html_afe7a6b368052cb171d371d873b7520acadaba53a115685d6a8944dd2c6a8d7bfb"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#afe7a6b368052cb171d371d873b7520acadaba53a115685d6a8944dd2c6a8d7bfb">AO2_CONTAINER_ALLOC_OPT_DUPS_REJECT</a></div><div class="ttdoc">Reject objects with duplicate keys in container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01192">astobj2.h:1192</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3bc870eb2da8463a4fb53bf2fee5bdf4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3bc870eb2da8463a4fb53bf2fee5bdf4">&#9670;&nbsp;</a></span>agents_cfg_destructor()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agents_cfg_destructor </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>vdoomed</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00492">492</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00456">agents_cfg::agents</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00512">agents_cfg_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;{</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4f/structagents__cfg.html">agents_cfg</a> *doomed = vdoomed;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(doomed-&gt;<a class="code" href="../../dd/d4f/structagents__cfg.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>);</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;   doomed-&gt;<a class="code" href="../../dd/d4f/structagents__cfg.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;}</div><div class="ttc" id="structagents__cfg_html"><div class="ttname"><a href="../../dd/d4f/structagents__cfg.html">agents_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00454">app_agent_pool.c:454</a></div></div>
<div class="ttc" id="structagents__cfg_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../dd/d4f/structagents__cfg.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents_cfg::agents</a></div><div class="ttdeci">struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00456">app_agent_pool.c:456</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ada8114db41c738d45b72e605ebd7ac7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada8114db41c738d45b72e605ebd7ac7f">&#9670;&nbsp;</a></span>agents_mark()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agents_mark </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00884">884</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00874">agent_mark()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00935">agents_post_apply_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;{</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, 0, <a class="code" href="../../de/d11/app__agent__pool_8c.html#ad7efec5e491195982d97dbb426026cfc">agent_mark</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ad7efec5e491195982d97dbb426026cfc"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ad7efec5e491195982d97dbb426026cfc">agent_mark</a></div><div class="ttdeci">static int agent_mark(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00874">app_agent_pool.c:874</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acda8801e5f7029b4afec1a19ecae16b2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acda8801e5f7029b4afec1a19ecae16b2">&#9670;&nbsp;</a></span>agents_post_apply_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agents_post_apply_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00935">935</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00756">agent_devstate_changed()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00784">agent_pvt_new()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00884">agents_mark()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00905">agents_sweep()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01549">ao2_link</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">cfg_handle</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01155">OBJ_KEY</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00512">agents_cfg_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;{</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *cfg;</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d4f/structagents__cfg.html">agents_cfg</a> *, cfgs, <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(cfgs != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ada8114db41c738d45b72e605ebd7ac7f">agents_mark</a>();</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cfgs-&gt;agents, 0);</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keywordflow">for</span> (; (cfg = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, -1)) {</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *, agent, <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, cfg-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">username</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a>), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;      <span class="keywordflow">if</span> (agent) {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;         <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;         agent-&gt;the_mark = 0;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;         <span class="keywordflow">if</span> (!agent-&gt;logged) {</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a> *cfg_old;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;            <span class="comment">/* Replace the config of agents not logged in. */</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;            cfg_old = agent-&gt;cfg;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cfg, +1);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;            agent-&gt;cfg = cfg;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cfg_old);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;         }</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;         <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      }</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      agent = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ab0c3d04727ae30c5deac61abe52b5fdd">agent_pvt_new</a>(cfg);</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      }</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, agent);</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Created.\n&quot;</span>, agent-&gt;username);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a>(agent-&gt;username);</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae1a2f2b62c60544be70fc0cff132bdcf">agents_sweep</a>();</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;}</div><div class="ttc" id="structagent__cfg_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#a5804ef809b93820d3437a86e08126bd8">agent_cfg::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00365">app_agent_pool.c:365</a></div></div>
<div class="ttc" id="structagents__cfg_html"><div class="ttname"><a href="../../dd/d4f/structagents__cfg.html">agents_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00454">app_agent_pool.c:454</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="astobj2_8h_html_a22f40c733a085f259af94e864ebaa09a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a22f40c733a085f259af94e864ebaa09a">OBJ_KEY</a></div><div class="ttdeci">#define OBJ_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01155">astobj2.h:1155</a></div></div>
<div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="structagent__cfg_html"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html">agent_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00348">app_agent_pool.c:348</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ace59e73cd525ae17e77397b0cc7f7302"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a></div><div class="ttdeci">static corosync_cfg_handle_t cfg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00284">res_corosync.c:284</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae1a2f2b62c60544be70fc0cff132bdcf"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae1a2f2b62c60544be70fc0cff132bdcf">agents_sweep</a></div><div class="ttdeci">static void agents_sweep(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00905">app_agent_pool.c:905</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ab0c3d04727ae30c5deac61abe52b5fdd"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ab0c3d04727ae30c5deac61abe52b5fdd">agent_pvt_new</a></div><div class="ttdeci">static struct agent_pvt * agent_pvt_new(struct agent_cfg *cfg)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00784">app_agent_pool.c:784</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ada8114db41c738d45b72e605ebd7ac7f"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ada8114db41c738d45b72e605ebd7ac7f">agents_mark</a></div><div class="ttdeci">static void agents_mark(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00884">app_agent_pool.c:884</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec6f971b8bba2801e4ab3a92917860f1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a></div><div class="ttdeci">static void agent_devstate_changed(const char *agent_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00756">app_agent_pool.c:756</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae1a2f2b62c60544be70fc0cff132bdcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1a2f2b62c60544be70fc0cff132bdcf">&#9670;&nbsp;</a></span>agents_sweep()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void agents_sweep </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00905">905</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00889">agent_sweep()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01716">ao2_callback</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02476">ast_softhangup()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01149">AST_SOFTHANGUP_EXPLICIT</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00643">agent_pvt::logged</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01053">OBJ_MULTIPLE</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01043">OBJ_UNLINK</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00935">agents_post_apply_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;{</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> *iter;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *logged;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a46a46dbbf30cbb25031b5276fc7e3d98">agent_sweep</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <span class="keywordflow">if</span> (!iter) {</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   }</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <span class="keywordflow">for</span> (; (agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(iter)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1)) {</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;      <span class="keywordflow">if</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>) {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;         logged = <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>);</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;         logged = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;      }</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;      <span class="keywordflow">if</span> (!logged) {</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>,</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;         <span class="stringliteral">&quot;Forced logoff of agent %s(%s).  Agent no longer configured.\n&quot;</span>,</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;         agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(logged));</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(logged, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a>);</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(logged);</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;   }</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(iter);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="structagent__pvt_html_a7d442bd00b142ff82e79c2052d69dcdb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">agent_pvt::logged</a></div><div class="ttdeci">struct ast_channel * logged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00643">app_agent_pool.c:643</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01149">channel.h:1149</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a46a46dbbf30cbb25031b5276fc7e3d98"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a46a46dbbf30cbb25031b5276fc7e3d98">agent_sweep</a></div><div class="ttdeci">static int agent_sweep(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00889">app_agent_pool.c:889</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2b53789591de3558859d20a0800a9eda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2b53789591de3558859d20a0800a9eda">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00975">agent_logoff_request()</a>.</p>

</div>
</div>
<a id="a6cabea39e02dfbba5213d98b312276e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6cabea39e02dfbba5213d98b312276e8">&#9670;&nbsp;</a></span>AO2_GLOBAL_OBJ_STATIC() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static AO2_GLOBAL_OBJ_STATIC </td>
          <td>(</td>
          <td class="paramtype">agent_holding&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Agent holding bridge instance holder. </p>

</div>
</div>
<a id="a4fb0aca9bbcdb9709fa52a70aded6cae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fb0aca9bbcdb9709fa52a70aded6cae">&#9670;&nbsp;</a></span>AST_MODULE_SELF_SYM()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/df5/structast__module.html">ast_module</a>* AST_MODULE_SELF_SYM </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02716">2716</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="af5a8115993ab0d49f73d77a11718a869"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5a8115993ab0d49f73d77a11718a869">&#9670;&nbsp;</a></span>bridge_agent_hold_ack()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_agent_hold_ack </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>hook_pvt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01085">1085</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00576">AGENT_STATE_CALL_WAIT_ACK</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00625">agent_pvt::state</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;{</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent = hook_pvt;</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <span class="keywordflow">switch</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a>) {</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a>:</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      <span class="comment">/* Connect to caller now. */</span></div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Acked call.\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#ad828f7da4ade54724a517f3e85f46130">agent_connect_caller</a>(bridge_channel, agent);<span class="comment">/* Will unlock agent. */</span></div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;   }</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;}</div><div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="structagent__pvt_html_a2b63413544f313e27f0a2893dfa5e251"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">agent_pvt::state</a></div><div class="ttdeci">enum agent_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00625">app_agent_pool.c:625</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ad828f7da4ade54724a517f3e85f46130"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ad828f7da4ade54724a517f3e85f46130">agent_connect_caller</a></div><div class="ttdeci">static void agent_connect_caller(struct ast_bridge_channel *bridge_channel, struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01034">app_agent_pool.c:1034</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00576">app_agent_pool.c:576</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c861b7f9ac3693f06669b575dc6e16b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c861b7f9ac3693f06669b575dc6e16b">&#9670;&nbsp;</a></span>bridge_agent_hold_deferred_create()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_agent_hold_deferred_create </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01419">1419</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01003">agent_holding_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00925">ao2_global_obj_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00908">ao2_global_obj_replace_unref</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01396">bridge_agent_hold_new()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;{</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, holding, <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(agent_holding), <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;   <span class="keywordflow">if</span> (!holding) {</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../de/d11/app__agent__pool_8c.html#adc4d1d983728ada524c84213c2536921">agent_holding_lock</a>);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;      holding = <a class="code" href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a>(agent_holding);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      <span class="keywordflow">if</span> (!holding) {</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;         holding = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a6ac128d97cc9176ba058342d94b90afb">bridge_agent_hold_new</a>();</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a>(agent_holding, holding);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      }</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../de/d11/app__agent__pool_8c.html#adc4d1d983728ada524c84213c2536921">agent_holding_lock</a>);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;      <span class="keywordflow">if</span> (!holding) {</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not create agent holding bridge.\n&quot;</span>);</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;      }</div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   }</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;}</div><div class="ttc" id="astobj2_8h_html_a86d8d6c3c8866ed0a60121da055cd225"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a86d8d6c3c8866ed0a60121da055cd225">ao2_global_obj_ref</a></div><div class="ttdeci">#define ao2_global_obj_ref(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00925">astobj2.h:925</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_adc4d1d983728ada524c84213c2536921"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#adc4d1d983728ada524c84213c2536921">agent_holding_lock</a></div><div class="ttdeci">static ast_mutex_t agent_holding_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01003">app_agent_pool.c:1003</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="astobj2_8h_html_a3a11e1a1d3e99bed3ea0a7c57a3880d7"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a3a11e1a1d3e99bed3ea0a7c57a3880d7">ao2_global_obj_replace_unref</a></div><div class="ttdeci">#define ao2_global_obj_replace_unref(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00908">astobj2.h:908</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a6ac128d97cc9176ba058342d94b90afb"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a6ac128d97cc9176ba058342d94b90afb">bridge_agent_hold_new</a></div><div class="ttdeci">static struct ast_bridge * bridge_agent_hold_new(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01396">app_agent_pool.c:1396</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab30350ac6df6da6e60c63534b3f2e6f2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab30350ac6df6da6e60c63534b3f2e6f2">&#9670;&nbsp;</a></span>bridge_agent_hold_dissolving()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_agent_hold_dissolving </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The bridge is being dissolved. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">self</td><td>Bridge to operate upon.</td></tr>
  </table>
  </dd>
</dl>
<p>The bridge is being dissolved. Remove any external references to the bridge so it can be destroyed.</p>
<dl class="section note"><dt>Note</dt><dd>On entry, self must NOT be locked.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01388">1388</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00949">ast_bridge_base_v_table</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00271">ast_bridge_methods::dissolving</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01409">bridge_init_agent_hold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;{</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(agent_holding);</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a5a2fef16c6520d265d7f81002eb96ee7">ast_bridge_base_v_table</a>.<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a5b1a8e69c6546121e0b4dcec16be3373">dissolving</a>(<span class="keyword">self</span>);</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;}</div><div class="ttc" id="structast__bridge__methods_html_a5b1a8e69c6546121e0b4dcec16be3373"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a5b1a8e69c6546121e0b4dcec16be3373">ast_bridge_methods::dissolving</a></div><div class="ttdeci">ast_bridge_dissolving_fn dissolving</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00271">bridge.h:271</a></div></div>
<div class="ttc" id="bridge_8h_html_a5a2fef16c6520d265d7f81002eb96ee7"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a5a2fef16c6520d265d7f81002eb96ee7">ast_bridge_base_v_table</a></div><div class="ttdeci">struct ast_bridge_methods ast_bridge_base_v_table</div><div class="ttdoc">Bridge base class virtual method table. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00949">bridge.c:949</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1578ec878aa2014f6550270ad1468f94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1578ec878aa2014f6550270ad1468f94">&#9670;&nbsp;</a></span>bridge_agent_hold_heartbeat()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_agent_hold_heartbeat </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>hook_pvt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">1103</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00636">agent_pvt::ack_time</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01618">agent_after_bridge_cb()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01633">agent_after_bridge_cb_failed()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00756">agent_devstate_changed()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00589">AGENT_FLAG_AUTO_LOGOFF</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00590">AGENT_FLAG_WRAPUP_TIME</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00576">AGENT_STATE_CALL_WAIT_ACK</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00580">AGENT_STATE_CALL_WRAPUP</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00582">AGENT_STATE_LOGGING_OUT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00570">AGENT_STATE_PROBATION_WAIT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00572">AGENT_STATE_READY_FOR_CALL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00054">AST_DEVICE_NOT_INUSE</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00372">agent_cfg::auto_logoff</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00645">agent_pvt::cfg</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00613">agent_pvt::deferred_logoff</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00627">agent_pvt::devstate</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00638">agent_pvt::last_disconnect</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00342">LOGIN_WAIT_TIMEOUT_TIME</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00606">agent_pvt::override_auto_logoff</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00608">agent_pvt::override_wrapup_time</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00632">agent_pvt::probation_start</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00625">agent_pvt::state</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00378">agent_cfg::wrapup_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;{</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent = hook_pvt;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <span class="keywordtype">int</span> probation_timedout = 0;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;   <span class="keywordtype">int</span> ack_timedout = 0;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   <span class="keywordtype">int</span> wrapup_timedout = 0;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d4d/structagent__pvt.html#acc12f7a44f078cee9f52face3f7787f1">deferred_logoff</a>;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> wrapup_time;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> auto_logoff;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   deferred_logoff = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#acc12f7a44f078cee9f52face3f7787f1">deferred_logoff</a>;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;   <span class="keywordflow">if</span> (deferred_logoff) {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a>;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <span class="keywordflow">switch</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a>) {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0">AGENT_STATE_PROBATION_WAIT</a>:</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      probation_timedout =</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;         <a class="code" href="../../de/d11/app__agent__pool_8c.html#ab9353a3e165a7fd78b69b27e36d49e8b">LOGIN_WAIT_TIMEOUT_TIME</a> &lt;= (time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a38c96ef0675bb4c5e4a4bbae53b341cb">probation_start</a>);</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;      <span class="keywordflow">if</span> (probation_timedout) {</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;         <span class="comment">/* Now ready for a caller. */</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;         agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a>;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;         agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">devstate</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;      }</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a>:</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;      <span class="comment">/* Check ack call time. */</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      auto_logoff = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#aa068f603d067b1a7c92db68e5b27256b">auto_logoff</a>;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(agent, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827">AGENT_FLAG_AUTO_LOGOFF</a>)) {</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;         auto_logoff = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a0db93def45062b0b68b3cfc92828056e">override_auto_logoff</a>;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;      }</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;      <span class="keywordflow">if</span> (auto_logoff) {</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;         auto_logoff *= 1000;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;         ack_timedout = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5068662d1a4020ad70203c75f620c74d">ack_time</a>) &gt; auto_logoff;</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;         <span class="keywordflow">if</span> (ack_timedout) {</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;            agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a>;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;         }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;      }</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621">AGENT_STATE_CALL_WRAPUP</a>:</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      <span class="comment">/* Check wrapup time. */</span></div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      wrapup_time = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">cfg</a>-&gt;<a class="code" href="../../d4/d01/structagent__cfg.html#ad0596714447eb76c79d0291db700cbcd">wrapup_time</a>;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(agent, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832">AGENT_FLAG_WRAPUP_TIME</a>)) {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;         wrapup_time = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#aafe46fa9fde27806c85eea0f7e012b98">override_wrapup_time</a>;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      wrapup_timedout = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a41ef42b3f54f9920060abbedc977fea9">last_disconnect</a>) &gt; wrapup_time;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      <span class="keywordflow">if</span> (wrapup_timedout) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;         agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a>;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;         agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">devstate</a> = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      }</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   }</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <span class="keywordflow">if</span> (deferred_logoff) {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Deferred logoff.\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>,</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;         <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (probation_timedout) {</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Login complete.\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ack_timedout) {</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Ack call timeout.\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>,</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;         <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (wrapup_timedout) {</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Wrapup timeout. Ready for new call.\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   }</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;}</div><div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a739a20e5cddf5896cdc77208b6f6b827">AGENT_FLAG_AUTO_LOGOFF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00589">app_agent_pool.c:589</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5068662d1a4020ad70203c75f620c74d"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5068662d1a4020ad70203c75f620c74d">agent_pvt::ack_time</a></div><div class="ttdeci">struct timeval ack_time</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00636">app_agent_pool.c:636</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="structagent__pvt_html_a2b63413544f313e27f0a2893dfa5e251"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">agent_pvt::state</a></div><div class="ttdeci">enum agent_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00625">app_agent_pool.c:625</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621">AGENT_STATE_CALL_WRAPUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00580">app_agent_pool.c:580</a></div></div>
<div class="ttc" id="structagent__pvt_html_acc12f7a44f078cee9f52face3f7787f1"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#acc12f7a44f078cee9f52face3f7787f1">agent_pvt::deferred_logoff</a></div><div class="ttdeci">unsigned int deferred_logoff</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00613">app_agent_pool.c:613</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832">AGENT_FLAG_WRAPUP_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00590">app_agent_pool.c:590</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ad1708425f2412aa1cd0604a8e4a990d2">AGENT_STATE_LOGGING_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00582">app_agent_pool.c:582</a></div></div>
<div class="ttc" id="structagent__pvt_html_a1b46e6ee7b5c070d8ec3b45f5bc49a92"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a1b46e6ee7b5c070d8ec3b45f5bc49a92">agent_pvt::devstate</a></div><div class="ttdeci">enum ast_device_state devstate</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00627">app_agent_pool.c:627</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0">AGENT_STATE_PROBATION_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00570">app_agent_pool.c:570</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="structagent__cfg_html_aa068f603d067b1a7c92db68e5b27256b"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#aa068f603d067b1a7c92db68e5b27256b">agent_cfg::auto_logoff</a></div><div class="ttdeci">unsigned int auto_logoff</div><div class="ttdoc">Number of seconds for agent to ack a call before being logged off. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00372">app_agent_pool.c:372</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="structagent__pvt_html_adf899cd6660bd07520ca4bc6f04211ee"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#adf899cd6660bd07520ca4bc6f04211ee">agent_pvt::cfg</a></div><div class="ttdeci">struct agent_cfg * cfg</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00645">app_agent_pool.c:645</a></div></div>
<div class="ttc" id="structagent__cfg_html_ad0596714447eb76c79d0291db700cbcd"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html#ad0596714447eb76c79d0291db700cbcd">agent_cfg::wrapup_time</a></div><div class="ttdeci">unsigned int wrapup_time</div><div class="ttdoc">Time after a call in ms before the agent can get a new call. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00378">app_agent_pool.c:378</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="structagent__pvt_html_a41ef42b3f54f9920060abbedc977fea9"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a41ef42b3f54f9920060abbedc977fea9">agent_pvt::last_disconnect</a></div><div class="ttdeci">struct timeval last_disconnect</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00638">app_agent_pool.c:638</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="structagent__pvt_html_aafe46fa9fde27806c85eea0f7e012b98"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#aafe46fa9fde27806c85eea0f7e012b98">agent_pvt::override_wrapup_time</a></div><div class="ttdeci">unsigned int override_wrapup_time</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00608">app_agent_pool.c:608</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00572">app_agent_pool.c:572</a></div></div>
<div class="ttc" id="structagent__pvt_html_a0db93def45062b0b68b3cfc92828056e"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a0db93def45062b0b68b3cfc92828056e">agent_pvt::override_auto_logoff</a></div><div class="ttdeci">unsigned int override_auto_logoff</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00606">app_agent_pool.c:606</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ab9353a3e165a7fd78b69b27e36d49e8b"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ab9353a3e165a7fd78b69b27e36d49e8b">LOGIN_WAIT_TIMEOUT_TIME</a></div><div class="ttdeci">#define LOGIN_WAIT_TIMEOUT_TIME</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00342">app_agent_pool.c:342</a></div></div>
<div class="ttc" id="structagent__pvt_html_a38c96ef0675bb4c5e4a4bbae53b341cb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a38c96ef0675bb4c5e4a4bbae53b341cb">agent_pvt::probation_start</a></div><div class="ttdeci">time_t probation_start</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00632">app_agent_pool.c:632</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00576">app_agent_pool.c:576</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec6f971b8bba2801e4ab3a92917860f1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a></div><div class="ttdeci">static void agent_devstate_changed(const char *agent_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00756">app_agent_pool.c:756</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6ac128d97cc9176ba058342d94b90afb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ac128d97cc9176ba058342d94b90afb">&#9670;&nbsp;</a></span>bridge_agent_hold_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a>* bridge_agent_hold_new </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01396">1396</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/d56/bridge_8h_source.html#l00086">AST_BRIDGE_CAPABILITY_HOLDING</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00043">AST_BRIDGE_FLAG_MERGE_INHIBIT_FROM</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00045">AST_BRIDGE_FLAG_MERGE_INHIBIT_TO</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00047">AST_BRIDGE_FLAG_SWAP_INHIBIT_FROM</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00053">AST_BRIDGE_FLAG_TRANSFER_PROHIBITED</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01394">bridge_agent_hold_v_table</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00724">bridge_alloc()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00760">bridge_base_init()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00709">bridge_register()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01419">bridge_agent_hold_deferred_create()</a>.</p>
<div class="fragment"><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;{</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   bridge = <a class="code" href="../../d5/dde/bridge__internal_8h.html#adf0e64783980f762008ac238f2dbe715">bridge_alloc</a>(<span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a>), &amp;<a class="code" href="../../de/d11/app__agent__pool_8c.html#a5ec2310ede2b9b46427e10e8e0cb43e6">bridge_agent_hold_v_table</a>);</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;   bridge = <a class="code" href="../../d5/dde/bridge__internal_8h.html#a38c501242153bbe13d0eda31220637b8">bridge_base_init</a>(bridge, <a class="code" href="../../d4/d56/bridge_8h.html#a815c9b3e933dfd4b8f523cf55caa5bbfaff2606e446a3b7e22fb3785a06110554">AST_BRIDGE_CAPABILITY_HOLDING</a>,</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a8349083856559d62c42c385e3e47f12b">AST_BRIDGE_FLAG_MERGE_INHIBIT_TO</a> | <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444addba5f50cfec4a78d22c0479fbd5ac77">AST_BRIDGE_FLAG_MERGE_INHIBIT_FROM</a></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;         | <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a2000e175bb94bcefb4f72a8e28871d9d">AST_BRIDGE_FLAG_SWAP_INHIBIT_FROM</a> | <a class="code" href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a7a4b299b4cb4bf7c644235d708847fc3">AST_BRIDGE_FLAG_TRANSFER_PROHIBITED</a>,</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;      <span class="stringliteral">&quot;AgentPool&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   bridge = <a class="code" href="../../d5/dde/bridge__internal_8h.html#a8690315fd0d12e16671f9d22eacfa8f0">bridge_register</a>(bridge);</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   <span class="keywordflow">return</span> bridge;</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;}</div><div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444a8349083856559d62c42c385e3e47f12b"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a8349083856559d62c42c385e3e47f12b">AST_BRIDGE_FLAG_MERGE_INHIBIT_TO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00045">bridge_features.h:45</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_a8690315fd0d12e16671f9d22eacfa8f0"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#a8690315fd0d12e16671f9d22eacfa8f0">bridge_register</a></div><div class="ttdeci">struct ast_bridge * bridge_register(struct ast_bridge *bridge)</div><div class="ttdoc">Register the new bridge with the system. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00709">bridge.c:709</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge_8h_html_a815c9b3e933dfd4b8f523cf55caa5bbfaff2606e446a3b7e22fb3785a06110554"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a815c9b3e933dfd4b8f523cf55caa5bbfaff2606e446a3b7e22fb3785a06110554">AST_BRIDGE_CAPABILITY_HOLDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00086">bridge.h:86</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444addba5f50cfec4a78d22c0479fbd5ac77"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444addba5f50cfec4a78d22c0479fbd5ac77">AST_BRIDGE_FLAG_MERGE_INHIBIT_FROM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00043">bridge_features.h:43</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444a7a4b299b4cb4bf7c644235d708847fc3"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a7a4b299b4cb4bf7c644235d708847fc3">AST_BRIDGE_FLAG_TRANSFER_PROHIBITED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00053">bridge_features.h:53</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_adf0e64783980f762008ac238f2dbe715"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#adf0e64783980f762008ac238f2dbe715">bridge_alloc</a></div><div class="ttdeci">struct ast_bridge * bridge_alloc(size_t size, const struct ast_bridge_methods *v_table)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00724">bridge.c:724</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_a38c501242153bbe13d0eda31220637b8"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#a38c501242153bbe13d0eda31220637b8">bridge_base_init</a></div><div class="ttdeci">struct ast_bridge * bridge_base_init(struct ast_bridge *self, uint32_t capabilities, unsigned int flags, const char *creator, const char *name, const char *id)</div><div class="ttdoc">Initialize the base class of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00760">bridge.c:760</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a65c2644d2eadb31bcec0aaeb41cb3444a2000e175bb94bcefb4f72a8e28871d9d"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a65c2644d2eadb31bcec0aaeb41cb3444a2000e175bb94bcefb4f72a8e28871d9d">AST_BRIDGE_FLAG_SWAP_INHIBIT_FROM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00047">bridge_features.h:47</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a5ec2310ede2b9b46427e10e8e0cb43e6"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a5ec2310ede2b9b46427e10e8e0cb43e6">bridge_agent_hold_v_table</a></div><div class="ttdeci">static struct ast_bridge_methods bridge_agent_hold_v_table</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01394">app_agent_pool.c:1394</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae637f8fbe936d377d08099c192d5414f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae637f8fbe936d377d08099c192d5414f">&#9670;&nbsp;</a></span>bridge_agent_hold_pull()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_agent_hold_pull </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01369">1369</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d95/bridge_8c_source.html#l00949">ast_bridge_base_v_table</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00336">ast_channel_remove_bridge_role()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00275">ast_bridge_methods::pull</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01409">bridge_init_agent_hold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;{</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;   <a class="code" href="../../dd/dff/bridge__roles_8h.html#a7dce43ab7e058fda7576097ab7068ae2">ast_channel_remove_bridge_role</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;holding_participant&quot;</span>);</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a5a2fef16c6520d265d7f81002eb96ee7">ast_bridge_base_v_table</a>.<a class="code" href="../../d2/dd3/structast__bridge__methods.html#adcfc7ef2b1ee5305158a584970ddea65">pull</a>(<span class="keyword">self</span>, bridge_channel);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;}</div><div class="ttc" id="bridge__roles_8h_html_a7dce43ab7e058fda7576097ab7068ae2"><div class="ttname"><a href="../../dd/dff/bridge__roles_8h.html#a7dce43ab7e058fda7576097ab7068ae2">ast_channel_remove_bridge_role</a></div><div class="ttdeci">void ast_channel_remove_bridge_role(struct ast_channel *chan, const char *role_name)</div><div class="ttdoc">Removes a bridge role from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00336">bridge_roles.c:336</a></div></div>
<div class="ttc" id="bridge_8h_html_a5a2fef16c6520d265d7f81002eb96ee7"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a5a2fef16c6520d265d7f81002eb96ee7">ast_bridge_base_v_table</a></div><div class="ttdeci">struct ast_bridge_methods ast_bridge_base_v_table</div><div class="ttdoc">Bridge base class virtual method table. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00949">bridge.c:949</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_adcfc7ef2b1ee5305158a584970ddea65"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#adcfc7ef2b1ee5305158a584970ddea65">ast_bridge_methods::pull</a></div><div class="ttdeci">ast_bridge_pull_channel_fn pull</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00275">bridge.h:275</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a61441e0cbefa5859ff1953c2248eeef3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61441e0cbefa5859ff1953c2248eeef3">&#9670;&nbsp;</a></span>bridge_agent_hold_push()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int bridge_agent_hold_push </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>swap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000001">Todo:</a></b></dt><dd>XXX the login probation time should be only if it is needed.</dd></dl>
<p>Need to determine if there are any local channels that can optimize and wait until they actually do before leaving the AGENT_STATE_PROBATION_WAIT state. For now, the blind timer of LOGIN_WAIT_TIMEOUT_TIME will do.</p>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">1196</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00674">__ao2_cleanup()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00756">agent_devstate_changed()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00587">AGENT_FLAG_ACK_CALL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00588">AGENT_FLAG_DTMF_ACCEPT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00590">AGENT_FLAG_WRAPUP_TIME</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00574">AGENT_STATE_CALL_PRESENT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00576">AGENT_STATE_CALL_WAIT_ACK</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00580">AGENT_STATE_CALL_WRAPUP</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00568">AGENT_STATE_LOGGED_OUT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00578">AGENT_STATE_ON_CALL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00570">AGENT_STATE_PROBATION_WAIT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00572">AGENT_STATE_READY_FOR_CALL</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00949">ast_bridge_base_v_table</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03245">ast_bridge_dtmf_hook()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00183">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03382">ast_bridge_interval_hook()</a>, <a class="el" href="../../df/db6/bridge__after_8c_source.html#l00259">ast_bridge_set_after_callback()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00317">ast_channel_add_bridge_role()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00336">ast_channel_remove_bridge_role()</a>, <a class="el" href="../../dd/d13/bridge__roles_8c_source.html#l00379">ast_channel_set_bridge_role_option()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/da2/devicestate_8h_source.html#l00054">AST_DEVICE_NOT_INUSE</a>, <a class="el" href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00231">AST_FEATURE_MAX_LEN</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01085">bridge_agent_hold_ack()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">bridge_agent_hold_heartbeat()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::dtmf_accept</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00273">ast_bridge_methods::push</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00378">agent_cfg::wrapup_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01409">bridge_init_agent_hold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;{</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> wrapup_time;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;   <span class="keywordtype">char</span> dtmf[<a class="code" href="../../d0/daa/include_2asterisk_2features__config_8h.html#a57cae4c5040ce0791d0b4798193fc47f">AST_FEATURE_MAX_LEN</a>];</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *moh_class;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *, agent, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   chan = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, swap ? swap-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a> : chan, 0);</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;      <span class="comment">/* Could not find the agent. */</span></div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   }</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   <span class="comment">/* Setup agent entertainment */</span></div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   moh_class = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(agent-&gt;cfg-&gt;moh);</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;   res |= <a class="code" href="../../dd/dff/bridge__roles_8h.html#a8511ad15a10f0b6269094ad307ba17a2">ast_channel_add_bridge_role</a>(chan, <span class="stringliteral">&quot;holding_participant&quot;</span>);</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   res |= <a class="code" href="../../dd/dff/bridge__roles_8h.html#a3c1bc5238aea4e2d19c9894c1b68a457">ast_channel_set_bridge_role_option</a>(chan, <span class="stringliteral">&quot;holding_participant&quot;</span>, <span class="stringliteral">&quot;idle_mode&quot;</span>, <span class="stringliteral">&quot;musiconhold&quot;</span>);</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   res |= <a class="code" href="../../dd/dff/bridge__roles_8h.html#a3c1bc5238aea4e2d19c9894c1b68a457">ast_channel_set_bridge_role_option</a>(chan, <span class="stringliteral">&quot;holding_participant&quot;</span>, <span class="stringliteral">&quot;moh_class&quot;</span>, moh_class);</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   <span class="comment">/* Add DTMF acknowledge hook. */</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   dtmf[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(agent, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd">AGENT_FLAG_ACK_CALL</a>)</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      ? agent-&gt;override_ack_call : agent-&gt;cfg-&gt;ack_call) {</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *dtmf_accept;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;      dtmf_accept = <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(agent, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93">AGENT_FLAG_DTMF_ACCEPT</a>)</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;         ? agent-&gt;override_dtmf_accept : agent-&gt;cfg-&gt;dtmf_accept;</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dtmf, dtmf_accept, <span class="keyword">sizeof</span>(dtmf));</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   }</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(dtmf)) {</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, +1);</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a48ebc85ae4e4a203014711dc3a492ac5">ast_bridge_dtmf_hook</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>, dtmf, <a class="code" href="../../de/d11/app__agent__pool_8c.html#af5a8115993ab0d49f73d77a11718a869">bridge_agent_hold_ack</a>,</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;         agent, <a class="code" href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>)) {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;         res = -1;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      }</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   <span class="comment">/* Add heartbeat interval hook. */</span></div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, +1);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>, 0, 1000,</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#a1578ec878aa2014f6550270ad1468f94">bridge_agent_hold_heartbeat</a>, agent, <a class="code" href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a>, <a class="code" href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a>)) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      res = -1;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   res |= <a class="code" href="../../d4/d56/bridge_8h.html#a5a2fef16c6520d265d7f81002eb96ee7">ast_bridge_base_v_table</a>.<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a60b76bf280f288b3ef3f1facf873b104">push</a>(<span class="keyword">self</span>, bridge_channel, swap);</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;      <a class="code" href="../../dd/dff/bridge__roles_8h.html#a7dce43ab7e058fda7576097ab7068ae2">ast_channel_remove_bridge_role</a>(chan, <span class="stringliteral">&quot;holding_participant&quot;</span>);</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   <span class="keywordflow">if</span> (swap) {</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      res = <a class="code" href="../../d8/d85/bridge__after_8h.html#a866e05c6b083030e9757cfb37814e671">ast_bridge_set_after_callback</a>(chan, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a8f0089dcfc5a0c38a72eaa0aeb3014e0">agent_after_bridge_cb</a>,</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;         <a class="code" href="../../de/d11/app__agent__pool_8c.html#a99d2d56a1bc356d880b7dfa6921cf32f">agent_after_bridge_cb_failed</a>, chan);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;         <a class="code" href="../../dd/dff/bridge__roles_8h.html#a7dce43ab7e058fda7576097ab7068ae2">ast_channel_remove_bridge_role</a>(chan, <span class="stringliteral">&quot;holding_participant&quot;</span>);</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;      }</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(agent-&gt;logged);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;      agent-&gt;logged = <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(chan);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="comment">       * Kick the channel out so it can come back in fully controlled.</span></div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="comment">       * Otherwise, the after bridge callback will linger and the</span></div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;<span class="comment">       * agent will have some slightly different behavior in corner</span></div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<span class="comment">       * cases.</span></div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>,</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;         <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   <span class="keywordflow">switch</span> (agent-&gt;state) {</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86">AGENT_STATE_LOGGED_OUT</a>:<span class="comment"></span></div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<span class="comment">      /*!</span></div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;<span class="comment">       * \todo XXX the login probation time should be only if it is needed.</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;<span class="comment">       * Need to determine if there are any local channels that can</span></div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;<span class="comment">       * optimize and wait until they actually do before leaving the</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;<span class="comment">       * AGENT_STATE_PROBATION_WAIT state.  For now, the blind</span></div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;<span class="comment">       * timer of LOGIN_WAIT_TIMEOUT_TIME will do.</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;<span class="comment">       * Start the login probation timer.</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;<span class="comment">       * We cannot handle an agent local channel optimization when the</span></div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;<span class="comment">       * agent is on a call.  The optimization may kick the agent</span></div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;<span class="comment">       * channel we know about out of the call without our being able</span></div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;<span class="comment">       * to switch to the replacement channel.  Get any agent local</span></div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;<span class="comment">       * channel optimization out of the way while the agent is in the</span></div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;<span class="comment">       * holding bridge.</span></div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      time(&amp;agent-&gt;probation_start);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      agent-&gt;state = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0">AGENT_STATE_PROBATION_WAIT</a>;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0">AGENT_STATE_PROBATION_WAIT</a>:</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;      <span class="comment">/* Restart the probation timer. */</span></div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      time(&amp;agent-&gt;probation_start);</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a>:</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;<span class="comment">       * Likely someone manually kicked us out of the holding bridge</span></div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;<span class="comment">       * and we came right back in.</span></div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      <span class="comment">/* Unexpected agent state. */</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;      <span class="comment">/* Fall through */</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a>:</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a>:</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;      agent-&gt;state = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a>;</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      agent-&gt;devstate = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Call abort recovery complete.\n&quot;</span>, agent-&gt;username);</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a>(agent-&gt;username);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49">AGENT_STATE_ON_CALL</a>:</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621">AGENT_STATE_CALL_WRAPUP</a>:</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;      wrapup_time = agent-&gt;cfg-&gt;wrapup_time;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(agent, <a class="code" href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832">AGENT_FLAG_WRAPUP_TIME</a>)) {</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;         wrapup_time = agent-&gt;override_wrapup_time;</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;      }</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;      <span class="keywordflow">if</span> (wrapup_time) {</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;         agent-&gt;state = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621">AGENT_STATE_CALL_WRAPUP</a>;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;         agent-&gt;state = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a>;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;         agent-&gt;devstate = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <span class="keywordflow">if</span> (!wrapup_time) {</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;         <span class="comment">/* No wrapup time. */</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent %s: Ready for new call.\n&quot;</span>, agent-&gt;username);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;         <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a>(agent-&gt;username);</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      }</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;   }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a41510c1f43cb3401f5c7c88d9c9a8d11a2b221cc62ec019751101af0d7a754cb5">AST_BRIDGE_HOOK_REMOVE_ON_PULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00183">bridge_features.h:183</a></div></div>
<div class="ttc" id="bridge__roles_8h_html_a7dce43ab7e058fda7576097ab7068ae2"><div class="ttname"><a href="../../dd/dff/bridge__roles_8h.html#a7dce43ab7e058fda7576097ab7068ae2">ast_channel_remove_bridge_role</a></div><div class="ttdeci">void ast_channel_remove_bridge_role(struct ast_channel *chan, const char *role_name)</div><div class="ttdoc">Removes a bridge role from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00336">bridge_roles.c:336</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ae0e1c28605b6139c3b8fa403e8a42621">AGENT_STATE_CALL_WRAPUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00580">app_agent_pool.c:580</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8ab8673dd8048180035a6a4981b693bc93">AGENT_FLAG_DTMF_ACCEPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00588">app_agent_pool.c:588</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a3bc3f30b122882c42e989f6c5ca2aa86">AGENT_STATE_LOGGED_OUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00568">app_agent_pool.c:568</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7ace0d2b80786a272cbf12d2fadcf38f49">AGENT_STATE_ON_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00578">app_agent_pool.c:578</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a99d2d56a1bc356d880b7dfa6921cf32f"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a99d2d56a1bc356d880b7dfa6921cf32f">agent_after_bridge_cb_failed</a></div><div class="ttdeci">static void agent_after_bridge_cb_failed(enum ast_bridge_after_cb_reason reason, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01633">app_agent_pool.c:1633</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab940ba7749a2a12c3e9a356bd26fd744"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab940ba7749a2a12c3e9a356bd26fd744">__ao2_cleanup</a></div><div class="ttdeci">void __ao2_cleanup(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00674">astobj2.c:674</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8aa4a13f5b13607cff26538ad6e851a832">AGENT_FLAG_WRAPUP_TIME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00590">app_agent_pool.c:590</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aba0c7c74e5144e318659f810dbc6d5e8a5da8eebe4a635b6bdaada84549b268cd">AGENT_FLAG_ACK_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00587">app_agent_pool.c:587</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="bridge__roles_8h_html_a8511ad15a10f0b6269094ad307ba17a2"><div class="ttname"><a href="../../dd/dff/bridge__roles_8h.html#a8511ad15a10f0b6269094ad307ba17a2">ast_channel_add_bridge_role</a></div><div class="ttdeci">int ast_channel_add_bridge_role(struct ast_channel *chan, const char *role_name)</div><div class="ttdoc">Adds a bridge role to a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00317">bridge_roles.c:317</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__after_8h_html_a866e05c6b083030e9757cfb37814e671"><div class="ttname"><a href="../../d8/d85/bridge__after_8h.html#a866e05c6b083030e9757cfb37814e671">ast_bridge_set_after_callback</a></div><div class="ttdeci">int ast_bridge_set_after_callback(struct ast_channel *chan, ast_bridge_after_cb callback, ast_bridge_after_cb_failed failed, void *data)</div><div class="ttdoc">Setup an after bridge callback for when the channel leaves the bridging system. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/db6/bridge__after_8c_source.html#l00259">bridge_after.c:259</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="bridge_8h_html_a5a2fef16c6520d265d7f81002eb96ee7"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a5a2fef16c6520d265d7f81002eb96ee7">ast_bridge_base_v_table</a></div><div class="ttdeci">struct ast_bridge_methods ast_bridge_base_v_table</div><div class="ttdoc">Bridge base class virtual method table. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00949">bridge.c:949</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00574">app_agent_pool.c:574</a></div></div>
<div class="ttc" id="bridge__roles_8h_html_a3c1bc5238aea4e2d19c9894c1b68a457"><div class="ttname"><a href="../../dd/dff/bridge__roles_8h.html#a3c1bc5238aea4e2d19c9894c1b68a457">ast_channel_set_bridge_role_option</a></div><div class="ttdeci">int ast_channel_set_bridge_role_option(struct ast_channel *channel, const char *role_name, const char *option, const char *value)</div><div class="ttdoc">Set a role option on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d13/bridge__roles_8c_source.html#l00379">bridge_roles.c:379</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a805e16634a569c003ec65f9a063402b0">AGENT_STATE_PROBATION_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00570">app_agent_pool.c:570</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a1578ec878aa2014f6550270ad1468f94"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a1578ec878aa2014f6550270ad1468f94">bridge_agent_hold_heartbeat</a></div><div class="ttdeci">static int bridge_agent_hold_heartbeat(struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01103">app_agent_pool.c:1103</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3e9bdb7b62b531f001b7dcb5c39b3551"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3e9bdb7b62b531f001b7dcb5c39b3551">ast_bridge_interval_hook</a></div><div class="ttdeci">int ast_bridge_interval_hook(struct ast_bridge_features *features, enum ast_bridge_hook_timer_option flags, unsigned int interval, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Attach an interval hook to a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03382">bridge.c:3382</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_af5a8115993ab0d49f73d77a11718a869"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#af5a8115993ab0d49f73d77a11718a869">bridge_agent_hold_ack</a></div><div class="ttdeci">static int bridge_agent_hold_ack(struct ast_bridge_channel *bridge_channel, void *hook_pvt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01085">app_agent_pool.c:1085</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a48ebc85ae4e4a203014711dc3a492ac5"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a48ebc85ae4e4a203014711dc3a492ac5">ast_bridge_dtmf_hook</a></div><div class="ttdeci">int ast_bridge_dtmf_hook(struct ast_bridge_features *features, const char *dtmf, ast_bridge_hook_callback callback, void *hook_pvt, ast_bridge_hook_pvt_destructor destructor, enum ast_bridge_hook_remove_flags remove_flags)</div><div class="ttdoc">Attach a DTMF hook to a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03245">bridge.c:3245</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7abfa6979308f8cc4f7f76982213d2693a">AGENT_STATE_READY_FOR_CALL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00572">app_agent_pool.c:572</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="include_2asterisk_2features__config_8h_html_a57cae4c5040ce0791d0b4798193fc47f"><div class="ttname"><a href="../../d0/daa/include_2asterisk_2features__config_8h.html#a57cae4c5040ce0791d0b4798193fc47f">AST_FEATURE_MAX_LEN</a></div><div class="ttdeci">#define AST_FEATURE_MAX_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/daa/include_2asterisk_2features__config_8h_source.html#l00231">include/asterisk/features_config.h:231</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_a60b76bf280f288b3ef3f1facf873b104"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a60b76bf280f288b3ef3f1facf873b104">ast_bridge_methods::push</a></div><div class="ttdeci">ast_bridge_push_channel_fn push</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00273">bridge.h:273</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a9d261cfbf17a8c9c45edb25d1970e0d7">AGENT_STATE_CALL_WAIT_ACK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00576">app_agent_pool.c:576</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aec6f971b8bba2801e4ab3a92917860f1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec6f971b8bba2801e4ab3a92917860f1">agent_devstate_changed</a></div><div class="ttdeci">static void agent_devstate_changed(const char *agent_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00756">app_agent_pool.c:756</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a8f0089dcfc5a0c38a72eaa0aeb3014e0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a8f0089dcfc5a0c38a72eaa0aeb3014e0">agent_after_bridge_cb</a></div><div class="ttdeci">static void agent_after_bridge_cb(struct ast_channel *chan, void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01618">app_agent_pool.c:1618</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f905c96aa9c5adc8d4e297e3cf89f61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f905c96aa9c5adc8d4e297e3cf89f61">&#9670;&nbsp;</a></span>bridge_init_agent_hold()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void bridge_init_agent_hold </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01409">1409</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d95/bridge_8c_source.html#l00949">ast_bridge_base_v_table</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01388">bridge_agent_hold_dissolving()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01369">bridge_agent_hold_pull()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01394">bridge_agent_hold_v_table</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00271">ast_bridge_methods::dissolving</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00267">ast_bridge_methods::name</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00275">ast_bridge_methods::pull</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00273">ast_bridge_methods::push</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;{</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   <span class="comment">/* Setup bridge agent_hold subclass v_table. */</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a5ec2310ede2b9b46427e10e8e0cb43e6">bridge_agent_hold_v_table</a> = <a class="code" href="../../d4/d56/bridge_8h.html#a5a2fef16c6520d265d7f81002eb96ee7">ast_bridge_base_v_table</a>;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a5ec2310ede2b9b46427e10e8e0cb43e6">bridge_agent_hold_v_table</a>.<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <span class="stringliteral">&quot;agent_hold&quot;</span>;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a5ec2310ede2b9b46427e10e8e0cb43e6">bridge_agent_hold_v_table</a>.<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a5b1a8e69c6546121e0b4dcec16be3373">dissolving</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ab30350ac6df6da6e60c63534b3f2e6f2">bridge_agent_hold_dissolving</a>;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a5ec2310ede2b9b46427e10e8e0cb43e6">bridge_agent_hold_v_table</a>.<a class="code" href="../../d2/dd3/structast__bridge__methods.html#a60b76bf280f288b3ef3f1facf873b104">push</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a61441e0cbefa5859ff1953c2248eeef3">bridge_agent_hold_push</a>;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a5ec2310ede2b9b46427e10e8e0cb43e6">bridge_agent_hold_v_table</a>.<a class="code" href="../../d2/dd3/structast__bridge__methods.html#adcfc7ef2b1ee5305158a584970ddea65">pull</a> = <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae637f8fbe936d377d08099c192d5414f">bridge_agent_hold_pull</a>;</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;}</div><div class="ttc" id="structast__bridge__methods_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a8f8f80d37794cde9472343e4487ba3eb">ast_bridge_methods::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00267">bridge.h:267</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_a5b1a8e69c6546121e0b4dcec16be3373"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a5b1a8e69c6546121e0b4dcec16be3373">ast_bridge_methods::dissolving</a></div><div class="ttdeci">ast_bridge_dissolving_fn dissolving</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00271">bridge.h:271</a></div></div>
<div class="ttc" id="bridge_8h_html_a5a2fef16c6520d265d7f81002eb96ee7"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a5a2fef16c6520d265d7f81002eb96ee7">ast_bridge_base_v_table</a></div><div class="ttdeci">struct ast_bridge_methods ast_bridge_base_v_table</div><div class="ttdoc">Bridge base class virtual method table. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00949">bridge.c:949</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae637f8fbe936d377d08099c192d5414f"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae637f8fbe936d377d08099c192d5414f">bridge_agent_hold_pull</a></div><div class="ttdeci">static void bridge_agent_hold_pull(struct ast_bridge *self, struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01369">app_agent_pool.c:1369</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ab30350ac6df6da6e60c63534b3f2e6f2"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ab30350ac6df6da6e60c63534b3f2e6f2">bridge_agent_hold_dissolving</a></div><div class="ttdeci">static void bridge_agent_hold_dissolving(struct ast_bridge *self)</div><div class="ttdoc">The bridge is being dissolved. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01388">app_agent_pool.c:1388</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_adcfc7ef2b1ee5305158a584970ddea65"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#adcfc7ef2b1ee5305158a584970ddea65">ast_bridge_methods::pull</a></div><div class="ttdeci">ast_bridge_pull_channel_fn pull</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00275">bridge.h:275</a></div></div>
<div class="ttc" id="structast__bridge__methods_html_a60b76bf280f288b3ef3f1facf873b104"><div class="ttname"><a href="../../d2/dd3/structast__bridge__methods.html#a60b76bf280f288b3ef3f1facf873b104">ast_bridge_methods::push</a></div><div class="ttdeci">ast_bridge_push_channel_fn push</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00273">bridge.h:273</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a5ec2310ede2b9b46427e10e8e0cb43e6"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a5ec2310ede2b9b46427e10e8e0cb43e6">bridge_agent_hold_v_table</a></div><div class="ttdeci">static struct ast_bridge_methods bridge_agent_hold_v_table</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01394">app_agent_pool.c:1394</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a61441e0cbefa5859ff1953c2248eeef3"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a61441e0cbefa5859ff1953c2248eeef3">bridge_agent_hold_push</a></div><div class="ttdeci">static int bridge_agent_hold_push(struct ast_bridge *self, struct ast_bridge_channel *bridge_channel, struct ast_bridge_channel *swap)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01196">app_agent_pool.c:1196</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aab6ab498f59aece6e53aa7102c0077e2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aab6ab498f59aece6e53aa7102c0077e2">&#9670;&nbsp;</a></span>caller_abort_agent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void caller_abort_agent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *&#160;</td>
          <td class="paramname"><em>agent</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">1696</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01660">agent_bridge_channel_get_lock()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00658">agent_lock</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00671">agent_unlock</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00292">ast_bridge_channel_leave_bridge_nolock()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00970">ast_bridge_destroy()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00641">agent_pvt::caller_bridge</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01847">caller_joined_bridge()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01722">caller_safety_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;{</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *logged;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;   logged = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a5733bc2f13f35fe0d8bde13939b50e07">agent_bridge_channel_get_lock</a>(agent);</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   <span class="keywordflow">if</span> (!logged) {</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *caller_bridge;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Agent &#39;%s&#39; no longer logged in.\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a>(agent);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;      caller_bridge = agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a>;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;      agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">caller_bridge</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a>(agent);</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <span class="keywordflow">if</span> (caller_bridge) {</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(caller_bridge, 0);</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;      }</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   }</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;   <span class="comment">/* Kick the agent out of the holding bridge to reset it. */</span></div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ab37a1835212d045dcfe7ef7f25eb5e31">ast_bridge_channel_leave_bridge_nolock</a>(logged, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>,</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(logged);</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;}</div><div class="ttc" id="app__agent__pool_8c_html_aec4e1bc1cab0249a428af2157c2514a1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aec4e1bc1cab0249a428af2157c2514a1">agent_unlock</a></div><div class="ttdeci">#define agent_unlock(agent)</div><div class="ttdoc">Unlock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00671">app_agent_pool.c:671</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab37a1835212d045dcfe7ef7f25eb5e31"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab37a1835212d045dcfe7ef7f25eb5e31">ast_bridge_channel_leave_bridge_nolock</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge_nolock(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00292">bridge_channel.c:292</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structagent__pvt_html_a6b2557c443982571cceb9005c5bec611"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a6b2557c443982571cceb9005c5bec611">agent_pvt::caller_bridge</a></div><div class="ttdeci">struct ast_bridge * caller_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00641">app_agent_pool.c:641</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aad1cee1e03f1e1c5ad4067940fdab5b0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aad1cee1e03f1e1c5ad4067940fdab5b0">agent_lock</a></div><div class="ttdeci">#define agent_lock(agent)</div><div class="ttdoc">Lock the agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00658">app_agent_pool.c:658</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a5733bc2f13f35fe0d8bde13939b50e07"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a5733bc2f13f35fe0d8bde13939b50e07">agent_bridge_channel_get_lock</a></div><div class="ttdeci">static struct ast_bridge_channel * agent_bridge_channel_get_lock(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01660">app_agent_pool.c:1660</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a33214b7c3d67d8ea8652269fc5afb0d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a33214b7c3d67d8ea8652269fc5afb0d0">&#9670;&nbsp;</a></span>caller_joined_bridge()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int caller_joined_bridge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>hook_pvt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01847">1847</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01660">agent_bridge_channel_get_lock()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">AST_CONTROL_RINGING</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">caller_abort_agent()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01812">send_alert_to_agent()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;{</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent = hook_pvt;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *logged;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;   logged = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a5733bc2f13f35fe0d8bde13939b50e07">agent_bridge_channel_get_lock</a>(agent);</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;   <span class="keywordflow">if</span> (!logged) {</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Agent &#39;%s&#39; not logged in.\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;NOT_LOGGED_IN&quot;</span>);</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, 0);</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aab6ab498f59aece6e53aa7102c0077e2">caller_abort_agent</a>(agent);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   }</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   res = <a class="code" href="../../de/d11/app__agent__pool_8c.html#a7a5ef1db5b0d29922a128c9422069729">send_alert_to_agent</a>(logged, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(logged);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(logged, -1);</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Agent &#39;%s&#39;: Failed to alert the agent.\n&quot;</span>, agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;ERROR&quot;</span>);</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, 0);</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aab6ab498f59aece6e53aa7102c0077e2">caller_abort_agent</a>(agent);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;   }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;NOT_CONNECTED&quot;</span>);</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>);</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;}</div><div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aab6ab498f59aece6e53aa7102c0077e2"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aab6ab498f59aece6e53aa7102c0077e2">caller_abort_agent</a></div><div class="ttdeci">static void caller_abort_agent(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01696">app_agent_pool.c:1696</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a5733bc2f13f35fe0d8bde13939b50e07"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a5733bc2f13f35fe0d8bde13939b50e07">agent_bridge_channel_get_lock</a></div><div class="ttdeci">static struct ast_bridge_channel * agent_bridge_channel_get_lock(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01660">app_agent_pool.c:1660</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a7a5ef1db5b0d29922a128c9422069729"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a7a5ef1db5b0d29922a128c9422069729">send_alert_to_agent</a></div><div class="ttdeci">static int send_alert_to_agent(struct ast_bridge_channel *bridge_channel, const char *agent_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01812">app_agent_pool.c:1812</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaa635926514981b733c8cc5afaf0def9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa635926514981b733c8cc5afaf0def9">&#9670;&nbsp;</a></span>caller_safety_timeout()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int caller_safety_timeout </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>hook_pvt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01722">1722</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00574">AGENT_STATE_CALL_PRESENT</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">caller_abort_agent()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00625">agent_pvt::state</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;{</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent = hook_pvt;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;   <span class="keywordflow">if</span> (agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">state</a> == <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a>) {</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Agent &#39;%s&#39; process did not respond.  Safety timeout.\n&quot;</span>,</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;         agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <span class="stringliteral">&quot;ERROR&quot;</span>);</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, 0);</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aab6ab498f59aece6e53aa7102c0077e2">caller_abort_agent</a>(agent);</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   }</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;}</div><div class="ttc" id="structagent__pvt_html_a2b63413544f313e27f0a2893dfa5e251"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a2b63413544f313e27f0a2893dfa5e251">agent_pvt::state</a></div><div class="ttdeci">enum agent_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00625">app_agent_pool.c:625</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae60dcdeaa28da0fc60d394eaf1a6edd7a67c95428c333ffc3b0f5950e3b3cf532">AGENT_STATE_CALL_PRESENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00574">app_agent_pool.c:574</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aab6ab498f59aece6e53aa7102c0077e2"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aab6ab498f59aece6e53aa7102c0077e2">caller_abort_agent</a></div><div class="ttdeci">static void caller_abort_agent(struct agent_pvt *agent)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01696">app_agent_pool.c:1696</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb0201bc573414e692523e87814100f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb0201bc573414e692523e87814100f9">&#9670;&nbsp;</a></span>clear_agent_status()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void clear_agent_status </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01017">1017</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_builtin_setvar_helper()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>.</p>
<div class="fragment"><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;{</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;AGENT_STATUS&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac543f4a511c682ff550c23f1c8f7870c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac543f4a511c682ff550c23f1c8f7870c">&#9670;&nbsp;</a></span>complete_agent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* complete_agent </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02277">2277</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01743">ao2_callback_data</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02267">complete_agent_search()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01156">OBJ_PARTIAL_KEY</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02262">agent_complete::state</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02426">agent_handle_show_specific()</a>.</p>
<div class="fragment"><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;{</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;   <span class="keywordtype">char</span> *ret;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d86/structagent__complete.html">agent_complete</a> search = {</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;      .<a class="code" href="../../dc/d86/structagent__complete.html#a89f234133d3efe315836311cbf21c64b">state</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>,</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;   };</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>) ? 0 : <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>,</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#ac7ac094b1e03eda5eef727a0c1988141">complete_agent_search</a>, (<span class="keywordtype">char</span> *) <a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, &amp;search);</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   }</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;   ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structagent__complete_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../dc/d86/structagent__complete.html#a89f234133d3efe315836311cbf21c64b">agent_complete::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02262">app_agent_pool.c:2262</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab0b4e11aba1e0a898b5d75427d3b13fa"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a></div><div class="ttdeci">#define OBJ_PARTIAL_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01156">astobj2.h:1156</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="structagent__complete_html"><div class="ttname"><a href="../../dc/d86/structagent__complete.html">agent_complete</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02260">app_agent_pool.c:2260</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ac7ac094b1e03eda5eef727a0c1988141"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ac7ac094b1e03eda5eef727a0c1988141">complete_agent_search</a></div><div class="ttdeci">static int complete_agent_search(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02267">app_agent_pool.c:2267</a></div></div>
<div class="ttc" id="codecs_2gsm_2inc_2private_8h_html_a0b023cbb2bf7d034c2269d58d7455ac8"><div class="ttname"><a href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a></div><div class="ttdeci">short word</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da0/codecs_2gsm_2inc_2private_8h_source.html#l00012">codecs/gsm/inc/private.h:12</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a97ba140fa091ecedd7cb9029a5e2ac36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97ba140fa091ecedd7cb9029a5e2ac36">&#9670;&nbsp;</a></span>complete_agent_logoff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* complete_agent_logoff </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>state</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02309">2309</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01743">ao2_callback_data</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02295">complete_agent_logoff_search()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01156">OBJ_PARTIAL_KEY</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l00959">state</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02262">agent_complete::state</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00600">agent_pvt::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02485">agent_handle_logoff_cmd()</a>.</p>
<div class="fragment"><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;{</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;   <span class="keywordtype">char</span> *ret;</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d86/structagent__complete.html">agent_complete</a> search = {</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;      .<a class="code" href="../../dc/d86/structagent__complete.html#a89f234133d3efe315836311cbf21c64b">state</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>,</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;   };</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;   agent = <a class="code" href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>, <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>) ? 0 : <a class="code" href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a>,</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#aa54a01cf670832c6ad6fe44fc9bc20bb">complete_agent_logoff_search</a>, (<span class="keywordtype">char</span> *) <a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, &amp;search);</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;   <span class="keywordflow">if</span> (!agent) {</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;   }</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;   ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">username</a>);</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(agent, -1);</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;}</div><div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="structagent__complete_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../dc/d86/structagent__complete.html#a89f234133d3efe315836311cbf21c64b">agent_complete::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02262">app_agent_pool.c:2262</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8h_html_ab0b4e11aba1e0a898b5d75427d3b13fa"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ab0b4e11aba1e0a898b5d75427d3b13fa">OBJ_PARTIAL_KEY</a></div><div class="ttdeci">#define OBJ_PARTIAL_KEY</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01156">astobj2.h:1156</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structagent__pvt_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a5804ef809b93820d3437a86e08126bd8">agent_pvt::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00600">app_agent_pool.c:600</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="astobj2_8h_html_a63fd831fe48aed32d3ef992ad8e45293"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a63fd831fe48aed32d3ef992ad8e45293">ao2_callback_data</a></div><div class="ttdeci">#define ao2_callback_data(container, flags, cb_fn, arg, data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01743">astobj2.h:1743</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aa54a01cf670832c6ad6fe44fc9bc20bb"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aa54a01cf670832c6ad6fe44fc9bc20bb">complete_agent_logoff_search</a></div><div class="ttdeci">static int complete_agent_logoff_search(void *obj, void *arg, void *data, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02295">app_agent_pool.c:2295</a></div></div>
<div class="ttc" id="structagent__complete_html"><div class="ttname"><a href="../../dc/d86/structagent__complete.html">agent_complete</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02260">app_agent_pool.c:2260</a></div></div>
<div class="ttc" id="codecs_2gsm_2inc_2private_8h_html_a0b023cbb2bf7d034c2269d58d7455ac8"><div class="ttname"><a href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a></div><div class="ttdeci">short word</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da0/codecs_2gsm_2inc_2private_8h_source.html#l00012">codecs/gsm/inc/private.h:12</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa54a01cf670832c6ad6fe44fc9bc20bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa54a01cf670832c6ad6fe44fc9bc20bb">&#9670;&nbsp;</a></span>complete_agent_logoff_search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int complete_agent_logoff_search </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02295">2295</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00643">agent_pvt::logged</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02262">agent_complete::state</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02264">agent_complete::which</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02309">complete_agent_logoff()</a>.</p>
<div class="fragment"><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;{</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4d/structagent__pvt.html">agent_pvt</a> *agent = obj;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d86/structagent__complete.html">agent_complete</a> *search = data;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;   <span class="keywordflow">if</span> (!agent-&gt;<a class="code" href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">logged</a>) {</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;   }</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   <span class="keywordflow">if</span> (++search-&gt;<a class="code" href="../../dc/d86/structagent__complete.html#aa2a4dae2a14de4093826005f9bdfd3bb">which</a> &gt; search-&gt;<a class="code" href="../../dc/d86/structagent__complete.html#a89f234133d3efe315836311cbf21c64b">state</a>) {</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;   }</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;}</div><div class="ttc" id="structagent__pvt_html_a7d442bd00b142ff82e79c2052d69dcdb"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html#a7d442bd00b142ff82e79c2052d69dcdb">agent_pvt::logged</a></div><div class="ttdeci">struct ast_channel * logged</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00643">app_agent_pool.c:643</a></div></div>
<div class="ttc" id="structagent__complete_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../dc/d86/structagent__complete.html#a89f234133d3efe315836311cbf21c64b">agent_complete::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02262">app_agent_pool.c:2262</a></div></div>
<div class="ttc" id="structagent__complete_html_aa2a4dae2a14de4093826005f9bdfd3bb"><div class="ttname"><a href="../../dc/d86/structagent__complete.html#aa2a4dae2a14de4093826005f9bdfd3bb">agent_complete::which</a></div><div class="ttdeci">int which</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02264">app_agent_pool.c:2264</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structagent__pvt_html"><div class="ttname"><a href="../../dd/d4d/structagent__pvt.html">agent_pvt</a></div><div class="ttdoc">Structure representing an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00594">app_agent_pool.c:594</a></div></div>
<div class="ttc" id="structagent__complete_html"><div class="ttname"><a href="../../dc/d86/structagent__complete.html">agent_complete</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02260">app_agent_pool.c:2260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7ac094b1e03eda5eef727a0c1988141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7ac094b1e03eda5eef727a0c1988141">&#9670;&nbsp;</a></span>complete_agent_search()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int complete_agent_search </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>obj</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>arg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02267">2267</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01031">CMP_MATCH</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02262">agent_complete::state</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02264">agent_complete::which</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02277">complete_agent()</a>.</p>
<div class="fragment"><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;{</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d86/structagent__complete.html">agent_complete</a> *search = data;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;   <span class="keywordflow">if</span> (++search-&gt;<a class="code" href="../../dc/d86/structagent__complete.html#aa2a4dae2a14de4093826005f9bdfd3bb">which</a> &gt; search-&gt;<a class="code" href="../../dc/d86/structagent__complete.html#a89f234133d3efe315836311cbf21c64b">state</a>) {</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a>;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;   }</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;}</div><div class="ttc" id="structagent__complete_html_a89f234133d3efe315836311cbf21c64b"><div class="ttname"><a href="../../dc/d86/structagent__complete.html#a89f234133d3efe315836311cbf21c64b">agent_complete::state</a></div><div class="ttdeci">int state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02262">app_agent_pool.c:2262</a></div></div>
<div class="ttc" id="structagent__complete_html_aa2a4dae2a14de4093826005f9bdfd3bb"><div class="ttname"><a href="../../dc/d86/structagent__complete.html#aa2a4dae2a14de4093826005f9bdfd3bb">agent_complete::which</a></div><div class="ttdeci">int which</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02264">app_agent_pool.c:2264</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="structagent__complete_html"><div class="ttname"><a href="../../dc/d86/structagent__complete.html">agent_complete</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02260">app_agent_pool.c:2260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a656be8c315c7512b34037d5445b1fc05"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a656be8c315c7512b34037d5445b1fc05">&#9670;&nbsp;</a></span>CONFIG_INFO_STANDARD()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CONFIG_INFO_STANDARD </td>
          <td>(</td>
          <td class="paramtype">cfg_info&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d11/app__agent__pool_8c.html#ad2b4b080213b6b09e799374f4529ecc2">agents_cfg_alloc</a>&#160;</td>
          <td class="paramname">, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>files</em> = <code><a class="el" href="../../db/dfe/config__options_8h.html#a60d2944aab4537720434ab9c90e12418">ACO_FILES</a>(&amp;<a class="el" href="../../de/d11/app__agent__pool_8c.html#ae45e38e10e4b85b3161bdd0cb45b81ef">agents_conf</a>)</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">.&#160;</td>
          <td class="paramname"><em>post_apply_config</em> = <code><a class="el" href="../../de/d11/app__agent__pool_8c.html#acda8801e5f7029b4afec1a19ecae16b2">agents_post_apply_config</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00512">agents_cfg_alloc()</a>.</p>

</div>
</div>
<a id="a542b526fd6c81c6193101dfbe970c2be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a542b526fd6c81c6193101dfbe970c2be">&#9670;&nbsp;</a></span>destroy_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void destroy_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00537">537</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00910">aco_info_destroy()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00865">ao2_global_obj_release</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00284">cfg_handle</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02624">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;{</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a>(<a class="code" href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a>);</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a>(&amp;cfg_info);</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;}</div><div class="ttc" id="config__options_8h_html_a21b11339ca4d0b1167c956a9f816bd19"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a21b11339ca4d0b1167c956a9f816bd19">aco_info_destroy</a></div><div class="ttdeci">void aco_info_destroy(struct aco_info *info)</div><div class="ttdoc">Destroy an initialized aco_info struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00910">config_options.c:910</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac0e1cbc7cf050c8b7b8e3a8fee92c50e"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac0e1cbc7cf050c8b7b8e3a8fee92c50e">ao2_global_obj_release</a></div><div class="ttdeci">#define ao2_global_obj_release(holder)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00865">astobj2.h:865</a></div></div>
<div class="ttc" id="res__corosync_8c_html_ace59e73cd525ae17e77397b0cc7f7302"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#ace59e73cd525ae17e77397b0cc7f7302">cfg_handle</a></div><div class="ttdeci">static corosync_cfg_handle_t cfg_handle</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00284">res_corosync.c:284</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aed5779f84d4ebb67745d801d3ebede43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed5779f84d4ebb67745d801d3ebede43">&#9670;&nbsp;</a></span>load_config()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_config </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00543">543</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00384">agent_cfg::ack_call</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00064">ACO_EXACT</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00877">aco_info_init()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00623">aco_option_register</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00652">aco_process_config()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00527">ACO_PROCESS_ERROR</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00372">agent_cfg::auto_logoff</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::beep_sound</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::dtmf_accept</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00816">FLDSET</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::full_name</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00365">agent_cfg::moh</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00294">OPT_BOOL_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00435">OPT_STRINGFIELD_T</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00459">OPT_UINT_T</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00386">agent_cfg::record_agent_calls</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00827">STRFLDSET</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00378">agent_cfg::wrapup_time</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>, and <a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00119">load_values_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;{</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a>(&amp;cfg_info)) {</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   }</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;   <span class="comment">/* Agent options */</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;ackcall&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a>, <span class="stringliteral">&quot;no&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a>, ack_call));</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;acceptdtmf&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a>, <span class="stringliteral">&quot;#&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a>, dtmf_accept));</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;autologoff&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a>, <span class="stringliteral">&quot;0&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a>, auto_logoff));</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;wrapuptime&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a>, <span class="stringliteral">&quot;0&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a>, wrapup_time));</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;musiconhold&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a>, <span class="stringliteral">&quot;default&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a>, moh));</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;recordagentcalls&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a>, <span class="stringliteral">&quot;no&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a>, 1, <a class="code" href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a>, record_agent_calls));</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;custom_beep&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a>, <span class="stringliteral">&quot;beep&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a>, beep_sound));</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;   <a class="code" href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a>(&amp;cfg_info, <span class="stringliteral">&quot;fullname&quot;</span>, <a class="code" href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a>, 0, <a class="code" href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d01/structagent__cfg.html">agent_cfg</a>, full_name));</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a>(&amp;cfg_info, 0) == <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a>) {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;   }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;}</div><div class="ttc" id="config__options_8h_html_a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a1b87da445ce6937e5cfbdaed1288a572abba7035409cf0b61400c00ef5bb59b52">ACO_EXACT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00064">config_options.h:64</a></div></div>
<div class="ttc" id="config__options_8h_html_a60d17d3e9451ddcb5aa861339c757bed"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a60d17d3e9451ddcb5aa861339c757bed">aco_option_register</a></div><div class="ttdeci">#define aco_option_register(info, name, matchtype, types, default_val, opt_type, flags,...)</div><div class="ttdoc">Register a config option. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00623">config_options.h:623</a></div></div>
<div class="ttc" id="config__options_8h_html_af28935f8c2547723d5922ebed1c71898"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a></div><div class="ttdeci">enum aco_process_status aco_process_config(struct aco_info *info, int reload)</div><div class="ttdoc">Process a config info via the options registered with an aco_info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00652">config_options.c:652</a></div></div>
<div class="ttc" id="structagent__cfg_html"><div class="ttname"><a href="../../d4/d01/structagent__cfg.html">agent_cfg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00348">app_agent_pool.c:348</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="config__options_8h_html_a5793d5d6ccf2df0b2423eb3274af7802"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a5793d5d6ccf2df0b2423eb3274af7802">FLDSET</a></div><div class="ttdeci">#define FLDSET(type,...)</div><div class="ttdoc">Convert a struct and list of fields to an argument list of field offsets. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00816">config_options.h:816</a></div></div>
<div class="ttc" id="config__options_8h_html_a3f40a7cffea07c21a21faaee64d24398"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3f40a7cffea07c21a21faaee64d24398">aco_info_init</a></div><div class="ttdeci">int aco_info_init(struct aco_info *info)</div><div class="ttdoc">Initialize an aco_info structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00877">config_options.c:877</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a019a75c8729b63787919b2e67331c84f">OPT_UINT_T</a></div><div class="ttdoc">Type for default option handler for unsigned integers. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00459">config_options.h:459</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a></div><div class="ttdoc">Their was an error and no changes were applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00527">config_options.h:527</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144a5cb849face8441c434d1a2f60264cedb">OPT_BOOL_T</a></div><div class="ttdoc">Type for default option handler for bools (ast_true/ast_false) </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00294">config_options.h:294</a></div></div>
<div class="ttc" id="config__options_8h_html_a3e5be807d4a10b6da6382a40a0004ace"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3e5be807d4a10b6da6382a40a0004ace">STRFLDSET</a></div><div class="ttdeci">#define STRFLDSET(type,...)</div><div class="ttdoc">Convert a struct and a list of stringfield fields to an argument list of field offsets. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00827">config_options.h:827</a></div></div>
<div class="ttc" id="config__options_8h_html_a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a61bb4940517e7d00e7104de8273c2144afec8c0a18639b70f2e518bc8ee9f3540">OPT_STRINGFIELD_T</a></div><div class="ttdoc">Type for default option handler for stringfields. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00435">config_options.h:435</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_adb1d2a9b5b0247cdd038c09a4ca3e41b"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#adb1d2a9b5b0247cdd038c09a4ca3e41b">agent_types</a></div><div class="ttdeci">static struct aco_type * agent_types[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00475">app_agent_pool.c:475</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac3382bf6da54c56b37069bd76bbdf4f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3382bf6da54c56b37069bd76bbdf4f9">&#9670;&nbsp;</a></span>load_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int load_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">2656</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02605">action_agent_logoff()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02527">action_agents()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00852">agent_pvt_cmp()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00732">agent_pvt_devstate_get()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00820">agent_pvt_sort_cmp()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00365">AO2_ALLOC_OPT_LOCK_MUTEX</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01215">AO2_CONTAINER_ALLOC_OPT_DUPS_REPLACE</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01358">ao2_container_alloc_rbtree</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00344">app_agent_login</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00345">app_agent_request</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../db/de0/pbx_8h_source.html#l01508">ast_custom_function_register</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00391">ast_devstate_prov_add()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00186">ast_manager_register_xml</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00078">AST_MODULE_LOAD_DECLINE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00070">AST_MODULE_LOAD_SUCCESS</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00626">ast_register_application_xml</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01409">bridge_init_agent_hold()</a>, <a class="el" href="../../db/d45/manager_8h_source.html#l00076">EVENT_FLAG_AGENT</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00543">load_config()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02624">unload_module()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02701">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;{</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>,</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#afe7a6b368052cb171d371d873b7520acadb2bfd83bc54a380d86d3a9b02d99c35">AO2_CONTAINER_ALLOC_OPT_DUPS_REPLACE</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a32d9fcd6bfb0ed9371e6dbae8a994bda">agent_pvt_sort_cmp</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#ad63565be83f2a9e10382f7adb483965c">agent_pvt_cmp</a>);</div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>) {</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;   }</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;   <span class="comment">/* Init agent holding bridge v_table. */</span></div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a7f905c96aa9c5adc8d4e297e3cf89f61">bridge_init_agent_hold</a>();</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;   <span class="comment">/* Setup to provide Agent:agent-id device state. */</span></div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;   res |= <a class="code" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a>(<span class="stringliteral">&quot;Agent&quot;</span>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a3a5f74a4e24b8c032bd9698c1f2af510">agent_pvt_devstate_get</a>);</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;</div><div class="line"><a name="l02672"></a><span class="lineno"> 2672</span>&#160;   <span class="comment">/* CLI Commands */</span></div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;   res |= <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a86ce161e89fb61c8534e1eca1cdcf618">cli_agents</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a86ce161e89fb61c8534e1eca1cdcf618">cli_agents</a>));</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;   <span class="comment">/* Manager commands */</span></div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;Agents&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#acd32bc0b58b87cc22c60ffff79496c7f">EVENT_FLAG_AGENT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a0c9069d554e6ace86b060a06c56d2ba3">action_agents</a>);</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;AgentLogoff&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#acd32bc0b58b87cc22c60ffff79496c7f">EVENT_FLAG_AGENT</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a6558aa820bc9dd1eebac76ee2e2951f0">action_agent_logoff</a>);</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;   <span class="comment">/* Dialplan Functions */</span></div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;<a class="code" href="../../de/d11/app__agent__pool_8c.html#a1ef7f429bd53528befc06ac4d0f5ff3b">agent_function</a>);</div><div class="line"><a name="l02681"></a><span class="lineno"> 2681</span>&#160;</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;   <span class="comment">/* Dialplan applications */</span></div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a358f094a1d14b589ace3b278972be56f">app_agent_login</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#ae6f3c6c02f7961bd6939f302cafa0f4f">agent_login_exec</a>);</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a872ee537b540de2ccaea4e62ed2dc016">app_agent_request</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a392237b28b1ee658981b450fcf3fe363">agent_request_exec</a>);</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02687"></a><span class="lineno"> 2687</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register application. Not loading module.\n&quot;</span>);</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;   }</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d11/app__agent__pool_8c.html#aed5779f84d4ebb67745d801d3ebede43">load_config</a>()) {</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to load config. Not loading module.\n&quot;</span>);</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;      <a class="code" href="../../de/d11/app__agent__pool_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>();</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a>;</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;   }</div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a>;</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfa89bb877ade9ce418ad6663f3d936f314">AST_MODULE_LOAD_SUCCESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00070">module.h:70</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_aed5779f84d4ebb67745d801d3ebede43"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#aed5779f84d4ebb67745d801d3ebede43">load_config</a></div><div class="ttdeci">static int load_config(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00543">app_agent_pool.c:543</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a86ce161e89fb61c8534e1eca1cdcf618"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a86ce161e89fb61c8534e1eca1cdcf618">cli_agents</a></div><div class="ttdeci">static struct ast_cli_entry cli_agents[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02520">app_agent_pool.c:2520</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae832fcc32c88962e73025ffeafe2961e"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a></div><div class="ttdeci">int ast_devstate_prov_add(const char *label, ast_devstate_prov_cb_type callback)</div><div class="ttdoc">Add device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00391">devicestate.c:391</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a32d9fcd6bfb0ed9371e6dbae8a994bda"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a32d9fcd6bfb0ed9371e6dbae8a994bda">agent_pvt_sort_cmp</a></div><div class="ttdeci">static int agent_pvt_sort_cmp(const void *obj_left, const void *obj_right, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00820">app_agent_pool.c:820</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a392237b28b1ee658981b450fcf3fe363"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a392237b28b1ee658981b450fcf3fe363">agent_request_exec</a></div><div class="ttdeci">static int agent_request_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">Dialplan AgentRequest application to locate an agent to talk with. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01889">app_agent_pool.c:1889</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ad63565be83f2a9e10382f7adb483965c"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ad63565be83f2a9e10382f7adb483965c">agent_pvt_cmp</a></div><div class="ttdeci">static int agent_pvt_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00852">app_agent_pool.c:852</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02624">app_agent_pool.c:2624</a></div></div>
<div class="ttc" id="manager_8h_html_acd32bc0b58b87cc22c60ffff79496c7f"><div class="ttname"><a href="../../db/d45/manager_8h.html#acd32bc0b58b87cc22c60ffff79496c7f">EVENT_FLAG_AGENT</a></div><div class="ttdeci">#define EVENT_FLAG_AGENT</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00076">manager.h:76</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a0c9069d554e6ace86b060a06c56d2ba3"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a0c9069d554e6ace86b060a06c56d2ba3">action_agents</a></div><div class="ttdeci">static int action_agents(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02527">app_agent_pool.c:2527</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_ae6f3c6c02f7961bd6939f302cafa0f4f"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#ae6f3c6c02f7961bd6939f302cafa0f4f">agent_login_exec</a></div><div class="ttdeci">static int agent_login_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">Dialplan AgentLogin application to log in an agent. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02112">app_agent_pool.c:2112</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a7f905c96aa9c5adc8d4e297e3cf89f61"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a7f905c96aa9c5adc8d4e297e3cf89f61">bridge_init_agent_hold</a></div><div class="ttdeci">static void bridge_init_agent_hold(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01409">app_agent_pool.c:1409</a></div></div>
<div class="ttc" id="module_8h_html_adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57"><div class="ttname"><a href="../../d5/d16/module_8h.html#adc09474f0ff557e9925b722ee5b952dfac742921e9f9512d28f62c74ea2affe57">AST_MODULE_LOAD_DECLINE</a></div><div class="ttdoc">Module has failed to load, may be in an inconsistent state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00078">module.h:78</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a872ee537b540de2ccaea4e62ed2dc016"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a872ee537b540de2ccaea4e62ed2dc016">app_agent_request</a></div><div class="ttdeci">static const char app_agent_request[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00345">app_agent_pool.c:345</a></div></div>
<div class="ttc" id="astobj2_8h_html_afe7a6b368052cb171d371d873b7520acadb2bfd83bc54a380d86d3a9b02d99c35"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#afe7a6b368052cb171d371d873b7520acadb2bfd83bc54a380d86d3a9b02d99c35">AO2_CONTAINER_ALLOC_OPT_DUPS_REPLACE</a></div><div class="ttdoc">Replace objects with duplicate keys in container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01215">astobj2.h:1215</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a358f094a1d14b589ace3b278972be56f"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a358f094a1d14b589ace3b278972be56f">app_agent_login</a></div><div class="ttdeci">static const char app_agent_login[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00344">app_agent_pool.c:344</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a1ef7f429bd53528befc06ac4d0f5ff3b"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a1ef7f429bd53528befc06ac4d0f5ff3b">agent_function</a></div><div class="ttdeci">static struct ast_custom_function agent_function</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02255">app_agent_pool.c:2255</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a6558aa820bc9dd1eebac76ee2e2951f0"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a6558aa820bc9dd1eebac76ee2e2951f0">action_agent_logoff</a></div><div class="ttdeci">static int action_agent_logoff(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02605">app_agent_pool.c:2605</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9657c4f40f012fc1d426c3c94b3d32c0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9657c4f40f012fc1d426c3c94b3d32c0">ao2_container_alloc_rbtree</a></div><div class="ttdeci">#define ao2_container_alloc_rbtree(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01358">astobj2.h:1358</a></div></div>
<div class="ttc" id="manager_8h_html_a5b63b8a8faede2d852e071e1f7b31c11"><div class="ttname"><a href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a></div><div class="ttdeci">#define ast_manager_register_xml(action, authority, func)</div><div class="ttdoc">Register a manager callback using XML documentation to describe the manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00186">manager.h:186</a></div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="module_8h_html_afba4eb7a910b10969041ae4cd488729d"><div class="ttname"><a href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a></div><div class="ttdeci">#define ast_register_application_xml(app, execute)</div><div class="ttdoc">Register an application using XML documentation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00626">module.h:626</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a3a5f74a4e24b8c032bd9698c1f2af510"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a3a5f74a4e24b8c032bd9698c1f2af510">agent_pvt_devstate_get</a></div><div class="ttdeci">static enum ast_device_state agent_pvt_devstate_get(const char *agent_id)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00732">app_agent_pool.c:732</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad1982509765f4870f1f63412a53ea668"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad1982509765f4870f1f63412a53ea668">&#9670;&nbsp;</a></span>reload()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int reload </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02701">2701</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/dc8/config__options_8c_source.html#l00652">aco_process_config()</a>, <a class="el" href="../../db/dfe/config__options_8h_source.html#l00527">ACO_PROCESS_ERROR</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00317">AST_MODFLAG_LOAD_ORDER</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00329">AST_MODPRI_DEVSTATE_PROVIDER</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO()</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00121">AST_MODULE_SUPPORT_CORE</a>, <a class="el" href="../../d5/d16/module_8h_source.html#l00046">ASTERISK_GPL_KEY</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02624">unload_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;{</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a>(&amp;cfg_info, 1) == <a class="code" href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a>) {</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;      <span class="comment">/* Just keep the config we already have in place. */</span></div><div class="line"><a name="l02705"></a><span class="lineno"> 2705</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;   }</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;}</div><div class="ttc" id="config__options_8h_html_af28935f8c2547723d5922ebed1c71898"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af28935f8c2547723d5922ebed1c71898">aco_process_config</a></div><div class="ttdeci">enum aco_process_status aco_process_config(struct aco_info *info, int reload)</div><div class="ttdoc">Process a config info via the options registered with an aco_info. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/dc8/config__options_8c_source.html#l00652">config_options.c:652</a></div></div>
<div class="ttc" id="config__options_8h_html_a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#a3b4f259d48ef20f47171b73078282d75a832b5997265d8870481f9684cbca5792">ACO_PROCESS_ERROR</a></div><div class="ttdoc">Their was an error and no changes were applied. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00527">config_options.h:527</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f0c90a579585c460312c6c4d2caf216"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f0c90a579585c460312c6c4d2caf216">&#9670;&nbsp;</a></span>send_agent_login()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_agent_login </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01439">1439</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga03332d35946786d0689462e58d01467a">ast_channel_agent_login_type()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01135">ast_channel_publish_blob()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;{</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(agent != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;   blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>,</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;      <span class="stringliteral">&quot;agent&quot;</span>, agent);</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;   <span class="keywordflow">if</span> (!blob) {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;   }</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga03332d35946786d0689462e58d01467a">ast_channel_agent_login_type</a>(), blob);</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;}</div><div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga03332d35946786d0689462e58d01467a"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga03332d35946786d0689462e58d01467a">ast_channel_agent_login_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_agent_login_type(void)</div><div class="ttdoc">Message type for agent login on a channel. </div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf03b8daa7784a26648db90614add6caa"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a></div><div class="ttdeci">void ast_channel_publish_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01135">stasis_channels.c:1135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c8999dd893779d9c04cbf4a70e9e2a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c8999dd893779d9c04cbf4a70e9e2a1">&#9670;&nbsp;</a></span>send_agent_logoff()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void send_agent_logoff </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&#160;</td>
          <td class="paramname"><em>logintime</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01454">1454</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga55d6d1e96f8f003200274d8756a9398a">ast_channel_agent_logoff_type()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01135">ast_channel_publish_blob()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01481">agent_logout()</a>.</p>
<div class="fragment"><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;{</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(agent != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: I}&quot;</span>,</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;      <span class="stringliteral">&quot;agent&quot;</span>, agent,</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;      <span class="stringliteral">&quot;logintime&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)logintime);</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   <span class="keywordflow">if</span> (!blob) {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   }</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga55d6d1e96f8f003200274d8756a9398a">ast_channel_agent_logoff_type</a>(), blob);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;}</div><div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="json_8h_html_ae2cc29409ec389e8feaf38ec3a585d83"><div class="ttname"><a href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a></div><div class="ttdeci">AST_JSON_INT_T ast_json_int_t</div><div class="ttdoc">Primarily used to cast when packing to an &quot;I&quot; type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00087">json.h:87</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga55d6d1e96f8f003200274d8756a9398a"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga55d6d1e96f8f003200274d8756a9398a">ast_channel_agent_logoff_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_agent_logoff_type(void)</div><div class="ttdoc">Message type for agent logoff on a channel. </div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gaf03b8daa7784a26648db90614add6caa"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gaf03b8daa7784a26648db90614add6caa">ast_channel_publish_blob</a></div><div class="ttdeci">void ast_channel_publish_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01135">stasis_channels.c:1135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7a5ef1db5b0d29922a128c9422069729"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7a5ef1db5b0d29922a128c9422069729">&#9670;&nbsp;</a></span>send_alert_to_agent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_alert_to_agent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>agent_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01812">1812</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00616">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01492">ast_bridge_channel_queue_callback()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01847">caller_joined_bridge()</a>.</p>
<div class="fragment"><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;{</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d41/bridge__channel_8h.html#ad7de2a71d5af8f85035713f1f3cb69a9">ast_bridge_channel_queue_callback</a>(bridge_channel,</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a>, <a class="code" href="../../de/d11/app__agent__pool_8c.html#a951f3727bbc983c0b9a20bac17650c44">agent_alert</a>, agent_id, strlen(agent_id) + 1);</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;}</div><div class="ttc" id="app__agent__pool_8c_html_a951f3727bbc983c0b9a20bac17650c44"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a951f3727bbc983c0b9a20bac17650c44">agent_alert</a></div><div class="ttdeci">static void agent_alert(struct ast_bridge_channel *bridge_channel, const void *payload, size_t payload_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l01738">app_agent_pool.c:1738</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00616">bridge_channel.h:616</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad7de2a71d5af8f85035713f1f3cb69a9"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad7de2a71d5af8f85035713f1f3cb69a9">ast_bridge_channel_queue_callback</a></div><div class="ttdeci">int ast_bridge_channel_queue_callback(struct ast_bridge_channel *bridge_channel, enum ast_bridge_channel_custom_callback_option flags, ast_bridge_custom_callback_fn callback, const void *payload, size_t payload_size)</div><div class="ttdoc">Queue a bridge action custom callback frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01492">bridge_channel.c:1492</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a32da61f3d1a1faa6ae5211f81eb52341"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a32da61f3d1a1faa6ae5211f81eb52341">&#9670;&nbsp;</a></span>send_colp_to_agent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int send_colp_to_agent </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/d9e/structast__party__connected__line.html">ast_party_connected_line</a> *&#160;</td>
          <td class="paramname"><em>connected</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01818">1818</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01143">ast_bridge_channel_queue_control_data()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l08793">ast_connected_line_build_data()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00299">AST_CONTROL_CONNECTED_LINE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00492">ast_set_party_connected_line::id</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l00364">ast_set_party_id::name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;{</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a> <a class="code" href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a> = {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      .id.name = 1,</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      .id.number = 1,</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;      .id.subaddress = 1,</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   };</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> data[1024];  <span class="comment">/* This should be large enough */</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   <span class="keywordtype">size_t</span> datalen;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;   datalen = <a class="code" href="../../d5/d7b/channel_8h.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a>(data, <span class="keyword">sizeof</span>(data), connected, &amp;update);</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   <span class="keywordflow">if</span> (datalen == (<span class="keywordtype">size_t</span>) -1) {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;   }</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d41/bridge__channel_8h.html#abc0302bab9fb2f318db695fe1f9047d8">ast_bridge_channel_queue_control_data</a>(bridge_channel,</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a>, data, datalen);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;}</div><div class="ttc" id="channel_8h_html_ab380c81e4514ab48ca8402f7950a354a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab380c81e4514ab48ca8402f7950a354a">ast_connected_line_build_data</a></div><div class="ttdeci">int ast_connected_line_build_data(unsigned char *data, size_t datalen, const struct ast_party_connected_line *connected, const struct ast_set_party_connected_line *update)</div><div class="ttdoc">Build the connected line information data frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08793">channel.c:8793</a></div></div>
<div class="ttc" id="codec__g726_8c_html_a8c58a1d1fd9436ff5145385d3ef7a430"><div class="ttname"><a href="../../d0/d89/codec__g726_8c.html#a8c58a1d1fd9436ff5145385d3ef7a430">update</a></div><div class="ttdeci">static void update(int code_size, int y, int wi, int fi, int dq, int sr, int dqsez, struct g726_state *state_ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d89/codec__g726_8c_source.html#l00367">codec_g726.c:367</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ac976c01c12ae70e36b99b16dbfa3dda7">AST_CONTROL_CONNECTED_LINE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00299">include/asterisk/frame.h:299</a></div></div>
<div class="ttc" id="structast__set__party__connected__line_html"><div class="ttname"><a href="../../d4/dc9/structast__set__party__connected__line.html">ast_set_party_connected_line</a></div><div class="ttdoc">Indicate what information in ast_party_connected_line should be set. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00490">channel.h:490</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_abc0302bab9fb2f318db695fe1f9047d8"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#abc0302bab9fb2f318db695fe1f9047d8">ast_bridge_channel_queue_control_data</a></div><div class="ttdeci">int ast_bridge_channel_queue_control_data(struct ast_bridge_channel *bridge_channel, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Queue a control frame onto the bridge channel with data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01143">bridge_channel.c:1143</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad09fa931f468002152a3cc2d5ce25eae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad09fa931f468002152a3cc2d5ce25eae">&#9670;&nbsp;</a></span>unload_module()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int unload_module </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02624">2624</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00885">ao2_global_obj_replace</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00344">app_agent_login</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00345">app_agent_request</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00970">ast_bridge_destroy()</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>, <a class="el" href="../../db/d70/pbx__functions_8c_source.html#l00273">ast_custom_function_unregister()</a>, <a class="el" href="../../d1/d80/devicestate_8c_source.html#l00418">ast_devstate_prov_del()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07258">ast_manager_unregister()</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00392">ast_unregister_application()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00537">destroy_config()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02701">reload()</a>.</p>
<div class="fragment"><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;{</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *holding;</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;   <span class="comment">/* Unregister dialplan applications */</span></div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a358f094a1d14b589ace3b278972be56f">app_agent_login</a>);</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;   <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a872ee537b540de2ccaea4e62ed2dc016">app_agent_request</a>);</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;   <span class="comment">/* Unregister dialplan functions */</span></div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;<a class="code" href="../../de/d11/app__agent__pool_8c.html#a1ef7f429bd53528befc06ac4d0f5ff3b">agent_function</a>);</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;   <span class="comment">/* Unregister manager command */</span></div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;Agents&quot;</span>);</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;AgentLogoff&quot;</span>);</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;   <span class="comment">/* Unregister CLI commands */</span></div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a86ce161e89fb61c8534e1eca1cdcf618">cli_agents</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a86ce161e89fb61c8534e1eca1cdcf618">cli_agents</a>));</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<span class="stringliteral">&quot;Agent&quot;</span>);</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;   <span class="comment">/* Destroy agent holding bridge. */</span></div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;   holding = <a class="code" href="../../d5/da5/astobj2_8h.html#aadb92410f92a28e16f404b51bc601a80">ao2_global_obj_replace</a>(agent_holding, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;   <span class="keywordflow">if</span> (holding) {</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(holding, 0);</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;   }</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a542b526fd6c81c6193101dfbe970c2be">destroy_config</a>();</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(<a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a>);</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;   <a class="code" href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a86ce161e89fb61c8534e1eca1cdcf618"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a86ce161e89fb61c8534e1eca1cdcf618">cli_agents</a></div><div class="ttdeci">static struct ast_cli_entry cli_agents[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02520">app_agent_pool.c:2520</a></div></div>
<div class="ttc" id="devicestate_8h_html_a1ab579ae15aaca64a904c3c41d8b8b01"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a></div><div class="ttdeci">int ast_devstate_prov_del(const char *label)</div><div class="ttdoc">Remove device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00418">devicestate.c:418</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafadf012f66a9fd7ecf985ec5b9dee101"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a></div><div class="ttdeci">int ast_manager_unregister(const char *action)</div><div class="ttdoc">Unregister a registered manager command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07258">manager.c:7258</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a542b526fd6c81c6193101dfbe970c2be"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a542b526fd6c81c6193101dfbe970c2be">destroy_config</a></div><div class="ttdeci">static void destroy_config(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00537">app_agent_pool.c:537</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a872ee537b540de2ccaea4e62ed2dc016"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a872ee537b540de2ccaea4e62ed2dc016">app_agent_request</a></div><div class="ttdeci">static const char app_agent_request[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00345">app_agent_pool.c:345</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a358f094a1d14b589ace3b278972be56f"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a358f094a1d14b589ace3b278972be56f">app_agent_login</a></div><div class="ttdeci">static const char app_agent_login[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00344">app_agent_pool.c:344</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a1ef7f429bd53528befc06ac4d0f5ff3b"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a1ef7f429bd53528befc06ac4d0f5ff3b">agent_function</a></div><div class="ttdeci">static struct ast_custom_function agent_function</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02255">app_agent_pool.c:2255</a></div></div>
<div class="ttc" id="astobj2_8h_html_aadb92410f92a28e16f404b51bc601a80"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aadb92410f92a28e16f404b51bc601a80">ao2_global_obj_replace</a></div><div class="ttdeci">#define ao2_global_obj_replace(holder, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00885">astobj2.h:885</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a02691f29ac4d0ddd46ef7ebd90c3958d"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a02691f29ac4d0ddd46ef7ebd90c3958d">agents</a></div><div class="ttdeci">static struct ao2_container * agents</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00649">app_agent_pool.c:649</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ab22f32016155f7f403e7178767163d7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab22f32016155f7f403e7178767163d7d">&#9670;&nbsp;</a></span>__mod_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> __mod_info = { .<a class="el" href="../../d1/da4/res__corosync_8c.html#a8f8f80d37794cde9472343e4487ba3eb">name</a> = <a class="el" href="../../da/ddd/named__acl_8c.html#aec23fc5034c3bb08140fc021f4955877">AST_MODULE</a>, .flags = <a class="el" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a> , .description = &quot;Call center agent <a class="el" href="../../d9/d21/res__rtp__asterisk_8c.html#a2e57658a5d3ef6c4ef2774c9d5868e7c">pool</a> <a class="el" href="../../d3/d82/res__ari__applications_8c.html#a3b6853104a5ce7444515cf21e0aff2f3">applications</a>&quot; , .key = &quot;This paragraph is copyright (<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>) 2006 by Digium, Inc. \In <a class="el" href="../../d5/d14/voicin_8c.html#aed7ca058008dc3e5ee131e575abed285">order</a> for your module to load, it must return this \key via <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> function called \&quot;key\&quot;. Any code which \includes this paragraph must <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> licensed under the GNU \General Public License <a class="el" href="../../da/d7c/utils_2frame_8h.html#a56abfaab87c46691c1ef3ad0df23e864">version</a> 2 or later (at your \option). In addition to Digium's general reservations \of rights, Digium expressly reserves the right to \allow other parties to license this paragraph under \different terms. Any use of Digium, Inc. trademarks or \logos (including \&quot;Asterisk\&quot; or \&quot;Digium\&quot;) without \express written <a class="el" href="../../d4/d4c/structpermission.html">permission</a> of Digium, Inc. is prohibited.\n&quot; , .buildopt_sum = &quot;30ef0c93b36035ec78c9cfd712d36d9b&quot; , .support_level = AST_MODULE_SUPPORT_CORE, .load = load_module, .unload = unload_module, .reload = reload, .load_pri = AST_MODPRI_DEVSTATE_PROVIDER, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02716">2716</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="a1ef7f429bd53528befc06ac4d0f5ff3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1ef7f429bd53528befc06ac4d0f5ff3b">&#9670;&nbsp;</a></span>agent_function</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> agent_function</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .name = <span class="stringliteral">&quot;AGENT&quot;</span>,</div><div class="line">   .read = <a class="code" href="../../de/d11/app__agent__pool_8c.html#acf1606296839a7252342273de8f9f563">agent_function_read</a>,</div><div class="line">}</div><div class="ttc" id="app__agent__pool_8c_html_acf1606296839a7252342273de8f9f563"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#acf1606296839a7252342273de8f9f563">agent_function_read</a></div><div class="ttdeci">static int agent_function_read(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l02184">app_agent_pool.c:2184</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02255">2255</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="adc4d1d983728ada524c84213c2536921"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc4d1d983728ada524c84213c2536921">&#9670;&nbsp;</a></span>agent_holding_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> agent_holding_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Agent holding bridge deferred creation lock. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01003">1003</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01419">bridge_agent_hold_deferred_create()</a>.</p>

</div>
</div>
<a id="abe9c246e6907a134e70926a4a761ef15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abe9c246e6907a134e70926a4a761ef15">&#9670;&nbsp;</a></span>agent_login_opts</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../d2/d8d/structast__app__option.html">ast_app_option</a> agent_login_opts[128] = { [ 's' ] = { .<a class="el" href="../../dc/dc2/f2c_8h.html#abf5d144da384425ae6cb542ce6eec8d3">flag</a> = <a class="el" href="../../dc/df4/app__voicemail_8c.html#a336fb8db39bd98439132b0eda882849ea9c6a0359498684912cb0a3810e03138d">OPT_SILENT</a> }, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02101">2101</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02112">agent_login_exec()</a>.</p>

</div>
</div>
<a id="a5cbaa6e72ca2e17b3339e7031d113dc1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5cbaa6e72ca2e17b3339e7031d113dc1">&#9670;&nbsp;</a></span>agent_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> agent_type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00465">465</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="a383a6ddb87cd8afb52a9ade91d706ba9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a383a6ddb87cd8afb52a9ade91d706ba9">&#9670;&nbsp;</a></span>agent_type_blacklist</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* agent_type_blacklist[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   <span class="stringliteral">&quot;general&quot;</span>,</div><div class="line">   <span class="stringliteral">&quot;agents&quot;</span>,</div><div class="line">   <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line">}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00459">459</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="adb1d2a9b5b0247cdd038c09a4ca3e41b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adb1d2a9b5b0247cdd038c09a4ca3e41b">&#9670;&nbsp;</a></span>agent_types</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a>* agent_types[] = <a class="el" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="el" href="../../de/d11/app__agent__pool_8c.html#a5cbaa6e72ca2e17b3339e7031d113dc1">agent_type</a>)</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00475">475</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="a02691f29ac4d0ddd46ef7ebd90c3958d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a02691f29ac4d0ddd46ef7ebd90c3958d">&#9670;&nbsp;</a></span>agents</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/da9/structao2__container.html">ao2_container</a>* agents</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Container of defined agents. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00649">649</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="ae45e38e10e4b85b3161bdd0cb45b81ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae45e38e10e4b85b3161bdd0cb45b81ef">&#9670;&nbsp;</a></span>agents_conf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d9/d9c/structaco__file.html">aco_file</a> agents_conf</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   .filename = <span class="stringliteral">&quot;agents.conf&quot;</span>,</div><div class="line">   .types = <a class="code" href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a>(&amp;<a class="code" href="../../de/d11/app__agent__pool_8c.html#a72c28e8d8b5bf63d00102468e6ac4907">general_type</a>, &amp;<a class="code" href="../../de/d11/app__agent__pool_8c.html#a5cbaa6e72ca2e17b3339e7031d113dc1">agent_type</a>),</div><div class="line">}</div><div class="ttc" id="app__agent__pool_8c_html_a5cbaa6e72ca2e17b3339e7031d113dc1"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a5cbaa6e72ca2e17b3339e7031d113dc1">agent_type</a></div><div class="ttdeci">static struct aco_type agent_type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00465">app_agent_pool.c:465</a></div></div>
<div class="ttc" id="config__options_8h_html_af773eedd7f94d718752798605c687c4b"><div class="ttname"><a href="../../db/dfe/config__options_8h.html#af773eedd7f94d718752798605c687c4b">ACO_TYPES</a></div><div class="ttdeci">#define ACO_TYPES(...)</div><div class="ttdoc">A helper macro to ensure that aco_info types always have a sentinel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/dfe/config__options_8h_source.html#l00181">config_options.h:181</a></div></div>
<div class="ttc" id="app__agent__pool_8c_html_a72c28e8d8b5bf63d00102468e6ac4907"><div class="ttname"><a href="../../de/d11/app__agent__pool_8c.html#a72c28e8d8b5bf63d00102468e6ac4907">general_type</a></div><div class="ttdeci">static struct aco_type general_type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d11/app__agent__pool_8c_source.html#l00478">app_agent_pool.c:478</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00485">485</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="a358f094a1d14b589ace3b278972be56f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a358f094a1d14b589ace3b278972be56f">&#9670;&nbsp;</a></span>app_agent_login</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char app_agent_login[] = &quot;AgentLogin&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00344">344</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02624">unload_module()</a>.</p>

</div>
</div>
<a id="a872ee537b540de2ccaea4e62ed2dc016"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a872ee537b540de2ccaea4e62ed2dc016">&#9670;&nbsp;</a></span>app_agent_request</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char app_agent_request[] = &quot;AgentRequest&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00345">345</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02656">load_module()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02624">unload_module()</a>.</p>

</div>
</div>
<a id="ad60e83b9aa660040fed4d5377966cc21"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60e83b9aa660040fed4d5377966cc21">&#9670;&nbsp;</a></span>ast_module_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a>* <a class="el" href="../../dd/d5f/structast__module__info.html">ast_module_info</a> = &amp;<a class="el" href="../../d6/d7a/test__xml__escape_8c.html#ab22f32016155f7f403e7178767163d7d">__mod_info</a></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02716">2716</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="a5ec2310ede2b9b46427e10e8e0cb43e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ec2310ede2b9b46427e10e8e0cb43e6">&#9670;&nbsp;</a></span>bridge_agent_hold_v_table</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d2/dd3/structast__bridge__methods.html">ast_bridge_methods</a> bridge_agent_hold_v_table</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01394">1394</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01396">bridge_agent_hold_new()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01409">bridge_init_agent_hold()</a>.</p>

</div>
</div>
<a id="a86ce161e89fb61c8534e1eca1cdcf618"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a86ce161e89fb61c8534e1eca1cdcf618">&#9670;&nbsp;</a></span>cli_agents</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> cli_agents[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02520">2520</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
<a id="a72c28e8d8b5bf63d00102468e6ac4907"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72c28e8d8b5bf63d00102468e6ac4907">&#9670;&nbsp;</a></span>general_type</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../de/d71/structaco__type.html">aco_type</a> general_type</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l00478">478</a> of file <a class="el" href="../../de/d11/app__agent__pool_8c_source.html">app_agent_pool.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:30 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
