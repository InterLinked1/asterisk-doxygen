<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: utils.c File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main/utils.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Utility functions.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/db2/asterisk_8h_source.html">asterisk.h</a>&quot;</code><br />
<code>#include &lt;ctype.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/syscall.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &quot;<a class="el" href="../../d9/d94/network_8h_source.html">asterisk/network.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/db9/ast__version_8h_source.html">asterisk/ast_version.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dd/d42/lock_8h_source.html">asterisk/lock.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/dac/io_8h_source.html">asterisk/io.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../da/db0/md5_8h_source.html">asterisk/md5.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../db/db5/sha1_8h_source.html">asterisk/sha1.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/db0/cli_8h_source.html">asterisk/cli.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/da5/astobj2_8h_source.html">asterisk/astobj2.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d6/d90/strings_8h_source.html">asterisk/strings.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../de/df7/time_8h_source.html">asterisk/time.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d5/d60/utils_8h_source.html">asterisk/utils.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d7d/threadstorage_8h_source.html">asterisk/threadstorage.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d3/de6/include_2asterisk_2config_8h_source.html">asterisk/config.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../dc/d4d/alertpipe_8h_source.html">asterisk/alertpipe.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main/utils.c:</div>
<div class="dyncontent">
<div class="center"><img src="../../d6/d6b/main_2utils_8c__incl.png" border="0" usemap="#utils_8c" alt=""/></div>
<map name="utils_8c" id="utils_8c">
<area shape="rect" id="node2" href="../../db/db2/asterisk_8h.html" title="Asterisk main include file. File version handling, generic pbx functions. " alt="" coords="91,229,175,256"/>
<area shape="rect" id="node18" href="../../d9/d94/network_8h.html" title="Wrapper for network related headers, masking differences between various operating systems..." alt="" coords="911,379,1049,405"/>
<area shape="rect" id="node28" href="../../d5/db9/ast__version_8h.html" title="Asterisk version information. " alt="" coords="866,80,1027,107"/>
<area shape="rect" id="node29" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="1779,379,1893,405"/>
<area shape="rect" id="node31" href="../../de/df7/time_8h.html" title="Time&#45;related functions and macros. " alt="" coords="2098,453,2161,480"/>
<area shape="rect" id="node38" href="../../dc/dac/io_8h.html" title="I/O Management (derived from Cheops&#45;NG) " alt="" coords="408,304,507,331"/>
<area shape="rect" id="node41" href="../../da/db0/md5_8h.html" title="MD5 digest functions. " alt="" coords="1204,80,1321,107"/>
<area shape="rect" id="node42" href="../../db/db5/sha1_8h.html" title="asterisk/sha1.h" alt="" coords="729,155,847,181"/>
<area shape="rect" id="node43" href="../../dc/db0/cli_8h.html" title="Standard Command Line Interface. " alt="" coords="1577,80,1679,107"/>
<area shape="rect" id="node44" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="1761,304,1911,331"/>
<area shape="rect" id="node45" href="../../d6/d90/strings_8h.html" title="String manipulation functions. " alt="" coords="1372,155,1503,181"/>
<area shape="rect" id="node46" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1495,304,1609,331"/>
<area shape="rect" id="node47" href="../../dc/d7d/threadstorage_8h.html" title="Definitions to aid in the use of thread local storage. " alt="" coords="1683,229,1861,256"/>
<area shape="rect" id="node48" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="1473,229,1607,256"/>
<area shape="rect" id="node49" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1987,229,2114,256"/>
<area shape="rect" id="node50" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1204,155,1348,181"/>
<area shape="rect" id="node3" href="../../d8/d20/autoconfig_8h.html" title="asterisk/autoconfig.h" alt="" coords="491,528,645,555"/>
<area shape="rect" id="node5" href="../../de/da3/include_2asterisk_2compat_8h.html" title="General Definitions for Asterisk top level program Included by asterisk.h to handle platform&#45;specific..." alt="" coords="1321,304,1458,331"/>
<area shape="rect" id="node13" href="../../d8/d8a/astmm_8h.html" title="Asterisk memory management routines. " alt="" coords="54,304,189,331"/>
<area shape="rect" id="node4" href="../../dc/dba/buildopts_8h.html" title="asterisk/buildopts.h" alt="" coords="495,603,641,629"/>
<area shape="rect" id="node6" href="../../d4/dd1/compiler_8h.html" title="Compiler&#45;specific macros and other items. " alt="" coords="1446,453,1589,480"/>
<area shape="rect" id="node33" href="../../d5/d9d/inline__api_8h.html" title="Inlinable API function macro. " alt="" coords="2301,528,2448,555"/>
<area shape="rect" id="node36" href="../../d3/dda/backtrace_8h.html" title="Asterisk backtrace generation. " alt="" coords="1815,453,1966,480"/>
<area shape="rect" id="node37" href="../../d1/d8c/logger_8h.html" title="Support for logging to various files, console and syslog Configuration in file logger.conf. " alt="" coords="1295,453,1422,480"/>
<area shape="rect" id="node39" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="397,379,561,405"/>
<area shape="rect" id="node40" href="../../db/df1/netsock2_8h.html" title="Network socket handling. " alt="" coords="225,379,372,405"/>
</map>
</div>
</div>
<p><a href="../../de/d1f/main_2utils_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/structlock__infos.html">lock_infos</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A list of each thread's lock info.  <a href="../../d1/d14/structlock__infos.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dc/d42/structthr__arg.html">thr_arg</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Keep track of which locks a thread holds.  <a href="../../de/d84/structthr__lock__info.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a>&#160;&#160;&#160;/* ensure that inlinable API functions will <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> lock.h <a class="el" href="../../d2/d7e/ael__lex_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> required */</td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a>&#160;&#160;&#160;/* ensure that inlinable API functions will <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> this module <a class="el" href="../../d2/d7e/ael__lex_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> required */</td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a>&#160;&#160;&#160;/* ensure that inlinable API functions will <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> this module <a class="el" href="../../d2/d7e/ael__lex_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> required */</td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a>&#160;&#160;&#160;/* ensure that inlinable API functions will <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> this module <a class="el" href="../../d2/d7e/ael__lex_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> required */</td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a></td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a></td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a805616595a796949ade4a78edc628f99"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a805616595a796949ade4a78edc628f99">AST_API_MODULE</a></td></tr>
<tr class="separator:a805616595a796949ade4a78edc628f99"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae997f8b92dcbc7e61ef6a9e84df49e4d"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ae997f8b92dcbc7e61ef6a9e84df49e4d">AST_MAX_LOCKS</a>&#160;&#160;&#160;64</td></tr>
<tr class="memdesc:ae997f8b92dcbc7e61ef6a9e84df49e4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">A reasonable maximum number of locks a thread would be holding ...  <a href="#ae997f8b92dcbc7e61ef6a9e84df49e4d">More...</a><br /></td></tr>
<tr class="separator:ae997f8b92dcbc7e61ef6a9e84df49e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a146c1b2155b03eb2ffa3f4ba755034"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a>&#160;&#160;&#160;1000000</td></tr>
<tr class="separator:a6a146c1b2155b03eb2ffa3f4ba755034"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae63358852f6f7442a1bed2463f7a2256"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../d5/d60/utils_8h.html#a3990d11e35b0041fb5d0caa68ee50cb6">DO_CRASH_NORETURN</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ae63358852f6f7442a1bed2463f7a2256">__ast_assert_failed</a> (int condition, const char *condition_str, const char *file, int line, const char *function)</td></tr>
<tr class="separator:ae63358852f6f7442a1bed2463f7a2256"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3c85cb581f1ae72f2622e9dd6ddb0e09"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a3c85cb581f1ae72f2622e9dd6ddb0e09">__ast_fd_set_flags</a> (int fd, int flags, enum <a class="el" href="../../d5/d60/utils_8h.html#a3c48a3d3ab4ed9f3f8667ed62a16b82c">ast_fd_flag_operation</a> op, const char *file, int lineno, const char *function)</td></tr>
<tr class="separator:a3c85cb581f1ae72f2622e9dd6ddb0e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0114e8cab34567d42d506ad18c7ff28e"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a0114e8cab34567d42d506ad18c7ff28e">__init_inet_ntoa_buf</a> (void)</td></tr>
<tr class="separator:a0114e8cab34567d42d506ad18c7ff28e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2fe93a7ac760f085e33a7c0ca8f2ef9f"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a2fe93a7ac760f085e33a7c0ca8f2ef9f">__init_thread_lock_info</a> (void)</td></tr>
<tr class="memdesc:a2fe93a7ac760f085e33a7c0ca8f2ef9f"><td class="mdescLeft">&#160;</td><td class="mdescRight">The thread storage key for per-thread lock info.  <a href="#a2fe93a7ac760f085e33a7c0ca8f2ef9f">More...</a><br /></td></tr>
<tr class="separator:a2fe93a7ac760f085e33a7c0ca8f2ef9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12fdb94f6849011cfb98e881874198bb"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a12fdb94f6849011cfb98e881874198bb">__init_thread_user_interface_tl</a> (void)</td></tr>
<tr class="memdesc:a12fdb94f6849011cfb98e881874198bb"><td class="mdescLeft">&#160;</td><td class="mdescRight">A thread local indicating whether the current thread is a user interface.  <a href="#a12fdb94f6849011cfb98e881874198bb">More...</a><br /></td></tr>
<tr class="separator:a12fdb94f6849011cfb98e881874198bb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a156a721a76666d2c8eb0b0a5e7ecda0a"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a156a721a76666d2c8eb0b0a5e7ecda0a">append_backtrace_information</a> (struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, struct <a class="el" href="../../dd/d95/structast__bt.html">ast_bt</a> *bt)</td></tr>
<tr class="separator:a156a721a76666d2c8eb0b0a5e7ecda0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acd9e4b05a5bb427d74a3c5ef4737a1da"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#acd9e4b05a5bb427d74a3c5ef4737a1da">append_lock_information</a> (struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **<a class="el" href="../../d8/d30/main_2security__events_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>, struct <a class="el" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="el" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>, int i)</td></tr>
<tr class="separator:acd9e4b05a5bb427d74a3c5ef4737a1da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3d97e001a2093c5cbb1a22c4cbb80840"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a3d97e001a2093c5cbb1a22c4cbb80840">ast_background_stacksize</a> (void)</td></tr>
<tr class="separator:a3d97e001a2093c5cbb1a22c4cbb80840"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e7e06bd20719ecfd58b67f230780ffa"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a> (unsigned char *dst, const char *src, int <a class="el" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</td></tr>
<tr class="memdesc:a1e7e06bd20719ecfd58b67f230780ffa"><td class="mdescLeft">&#160;</td><td class="mdescRight">decode BASE64 encoded text  <a href="#a1e7e06bd20719ecfd58b67f230780ffa">More...</a><br /></td></tr>
<tr class="separator:a1e7e06bd20719ecfd58b67f230780ffa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc19b2c41e1627545b35e68d2dabd44d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#adc19b2c41e1627545b35e68d2dabd44d">ast_base64decode_string</a> (const char *src)</td></tr>
<tr class="memdesc:adc19b2c41e1627545b35e68d2dabd44d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode BASE64 encoded text and return the string.  <a href="#adc19b2c41e1627545b35e68d2dabd44d">More...</a><br /></td></tr>
<tr class="separator:adc19b2c41e1627545b35e68d2dabd44d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a555dad1bd5b23acf01cf08f1affab879"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a> (char *dst, const unsigned char *src, int srclen, int <a class="el" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</td></tr>
<tr class="memdesc:a555dad1bd5b23acf01cf08f1affab879"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encode data in base64.  <a href="#a555dad1bd5b23acf01cf08f1affab879">More...</a><br /></td></tr>
<tr class="separator:a555dad1bd5b23acf01cf08f1affab879"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc46a030bcce6696e31ac29a79558b53"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#abc46a030bcce6696e31ac29a79558b53">ast_base64encode_full</a> (char *dst, const unsigned char *src, int srclen, int <a class="el" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, int linebreaks)</td></tr>
<tr class="memdesc:abc46a030bcce6696e31ac29a79558b53"><td class="mdescLeft">&#160;</td><td class="mdescRight">encode text to BASE64 coding  <a href="#abc46a030bcce6696e31ac29a79558b53">More...</a><br /></td></tr>
<tr class="separator:abc46a030bcce6696e31ac29a79558b53"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc47048033d8307d1584e72c35f3c6da"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#abc47048033d8307d1584e72c35f3c6da">ast_base64encode_string</a> (const char *src)</td></tr>
<tr class="memdesc:abc47048033d8307d1584e72c35f3c6da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encode to BASE64 and return encoded string.  <a href="#abc47048033d8307d1584e72c35f3c6da">More...</a><br /></td></tr>
<tr class="separator:abc47048033d8307d1584e72c35f3c6da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b078a418a08b4d4600bb7fc33d6376b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a8b078a418a08b4d4600bb7fc33d6376b">ast_base64url_decode</a> (unsigned char *dst, const char *src, int <a class="el" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</td></tr>
<tr class="memdesc:a8b078a418a08b4d4600bb7fc33d6376b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode data from base64 URL.  <a href="#a8b078a418a08b4d4600bb7fc33d6376b">More...</a><br /></td></tr>
<tr class="separator:a8b078a418a08b4d4600bb7fc33d6376b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4296e13b9fbe979767f71d7315b9f66e"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a4296e13b9fbe979767f71d7315b9f66e">ast_base64url_decode_string</a> (const char *src)</td></tr>
<tr class="memdesc:a4296e13b9fbe979767f71d7315b9f66e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode string from base64 URL.  <a href="#a4296e13b9fbe979767f71d7315b9f66e">More...</a><br /></td></tr>
<tr class="separator:a4296e13b9fbe979767f71d7315b9f66e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a956327335a1d388ea458cb5401e6408f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a956327335a1d388ea458cb5401e6408f">ast_base64url_encode</a> (char *dst, const unsigned char *src, int srclen, int <a class="el" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)</td></tr>
<tr class="memdesc:a956327335a1d388ea458cb5401e6408f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encode data in base64 URL.  <a href="#a956327335a1d388ea458cb5401e6408f">More...</a><br /></td></tr>
<tr class="separator:a956327335a1d388ea458cb5401e6408f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d69201d3f746459b4da7a9113c03cca"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a1d69201d3f746459b4da7a9113c03cca">ast_base64url_encode_full</a> (char *dst, const unsigned char *src, int srclen, int <a class="el" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, int linebreaks)</td></tr>
<tr class="memdesc:a1d69201d3f746459b4da7a9113c03cca"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as ast_base64encode_full but for base64 URL.  <a href="#a1d69201d3f746459b4da7a9113c03cca">More...</a><br /></td></tr>
<tr class="separator:a1d69201d3f746459b4da7a9113c03cca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa9c299b1a6f79bd9ad798eb8555096a4"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aa9c299b1a6f79bd9ad798eb8555096a4">ast_base64url_encode_string</a> (const char *src)</td></tr>
<tr class="memdesc:aa9c299b1a6f79bd9ad798eb8555096a4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Encode string in base64 URL.  <a href="#aa9c299b1a6f79bd9ad798eb8555096a4">More...</a><br /></td></tr>
<tr class="separator:aa9c299b1a6f79bd9ad798eb8555096a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a603020160399d4876ec09fd299ebcaf9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a603020160399d4876ec09fd299ebcaf9">ast_build_string</a> (char **buffer, size_t *space, const char *fmt,...)</td></tr>
<tr class="memdesc:a603020160399d4876ec09fd299ebcaf9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a string in a buffer, designed to be called repeatedly.  <a href="#a603020160399d4876ec09fd299ebcaf9">More...</a><br /></td></tr>
<tr class="separator:a603020160399d4876ec09fd299ebcaf9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7cc2336f3642ec07be6058e7fa746e71"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a7cc2336f3642ec07be6058e7fa746e71">ast_build_string_va</a> (char **buffer, size_t *space, const char *fmt, va_list ap)</td></tr>
<tr class="memdesc:a7cc2336f3642ec07be6058e7fa746e71"><td class="mdescLeft">&#160;</td><td class="mdescRight">Build a string in a buffer, designed to be called repeatedly.  <a href="#a7cc2336f3642ec07be6058e7fa746e71">More...</a><br /></td></tr>
<tr class="separator:a7cc2336f3642ec07be6058e7fa746e71"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38faf2987c375335b2773964aabf69b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a38faf2987c375335b2773964aabf69b3">ast_carefulwrite</a> (int fd, char *s, int <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, int timeoutms)</td></tr>
<tr class="memdesc:a38faf2987c375335b2773964aabf69b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to write string, but wait no more than ms milliseconds before timing out.  <a href="#a38faf2987c375335b2773964aabf69b3">More...</a><br /></td></tr>
<tr class="separator:a38faf2987c375335b2773964aabf69b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad006fcd49cd8cfb2ca8ae5ee4e4bf708"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ad006fcd49cd8cfb2ca8ae5ee4e4bf708">ast_check_ipv6</a> (void)</td></tr>
<tr class="memdesc:ad006fcd49cd8cfb2ca8ae5ee4e4bf708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test that an OS supports IPv6 Networking.  <a href="#ad006fcd49cd8cfb2ca8ae5ee4e4bf708">More...</a><br /></td></tr>
<tr class="separator:ad006fcd49cd8cfb2ca8ae5ee4e4bf708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8bd0b54402131cb70f10de56313acab8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a8bd0b54402131cb70f10de56313acab8">ast_compare_versions</a> (const char *version1, const char *version2)</td></tr>
<tr class="memdesc:a8bd0b54402131cb70f10de56313acab8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare 2 major.minor.patch.extra version strings.  <a href="#a8bd0b54402131cb70f10de56313acab8">More...</a><br /></td></tr>
<tr class="separator:a8bd0b54402131cb70f10de56313acab8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a994e667dad5f5de31bc0d9c1b95b1b8c"><td class="memItemLeft" align="right" valign="top">void <a class="el" href="../../d5/d60/utils_8h.html#a3990d11e35b0041fb5d0caa68ee50cb6">DO_CRASH_NORETURN</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a994e667dad5f5de31bc0d9c1b95b1b8c">ast_do_crash</a> (void)</td></tr>
<tr class="memdesc:a994e667dad5f5de31bc0d9c1b95b1b8c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Force a crash if DO_CRASH is defined.  <a href="#a994e667dad5f5de31bc0d9c1b95b1b8c">More...</a><br /></td></tr>
<tr class="separator:a994e667dad5f5de31bc0d9c1b95b1b8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a821120ebd995b34627205de93d046d8a"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a821120ebd995b34627205de93d046d8a">ast_dump_locks</a> (void)</td></tr>
<tr class="memdesc:a821120ebd995b34627205de93d046d8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Generate a lock dump equivalent to "core show locks".  <a href="#a821120ebd995b34627205de93d046d8a">More...</a><br /></td></tr>
<tr class="separator:a821120ebd995b34627205de93d046d8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4e9f7c7ca75b0ff48b60b136e3961b61"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a4e9f7c7ca75b0ff48b60b136e3961b61">ast_eid_cmp</a> (const struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *eid1, const struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *eid2)</td></tr>
<tr class="memdesc:a4e9f7c7ca75b0ff48b60b136e3961b61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Compare two EIDs.  <a href="#a4e9f7c7ca75b0ff48b60b136e3961b61">More...</a><br /></td></tr>
<tr class="separator:a4e9f7c7ca75b0ff48b60b136e3961b61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9052010ef014bd56be478fab26feb2e1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a9052010ef014bd56be478fab26feb2e1">ast_eid_is_empty</a> (const struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *eid)</td></tr>
<tr class="memdesc:a9052010ef014bd56be478fab26feb2e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if EID is empty.  <a href="#a9052010ef014bd56be478fab26feb2e1">More...</a><br /></td></tr>
<tr class="separator:a9052010ef014bd56be478fab26feb2e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ebf6841073ea2a063a0c86a5092a85b"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a> (char *s, int maxlen, struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *eid)</td></tr>
<tr class="memdesc:a8ebf6841073ea2a063a0c86a5092a85b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert an EID to a string.  <a href="#a8ebf6841073ea2a063a0c86a5092a85b">More...</a><br /></td></tr>
<tr class="separator:a8ebf6841073ea2a063a0c86a5092a85b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89056bba460d0aa179d3a3ddc0af472a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a89056bba460d0aa179d3a3ddc0af472a">ast_enable_packet_fragmentation</a> (int sock)</td></tr>
<tr class="memdesc:a89056bba460d0aa179d3a3ddc0af472a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disable PMTU discovery on a socket.  <a href="#a89056bba460d0aa179d3a3ddc0af472a">More...</a><br /></td></tr>
<tr class="separator:a89056bba460d0aa179d3a3ddc0af472a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74d504bc3094ec99b1618a1c41b68e19"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a74d504bc3094ec99b1618a1c41b68e19">ast_escape</a> (char *dest, const char *s, size_t size, const char *to_escape)</td></tr>
<tr class="memdesc:a74d504bc3094ec99b1618a1c41b68e19"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escape the 'to_escape' characters in the given string.  <a href="#a74d504bc3094ec99b1618a1c41b68e19">More...</a><br /></td></tr>
<tr class="separator:a74d504bc3094ec99b1618a1c41b68e19"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a292ef9ea10c2bda74db29c6c60add439"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a292ef9ea10c2bda74db29c6c60add439">ast_escape_alloc</a> (const char *s, const char *to_escape)</td></tr>
<tr class="memdesc:a292ef9ea10c2bda74db29c6c60add439"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escape the 'to_escape' characters in the given string.  <a href="#a292ef9ea10c2bda74db29c6c60add439">More...</a><br /></td></tr>
<tr class="separator:a292ef9ea10c2bda74db29c6c60add439"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a365aacee32b2b6eb95f871376cf2aeec"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a365aacee32b2b6eb95f871376cf2aeec">ast_escape_c</a> (char *dest, const char *s, size_t size)</td></tr>
<tr class="memdesc:a365aacee32b2b6eb95f871376cf2aeec"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escape standard 'C' sequences in the given string.  <a href="#a365aacee32b2b6eb95f871376cf2aeec">More...</a><br /></td></tr>
<tr class="separator:a365aacee32b2b6eb95f871376cf2aeec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a62bd9f69e2bd9ccd3760d9681987eca0"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a62bd9f69e2bd9ccd3760d9681987eca0">ast_escape_c_alloc</a> (const char *s)</td></tr>
<tr class="memdesc:a62bd9f69e2bd9ccd3760d9681987eca0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escape standard 'C' sequences in the given string.  <a href="#a62bd9f69e2bd9ccd3760d9681987eca0">More...</a><br /></td></tr>
<tr class="separator:a62bd9f69e2bd9ccd3760d9681987eca0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b31ed81ab98c5aa5fc1d298874abf54"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a4b31ed81ab98c5aa5fc1d298874abf54">ast_escape_quoted</a> (const char *<a class="el" href="../../d5/dba/stringfields_8c.html#a3d4e66c2067ac2d83b7f65a222e5ab54">string</a>, char *outbuf, int buflen)</td></tr>
<tr class="memdesc:a4b31ed81ab98c5aa5fc1d298874abf54"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escape characters found in a quoted string.  <a href="#a4b31ed81ab98c5aa5fc1d298874abf54">More...</a><br /></td></tr>
<tr class="separator:a4b31ed81ab98c5aa5fc1d298874abf54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73280c4c3636bb644afd1b5e49e73222"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a73280c4c3636bb644afd1b5e49e73222">ast_escape_semicolons</a> (const char *<a class="el" href="../../d5/dba/stringfields_8c.html#a3d4e66c2067ac2d83b7f65a222e5ab54">string</a>, char *outbuf, int buflen)</td></tr>
<tr class="memdesc:a73280c4c3636bb644afd1b5e49e73222"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escape semicolons found in a string.  <a href="#a73280c4c3636bb644afd1b5e49e73222">More...</a><br /></td></tr>
<tr class="separator:a73280c4c3636bb644afd1b5e49e73222"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab974fc2bc77e80f85dda82b5cf14bf58"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ab974fc2bc77e80f85dda82b5cf14bf58">ast_false</a> (const char *s)</td></tr>
<tr class="memdesc:ab974fc2bc77e80f85dda82b5cf14bf58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make sure something is false. Determine if a string containing a boolean value is "false". This function checks to see whether a string passed to it is an indication of an "false" value. It checks to see if the string is "no", "false", "n", "f", "off" or "0".  <a href="#ab974fc2bc77e80f85dda82b5cf14bf58">More...</a><br /></td></tr>
<tr class="separator:ab974fc2bc77e80f85dda82b5cf14bf58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34ed7a76195d923c099606f796294a3b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a34ed7a76195d923c099606f796294a3b">ast_file_is_readable</a> (const char *filename)</td></tr>
<tr class="memdesc:a34ed7a76195d923c099606f796294a3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Test that a file exists and is readable by the effective user.  <a href="#a34ed7a76195d923c099606f796294a3b">More...</a><br /></td></tr>
<tr class="separator:a34ed7a76195d923c099606f796294a3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacd7565f51724188ecf0f21f2a43fb1e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aacd7565f51724188ecf0f21f2a43fb1e">ast_find_lock_info</a> (void *lock_addr, char *filename, size_t filename_size, int *lineno, char *func, size_t func_size, char *mutex_name, size_t mutex_name_size)</td></tr>
<tr class="memdesc:aacd7565f51724188ecf0f21f2a43fb1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">retrieve lock info for the specified mutex  <a href="#aacd7565f51724188ecf0f21f2a43fb1e">More...</a><br /></td></tr>
<tr class="separator:aacd7565f51724188ecf0f21f2a43fb1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6414288234db8cadefa9680e8ac0f968"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a6414288234db8cadefa9680e8ac0f968">ast_format_duration_hh_mm_ss</a> (int duration, char *<a class="el" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, size_t length)</td></tr>
<tr class="memdesc:a6414288234db8cadefa9680e8ac0f968"><td class="mdescLeft">&#160;</td><td class="mdescRight">Formats a duration into HH:MM:SS.  <a href="#a6414288234db8cadefa9680e8ac0f968">More...</a><br /></td></tr>
<tr class="separator:a6414288234db8cadefa9680e8ac0f968"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78ce13d749925cbdaa7625e8dbdcbf7f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a78ce13d749925cbdaa7625e8dbdcbf7f">ast_get_tid</a> (void)</td></tr>
<tr class="memdesc:a78ce13d749925cbdaa7625e8dbdcbf7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get current thread ID.  <a href="#a78ce13d749925cbdaa7625e8dbdcbf7f">More...</a><br /></td></tr>
<tr class="separator:a78ce13d749925cbdaa7625e8dbdcbf7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3b5457e5f5679935093d94b0f788769e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a3b5457e5f5679935093d94b0f788769e">ast_get_time_t</a> (const char *src, time_t *dst, time_t _default, int *consumed)</td></tr>
<tr class="memdesc:a3b5457e5f5679935093d94b0f788769e"><td class="mdescLeft">&#160;</td><td class="mdescRight">get values from config variables.  <a href="#a3b5457e5f5679935093d94b0f788769e">More...</a><br /></td></tr>
<tr class="separator:a3b5457e5f5679935093d94b0f788769e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70853b91fea6436a8234ee488d4bae54"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a70853b91fea6436a8234ee488d4bae54">ast_get_timeval</a> (const char *src, struct timeval *dst, struct timeval _default, int *consumed)</td></tr>
<tr class="memdesc:a70853b91fea6436a8234ee488d4bae54"><td class="mdescLeft">&#160;</td><td class="mdescRight">get values from config variables.  <a href="#a70853b91fea6436a8234ee488d4bae54">More...</a><br /></td></tr>
<tr class="separator:a70853b91fea6436a8234ee488d4bae54"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad3b63ee1041593219ef0765b28d70442"><td class="memItemLeft" align="right" valign="top">struct hostent *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ad3b63ee1041593219ef0765b28d70442">ast_gethostbyname</a> (const char *<a class="el" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>, struct <a class="el" href="../../db/d2b/structast__hostent.html">ast_hostent</a> *<a class="el" href="../../d0/d80/chan__skinny_8c.html#aa0f575fa3882aa394cc287edba645a35">hp</a>)</td></tr>
<tr class="memdesc:ad3b63ee1041593219ef0765b28d70442"><td class="mdescLeft">&#160;</td><td class="mdescRight">Re-entrant (thread safe) version of gethostbyname that replaces the standard gethostbyname (which is not thread safe)  <a href="#ad3b63ee1041593219ef0765b28d70442">More...</a><br /></td></tr>
<tr class="separator:ad3b63ee1041593219ef0765b28d70442"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5a735cb59e8a8ddd78078d396db7e106"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a5a735cb59e8a8ddd78078d396db7e106">ast_inet_ntoa</a> (struct in_addr ia)</td></tr>
<tr class="memdesc:a5a735cb59e8a8ddd78078d396db7e106"><td class="mdescLeft">&#160;</td><td class="mdescRight">ast_inet_ntoa: Recursive thread safe replacement of inet_ntoa  <a href="#a5a735cb59e8a8ddd78078d396db7e106">More...</a><br /></td></tr>
<tr class="separator:a5a735cb59e8a8ddd78078d396db7e106"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb2b3d060d0cd9d92c91800c9d582ac9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#afb2b3d060d0cd9d92c91800c9d582ac9">ast_join_delim</a> (char *s, size_t <a class="el" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, const char *const w[], unsigned int size, char delim)</td></tr>
<tr class="separator:afb2b3d060d0cd9d92c91800c9d582ac9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2a6974e1f96eb9f9a6f6dcb9875c3e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ab2a6974e1f96eb9f9a6f6dcb9875c3e0">ast_log_show_lock</a> (void *this_lock_addr)</td></tr>
<tr class="memdesc:ab2a6974e1f96eb9f9a6f6dcb9875c3e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">log info for the current lock with <a class="el" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log()</a>.  <a href="#ab2a6974e1f96eb9f9a6f6dcb9875c3e0">More...</a><br /></td></tr>
<tr class="separator:ab2a6974e1f96eb9f9a6f6dcb9875c3e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3970ea8e4a2aabd268c24203e5c40dc2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a3970ea8e4a2aabd268c24203e5c40dc2">ast_mark_lock_acquired</a> (void *lock_addr)</td></tr>
<tr class="memdesc:a3970ea8e4a2aabd268c24203e5c40dc2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the last lock as acquired.  <a href="#a3970ea8e4a2aabd268c24203e5c40dc2">More...</a><br /></td></tr>
<tr class="separator:a3970ea8e4a2aabd268c24203e5c40dc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ed1f5e44323dd2f45fd091e4480550a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a0ed1f5e44323dd2f45fd091e4480550a">ast_mark_lock_failed</a> (void *lock_addr)</td></tr>
<tr class="memdesc:a0ed1f5e44323dd2f45fd091e4480550a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mark the last lock as failed (trylock)  <a href="#a0ed1f5e44323dd2f45fd091e4480550a">More...</a><br /></td></tr>
<tr class="separator:a0ed1f5e44323dd2f45fd091e4480550a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee8200caadc6a4b5afe01ea37fd26cb3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aee8200caadc6a4b5afe01ea37fd26cb3">ast_md5_hash</a> (char *output, const char *<a class="el" href="../../d2/d7e/ael__lex_8c.html#a5a634cf4429798b1c921a81de8250051">input</a>)</td></tr>
<tr class="memdesc:aee8200caadc6a4b5afe01ea37fd26cb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce 32 char MD5 hash of value.  <a href="#aee8200caadc6a4b5afe01ea37fd26cb3">More...</a><br /></td></tr>
<tr class="separator:aee8200caadc6a4b5afe01ea37fd26cb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7c38859ed90e96df2b0a0fdf843769d0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a> (const char *path, int mode)</td></tr>
<tr class="memdesc:a7c38859ed90e96df2b0a0fdf843769d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively create directory path.  <a href="#a7c38859ed90e96df2b0a0fdf843769d0">More...</a><br /></td></tr>
<tr class="separator:a7c38859ed90e96df2b0a0fdf843769d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a624b98abd96c41fb9ce72c005217128b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a624b98abd96c41fb9ce72c005217128b">ast_parse_digest</a> (const char *digest, struct <a class="el" href="../../da/db3/structast__http__digest.html">ast_http_digest</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a156f09c32102fa036620ad75c3ee4fbf">d</a>, int <a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>, int pedantic)</td></tr>
<tr class="memdesc:a624b98abd96c41fb9ce72c005217128b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Parse digest authorization header.  <a href="#a624b98abd96c41fb9ce72c005217128b">More...</a><br /></td></tr>
<tr class="separator:a624b98abd96c41fb9ce72c005217128b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3543b8258edfa9140d45147013bc6919"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a3543b8258edfa9140d45147013bc6919">ast_process_quotes_and_slashes</a> (char *start, char find, char replace_with)</td></tr>
<tr class="memdesc:a3543b8258edfa9140d45147013bc6919"><td class="mdescLeft">&#160;</td><td class="mdescRight">Process a string to find and replace characters.  <a href="#a3543b8258edfa9140d45147013bc6919">More...</a><br /></td></tr>
<tr class="separator:a3543b8258edfa9140d45147013bc6919"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af13d115905cb377f2e1b2e46fec92257"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#af13d115905cb377f2e1b2e46fec92257">ast_pthread_create_detached_stack</a> (pthread_t *<a class="el" href="../../da/ddc/res__timing__pthread_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>, pthread_attr_t *attr, void *(*start_routine)(void *), void *data, size_t stacksize, const char *file, const char *caller, int line, const char *start_fn)</td></tr>
<tr class="separator:af13d115905cb377f2e1b2e46fec92257"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af740ee3fba7768010783e3faaf5aeb12"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#af740ee3fba7768010783e3faaf5aeb12">ast_pthread_create_stack</a> (pthread_t *<a class="el" href="../../da/ddc/res__timing__pthread_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>, pthread_attr_t *attr, void *(*start_routine)(void *), void *data, size_t stacksize, const char *file, const char *caller, int line, const char *start_fn)</td></tr>
<tr class="separator:af740ee3fba7768010783e3faaf5aeb12"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b4f10b070e95ba413e258a3e4b03c20"><td class="memItemLeft" align="right" valign="top">long int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a7b4f10b070e95ba413e258a3e4b03c20">ast_random</a> (void)</td></tr>
<tr class="separator:a7b4f10b070e95ba413e258a3e4b03c20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7a2c1bf0a98df4a52ee48a9d9e25510"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#af7a2c1bf0a98df4a52ee48a9d9e25510">ast_regex_string_to_regex_pattern</a> (const char *regex_string, struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **regex_pattern)</td></tr>
<tr class="memdesc:af7a2c1bf0a98df4a52ee48a9d9e25510"><td class="mdescLeft">&#160;</td><td class="mdescRight">Given a string regex_string in the form of "/regex/", convert it into the form of "regex".  <a href="#af7a2c1bf0a98df4a52ee48a9d9e25510">More...</a><br /></td></tr>
<tr class="separator:af7a2c1bf0a98df4a52ee48a9d9e25510"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a904a6933b710e14c7fa2029a0f0cc91a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a904a6933b710e14c7fa2029a0f0cc91a">ast_remaining_ms</a> (struct timeval start, int max_ms)</td></tr>
<tr class="memdesc:a904a6933b710e14c7fa2029a0f0cc91a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Calculate remaining milliseconds given a starting timestamp and upper bound.  <a href="#a904a6933b710e14c7fa2029a0f0cc91a">More...</a><br /></td></tr>
<tr class="separator:a904a6933b710e14c7fa2029a0f0cc91a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a64c71c091e79908c7a05cfdad1389f58"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a64c71c091e79908c7a05cfdad1389f58">ast_remove_lock_info</a> (void *lock_addr, struct <a class="el" href="../../dd/d95/structast__bt.html">ast_bt</a> *bt)</td></tr>
<tr class="memdesc:a64c71c091e79908c7a05cfdad1389f58"><td class="mdescLeft">&#160;</td><td class="mdescRight">remove lock info for the current thread  <a href="#a64c71c091e79908c7a05cfdad1389f58">More...</a><br /></td></tr>
<tr class="separator:a64c71c091e79908c7a05cfdad1389f58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae01ad140af5f1041395f4355ed0f4d60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ae01ad140af5f1041395f4355ed0f4d60">ast_replace_subargument_delimiter</a> (char *s)</td></tr>
<tr class="memdesc:ae01ad140af5f1041395f4355ed0f4d60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Replace '^' in a string with ','.  <a href="#ae01ad140af5f1041395f4355ed0f4d60">More...</a><br /></td></tr>
<tr class="separator:ae01ad140af5f1041395f4355ed0f4d60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0857d6245dd36cd605a738f3af67b910"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a0857d6245dd36cd605a738f3af67b910">ast_restore_lock_info</a> (void *lock_addr)</td></tr>
<tr class="separator:a0857d6245dd36cd605a738f3af67b910"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f26830793845a2db821147d7e9f33d0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a1f26830793845a2db821147d7e9f33d0">ast_safe_mkdir</a> (const char *base_path, const char *path, int mode)</td></tr>
<tr class="memdesc:a1f26830793845a2db821147d7e9f33d0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Recursively create directory path, but only if it resolves within the given <em>base_path</em>.  <a href="#a1f26830793845a2db821147d7e9f33d0">More...</a><br /></td></tr>
<tr class="separator:a1f26830793845a2db821147d7e9f33d0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c527f8466f7653b16cb694ba5668092"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a4c527f8466f7653b16cb694ba5668092">ast_set_default_eid</a> (struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *eid)</td></tr>
<tr class="memdesc:a4c527f8466f7653b16cb694ba5668092"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill in an <a class="el" href="../../d0/d86/structast__eid.html" title="An Entity ID is essentially a MAC address, brief and unique. ">ast_eid</a> with the default eid of this machine.  <a href="#a4c527f8466f7653b16cb694ba5668092">More...</a><br /></td></tr>
<tr class="separator:a4c527f8466f7653b16cb694ba5668092"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af35c6f780502c691f0ae35e1d0f7a444"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#af35c6f780502c691f0ae35e1d0f7a444">ast_sha1_hash</a> (char *output, const char *<a class="el" href="../../d2/d7e/ael__lex_8c.html#a5a634cf4429798b1c921a81de8250051">input</a>)</td></tr>
<tr class="memdesc:af35c6f780502c691f0ae35e1d0f7a444"><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce 40 char SHA1 hash of value.  <a href="#af35c6f780502c691f0ae35e1d0f7a444">More...</a><br /></td></tr>
<tr class="separator:af35c6f780502c691f0ae35e1d0f7a444"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac49517ab46be0ea328d21ac2e9b0da5f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ac49517ab46be0ea328d21ac2e9b0da5f">ast_sha1_hash_uint</a> (uint8_t *digest, const char *<a class="el" href="../../d2/d7e/ael__lex_8c.html#a5a634cf4429798b1c921a81de8250051">input</a>)</td></tr>
<tr class="memdesc:ac49517ab46be0ea328d21ac2e9b0da5f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Produce a 20 byte SHA1 hash of value.  <a href="#ac49517ab46be0ea328d21ac2e9b0da5f">More...</a><br /></td></tr>
<tr class="separator:ac49517ab46be0ea328d21ac2e9b0da5f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a349a86c7c5c6717af32e587fc228060c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a349a86c7c5c6717af32e587fc228060c">ast_store_lock_info</a> (enum <a class="el" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>, const char *filename, int line_num, const char *func, const char *lock_name, void *lock_addr, struct <a class="el" href="../../dd/d95/structast__bt.html">ast_bt</a> *bt)</td></tr>
<tr class="memdesc:a349a86c7c5c6717af32e587fc228060c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store lock info for the current thread.  <a href="#a349a86c7c5c6717af32e587fc228060c">More...</a><br /></td></tr>
<tr class="separator:a349a86c7c5c6717af32e587fc228060c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad60a8c795e1f64b7beeed705425c555f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ad60a8c795e1f64b7beeed705425c555f">ast_str_to_eid</a> (struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *eid, const char *s)</td></tr>
<tr class="memdesc:ad60a8c795e1f64b7beeed705425c555f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert a string into an EID.  <a href="#ad60a8c795e1f64b7beeed705425c555f">More...</a><br /></td></tr>
<tr class="separator:ad60a8c795e1f64b7beeed705425c555f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeb597bdc9a1209c2e7dd8af04de43485"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a> (char *s, const char *beg_quotes, const char *end_quotes)</td></tr>
<tr class="memdesc:aeb597bdc9a1209c2e7dd8af04de43485"><td class="mdescLeft">&#160;</td><td class="mdescRight">Strip leading/trailing whitespace and quotes from a string.  <a href="#aeb597bdc9a1209c2e7dd8af04de43485">More...</a><br /></td></tr>
<tr class="separator:aeb597bdc9a1209c2e7dd8af04de43485"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae03dd5574a7410a0afc22e34d26de752"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ae03dd5574a7410a0afc22e34d26de752">ast_strsep</a> (char **iss, const char sep, uint32_t flags)</td></tr>
<tr class="memdesc:ae03dd5574a7410a0afc22e34d26de752"><td class="mdescLeft">&#160;</td><td class="mdescRight">Act like strsep but ignore separators inside quotes.  <a href="#ae03dd5574a7410a0afc22e34d26de752">More...</a><br /></td></tr>
<tr class="separator:ae03dd5574a7410a0afc22e34d26de752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a40193d8dbd051ad5afa5da543a52da0d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a40193d8dbd051ad5afa5da543a52da0d">ast_suspend_lock_info</a> (void *lock_addr)</td></tr>
<tr class="separator:a40193d8dbd051ad5afa5da543a52da0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a015e7a1c3014aa7446f6e1696710088c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a015e7a1c3014aa7446f6e1696710088c">ast_thread_is_user_interface</a> (void)</td></tr>
<tr class="memdesc:a015e7a1c3014aa7446f6e1696710088c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether the current thread is a user interface.  <a href="#a015e7a1c3014aa7446f6e1696710088c">More...</a><br /></td></tr>
<tr class="separator:a015e7a1c3014aa7446f6e1696710088c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4dfa6ab2843303516a1e66ca4c1558f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a4dfa6ab2843303516a1e66ca4c1558f0">ast_thread_user_interface_set</a> (int is_user_interface)</td></tr>
<tr class="memdesc:a4dfa6ab2843303516a1e66ca4c1558f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the current thread's user interface status.  <a href="#a4dfa6ab2843303516a1e66ca4c1558f0">More...</a><br /></td></tr>
<tr class="separator:a4dfa6ab2843303516a1e66ca4c1558f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab1f08732bd824bcae476843187180755"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ab1f08732bd824bcae476843187180755">ast_to_camel_case_delim</a> (const char *s, const char *delim)</td></tr>
<tr class="separator:ab1f08732bd824bcae476843187180755"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0d2fe097c3b32d8f9db56f35812e694"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ac0d2fe097c3b32d8f9db56f35812e694">ast_true</a> (const char *s)</td></tr>
<tr class="memdesc:ac0d2fe097c3b32d8f9db56f35812e694"><td class="mdescLeft">&#160;</td><td class="mdescRight">Make sure something is true. Determine if a string containing a boolean value is "true". This function checks to see whether a string passed to it is an indication of an "true" value. It checks to see if the string is "yes", "true", "y", "t", "on" or "1".  <a href="#ac0d2fe097c3b32d8f9db56f35812e694">More...</a><br /></td></tr>
<tr class="separator:ac0d2fe097c3b32d8f9db56f35812e694"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a97e1bb8fbd7a103212789e87e7ed6073"><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a> (struct timeval <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, struct timeval <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>)</td></tr>
<tr class="memdesc:a97e1bb8fbd7a103212789e87e7ed6073"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the sum of two timevals a + b.  <a href="#a97e1bb8fbd7a103212789e87e7ed6073">More...</a><br /></td></tr>
<tr class="separator:a97e1bb8fbd7a103212789e87e7ed6073"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa13b651c18bc6004cab21ac041d44dd8"><td class="memItemLeft" align="right" valign="top">struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a> (struct timeval <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>, struct timeval <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>)</td></tr>
<tr class="memdesc:aa13b651c18bc6004cab21ac041d44dd8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the difference of two timevals a - b.  <a href="#aa13b651c18bc6004cab21ac041d44dd8">More...</a><br /></td></tr>
<tr class="separator:aa13b651c18bc6004cab21ac041d44dd8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3115ebeab1be5667662faf6d6a54894f"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a3115ebeab1be5667662faf6d6a54894f">ast_unescape_c</a> (char *src)</td></tr>
<tr class="memdesc:a3115ebeab1be5667662faf6d6a54894f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Convert some C escape sequences.  <a href="#a3115ebeab1be5667662faf6d6a54894f">More...</a><br /></td></tr>
<tr class="separator:a3115ebeab1be5667662faf6d6a54894f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a3aadc32e947d3bffa610aa7c74065"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a06a3aadc32e947d3bffa610aa7c74065">ast_unescape_quoted</a> (char *quote_str)</td></tr>
<tr class="memdesc:a06a3aadc32e947d3bffa610aa7c74065"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unescape quotes in a string.  <a href="#a06a3aadc32e947d3bffa610aa7c74065">More...</a><br /></td></tr>
<tr class="separator:a06a3aadc32e947d3bffa610aa7c74065"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a20ca5b03887fb1ecf589590182f4a9aa"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a20ca5b03887fb1ecf589590182f4a9aa">ast_unescape_semicolon</a> (char *s)</td></tr>
<tr class="memdesc:a20ca5b03887fb1ecf589590182f4a9aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Strip backslash for "escaped" semicolons, the string to be stripped (will be modified).  <a href="#a20ca5b03887fb1ecf589590182f4a9aa">More...</a><br /></td></tr>
<tr class="separator:a20ca5b03887fb1ecf589590182f4a9aa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9d3c7c4cc262a1205c833a95fa65a6d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ad9d3c7c4cc262a1205c833a95fa65a6d">ast_uri_decode</a> (char *s, struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> spec)</td></tr>
<tr class="memdesc:ad9d3c7c4cc262a1205c833a95fa65a6d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decode URI, URN, URL (overwrite string)  <a href="#ad9d3c7c4cc262a1205c833a95fa65a6d">More...</a><br /></td></tr>
<tr class="separator:ad9d3c7c4cc262a1205c833a95fa65a6d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c73f6351bc9ca577360cf4af2231c3d"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a6c73f6351bc9ca577360cf4af2231c3d">ast_uri_encode</a> (const char *<a class="el" href="../../d5/dba/stringfields_8c.html#a3d4e66c2067ac2d83b7f65a222e5ab54">string</a>, char *outbuf, int buflen, struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> spec)</td></tr>
<tr class="memdesc:a6c73f6351bc9ca577360cf4af2231c3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Turn text string to URI-encoded XX version.  <a href="#a6c73f6351bc9ca577360cf4af2231c3d">More...</a><br /></td></tr>
<tr class="separator:a6c73f6351bc9ca577360cf4af2231c3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f67fc7c9501569b338913c796d86c45"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a7f67fc7c9501569b338913c796d86c45">ast_utils_init</a> (void)</td></tr>
<tr class="separator:a7f67fc7c9501569b338913c796d86c45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8f188acb6f8ffce8ada48ce7784fe10"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#af8f188acb6f8ffce8ada48ce7784fe10">ast_utils_which</a> (const char *binary, char *fullpath, size_t fullpath_size)</td></tr>
<tr class="memdesc:af8f188acb6f8ffce8ada48ce7784fe10"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resolve a binary to a full pathname.  <a href="#af8f188acb6f8ffce8ada48ce7784fe10">More...</a><br /></td></tr>
<tr class="separator:af8f188acb6f8ffce8ada48ce7784fe10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a60404ef44696316455e79c3a002cc71e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a60404ef44696316455e79c3a002cc71e">ast_wait_for_input</a> (int fd, int ms)</td></tr>
<tr class="separator:a60404ef44696316455e79c3a002cc71e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80d3bf34cef53be40b876a20508fe6b6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a80d3bf34cef53be40b876a20508fe6b6">ast_wait_for_output</a> (int fd, int ms)</td></tr>
<tr class="separator:a80d3bf34cef53be40b876a20508fe6b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d3d77f853919127cf3789120f1be066"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a2d3d77f853919127cf3789120f1be066">ast_xml_escape</a> (const char *<a class="el" href="../../d5/dba/stringfields_8c.html#a3d4e66c2067ac2d83b7f65a222e5ab54">string</a>, char *const outbuf, const size_t buflen)</td></tr>
<tr class="memdesc:a2d3d77f853919127cf3789120f1be066"><td class="mdescLeft">&#160;</td><td class="mdescRight">Escape reserved characters for use in XML.  <a href="#a2d3d77f853919127cf3789120f1be066">More...</a><br /></td></tr>
<tr class="separator:a2d3d77f853919127cf3789120f1be066"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7bc2df9f50343c9e3bf8b6200c709996"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a7bc2df9f50343c9e3bf8b6200c709996">base64_init</a> (void)</td></tr>
<tr class="separator:a7bc2df9f50343c9e3bf8b6200c709996"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a763d9f2734d56e19a6de3b461a396a1a"><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a763d9f2734d56e19a6de3b461a396a1a">dummy_start</a> (void *data)</td></tr>
<tr class="separator:a763d9f2734d56e19a6de3b461a396a1a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa526f7bf4d65334b2859e51a2a6744cd"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aa526f7bf4d65334b2859e51a2a6744cd">escape_alloc</a> (const char *s, size_t *size)</td></tr>
<tr class="separator:aa526f7bf4d65334b2859e51a2a6744cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aacd4c782fd585bc68be358d6c4534cbd"><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aacd4c782fd585bc68be358d6c4534cbd">handle_show_locks</a> (struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, int cmd, struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:aacd4c782fd585bc68be358d6c4534cbd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:affe49f382e18630af11285269398ea51"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#affe49f382e18630af11285269398ea51">lock_info_destroy</a> (void *data)</td></tr>
<tr class="memdesc:affe49f382e18630af11285269398ea51"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destroy a thread's lock info.  <a href="#affe49f382e18630af11285269398ea51">More...</a><br /></td></tr>
<tr class="separator:affe49f382e18630af11285269398ea51"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a780930e03627966e238198517d769254"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a780930e03627966e238198517d769254">locktype2str</a> (enum <a class="el" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a> <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#a1c6de65cc31c36fe2ede0d438531d327">type</a>)</td></tr>
<tr class="separator:a780930e03627966e238198517d769254"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aad3e5b2dbf4e988341484e0b1ab48ecb"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aad3e5b2dbf4e988341484e0b1ab48ecb">safe_mkdir</a> (const char *base_path, char *path, int mode)</td></tr>
<tr class="separator:aad3e5b2dbf4e988341484e0b1ab48ecb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae011d19bb4f1d706eecb7e2b0c7ad581"><td class="memItemLeft" align="right" valign="top">static struct timeval&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ae011d19bb4f1d706eecb7e2b0c7ad581">tvfix</a> (struct timeval <a class="el" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</td></tr>
<tr class="separator:ae011d19bb4f1d706eecb7e2b0c7ad581"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f276043cbd97b244614b67790355751"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a6f276043cbd97b244614b67790355751">utils_shutdown</a> (void)</td></tr>
<tr class="separator:a6f276043cbd97b244614b67790355751"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9c786f7f08470eeb27c3f6d1e11c9b1"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#af9c786f7f08470eeb27c3f6d1e11c9b1">wait_for_output</a> (int fd, int timeoutms)</td></tr>
<tr class="separator:af9c786f7f08470eeb27c3f6d1e11c9b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a7f200bdbb0ccc080852f2279a1d470dc"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a7f200bdbb0ccc080852f2279a1d470dc">ast_uri_http</a> = {<a class="el" href="../../d5/d60/utils_8h.html#a4ffc11863753bae3999421ad4b05a3b0">AST_URI_UNRESERVED</a>}</td></tr>
<tr class="separator:a7f200bdbb0ccc080852f2279a1d470dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af7cc8e3b6b28b9315c312edb79af2f59"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#af7cc8e3b6b28b9315c312edb79af2f59">ast_uri_http_legacy</a> = {<a class="el" href="../../d5/d60/utils_8h.html#a021aaefbd5124ef9375a0449706faf8a">AST_URI_LEGACY_SPACE</a> | <a class="el" href="../../d5/d60/utils_8h.html#a4ffc11863753bae3999421ad4b05a3b0">AST_URI_UNRESERVED</a>}</td></tr>
<tr class="separator:af7cc8e3b6b28b9315c312edb79af2f59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee0c854dd14dc6f16978ce018c21c939"><td class="memItemLeft" align="right" valign="top">const struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aee0c854dd14dc6f16978ce018c21c939">ast_uri_sip_user</a> = {<a class="el" href="../../d5/d60/utils_8h.html#a4ffc11863753bae3999421ad4b05a3b0">AST_URI_UNRESERVED</a> | <a class="el" href="../../d5/d60/utils_8h.html#a2d4c792f38355851799a810dec6abd4c">AST_URI_SIP_USER_UNRESERVED</a>}</td></tr>
<tr class="separator:aee0c854dd14dc6f16978ce018c21c939"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a833369687dfc95492b2d5ef4e82c892f"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a> [256]</td></tr>
<tr class="separator:a833369687dfc95492b2d5ef4e82c892f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaea12600bd0250b269b9061e6ba49dec"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a> [256]</td></tr>
<tr class="separator:aaea12600bd0250b269b9061e6ba49dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a094cd85754f67592588ab5a0636cf0ea"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a> [64]</td></tr>
<tr class="separator:a094cd85754f67592588ab5a0636cf0ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22f268341ef4b7675ce09044962d9046"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a> [64]</td></tr>
<tr class="separator:a22f268341ef4b7675ce09044962d9046"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29aac26dfc884358b9b98aa7c89fee44"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a29aac26dfc884358b9b98aa7c89fee44">dev_urandom_fd</a> = -1</td></tr>
<tr class="separator:a29aac26dfc884358b9b98aa7c89fee44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ee5b00b500b43bd5aa3beaed4687062"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a3ee5b00b500b43bd5aa3beaed4687062">escape_sequences</a> []</td></tr>
<tr class="separator:a3ee5b00b500b43bd5aa3beaed4687062"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc3f1ac567f35d628dd8766937f9cbcd"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#abc3f1ac567f35d628dd8766937f9cbcd">escape_sequences_map</a> []</td></tr>
<tr class="separator:abc3f1ac567f35d628dd8766937f9cbcd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac465762c00b512ce7c2af42eb20cf7f8"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ac465762c00b512ce7c2af42eb20cf7f8">inet_ntoa_buf</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../de/d1f/main_2utils_8c.html#a0114e8cab34567d42d506ad18c7ff28e">__init_inet_ntoa_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:ac465762c00b512ce7c2af42eb20cf7f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a468e2af6a422562a7810b869bd378c87"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d1/d14/structlock__infos.html">lock_infos</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a468e2af6a422562a7810b869bd378c87">lock_infos</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, }</td></tr>
<tr class="separator:a468e2af6a422562a7810b869bd378c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1196be5ab4cded8d600e0668cc67a3ef"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="memdesc:a1196be5ab4cded8d600e0668cc67a3ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Locked when accessing the <a class="el" href="../../d1/d14/structlock__infos.html" title="A list of each thread&#39;s lock info. ">lock_infos</a> list.  <a href="#a1196be5ab4cded8d600e0668cc67a3ef">More...</a><br /></td></tr>
<tr class="separator:a1196be5ab4cded8d600e0668cc67a3ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff56af259d6f99172edddacdad8e9372"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#aff56af259d6f99172edddacdad8e9372">randomlock</a> = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td></tr>
<tr class="separator:aff56af259d6f99172edddacdad8e9372"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae1445fe6bc0aafd9832b2d53377c952a"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../de/d1f/main_2utils_8c.html#a2fe93a7ac760f085e33a7c0ca8f2ef9f">__init_thread_lock_info</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:ae1445fe6bc0aafd9832b2d53377c952a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e272837476aeb77658b7e5301cc5f26"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a2e272837476aeb77658b7e5301cc5f26">thread_user_interface_tl</a> = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../de/d1f/main_2utils_8c.html#a12fdb94f6849011cfb98e881874198bb">__init_thread_user_interface_tl</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td></tr>
<tr class="separator:a2e272837476aeb77658b7e5301cc5f26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a37d4de9660278d7ea9c8aee6c20f39"><td class="memItemLeft" align="right" valign="top">static struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d1f/main_2utils_8c.html#a0a37d4de9660278d7ea9c8aee6c20f39">utils_cli</a> []</td></tr>
<tr class="separator:a0a37d4de9660278d7ea9c8aee6c20f39"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Utility functions. </p>
<dl class="section note"><dt>Note</dt><dd>These are important for portability and security, so please use them in favour of other routines. Please consult the CODING GUIDELINES for more information. </dd></dl>

<p class="definition">Definition in file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE <span class="overload">[1/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE&#160;&#160;&#160;/* ensure that inlinable API functions will <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> lock.h <a class="el" href="../../d2/d7e/ael__lex_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> required */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00070">70</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

</div>
</div>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE <span class="overload">[2/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE&#160;&#160;&#160;/* ensure that inlinable API functions will <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> this module <a class="el" href="../../d2/d7e/ael__lex_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> required */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00070">70</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

</div>
</div>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE <span class="overload">[3/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE&#160;&#160;&#160;/* ensure that inlinable API functions will <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> this module <a class="el" href="../../d2/d7e/ael__lex_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> required */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00070">70</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

</div>
</div>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE <span class="overload">[4/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE&#160;&#160;&#160;/* ensure that inlinable API functions will <a class="el" href="../../dd/d7c/eagi__proxy_8c.html#a39730e90126aad69cfc9ca4d6fcdb3a6">be</a> built <a class="el" href="../../da/d7c/utils_2frame_8h.html#aca392a8d3941cd0740aef3ad92545d67">in</a> this module <a class="el" href="../../d2/d7e/ael__lex_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> required */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00070">70</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

</div>
</div>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE <span class="overload">[5/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00070">70</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

</div>
</div>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE <span class="overload">[6/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00070">70</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

</div>
</div>
<a id="a805616595a796949ade4a78edc628f99"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a805616595a796949ade4a78edc628f99">&#9670;&nbsp;</a></span>AST_API_MODULE <span class="overload">[7/7]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_API_MODULE</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00070">70</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

</div>
</div>
<a id="ae997f8b92dcbc7e61ef6a9e84df49e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae997f8b92dcbc7e61ef6a9e84df49e4d">&#9670;&nbsp;</a></span>AST_MAX_LOCKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AST_MAX_LOCKS&#160;&#160;&#160;64</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A reasonable maximum number of locks a thread would be holding ... </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00802">802</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00905">ast_store_lock_info()</a>.</p>

</div>
</div>
<a id="a6a146c1b2155b03eb2ffa3f4ba755034"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a146c1b2155b03eb2ffa3f4ba755034">&#9670;&nbsp;</a></span>ONE_MILLION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ONE_MILLION&#160;&#160;&#160;1000000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01985">1985</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02005">ast_tvadd()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02019">ast_tvsub()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01990">tvfix()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae63358852f6f7442a1bed2463f7a2256"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae63358852f6f7442a1bed2463f7a2256">&#9670;&nbsp;</a></span>__ast_assert_failed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/d60/utils_8h.html#a3990d11e35b0041fb5d0caa68ee50cb6">DO_CRASH_NORETURN</a> __ast_assert_failed </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>condition_str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02564">2564</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00284">__LOG_ERROR</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02552">ast_do_crash()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d22/logger_8c_source.html#l02158">ast_log_backtrace()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00753">__ao2_container_clone()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00556">__ao2_iterator_next()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00094">__ao2_link()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00498">__ao2_ref()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00703">_ast_assert()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00230">internal_ao2_traverse()</a>, and <a class="el" href="../../da/df7/astobj2_8c_source.html#l00206">log_bad_ao2()</a>.</p>
<div class="fragment"><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;{</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;<span class="comment">    * Attempt to put it into the logger, but hope that at least</span></div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;<span class="comment">    * someone saw the message on stderr ...</span></div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;   fprintf(stderr, <span class="stringliteral">&quot;FRACK!, Failed assertion %s (%d) at line %d in %s of %s\n&quot;</span>,</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;      condition_str, condition, line, <span class="keyword">function</span>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>);</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a0fcdc410e3e9fbb251fd0c4f8581d96c">__LOG_ERROR</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, line, <span class="keyword">function</span>, <span class="stringliteral">&quot;FRACK!, Failed assertion %s (%d)\n&quot;</span>,</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      condition_str, condition);</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;   <span class="comment">/* Generate a backtrace for the assert */</span></div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#af6cb0aae475369edb487c5c0ea2af02a">ast_log_backtrace</a>();</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="comment">    * Give the logger a chance to get the message out, just in case</span></div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="comment">    * we abort(), or Asterisk crashes due to whatever problem just</span></div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;<span class="comment">    * happened after we exit ast_assert().</span></div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;   usleep(1);</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a994e667dad5f5de31bc0d9c1b95b1b8c">ast_do_crash</a>();</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="logger_8h_html_a0fcdc410e3e9fbb251fd0c4f8581d96c"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a0fcdc410e3e9fbb251fd0c4f8581d96c">__LOG_ERROR</a></div><div class="ttdeci">#define __LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00284">logger.h:284</a></div></div>
<div class="ttc" id="logger_8h_html_af6cb0aae475369edb487c5c0ea2af02a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#af6cb0aae475369edb487c5c0ea2af02a">ast_log_backtrace</a></div><div class="ttdeci">void ast_log_backtrace(void)</div><div class="ttdoc">Log a backtrace of the current thread&amp;#39;s execution stack to the Asterisk log. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l02158">logger.c:2158</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a994e667dad5f5de31bc0d9c1b95b1b8c"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a994e667dad5f5de31bc0d9c1b95b1b8c">ast_do_crash</a></div><div class="ttdeci">void DO_CRASH_NORETURN ast_do_crash(void)</div><div class="ttdoc">Force a crash if DO_CRASH is defined. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02552">main/utils.c:2552</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3c85cb581f1ae72f2622e9dd6ddb0e09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3c85cb581f1ae72f2622e9dd6ddb0e09">&#9670;&nbsp;</a></span>__ast_fd_set_flags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int __ast_fd_set_flags </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d5/d60/utils_8h.html#a3c48a3d3ab4ed9f3f8667ed62a16b82c">ast_fd_flag_operation</a>&#160;</td>
          <td class="paramname"><em>op</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02898">2898</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00284">__LOG_ERROR</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00993">AST_FD_FLAG_CLEAR</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00992">AST_FD_FLAG_SET</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l01009">ast_fd_set_flags</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l01060">ast_pipe_nonblock</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l01043">ast_socket_nonblock</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00829">thr_lock_info::type</a>.</p>
<div class="fragment"><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;{</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;   <span class="keywordtype">int</span> f;</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;   f = fcntl(fd, F_GETFL);</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;   <span class="keywordflow">if</span> (f == -1) {</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a0fcdc410e3e9fbb251fd0c4f8581d96c">__LOG_ERROR</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, lineno, <span class="keyword">function</span>,</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;         <span class="stringliteral">&quot;Failed to get fcntl() flags for file descriptor: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;   }</div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;   <span class="keywordflow">switch</span> (op) {</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d60/utils_8h.html#a3c48a3d3ab4ed9f3f8667ed62a16b82ca1ad0a24dd8ceb070c66fa82a232d2332">AST_FD_FLAG_SET</a>:</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;      <span class="keywordflow">if</span> ((f &amp; flags) == flags) {</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;         <span class="comment">/* There is nothing to set */</span></div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;      }</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;      f |= flags;</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d5/d60/utils_8h.html#a3c48a3d3ab4ed9f3f8667ed62a16b82ca380aba0df14d60863da3f15c3f1bfefc">AST_FD_FLAG_CLEAR</a>:</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;      <span class="keywordflow">if</span> (!(f &amp; flags)) {</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;         <span class="comment">/* There is nothing to clear */</span></div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;      }</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;      f &amp;= ~flags;</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;   }</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;   f = fcntl(fd, F_SETFL, f);</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;   <span class="keywordflow">if</span> (f == -1) {</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a0fcdc410e3e9fbb251fd0c4f8581d96c">__LOG_ERROR</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, lineno, <span class="keyword">function</span>,</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;         <span class="stringliteral">&quot;Failed to set fcntl() flags for file descriptor: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;   }</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="logger_8h_html_a0fcdc410e3e9fbb251fd0c4f8581d96c"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a0fcdc410e3e9fbb251fd0c4f8581d96c">__LOG_ERROR</a></div><div class="ttdeci">#define __LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00284">logger.h:284</a></div></div>
<div class="ttc" id="utils_8h_html_a3c48a3d3ab4ed9f3f8667ed62a16b82ca380aba0df14d60863da3f15c3f1bfefc"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a3c48a3d3ab4ed9f3f8667ed62a16b82ca380aba0df14d60863da3f15c3f1bfefc">AST_FD_FLAG_CLEAR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00993">utils.h:993</a></div></div>
<div class="ttc" id="utils_8h_html_a3c48a3d3ab4ed9f3f8667ed62a16b82ca1ad0a24dd8ceb070c66fa82a232d2332"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a3c48a3d3ab4ed9f3f8667ed62a16b82ca1ad0a24dd8ceb070c66fa82a232d2332">AST_FD_FLAG_SET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00992">utils.h:992</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0114e8cab34567d42d506ad18c7ff28e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0114e8cab34567d42d506ad18c7ff28e">&#9670;&nbsp;</a></span>__init_inet_ntoa_buf()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_inet_ntoa_buf </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00083">83</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a2fe93a7ac760f085e33a7c0ca8f2ef9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2fe93a7ac760f085e33a7c0ca8f2ef9f">&#9670;&nbsp;</a></span>__init_thread_lock_info()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_thread_lock_info </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>The thread storage key for per-thread lock info. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">902</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a12fdb94f6849011cfb98e881874198bb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12fdb94f6849011cfb98e881874198bb">&#9670;&nbsp;</a></span>__init_thread_user_interface_tl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void __init_thread_user_interface_tl </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>A thread local indicating whether the current thread is a user interface. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02979">2979</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;{</div></div><!-- fragment -->
</div>
</div>
<a id="a156a721a76666d2c8eb0b0a5e7ecda0a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a156a721a76666d2c8eb0b0a5e7ecda0a">&#9670;&nbsp;</a></span>append_backtrace_information()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void append_backtrace_information </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d95/structast__bt.html">ast_bt</a> *&#160;</td>
          <td class="paramname"><em>bt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01147">1147</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/dda/backtrace_8h_source.html#l00052">ast_bt::addresses</a>, <a class="el" href="../../d3/dda/backtrace_8h_source.html#l00042">ast_bt_free_symbols</a>, <a class="el" href="../../d3/dda/backtrace_8h_source.html#l00041">ast_bt_get_symbols</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, and <a class="el" href="../../d3/dda/backtrace_8h_source.html#l00054">ast_bt::num_frames</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01174">append_lock_information()</a>.</p>
<div class="fragment"><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;{</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <span class="keyword">struct </span>ast_vector_string *symbols;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <span class="keywordtype">int</span> num_frames;</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   <span class="keywordflow">if</span> (!bt) {</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(str, 0, <span class="stringliteral">&quot;\tNo backtrace to print\n&quot;</span>);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;   }</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <span class="comment">/* store frame count locally to avoid the memory corruption that</span></div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">    * sometimes happens on virtualized CentOS 6.x systems */</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   num_frames = bt-&gt;<a class="code" href="../../dd/d95/structast__bt.html#afdca39254a61566906ddd49d59155be2">num_frames</a>;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <span class="keywordflow">if</span> ((symbols = <a class="code" href="../../d3/dda/backtrace_8h.html#a77676041335c8b6a3fbd8e7cc529758f">ast_bt_get_symbols</a>(bt-&gt;<a class="code" href="../../dd/d95/structast__bt.html#a835321f22768399e3c83fe7164bb10e6">addresses</a>, num_frames))) {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="keywordtype">int</span> frame_iterator;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;      <span class="keywordflow">for</span> (frame_iterator = 1; frame_iterator &lt; <a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(symbols); ++frame_iterator) {</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(str, 0, <span class="stringliteral">&quot;\t%s\n&quot;</span>, <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(symbols, frame_iterator));</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;      }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;      <a class="code" href="../../d3/dda/backtrace_8h.html#a470244285a09e7d660027b0457a8481f">ast_bt_free_symbols</a>(symbols);</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(str, 0, <span class="stringliteral">&quot;\tCouldn&#39;t retrieve backtrace symbols\n&quot;</span>);</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   }</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;}</div><div class="ttc" id="backtrace_8h_html_a470244285a09e7d660027b0457a8481f"><div class="ttname"><a href="../../d3/dda/backtrace_8h.html#a470244285a09e7d660027b0457a8481f">ast_bt_free_symbols</a></div><div class="ttdeci">#define ast_bt_free_symbols(string_vector)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/backtrace_8h_source.html#l00042">backtrace.h:42</a></div></div>
<div class="ttc" id="backtrace_8h_html_a77676041335c8b6a3fbd8e7cc529758f"><div class="ttname"><a href="../../d3/dda/backtrace_8h.html#a77676041335c8b6a3fbd8e7cc529758f">ast_bt_get_symbols</a></div><div class="ttdeci">#define ast_bt_get_symbols(addresses, num_frames)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/backtrace_8h_source.html#l00041">backtrace.h:41</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__bt_html_a835321f22768399e3c83fe7164bb10e6"><div class="ttname"><a href="../../dd/d95/structast__bt.html#a835321f22768399e3c83fe7164bb10e6">ast_bt::addresses</a></div><div class="ttdeci">void * addresses[AST_MAX_BT_FRAMES]</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/backtrace_8h_source.html#l00052">backtrace.h:52</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__bt_html_afdca39254a61566906ddd49d59155be2"><div class="ttname"><a href="../../dd/d95/structast__bt.html#afdca39254a61566906ddd49d59155be2">ast_bt::num_frames</a></div><div class="ttdeci">int num_frames</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dda/backtrace_8h_source.html#l00054">backtrace.h:54</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="acd9e4b05a5bb427d74a3c5ef4737a1da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acd9e4b05a5bb427d74a3c5ef4737a1da">&#9670;&nbsp;</a></span>append_lock_information()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void append_lock_information </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>str</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *&#160;</td>
          <td class="paramname"><em>lock_info</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>i</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01174">1174</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01147">append_backtrace_information()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00253">AST_MUTEX</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00443">ast_reentrancy_lock()</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00454">ast_reentrancy_unlock()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00835">thr_lock_info::backtrace</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00112">ast_lock_track::file</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00823">thr_lock_info::file</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00115">ast_lock_track::func</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00824">thr_lock_info::func</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00828">thr_lock_info::line_num</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00113">ast_lock_track::lineno</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00825">thr_lock_info::lock_name</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01132">locktype2str()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00831">thr_lock_info::pending</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00114">ast_lock_track::reentrancy</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00833">thr_lock_info::suspended</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00827">thr_lock_info::times_locked</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00146">ast_mutex_info::track</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00829">thr_lock_info::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01264">ast_dump_locks()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01231">ast_log_show_lock()</a>.</p>
<div class="fragment"><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;{</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;   <span class="keywordtype">int</span> j;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>;</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/de9/structast__lock__track.html">ast_lock_track</a> *lt;</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(str, 0, <span class="stringliteral">&quot;=== ---&gt; %sLock #%d (%s): %s %d %s %s %p (%d%s)\n&quot;</span>,</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;               lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">pending</a> &gt; 0 ? <span class="stringliteral">&quot;Waiting for &quot;</span> :</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;               lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">pending</a> &lt; 0 ? <span class="stringliteral">&quot;Tried and failed to get &quot;</span> : <span class="stringliteral">&quot;&quot;</span>, i,</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;               lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>,</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;               <a class="code" href="../../de/d1f/main_2utils_8c.html#a780930e03627966e238198517d769254">locktype2str</a>(lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ac880d83f181952fb06329f039b9dd527">type</a>),</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;               lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a7661b5d028be7f8997cef563e3890fd9">line_num</a>,</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;               lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a>, lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#aab5e878cae779b0da45f2c9ddce62ae8">lock_name</a>,</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;               lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>,</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;               lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">times_locked</a>,</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;               lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#af62c9334e77989174caccf53beee4215">suspended</a> ? <span class="stringliteral">&quot; - suspended&quot;</span> : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="preprocessor">#ifdef HAVE_BKTR</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a156a721a76666d2c8eb0b0a5e7ecda0a">append_backtrace_information</a>(str, lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a74dd9ad5578beac67d74e05f5f33edac">backtrace</a>);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;   <span class="keywordflow">if</span> (!lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">pending</a> || lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">pending</a> == -1)</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="comment">/* We only have further details for mutexes right now */</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;   <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ac880d83f181952fb06329f039b9dd527">type</a> != <a class="code" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153da484ddc5786cd0fc44cdc7d722426d794">AST_MUTEX</a>)</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   lock = lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>;</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;   lt = lock-&gt;<a class="code" href="../../d8/dc5/structast__mutex__info.html#afeebabad05904e583097b63f60e8584b">track</a>;</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a83764b0382a6a6184b45ad03a0daf058">ast_reentrancy_lock</a>(lt);</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   <span class="keywordflow">for</span> (j = 0; *str &amp;&amp; j &lt; lt-&gt;<a class="code" href="../../d0/de9/structast__lock__track.html#a22361513361167133dbaa56984bcfce1">reentrancy</a>; j++) {</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(str, 0, <span class="stringliteral">&quot;=== --- ---&gt; Locked Here: %s line %d (%s)\n&quot;</span>,</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;                  lt-&gt;<a class="code" href="../../d0/de9/structast__lock__track.html#ad47ace992d486f7e73ee1f3b085f89ff">file</a>[j], lt-&gt;<a class="code" href="../../d0/de9/structast__lock__track.html#a8acd442b5d58eb37377609c0b91c99f8">lineno</a>[j], lt-&gt;<a class="code" href="../../d0/de9/structast__lock__track.html#ad92aaa12e386028e2e31dc60b3945079">func</a>[j]);</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   }</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a510a0910cc0d62833ae68a0fc82064ae">ast_reentrancy_unlock</a>(lt);</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;}</div><div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="structast__lock__track_html_ad47ace992d486f7e73ee1f3b085f89ff"><div class="ttname"><a href="../../d0/de9/structast__lock__track.html#ad47ace992d486f7e73ee1f3b085f89ff">ast_lock_track::file</a></div><div class="ttdeci">const char * file[AST_MAX_REENTRANCY]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00112">lock.h:112</a></div></div>
<div class="ttc" id="structthr__lock__info_html_aab5e878cae779b0da45f2c9ddce62ae8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#aab5e878cae779b0da45f2c9ddce62ae8">thr_lock_info::lock_name</a></div><div class="ttdeci">const char * lock_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00825">main/utils.c:825</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a79ec26d453dcd29aec17f5536233e849"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">thr_lock_info::pending</a></div><div class="ttdeci">int pending</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00831">main/utils.c:831</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a7661b5d028be7f8997cef563e3890fd9"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a7661b5d028be7f8997cef563e3890fd9">thr_lock_info::line_num</a></div><div class="ttdeci">int line_num</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00828">main/utils.c:828</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structast__lock__track_html_a22361513361167133dbaa56984bcfce1"><div class="ttname"><a href="../../d0/de9/structast__lock__track.html#a22361513361167133dbaa56984bcfce1">ast_lock_track::reentrancy</a></div><div class="ttdeci">int reentrancy</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00114">lock.h:114</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a8ea6686e13727e7f2f56c317e9200402"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">thr_lock_info::times_locked</a></div><div class="ttdeci">int times_locked</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00827">main/utils.c:827</a></div></div>
<div class="ttc" id="structast__lock__track_html_a8acd442b5d58eb37377609c0b91c99f8"><div class="ttname"><a href="../../d0/de9/structast__lock__track.html#a8acd442b5d58eb37377609c0b91c99f8">ast_lock_track::lineno</a></div><div class="ttdeci">int lineno[AST_MAX_REENTRANCY]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00113">lock.h:113</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="structast__mutex__info_html_afeebabad05904e583097b63f60e8584b"><div class="ttname"><a href="../../d8/dc5/structast__mutex__info.html#afeebabad05904e583097b63f60e8584b">ast_mutex_info::track</a></div><div class="ttdeci">struct ast_lock_track * track</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00146">lock.h:146</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af62c9334e77989174caccf53beee4215"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af62c9334e77989174caccf53beee4215">thr_lock_info::suspended</a></div><div class="ttdeci">int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00833">main/utils.c:833</a></div></div>
<div class="ttc" id="structast__lock__track_html"><div class="ttname"><a href="../../d0/de9/structast__lock__track.html">ast_lock_track</a></div><div class="ttdoc">Lock tracking information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00111">lock.h:111</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a74dd9ad5578beac67d74e05f5f33edac"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a74dd9ad5578beac67d74e05f5f33edac">thr_lock_info::backtrace</a></div><div class="ttdeci">struct ast_bt * backtrace</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00835">main/utils.c:835</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ac880d83f181952fb06329f039b9dd527"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ac880d83f181952fb06329f039b9dd527">thr_lock_info::type</a></div><div class="ttdeci">enum ast_lock_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00829">main/utils.c:829</a></div></div>
<div class="ttc" id="structthr__lock__info_html_afc4e949c7b7d0ab565ecfb62c3380171"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">thr_lock_info::func</a></div><div class="ttdeci">const char * func</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00824">main/utils.c:824</a></div></div>
<div class="ttc" id="lock_8h_html_a83764b0382a6a6184b45ad03a0daf058"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a83764b0382a6a6184b45ad03a0daf058">ast_reentrancy_lock</a></div><div class="ttdeci">static void ast_reentrancy_lock(struct ast_lock_track *lt)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00443">lock.h:443</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af0baa3ccdd9d2a6adf03b72e2bea5789"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af0baa3ccdd9d2a6adf03b72e2bea5789">thr_lock_info::file</a></div><div class="ttdeci">const char * file</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00823">main/utils.c:823</a></div></div>
<div class="ttc" id="structast__lock__track_html_ad92aaa12e386028e2e31dc60b3945079"><div class="ttname"><a href="../../d0/de9/structast__lock__track.html#ad92aaa12e386028e2e31dc60b3945079">ast_lock_track::func</a></div><div class="ttdeci">const char * func[AST_MAX_REENTRANCY]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00115">lock.h:115</a></div></div>
<div class="ttc" id="lock_8h_html_a510a0910cc0d62833ae68a0fc82064ae"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a510a0910cc0d62833ae68a0fc82064ae">ast_reentrancy_unlock</a></div><div class="ttdeci">static void ast_reentrancy_unlock(struct ast_lock_track *lt)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00454">lock.h:454</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a156a721a76666d2c8eb0b0a5e7ecda0a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a156a721a76666d2c8eb0b0a5e7ecda0a">append_backtrace_information</a></div><div class="ttdeci">static void append_backtrace_information(struct ast_str **str, struct ast_bt *bt)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01147">main/utils.c:1147</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a780930e03627966e238198517d769254"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a780930e03627966e238198517d769254">locktype2str</a></div><div class="ttdeci">static const char * locktype2str(enum ast_lock_type type)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01132">main/utils.c:1132</a></div></div>
<div class="ttc" id="lock_8h_html_a91005557686d603e1210a200ef97153da484ddc5786cd0fc44cdc7d722426d794"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153da484ddc5786cd0fc44cdc7d722426d794">AST_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00253">lock.h:253</a></div></div>
<div class="ttc" id="structast__mutex__info_html"><div class="ttname"><a href="../../d8/dc5/structast__mutex__info.html">ast_mutex_info</a></div><div class="ttdoc">Structure for mutex and tracking information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00135">lock.h:135</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3d97e001a2093c5cbb1a22c4cbb80840"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d97e001a2093c5cbb1a22c4cbb80840">&#9670;&nbsp;</a></span>ast_background_stacksize()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_background_stacksize </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01437">1437</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00540">AST_STACKSIZE</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00541">AST_STACKSIZE_LOW</a>.</p>
<div class="fragment"><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;{</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d60/utils_8h.html#a47e9ccd65c7bb239af68c006ceae18b4">AST_STACKSIZE</a>;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d60/utils_8h.html#a5c7e1f5054a820bb222177b195023c99">AST_STACKSIZE_LOW</a>;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;}</div><div class="ttc" id="utils_8h_html_a47e9ccd65c7bb239af68c006ceae18b4"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a47e9ccd65c7bb239af68c006ceae18b4">AST_STACKSIZE</a></div><div class="ttdeci">#define AST_STACKSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00540">utils.h:540</a></div></div>
<div class="ttc" id="utils_8h_html_a5c7e1f5054a820bb222177b195023c99"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a5c7e1f5054a820bb222177b195023c99">AST_STACKSIZE_LOW</a></div><div class="ttdeci">#define AST_STACKSIZE_LOW</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00541">utils.h:541</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1e7e06bd20719ecfd58b67f230780ffa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e7e06bd20719ecfd58b67f230780ffa">&#9670;&nbsp;</a></span>ast_base64decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_base64decode </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>decode BASE64 encoded text </p>
<p>Decode data from base64. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00294">294</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00080">b2a</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d6d/message_8c_source.html#l01306">action_messagesend()</a>, <a class="el" href="../../d1/dd7/func__aes_8c_source.html#l00086">aes_helper()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00321">ast_base64decode_string()</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00445">ast_check_signature()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01579">ast_http_get_auth()</a>, <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00264">AST_TEST_DEFINE()</a>, <a class="el" href="../../d6/da6/func__base64_8c_source.html#l00075">base64_helper()</a>, <a class="el" href="../../d8/dd4/res__srtp_8c_source.html#l00652">crypto_init_keys()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00248">custom_presence_callback()</a>, <a class="el" href="../../d6/d27/app__osplookup_8c_source.html#l01081">osp_validate_token()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00207">presence_write()</a>, and <a class="el" href="../../d8/dd4/res__srtp_8c_source.html#l00802">res_sdp_crypto_parse_offer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;{</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   <span class="keywordtype">int</span> cnt = 0;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> byte = 0;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bits = 0;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordtype">int</span> incnt = 0;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;   <span class="keywordflow">while</span>(*src &amp;&amp; *src != <span class="charliteral">&#39;=&#39;</span> &amp;&amp; (cnt &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="comment">/* Shift in 6 bits of input */</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      byte &lt;&lt;= 6;</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      byte |= (<a class="code" href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a>[(int)(*src)]) &amp; 0x3f;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;      bits += 6;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      src++;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;      incnt++;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;      <span class="comment">/* If we have at least 8 bits left over, take that character</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">         off the top */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      <span class="keywordflow">if</span> (bits &gt;= 8)  {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;         bits -= 8;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;         *dst = (byte &gt;&gt; bits) &amp; 0xff;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;         dst++;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;         cnt++;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;      }</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="comment">/* Don&#39;t worry about left over bits, they&#39;re extra anyway */</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <span class="keywordflow">return</span> cnt;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a833369687dfc95492b2d5ef4e82c892f"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a></div><div class="ttdeci">static char b2a[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00080">main/utils.c:80</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="adc19b2c41e1627545b35e68d2dabd44d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc19b2c41e1627545b35e68d2dabd44d">&#9670;&nbsp;</a></span>ast_base64decode_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_base64decode_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode BASE64 encoded text and return the string. </p>
<p>Same as ast_base64decode, but does the math for you and returns a decoded string. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00321">321</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00294">ast_base64decode()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;{</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="keywordtype">size_t</span> encoded_len;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keywordtype">size_t</span> decoded_len;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordtype">int</span> padding = 0;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *decoded_string;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(src)) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   encoded_len = strlen(src);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="keywordflow">if</span> (encoded_len &gt; 2 &amp;&amp; src[encoded_len - 1] == <span class="charliteral">&#39;=&#39;</span>) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      padding++;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">if</span> (src[encoded_len - 2] == <span class="charliteral">&#39;=&#39;</span>) {</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;         padding++;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      }</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;   }</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   decoded_len = (encoded_len / 4 * 3) - padding;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   decoded_string = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(decoded_len + 1);</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <span class="keywordflow">if</span> (!decoded_string) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a>(decoded_string, src, decoded_len);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   decoded_string[decoded_len] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *)decoded_string;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a1e7e06bd20719ecfd58b67f230780ffa"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a1e7e06bd20719ecfd58b67f230780ffa">ast_base64decode</a></div><div class="ttdeci">int ast_base64decode(unsigned char *dst, const char *src, int max)</div><div class="ttdoc">decode BASE64 encoded text </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00294">main/utils.c:294</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a555dad1bd5b23acf01cf08f1affab879"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a555dad1bd5b23acf01cf08f1affab879">&#9670;&nbsp;</a></span>ast_base64encode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_base64encode </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>srclen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encode data in base64. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>the destination buffer </td></tr>
    <tr><td class="paramname">src</td><td>the source data to be encoded </td></tr>
    <tr><td class="paramname">srclen</td><td>the number of bytes present in the source buffer </td></tr>
    <tr><td class="paramname">max</td><td>the maximum number of bytes to write into the destination buffer, <em>including</em> the terminating NULL character. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00404">404</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00353">ast_base64encode_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dd7/func__aes_8c_source.html#l00086">aes_helper()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00410">ast_base64encode_string()</a>, <a class="el" href="../../d7/dbb/res__crypto_8c_source.html#l00399">ast_sign()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00780">AST_TEST_DEFINE()</a>, <a class="el" href="../../d6/da6/func__base64_8c_source.html#l00075">base64_helper()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02110">build_secret()</a>, <a class="el" href="../../d8/dd4/res__srtp_8c_source.html#l00652">crypto_init_keys()</a>, <a class="el" href="../../d6/d27/app__osplookup_8c_source.html#l01171">osp_check_destination()</a>, <a class="el" href="../../d0/d81/func__presencestate_8c_source.html#l00102">presence_read()</a>, <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01168">websocket_client_create_key()</a>, <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00764">websocket_combine_key()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02695">xmpp_client_authenticate_sasl()</a>.</p>
<div class="fragment"><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;{</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1f/main_2utils_8c.html#abc46a030bcce6696e31ac29a79558b53">ast_base64encode_full</a>(dst, src, srclen, <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, 0);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_abc46a030bcce6696e31ac29a79558b53"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#abc46a030bcce6696e31ac29a79558b53">ast_base64encode_full</a></div><div class="ttdeci">int ast_base64encode_full(char *dst, const unsigned char *src, int srclen, int max, int linebreaks)</div><div class="ttdoc">encode text to BASE64 coding </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00353">main/utils.c:353</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc46a030bcce6696e31ac29a79558b53"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc46a030bcce6696e31ac29a79558b53">&#9670;&nbsp;</a></span>ast_base64encode_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_base64encode_full </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>srclen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>linebreaks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>encode text to BASE64 coding </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00353">353</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00078">base64</a>, and <a class="el" href="../../dc/dc2/f2c_8h_source.html#l00198">max</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00404">ast_base64encode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;{</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordtype">int</span> cnt = 0;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;   <span class="keywordtype">int</span> col = 0;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> byte = 0;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   <span class="keywordtype">int</span> bits = 0;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordtype">int</span> cntin = 0;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;   <span class="comment">/* Reserve space for null byte at end of string */</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;   <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>--;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="keywordflow">while</span> ((cntin &lt; srclen) &amp;&amp; (cnt &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      byte &lt;&lt;= 8;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      byte |= *(src++);</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      bits += 8;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      cntin++;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      <span class="keywordflow">if</span> ((bits == 24) &amp;&amp; (cnt + 4 &lt;= <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[(byte &gt;&gt; 18) &amp; 0x3f];</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[(byte &gt;&gt; 12) &amp; 0x3f];</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[(byte &gt;&gt; 6) &amp; 0x3f];</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[byte &amp; 0x3f];</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;         cnt += 4;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;         col += 4;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;         bits = 0;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;         byte = 0;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      }</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      <span class="keywordflow">if</span> (linebreaks &amp;&amp; (cnt &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>) &amp;&amp; (col == 64)) {</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;         *dst++ = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;         cnt++;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;         col = 0;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keywordflow">if</span> (bits &amp;&amp; (cnt + 4 &lt;= <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;      <span class="comment">/* Add one last character for the remaining bits,</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">         padding the rest with 0 */</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      byte &lt;&lt;= 24 - bits;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[(byte &gt;&gt; 18) &amp; 0x3f];</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[(byte &gt;&gt; 12) &amp; 0x3f];</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">if</span> (bits == 16)</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[(byte &gt;&gt; 6) &amp; 0x3f];</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         *dst++ = <span class="charliteral">&#39;=&#39;</span>;</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      *dst++ = <span class="charliteral">&#39;=&#39;</span>;</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      cnt += 4;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   }</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keywordflow">if</span> (linebreaks &amp;&amp; (cnt &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      *dst++ = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;      cnt++;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   }</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   *dst = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   <span class="keywordflow">return</span> cnt;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a094cd85754f67592588ab5a0636cf0ea"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a></div><div class="ttdeci">static char base64[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00078">main/utils.c:78</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc47048033d8307d1584e72c35f3c6da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc47048033d8307d1584e72c35f3c6da">&#9670;&nbsp;</a></span>ast_base64encode_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_base64encode_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encode to BASE64 and return encoded string. </p>
<p>Same as ast_base64encode, but does hte math for you and returns an encoded string. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00410">410</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00404">ast_base64encode()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00204">ast_calloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;{</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   <span class="keywordtype">size_t</span> encoded_len;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   <span class="keywordtype">char</span> *encoded_string;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(src)) {</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;   }</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   encoded_len = ((strlen(src) * 4 / 3 + 3) &amp; ~3) + 1;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   encoded_string = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, encoded_len);</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a>(encoded_string, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)src, strlen(src), encoded_len);</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   <span class="keywordflow">return</span> encoded_string;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a555dad1bd5b23acf01cf08f1affab879"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a555dad1bd5b23acf01cf08f1affab879">ast_base64encode</a></div><div class="ttdeci">int ast_base64encode(char *dst, const unsigned char *src, int srclen, int max)</div><div class="ttdoc">Encode data in base64. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00404">main/utils.c:404</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b078a418a08b4d4600bb7fc33d6376b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b078a418a08b4d4600bb7fc33d6376b">&#9670;&nbsp;</a></span>ast_base64url_decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_base64url_decode </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode data from base64 URL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>The destination buffer </td></tr>
    <tr><td class="paramname">src</td><td>The source buffer </td></tr>
    <tr><td class="paramname">max</td><td>The maximum number of bytes to write into the destination buffer. Note that this function will not ensure that the destination buffer is NULL terminated. So, in general, this parameter should be sizeof(dst) - 1 </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00427">427</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00081">b2a_url</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00448">ast_base64url_decode_string()</a>, and <a class="el" href="../../d9/d2d/res__stir__shaken_8c_source.html#l00498">stir_shaken_verify_signature()</a>.</p>
<div class="fragment"><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;{</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <span class="keywordtype">int</span> cnt = 0;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> byte = 0;</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> bits = 0;</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;   <span class="keywordflow">while</span> (*src &amp;&amp; (cnt &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;      byte &lt;&lt;= 6;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;      byte |= (<a class="code" href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a>[(int)(*src)]) &amp; 0x3f;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;      bits += 6;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;      src++;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;      <span class="keywordflow">if</span> (bits &gt;= 8) {</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;         bits -= 8;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;         *dst = (byte &gt;&gt; bits) &amp; 0xff;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;         dst++;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;         cnt++;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;      }</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;   <span class="keywordflow">return</span> cnt;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_aaea12600bd0250b269b9061e6ba49dec"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a></div><div class="ttdeci">static char b2a_url[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00081">main/utils.c:81</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4296e13b9fbe979767f71d7315b9f66e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4296e13b9fbe979767f71d7315b9f66e">&#9670;&nbsp;</a></span>ast_base64url_decode_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_base64url_decode_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode string from base64 URL. </p>
<dl class="section note"><dt>Note</dt><dd>The returned string will need to be freed later</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>The source buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
    <tr><td class="paramname">Decoded</td><td>string on success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00448">448</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00427">ast_base64url_decode()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c_source.html#l00122">stir_shaken_incoming_request()</a>.</p>
<div class="fragment"><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;{</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   <span class="keywordtype">size_t</span> decoded_len;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *decoded_string;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(src)) {</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   }</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;   decoded_len = strlen(src) * 3 / 4;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   decoded_string = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(decoded_len + 1);</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;   <span class="keywordflow">if</span> (!decoded_string) {</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;   }</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a8b078a418a08b4d4600bb7fc33d6376b">ast_base64url_decode</a>(decoded_string, src, decoded_len);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;   decoded_string[decoded_len] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <span class="keywordflow">return</span> (<span class="keywordtype">char</span> *)decoded_string;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a8b078a418a08b4d4600bb7fc33d6376b"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a8b078a418a08b4d4600bb7fc33d6376b">ast_base64url_decode</a></div><div class="ttdeci">int ast_base64url_decode(unsigned char *dst, const char *src, int max)</div><div class="ttdoc">Decode data from base64 URL. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00427">main/utils.c:427</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a956327335a1d388ea458cb5401e6408f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a956327335a1d388ea458cb5401e6408f">&#9670;&nbsp;</a></span>ast_base64url_encode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_base64url_encode </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>srclen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encode data in base64 URL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>The destination buffer </td></tr>
    <tr><td class="paramname">src</td><td>The source data to be encoded </td></tr>
    <tr><td class="paramname">srclen</td><td>The number of bytes present in the source buffer </td></tr>
    <tr><td class="paramname">max</td><td>The maximum number of bytes to write into the destination buffer, including the terminating NULL character </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00516">516</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00469">ast_base64url_encode_full()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00521">ast_base64url_encode_string()</a>, and <a class="el" href="../../d9/d2d/res__stir__shaken_8c_source.html#l00892">stir_shaken_sign()</a>.</p>
<div class="fragment"><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;{</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1f/main_2utils_8c.html#a1d69201d3f746459b4da7a9113c03cca">ast_base64url_encode_full</a>(dst, src, srclen, <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>, 0);</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a1d69201d3f746459b4da7a9113c03cca"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a1d69201d3f746459b4da7a9113c03cca">ast_base64url_encode_full</a></div><div class="ttdeci">int ast_base64url_encode_full(char *dst, const unsigned char *src, int srclen, int max, int linebreaks)</div><div class="ttdoc">Same as ast_base64encode_full but for base64 URL. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00469">main/utils.c:469</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1d69201d3f746459b4da7a9113c03cca"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d69201d3f746459b4da7a9113c03cca">&#9670;&nbsp;</a></span>ast_base64url_encode_full()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_base64url_encode_full </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>srclen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>linebreaks</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same as ast_base64encode_full but for base64 URL. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dst</td><td>The destination buffer </td></tr>
    <tr><td class="paramname">src</td><td>The source buffer </td></tr>
    <tr><td class="paramname">srclen</td><td>The number of bytes present in the source buffer </td></tr>
    <tr><td class="paramname">max</td><td>The maximum number of bytes to write into the destination buffer, <em>including</em> the terminating NULL character. </td></tr>
    <tr><td class="paramname">linebreaks</td><td>Set to 1 if there should be linebreaks inserted in the result </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00469">469</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00079">base64url</a>, and <a class="el" href="../../dc/dc2/f2c_8h_source.html#l00198">max</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00516">ast_base64url_encode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;{</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="keywordtype">int</span> cnt = 0;</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="keywordtype">int</span> col = 0;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> byte = 0;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   <span class="keywordtype">int</span> bits = 0;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   <span class="keywordtype">int</span> cntin = 0;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>--;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   <span class="keywordflow">while</span> ((cntin &lt; srclen) &amp;&amp; (cnt &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;      byte &lt;&lt;= 8;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;      byte |= *(src++);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;      bits += 8;</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;      cntin++;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      <span class="keywordflow">if</span> ((bits == 24) &amp;&amp; (cnt + 4 &lt;= <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[(byte &gt;&gt; 18) &amp; 0x3f];</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[(byte &gt;&gt; 12) &amp; 0x3f];</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[(byte &gt;&gt; 6) &amp; 0x3f];</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[(byte) &amp; 0x3f];</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;         cnt += 4;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;         col += 4;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;         bits = 0;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;         byte = 0;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      }</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">if</span> (linebreaks &amp;&amp; (cnt &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>) &amp;&amp; (col == 64)) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;         *dst++ = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;         cnt++;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;         col = 0;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;   }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;   <span class="keywordflow">if</span> (bits &amp;&amp; (cnt + 4 &lt;= <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      byte &lt;&lt;= 24 - bits;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[(byte &gt;&gt; 18) &amp; 0x3f];</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[(byte &gt;&gt; 12) &amp; 0x3f];</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> (bits == 16) {</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;         *dst++ = <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[(byte &gt;&gt; 6) &amp; 0x3f];</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;      }</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      cnt += 4;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;   }</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   <span class="keywordflow">if</span> (linebreaks &amp;&amp; (cnt &lt; <a class="code" href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>)) {</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      *dst++ = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      cnt++;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;   }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;   *dst = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   <span class="keywordflow">return</span> cnt;</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a22f268341ef4b7675ce09044962d9046"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a></div><div class="ttdeci">static char base64url[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00079">main/utils.c:79</a></div></div>
<div class="ttc" id="f2c_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00198">f2c.h:198</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa9c299b1a6f79bd9ad798eb8555096a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa9c299b1a6f79bd9ad798eb8555096a4">&#9670;&nbsp;</a></span>ast_base64url_encode_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_base64url_encode_string </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Encode string in base64 URL. </p>
<dl class="section note"><dt>Note</dt><dd>The returned string will need to be freed later</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">src</td><td>The source data to be encoded</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td>on failure </td></tr>
    <tr><td class="paramname">Encoded</td><td>string on success </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00521">521</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00516">ast_base64url_encode()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/d84/res__pjsip__stir__shaken_8c_source.html#l00211">add_identity_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;{</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;   <span class="keywordtype">size_t</span> encoded_len;</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;   <span class="keywordtype">char</span> *encoded_string;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(src)) {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;   }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;   encoded_len = ((strlen(src) * 4 / 3 + 3) &amp; ~3) + 1;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   encoded_string = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(encoded_len);</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a956327335a1d388ea458cb5401e6408f">ast_base64url_encode</a>(encoded_string, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *)src, strlen(src), encoded_len);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;   <span class="keywordflow">return</span> encoded_string;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a956327335a1d388ea458cb5401e6408f"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a956327335a1d388ea458cb5401e6408f">ast_base64url_encode</a></div><div class="ttdeci">int ast_base64url_encode(char *dst, const unsigned char *src, int srclen, int max)</div><div class="ttdoc">Encode data in base64 URL. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00516">main/utils.c:516</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a603020160399d4876ec09fd299ebcaf9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a603020160399d4876ec09fd299ebcaf9">&#9670;&nbsp;</a></span>ast_build_string()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_build_string </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>...</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a string in a buffer, designed to be called repeatedly. </p>
<dl class="section note"><dt>Note</dt><dd>This method is not recommended. New code should use ast_str_*() instead.</dd></dl>
<p>This is a wrapper for snprintf, that properly handles the buffer pointer and buffer space available.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>current position in buffer to place string into (will be updated on return) </td></tr>
    <tr><td class="paramname">space</td><td>remaining space in buffer (will be updated on return) </td></tr>
    <tr><td class="paramname">fmt</td><td>printf-style format string </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success </td></tr>
    <tr><td class="paramname">non-zero</td><td>on failure. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01919">1919</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01900">ast_build_string_va()</a>, and <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d60/res__fax_8c_source.html#l00846">ast_fax_caps_to_str()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l01370">generate_filenames_string()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l03556">handle_speechrecognize()</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c_source.html#l01054">pp_each_extension_helper()</a>, and <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l02021">vm_allocate_dh()</a>.</p>
<div class="fragment"><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;{</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;   va_list ap;</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;   va_start(ap, fmt);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;   result = <a class="code" href="../../de/d1f/main_2utils_8c.html#a7cc2336f3642ec07be6058e7fa746e71">ast_build_string_va</a>(buffer, space, fmt, ap);</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;   va_end(ap);</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a7cc2336f3642ec07be6058e7fa746e71"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a7cc2336f3642ec07be6058e7fa746e71">ast_build_string_va</a></div><div class="ttdeci">int ast_build_string_va(char **buffer, size_t *space, const char *fmt, va_list ap)</div><div class="ttdoc">Build a string in a buffer, designed to be called repeatedly. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01900">main/utils.c:1900</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7cc2336f3642ec07be6058e7fa746e71"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7cc2336f3642ec07be6058e7fa746e71">&#9670;&nbsp;</a></span>ast_build_string_va()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_build_string_va </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>space</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>fmt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">va_list&#160;</td>
          <td class="paramname"><em>ap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Build a string in a buffer, designed to be called repeatedly. </p>
<p>This is a wrapper for snprintf, that properly handles the buffer pointer and buffer space available.</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buffer</td><td>current position in buffer to place string into (will be updated on return) </td></tr>
    <tr><td class="paramname">space</td><td>remaining space in buffer (will be updated on return) </td></tr>
    <tr><td class="paramname">fmt</td><td>printf-style format string </td></tr>
    <tr><td class="paramname">ap</td><td>varargs list of arguments for format </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01900">1900</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00088">result</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01919">ast_build_string()</a>.</p>
<div class="fragment"><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;{</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;   <span class="keywordflow">if</span> (!buffer || !*buffer || !space || !*space)</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;   result = vsnprintf(*buffer, *space, fmt, ap);</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   <span class="keywordflow">if</span> (result &lt; 0)</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (result &gt; *space)</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      result = *space;</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;   *buffer += <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;   *space -= <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a>;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;}</div><div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a38faf2987c375335b2773964aabf69b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a38faf2987c375335b2773964aabf69b3">&#9670;&nbsp;</a></span>ast_carefulwrite()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_carefulwrite </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to write string, but wait no more than ms milliseconds before timing out. </p>
<p>Try to write string, but wait no more than ms milliseconds before timing out.</p>
<dl class="section note"><dt>Note</dt><dd>The code assumes that the file descriptor has NONBLOCK set, so there is only one system call made to do a write, unless we actually have a need to wait. This way, we get better performance. If the descriptor is blocking, all assumptions on the guaranteed detail do not apply anymore. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01592">1592</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01539">wait_for_output()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01486">ast_agi_send()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l00113">AST_VECTOR()</a>, and <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01249">cleanup_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;{</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;   <span class="keywordtype">int</span> elapsed = 0;</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>) {</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/d1f/main_2utils_8c.html#af9c786f7f08470eeb27c3f6d1e11c9b1">wait_for_output</a>(fd, timeoutms - elapsed)) {</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;      }</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;      res = write(fd, s, <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0 &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EAGAIN &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EINTR) {</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;         <span class="comment">/* fatal error from write() */</span></div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EPIPE) {</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;<span class="preprocessor">#ifndef STANDALONE</span></div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;write() failed due to reading end being closed: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;write() returned error: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;         }</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;      }</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;         <span class="comment">/* It was an acceptable error */</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;         res = 0;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;      }</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;      <span class="comment">/* Update how much data we have left to write */</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> -= res;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;      s += res;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;      res = 0;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;      elapsed = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;      <span class="keywordflow">if</span> (elapsed &gt;= timeoutms) {</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;         <span class="comment">/* We&#39;ve taken too long to write</span></div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="comment">          * This is only an error condition if we haven&#39;t finished writing. */</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;         res = <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> ? -1 : 0;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      }</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;   }</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="main_2utils_8c_html_af9c786f7f08470eeb27c3f6d1e11c9b1"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#af9c786f7f08470eeb27c3f6d1e11c9b1">wait_for_output</a></div><div class="ttdeci">static int wait_for_output(int fd, int timeoutms)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01539">main/utils.c:1539</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad006fcd49cd8cfb2ca8ae5ee4e4bf708"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad006fcd49cd8cfb2ca8ae5ee4e4bf708">&#9670;&nbsp;</a></span>ast_check_ipv6()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_check_ipv6 </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test that an OS supports IPv6 Networking. </p>
<dl class="section since"><dt>Since</dt><dd>13.14.0</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>True (non-zero) if the IPv6 supported. </dd>
<dd>
False (zero) if the OS doesn't support IPv6. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02540">2540</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d82/res__pjsip__sdp__rtp_8c_source.html#l02347">load_module()</a>.</p>
<div class="fragment"><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;{</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;   <span class="keywordtype">int</span> udp6_socket = socket(AF_INET6, SOCK_DGRAM, 0);</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;   <span class="keywordflow">if</span> (udp6_socket &lt; 0) {</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;   }</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;</div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;   close(udp6_socket);</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a8bd0b54402131cb70f10de56313acab8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8bd0b54402131cb70f10de56313acab8">&#9670;&nbsp;</a></span>ast_compare_versions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_compare_versions </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>version1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>version2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare 2 major.minor.patch.extra version strings. </p>
<dl class="section since"><dt>Since</dt><dd>13.7.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">version1.</td><td></td></tr>
    <tr><td class="paramname">version2.</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>&lt;0 if version 1 &lt; version 2. </dd>
<dd>
=0 if version 1 = version 2. </dd>
<dd>
&gt;0 if version 1 &gt; version 2. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02872">2872</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00632">transport_apply()</a>.</p>
<div class="fragment"><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;{</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> major[2] = { 0 };</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> minor[2] = { 0 };</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> patch[2] = { 0 };</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> extra[2] = { 0 };</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;   sscanf(version1, <span class="stringliteral">&quot;%u.%u.%u.%u&quot;</span>, &amp;major[0], &amp;minor[0], &amp;patch[0], &amp;extra[0]);</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;   sscanf(version2, <span class="stringliteral">&quot;%u.%u.%u.%u&quot;</span>, &amp;major[1], &amp;minor[1], &amp;patch[1], &amp;extra[1]);</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;   res = major[0] - major[1];</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;   }</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;   res = minor[0] - minor[1];</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;   }</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;   res = patch[0] - patch[1];</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;   <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;      <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;   }</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;   <span class="keywordflow">return</span> extra[0] - extra[1];</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a994e667dad5f5de31bc0d9c1b95b1b8c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a994e667dad5f5de31bc0d9c1b95b1b8c">&#9670;&nbsp;</a></span>ast_do_crash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="../../d5/d60/utils_8h.html#a3990d11e35b0041fb5d0caa68ee50cb6">DO_CRASH_NORETURN</a> ast_do_crash </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Force a crash if DO_CRASH is defined. </p>
<dl class="section note"><dt>Note</dt><dd>If DO_CRASH is not defined then the function returns.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02552">2552</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02564">__ast_assert_failed()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00703">_ast_assert()</a>, <a class="el" href="../../d1/d5d/optional__api_8c_source.html#l00232">ast_optional_api_use()</a>, <a class="el" href="../../d1/d5d/optional__api_8c_source.html#l00134">optional_api_create()</a>, <a class="el" href="../../d1/d5d/optional__api_8c_source.html#l00093">optional_api_user_create()</a>, and <a class="el" href="../../df/dbf/route_8c_source.html#l00079">sip_route_process_header()</a>.</p>
<div class="fragment"><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;{</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;<span class="preprocessor">#if defined(DO_CRASH)</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;   abort();</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;<span class="comment">    * Just in case abort() doesn&#39;t work or something else super</span></div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;<span class="comment">    * silly, and for Qwell&#39;s amusement.</span></div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;   *((<span class="keywordtype">int</span> *) 0) = 0;</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;<span class="preprocessor">#endif   </span><span class="comment">/* defined(DO_CRASH) */</span><span class="preprocessor"></span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a821120ebd995b34627205de93d046d8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a821120ebd995b34627205de93d046d8a">&#9670;&nbsp;</a></span>ast_dump_locks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a>* ast_dump_locks </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Generate a lock dump equivalent to "core show locks". </p>
<p>The lock dump generated is generally too large to be output by a single ast_verbose/log/debug/etc. call. Only <a class="el" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli()</a> handles it properly without changing BUFSIZ in logger.c.</p>
<p>Note: This must be <a class="el" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free()</a>d when you're done with it.</p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">An</td><td><a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> containing the lock dump </td></tr>
    <tr><td class="paramname">NULL</td><td>on error </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01264">1264</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01174">append_lock_information()</a>, <a class="el" href="../../d2/d0b/version_8c_source.html#l00016">ast_get_version()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01091">ast_str_append()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00853">lock_infos_lock</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00843">thr_lock_info::lwp</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00136">ast_mutex_info::mutex</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00833">thr_lock_info::suspended</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00818">thr_lock_info::thread_id</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00820">thr_lock_info::thread_name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01339">handle_show_locks()</a>.</p>
<div class="fragment"><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;{</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   <span class="keywordflow">if</span> (!(str = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(4096))) {</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   }</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;str, 0, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                  <span class="stringliteral">&quot;=======================================================================\n&quot;</span></div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;                  <span class="stringliteral">&quot;=== %s\n&quot;</span></div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;                  <span class="stringliteral">&quot;=== Currently Held Locks\n&quot;</span></div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;                  <span class="stringliteral">&quot;=======================================================================\n&quot;</span></div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;                  <span class="stringliteral">&quot;===\n&quot;</span></div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;                  <span class="stringliteral">&quot;=== &lt;pending&gt; &lt;lock#&gt; (&lt;file&gt;): &lt;lock type&gt; &lt;line num&gt; &lt;function&gt; &lt;lock name&gt; &lt;lock addr&gt; (times locked)\n&quot;</span></div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;                  <span class="stringliteral">&quot;===\n&quot;</span>, <a class="code" href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a>());</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   <span class="keywordflow">if</span> (!str) {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a>.<a class="code" href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d1/d14/structlock__infos.html">lock_infos</a>, lock_info, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="keywordtype">int</span> header_printed = 0;</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      <span class="keywordflow">for</span> (i = 0; str &amp;&amp; i &lt; lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a>; i++) {</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;         <span class="comment">/* Don&#39;t show suspended locks */</span></div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;         <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#af62c9334e77989174caccf53beee4215">suspended</a>) {</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;         }</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;         <span class="keywordflow">if</span> (!header_printed) {</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;            <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a1a8544029f1f17896aa17752c6aeed52">lwp</a> != -1) {</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;str, 0, <span class="stringliteral">&quot;=== Thread ID: 0x%lx LWP:%d (%s)\n&quot;</span>,</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                  (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span>) lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a614409619094fd8c0c6b522c400ffeea">thread_id</a>, lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a1a8544029f1f17896aa17752c6aeed52">lwp</a>, lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#af081a07b0c5074db7c1896da8fb72e81">thread_name</a>);</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;str, 0, <span class="stringliteral">&quot;=== Thread ID: 0x%lx (%s)\n&quot;</span>,</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;                  (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span>) lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a614409619094fd8c0c6b522c400ffeea">thread_id</a>, lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#af081a07b0c5074db7c1896da8fb72e81">thread_name</a>);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;            }</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;            header_printed = 1;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;         }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;         <a class="code" href="../../de/d1f/main_2utils_8c.html#acd9e4b05a5bb427d74a3c5ef4737a1da">append_lock_information</a>(&amp;str, lock_info, i);</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      }</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      <span class="keywordflow">if</span> (!str) {</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;      <span class="keywordflow">if</span> (header_printed) {</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;str, 0, <span class="stringliteral">&quot;=== -------------------------------------------------------------------\n&quot;</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;            <span class="stringliteral">&quot;===\n&quot;</span>);</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      }</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      <span class="keywordflow">if</span> (!str) {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;      }</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;   }</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a>.<a class="code" href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>);</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <span class="keywordflow">if</span> (!str) {</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;   }</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;str, 0, <span class="stringliteral">&quot;=======================================================================\n&quot;</span></div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;                  <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* if defined(LOW_MEMORY) */</span><span class="preprocessor"></span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;}</div><div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="ast__version_8h_html_a7765c608aea948584928643ab3963b2a"><div class="ttname"><a href="../../d5/db9/ast__version_8h.html#a7765c608aea948584928643ab3963b2a">ast_get_version</a></div><div class="ttdeci">const char * ast_get_version(void)</div><div class="ttdoc">Retrieve the Asterisk version string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0b/version_8c_source.html#l00016">version.c:16</a></div></div>
<div class="ttc" id="main_2utils_8c_html_acd9e4b05a5bb427d74a3c5ef4737a1da"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#acd9e4b05a5bb427d74a3c5ef4737a1da">append_lock_information</a></div><div class="ttdeci">static void append_lock_information(struct ast_str **str, struct thr_lock_info *lock_info, int i)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01174">main/utils.c:1174</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a1a8544029f1f17896aa17752c6aeed52"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a1a8544029f1f17896aa17752c6aeed52">thr_lock_info::lwp</a></div><div class="ttdeci">int lwp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00843">main/utils.c:843</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af62c9334e77989174caccf53beee4215"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af62c9334e77989174caccf53beee4215">thr_lock_info::suspended</a></div><div class="ttdeci">int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00833">main/utils.c:833</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a1196be5ab4cded8d600e0668cc67a3ef"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a></div><div class="ttdeci">static ast_mutex_t lock_infos_lock</div><div class="ttdoc">Locked when accessing the lock_infos list. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00853">main/utils.c:853</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a614409619094fd8c0c6b522c400ffeea"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a614409619094fd8c0c6b522c400ffeea">thr_lock_info::thread_id</a></div><div class="ttdeci">pthread_t thread_id</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00818">main/utils.c:818</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af081a07b0c5074db7c1896da8fb72e81"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af081a07b0c5074db7c1896da8fb72e81">thr_lock_info::thread_name</a></div><div class="ttdeci">const char * thread_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00820">main/utils.c:820</a></div></div>
<div class="ttc" id="structlock__infos_html"><div class="ttname"><a href="../../d1/d14/structlock__infos.html">lock_infos</a></div><div class="ttdoc">A list of each thread&amp;#39;s lock info. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00857">main/utils.c:857</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="structast__mutex__info_html_a4acff8232e4aec9cd5c6dc200ac55ef3"><div class="ttname"><a href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">ast_mutex_info::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00136">lock.h:136</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4e9f7c7ca75b0ff48b60b136e3961b61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4e9f7c7ca75b0ff48b60b136e3961b61">&#9670;&nbsp;</a></span>ast_eid_cmp()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_eid_cmp </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *&#160;</td>
          <td class="paramname"><em>eid1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *&#160;</td>
          <td class="paramname"><em>eid2</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Compare two EIDs. </p>
<dl class="section return"><dt>Returns</dt><dd>0 if the two are the same, non-zero otherwise </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02842">2842</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../db/d00/test__stasis_8c_source.html#l00099">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00173">asterisk_publisher_devstate_cb()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00232">asterisk_publisher_mwistate_cb()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">build_transactions()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00631">cache_entry_by_eid()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00212">cache_entry_create()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00425">cache_remove()</a>, <a class="el" href="../../d0/da9/stasis__cache_8c_source.html#l00466">cache_udpate()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00623">clear_node_cache()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00484">cpg_deliver_cb()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00809">dundi_answer_entity()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01087">dundi_answer_query()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03391">dundi_ie_append_eid_appropriately()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00754">dundi_query_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00515">find_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03584">optimize_transactions()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00351">publish_cluster_discovery_to_stasis()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00571">publish_to_corosync()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03758">register_request()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00620">state_find_and_remove_eid()</a>, <a class="el" href="../../dc/d1d/stasis__state_8c_source.html#l00586">state_find_or_add_eid()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01364">xmpp_pubsub_devstate_cb()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01461">xmpp_pubsub_handle_event()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01336">xmpp_pubsub_mwi_cb()</a>.</p>
<div class="fragment"><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;{</div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;   <span class="keywordflow">return</span> memcmp(eid1, eid2, <span class="keyword">sizeof</span>(*eid1));</div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a9052010ef014bd56be478fab26feb2e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9052010ef014bd56be478fab26feb2e1">&#9670;&nbsp;</a></span>ast_eid_is_empty()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_eid_is_empty </td>
          <td>(</td>
          <td class="paramtype">const struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check if EID is empty. </p>
<dl class="section return"><dt>Returns</dt><dd>1 if the EID is empty, zero otherwise </dd></dl>
<dl class="section since"><dt>Since</dt><dd>13.12.0 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02847">2847</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l01336">load_module()</a>, and <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;{</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d86/structast__eid.html">ast_eid</a> <a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a>;</div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;   memset(&amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a>, 0, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a>));</div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;   <span class="keywordflow">return</span> memcmp(eid, &amp;<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a>, <span class="keyword">sizeof</span>(<a class="code" href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a>)) ? 0 : 1;</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;}</div><div class="ttc" id="structast__eid_html"><div class="ttname"><a href="../../d0/d86/structast__eid.html">ast_eid</a></div><div class="ttdoc">An Entity ID is essentially a MAC address, brief and unique. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00786">utils.h:786</a></div></div>
<div class="ttc" id="pbx__dundi_8c_html_a17c3cc4871bd7c8bbe750e2ce7c8b0ab"><div class="ttname"><a href="../../d1/dc0/pbx__dundi_8c.html#a17c3cc4871bd7c8bbe750e2ce7c8b0ab">empty_eid</a></div><div class="ttdeci">static dundi_eid empty_eid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/dc0/pbx__dundi_8c_source.html#l00212">pbx_dundi.c:212</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8ebf6841073ea2a063a0c86a5092a85b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ebf6841073ea2a063a0c86a5092a85b">&#9670;&nbsp;</a></span>ast_eid_to_str()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_eid_to_str </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>maxlen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert an EID to a string. </p>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">2587</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02749">ast_set_default_eid()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00787">ast_eid::eid</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d5e/res_2stasis_2app_8c_source.html#l01038">app_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03642">append_transaction()</a>, <a class="el" href="../../df/d20/resource__asterisk_8c_source.html#l00294">ast_ari_asterisk_get_info()</a>, <a class="el" href="../../df/d20/resource__asterisk_8c_source.html#l00634">ast_ari_asterisk_ping()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02749">ast_set_default_eid()</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l00246">ast_str_retrieve_variable()</a>, <a class="el" href="../../d0/d77/test__res__stasis_8c_source.html#l00131">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00766">asterisk_publication_send_refresh()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00173">asterisk_publisher_devstate_cb()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00232">asterisk_publisher_mwistate_cb()</a>, <a class="el" href="../../d8/d3a/bridges_8c_source.html#l00078">bridges_scrape_cb()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03700">build_transactions()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01242">cache_lookup()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01170">cache_lookup_internal()</a>, <a class="el" href="../../df/d8d/channels_8c_source.html#l00130">channels_scrape_cb()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01492">check_key()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02417">complete_peer_helper()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00484">cpg_deliver_cb()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03203">destroy_trans()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03380">do_autokill()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04531">do_register()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01321">do_register_expire()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00284">dump_answer()</a>, <a class="el" href="../../df/d70/dundi-parser_8c_source.html#l00103">dump_eid()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00809">dundi_answer_entity()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03824">dundi_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00578">dundi_lookup_local()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00657">dundi_lookup_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00721">dundi_precache_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00940">dundi_prop_precache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00754">dundi_query_thread()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03308">dundi_send()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02955">dundi_show_cache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02827">dundi_show_entityid()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03050">dundi_show_hints()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02621">dundi_show_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02697">dundi_show_peers()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02850">dundi_show_requests()</a>, <a class="el" href="../../d6/d2c/res_2prometheus_2endpoints_8c_source.html#l00097">endpoints_scrape_cb()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01586">handle_command_response()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00450">handle_show_settings()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04588">populate_addr()</a>, <a class="el" href="../../d7/d1b/res__prometheus_8c_source.html#l00827">prometheus_config_post_apply()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00303">publish_cluster_discovery_to_stasis_full()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00432">publish_device_state_to_stasis()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00394">publish_mwi_to_stasis()</a>, <a class="el" href="../../d1/da4/res__corosync_8c_source.html#l00571">publish_to_corosync()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03758">register_request()</a>, <a class="el" href="../../d6/d5d/pjsip__outbound__registrations_8c_source.html#l00267">registry_message_cb()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01334">update_key()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01300">xmpp_pubsub_publish_device_state()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01269">xmpp_pubsub_publish_mwi()</a>.</p>
<div class="fragment"><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;{</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;   <span class="keywordtype">char</span> *os = s;</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   <span class="keywordflow">if</span> (maxlen &lt; 18) {</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <span class="keywordflow">if</span> (s &amp;&amp; (maxlen &gt; 0)) {</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;         *s = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;      }</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;      <span class="keywordflow">for</span> (x = 0; x &lt; 5; x++) {</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;         sprintf(s, <span class="stringliteral">&quot;%02hhx:&quot;</span>, eid-&gt;<a class="code" href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">eid</a>[x]);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;         s += 3;</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;      }</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;      sprintf(s, <span class="stringliteral">&quot;%02hhx&quot;</span>, eid-&gt;<a class="code" href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">eid</a>[5]);</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;   }</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;   <span class="keywordflow">return</span> os;</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;}</div><div class="ttc" id="structast__eid_html_aaffcb04ac1b364a0788003f95715460b"><div class="ttname"><a href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">ast_eid::eid</a></div><div class="ttdeci">unsigned char eid[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00787">utils.h:787</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a89056bba460d0aa179d3a3ddc0af472a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a89056bba460d0aa179d3a3ddc0af472a">&#9670;&nbsp;</a></span>ast_enable_packet_fragmentation()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_enable_packet_fragmentation </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>sock</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disable PMTU discovery on a socket. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sock</td><td>The socket to manipulate </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing</dd></dl>
<p>On Linux, UDP sockets default to sending packets with the Dont Fragment (DF) bit set. This is supposedly done to allow the application to do PMTU discovery, but Asterisk does not do this.</p>
<p>Because of this, UDP packets sent by Asterisk that are larger than the MTU of any hop in the path will be lost. This function can be called on a socket to ensure that the DF bit will not be set. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02221">2221</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d79/netsock_8c_source.html#l00109">ast_netsock_bindaddr()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l32514">reload_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;{</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;<span class="preprocessor">#if defined(HAVE_IP_MTU_DISCOVER)</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d5/d85/structval.html">val</a> = IP_PMTUDISC_DONT;</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;   <span class="keywordflow">if</span> (setsockopt(sock, IPPROTO_IP, IP_MTU_DISCOVER, &amp;val, <span class="keyword">sizeof</span>(val)))</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to disable PMTU discovery. Large UDP packets may fail to be delivered when sent from this socket.\n&quot;</span>);</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* HAVE_IP_MTU_DISCOVER */</span><span class="preprocessor"></span></div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;}</div><div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a74d504bc3094ec99b1618a1c41b68e19"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74d504bc3094ec99b1618a1c41b68e19">&#9670;&nbsp;</a></span>ast_escape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_escape </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to_escape</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escape the 'to_escape' characters in the given string. </p>
<dl class="section note"><dt>Note</dt><dd>The given output buffer will contain a truncated escaped version of the source string if the given buffer is not large enough.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>the escaped string </td></tr>
    <tr><td class="paramname">s</td><td>the source string to escape </td></tr>
    <tr><td class="paramname">size</td><td>The size of the destination buffer </td></tr>
    <tr><td class="paramname">to_escape</td><td>an array of characters to escape</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the destination. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01786">1786</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01774">escape_sequences</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01884">ast_escape_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;{</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;   <span class="keywordtype">char</span> *p;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;   <span class="keywordflow">if</span> (!dest || !size) {</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;   }</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(s)) {</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      *dest = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;      <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;   }</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(to_escape)) {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(dest, s, size);</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;   }</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;   <span class="keywordflow">for</span> (p = dest; *s &amp;&amp; --size; ++s, ++p) {</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;      <span class="comment">/* If in the list of characters to escape then escape it */</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;      <span class="keywordflow">if</span> (strchr(to_escape, *s)) {</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;         <span class="keywordflow">if</span> (!--size) {</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;            <span class="comment">/* Not enough room left for the escape sequence. */</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;         }</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="comment">          * See if the character to escape is part of the standard escape</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<span class="comment">          * sequences. If so we&#39;ll have to use its mapped counterpart</span></div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;<span class="comment">          * otherwise just use the current character.</span></div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;         c = strchr(<a class="code" href="../../de/d1f/main_2utils_8c.html#a3ee5b00b500b43bd5aa3beaed4687062">escape_sequences</a>, *s);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;         *p++ = <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;         *p = c ? <a class="code" href="../../de/d1f/main_2utils_8c.html#abc3f1ac567f35d628dd8766937f9cbcd">escape_sequences_map</a>[c - <a class="code" href="../../de/d1f/main_2utils_8c.html#a3ee5b00b500b43bd5aa3beaed4687062">escape_sequences</a>] : *s;</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;         *p = *s;</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;      }</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   }</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   *p = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;}</div><div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a3ee5b00b500b43bd5aa3beaed4687062"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a3ee5b00b500b43bd5aa3beaed4687062">escape_sequences</a></div><div class="ttdeci">char escape_sequences[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01774">main/utils.c:1774</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="main_2utils_8c_html_abc3f1ac567f35d628dd8766937f9cbcd"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#abc3f1ac567f35d628dd8766937f9cbcd">escape_sequences_map</a></div><div class="ttdeci">static char escape_sequences_map[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01782">main/utils.c:1782</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a292ef9ea10c2bda74db29c6c60add439"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a292ef9ea10c2bda74db29c6c60add439">&#9670;&nbsp;</a></span>ast_escape_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_escape_alloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>to_escape</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escape the 'to_escape' characters in the given string. </p>
<dl class="section note"><dt>Note</dt><dd>Caller is responsible for freeing the returned string</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>the source string to escape </td></tr>
    <tr><td class="paramname">to_escape</td><td>an array of characters to escape</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the escaped string or NULL. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01884">1884</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01786">ast_escape()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01870">escape_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;{</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;   <span class="keywordtype">size_t</span> size = 0;</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;   <span class="keywordtype">char</span> *dest = <a class="code" href="../../de/d1f/main_2utils_8c.html#aa526f7bf4d65334b2859e51a2a6744cd">escape_alloc</a>(s, &amp;size);</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1f/main_2utils_8c.html#a74d504bc3094ec99b1618a1c41b68e19">ast_escape</a>(dest, s, size, to_escape);</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_aa526f7bf4d65334b2859e51a2a6744cd"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#aa526f7bf4d65334b2859e51a2a6744cd">escape_alloc</a></div><div class="ttdeci">static char * escape_alloc(const char *s, size_t *size)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01870">main/utils.c:1870</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a74d504bc3094ec99b1618a1c41b68e19"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a74d504bc3094ec99b1618a1c41b68e19">ast_escape</a></div><div class="ttdeci">char * ast_escape(char *dest, const char *s, size_t size, const char *to_escape)</div><div class="ttdoc">Escape the &amp;#39;to_escape&amp;#39; characters in the given string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01786">main/utils.c:1786</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a365aacee32b2b6eb95f871376cf2aeec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a365aacee32b2b6eb95f871376cf2aeec">&#9670;&nbsp;</a></span>ast_escape_c()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_escape_c </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>dest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escape standard 'C' sequences in the given string. </p>
<dl class="section note"><dt>Note</dt><dd>The given output buffer will contain a truncated escaped version of the source string if the given buffer is not large enough.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dest</td><td>the escaped string </td></tr>
    <tr><td class="paramname">s</td><td>the source string to escape </td></tr>
    <tr><td class="paramname">size</td><td>The size of the destination buffer</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the escaped string. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01829">1829</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01774">escape_sequences</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01892">ast_escape_c_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;{</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="comment">    * Note - This is an optimized version of ast_escape. When looking only</span></div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;<span class="comment">    * for escape_sequences a couple of checks used in the generic case can</span></div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;<span class="comment">    * be left out thus making it slightly more efficient.</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;   <span class="keywordtype">char</span> *p;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;   <span class="keywordflow">if</span> (!dest || !size) {</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;   }</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(s)) {</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      *dest = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;      <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;   }</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;   <span class="keywordflow">for</span> (p = dest; *s &amp;&amp; --size; ++s, ++p) {</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment">       * See if the character to escape is part of the standard escape</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment">       * sequences. If so use its mapped counterpart.</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;      c = strchr(<a class="code" href="../../de/d1f/main_2utils_8c.html#a3ee5b00b500b43bd5aa3beaed4687062">escape_sequences</a>, *s);</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;      <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;         <span class="keywordflow">if</span> (!--size) {</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;            <span class="comment">/* Not enough room left for the escape sequence. */</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;         }</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;         *p++ = <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;         *p = <a class="code" href="../../de/d1f/main_2utils_8c.html#abc3f1ac567f35d628dd8766937f9cbcd">escape_sequences_map</a>[c - <a class="code" href="../../de/d1f/main_2utils_8c.html#a3ee5b00b500b43bd5aa3beaed4687062">escape_sequences</a>];</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;         *p = *s;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;      }</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   }</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   *p = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;   <span class="keywordflow">return</span> dest;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;}</div><div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a3ee5b00b500b43bd5aa3beaed4687062"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a3ee5b00b500b43bd5aa3beaed4687062">escape_sequences</a></div><div class="ttdeci">char escape_sequences[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01774">main/utils.c:1774</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="main_2utils_8c_html_abc3f1ac567f35d628dd8766937f9cbcd"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#abc3f1ac567f35d628dd8766937f9cbcd">escape_sequences_map</a></div><div class="ttdeci">static char escape_sequences_map[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01782">main/utils.c:1782</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a62bd9f69e2bd9ccd3760d9681987eca0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a62bd9f69e2bd9ccd3760d9681987eca0">&#9670;&nbsp;</a></span>ast_escape_c_alloc()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_escape_c_alloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escape standard 'C' sequences in the given string. </p>
<dl class="section note"><dt>Note</dt><dd>Caller is responsible for freeing the returned string</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>the source string to escape</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the escaped string or NULL. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01892">1892</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01829">ast_escape_c()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01870">escape_alloc()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00487">ast_manager_build_channel_state_string_prefix()</a>, <a class="el" href="../../d0/d1c/manager__channels_8c_source.html#l00640">channel_new_callerid()</a>, <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00525">presence_state_to_ami()</a>, and <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01175">varset_to_ami()</a>.</p>
<div class="fragment"><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;{</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <span class="keywordtype">size_t</span> size = 0;</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;   <span class="keywordtype">char</span> *dest = <a class="code" href="../../de/d1f/main_2utils_8c.html#aa526f7bf4d65334b2859e51a2a6744cd">escape_alloc</a>(s, &amp;size);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1f/main_2utils_8c.html#a365aacee32b2b6eb95f871376cf2aeec">ast_escape_c</a>(dest, s, size);</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a365aacee32b2b6eb95f871376cf2aeec"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a365aacee32b2b6eb95f871376cf2aeec">ast_escape_c</a></div><div class="ttdeci">char * ast_escape_c(char *dest, const char *s, size_t size)</div><div class="ttdoc">Escape standard &amp;#39;C&amp;#39; sequences in the given string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01829">main/utils.c:1829</a></div></div>
<div class="ttc" id="main_2utils_8c_html_aa526f7bf4d65334b2859e51a2a6744cd"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#aa526f7bf4d65334b2859e51a2a6744cd">escape_alloc</a></div><div class="ttdeci">static char * escape_alloc(const char *s, size_t *size)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01870">main/utils.c:1870</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4b31ed81ab98c5aa5fc1d298874abf54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b31ed81ab98c5aa5fc1d298874abf54">&#9670;&nbsp;</a></span>ast_escape_quoted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_escape_quoted </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>outbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escape characters found in a quoted string. </p>
<dl class="section note"><dt>Note</dt><dd>This function escapes quoted characters based on the 'qdtext' set of allowed characters from RFC 3261 section 25.1.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>string to be escaped </td></tr>
    <tr><td class="paramname">outbuf</td><td>resulting escaped string </td></tr>
    <tr><td class="paramname">buflen</td><td>size of output buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the escaped string </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00635">635</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, and <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00071">string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14653">add_diversion()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l12996">add_rpid()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01073">ast_callerid_merge()</a>, <a class="el" href="../../de/d96/res__pjsip_8c_source.html#l05587">ast_sip_modify_id_header()</a>, <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00129">AST_TEST_DEFINE()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l00760">channel_read_pjsip()</a>, <a class="el" href="../../dc/d2a/res__pjsip__caller__id_8c_source.html#l00488">create_new_id_hdr()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14410">initreqprep()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l00736">print_escaped_uri()</a>, and <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l19707">receive_message()</a>.</p>
<div class="fragment"><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;{</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ptr  = <a class="code" href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a>;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = outbuf;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <span class="keywordtype">char</span> *allow = <span class="stringliteral">&quot;\t\v !&quot;</span>; <span class="comment">/* allow LWS (minus \r and \n) and &quot;!&quot; */</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="keywordflow">while</span> (*ptr &amp;&amp; out - outbuf &lt; buflen - 1) {</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;      <span class="keywordflow">if</span> (!(strchr(allow, *ptr))</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;         &amp;&amp; !(*ptr &gt;= <span class="charliteral">&#39;#&#39;</span> &amp;&amp; *ptr &lt;= <span class="charliteral">&#39;[&#39;</span>) <span class="comment">/* %x23 - %x5b */</span></div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;         &amp;&amp; !(*ptr &gt;= <span class="charliteral">&#39;]&#39;</span> &amp;&amp; *ptr &lt;= <span class="charliteral">&#39;~&#39;</span>) <span class="comment">/* %x5d - %x7e */</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;         &amp;&amp; !((<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) *ptr &gt; 0x7f)) {             <span class="comment">/* UTF8-nonascii */</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;         <span class="keywordflow">if</span> (out - outbuf &gt;= buflen - 2) {</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;         }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;         out += sprintf(out, <span class="stringliteral">&quot;\\%c&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) *ptr);</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;         *out = *ptr;</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;         out++;</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      }</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      ptr++;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="keywordflow">if</span> (buflen) {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      *out = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   }</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;   <span class="keywordflow">return</span> outbuf;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;}</div><div class="ttc" id="presencestate_8c_html_ae1adbce218e7a9d09164012443191d24"><div class="ttname"><a href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a></div><div class="ttdeci">const char * string</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00071">presencestate.c:71</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a73280c4c3636bb644afd1b5e49e73222"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73280c4c3636bb644afd1b5e49e73222">&#9670;&nbsp;</a></span>ast_escape_semicolons()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_escape_semicolons </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>outbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escape semicolons found in a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>string to be escaped </td></tr>
    <tr><td class="paramname">outbuf</td><td>resulting escaped string </td></tr>
    <tr><td class="paramname">buflen</td><td>size of output buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the escaped string </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00665">665</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, and <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00071">string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l02555">ast_config_text_file_save2()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l00809">handle_cli_dialplan_save()</a>, and <a class="el" href="../../d2/d06/test__strings_8c_source.html#l00388">test_semi()</a>.</p>
<div class="fragment"><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;{</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ptr = <a class="code" href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a>;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = outbuf;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <span class="keywordflow">if</span> (<span class="keywordtype">string</span> == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || outbuf == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<span class="keywordtype">string</span> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> &amp;&amp; outbuf != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;   <span class="keywordflow">while</span> (*ptr &amp;&amp; out - outbuf &lt; buflen - 1) {</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;      <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;;&#39;</span>) {</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;         <span class="keywordflow">if</span> (out - outbuf &gt;= buflen - 2) {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;         }</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;         strcpy(out, <span class="stringliteral">&quot;\\;&quot;</span>);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;         out += 2;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;         *out = *ptr;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;         out++;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;      }</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;      ptr++;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   }</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <span class="keywordflow">if</span> (buflen) {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      *out = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="keywordflow">return</span> outbuf;</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;}</div><div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="presencestate_8c_html_ae1adbce218e7a9d09164012443191d24"><div class="ttname"><a href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a></div><div class="ttdeci">const char * string</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00071">presencestate.c:71</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab974fc2bc77e80f85dda82b5cf14bf58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab974fc2bc77e80f85dda82b5cf14bf58">&#9670;&nbsp;</a></span>ast_false()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_false </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make sure something is false. Determine if a string containing a boolean value is "false". This function checks to see whether a string passed to it is an indication of an "false" value. It checks to see if the string is "no", "false", "n", "f", "off" or "0". </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if val is a NULL pointer. </td></tr>
    <tr><td class="paramname">-1</td><td>if "true". </td></tr>
    <tr><td class="paramname">0</td><td>otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01968">1968</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04601">acf_faxopt_write()</a>, <a class="el" href="../../da/d92/res__odbc__transaction_8c_source.html#l00390">acf_transaction_write()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13680">actual_load_config()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l02082">announce_user_count_all_handler()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01355">aoc_cli_debug_enable()</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l01538">bool_handler_fn()</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l01549">boolflag_handler_fn()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13119">build_user()</a>, <a class="el" href="../../d0/d73/res__pjsip__logger_8c_source.html#l00514">check_debug()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16163">dahdi_set_dnd()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01236">find_realtime()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l03730">function_ooh323_write()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31120">handle_common_options()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10896">handle_queue_set_member_ringinuse()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00418">hook_write()</a>, <a class="el" href="../../dc/d1d/func__odbc_8c_source.html#l01204">init_acf_query()</a>, <a class="el" href="../../d1/d1b/res__snmp_8c_source.html#l00053">load_config()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01406">manager_mute_mixmonitor()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10457">manager_queue_member_ringinuse()</a>, <a class="el" href="../../d7/d45/res__parking_8c_source.html#l00544">parking_feature_flag_cfg()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03101">parse_empty_options()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00728">parse_playtone()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00175">prack_handler()</a>, <a class="el" href="../../d4/d45/test__http__media__cache_8c_source.html#l00607">process_config()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l17900">process_dahdi()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l17728">process_echocancel()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03336">read_pjproject_startup_options()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11538">reload()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l02813">reload_config()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l09244">reload_single_member()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03392">rt_handle_member_record()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">run_agi()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13476">set_config()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31049">set_insecure_flags()</a>, <a class="el" href="../../d8/d9c/config__parser_8c_source.html#l00794">sip_parse_nat_option()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l07474">sla_build_trunk()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02152">strings_to_mask()</a>, and <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00209">timers_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;{</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(s))</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <span class="comment">/* Determine if this is a false value */</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(s, <span class="stringliteral">&quot;no&quot;</span>) ||</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;false&quot;</span>) ||</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;n&quot;</span>) ||</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;f&quot;</span>) ||</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;0&quot;</span>) ||</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;off&quot;</span>))</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a34ed7a76195d923c099606f796294a3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a34ed7a76195d923c099606f796294a3b">&#9670;&nbsp;</a></span>ast_file_is_readable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_file_is_readable </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Test that a file exists and is readable by the effective user. </p>
<dl class="section since"><dt>Since</dt><dd>13.7.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>File to test. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True (non-zero) if the file exists and is readable. </dd>
<dd>
False (zero) if the file either doesn't exists or is not readable. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02855">2855</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05384">add_email_attachment()</a>, <a class="el" href="../../df/dfb/media__cache_8c_source.html#l00197">ast_media_cache_retrieve()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03020">ast_rtp_dtls_cfg_parse()</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00188">on_load_ca_file()</a>, <a class="el" href="../../d1/dca/general_8c_source.html#l00210">on_load_ca_path()</a>, and <a class="el" href="../../d3/d17/config__transport_8c_source.html#l00880">transport_tls_file_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;{</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;<span class="preprocessor">#if defined(HAVE_EACCESS) || defined(HAVE_EUIDACCESS)</span></div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;<span class="preprocessor">#if defined(HAVE_EUIDACCESS) &amp;&amp; !defined(HAVE_EACCESS)</span></div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;<span class="preprocessor">#define eaccess euidaccess</span></div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;   <span class="keywordflow">return</span> eaccess(filename, R_OK) == 0;</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;   <span class="keywordtype">int</span> fd = open(filename, O_RDONLY |  O_NONBLOCK);</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;   <span class="keywordflow">if</span> (fd &lt; 0) {</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;   }</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;   close(fd);</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="aacd7565f51724188ecf0f21f2a43fb1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacd7565f51724188ecf0f21f2a43fb1e">&#9670;&nbsp;</a></span>ast_find_lock_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_find_lock_info </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>lock_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>filename_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>lineno</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>func_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>mutex_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>mutex_name_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>retrieve lock info for the specified mutex </p>
<p>this gets called during deadlock avoidance, so that the information may be preserved as to what location originally acquired the lock. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00995">995</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00823">thr_lock_info::file</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00824">thr_lock_info::func</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00828">thr_lock_info::line_num</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00825">thr_lock_info::lock_name</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">thread_lock_info</a>.</p>
<div class="fragment"><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;{</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;   <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;   <span class="keywordflow">if</span> (!(lock_info = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a>, <span class="keyword">sizeof</span>(*lock_info))))</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;   <span class="keywordflow">for</span> (i = lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1; i &gt;= 0; i--) {</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a> == <a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>)</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   <span class="keywordflow">if</span> (i == -1) {</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;      <span class="comment">/* Lock not found :( */</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;   }</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(filename, lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>, filename_size);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   *lineno = lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a7661b5d028be7f8997cef563e3890fd9">line_num</a>;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(<a class="code" href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a>, lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a>, func_size);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(mutex_name, lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#aab5e878cae779b0da45f2c9ddce62ae8">lock_name</a>, mutex_name_size);</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="preprocessor">#else </span><span class="comment">/* if defined(LOW_MEMORY) */</span><span class="preprocessor"></span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="structthr__lock__info_html_aab5e878cae779b0da45f2c9ddce62ae8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#aab5e878cae779b0da45f2c9ddce62ae8">thr_lock_info::lock_name</a></div><div class="ttdeci">const char * lock_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00825">main/utils.c:825</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a7661b5d028be7f8997cef563e3890fd9"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a7661b5d028be7f8997cef563e3890fd9">thr_lock_info::line_num</a></div><div class="ttdeci">int line_num</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00828">main/utils.c:828</a></div></div>
<div class="ttc" id="main_2utils_8c_html_ae1445fe6bc0aafd9832b2d53377c952a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a></div><div class="ttdeci">static struct ast_threadstorage thread_lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00902">main/utils.c:902</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="structthr__lock__info_html_afc4e949c7b7d0ab565ecfb62c3380171"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">thr_lock_info::func</a></div><div class="ttdeci">const char * func</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00824">main/utils.c:824</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af0baa3ccdd9d2a6adf03b72e2bea5789"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af0baa3ccdd9d2a6adf03b72e2bea5789">thr_lock_info::file</a></div><div class="ttdeci">const char * file</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00823">main/utils.c:823</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6414288234db8cadefa9680e8ac0f968"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6414288234db8cadefa9680e8ac0f968">&#9670;&nbsp;</a></span>ast_format_duration_hh_mm_ss()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_format_duration_hh_mm_ss </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>duration</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Formats a duration into HH:MM:SS. </p>
<dl class="section since"><dt>Since</dt><dd>12 </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">duration</td><td>The time (in seconds) to format </td></tr>
    <tr><td class="paramname">buf</td><td>A buffer to hold the formatted string' </td></tr>
    <tr><td class="paramname">length</td><td>The size of the buffer </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02049">2049</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d6d/cli__commands_8c_source.html#l00271">cli_channel_print_body()</a>, <a class="el" href="../../d9/d6d/cli__commands_8c_source.html#l00337">cli_channelstats_print_body()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05094">handle_bridge_show_all()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05157">handle_bridge_show_specific()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l21742">show_chanstats_cb()</a>, and <a class="el" href="../../d0/df4/stasis_8c_source.html#l02417">stasis_show_topic()</a>.</p>
<div class="fragment"><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;{</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   <span class="keywordtype">int</span> durh, durm, durs;</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;   durh = duration / 3600;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;   durm = (duration % 3600) / 60;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;   durs = duration % 60;</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;   snprintf(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, length, <span class="stringliteral">&quot;%02d:%02d:%02d&quot;</span>, durh, durm, durs);</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a78ce13d749925cbdaa7625e8dbdcbf7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78ce13d749925cbdaa7625e8dbdcbf7f">&#9670;&nbsp;</a></span>ast_get_tid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_get_tid </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get current thread ID. </p>
<dl class="section return"><dt>Returns</dt><dd>the ID if platform is supported, else -1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02504">2504</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../da/df7/astobj2_8c_source.html#l00498">__ao2_ref()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00414">ast_register_thread()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01394">dummy_start()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l01682">format_log_message_ap()</a>, and <a class="el" href="../../da/df7/astobj2_8c_source.html#l00681">internal_ao2_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;{</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;   <span class="keywordtype">int</span> ret = -1;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="preprocessor">#if defined (__linux) &amp;&amp; defined(SYS_gettid)</span></div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;   ret = syscall(SYS_gettid); <span class="comment">/* available since Linux 1.4.11 */</span></div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;<span class="preprocessor">#elif defined(__sun)</span></div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   ret = pthread_self();</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;<span class="preprocessor">#elif defined(__APPLE__)</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;   ret = mach_thread_self();</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;   mach_port_deallocate(mach_task_self(), ret);</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;<span class="preprocessor">#elif defined(__FreeBSD__) &amp;&amp; defined(HAVE_SYS_THR_H)</span></div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;   <span class="keywordtype">long</span> lwpid;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;   thr_self(&amp;lwpid); <span class="comment">/* available since sys/thr.h creation 2003 */</span></div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   ret = lwpid;</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a3b5457e5f5679935093d94b0f788769e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3b5457e5f5679935093d94b0f788769e">&#9670;&nbsp;</a></span>ast_get_time_t()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_get_time_t </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">time_t&#160;</td>
          <td class="paramname"><em>_default</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>consumed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get values from config variables. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02198">2198</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31631">build_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l01170">cache_lookup_internal()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02955">dundi_show_cache()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l03050">dundi_show_hints()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l02786">handle_saydatetime()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02138">load_password()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l08638">play_message_datetime()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02228">process_clearcache()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04359">realtime_peer()</a>, and <a class="el" href="../../da/df8/app__sayunixtime_8c_source.html#l00118">sayunixtime_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;{</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <span class="keywordtype">long</span> t;</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;   <span class="keywordtype">int</span> scanned;</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;   <span class="keywordflow">if</span> (dst == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;   *dst = _default;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(src))</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;   <span class="comment">/* only integer at the moment, but one day we could accept more formats */</span></div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   <span class="keywordflow">if</span> (sscanf(src, <span class="stringliteral">&quot;%30ld%n&quot;</span>, &amp;t, &amp;scanned) == 1) {</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;      *dst = t;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      <span class="keywordflow">if</span> (consumed)</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;         *consumed = scanned;</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a70853b91fea6436a8234ee488d4bae54"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70853b91fea6436a8234ee488d4bae54">&#9670;&nbsp;</a></span>ast_get_timeval()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_get_timeval </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>_default</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>consumed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>get values from config variables. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02171">2171</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01362">acf_strftime()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00482">expiration_str2struct()</a>, <a class="el" href="../../d8/dca/res__pjsip__pubsub_8c_source.html#l04738">persistence_expires_str2struct()</a>, and <a class="el" href="../../db/d43/bucket_8c_source.html#l00940">timeval_str2struct()</a>.</p>
<div class="fragment"><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;{</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;   <span class="keywordtype">long</span> <span class="keywordtype">double</span> dtv = 0.0;</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;   <span class="keywordtype">int</span> scanned;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;   <span class="keywordflow">if</span> (dst == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;   *dst = _default;</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(src))</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   <span class="comment">/* only integer at the moment, but one day we could accept more formats */</span></div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;   <span class="keywordflow">if</span> (sscanf(src, <span class="stringliteral">&quot;%30Lf%n&quot;</span>, &amp;dtv, &amp;scanned) &gt; 0) {</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;      dst-&gt;tv_sec = dtv;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      dst-&gt;tv_usec = (dtv - dst-&gt;tv_sec) * 1000000.0;</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;      <span class="keywordflow">if</span> (consumed)</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;         *consumed = scanned;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad3b63ee1041593219ef0765b28d70442"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad3b63ee1041593219ef0765b28d70442">&#9670;&nbsp;</a></span>ast_gethostbyname()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct hostent* ast_gethostbyname </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>host</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/d2b/structast__hostent.html">ast_hostent</a> *&#160;</td>
          <td class="paramname"><em>hp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Re-entrant (thread safe) version of gethostbyname that replaces the standard gethostbyname (which is not thread safe) </p>
<p>Thread-safe gethostbyname function to use in Asterisk. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00197">197</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00210">ast_hostent::buf</a>, <a class="el" href="../../d0/d8a/muted_8c_source.html#l00077">host</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00209">ast_hostent::hp</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03657">ast_parse_arg()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l08443">config_load()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l07770">config_parse_variables()</a>, <a class="el" href="../../d5/dd6/app__festival_8c_source.html#l00279">festival_exec()</a>, <a class="el" href="../../d8/d4f/provision_8c_source.html#l00282">iax_template_parse()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01970">process_sdp()</a>, and <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>.</p>
<div class="fragment"><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="preprocessor">#ifndef HAVE_GETHOSTBYNAME_R_5</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="keywordtype">int</span> herrno;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;   <span class="keywordtype">int</span> dots = 0;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *s;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;   <span class="keyword">struct </span>hostent *<a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;   <span class="comment">/* Although it is perfectly legitimate to lookup a pure integer, for</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">      the sake of the sanity of people who like to name their peers as</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">      integers, we break with tradition and refuse to look up a</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">      pure integer */</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;   s = <a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;   <span class="keywordflow">while</span> (s &amp;&amp; *s) {</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;.&#39;</span>)</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;         dots++;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!isdigit(*s))</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      s++;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   }</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;   <span class="keywordflow">if</span> (!s || !*s) {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      <span class="comment">/* Forge a reply for IP&#39;s to avoid octal IP&#39;s being interpreted as octal */</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      <span class="keywordflow">if</span> (dots != 3)</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      memset(hp, 0, <span class="keyword">sizeof</span>(<span class="keyword">struct</span> <a class="code" href="../../db/d2b/structast__hostent.html">ast_hostent</a>));</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;      hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>.h_addrtype = AF_INET;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;      hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>.h_addr_list = (<span class="keywordtype">void</span> *) hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a>;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;      hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>.h_addr = hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a> + <span class="keyword">sizeof</span>(<span class="keywordtype">void</span> *);</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;      <span class="comment">/* For AF_INET, this will always be 4 */</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>.h_length = 4;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <span class="keywordflow">if</span> (inet_pton(AF_INET, <a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>, hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>.h_addr) &gt; 0)</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;         <span class="keywordflow">return</span> &amp;hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   }</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="preprocessor">#ifdef HAVE_GETHOSTBYNAME_R_5</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   result = gethostbyname_r(<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>, &amp;hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>, hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a>, <span class="keyword">sizeof</span>(hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a>), &amp;herrno);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;   <span class="keywordflow">if</span> (!result || !hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>.h_addr_list || !hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>.h_addr_list[0])</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   res = gethostbyname_r(<a class="code" href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a>, &amp;hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>, hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a>, <span class="keyword">sizeof</span>(hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#ac75fce8692fd1d41a8985f6aacc4a175">buf</a>), &amp;result, &amp;herrno);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   <span class="keywordflow">if</span> (res || !result || !hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>.h_addr_list || !hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>.h_addr_list[0])</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keywordflow">return</span> &amp;hp-&gt;<a class="code" href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">hp</a>;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="muted_8c_html_a41c3a180b50c6b2ddcc1b6843a48f205"><div class="ttname"><a href="../../d0/d8a/muted_8c.html#a41c3a180b50c6b2ddcc1b6843a48f205">host</a></div><div class="ttdeci">static char host[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00077">muted.c:77</a></div></div>
<div class="ttc" id="structast__hostent_html"><div class="ttname"><a href="../../db/d2b/structast__hostent.html">ast_hostent</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00208">utils.h:208</a></div></div>
<div class="ttc" id="structast__hostent_html_ac75fce8692fd1d41a8985f6aacc4a175"><div class="ttname"><a href="../../db/d2b/structast__hostent.html#ac75fce8692fd1d41a8985f6aacc4a175">ast_hostent::buf</a></div><div class="ttdeci">char buf[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00210">utils.h:210</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structast__hostent_html_aeb5e492fbe7eecc5c41d020517da4228"><div class="ttname"><a href="../../db/d2b/structast__hostent.html#aeb5e492fbe7eecc5c41d020517da4228">ast_hostent::hp</a></div><div class="ttdeci">struct hostent hp</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00209">utils.h:209</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5a735cb59e8a8ddd78078d396db7e106"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a735cb59e8a8ddd78078d396db7e106">&#9670;&nbsp;</a></span>ast_inet_ntoa()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* ast_inet_ntoa </td>
          <td>(</td>
          <td class="paramtype">struct in_addr&#160;</td>
          <td class="paramname"><em>ia</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ast_inet_ntoa: Recursive thread safe replacement of inet_ntoa </p>
<p>thread-safe replacement for <a class="el" href="../../d9/d94/network_8h.html#aeaaa5e8fec9d5425e74dd3724e1d41ee">inet_ntoa()</a>. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">782</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00083">inet_ntoa_buf</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04192">_skinny_show_device()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04088">_skinny_show_devices()</a>, <a class="el" href="../../db/dd3/res__stun__monitor_8c_source.html#l00377">_stun_show_status()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02201">add_sdp()</a>, <a class="el" href="../../d9/d54/dns_8c_source.html#l00583">ast_dns_get_nameservers()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l03657">ast_parse_arg()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l08443">config_load()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l01046">create_client()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02768">find_command()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01777">find_subchannel_and_lock()</a>, <a class="el" href="../../d9/de9/res__phoneprov_8c_source.html#l01191">get_defaults()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l01002">get_to_address()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l03355">handle_error()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01018">handle_mgcp_show_endpoints()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l06865">handle_open_receive_channel_ack_message()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03402">handle_request()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l04611">handle_skinny_show_settings()</a>, <a class="el" href="../../d8/d4f/provision_8c_source.html#l00425">iax_server()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l03669">mgcpsock_read()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l04633">parsing()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l04469">process_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l01970">process_sdp()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04683">reload_config()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00547">resend_response()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03522">rtp_add_candidates_to_ice()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>, <a class="el" href="../../d9/db8/acl_8c_source.html#l00059">score_address()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l00903">send_raw_client()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00743">send_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l00558">send_response()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02710">send_start_rtp()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09409">send_trunk()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l04109">show_main_page()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l07520">skinny_session()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l07466">skinny_session_cleanup()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l03641">skinny_set_rtp_peer()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02847">start_rtp()</a>, <a class="el" href="../../db/dd3/res__stun__monitor_8c_source.html#l00085">stun_monitor_request()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l03228">transmit_serverres()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l03035">transmit_startmediatransmission()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l06117">unistim_show_devices()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l06035">unistim_show_info()</a>, and <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l05089">unistimsock_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;{</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keywordflow">if</span> (!(buf = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#ac465762c00b512ce7c2af42eb20cf7f8">inet_ntoa_buf</a>, INET_ADDRSTRLEN)))</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <span class="keywordflow">return</span> inet_ntop(AF_INET, &amp;ia, buf, INET_ADDRSTRLEN);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="main_2utils_8c_html_ac465762c00b512ce7c2af42eb20cf7f8"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ac465762c00b512ce7c2af42eb20cf7f8">inet_ntoa_buf</a></div><div class="ttdeci">static struct ast_threadstorage inet_ntoa_buf</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00083">main/utils.c:83</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="afb2b3d060d0cd9d92c91800c9d582ac9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb2b3d060d0cd9d92c91800c9d582ac9">&#9670;&nbsp;</a></span>ast_join_delim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_join_delim </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *const&#160;</td>
          <td class="paramname"><em>w</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>delim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02130">2130</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00317">ast_sip_auths_to_str()</a>.</p>
<div class="fragment"><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;{</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;   <span class="keywordtype">int</span> x, ofs = 0;</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *src;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <span class="comment">/* Join words into a string */</span></div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;   <span class="keywordflow">if</span> (!s)</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   <span class="keywordflow">for</span> (x = 0; ofs &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> &amp;&amp; x &lt; size &amp;&amp; w[x] ; x++) {</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      <span class="keywordflow">if</span> (x &gt; 0)</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;         s[ofs++] = delim;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      <span class="keywordflow">for</span> (src = w[x]; *src &amp;&amp; ofs &lt; <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>; src++)</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;         s[ofs++] = *src;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;   }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;   <span class="keywordflow">if</span> (ofs == <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;      ofs--;</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;   s[ofs] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;}</div><div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab2a6974e1f96eb9f9a6f6dcb9875c3e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2a6974e1f96eb9f9a6f6dcb9875c3e0">&#9670;&nbsp;</a></span>ast_log_show_lock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_log_show_lock </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>this_lock_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>log info for the current lock with <a class="el" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log()</a>. </p>
<p>This function can help you find highly temporal locks; locks that happen for a short time, but at unexpected times, usually at times that create a deadlock, Why is this thing locked right then? Who is locking it? Who am I fighting with for this lock?</p>
<p>To answer such questions, just call this routine before you would normally try to aquire a lock. It doesn't do anything if the lock is not acquired. If the lock is taken, it will publish a line or two to the console via <a class="el" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log()</a>.</p>
<p>Sometimes, the lock message is pretty uninformative. For instance, you might find that the lock is being aquired deep within the <a class="el" href="../../d3/dfb/structastobj2.html">astobj2</a> code; this tells you little about higher level routines that call the <a class="el" href="../../d3/dfb/structastobj2.html">astobj2</a> routines. But, using gdb, you can set a break at the ast_log below, and for that breakpoint, you can set the commands: where cont which will give a stack trace and continue. &ndash; that aught to do the job! </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01231">1231</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01174">append_lock_information()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00853">lock_infos_lock</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00263">LOG_NOTICE</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00136">ast_mutex_info::mutex</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, and <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>.</p>
<div class="fragment"><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;{</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;   <span class="keywordflow">if</span> (!(str = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(4096))) {</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>,<span class="stringliteral">&quot;Could not create str\n&quot;</span>);</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a>.<a class="code" href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../d1/d14/structlock__infos.html">lock_infos</a>, lock_info, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      <span class="keywordtype">int</span> i;</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">for</span> (i = 0; str &amp;&amp; i &lt; lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a>; i++) {</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;         <span class="comment">/* ONLY show info about this particular lock, if</span></div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">            it&#39;s acquired... */</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;         <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a> == this_lock_addr) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;            <a class="code" href="../../de/d1f/main_2utils_8c.html#acd9e4b05a5bb427d74a3c5ef4737a1da">append_lock_information</a>(&amp;str, lock_info, i);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(str));</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;         }</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      }</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;   }</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a>.<a class="code" href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>);</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str);</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;}</div><div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="main_2utils_8c_html_acd9e4b05a5bb427d74a3c5ef4737a1da"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#acd9e4b05a5bb427d74a3c5ef4737a1da">append_lock_information</a></div><div class="ttdeci">static void append_lock_information(struct ast_str **str, struct thr_lock_info *lock_info, int i)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01174">main/utils.c:1174</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a1196be5ab4cded8d600e0668cc67a3ef"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a></div><div class="ttdeci">static ast_mutex_t lock_infos_lock</div><div class="ttdoc">Locked when accessing the lock_infos list. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00853">main/utils.c:853</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structlock__infos_html"><div class="ttname"><a href="../../d1/d14/structlock__infos.html">lock_infos</a></div><div class="ttdoc">A list of each thread&amp;#39;s lock info. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00857">main/utils.c:857</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="structast__mutex__info_html_a4acff8232e4aec9cd5c6dc200ac55ef3"><div class="ttname"><a href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">ast_mutex_info::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00136">lock.h:136</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3970ea8e4a2aabd268c24203e5c40dc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3970ea8e4a2aabd268c24203e5c40dc2">&#9670;&nbsp;</a></span>ast_mark_lock_acquired()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_mark_lock_acquired </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>lock_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark the last lock as acquired. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00962">962</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00831">thr_lock_info::pending</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">thread_lock_info</a>.</p>
<div class="fragment"><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;{</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;   <span class="keywordflow">if</span> (!(lock_info = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a>, <span class="keyword">sizeof</span>(*lock_info))))</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;   <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a> == <a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1].<a class="code" href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">pending</a> = 0;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;   }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="structthr__lock__info_html_a79ec26d453dcd29aec17f5536233e849"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">thr_lock_info::pending</a></div><div class="ttdeci">int pending</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00831">main/utils.c:831</a></div></div>
<div class="ttc" id="main_2utils_8c_html_ae1445fe6bc0aafd9832b2d53377c952a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a></div><div class="ttdeci">static struct ast_threadstorage thread_lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00902">main/utils.c:902</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0ed1f5e44323dd2f45fd091e4480550a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ed1f5e44323dd2f45fd091e4480550a">&#9670;&nbsp;</a></span>ast_mark_lock_failed()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_mark_lock_failed </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>lock_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mark the last lock as failed (trylock) </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00978">978</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00831">thr_lock_info::pending</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">thread_lock_info</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00827">thr_lock_info::times_locked</a>.</p>
<div class="fragment"><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;{</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <span class="keywordflow">if</span> (!(lock_info = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a>, <span class="keyword">sizeof</span>(*lock_info))))</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;   <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a> == <a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>) {</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1].<a class="code" href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">pending</a> = -1;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1].<a class="code" href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">times_locked</a>--;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   }</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="structthr__lock__info_html_a79ec26d453dcd29aec17f5536233e849"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">thr_lock_info::pending</a></div><div class="ttdeci">int pending</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00831">main/utils.c:831</a></div></div>
<div class="ttc" id="main_2utils_8c_html_ae1445fe6bc0aafd9832b2d53377c952a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a></div><div class="ttdeci">static struct ast_threadstorage thread_lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00902">main/utils.c:902</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a8ea6686e13727e7f2f56c317e9200402"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">thr_lock_info::times_locked</a></div><div class="ttdeci">int times_locked</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00827">main/utils.c:827</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aee8200caadc6a4b5afe01ea37fd26cb3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee8200caadc6a4b5afe01ea37fd26cb3">&#9670;&nbsp;</a></span>ast_md5_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_md5_hash </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Produce 32 char MD5 hash of value. </p>
<p>Produces MD5 hash based on input string. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00248">248</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6c/md5_8c_source.html#l00120">MD5Final()</a>, <a class="el" href="../../d7/d6c/md5_8c_source.html#l00057">MD5Init()</a>, and <a class="el" href="../../d7/d6c/md5_8c_source.html#l00072">MD5Update()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00355">ast_sip_location_create_contact()</a>, <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00177">AST_TEST_DEFINE()</a>, <a class="el" href="../../d6/d0f/app__authenticate_8c_source.html#l00116">auth_exec()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../dd/db2/res__pjsip__authenticator__digest_8c_source.html#l00206">build_nonce()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23139">build_reply_digest()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17341">check_auth()</a>, <a class="el" href="../../de/d91/func__md5_8c_source.html#l00052">md5()</a>, and <a class="el" href="../../d0/dad/location_8c_source.html#l00589">permanent_uri_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;{</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d32/structMD5Context.html">MD5Context</a> <a class="code" href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a>;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> digest[16];</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keywordtype">char</span> *ptr;</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;   <a class="code" href="../../da/db0/md5_8h.html#a6bdca55813077d1c652a1f63608dac30">MD5Init</a>(&amp;<a class="code" href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a>);</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   <a class="code" href="../../da/db0/md5_8h.html#a2a146d25ee54b589dd79d776522ef742">MD5Update</a>(&amp;<a class="code" href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a>, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a5a634cf4429798b1c921a81de8250051">input</a>, strlen(input));</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <a class="code" href="../../da/db0/md5_8h.html#a7132b90c03637ae151c1a8befd7989f2">MD5Final</a>(digest, &amp;<a class="code" href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a>);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   ptr = output;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 16; x++)</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      ptr += sprintf(ptr, <span class="stringliteral">&quot;%02hhx&quot;</span>, digest[x]);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;}</div><div class="ttc" id="md5_8h_html_a7132b90c03637ae151c1a8befd7989f2"><div class="ttname"><a href="../../da/db0/md5_8h.html#a7132b90c03637ae151c1a8befd7989f2">MD5Final</a></div><div class="ttdeci">void MD5Final(unsigned char digest[16], struct MD5Context *context)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6c/md5_8c_source.html#l00120">md5.c:120</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a5a634cf4429798b1c921a81de8250051"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a5a634cf4429798b1c921a81de8250051">input</a></div><div class="ttdeci">static int input(yyscan_t yyscanner)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l01584">ast_expr2f.c:1584</a></div></div>
<div class="ttc" id="md5_8h_html_a6bdca55813077d1c652a1f63608dac30"><div class="ttname"><a href="../../da/db0/md5_8h.html#a6bdca55813077d1c652a1f63608dac30">MD5Init</a></div><div class="ttdeci">void MD5Init(struct MD5Context *context)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6c/md5_8c_source.html#l00057">md5.c:57</a></div></div>
<div class="ttc" id="md5_8h_html_a2a146d25ee54b589dd79d776522ef742"><div class="ttname"><a href="../../da/db0/md5_8h.html#a2a146d25ee54b589dd79d776522ef742">MD5Update</a></div><div class="ttdeci">void MD5Update(struct MD5Context *context, unsigned char const *buf, unsigned len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6c/md5_8c_source.html#l00072">md5.c:72</a></div></div>
<div class="ttc" id="func__md5_8c_html_a058fc1589da2b9b0d8e404ba0482c3af"><div class="ttname"><a href="../../de/d91/func__md5_8c.html#a058fc1589da2b9b0d8e404ba0482c3af">md5</a></div><div class="ttdeci">static int md5(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d91/func__md5_8c_source.html#l00052">func_md5.c:52</a></div></div>
<div class="ttc" id="structMD5Context_html"><div class="ttname"><a href="../../d1/d32/structMD5Context.html">MD5Context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/db0/md5_8h_source.html#l00026">md5.h:26</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7c38859ed90e96df2b0a0fdf843769d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c38859ed90e96df2b0a0fdf843769d0">&#9670;&nbsp;</a></span>ast_mkdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_mkdir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursively create directory path. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The directory path to create </td></tr>
    <tr><td class="paramname">mode</td><td>The permissions with which to try to create the directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success or an error code otherwise</dd></dl>
<p>Creates a directory path, creating parent directories as needed. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02231">2231</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/d22/logger_8c_source.html#l01259">ast_logger_rotate_channel()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00590">ast_monitor_change_fname()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00305">ast_monitor_start()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02399">conf_rec_name()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l03177">conf_run()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00187">create_destination_directory()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01557">create_dirpath()</a>, <a class="el" href="../../d6/d4c/curl_8c_source.html#l00164">create_temp_file()</a>, <a class="el" href="../../dd/d32/app__dictate_8c_source.html#l00087">dictate_exec()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05662">filename_parse()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l01870">init_logger()</a>, <a class="el" href="../../d9/dd4/pbx__spool_8c_source.html#l00946">load_module()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l01141">reload_logger()</a>, <a class="el" href="../../d9/dd4/pbx__spool_8c_source.html#l00363">remove_from_queue()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02075">setup_privacy_args()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l01442">sms_nextoutgoing()</a>, <a class="el" href="../../d7/d81/app__sms_8c_source.html#l00998">sms_writefile()</a>, <a class="el" href="../../d2/da2/test__voicemail__api_8c_source.html#l00419">test_vm_api_create_voicemail_folder()</a>, <a class="el" href="../../de/dfb/app__test_8c_source.html#l00154">testclient_exec()</a>, <a class="el" href="../../de/dfb/app__test_8c_source.html#l00329">testserver_exec()</a>, and <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l02281">write_history()</a>.</p>
<div class="fragment"><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;{</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;   <span class="keywordtype">char</span> *ptr;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(path), count = 0, x, piececount = 0;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(path);</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;   <span class="keywordtype">char</span> **pieces;</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;   <span class="keywordtype">char</span> *fullpath = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(len + 1);</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   <span class="keywordflow">for</span> (ptr = tmp; *ptr; ptr++) {</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;/&#39;</span>)</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;         count++;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;   }</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;   <span class="comment">/* Count the components to the directory path */</span></div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;   pieces = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(count * <span class="keyword">sizeof</span>(*pieces));</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;   <span class="keywordflow">for</span> (ptr = tmp; *ptr; ptr++) {</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;      <span class="keywordflow">if</span> (*ptr == <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;         *ptr = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;         pieces[piececount++] = ptr + 1;</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;      }</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;   }</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   *fullpath = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; piececount; x++) {</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <span class="comment">/* This looks funky, but the buffer is always ideally-sized, so it&#39;s fine. */</span></div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;      strcat(fullpath, <span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;      strcat(fullpath, pieces[x]);</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      res = mkdir(fullpath, mode);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;      <span class="keywordflow">if</span> (res &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EEXIST)</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;}</div><div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a624b98abd96c41fb9ce72c005217128b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a624b98abd96c41fb9ce72c005217128b">&#9670;&nbsp;</a></span>ast_parse_digest()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_parse_digest </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../da/db3/structast__http__digest.html">ast_http_digest</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>request</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>pedantic</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Parse digest authorization header. </p>
<dl class="section return"><dt>Returns</dt><dd>Returns -1 if we have no auth or something wrong with digest. </dd></dl>
<dl class="section note"><dt>Note</dt><dd>This function may be used for Digest request and responce header. request arg is set to nonzero, if we parse Digest Request. pedantic arg can be set to nonzero if we need to do addition Digest check. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02390">2390</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00157">ast_skip_blanks()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00620">ast_str_create</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00470">ast_string_field_ptr_set</a>, <a class="el" href="../../d1/d0f/stringfields_8h_source.html#l00514">ast_string_field_set</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01735">ast_unescape_c()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00672">ast_http_digest::cnonce</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00672">ast_http_digest::domain</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00672">ast_http_digest::nc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00672">ast_http_digest::nonce</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00672">ast_http_digest::opaque</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00673">ast_http_digest::qop</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00672">ast_http_digest::realm</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00672">ast_http_digest::response</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00672">ast_http_digest::uri</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00672">ast_http_digest::username</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;                                                                                               {</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a> = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(16);</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   <span class="comment">/* table of recognised keywords, and places where they should be copied */</span></div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct </span>x {</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *key;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      <span class="keyword">const</span> <a class="code" href="../../d1/d0f/stringfields_8h.html#abb39dc592226a570e6a73f1b9b09b021">ast_string_field</a> *field;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;   } *i, <a class="code" href="../../d2/df1/structkeys.html">keys</a>[] = {</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;      { <span class="stringliteral">&quot;username=&quot;</span>, &amp;d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a5804ef809b93820d3437a86e08126bd8">username</a> },</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;      { <span class="stringliteral">&quot;realm=&quot;</span>, &amp;d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a71767d73977f42a36bcb04fb76f7a286">realm</a> },</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      { <span class="stringliteral">&quot;nonce=&quot;</span>, &amp;d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a56213b5a6f60531d0721956bd74a7832">nonce</a> },</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;      { <span class="stringliteral">&quot;uri=&quot;</span>, &amp;d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a19ac71226fac09e87afe31acb4c99214">uri</a> },</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;      { <span class="stringliteral">&quot;domain=&quot;</span>, &amp;d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a3ec6db86c2d43dc986af427cdeb7bf0e">domain</a> },</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;      { <span class="stringliteral">&quot;response=&quot;</span>, &amp;d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a12166a4bf31948289c00d571af88ed90">response</a> },</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;      { <span class="stringliteral">&quot;cnonce=&quot;</span>, &amp;d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a47e10f754dbee638f7684eab40c9e34c">cnonce</a> },</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;      { <span class="stringliteral">&quot;opaque=&quot;</span>, &amp;d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a40ffdf896466f95c4bb3815edab790ef">opaque</a> },</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;      <span class="comment">/* Special cases that cannot be directly copied */</span></div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      { <span class="stringliteral">&quot;algorithm=&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;      { <span class="stringliteral">&quot;qop=&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;      { <span class="stringliteral">&quot;nc=&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> },</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0 },</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;   };</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(digest) || !d || !str) {</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str);</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;   }</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;str, 0, <span class="stringliteral">&quot;%s&quot;</span>, digest);</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;   c = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(str));</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;   <span class="keywordflow">if</span> (strncasecmp(c, <span class="stringliteral">&quot;Digest &quot;</span>, strlen(<span class="stringliteral">&quot;Digest &quot;</span>))) {</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Missing Digest.\n&quot;</span>);</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str);</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   }</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   c += strlen(<span class="stringliteral">&quot;Digest &quot;</span>);</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   <span class="comment">/* lookup for keys/value pair */</span></div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;   <span class="keywordflow">while</span> (c &amp;&amp; *c &amp;&amp; *(c = <a class="code" href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a>(c))) {</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <span class="comment">/* find key */</span></div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      <span class="keywordflow">for</span> (i = keys; i-&gt;key != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; i++) {</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;         <span class="keywordtype">char</span> *src, *separator;</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;         <span class="keywordtype">int</span> unescape = 0;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;         <span class="keywordflow">if</span> (strncasecmp(c, i-&gt;key, strlen(i-&gt;key)) != 0) {</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;         }</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;         <span class="comment">/* Found. Skip keyword, take text in quotes or up to the separator. */</span></div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;         c += strlen(i-&gt;key);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;         <span class="keywordflow">if</span> (*c == <span class="charliteral">&#39;&quot;&#39;</span>) {</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;            src = ++<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;            separator = <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;            unescape = 1;</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;            src = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;            separator = <span class="stringliteral">&quot;,&quot;</span>;</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;         }</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;         <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;c, separator); <span class="comment">/* clear separator and move ptr */</span></div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;         <span class="keywordflow">if</span> (unescape) {</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;            <a class="code" href="../../de/d1f/main_2utils_8c.html#a3115ebeab1be5667662faf6d6a54894f">ast_unescape_c</a>(src);</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;         }</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;         <span class="keywordflow">if</span> (i-&gt;field) {</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;            <a class="code" href="../../d1/d0f/stringfields_8h.html#ad5919d2452007db4100fda0d0b656ffa">ast_string_field_ptr_set</a>(d, i-&gt;field, src);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;            <span class="comment">/* Special cases that require additional procesing */</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(i-&gt;key, <span class="stringliteral">&quot;algorithm=&quot;</span>)) {</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;               <span class="keywordflow">if</span> (strcasecmp(src, <span class="stringliteral">&quot;MD5&quot;</span>)) {</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Digest algorithm: \&quot;%s\&quot; not supported.\n&quot;</span>, src);</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str);</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;                  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;               }</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(i-&gt;key, <span class="stringliteral">&quot;qop=&quot;</span>) &amp;&amp; !strcasecmp(src, <span class="stringliteral">&quot;auth&quot;</span>)) {</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;               d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#af88f810d87ba0804816dea48a1fa23af">qop</a> = 1;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(i-&gt;key, <span class="stringliteral">&quot;nc=&quot;</span>)) {</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;               <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> u;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;               <span class="keywordflow">if</span> (sscanf(src, <span class="stringliteral">&quot;%30lx&quot;</span>, &amp;u) != 1) {</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Incorrect Digest nc value: \&quot;%s\&quot;.\n&quot;</span>, src);</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str);</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;                  <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;               }</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;               <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(d, nc, src);</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;            }</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;         }</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;      }</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;      <span class="keywordflow">if</span> (i-&gt;key == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) { <span class="comment">/* not found, try &#39;,&#39; */</span></div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;         <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;c, <span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;   }</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;   <span class="comment">/* Digest checkout */</span></div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a71767d73977f42a36bcb04fb76f7a286">realm</a>) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a56213b5a6f60531d0721956bd74a7832">nonce</a>)) {</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;      <span class="comment">/* &quot;realm&quot; and &quot;nonce&quot; MUST be always exist */</span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   }</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>) {</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;      <span class="comment">/* Additional check for Digest response */</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a5804ef809b93820d3437a86e08126bd8">username</a>) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a19ac71226fac09e87afe31acb4c99214">uri</a>) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a12166a4bf31948289c00d571af88ed90">response</a>)) {</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;      }</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      <span class="keywordflow">if</span> (pedantic &amp;&amp; d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#af88f810d87ba0804816dea48a1fa23af">qop</a> &amp;&amp; (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#a47e10f754dbee638f7684eab40c9e34c">cnonce</a>) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(d-&gt;<a class="code" href="../../da/db3/structast__http__digest.html#afeb5a09193787cf522efc8c90c5485f6">nc</a>))) {</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;      }</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;   }</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;}</div><div class="ttc" id="structast__http__digest_html_a47e10f754dbee638f7684eab40c9e34c"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#a47e10f754dbee638f7684eab40c9e34c">ast_http_digest::cnonce</a></div><div class="ttdeci">const ast_string_field cnonce</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00672">utils.h:672</a></div></div>
<div class="ttc" id="stringfields_8h_html_ad5919d2452007db4100fda0d0b656ffa"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#ad5919d2452007db4100fda0d0b656ffa">ast_string_field_ptr_set</a></div><div class="ttdeci">#define ast_string_field_ptr_set(x, ptr, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00470">stringfields.h:470</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="structast__http__digest_html_a40ffdf896466f95c4bb3815edab790ef"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#a40ffdf896466f95c4bb3815edab790ef">ast_http_digest::opaque</a></div><div class="ttdeci">const ast_string_field opaque</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00672">utils.h:672</a></div></div>
<div class="ttc" id="structast__http__digest_html_a3ec6db86c2d43dc986af427cdeb7bf0e"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#a3ec6db86c2d43dc986af427cdeb7bf0e">ast_http_digest::domain</a></div><div class="ttdeci">const ast_string_field domain</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00672">utils.h:672</a></div></div>
<div class="ttc" id="stringfields_8h_html_abb39dc592226a570e6a73f1b9b09b021"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abb39dc592226a570e6a73f1b9b09b021">ast_string_field</a></div><div class="ttdeci">const char * ast_string_field</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00190">stringfields.h:190</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="structast__http__digest_html_a5804ef809b93820d3437a86e08126bd8"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#a5804ef809b93820d3437a86e08126bd8">ast_http_digest::username</a></div><div class="ttdeci">const ast_string_field username</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00672">utils.h:672</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__http__digest_html_a19ac71226fac09e87afe31acb4c99214"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#a19ac71226fac09e87afe31acb4c99214">ast_http_digest::uri</a></div><div class="ttdeci">const ast_string_field uri</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00672">utils.h:672</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__http__digest_html_a12166a4bf31948289c00d571af88ed90"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#a12166a4bf31948289c00d571af88ed90">ast_http_digest::response</a></div><div class="ttdeci">const ast_string_field response</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00672">utils.h:672</a></div></div>
<div class="ttc" id="structast__http__digest_html_af88f810d87ba0804816dea48a1fa23af"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#af88f810d87ba0804816dea48a1fa23af">ast_http_digest::qop</a></div><div class="ttdeci">int qop</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00673">utils.h:673</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="strings_8h_html_af5693da955fa3bc73bc49c47b601fc7a"><div class="ttname"><a href="../../d6/d90/strings_8h.html#af5693da955fa3bc73bc49c47b601fc7a">ast_skip_blanks</a></div><div class="ttdeci">char * ast_skip_blanks(const char *str)</div><div class="ttdoc">Gets a pointer to the first non-whitespace character in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00157">strings.h:157</a></div></div>
<div class="ttc" id="structast__http__digest_html_afeb5a09193787cf522efc8c90c5485f6"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#afeb5a09193787cf522efc8c90c5485f6">ast_http_digest::nc</a></div><div class="ttdeci">const ast_string_field nc</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00672">utils.h:672</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a3115ebeab1be5667662faf6d6a54894f"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a3115ebeab1be5667662faf6d6a54894f">ast_unescape_c</a></div><div class="ttdeci">char * ast_unescape_c(char *src)</div><div class="ttdoc">Convert some C escape sequences. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01735">main/utils.c:1735</a></div></div>
<div class="ttc" id="structast__http__digest_html_a71767d73977f42a36bcb04fb76f7a286"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#a71767d73977f42a36bcb04fb76f7a286">ast_http_digest::realm</a></div><div class="ttdeci">const ast_string_field realm</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00672">utils.h:672</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="structast__http__digest_html_a56213b5a6f60531d0721956bd74a7832"><div class="ttname"><a href="../../da/db3/structast__http__digest.html#a56213b5a6f60531d0721956bd74a7832">ast_http_digest::nonce</a></div><div class="ttdeci">const ast_string_field nonce</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00672">utils.h:672</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="structkeys_html"><div class="ttname"><a href="../../d2/df1/structkeys.html">keys</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d7/dbb/res__crypto_8c_source.html#l00094">res_crypto.c:94</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3543b8258edfa9140d45147013bc6919"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3543b8258edfa9140d45147013bc6919">&#9670;&nbsp;</a></span>ast_process_quotes_and_slashes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_process_quotes_and_slashes </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>find</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>replace_with</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Process a string to find and replace characters. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>The string to analyze </td></tr>
    <tr><td class="paramname">find</td><td>The character to find </td></tr>
    <tr><td class="paramname">replace_with</td><td>The character that will replace the one we are looking for </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02104">2104</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>
<div class="fragment"><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;{</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;   <span class="keywordtype">char</span> *dataPut = start;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   <span class="keywordtype">int</span> inEscape = 0;</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;   <span class="keywordtype">int</span> inQuotes = 0;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;   <span class="keywordflow">for</span> (; *start; start++) {</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;      <span class="keywordflow">if</span> (inEscape) {</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;         *dataPut++ = *start;       <span class="comment">/* Always goes verbatim */</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;         inEscape = 0;</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;         <span class="keywordflow">if</span> (*start == <span class="charliteral">&#39;\\&#39;</span>) {</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;            inEscape = 1;      <span class="comment">/* Do not copy \ into the data */</span></div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*start == <span class="charliteral">&#39;\&#39;&#39;</span>) {</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;            inQuotes = 1 - inQuotes;   <span class="comment">/* Do not copy &#39; into the data */</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;            <span class="comment">/* Replace , with |, unless in quotes */</span></div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;            *dataPut++ = inQuotes ? *start : ((*start == find) ? replace_with : *start);</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;         }</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      }</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   }</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;   <span class="keywordflow">if</span> (start != dataPut)</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;      *dataPut = 0;</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;   <span class="keywordflow">return</span> dataPut;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="af13d115905cb377f2e1b2e46fec92257"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af13d115905cb377f2e1b2e46fec92257">&#9670;&nbsp;</a></span>ast_pthread_create_detached_stack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_pthread_create_detached_stack </td>
          <td>(</td>
          <td class="paramtype">pthread_t *&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pthread_attr_t *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *(*)(void *)&#160;</td>
          <td class="paramname"><em>start_routine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>stacksize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>start_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01494">1494</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01446">ast_pthread_create_stack()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01382">thr_arg::start_routine</a>.</p>
<div class="fragment"><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;{</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> attr_destroy = 0;</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;   <span class="keywordflow">if</span> (!attr) {</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;      attr = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(<span class="keyword">sizeof</span>(*attr));</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      pthread_attr_init(attr);</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;      attr_destroy = 1;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;   }</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = pthread_attr_setdetachstate(attr, PTHREAD_CREATE_DETACHED)))</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;pthread_attr_setdetachstate: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;   res = <a class="code" href="../../de/d1f/main_2utils_8c.html#af740ee3fba7768010783e3faaf5aeb12">ast_pthread_create_stack</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>, attr, start_routine, data,</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                                  stacksize, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, caller, line, start_fn);</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;   <span class="keywordflow">if</span> (attr_destroy)</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;      pthread_attr_destroy(attr);</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;}</div><div class="ttc" id="app__meetme_8c_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01089">app_meetme.c:1089</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="main_2utils_8c_html_af740ee3fba7768010783e3faaf5aeb12"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#af740ee3fba7768010783e3faaf5aeb12">ast_pthread_create_stack</a></div><div class="ttdeci">int ast_pthread_create_stack(pthread_t *thread, pthread_attr_t *attr, void *(*start_routine)(void *), void *data, size_t stacksize, const char *file, const char *caller, int line, const char *start_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01446">main/utils.c:1446</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af740ee3fba7768010783e3faaf5aeb12"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af740ee3fba7768010783e3faaf5aeb12">&#9670;&nbsp;</a></span>ast_pthread_create_stack()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_pthread_create_stack </td>
          <td>(</td>
          <td class="paramtype">pthread_t *&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">pthread_attr_t *&#160;</td>
          <td class="paramname"><em>attr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *(*)(void *)&#160;</td>
          <td class="paramname"><em>start_routine</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>stacksize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>caller</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>start_fn</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01446">1446</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00290">ast_alloca</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00269">ast_asprintf</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00540">AST_STACKSIZE</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01383">thr_arg::data</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01394">dummy_start()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01384">thr_arg::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00640">pthread_create</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01382">thr_arg::start_routine</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01494">ast_pthread_create_detached_stack()</a>.</p>
<div class="fragment"><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;{</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d42/structthr__arg.html">thr_arg</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>;</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;   <span class="keywordflow">if</span> (!attr) {</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;      attr = <a class="code" href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a>(<span class="keyword">sizeof</span>(*attr));</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      pthread_attr_init(attr);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   }</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="preprocessor">#if defined(__linux__) || defined(__FreeBSD__)</span></div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;   <span class="comment">/* On Linux and FreeBSD , pthread_attr_init() defaults to PTHREAD_EXPLICIT_SCHED,</span></div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="comment">      which is kind of useless. Change this here to</span></div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;<span class="comment">      PTHREAD_INHERIT_SCHED; that way the -p option to set realtime</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;<span class="comment">      priority will propagate down to new threads by default.</span></div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;<span class="comment">      This does mean that callers cannot set a different priority using</span></div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;<span class="comment">      PTHREAD_EXPLICIT_SCHED in the attr argument; instead they must set</span></div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;<span class="comment">      the priority afterwards with pthread_setschedparam(). */</span></div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = pthread_attr_setinheritsched(attr, PTHREAD_INHERIT_SCHED)))</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;pthread_attr_setinheritsched: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;   <span class="keywordflow">if</span> (!stacksize)</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      stacksize = <a class="code" href="../../d5/d60/utils_8h.html#a47e9ccd65c7bb239af68c006ceae18b4">AST_STACKSIZE</a>;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;   <span class="keywordflow">if</span> ((<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = pthread_attr_setstacksize(attr, stacksize ? stacksize : <a class="code" href="../../d5/d60/utils_8h.html#a47e9ccd65c7bb239af68c006ceae18b4">AST_STACKSIZE</a>)))</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;pthread_attr_setstacksize: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   <span class="keywordflow">if</span> ((a = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(<span class="keyword">sizeof</span>(*a)))) {</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      a-&gt;<a class="code" href="../../dc/d42/structthr__arg.html#a65817fdcd8d96f6eaa79a89bfde6a456">start_routine</a> = <a class="code" href="../../dc/d42/structthr__arg.html#a65817fdcd8d96f6eaa79a89bfde6a456">start_routine</a>;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;      a-&gt;<a class="code" href="../../dc/d42/structthr__arg.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../dc/d42/structthr__arg.html#a735984d41155bc1032e09bece8f8d66d">data</a>;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      <a class="code" href="../../dc/d42/structthr__arg.html#a65817fdcd8d96f6eaa79a89bfde6a456">start_routine</a> = <a class="code" href="../../de/d1f/main_2utils_8c.html#a763d9f2734d56e19a6de3b461a396a1a">dummy_start</a>;</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a>(&amp;a-&gt;<a class="code" href="../../dc/d42/structthr__arg.html#a5ac083a645d964373f022d03df4849c8">name</a>, <span class="stringliteral">&quot;%-20s started at [%5d] %s %s()&quot;</span>,</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;              start_fn, line, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, caller) &lt; 0) {</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;         a-&gt;<a class="code" href="../../dc/d42/structthr__arg.html#a5ac083a645d964373f022d03df4849c8">name</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;      }</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      <a class="code" href="../../dc/d42/structthr__arg.html#a735984d41155bc1032e09bece8f8d66d">data</a> = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;   }</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* !LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dd/d42/lock_8h.html#a3c7d37cba2d420a45309a93b799d9db9">pthread_create</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>, attr, <a class="code" href="../../dc/d42/structthr__arg.html#a65817fdcd8d96f6eaa79a89bfde6a456">start_routine</a>, <a class="code" href="../../dc/d42/structthr__arg.html#a735984d41155bc1032e09bece8f8d66d">data</a>); <span class="comment">/* We&#39;re in ast_pthread_create, so it&#39;s okay */</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;}</div><div class="ttc" id="app__meetme_8c_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01089">app_meetme.c:1089</a></div></div>
<div class="ttc" id="utils_8h_html_a47e9ccd65c7bb239af68c006ceae18b4"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a47e9ccd65c7bb239af68c006ceae18b4">AST_STACKSIZE</a></div><div class="ttdeci">#define AST_STACKSIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00540">utils.h:540</a></div></div>
<div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structthr__arg_html"><div class="ttname"><a href="../../dc/d42/structthr__arg.html">thr_arg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01381">main/utils.c:1381</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ada667b6f84a08e6848cb37c5ffb94a5f"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ada667b6f84a08e6848cb37c5ffb94a5f">ast_asprintf</a></div><div class="ttdeci">#define ast_asprintf(ret, fmt,...)</div><div class="ttdoc">A wrapper for asprintf() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00269">astmm.h:269</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="astmm_8h_html_a249282ecc7ba5a1a49fa75e9a33d1717"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a249282ecc7ba5a1a49fa75e9a33d1717">ast_alloca</a></div><div class="ttdeci">#define ast_alloca(size)</div><div class="ttdoc">call __builtin_alloca to ensure we get gcc builtin semantics </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00290">astmm.h:290</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a763d9f2734d56e19a6de3b461a396a1a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a763d9f2734d56e19a6de3b461a396a1a">dummy_start</a></div><div class="ttdeci">static void * dummy_start(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01394">main/utils.c:1394</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="lock_8h_html_a3c7d37cba2d420a45309a93b799d9db9"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a3c7d37cba2d420a45309a93b799d9db9">pthread_create</a></div><div class="ttdeci">#define pthread_create</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00640">lock.h:640</a></div></div>
<div class="ttc" id="structthr__arg_html_a65817fdcd8d96f6eaa79a89bfde6a456"><div class="ttname"><a href="../../dc/d42/structthr__arg.html#a65817fdcd8d96f6eaa79a89bfde6a456">thr_arg::start_routine</a></div><div class="ttdeci">void *(* start_routine)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01382">main/utils.c:1382</a></div></div>
<div class="ttc" id="structthr__arg_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../dc/d42/structthr__arg.html#a735984d41155bc1032e09bece8f8d66d">thr_arg::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01383">main/utils.c:1383</a></div></div>
<div class="ttc" id="structthr__arg_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../dc/d42/structthr__arg.html#a5ac083a645d964373f022d03df4849c8">thr_arg::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01384">main/utils.c:1384</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7b4f10b070e95ba413e258a3e4b03c20"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b4f10b070e95ba413e258a3e4b03c20">&#9670;&nbsp;</a></span>ast_random()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long int ast_random </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">2064</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00187">ast_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00188">ast_mutex_unlock</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02061">randomlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08942">__sip_alloc()</a>, <a class="el" href="../../dd/d0d/func__rand_8c_source.html#l00057">acf_rand_exec()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04442">action_challenge()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l13542">add_sdp()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04021">agi_handle_command()</a>, <a class="el" href="../../d9/d1a/app__skel_8c_source.html#l00379">app_exec()</a>, <a class="el" href="../../d2/d48/strings_8c_source.html#l00227">ast_generate_random_string()</a>, <a class="el" href="../../d3/d83/main_2app_8c_source.html#l02263">ast_lock_path_lockfile()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00313">ast_moh_files_next()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l04360">ast_rtp_change_source()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03992">ast_rtp_new()</a>, <a class="el" href="../../d0/dd5/test__file_8c_source.html#l00136">AST_TEST_DEFINE()</a>, <a class="el" href="../../d2/dce/udptl_8c_source.html#l01028">ast_udptl_new_with_bindaddr()</a>, <a class="el" href="../../d6/d08/test__astobj2_8c_source.html#l00421">astobj2_test_1_helper()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l08119">auth_http_callback()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l08055">authenticate_request()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00533">build_iv()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08902">build_localtag_registry()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l17300">build_nonce()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l06355">build_rand_pad()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23139">build_reply_digest()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l05779">calc_metric()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l06206">calc_rxstamp()</a>, <a class="el" href="../../dc/d18/res__calendar__caldav_8c_source.html#l00175">caldav_write_event()</a>, <a class="el" href="../../d8/d1e/strcompat_8c_source.html#l00429">closefrom()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09099">create_channel_name()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l05081">create_local_sdp()</a>, <a class="el" href="../../db/d8e/dns__srv_8c_source.html#l00113">dns_srv_sort()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l07553">drop_packets_data_update()</a>, <a class="el" href="../../de/deb/res__pjproject_8c_source.html#l00530">fill_with_garbage()</a>, <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00109">generate_parked_user()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08797">generate_random_string()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l07907">generic_http_callback()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l00480">get_trans_id()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l02905">get_unused_callno()</a>, <a class="el" href="../../d7/df9/test__sched_8c_source.html#l00265">handle_cli_sched_bench()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l29065">handle_incoming()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l24006">handle_response_invite()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l05462">iax2_key_rotate()</a>, <a class="el" href="../../de/da4/chan__motif_8c_source.html#l00918">jingle_add_ice_udp_candidates_to_transport()</a>, <a class="el" href="../../de/da4/chan__motif_8c_source.html#l00701">jingle_alloc()</a>, <a class="el" href="../../de/da4/chan__motif_8c_source.html#l00768">jingle_new()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l14828">load_module()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l05085">make_email_file()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08908">make_our_tag()</a>, <a class="el" href="../../d3/d51/chan__mobile_8c_source.html#l00847">mbl_new()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l00500">moh_files_alloc()</a>, <a class="el" href="../../d4/d6e/res__rtp__multicast_8c_source.html#l00284">multicast_rtp_new()</a>, <a class="el" href="../../db/d9b/format__ogg__vorbis_8c_source.html#l00147">ogg_vorbis_rewrite()</a>, <a class="el" href="../../d6/d27/app__osplookup_8c_source.html#l01394">osp_create_uuid()</a>, <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>, <a class="el" href="../../d6/d76/srv_8c_source.html#l00150">process_weights()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16743">reg_source_db()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09180">registry_authrequest()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l12361">reqprep()</a>, <a class="el" href="../../d4/d92/res__pjsip__session_8c_source.html#l04269">reschedule_reinvite()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l03828">rtp_allocate_transport()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l04747">say_periodic_announcement()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l01234">sendmail()</a>, <a class="el" href="../../d9/d96/res__pjsip__outbound__registration_8c_source.html#l01708">sip_outbound_registration_perform()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l09773">socket_read()</a>, <a class="el" href="../../dc/d90/test__sorcery__memory__cache__thrash_8c_source.html#l00267">sorcery_memory_cache_thrash_retrieve()</a>, <a class="el" href="../../dc/d90/test__sorcery__memory__cache__thrash_8c_source.html#l00237">sorcery_memory_cache_thrash_update()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l02967">start_rtp()</a>, <a class="el" href="../../d1/dbd/stun_8c_source.html#l00261">stun_req_id()</a>, <a class="el" href="../../d6/d08/test__astobj2_8c_source.html#l00278">test_ao2_find_w_no_flags()</a>, <a class="el" href="../../d6/d08/test__astobj2_8c_source.html#l00356">test_ao2_find_w_OBJ_KEY()</a>, <a class="el" href="../../d6/d08/test__astobj2_8c_source.html#l00393">test_ao2_find_w_OBJ_PARTIAL_KEY()</a>, <a class="el" href="../../d6/d08/test__astobj2_8c_source.html#l00317">test_ao2_find_w_OBJ_POINTER()</a>, <a class="el" href="../../d0/dd5/test__file_8c_source.html#l00112">test_files_get_one()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14755">transmit_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l16106">transmit_register()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l12601">transmit_response_using_temp()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>, <a class="el" href="../../d8/db5/firmware_8c_source.html#l00060">try_firmware()</a>, <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01168">websocket_client_create_key()</a>, and <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00288">websocket_mask_payload()</a>.</p>
<div class="fragment"><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;{</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;   <span class="keywordtype">long</span> <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/d1f/main_2utils_8c.html#a29aac26dfc884358b9b98aa7c89fee44">dev_urandom_fd</a> &gt;= 0) {</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;      <span class="keywordtype">int</span> read_res = read(<a class="code" href="../../de/d1f/main_2utils_8c.html#a29aac26dfc884358b9b98aa7c89fee44">dev_urandom_fd</a>, &amp;res, <span class="keyword">sizeof</span>(res));</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="keywordflow">if</span> (read_res &gt; 0) {</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;         <span class="keywordtype">long</span> <span class="keywordtype">int</span> rm = RAND_MAX;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;         res = res &lt; 0 ? ~res : res;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;         rm++;</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;         <span class="keywordflow">return</span> res % rm;</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;      }</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;   }</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <span class="comment">/* XXX - Thread safety really depends on the libc, not the OS.</span></div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;<span class="comment">    * But... popular Linux libc&#39;s (uClibc, glibc, eglibc), all have a</span></div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;<span class="comment">    * somewhat thread safe random(3) (results are random, but not</span></div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;<span class="comment">    * reproducible). The libc&#39;s for other systems (BSD, et al.), not so</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;<span class="comment">    * much.</span></div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="preprocessor">#ifdef linux</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;   res = random();</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#aff56af259d6f99172edddacdad8e9372">randomlock</a>);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   res = random();</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#aff56af259d6f99172edddacdad8e9372">randomlock</a>);</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a29aac26dfc884358b9b98aa7c89fee44"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a29aac26dfc884358b9b98aa7c89fee44">dev_urandom_fd</a></div><div class="ttdeci">static int dev_urandom_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00792">main/utils.c:792</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="main_2utils_8c_html_aff56af259d6f99172edddacdad8e9372"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#aff56af259d6f99172edddacdad8e9372">randomlock</a></div><div class="ttdeci">static ast_mutex_t randomlock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02061">main/utils.c:2061</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af7a2c1bf0a98df4a52ee48a9d9e25510"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7a2c1bf0a98df4a52ee48a9d9e25510">&#9670;&nbsp;</a></span>ast_regex_string_to_regex_pattern()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_regex_string_to_regex_pattern </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>regex_string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/da2/structast__str.html">ast_str</a> **&#160;</td>
          <td class="paramname"><em>regex_pattern</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Given a string regex_string in the form of "/regex/", convert it into the form of "regex". </p>
<p>This function will trim one leading / and one trailing / from a given input string <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> regex_pattern must be preallocated before calling this function</p>
<dl class="section return"><dt>Returns</dt><dd>0 on success, non-zero on failure. </dd>
<dd>
1 if we only stripped a leading / </dd>
<dd>
2 if we only stripped a trailing / </dd>
<dd>
3 if we did not strip any / characters </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">regex_string</td><td>the string containing /regex/ </td></tr>
    <tr><td class="paramname">regex_pattern</td><td>the destination <a class="el" href="../../dd/da2/structast__str.html" title="The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...">ast_str</a> which will contain "regex" after execution </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01931">1931</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l01065">ast_str_set()</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00738">ast_str_truncate()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04460">action_hangup()</a>, <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00244">mwi_mailbox_delete()</a>, and <a class="el" href="../../d7/d82/res__mwi__external__ami_8c_source.html#l00147">mwi_mailbox_get()</a>.</p>
<div class="fragment"><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;{</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;   <span class="keywordtype">int</span> regex_len = strlen(regex_string);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;   <span class="keywordtype">int</span> ret = 3;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;   <span class="comment">/* Chop off the leading / if there is one */</span></div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;   <span class="keywordflow">if</span> ((regex_len &gt;= 1) &amp;&amp; (regex_string[0] == <span class="charliteral">&#39;/&#39;</span>)) {</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(regex_pattern, 0, <span class="stringliteral">&quot;%s&quot;</span>, regex_string + 1);</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      ret -= 2;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;   }</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;   <span class="comment">/* Chop off the ending / if there is one */</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;   <span class="keywordflow">if</span> ((regex_len &gt; 1) &amp;&amp; (regex_string[regex_len - 1] == <span class="charliteral">&#39;/&#39;</span>)) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a0b9c195ff2235f7670358e1e37cf6b8d">ast_str_truncate</a>(*regex_pattern, -1);</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;      ret -= 1;</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   }</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;}</div><div class="ttc" id="strings_8h_html_a0b9c195ff2235f7670358e1e37cf6b8d"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a0b9c195ff2235f7670358e1e37cf6b8d">ast_str_truncate</a></div><div class="ttdeci">char * ast_str_truncate(struct ast_str *buf, ssize_t len)</div><div class="ttdoc">Truncates the enclosed string to the given length. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00738">strings.h:738</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a904a6933b710e14c7fa2029a0f0cc91a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a904a6933b710e14c7fa2029a0f0cc91a">&#9670;&nbsp;</a></span>ast_remaining_ms()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_remaining_ms </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>max_ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Calculate remaining milliseconds given a starting timestamp and upper bound. </p>
<p>If the upper bound is negative then this indicates that there is no upper bound on the amount of time to wait. This will result in a negative return.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">start</td><td>When timing started being calculated </td></tr>
    <tr><td class="paramname">max_ms</td><td>The maximum number of milliseconds to wait from start. May be negative. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The number of milliseconds left to wait for. May be negative. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02033">2033</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, and <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d09/sig__analog_8c_source.html#l01711">__analog_ss_thread()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02704">__ast_answer()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l06066">__ast_request_and_dial()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l09512">analog_ss_thread()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00374">ast_iostream_write()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04762">ast_recvtext()</a>, <a class="el" href="../../d1/dbd/stun_8c_source.html#l00384">ast_stun_request()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l03248">ast_waitfordigit_full()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l01527">disable_t38()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l14137">find_cache()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l01590">generic_fax_exec()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00155">iostream_read()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00705">parking_set_duration()</a>, <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00274">read_mf_digits()</a>, <a class="el" href="../../d7/d1d/app__mf_8c_source.html#l00358">read_sf_digits()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l01856">receivefax_t38_init()</a>, <a class="el" href="../../dd/dd5/app__record_8c_source.html#l00221">record_exec()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01498">safe_sleep_conditional()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l02283">sendfax_t38_init()</a>, <a class="el" href="../../d9/d4a/app__tonedetect_8c_source.html#l00524">wait_exec()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l01202">wait_for_answer()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l03099">wait_for_cache_update()</a>, and <a class="el" href="../../de/d28/app__waitforring_8c_source.html#l00058">waitforring_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;{</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;   <span class="keywordflow">if</span> (max_ms &lt; 0) {</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      ms = max_ms;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      ms = max_ms - <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start);</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      <span class="keywordflow">if</span> (ms &lt; 0) {</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;         ms = 0;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      }</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   }</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   <span class="keywordflow">return</span> ms;</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a64c71c091e79908c7a05cfdad1389f58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a64c71c091e79908c7a05cfdad1389f58">&#9670;&nbsp;</a></span>ast_remove_lock_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_remove_lock_info </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>lock_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d95/structast__bt.html">ast_bt</a> *&#160;</td>
          <td class="paramname"><em>bt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>remove lock info for the current thread </p>
<p>this gets called by ast_mutex_unlock so that information on the lock can be removed from the current thread's lock info struct. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01088">1088</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00835">thr_lock_info::backtrace</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">thread_lock_info</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00827">thr_lock_info::times_locked</a>.</p>
<div class="fragment"><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;{</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   <span class="keywordflow">if</span> (!(lock_info = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a>, <span class="keyword">sizeof</span>(*lock_info))))</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="keywordflow">for</span> (i = lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1; i &gt;= 0; i--) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a> == <a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>)</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   }</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   <span class="keywordflow">if</span> (i == -1) {</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;      <span class="comment">/* Lock not found :( */</span></div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;   }</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">times_locked</a> &gt; 1) {</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;      lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">times_locked</a>--;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="preprocessor">#ifdef HAVE_BKTR</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a74dd9ad5578beac67d74e05f5f33edac">backtrace</a> = bt;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <span class="keywordflow">if</span> (i &lt; lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1) {</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;      <span class="comment">/* Not the last one ... *should* be rare! */</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;      memmove(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i], &amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i + 1],</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;         (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - (i + 1)) * <span class="keyword">sizeof</span>(lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[0]));</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;   }</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a>--;</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="main_2utils_8c_html_ae1445fe6bc0aafd9832b2d53377c952a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a></div><div class="ttdeci">static struct ast_threadstorage thread_lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00902">main/utils.c:902</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a8ea6686e13727e7f2f56c317e9200402"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">thr_lock_info::times_locked</a></div><div class="ttdeci">int times_locked</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00827">main/utils.c:827</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a74dd9ad5578beac67d74e05f5f33edac"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a74dd9ad5578beac67d74e05f5f33edac">thr_lock_info::backtrace</a></div><div class="ttdeci">struct ast_bt * backtrace</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00835">main/utils.c:835</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae01ad140af5f1041395f4355ed0f4d60"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae01ad140af5f1041395f4355ed0f4d60">&#9670;&nbsp;</a></span>ast_replace_subargument_delimiter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_replace_subargument_delimiter </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Replace '^' in a string with ','. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>String within which to replace characters </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02095">2095</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, <a class="el" href="../../df/db6/bridge__after_8c_source.html#l00636">ast_bridge_set_after_go_on()</a>, <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>, <a class="el" href="../../da/db1/app__originate_8c_source.html#l00173">originate_exec()</a>, <a class="el" href="../../d3/da4/app__page_8c_source.html#l00250">page_exec()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l08183">queue_exec()</a>.</p>
<div class="fragment"><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;{</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   <span class="keywordflow">for</span> (; *s; s++) {</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;      <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;^&#39;</span>) {</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;         *s = <span class="charliteral">&#39;,&#39;</span>;</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      }</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;   }</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a0857d6245dd36cd605a738f3af67b910"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0857d6245dd36cd605a738f3af67b910">&#9670;&nbsp;</a></span>ast_restore_lock_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_restore_lock_info </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>lock_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01059">1059</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00833">thr_lock_info::suspended</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">thread_lock_info</a>.</p>
<div class="fragment"><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;{</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;   <span class="keywordflow">if</span> (!(lock_info = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a>, <span class="keyword">sizeof</span>(*lock_info))))</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <span class="keywordflow">for</span> (i = lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1; i &gt;= 0; i--) {</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;      <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a> == <a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>)</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;   }</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   <span class="keywordflow">if</span> (i == -1) {</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;      <span class="comment">/* Lock not found :( */</span></div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   }</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#af62c9334e77989174caccf53beee4215">suspended</a> = 0;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="main_2utils_8c_html_ae1445fe6bc0aafd9832b2d53377c952a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a></div><div class="ttdeci">static struct ast_threadstorage thread_lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00902">main/utils.c:902</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af62c9334e77989174caccf53beee4215"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af62c9334e77989174caccf53beee4215">thr_lock_info::suspended</a></div><div class="ttdeci">int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00833">main/utils.c:833</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a1f26830793845a2db821147d7e9f33d0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1f26830793845a2db821147d7e9f33d0">&#9670;&nbsp;</a></span>ast_safe_mkdir()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_safe_mkdir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>base_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Recursively create directory path, but only if it resolves within the given <em>base_path</em>. </p>
<p>If <em>base_path</em> does not exist, it will not be created and this function returns <code>EPERM</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">path</td><td>The directory path to create </td></tr>
    <tr><td class="paramname">mode</td><td>The permissions with which to try to create the directory </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 on success or an error code otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02336">2336</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d9/db0/astmm_8c_source.html#l01766">ast_std_free()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02266">safe_mkdir()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00404">AST_TEST_DEFINE()</a>, and <a class="el" href="../../d8/d4c/res__stasis__recording_8c_source.html#l00370">stasis_app_control_record()</a>.</p>
<div class="fragment"><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;{</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, absolute_base_path, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a1b7699f7e51f653f1032daa2df2319cd">ast_std_free</a>);</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, p, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <span class="keywordflow">if</span> (base_path == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || path == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EFAULT;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   }</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;   p = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(path);</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;   <span class="keywordflow">if</span> (p == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;      <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = ENOMEM;</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;   }</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   absolute_base_path = realpath(base_path, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;   <span class="keywordflow">if</span> (absolute_base_path == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   }</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../de/d1f/main_2utils_8c.html#aad3e5b2dbf4e988341484e0b1ab48ecb">safe_mkdir</a>(absolute_base_path, p, mode);</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;}</div><div class="ttc" id="astmm_8h_html_a1b7699f7e51f653f1032daa2df2319cd"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a1b7699f7e51f653f1032daa2df2319cd">ast_std_free</a></div><div class="ttdeci">void ast_std_free(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01766">astmm.c:1766</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="main_2utils_8c_html_aad3e5b2dbf4e988341484e0b1ab48ecb"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#aad3e5b2dbf4e988341484e0b1ab48ecb">safe_mkdir</a></div><div class="ttdeci">static int safe_mkdir(const char *base_path, char *path, int mode)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02266">main/utils.c:2266</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4c527f8466f7653b16cb694ba5668092"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c527f8466f7653b16cb694ba5668092">&#9670;&nbsp;</a></span>ast_set_default_eid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_set_default_eid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill in an <a class="el" href="../../d0/d86/structast__eid.html" title="An Entity ID is essentially a MAC address, brief and unique. ">ast_eid</a> with the default eid of this machine. </p>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02749">2749</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">buf</a>, <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00868">if()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02587">ast_eid_to_str()</a>, and <a class="el" href="../../de/dc5/options_8c_source.html#l00210">load_asterisk_conf()</a>.</p>
<div class="fragment"><div class="line"><a name="l02750"></a><span class="lineno"> 2750</span>&#160;{</div><div class="line"><a name="l02751"></a><span class="lineno"> 2751</span>&#160;   <span class="keywordtype">int</span> s;</div><div class="line"><a name="l02752"></a><span class="lineno"> 2752</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l02753"></a><span class="lineno"> 2753</span>&#160;   <span class="keyword">struct </span>ifreq *ifr;</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;   <span class="keyword">struct </span>ifreq *ifrp;</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;   <span class="keyword">struct </span>ifconf ifc;</div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;   <span class="keywordtype">char</span> eid_str[20];</div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;   <span class="keywordtype">int</span> bufsz, num_interfaces;</div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> empty_mac[6] = {0, 0, 0, 0, 0, 0};</div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> full_mac[6]  = {0xFF, 0xFF, 0xFF, 0xFF, 0xFF, 0xFF};</div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;</div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;   s = socket(AF_INET, SOCK_STREAM, 0);</div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;   <span class="keywordflow">if</span> (s &lt; 0) {</div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to open socket for seeding global EID. &quot;</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;         <span class="stringliteral">&quot;You will have to set it manually.\n&quot;</span>);</div><div class="line"><a name="l02766"></a><span class="lineno"> 2766</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;   }</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;   ifc.ifc_len = 0;</div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;   ifc.ifc_buf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;   <span class="keywordflow">if</span> (ioctl(s, SIOCGIFCONF, &amp;ifc) || ifc.ifc_len &lt;= 0) {</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No ethernet interface found for seeding global EID. &quot;</span></div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;         <span class="stringliteral">&quot;You will have to set it manually.\n&quot;</span>);</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;      close(s);</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;   }</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;   bufsz = ifc.ifc_len;</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;   <span class="keywordflow">if</span> (!(buf = <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(bufsz))) {</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate memory for seeding global EID. &quot;</span></div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;         <span class="stringliteral">&quot;You will have to set it manually.\n&quot;</span>);</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;      close(s);</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;   }</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;   ifc.ifc_buf = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;   <span class="keywordflow">if</span> (ioctl(s, SIOCGIFCONF, &amp;ifc) &lt; 0) {</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to retrieve ethernet interfaces for seeding global EID. &quot;</span></div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;         <span class="stringliteral">&quot;You will have to set it manually.\n&quot;</span>);</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;      close(s);</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;   }</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;   ifrp = ifc.ifc_req;</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;   num_interfaces = ifc.ifc_len / <span class="keyword">sizeof</span>(*ifr);</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; num_interfaces; i++) {</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;      ifr = &amp;ifrp[i];</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;      <span class="keywordflow">if</span> (!ioctl(s, SIOCGIFHWADDR, ifr)) {</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *hwaddr = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) ifr-&gt;ifr_hwaddr.sa_data;</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;         <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a> (!(memcmp(hwaddr, &amp;empty_mac, 6) &amp;&amp; memcmp(hwaddr, &amp;full_mac, 6))) {</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;         }</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;         memcpy(eid, hwaddr, <span class="keyword">sizeof</span>(*eid));</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Seeding global EID &#39;%s&#39; from &#39;%s&#39; using &#39;siocgifhwaddr&#39;\n&quot;</span>,</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;            <a class="code" href="../../de/d1f/main_2utils_8c.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a>(eid_str, <span class="keyword">sizeof</span>(eid_str), eid), ifr-&gt;ifr_name);</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;         close(s);</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;      }</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;   }</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No ethernet interface found for seeding global EID. &quot;</span></div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;      <span class="stringliteral">&quot;You will have to set it manually.\n&quot;</span>);</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(buf);</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;   close(s);</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a8ebf6841073ea2a063a0c86a5092a85b"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a8ebf6841073ea2a063a0c86a5092a85b">ast_eid_to_str</a></div><div class="ttdeci">char * ast_eid_to_str(char *s, int maxlen, struct ast_eid *eid)</div><div class="ttdoc">Convert an EID to a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02587">main/utils.c:2587</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a33e91cd0cef6786e9e3a27ac67707207"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a33e91cd0cef6786e9e3a27ac67707207">if</a></div><div class="ttdeci">if(!yyg-&gt;yy_init)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00868">ast_expr2f.c:868</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af35c6f780502c691f0ae35e1d0f7a444"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af35c6f780502c691f0ae35e1d0f7a444">&#9670;&nbsp;</a></span>ast_sha1_hash()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sha1_hash </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>output</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Produce 40 char SHA1 hash of value. </p>
<p>Produces SHA1 hash based on input string. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00264">264</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/db5/sha1_8h.html#a3e2944b717d5b15bde31e082f2894640">SHA1Input()</a>, <a class="el" href="../../d2/d24/sha1_8c_source.html#l00101">SHA1Reset()</a>, and <a class="el" href="../../d2/d24/sha1_8c_source.html#l00226">SHA1Result()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d9/d2d/res__stir__shaken_8c_source.html#l00456">add_public_key_to_astdb()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00685">ast_tcptls_server_start()</a>, <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00219">AST_TEST_DEFINE()</a>, <a class="el" href="../../d9/d2d/res__stir__shaken_8c_source.html#l00434">get_path_to_public_key()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l04932">handle_call_token()</a>, <a class="el" href="../../df/dfb/media__cache_8c_source.html#l00096">media_cache_item_sync_to_astdb()</a>, <a class="el" href="../../d9/d2d/res__stir__shaken_8c_source.html#l00405">public_key_is_expired()</a>, <a class="el" href="../../d9/d2d/res__stir__shaken_8c_source.html#l00471">remove_public_key_from_astdb()</a>, <a class="el" href="../../d9/d2d/res__stir__shaken_8c_source.html#l00352">set_public_key_expiration()</a>, <a class="el" href="../../dd/d42/func__sha1_8c_source.html#l00055">sha1()</a>, <a class="el" href="../../d9/d2d/res__stir__shaken_8c_source.html#l01260">test_stir_shaken_add_fake_astdb_entry()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02657">xmpp_client_authenticate_digest()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02827">xmpp_component_authenticate()</a>.</p>
<div class="fragment"><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;{</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d8e/structSHA1Context.html">SHA1Context</a> sha;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   <span class="keywordtype">char</span> *ptr;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   uint8_t Message_Digest[20];</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;   <a class="code" href="../../db/db5/sha1_8h.html#ab4d7125efac9b487ca663d692e78af36">SHA1Reset</a>(&amp;sha);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   <a class="code" href="../../db/db5/sha1_8h.html#a3e2944b717d5b15bde31e082f2894640">SHA1Input</a>(&amp;sha, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a5a634cf4429798b1c921a81de8250051">input</a>, strlen(input));</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;   <a class="code" href="../../db/db5/sha1_8h.html#a12d619787f5a12702e890b2c3907510e">SHA1Result</a>(&amp;sha, Message_Digest);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   ptr = output;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 20; x++)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;      ptr += sprintf(ptr, <span class="stringliteral">&quot;%02hhx&quot;</span>, Message_Digest[x]);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div><div class="ttc" id="ast__expr2f_8c_html_a5a634cf4429798b1c921a81de8250051"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a5a634cf4429798b1c921a81de8250051">input</a></div><div class="ttdeci">static int input(yyscan_t yyscanner)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l01584">ast_expr2f.c:1584</a></div></div>
<div class="ttc" id="structSHA1Context_html"><div class="ttname"><a href="../../d5/d8e/structSHA1Context.html">SHA1Context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/db5/sha1_8h_source.html#l00129">sha1.h:129</a></div></div>
<div class="ttc" id="sha1_8h_html_a12d619787f5a12702e890b2c3907510e"><div class="ttname"><a href="../../db/db5/sha1_8h.html#a12d619787f5a12702e890b2c3907510e">SHA1Result</a></div><div class="ttdeci">int SHA1Result(SHA1Context *, uint8_t Message_Digest[SHA1HashSize])</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d24/sha1_8c_source.html#l00226">sha1.c:226</a></div></div>
<div class="ttc" id="sha1_8h_html_ab4d7125efac9b487ca663d692e78af36"><div class="ttname"><a href="../../db/db5/sha1_8h.html#ab4d7125efac9b487ca663d692e78af36">SHA1Reset</a></div><div class="ttdeci">int SHA1Reset(SHA1Context *)</div><div class="ttdoc">SHA1Reset. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d24/sha1_8c_source.html#l00101">sha1.c:101</a></div></div>
<div class="ttc" id="sha1_8h_html_a3e2944b717d5b15bde31e082f2894640"><div class="ttname"><a href="../../db/db5/sha1_8h.html#a3e2944b717d5b15bde31e082f2894640">SHA1Input</a></div><div class="ttdeci">int SHA1Input(SHA1Context *, const uint8_t *bytes, unsigned int bytecount)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac49517ab46be0ea328d21ac2e9b0da5f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac49517ab46be0ea328d21ac2e9b0da5f">&#9670;&nbsp;</a></span>ast_sha1_hash_uint()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_sha1_hash_uint </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>digest</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>input</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Produce a 20 byte SHA1 hash of value. </p>
<p>Produces SHA1 hash based on input string, stored in uint8_t array. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00282">282</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/db5/sha1_8h.html#a3e2944b717d5b15bde31e082f2894640">SHA1Input()</a>, <a class="el" href="../../d2/d24/sha1_8c_source.html#l00101">SHA1Reset()</a>, and <a class="el" href="../../d2/d24/sha1_8c_source.html#l00226">SHA1Result()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00764">websocket_combine_key()</a>.</p>
<div class="fragment"><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;{</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keyword">struct </span><a class="code" href="../../d5/d8e/structSHA1Context.html">SHA1Context</a> sha;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        <a class="code" href="../../db/db5/sha1_8h.html#ab4d7125efac9b487ca663d692e78af36">SHA1Reset</a>(&amp;sha);</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <a class="code" href="../../db/db5/sha1_8h.html#a3e2944b717d5b15bde31e082f2894640">SHA1Input</a>(&amp;sha, (<span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a5a634cf4429798b1c921a81de8250051">input</a>, strlen(input));</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <a class="code" href="../../db/db5/sha1_8h.html#a12d619787f5a12702e890b2c3907510e">SHA1Result</a>(&amp;sha, digest);</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;}</div><div class="ttc" id="ast__expr2f_8c_html_a5a634cf4429798b1c921a81de8250051"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a5a634cf4429798b1c921a81de8250051">input</a></div><div class="ttdeci">static int input(yyscan_t yyscanner)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l01584">ast_expr2f.c:1584</a></div></div>
<div class="ttc" id="structSHA1Context_html"><div class="ttname"><a href="../../d5/d8e/structSHA1Context.html">SHA1Context</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/db5/sha1_8h_source.html#l00129">sha1.h:129</a></div></div>
<div class="ttc" id="sha1_8h_html_a12d619787f5a12702e890b2c3907510e"><div class="ttname"><a href="../../db/db5/sha1_8h.html#a12d619787f5a12702e890b2c3907510e">SHA1Result</a></div><div class="ttdeci">int SHA1Result(SHA1Context *, uint8_t Message_Digest[SHA1HashSize])</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d24/sha1_8c_source.html#l00226">sha1.c:226</a></div></div>
<div class="ttc" id="sha1_8h_html_ab4d7125efac9b487ca663d692e78af36"><div class="ttname"><a href="../../db/db5/sha1_8h.html#ab4d7125efac9b487ca663d692e78af36">SHA1Reset</a></div><div class="ttdeci">int SHA1Reset(SHA1Context *)</div><div class="ttdoc">SHA1Reset. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d24/sha1_8c_source.html#l00101">sha1.c:101</a></div></div>
<div class="ttc" id="sha1_8h_html_a3e2944b717d5b15bde31e082f2894640"><div class="ttname"><a href="../../db/db5/sha1_8h.html#a3e2944b717d5b15bde31e082f2894640">SHA1Input</a></div><div class="ttdeci">int SHA1Input(SHA1Context *, const uint8_t *bytes, unsigned int bytecount)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a349a86c7c5c6717af32e587fc228060c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a349a86c7c5c6717af32e587fc228060c">&#9670;&nbsp;</a></span>ast_store_lock_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_store_lock_info </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a>&#160;</td>
          <td class="paramname"><em>type</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line_num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>lock_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>lock_addr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dd/d95/structast__bt.html">ast_bt</a> *&#160;</td>
          <td class="paramname"><em>bt</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store lock info for the current thread. </p>
<p>This function gets called in <a class="el" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock()</a> and <a class="el" href="../../dd/d42/lock_8h.html#a987fc536e8b6a1044689eca873610792">ast_mutex_trylock()</a> so that information about this lock can be stored in this thread's lock info struct. The lock is marked as pending as the thread is waiting on the lock. <a class="el" href="../../dd/d42/lock_8h.html#a3970ea8e4a2aabd268c24203e5c40dc2" title="Mark the last lock as acquired. ">ast_mark_lock_acquired()</a> will mark it as held by this thread. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00905">905</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00802">AST_MAX_LOCKS</a>, <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00835">thr_lock_info::backtrace</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00823">thr_lock_info::file</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00824">thr_lock_info::func</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00828">thr_lock_info::line_num</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00825">thr_lock_info::lock_name</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00831">thr_lock_info::pending</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">thread_lock_info</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00827">thr_lock_info::times_locked</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00829">thr_lock_info::type</a>.</p>
<div class="fragment"><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;{</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   <span class="keywordflow">if</span> (!(lock_info = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a>, <span class="keyword">sizeof</span>(*lock_info))))</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a>; i++) {</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;      <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a> == <a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>) {</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;         lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">times_locked</a>++;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="preprocessor">#ifdef HAVE_BKTR</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;         lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a74dd9ad5578beac67d74e05f5f33edac">backtrace</a> = bt;</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;   }</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> == <a class="code" href="../../de/d1f/main_2utils_8c.html#ae997f8b92dcbc7e61ef6a9e84df49e4d">AST_MAX_LOCKS</a>) {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="comment">/* Can&#39;t use ast_log here, because it will cause infinite recursion */</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;      fprintf(stderr, <span class="stringliteral">&quot;XXX ERROR XXX A thread holds more locks than &#39;%d&#39;.&quot;</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         <span class="stringliteral">&quot;  Increase AST_MAX_LOCKS!\n&quot;</span>, <a class="code" href="../../de/d1f/main_2utils_8c.html#ae997f8b92dcbc7e61ef6a9e84df49e4d">AST_MAX_LOCKS</a>);</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <span class="keywordflow">if</span> (i &amp;&amp; lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i - 1].<a class="code" href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">pending</a> == -1) {</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;      <span class="comment">/* The last lock on the list was one that this thread tried to lock but</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment">       * failed at doing so.  It has now moved on to something else, so remove</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">       * the old lock from the list. */</span></div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;      i--;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;      lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a>--;</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;      memset(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i], 0, <span class="keyword">sizeof</span>(lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[0]));</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   }</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a> = filename;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a7661b5d028be7f8997cef563e3890fd9">line_num</a> = <a class="code" href="../../de/d84/structthr__lock__info.html#a7661b5d028be7f8997cef563e3890fd9">line_num</a>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a> = <a class="code" href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a>;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#aab5e878cae779b0da45f2c9ddce62ae8">lock_name</a> = <a class="code" href="../../de/d84/structthr__lock__info.html#aab5e878cae779b0da45f2c9ddce62ae8">lock_name</a>;</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a> = <a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">times_locked</a> = 1;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ac880d83f181952fb06329f039b9dd527">type</a> = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">pending</a> = 1;</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="preprocessor">#ifdef HAVE_BKTR</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a74dd9ad5578beac67d74e05f5f33edac">backtrace</a> = bt;</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a>++;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="main_2utils_8c_html_ae997f8b92dcbc7e61ef6a9e84df49e4d"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae997f8b92dcbc7e61ef6a9e84df49e4d">AST_MAX_LOCKS</a></div><div class="ttdeci">#define AST_MAX_LOCKS</div><div class="ttdoc">A reasonable maximum number of locks a thread would be holding ... </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00802">main/utils.c:802</a></div></div>
<div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="structthr__lock__info_html_aab5e878cae779b0da45f2c9ddce62ae8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#aab5e878cae779b0da45f2c9ddce62ae8">thr_lock_info::lock_name</a></div><div class="ttdeci">const char * lock_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00825">main/utils.c:825</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a79ec26d453dcd29aec17f5536233e849"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">thr_lock_info::pending</a></div><div class="ttdeci">int pending</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00831">main/utils.c:831</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a7661b5d028be7f8997cef563e3890fd9"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a7661b5d028be7f8997cef563e3890fd9">thr_lock_info::line_num</a></div><div class="ttdeci">int line_num</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00828">main/utils.c:828</a></div></div>
<div class="ttc" id="main_2utils_8c_html_ae1445fe6bc0aafd9832b2d53377c952a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a></div><div class="ttdeci">static struct ast_threadstorage thread_lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00902">main/utils.c:902</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a8ea6686e13727e7f2f56c317e9200402"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a8ea6686e13727e7f2f56c317e9200402">thr_lock_info::times_locked</a></div><div class="ttdeci">int times_locked</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00827">main/utils.c:827</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a74dd9ad5578beac67d74e05f5f33edac"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a74dd9ad5578beac67d74e05f5f33edac">thr_lock_info::backtrace</a></div><div class="ttdeci">struct ast_bt * backtrace</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00835">main/utils.c:835</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ac880d83f181952fb06329f039b9dd527"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ac880d83f181952fb06329f039b9dd527">thr_lock_info::type</a></div><div class="ttdeci">enum ast_lock_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00829">main/utils.c:829</a></div></div>
<div class="ttc" id="structthr__lock__info_html_afc4e949c7b7d0ab565ecfb62c3380171"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">thr_lock_info::func</a></div><div class="ttdeci">const char * func</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00824">main/utils.c:824</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af0baa3ccdd9d2a6adf03b72e2bea5789"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af0baa3ccdd9d2a6adf03b72e2bea5789">thr_lock_info::file</a></div><div class="ttdeci">const char * file</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00823">main/utils.c:823</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad60a8c795e1f64b7beeed705425c555f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad60a8c795e1f64b7beeed705425c555f">&#9670;&nbsp;</a></span>ast_str_to_eid()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_str_to_eid </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d0/d86/structast__eid.html">ast_eid</a> *&#160;</td>
          <td class="paramname"><em>eid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert a string into an EID. </p>
<p>This function expects an EID in the format: 00:11:22:33:44:55</p>
<dl class="section return"><dt>Returns</dt><dd>0 success, non-zero failure </dd></dl>
<dl class="section since"><dt>Since</dt><dd>1.6.1 </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02825">2825</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00787">ast_eid::eid</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00594">asterisk_publication_devicestate_state_change()</a>, <a class="el" href="../../dc/d7a/res__pjsip__publish__asterisk_8c_source.html#l00685">asterisk_publication_mwi_state_change()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04628">build_peer()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l02550">dundi_do_query()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00210">load_asterisk_conf()</a>, <a class="el" href="../../d1/dc0/pbx__dundi_8c_source.html#l04937">set_config()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l01461">xmpp_pubsub_handle_event()</a>.</p>
<div class="fragment"><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;{</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> eid_int[6];</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;   <span class="keywordflow">if</span> (sscanf(s, <span class="stringliteral">&quot;%2x:%2x:%2x:%2x:%2x:%2x&quot;</span>, &amp;eid_int[0], &amp;eid_int[1], &amp;eid_int[2],</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;       &amp;eid_int[3], &amp;eid_int[4], &amp;eid_int[5]) != 6) {</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;   }</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 6; x++) {</div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;      eid-&gt;<a class="code" href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">eid</a>[x] = eid_int[x];</div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;   }</div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;</div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;}</div><div class="ttc" id="structast__eid_html_aaffcb04ac1b364a0788003f95715460b"><div class="ttname"><a href="../../d0/d86/structast__eid.html#aaffcb04ac1b364a0788003f95715460b">ast_eid::eid</a></div><div class="ttdeci">unsigned char eid[6]</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00787">utils.h:787</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aeb597bdc9a1209c2e7dd8af04de43485"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aeb597bdc9a1209c2e7dd8af04de43485">&#9670;&nbsp;</a></span>ast_strip_quoted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_strip_quoted </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>beg_quotes</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>end_quotes</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Strip leading/trailing whitespace and quotes from a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>The string to be stripped (will be modified). </td></tr>
    <tr><td class="paramname">beg_quotes</td><td>The list of possible beginning quote characters. </td></tr>
    <tr><td class="paramname">end_quotes</td><td>The list of matching ending quote characters. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The stripped string.</dd></dl>
<p>This functions strips all leading and trailing whitespace characters from the input string, and returns a pointer to the resulting string. The string is modified in place.</p>
<p>It can also remove beginning and ending quote (or quote-like) characters, in matching pairs. If the first character of the string matches any character in beg_quotes, and the last character of the string is the matching character in end_quotes, then they are removed from the string.</p>
<p>Examples: </p><div class="fragment"><div class="line"><a class="code" href="../../d6/d90/strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;\&quot;&quot;</span>, <span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a class="code" href="../../d6/d90/strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;&#39;&quot;</span>, <span class="stringliteral">&quot;&#39;&quot;</span>);</div><div class="line"><a class="code" href="../../d6/d90/strings_8h.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a>(<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="stringliteral">&quot;[{(&quot;</span>, <span class="stringliteral">&quot;]})&quot;</span>);</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01639">1639</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00219">ast_strip()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d71/features__config_8c_source.html#l01382">applicationmap_handler()</a>, <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, <a class="el" href="../../d0/dad/location_8c_source.html#l00525">ast_sip_validate_uri_length()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01656">ast_strsep()</a>, <a class="el" href="../../d9/d81/res__pjsip__dialog__info__body__generator_8c_source.html#l00093">dialog_info_generate_body_content()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18394">get_rdnis()</a>, <a class="el" href="../../d3/d51/chan__mobile_8c_source.html#l02224">hfp_parse_clip()</a>, <a class="el" href="../../da/dd2/func__logic_8c_source.html#l00132">iftime()</a>, <a class="el" href="../../d5/dd1/cdr__sqlite3__custom_8c_source.html#l00119">load_values_config()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l09838">parse_allowed_methods()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01498">parse_cookies()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l05035">parse_dial_string()</a>, <a class="el" href="../../d0/d38/res__pjsip__pidf__body__generator_8c_source.html#l00038">pidf_allocate_body()</a>, <a class="el" href="../../d5/da9/res__pjsip__diversion_8c_source.html#l00351">set_redirecting_reason()</a>, <a class="el" href="../../d8/d9c/config__parser_8c_source.html#l00037">sip_parse_register_line()</a>, and <a class="el" href="../../de/d6f/res__pjsip__xpidf__body__generator_8c_source.html#l00038">xpidf_allocate_body()</a>.</p>
<div class="fragment"><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;{</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   <span class="keywordtype">char</span> *e;</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   <span class="keywordtype">char</span> *q;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;   s = <a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(s);</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   <span class="keywordflow">if</span> ((q = strchr(beg_quotes, *s)) &amp;&amp; *q != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;      e = s + strlen(s) - 1;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;      <span class="keywordflow">if</span> (*e == *(end_quotes + (q - beg_quotes))) {</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;         s++;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;         *e = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;      }</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   }</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   <span class="keywordflow">return</span> s;</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;}</div><div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae03dd5574a7410a0afc22e34d26de752"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae03dd5574a7410a0afc22e34d26de752">&#9670;&nbsp;</a></span>ast_strsep()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_strsep </td>
          <td>(</td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>sep</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Act like strsep but ignore separators inside quotes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>Pointer to address of the string to be processed. Will be modified and can't be constant. </td></tr>
    <tr><td class="paramname">sep</td><td>A single character delimiter. </td></tr>
    <tr><td class="paramname">flags</td><td>Controls post-processing of the result. AST_STRSEP_TRIM trims all leading and trailing whitespace from the result. AST_STRSEP_STRIP does a trim then strips the outermost quotes. You may want to trim again after the strip. Just OR both the TRIM and STRIP flags. AST_STRSEP_UNESCAPE unescapes '\' sequences. AST_STRSEP_ALL does all of the above processing. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The next token or NULL if done or if there are more than 8 levels of nested quotes.</dd></dl>
<p>This function acts like strsep with three exceptions... The separator is a single character instead of a string. Separators inside quotes are treated literally instead of like separators. You can elect to have leading and trailing whitespace and quotes stripped from the result and have '\' sequences unescaped.</p>
<p>Like strsep, ast_strsep maintains no internal state and you can call it recursively using different separators on the same storage.</p>
<p>Also like strsep, for consistent results, consecutive separators are not collapsed so you may get an empty string as a valid result.</p>
<p>Examples: </p><div class="fragment"><div class="line"><span class="keywordtype">char</span> *mystr = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<span class="stringliteral">&quot;abc=def,ghi=&#39;zzz=yyy,456&#39;,jkl&quot;</span>);</div><div class="line"><span class="keywordtype">char</span> *token, *token2, *token3;</div><div class="line"></div><div class="line"><span class="keywordflow">while</span>((token = <a class="code" href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a>(&amp;mystr, <span class="charliteral">&#39;,&#39;</span>, AST_SEP_STRIP))) {</div><div class="line">  <span class="comment">// 1st token will be aaa=def</span></div><div class="line">  <span class="comment">// 2nd token will be ghi=&#39;zzz=yyy,456&#39;</span></div><div class="line">  <span class="keywordflow">while</span>((token2 = <a class="code" href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a>(&amp;token, <span class="charliteral">&#39;=&#39;</span>, AST_SEP_STRIP))) {</div><div class="line">     <span class="comment">// 1st token2 will be ghi</span></div><div class="line">     <span class="comment">// 2nd token2 will be zzz=yyy,456</span></div><div class="line">     <span class="keywordflow">while</span>((token3 = <a class="code" href="../../d6/d90/strings_8h.html#aec193d64a6309c72d72e5e523ef6076e">ast_strsep</a>(&amp;token2, <span class="charliteral">&#39;,&#39;</span>, AST_SEP_STRIP))) {</div><div class="line">        <span class="comment">// 1st token3 will be zzz=yyy</span></div><div class="line">        <span class="comment">// 2nd token3 will be 456</span></div><div class="line">        <span class="comment">// and so on</span></div><div class="line">     }</div><div class="line">  }</div><div class="line">  <span class="comment">// 3rd token will be jkl</span></div><div class="line">}</div></div><!-- fragment --> 
<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01656">1656</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00219">ast_strip()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01639">ast_strip_quoted()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00251">AST_STRSEP_STRIP</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00252">AST_STRSEP_TRIM</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00253">AST_STRSEP_UNESCAPE</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00696">ast_unescape_quoted()</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d06/test__strings_8c_source.html#l00311">AST_TEST_DEFINE()</a>, <a class="el" href="../../d2/d9d/main_2config_8c_source.html#l00881">does_category_match()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l03819">handle_updates()</a>, <a class="el" href="../../da/db1/app__originate_8c_source.html#l00173">originate_exec()</a>, <a class="el" href="../../d8/db9/test_8c_source.html#l00300">test_xml_entry()</a>, and <a class="el" href="../../d9/d63/res__pjsip__config__wizard_8c_source.html#l00991">wizard_apply_handler()</a>.</p>
<div class="fragment"><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;{</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;   <span class="keywordtype">char</span> *st = *iss;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;   <span class="keywordtype">char</span> *is;</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;   <span class="keywordtype">int</span> inquote = 0;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;   <span class="keywordtype">char</span> stack[8];</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(st)) {</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;   }</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   memset(stack, 0, <span class="keyword">sizeof</span>(stack));</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   <span class="keywordflow">for</span>(is = st; *is; is++) {</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      <span class="keywordflow">if</span> (*is == <span class="charliteral">&#39;\\&#39;</span>) {</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;         <span class="keywordflow">if</span> (*++is != <span class="charliteral">&#39;\0&#39;</span>) {</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            is++;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;         }</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;      }</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <span class="keywordflow">if</span> (*is == <span class="charliteral">&#39;\&#39;&#39;</span> || *is == <span class="charliteral">&#39;&quot;&#39;</span>) {</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;         <span class="keywordflow">if</span> (*is == stack[inquote]) {</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;            stack[inquote--] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;            <span class="keywordflow">if</span> (++inquote &gt;= <span class="keyword">sizeof</span>(stack)) {</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;            }</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;            stack[inquote] = *is;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;         }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;      }</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;      <span class="keywordflow">if</span> (*is == sep &amp;&amp; !inquote) {</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;         *is = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;         found = 1;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;         *iss = is + 1;</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;      }</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;   }</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;   <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;      *iss = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;   }</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;   <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2">AST_STRSEP_STRIP</a>) {</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;      st = <a class="code" href="../../de/d1f/main_2utils_8c.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a>(st, <span class="stringliteral">&quot;&#39;\&quot;&quot;</span>, <span class="stringliteral">&quot;&#39;\&quot;&quot;</span>);</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;   }</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;   <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17a81540e33a76fd4c5ca8e4462588e578f">AST_STRSEP_TRIM</a>) {</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      st = <a class="code" href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a>(st);</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   }</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   <span class="keywordflow">if</span> (flags &amp; <a class="code" href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ac7c24020f292d706a96a93889f3983b2">AST_STRSEP_UNESCAPE</a>) {</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;      <a class="code" href="../../de/d1f/main_2utils_8c.html#a06a3aadc32e947d3bffa610aa7c74065">ast_unescape_quoted</a>(st);</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;   }</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;   <span class="keywordflow">return</span> st;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a06a3aadc32e947d3bffa610aa7c74065"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a06a3aadc32e947d3bffa610aa7c74065">ast_unescape_quoted</a></div><div class="ttdeci">void ast_unescape_quoted(char *quote_str)</div><div class="ttdoc">Unescape quotes in a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00696">main/utils.c:696</a></div></div>
<div class="ttc" id="main_2utils_8c_html_aeb597bdc9a1209c2e7dd8af04de43485"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#aeb597bdc9a1209c2e7dd8af04de43485">ast_strip_quoted</a></div><div class="ttdeci">char * ast_strip_quoted(char *s, const char *beg_quotes, const char *end_quotes)</div><div class="ttdoc">Strip leading/trailing whitespace and quotes from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01639">main/utils.c:1639</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_a6b26879ddbe135cabc07822b019b0b17a81540e33a76fd4c5ca8e4462588e578f"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17a81540e33a76fd4c5ca8e4462588e578f">AST_STRSEP_TRIM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00252">strings.h:252</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="strings_8h_html_a6b26879ddbe135cabc07822b019b0b17ac7c24020f292d706a96a93889f3983b2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ac7c24020f292d706a96a93889f3983b2">AST_STRSEP_UNESCAPE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00253">strings.h:253</a></div></div>
<div class="ttc" id="strings_8h_html_ac92713b8d07a45720b2664be70810e55"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac92713b8d07a45720b2664be70810e55">ast_strip</a></div><div class="ttdeci">char * ast_strip(char *s)</div><div class="ttdoc">Strip leading/trailing whitespace from a string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00219">strings.h:219</a></div></div>
<div class="ttc" id="strings_8h_html_a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6b26879ddbe135cabc07822b019b0b17ad5a39d9c273e14503b5edc1c8541ebe2">AST_STRSEP_STRIP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00251">strings.h:251</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a40193d8dbd051ad5afa5da543a52da0d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a40193d8dbd051ad5afa5da543a52da0d">&#9670;&nbsp;</a></span>ast_suspend_lock_info()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_suspend_lock_info </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>lock_addr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01030">1030</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00833">thr_lock_info::suspended</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">thread_lock_info</a>.</p>
<div class="fragment"><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;{</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <span class="keywordtype">int</span> i = 0;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keywordflow">if</span> (!(lock_info = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a>, <span class="keyword">sizeof</span>(*lock_info)))) {</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;   }</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   <span class="keywordflow">for</span> (i = lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a> - 1; i &gt;= 0; i--) {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a> == <a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>)</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;   }</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;   <span class="keywordflow">if</span> (i == -1) {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;      <span class="comment">/* Lock not found :( */</span></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   }</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#af62c9334e77989174caccf53beee4215">suspended</a> = 1;</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* ! LOW_MEMORY */</span><span class="preprocessor"></span></div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="main_2utils_8c_html_ae1445fe6bc0aafd9832b2d53377c952a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a></div><div class="ttdeci">static struct ast_threadstorage thread_lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00902">main/utils.c:902</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af62c9334e77989174caccf53beee4215"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af62c9334e77989174caccf53beee4215">thr_lock_info::suspended</a></div><div class="ttdeci">int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00833">main/utils.c:833</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a015e7a1c3014aa7446f6e1696710088c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a015e7a1c3014aa7446f6e1696710088c">&#9670;&nbsp;</a></span>ast_thread_is_user_interface()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_thread_is_user_interface </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Indicates whether the current thread is a user interface. </p>
<dl class="section return"><dt>Returns</dt><dd>True (non-zero) if thread is a user interface. </dd>
<dd>
False (zero) if thread is not a user interface. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02996">2996</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02979">thread_user_interface_tl</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00200">ast_autoservice_start()</a>, and <a class="el" href="../../d5/d66/autoservice_8c_source.html#l00266">ast_autoservice_stop()</a>.</p>
<div class="fragment"><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;{</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;   <span class="keywordtype">int</span> *thread_user_interface;</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;   thread_user_interface = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;      &amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a2e272837476aeb77658b7e5301cc5f26">thread_user_interface_tl</a>, <span class="keyword">sizeof</span>(*thread_user_interface));</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;   <span class="keywordflow">if</span> (thread_user_interface == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Error checking thread&#39;s user interface status\n&quot;</span>);</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;      <span class="comment">/* On error, assume that we are not a user interface thread */</span></div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;   }</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;   <span class="keywordflow">return</span> *thread_user_interface;</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a2e272837476aeb77658b7e5301cc5f26"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a2e272837476aeb77658b7e5301cc5f26">thread_user_interface_tl</a></div><div class="ttdeci">static struct ast_threadstorage thread_user_interface_tl</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02979">main/utils.c:2979</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4dfa6ab2843303516a1e66ca4c1558f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4dfa6ab2843303516a1e66ca4c1558f0">&#9670;&nbsp;</a></span>ast_thread_user_interface_set()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_thread_user_interface_set </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>is_user_interface</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the current thread's user interface status. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">is_user_interface</td><td>Non-zero to mark the thread as a user interface.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 if successfuly marked current thread. </dd>
<dd>
Non-zero if marking current thread failed. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02981">2981</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02979">thread_user_interface_tl</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00140">handle_tcptls_connection()</a>.</p>
<div class="fragment"><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;{</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;   <span class="keywordtype">int</span> *thread_user_interface;</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;   thread_user_interface = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;      &amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a2e272837476aeb77658b7e5301cc5f26">thread_user_interface_tl</a>, <span class="keyword">sizeof</span>(*thread_user_interface));</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;   <span class="keywordflow">if</span> (thread_user_interface == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Error setting user interface status for current thread\n&quot;</span>);</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;   }</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;   *thread_user_interface = !!is_user_interface;</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;}</div><div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a2e272837476aeb77658b7e5301cc5f26"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a2e272837476aeb77658b7e5301cc5f26">thread_user_interface_tl</a></div><div class="ttdeci">static struct ast_threadstorage thread_user_interface_tl</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02979">main/utils.c:2979</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab1f08732bd824bcae476843187180755"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab1f08732bd824bcae476843187180755">&#9670;&nbsp;</a></span>ast_to_camel_case_delim()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_to_camel_case_delim </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>delim</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02149">2149</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00401">ast_copy_string()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>
<div class="fragment"><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;{</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;   <span class="keywordtype">char</span> *res = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(s);</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;   <span class="keywordtype">char</span> *front, *back, *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = res;</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;   <span class="keywordtype">int</span> size;</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   front = strtok_r(buf, delim, &amp;back);</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;   <span class="keywordflow">while</span> (front) {</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;      size = strlen(front);</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      *front = toupper(*front);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buf, front, size + 1);</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      buf += size;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;      front = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, delim, &amp;back);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;   }</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;}</div><div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac0d2fe097c3b32d8f9db56f35812e694"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0d2fe097c3b32d8f9db56f35812e694">&#9670;&nbsp;</a></span>ast_true()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_true </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>val</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Make sure something is true. Determine if a string containing a boolean value is "true". This function checks to see whether a string passed to it is an indication of an "true" value. It checks to see if the string is "yes", "true", "y", "t", "on" or "1". </p>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>if val is a NULL pointer. </td></tr>
    <tr><td class="paramname">-1</td><td>if "true". </td></tr>
    <tr><td class="paramname">0</td><td>otherwise. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">1951</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l02077">__ast_http_load()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l09144">__init_manager()</a>, <a class="el" href="../../d4/dfb/misdn__config_8c_source.html#l00952">_parse()</a>, <a class="el" href="../../d2/d3c/func__curl_8c_source.html#l00335">acf_curlopt_write()</a>, <a class="el" href="../../d0/d60/res__fax_8c_source.html#l04601">acf_faxopt_write()</a>, <a class="el" href="../../da/d92/res__odbc__transaction_8c_source.html#l00390">acf_transaction_write()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02605">action_agent_logoff()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l05723">action_originate()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04777">action_status()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l04102">action_updateconfig()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l13680">actual_load_config()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l02040">agent_login_channel_config()</a>, <a class="el" href="../../dc/d40/conf__config__parser_8c_source.html#l02082">announce_user_count_all_handler()</a>, <a class="el" href="../../d0/da6/aoc_8c_source.html#l01355">aoc_cli_debug_enable()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l02806">apply_general_options()</a>, <a class="el" href="../../dc/df4/app__voicemail_8c_source.html#l01252">apply_option()</a>, <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l00457">ast_ari_bridges_add_channel_cb()</a>, <a class="el" href="../../d6/dcd/res__ari__bridges_8c_source.html#l01382">ast_ari_bridges_record_cb()</a>, <a class="el" href="../../de/daa/res__ari__channels_8c_source.html#l02196">ast_ari_channels_record_cb()</a>, <a class="el" href="../../d6/d87/res__ari__events_8c_source.html#l00055">ast_ari_events_event_websocket_ws_attempted_cb()</a>, <a class="el" href="../../d6/d87/res__ari__events_8c_source.html#l00144">ast_ari_events_event_websocket_ws_established_cb()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00886">ast_bridge_timelimit()</a>, <a class="el" href="../../d3/d1d/abstract__jb_8c_source.html#l00545">ast_jb_read_conf()</a>, <a class="el" href="../../da/dbe/rtp__engine_8c_source.html#l03020">ast_rtp_dtls_cfg_parse()</a>, <a class="el" href="../../d8/d4f/test__config_8c_source.html#l01482">AST_TEST_DEFINE()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00875">ast_tls_read_conf()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l01813">autopause2int()</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l01538">bool_handler_fn()</a>, <a class="el" href="../../d6/dc8/config__options_8c_source.html#l01549">boolflag_handler_fn()</a>, <a class="el" href="../../d7/dc3/res__calendar_8c_source.html#l00400">build_calendar()</a>, <a class="el" href="../../d1/d6d/chan__unistim_8c_source.html#l06501">build_device()</a>, <a class="el" href="../../d0/dd6/chan__mgcp_8c_source.html#l04016">build_gateway()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l12794">build_peer()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13119">build_user()</a>, <a class="el" href="../../d7/dd2/func__cdr_8c_source.html#l00400">cdr_prop_write_callback()</a>, <a class="el" href="../../d0/d73/res__pjsip__logger_8c_source.html#l00514">check_debug()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l04529">client_bitfield_handler()</a>, <a class="el" href="../../d0/d80/chan__skinny_8c_source.html#l07770">config_parse_variables()</a>, <a class="el" href="../../d9/d1a/app__skel_8c_source.html#l00356">custom_bitfield_handler()</a>, <a class="el" href="../../d8/d4f/test__config_8c_source.html#l01433">customopt_handler()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l13729">dahdi_cc_callback()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l16163">dahdi_set_dnd()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l05667">destroy_all_channels()</a>, <a class="el" href="../../d0/d5d/dnsmgr_8c_source.html#l00450">do_reload()</a>, <a class="el" href="../../dc/dec/res_2ari_2config_8c_source.html#l00049">encoding_format_handler()</a>, <a class="el" href="../../d5/dd6/app__festival_8c_source.html#l00279">festival_exec()</a>, <a class="el" href="../../d9/d3d/func__channel_8c_source.html#l00470">func_channel_write_real()</a>, <a class="el" href="../../db/d8e/res__mutestream_8c_source.html#l00154">func_mute_write()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l03730">function_ooh323_write()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l01766">get_encrypt_methods()</a>, <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l04506">global_bitfield_handler()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l03537">handle_clear_alarms()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31120">handle_common_options()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l01294">handle_logger_set_level()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10896">handle_queue_set_member_ringinuse()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l31075">handle_t38_options()</a>, <a class="el" href="../../dc/dcf/func__periodic__hook_8c_source.html#l00418">hook_write()</a>, <a class="el" href="../../d1/d22/logger_8c_source.html#l00710">init_logger_chain()</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l01637">internal_feature_write()</a>, <a class="el" href="../../d9/d63/res__pjsip__config__wizard_8c_source.html#l00353">is_variable_true()</a>, <a class="el" href="../../de/dc5/options_8c_source.html#l00210">load_asterisk_conf()</a>, <a class="el" href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00868">load_config()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l05788">load_config_meetme()</a>, <a class="el" href="../../d0/db6/app__mysql_8c_source.html#l00633">load_module()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l01972">load_moh_classes()</a>, <a class="el" href="../../d7/d4a/res__odbc_8c_source.html#l00564">load_odbc_config()</a>, <a class="el" href="../../d3/d96/loader_8c_source.html#l02214">loader_config_init()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10222">manager_add_queue_member()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l01195">manager_dialplan_extension_add()</a>, <a class="el" href="../../d8/d93/app__mixmonitor_8c_source.html#l01406">manager_mute_mixmonitor()</a>, <a class="el" href="../../db/d8e/res__mutestream_8c_source.html#l00170">manager_mutestream()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10333">manager_pause_queue_member()</a>, <a class="el" href="../../dc/d37/app__senddtmf_8c_source.html#l00148">manager_play_dtmf()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l10457">manager_queue_member_ringinuse()</a>, <a class="el" href="../../d3/d51/chan__mobile_8c_source.html#l04364">mbl_load_adapter()</a>, <a class="el" href="../../d3/d51/chan__mobile_8c_source.html#l04480">mbl_load_device()</a>, <a class="el" href="../../de/dfe/app__minivm_8c_source.html#l00753">message_template_build()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l06824">misdn_answer()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l01111">moh_parse_options()</a>, <a class="el" href="../../d0/d29/cdr__mysql_8c_source.html#l00597">my_load_module()</a>, <a class="el" href="../../d6/dbf/res__config__sqlite3_8c_source.html#l00388">new_realtime_sqlite3_db()</a>, <a class="el" href="../../d8/d56/cdr__odbc_8c_source.html#l00193">odbc_load_module()</a>, <a class="el" href="../../d6/d27/app__osplookup_8c_source.html#l02955">osp_load()</a>, <a class="el" href="../../d6/d27/app__osplookup_8c_source.html#l02337">osplookup_exec()</a>, <a class="el" href="../../dc/d23/codec__speex_8c_source.html#l00585">parse_config()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03101">parse_empty_options()</a>, <a class="el" href="../../d9/dd4/pbx__spool_8c_source.html#l00177">parse_line()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00728">parse_playtone()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01436">pbx_builtin_saycharacters()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01380">pbx_builtin_saycharacters_case()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01340">pbx_builtin_saydigits()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01360">pbx_builtin_saymoney()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01293">pbx_builtin_saynumber()</a>, <a class="el" href="../../df/d1d/pbx__builtins_8c_source.html#l01456">pbx_builtin_sayphonetic()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l01674">pbx_load_config()</a>, <a class="el" href="../../dd/d9a/pbx__config_8c_source.html#l01977">pbx_load_users()</a>, <a class="el" href="../../de/dfc/pjsip_2dialplan__functions_8c_source.html#l01628">pjsip_acf_moh_passthrough_write()</a>, <a class="el" href="../../d0/d73/res__pjsip__logger_8c_source.html#l00425">pjsip_set_logger_verbose()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00175">prack_handler()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l17900">process_dahdi()</a>, <a class="el" href="../../d1/d97/chan__dahdi_8c_source.html#l17728">process_echocancel()</a>, <a class="el" href="../../de/d1b/cel__pgsql_8c_source.html#l00458">process_my_load_module()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l00348">profile_set_param()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l09128">queue_rules_set_global_params()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l09212">queue_set_global_params()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03144">queue_set_param()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00461">realtime_directory()</a>, <a class="el" href="../../d7/d9b/chan__misdn_8c_source.html#l11538">reload()</a>, <a class="el" href="../../d7/d49/chan__ooh323_8c_source.html#l02813">reload_config()</a>, <a class="el" href="../../dd/d55/app__followme_8c_source.html#l00404">reload_followme()</a>, <a class="el" href="../../d7/d1f/plc_8c_source.html#l00252">reload_module()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l09244">reload_single_member()</a>, <a class="el" href="../../da/dfb/app__queue_8c_source.html#l03392">rt_handle_member_record()</a>, <a class="el" href="../../d9/d21/res__rtp__asterisk_8c_source.html#l09346">rtp_reload()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l04112">run_agi()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03434">run_startup_commands()</a>, <a class="el" href="../../da/df8/app__sayunixtime_8c_source.html#l00118">sayunixtime_exec()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00717">search_directory()</a>, <a class="el" href="../../d0/de2/app__directory_8c_source.html#l00606">search_directory_sub()</a>, <a class="el" href="../../d3/d4e/chan__console_8c_source.html#l01174">set_active()</a>, <a class="el" href="../../d5/dff/chan__iax2_8c_source.html#l13476">set_config()</a>, <a class="el" href="../../df/d44/app__meetme_8c_source.html#l07855">sla_load_config()</a>, <a class="el" href="../../d8/d96/res__smdi_8c_source.html#l00952">smdi_load()</a>, <a class="el" href="../../d2/dea/res__sorcery__config_8c_source.html#l00460">sorcery_config_open()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l02146">sorcery_memory_cache_ami_stale_object()</a>, <a class="el" href="../../d7/d30/res__sorcery__memory__cache_8c_source.html#l01508">sorcery_memory_cache_open()</a>, <a class="el" href="../../da/d22/func__speex_8c_source.html#l00196">speex_write()</a>, <a class="el" href="../../d1/d71/app__stack_8c_source.html#l00829">stackpeek_read()</a>, <a class="el" href="../../d2/d1b/res__monitor_8c_source.html#l00808">start_monitor_action()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l02152">strings_to_mask()</a>, <a class="el" href="../../d0/d2a/cdr__tds_8c_source.html#l00481">tds_load_module()</a>, <a class="el" href="../../dc/df6/pjsip__configuration_8c_source.html#l00209">timers_handler()</a>, <a class="el" href="../../d3/d17/config__transport_8c_source.html#l01050">transport_tls_bool_handler()</a>, <a class="el" href="../../de/d71/features__config_8c_source.html#l00876">xfer_set()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l00932">xmldoc_get_syntax_cmd()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l01090">xmldoc_get_syntax_config_object()</a>, <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l00638">xmldoc_get_syntax_fun()</a>, and <a class="el" href="../../d8/d2f/xmldoc_8c_source.html#l01038">xmldoc_get_syntax_manager()</a>.</p>
<div class="fragment"><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;{</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(s))</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;   <span class="comment">/* Determine if this is a true value */</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(s, <span class="stringliteral">&quot;yes&quot;</span>) ||</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;true&quot;</span>) ||</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;y&quot;</span>) ||</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;t&quot;</span>) ||</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;1&quot;</span>) ||</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;       !strcasecmp(s, <span class="stringliteral">&quot;on&quot;</span>))</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;}</div><div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a97e1bb8fbd7a103212789e87e7ed6073"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a97e1bb8fbd7a103212789e87e7ed6073">&#9670;&nbsp;</a></span>ast_tvadd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval ast_tvadd </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the sum of two timevals a + b. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02005">2005</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">b</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01985">ONE_MILLION</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01990">tvfix()</a>.</p>
<div class="fragment"><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;{</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   <span class="comment">/* consistency checks to guarantee usec in 0..999999 */</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;   <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> = <a class="code" href="../../de/d1f/main_2utils_8c.html#ae011d19bb4f1d706eecb7e2b0c7ad581">tvfix</a>(<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>);</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;   <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a> = <a class="code" href="../../de/d1f/main_2utils_8c.html#ae011d19bb4f1d706eecb7e2b0c7ad581">tvfix</a>(<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>);</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;   <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_sec += <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>.tv_sec;</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;   <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec += <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>.tv_usec;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec &gt;= <a class="code" href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a>) {</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_sec++;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec -= <a class="code" href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a>;</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   }</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a6a146c1b2155b03eb2ffa3f4ba755034"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a></div><div class="ttdeci">#define ONE_MILLION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01985">main/utils.c:1985</a></div></div>
<div class="ttc" id="main_2utils_8c_html_ae011d19bb4f1d706eecb7e2b0c7ad581"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae011d19bb4f1d706eecb7e2b0c7ad581">tvfix</a></div><div class="ttdeci">static struct timeval tvfix(struct timeval a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01990">main/utils.c:1990</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa13b651c18bc6004cab21ac041d44dd8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa13b651c18bc6004cab21ac041d44dd8">&#9670;&nbsp;</a></span>ast_tvsub()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct timeval ast_tvsub </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>a</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>b</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns the difference of two timevals a - b. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02019">2019</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">b</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01985">ONE_MILLION</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01990">tvfix()</a>.</p>
<div class="fragment"><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;{</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;   <span class="comment">/* consistency checks to guarantee usec in 0..999999 */</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;   <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> = <a class="code" href="../../de/d1f/main_2utils_8c.html#ae011d19bb4f1d706eecb7e2b0c7ad581">tvfix</a>(<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>);</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;   <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a> = <a class="code" href="../../de/d1f/main_2utils_8c.html#ae011d19bb4f1d706eecb7e2b0c7ad581">tvfix</a>(<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>);</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;   <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_sec -= <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>.tv_sec;</div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec -= <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a>.tv_usec;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec &lt; 0) {</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_sec-- ;</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec += <a class="code" href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a>;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;   }</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>;</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a6a146c1b2155b03eb2ffa3f4ba755034"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a></div><div class="ttdeci">#define ONE_MILLION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01985">main/utils.c:1985</a></div></div>
<div class="ttc" id="main_2utils_8c_html_ae011d19bb4f1d706eecb7e2b0c7ad581"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae011d19bb4f1d706eecb7e2b0c7ad581">tvfix</a></div><div class="ttdeci">static struct timeval tvfix(struct timeval a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01990">main/utils.c:1990</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a025ede890af287961d3a98d0e634a62b"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a025ede890af287961d3a98d0e634a62b">b</a></div><div class="ttdeci">static struct test_val b</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00047">test_linkedlists.c:47</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3115ebeab1be5667662faf6d6a54894f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3115ebeab1be5667662faf6d6a54894f">&#9670;&nbsp;</a></span>ast_unescape_c()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_unescape_c </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Convert some C escape sequences. </p>
<pre class="fragment">(\b\f\n\r\t) </pre><p> into the equivalent characters. The string to be converted (will be modified). </p><dl class="section return"><dt>Returns</dt><dd>The converted string. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01735">1735</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02390">ast_parse_digest()</a>.</p>
<div class="fragment"><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;{</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>, *ret, *dst;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   <span class="keywordflow">if</span> (src == <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <span class="keywordflow">for</span> (ret = dst = src; (c = *src++); *dst++ = <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> ) {</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;      <span class="keywordflow">if</span> (c != <span class="charliteral">&#39;\\&#39;</span>)</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;         <span class="keywordflow">continue</span>;   <span class="comment">/* copy char at the end of the loop */</span></div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;      <span class="keywordflow">switch</span> ((c = *src++)) {</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;\0&#39;</span>:  <span class="comment">/* special, trailing &#39;\&#39; */</span></div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;         c = <span class="charliteral">&#39;\\&#39;</span>;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:   <span class="comment">/* backspace */</span></div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;         c = <span class="charliteral">&#39;\b&#39;</span>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:   <span class="comment">/* form feed */</span></div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;         c = <span class="charliteral">&#39;\f&#39;</span>;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;         c = <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;         c = <span class="charliteral">&#39;\r&#39;</span>;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;         c = <span class="charliteral">&#39;\t&#39;</span>;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;      }</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;      <span class="comment">/* default, use the char literally */</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;   }</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;   *dst = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;}</div><div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a06a3aadc32e947d3bffa610aa7c74065"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06a3aadc32e947d3bffa610aa7c74065">&#9670;&nbsp;</a></span>ast_unescape_quoted()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_unescape_quoted </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>quote_str</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unescape quotes in a string. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">quote_str</td><td>The string with quotes to be unescaped</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This function mutates the passed-in string. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00696">696</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dc/dd5/callerid_8c_source.html#l01008">ast_callerid_parse()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01656">ast_strsep()</a>, and <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00532">AST_TEST_DEFINE()</a>.</p>
<div class="fragment"><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;{</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <span class="keywordtype">int</span> esc_pos;</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   <span class="keywordtype">int</span> unesc_pos;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;   <span class="keywordtype">int</span> quote_str_len = strlen(quote_str);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;   <span class="keywordflow">for</span> (esc_pos = 0, unesc_pos = 0;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      esc_pos &lt; quote_str_len;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      esc_pos++, unesc_pos++) {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;      <span class="keywordflow">if</span> (quote_str[esc_pos] == <span class="charliteral">&#39;\\&#39;</span>) {</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;         <span class="comment">/* at least one more char and current is \\ */</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;         esc_pos++;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;         <span class="keywordflow">if</span> (esc_pos &gt;= quote_str_len) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;         }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;      }</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;      quote_str[unesc_pos] = quote_str[esc_pos];</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;   }</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;   quote_str[unesc_pos] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="a20ca5b03887fb1ecf589590182f4a9aa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a20ca5b03887fb1ecf589590182f4a9aa">&#9670;&nbsp;</a></span>ast_unescape_semicolon()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_unescape_semicolon </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Strip backslash for "escaped" semicolons, the string to be stripped (will be modified). </p>
<dl class="section return"><dt>Returns</dt><dd>The stripped string. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01716">1716</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l22894">sip_cli_notify()</a>.</p>
<div class="fragment"><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;{</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;   <span class="keywordtype">char</span> *e;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   <span class="keywordtype">char</span> *work = s;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;   <span class="keywordflow">while</span> ((e = strchr(work, <span class="charliteral">&#39;;&#39;</span>))) {</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;      <span class="keywordflow">if</span> ((e &gt; work) &amp;&amp; (*(e-1) == <span class="charliteral">&#39;\\&#39;</span>)) {</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;         memmove(e - 1, e, strlen(e) + 1);</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;         work = e;</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;         work = e + 1;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      }</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   }</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="keywordflow">return</span> s;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;}</div></div><!-- fragment -->
</div>
</div>
<a id="ad9d3c7c4cc262a1205c833a95fa65a6d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9d3c7c4cc262a1205c833a95fa65a6d">&#9670;&nbsp;</a></span>ast_uri_decode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_uri_decode </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a>&#160;</td>
          <td class="paramname"><em>spec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Decode URI, URN, URL (overwrite string) </p>
<dl class="section note"><dt>Note</dt><dd>The ast_uri_http_legacy decode spec flag will cause this function to decode '+' as ' '.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">s</td><td>string to be decoded </td></tr>
    <tr><td class="paramname">spec</td><td>flags describing how the decoding should be performed </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00616">616</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00342">AST_URI_LEGACY_SPACE</a>, and <a class="el" href="../../de/d1e/bt__open_8c_source.html#l00389">tmp()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3c/func__curl_8c_source.html#l00663">acf_curl_helper()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00491">ast_ari_invoke()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01353">ast_http_get_post_vars()</a>, <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00048">AST_TEST_DEFINE()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00515">config_curl()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18508">get_destination()</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l00905">get_name_and_number()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18812">get_refer_info()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26347">handle_request_invite()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23617">parse_moved_contact()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00061">realtime_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00132">realtime_multi_curl()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08161">sip_new()</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l02153">sip_uri_cmp()</a>, and <a class="el" href="../../d2/d1a/func__uri_8c_source.html#l00087">uridecode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;{</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="keywordtype">char</span> *o;</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;   <span class="keywordflow">for</span> (o = s; *s; s++, o++) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;spec, <a class="code" href="../../d5/d60/utils_8h.html#a021aaefbd5124ef9375a0449706faf8a">AST_URI_LEGACY_SPACE</a>) &amp;&amp; *s == <span class="charliteral">&#39;+&#39;</span>) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;         <span class="comment">/* legacy mode, decode &#39;+&#39; as space */</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;         *o = <span class="charliteral">&#39; &#39;</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (*s == <span class="charliteral">&#39;%&#39;</span> &amp;&amp; s[1] != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; s[2] != <span class="charliteral">&#39;\0&#39;</span> &amp;&amp; sscanf(s + 1, <span class="stringliteral">&quot;%2x&quot;</span>, &amp;tmp) == 1) {</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;         <span class="comment">/* have &#39;%&#39;, two chars and correct parsing */</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;         *o = <a class="code" href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;         s += 2;  <span class="comment">/* Will be incremented once more when we break out */</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;      } <span class="keywordflow">else</span> <span class="comment">/* all other cases, just copy */</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         *o = *s;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;   }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   *o = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div><div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="bt__open_8c_html_a1cdd2bb1a9a71d3e1120100229315d67"><div class="ttname"><a href="../../de/d1e/bt__open_8c.html#a1cdd2bb1a9a71d3e1120100229315d67">tmp</a></div><div class="ttdeci">static int tmp()</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1e/bt__open_8c_source.html#l00389">bt_open.c:389</a></div></div>
<div class="ttc" id="utils_8h_html_a021aaefbd5124ef9375a0449706faf8a"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a021aaefbd5124ef9375a0449706faf8a">AST_URI_LEGACY_SPACE</a></div><div class="ttdeci">#define AST_URI_LEGACY_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00342">utils.h:342</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6c73f6351bc9ca577360cf4af2231c3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c73f6351bc9ca577360cf4af2231c3d">&#9670;&nbsp;</a></span>ast_uri_encode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_uri_encode </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>outbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>buflen</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a>&#160;</td>
          <td class="paramname"><em>spec</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Turn text string to URI-encoded XX version. </p>
<p>This function encodes characters according to the rules presented in RFC 2396 and/or RFC 3261 section 19.1.2 and section 25.1.</p>
<p>Outbuf needs to have more memory allocated than the instring to have room for the expansion. Every byte that is converted is replaced by three ASCII characters.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>string to be converted </td></tr>
    <tr><td class="paramname">outbuf</td><td>resulting encoded string </td></tr>
    <tr><td class="paramname">buflen</td><td>size of output buffer </td></tr>
    <tr><td class="paramname">spec</td><td>flags describing how the encoding should be performed </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>a pointer to the uri encoded string </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00577">577</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00339">AST_URI_ALPHANUM</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00342">AST_URI_LEGACY_SPACE</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00340">AST_URI_MARK</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00344">AST_URI_SIP_USER_UNRESERVED</a>, <a class="el" href="../../d6/d47/utils_2frame_8c_source.html#l00033">out</a>, and <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00071">string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14653">add_diversion()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l12996">add_rpid()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00748">ast_ari_channels_record()</a>, <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00048">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14385">build_contact()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00515">config_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00415">destroy_curl()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14410">initreqprep()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00061">realtime_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00132">realtime_multi_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00464">require_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00354">store_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00281">update2_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00232">update_curl()</a>, and <a class="el" href="../../d2/d1a/func__uri_8c_source.html#l00073">uriencode()</a>.</p>
<div class="fragment"><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;{</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *ptr  = <a class="code" href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a>; <span class="comment">/* Start with the string */</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a> = outbuf;</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *mark = <span class="stringliteral">&quot;-_.!~*&#39;()&quot;</span>; <span class="comment">/* no encode set, RFC 2396 section 2.3, RFC 3261 sec 25 */</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *user_unreserved = <span class="stringliteral">&quot;&amp;=+$,;?/&quot;</span>; <span class="comment">/* user-unreserved set, RFC 3261 sec 25 */</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;   <span class="keywordflow">while</span> (*ptr &amp;&amp; out - outbuf &lt; buflen - 1) {</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;spec, <a class="code" href="../../d5/d60/utils_8h.html#a021aaefbd5124ef9375a0449706faf8a">AST_URI_LEGACY_SPACE</a>) &amp;&amp; *ptr == <span class="charliteral">&#39; &#39;</span>) {</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;         <span class="comment">/* for legacy encoding, encode spaces as &#39;+&#39; */</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;         *out = <span class="charliteral">&#39;+&#39;</span>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;         out++;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;spec, <a class="code" href="../../d5/d60/utils_8h.html#a0d3f65c5a6c7c4cf9c479d9069d42066">AST_URI_MARK</a>)</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            &amp;&amp; strchr(mark, *ptr))</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;         &amp;&amp; !(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;spec, <a class="code" href="../../d5/d60/utils_8h.html#a3ec52f44e78adb63b7e4d07206511096">AST_URI_ALPHANUM</a>)</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            &amp;&amp; ((*ptr &gt;= <span class="charliteral">&#39;0&#39;</span> &amp;&amp; *ptr &lt;= <span class="charliteral">&#39;9&#39;</span>)</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            || (*ptr &gt;= <span class="charliteral">&#39;A&#39;</span> &amp;&amp; *ptr &lt;= <span class="charliteral">&#39;Z&#39;</span>)</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;            || (*ptr &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; *ptr &lt;= <span class="charliteral">&#39;z&#39;</span>)))</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;         &amp;&amp; !(<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;spec, <a class="code" href="../../d5/d60/utils_8h.html#a2d4c792f38355851799a810dec6abd4c">AST_URI_SIP_USER_UNRESERVED</a>)</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            &amp;&amp; strchr(user_unreserved, *ptr))) {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;         <span class="keywordflow">if</span> (out - outbuf &gt;= buflen - 3) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;         }</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;         out += sprintf(out, <span class="stringliteral">&quot;%%%02hhX&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>) *ptr);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;         *out = *ptr;   <span class="comment">/* Continue copying the string */</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;         out++;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      }</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;      ptr++;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   }</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keywordflow">if</span> (buflen) {</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;      *out = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   }</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <span class="keywordflow">return</span> outbuf;</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;}</div><div class="ttc" id="utils_8h_html_a3ec52f44e78adb63b7e4d07206511096"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a3ec52f44e78adb63b7e4d07206511096">AST_URI_ALPHANUM</a></div><div class="ttdeci">#define AST_URI_ALPHANUM</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00339">utils.h:339</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="presencestate_8c_html_ae1adbce218e7a9d09164012443191d24"><div class="ttname"><a href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a></div><div class="ttdeci">const char * string</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00071">presencestate.c:71</a></div></div>
<div class="ttc" id="utils_8h_html_a0d3f65c5a6c7c4cf9c479d9069d42066"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a0d3f65c5a6c7c4cf9c479d9069d42066">AST_URI_MARK</a></div><div class="ttdeci">#define AST_URI_MARK</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00340">utils.h:340</a></div></div>
<div class="ttc" id="utils_8h_html_a2d4c792f38355851799a810dec6abd4c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a2d4c792f38355851799a810dec6abd4c">AST_URI_SIP_USER_UNRESERVED</a></div><div class="ttdeci">#define AST_URI_SIP_USER_UNRESERVED</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00344">utils.h:344</a></div></div>
<div class="ttc" id="utils_2frame_8c_html_a48bc11919b2752df9d14ce89557cfb25"><div class="ttname"><a href="../../d6/d47/utils_2frame_8c.html#a48bc11919b2752df9d14ce89557cfb25">out</a></div><div class="ttdeci">FILE * out</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d47/utils_2frame_8c_source.html#l00033">utils/frame.c:33</a></div></div>
<div class="ttc" id="utils_8h_html_a021aaefbd5124ef9375a0449706faf8a"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a021aaefbd5124ef9375a0449706faf8a">AST_URI_LEGACY_SPACE</a></div><div class="ttdeci">#define AST_URI_LEGACY_SPACE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00342">utils.h:342</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7f67fc7c9501569b338913c796d86c45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f67fc7c9501569b338913c796d86c45">&#9670;&nbsp;</a></span>ast_utils_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_utils_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02369">2369</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00265">ast_cli_register_multiple</a>, <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00019">ast_register_cleanup()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00538">base64_init()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02360">utils_shutdown()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d03/asterisk_8c_source.html#l03947">asterisk_daemon()</a>.</p>
<div class="fragment"><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;{</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a29aac26dfc884358b9b98aa7c89fee44">dev_urandom_fd</a> = open(<span class="stringliteral">&quot;/dev/urandom&quot;</span>, O_RDONLY);</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a7bc2df9f50343c9e3bf8b6200c709996">base64_init</a>();</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;<span class="preprocessor">#ifdef DEBUG_THREADS</span></div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;<span class="preprocessor">#if !defined(LOW_MEMORY)</span></div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(<a class="code" href="../../de/d1f/main_2utils_8c.html#a0a37d4de9660278d7ea9c8aee6c20f39">utils_cli</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../de/d1f/main_2utils_8c.html#a0a37d4de9660278d7ea9c8aee6c20f39">utils_cli</a>));</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../de/d1f/main_2utils_8c.html#a6f276043cbd97b244614b67790355751">utils_shutdown</a>);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a29aac26dfc884358b9b98aa7c89fee44"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a29aac26dfc884358b9b98aa7c89fee44">dev_urandom_fd</a></div><div class="ttdeci">static int dev_urandom_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00792">main/utils.c:792</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a7bc2df9f50343c9e3bf8b6200c709996"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a7bc2df9f50343c9e3bf8b6200c709996">base64_init</a></div><div class="ttdeci">static void base64_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00538">main/utils.c:538</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a6f276043cbd97b244614b67790355751"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a6f276043cbd97b244614b67790355751">utils_shutdown</a></div><div class="ttdeci">static void utils_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02360">main/utils.c:2360</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a0a37d4de9660278d7ea9c8aee6c20f39"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a0a37d4de9660278d7ea9c8aee6c20f39">utils_cli</a></div><div class="ttdeci">static struct ast_cli_entry utils_cli[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01369">main/utils.c:1369</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af8f188acb6f8ffce8ada48ce7784fe10"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8f188acb6f8ffce8ada48ce7784fe10">&#9670;&nbsp;</a></span>ast_utils_which()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* ast_utils_which </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>binary</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>fullpath</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>fullpath_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resolve a binary to a full pathname. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">binary</td><td>Name of the executable to resolve </td></tr>
    <tr><td class="paramname">fullpath</td><td>Buffer to hold the complete pathname </td></tr>
    <tr><td class="paramname">fullpath_size</td><td>Size of <em>fullpath</em> </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">NULL</td><td><em>binary</em> was not found or the environment variable PATH is not set </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><em>fullpath</em> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02522">2522</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>.</p>
<div class="fragment"><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;{</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *envPATH = getenv(<span class="stringliteral">&quot;PATH&quot;</span>);</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;   <span class="keywordtype">char</span> *tpath, *path;</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;   <span class="keyword">struct </span>stat unused;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;   <span class="keywordflow">if</span> (!envPATH) {</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   }</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;   tpath = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(envPATH);</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;   <span class="keywordflow">while</span> ((path = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tpath, <span class="stringliteral">&quot;:&quot;</span>))) {</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;      snprintf(fullpath, fullpath_size, <span class="stringliteral">&quot;%s/%s&quot;</span>, path, binary);</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      <span class="keywordflow">if</span> (!stat(fullpath, &amp;unused)) {</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;         <span class="keywordflow">return</span> fullpath;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      }</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;   }</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a60404ef44696316455e79c3a002cc71e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a60404ef44696316455e79c3a002cc71e">&#9670;&nbsp;</a></span>ast_wait_for_input()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_wait_for_input </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01519">1519</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dfb/poll-compat_8h_source.html#l00088">ast_poll</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d4/d10/manager_8c_source.html#l04206">action_waitevent()</a>, <a class="el" href="../../d8/d44/ari__websockets_8c_source.html#l00097">ast_ari_websocket_session_read()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00089">ast_iostream_wait_for_input()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00374">ast_iostream_write()</a>, <a class="el" href="../../dc/d9b/tcptls_8c_source.html#l00280">ast_tcptls_server_root()</a>, <a class="el" href="../../d8/d9d/res__timing__dahdi_8c_source.html#l00175">dahdi_test_timer()</a>, <a class="el" href="../../d4/d10/manager_8c_source.html#l06735">get_input()</a>, <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00155">iostream_read()</a>, <a class="el" href="../../d3/d97/res__musiconhold_8c_source.html#l01893">moh_class_destructor()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l02918">sip_tcptls_read()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l02678">sip_websocket_callback()</a>, and <a class="el" href="../../d0/d5c/res__resolver__unbound_8c_source.html#l00195">unbound_resolver_thread()</a>.</p>
<div class="fragment"><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;{</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;   <span class="keyword">struct </span>pollfd pfd[1];</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;   memset(pfd, 0, <span class="keyword">sizeof</span>(pfd));</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;   pfd[0].fd = fd;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;   pfd[0].events = POLLIN | POLLPRI;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(pfd, 1, ms);</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;}</div><div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a80d3bf34cef53be40b876a20508fe6b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80d3bf34cef53be40b876a20508fe6b6">&#9670;&nbsp;</a></span>ast_wait_for_output()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_wait_for_output </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>ms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01529">1529</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d4/dfb/poll-compat_8h_source.html#l00088">ast_poll</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00374">ast_iostream_write()</a>, and <a class="el" href="../../d1/dc8/iostream_8c_source.html#l00155">iostream_read()</a>.</p>
<div class="fragment"><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;{</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;   <span class="keyword">struct </span>pollfd pfd[1];</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;   memset(pfd, 0, <span class="keyword">sizeof</span>(pfd));</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;   pfd[0].fd = fd;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;   pfd[0].events = POLLOUT;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(pfd, 1, ms);</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;}</div><div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2d3d77f853919127cf3789120f1be066"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d3d77f853919127cf3789120f1be066">&#9670;&nbsp;</a></span>ast_xml_escape()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_xml_escape </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>outbuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buflen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Escape reserved characters for use in XML. </p>
<p>ast_xml_escape If <em>outbuf</em> is too short, the output string will be truncated. Regardless, the output will always be null terminated.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">string</td><td>String to be converted </td></tr>
    <tr><td class="paramname">outbuf</td><td>Resulting encoded string </td></tr>
    <tr><td class="paramname">buflen</td><td>Size of output buffer </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>0 for success </dd>
<dd>
-1 if buflen is too short. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00718">718</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">end</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00259">entity</a>, <a class="el" href="../../d9/d1e/func__strings_8c_source.html#l01344">len()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d07/presencestate_8c_source.html#l00071">string</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d43/http_8c_source.html#l00567">ast_http_create_response()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l15193">state_notify_build_xml()</a>, and <a class="el" href="../../d6/d7a/test__xml__escape_8c_source.html#l00041">test_xml()</a>.</p>
<div class="fragment"><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;{</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   <span class="keywordtype">char</span> *dst = outbuf;</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a> = outbuf + buflen - 1; <span class="comment">/* save one for the null terminator */</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <span class="comment">/* Handle the case for the empty output buffer */</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   <span class="keywordflow">if</span> (buflen == 0) {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   }</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   <span class="comment">/* Escaping rules from http://www.w3.org/TR/REC-xml/#syntax */</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;   <span class="comment">/* This also prevents partial entities at the end of a string */</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keywordflow">while</span> (*<span class="keywordtype">string</span> &amp;&amp; dst &lt; end) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dfe/isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = 0;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;      <span class="keywordflow">switch</span> (*<span class="keywordtype">string</span>) {</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&lt;&#39;</span>:</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;         entity = <span class="stringliteral">&quot;&amp;lt;&quot;</span>;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;         len = 4;</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&amp;&#39;</span>:</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;         entity = <span class="stringliteral">&quot;&amp;amp;&quot;</span>;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;         len = 5;</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&gt;&#39;</span>:</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;         <span class="comment">/* necessary if ]]&gt; is in the string; easier to escape them all */</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         entity = <span class="stringliteral">&quot;&amp;gt;&quot;</span>;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;         len = 4;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;\&#39;&#39;</span>:</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;         <span class="comment">/* necessary in single-quoted strings; easier to escape them all */</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;         entity = <span class="stringliteral">&quot;&amp;apos;&quot;</span>;</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;         len = 6;</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;&quot;&#39;</span>:</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;         <span class="comment">/* necessary in double-quoted strings; easier to escape them all */</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;         entity = <span class="stringliteral">&quot;&amp;quot;&quot;</span>;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;         len = 6;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;         *dst++ = *<span class="keywordtype">string</span>++;</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      }</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keywordflow">if</span> (entity) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(len == strlen(entity));</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;         <span class="keywordflow">if</span> (end - dst &lt; len) {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;            <span class="comment">/* no room for the entity; stop */</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;         }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;         <span class="comment">/* just checked for length; strcpy is fine */</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;         strcpy(dst, entity);</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;         dst += <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;         ++<a class="code" href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a>;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      }</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   }</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <span class="comment">/* Write null terminator */</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   *dst = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   <span class="comment">/* If any chars are left in string, return failure */</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <span class="keywordflow">return</span> *<span class="keywordtype">string</span> == <span class="charliteral">&#39;\0&#39;</span> ? 0 : -1;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;}</div><div class="ttc" id="isdn__lib_8c_html_ad4e4601988acb4a95ecd1ec380359ae5"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ad4e4601988acb4a95ecd1ec380359ae5">entity</a></div><div class="ttdeci">static int entity</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00259">isdn_lib.c:259</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="presencestate_8c_html_ae1adbce218e7a9d09164012443191d24"><div class="ttname"><a href="../../d5/d07/presencestate_8c.html#ae1adbce218e7a9d09164012443191d24">string</a></div><div class="ttdeci">const char * string</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d07/presencestate_8c_source.html#l00071">presencestate.c:71</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7bc2df9f50343c9e3bf8b6200c709996"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7bc2df9f50343c9e3bf8b6200c709996">&#9670;&nbsp;</a></span>base64_init()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void base64_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00538">538</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00080">b2a</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00081">b2a_url</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00078">base64</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00079">base64url</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02369">ast_utils_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;{</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;   memset(<a class="code" href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a>, -1, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a>));</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   memset(<a class="code" href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a>, -1, <span class="keyword">sizeof</span>(<a class="code" href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a>));</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <span class="comment">/* Initialize base-64 Conversion table */</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; 26; x++) {</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;      <span class="comment">/* A-Z */</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;      <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[x] = <span class="charliteral">&#39;A&#39;</span> + x;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;      <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[x] = <span class="charliteral">&#39;A&#39;</span> + x;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;      <a class="code" href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a>[<span class="charliteral">&#39;A&#39;</span> + x] = x;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;      <a class="code" href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a>[<span class="charliteral">&#39;A&#39;</span> + x] = x;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;      <span class="comment">/* a-z */</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[x + 26] = <span class="charliteral">&#39;a&#39;</span> + x;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;      <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[x + 26] = <span class="charliteral">&#39;a&#39;</span> + x;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;      <a class="code" href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a>[<span class="charliteral">&#39;a&#39;</span> + x] = x + 26;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;      <a class="code" href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a>[<span class="charliteral">&#39;a&#39;</span> + x] = x + 26;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;      <span class="comment">/* 0-9 */</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;      <span class="keywordflow">if</span> (x &lt; 10) {</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;         <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[x + 52] = <span class="charliteral">&#39;0&#39;</span> + x;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;         <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[x + 52] = <span class="charliteral">&#39;0&#39;</span> + x;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;         <a class="code" href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a>[<span class="charliteral">&#39;0&#39;</span> + x] = x + 52;</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;         <a class="code" href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a>[<span class="charliteral">&#39;0&#39;</span> + x] = x + 52;</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      }</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[62] = <span class="charliteral">&#39;+&#39;</span>;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a>[63] = <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[62] = <span class="charliteral">&#39;-&#39;</span>;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a>[63] = <span class="charliteral">&#39;_&#39;</span>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a>[(int)<span class="charliteral">&#39;+&#39;</span>] = 62;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a>[(int)<span class="charliteral">&#39;/&#39;</span>] = 63;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a>[(int)<span class="charliteral">&#39;-&#39;</span>] = 62;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a>[(int)<span class="charliteral">&#39;_&#39;</span>] = 63;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_aaea12600bd0250b269b9061e6ba49dec"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#aaea12600bd0250b269b9061e6ba49dec">b2a_url</a></div><div class="ttdeci">static char b2a_url[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00081">main/utils.c:81</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a833369687dfc95492b2d5ef4e82c892f"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a833369687dfc95492b2d5ef4e82c892f">b2a</a></div><div class="ttdeci">static char b2a[256]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00080">main/utils.c:80</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a22f268341ef4b7675ce09044962d9046"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a22f268341ef4b7675ce09044962d9046">base64url</a></div><div class="ttdeci">static char base64url[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00079">main/utils.c:79</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a094cd85754f67592588ab5a0636cf0ea"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a094cd85754f67592588ab5a0636cf0ea">base64</a></div><div class="ttdeci">static char base64[64]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00078">main/utils.c:78</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a763d9f2734d56e19a6de3b461a396a1a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a763d9f2734d56e19a6de3b461a396a1a">&#9670;&nbsp;</a></span>dummy_start()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void* dummy_start </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01394">1394</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02504">ast_get_tid()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00077">AST_MUTEX_KIND</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00414">ast_register_thread()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../dc/d7d/threadstorage_8h_source.html#l00197">ast_threadstorage_get()</a>, <a class="el" href="../../d5/d03/asterisk_8c_source.html#l00430">ast_unregister_thread()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01383">thr_arg::data</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00853">lock_infos_lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00843">thr_lock_info::lwp</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00136">ast_mutex_info::mutex</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01384">thr_arg::name</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00626">pthread_mutex_init</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01382">thr_arg::start_routine</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00818">thr_lock_info::thread_id</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">thread_lock_info</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00820">thr_lock_info::thread_name</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01446">ast_pthread_create_stack()</a>.</p>
<div class="fragment"><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;{</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;   <span class="keywordtype">void</span> *ret;</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d42/structthr__arg.html">thr_arg</a> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a> = *((<span class="keyword">struct </span><a class="code" href="../../dc/d42/structthr__arg.html">thr_arg</a> *) <a class="code" href="../../dc/d42/structthr__arg.html#a735984d41155bc1032e09bece8f8d66d">data</a>);  <span class="comment">/* make a local copy */</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;<span class="preprocessor">#ifdef DEBUG_THREADS</span></div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a>;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   pthread_mutexattr_t mutex_attr;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <span class="keywordflow">if</span> (!(lock_info = <a class="code" href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a>, <span class="keyword">sizeof</span>(*lock_info))))</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a614409619094fd8c0c6b522c400ffeea">thread_id</a> = pthread_self();</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a1a8544029f1f17896aa17752c6aeed52">lwp</a> = <a class="code" href="../../de/d1f/main_2utils_8c.html#a78ce13d749925cbdaa7625e8dbdcbf7f">ast_get_tid</a>();</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;   lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#af081a07b0c5074db7c1896da8fb72e81">thread_name</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(a.<a class="code" href="../../dc/d42/structthr__arg.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   pthread_mutexattr_init(&amp;mutex_attr);</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   pthread_mutexattr_settype(&amp;mutex_attr, <a class="code" href="../../dd/d42/lock_8h.html#aaae8771a56e3420fccffbbf2f6ce8046">AST_MUTEX_KIND</a>);</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ad7693eb0c23d9649f82992b785ddbe4e">pthread_mutex_init</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>, &amp;mutex_attr);</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   pthread_mutexattr_destroy(&amp;mutex_attr);</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a>.<a class="code" href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>); <span class="comment">/* Intentionally not the wrapper */</span></div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../d1/d14/structlock__infos.html">lock_infos</a>, lock_info, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a>.<a class="code" href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>); <span class="comment">/* Intentionally not the wrapper */</span></div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;<span class="preprocessor">#endif </span><span class="comment">/* DEBUG_THREADS */</span><span class="preprocessor"></span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   <span class="comment">/* note that even though data-&gt;name is a pointer to allocated memory,</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;<span class="comment">      we are not freeing it here because ast_register_thread is going to</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;<span class="comment">      keep a copy of the pointer and then ast_unregister_thread will</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;<span class="comment">      free the memory</span></div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(data);</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a8e450762024db98313129c1a2ea07d0c">ast_register_thread</a>(a.<a class="code" href="../../dc/d42/structthr__arg.html#a5ac083a645d964373f022d03df4849c8">name</a>);</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;   pthread_cleanup_push(<a class="code" href="../../d5/d60/utils_8h.html#a9795c12483e42e95d18eae6a92482677">ast_unregister_thread</a>, (<span class="keywordtype">void</span> *) pthread_self());</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;   ret = a.<a class="code" href="../../dc/d42/structthr__arg.html#a65817fdcd8d96f6eaa79a89bfde6a456">start_routine</a>(a.<a class="code" href="../../dc/d42/structthr__arg.html#a735984d41155bc1032e09bece8f8d66d">data</a>);</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   pthread_cleanup_pop(1);</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;}</div><div class="ttc" id="lock_8h_html_ad7693eb0c23d9649f82992b785ddbe4e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ad7693eb0c23d9649f82992b785ddbe4e">pthread_mutex_init</a></div><div class="ttdeci">#define pthread_mutex_init</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00626">lock.h:626</a></div></div>
<div class="ttc" id="utils_8h_html_a8e450762024db98313129c1a2ea07d0c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a8e450762024db98313129c1a2ea07d0c">ast_register_thread</a></div><div class="ttdeci">void ast_register_thread(char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00414">asterisk.c:414</a></div></div>
<div class="ttc" id="threadstorage_8h_html_ab6ff44d2acf6ea45090177cd3141da03"><div class="ttname"><a href="../../dc/d7d/threadstorage_8h.html#ab6ff44d2acf6ea45090177cd3141da03">ast_threadstorage_get</a></div><div class="ttdeci">void * ast_threadstorage_get(struct ast_threadstorage *ts, size_t init_size)</div><div class="ttdoc">Retrieve thread storage. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7d/threadstorage_8h_source.html#l00197">threadstorage.h:197</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a78ce13d749925cbdaa7625e8dbdcbf7f"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a78ce13d749925cbdaa7625e8dbdcbf7f">ast_get_tid</a></div><div class="ttdeci">int ast_get_tid(void)</div><div class="ttdoc">Get current thread ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02504">main/utils.c:2504</a></div></div>
<div class="ttc" id="main_2utils_8c_html_ae1445fe6bc0aafd9832b2d53377c952a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#ae1445fe6bc0aafd9832b2d53377c952a">thread_lock_info</a></div><div class="ttdeci">static struct ast_threadstorage thread_lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00902">main/utils.c:902</a></div></div>
<div class="ttc" id="structthr__arg_html"><div class="ttname"><a href="../../dc/d42/structthr__arg.html">thr_arg</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01381">main/utils.c:1381</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a1a8544029f1f17896aa17752c6aeed52"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a1a8544029f1f17896aa17752c6aeed52">thr_lock_info::lwp</a></div><div class="ttdeci">int lwp</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00843">main/utils.c:843</a></div></div>
<div class="ttc" id="utils_8h_html_a9795c12483e42e95d18eae6a92482677"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a9795c12483e42e95d18eae6a92482677">ast_unregister_thread</a></div><div class="ttdeci">void ast_unregister_thread(void *id)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d03/asterisk_8c_source.html#l00430">asterisk.c:430</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a1196be5ab4cded8d600e0668cc67a3ef"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a></div><div class="ttdeci">static ast_mutex_t lock_infos_lock</div><div class="ttdoc">Locked when accessing the lock_infos list. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00853">main/utils.c:853</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a614409619094fd8c0c6b522c400ffeea"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a614409619094fd8c0c6b522c400ffeea">thr_lock_info::thread_id</a></div><div class="ttdeci">pthread_t thread_id</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00818">main/utils.c:818</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af081a07b0c5074db7c1896da8fb72e81"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af081a07b0c5074db7c1896da8fb72e81">thr_lock_info::thread_name</a></div><div class="ttdeci">const char * thread_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00820">main/utils.c:820</a></div></div>
<div class="ttc" id="structthr__arg_html_a65817fdcd8d96f6eaa79a89bfde6a456"><div class="ttname"><a href="../../dc/d42/structthr__arg.html#a65817fdcd8d96f6eaa79a89bfde6a456">thr_arg::start_routine</a></div><div class="ttdeci">void *(* start_routine)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01382">main/utils.c:1382</a></div></div>
<div class="ttc" id="structlock__infos_html"><div class="ttname"><a href="../../d1/d14/structlock__infos.html">lock_infos</a></div><div class="ttdoc">A list of each thread&amp;#39;s lock info. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00857">main/utils.c:857</a></div></div>
<div class="ttc" id="structthr__arg_html_a735984d41155bc1032e09bece8f8d66d"><div class="ttname"><a href="../../dc/d42/structthr__arg.html#a735984d41155bc1032e09bece8f8d66d">thr_arg::data</a></div><div class="ttdeci">void * data</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01383">main/utils.c:1383</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="structast__mutex__info_html_a4acff8232e4aec9cd5c6dc200ac55ef3"><div class="ttname"><a href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">ast_mutex_info::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00136">lock.h:136</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structthr__arg_html_a5ac083a645d964373f022d03df4849c8"><div class="ttname"><a href="../../dc/d42/structthr__arg.html#a5ac083a645d964373f022d03df4849c8">thr_arg::name</a></div><div class="ttdeci">char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01384">main/utils.c:1384</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
<div class="ttc" id="lock_8h_html_aaae8771a56e3420fccffbbf2f6ce8046"><div class="ttname"><a href="../../dd/d42/lock_8h.html#aaae8771a56e3420fccffbbf2f6ce8046">AST_MUTEX_KIND</a></div><div class="ttdeci">#define AST_MUTEX_KIND</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00077">lock.h:77</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa526f7bf4d65334b2859e51a2a6744cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa526f7bf4d65334b2859e51a2a6744cd">&#9670;&nbsp;</a></span>escape_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* escape_alloc </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01870">1870</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00193">ast_malloc</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01884">ast_escape_alloc()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01892">ast_escape_c_alloc()</a>.</p>
<div class="fragment"><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;{</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   <span class="keywordflow">if</span> (!s) {</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;   }</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;<span class="comment">    * The result string needs to be twice the size of the given</span></div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;<span class="comment">    * string just in case every character in it needs to be escaped.</span></div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   *size = strlen(s) * 2 + 1;</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a>(*size);</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="astmm_8h_html_ae63d4f486bcf6eac7c1593f867717d91"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae63d4f486bcf6eac7c1593f867717d91">ast_malloc</a></div><div class="ttdeci">#define ast_malloc(len)</div><div class="ttdoc">A wrapper for malloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00193">astmm.h:193</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aacd4c782fd585bc68be358d6c4534cbd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aacd4c782fd585bc68be358d6c4534cbd">&#9670;&nbsp;</a></span>handle_show_locks()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static char* handle_show_locks </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *&#160;</td>
          <td class="paramname"><em>e</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cmd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01339">1339</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00006">ast_cli()</a>, <a class="el" href="../../df/dd3/main_2cli_8c_source.html#l03026">ast_cli_allow_at_shutdown()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01264">ast_dump_locks()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00714">ast_str_buffer()</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00046">CLI_FAILURE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00153">CLI_GENERATE</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00152">CLI_INIT</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00044">CLI_SUCCESS</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00186">ast_cli_entry::command</a>, <a class="el" href="../../dc/db0/cli_8h_source.html#l00159">ast_cli_args::fd</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/dcd/app__jack_8c_source.html#l00147">str</a>, and <a class="el" href="../../dc/db0/cli_8h_source.html#l00177">ast_cli_entry::usage</a>.</p>
<div class="fragment"><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;{</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *<a class="code" href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a>;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;core show locks&quot;</span>;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;         <span class="stringliteral">&quot;Usage: core show locks\n&quot;</span></div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;         <span class="stringliteral">&quot;       This command is for lock debugging.  It prints out which locks\n&quot;</span></div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;         <span class="stringliteral">&quot;are owned by each active thread.\n&quot;</span>;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a>(e);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   }</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   str = <a class="code" href="../../de/d1f/main_2utils_8c.html#a821120ebd995b34627205de93d046d8a">ast_dump_locks</a>();</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   <span class="keywordflow">if</span> (!str) {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   }</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(str));</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(str);</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;}</div><div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="app__jack_8c_html_af25d6dc49269fa2003ac7c7fa6f13915"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#af25d6dc49269fa2003ac7c7fa6f13915">str</a></div><div class="ttdeci">const char * str</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00147">app_jack.c:147</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="cli_8h_html_a9df37f8701bbc0ba731c034e89eda2a5"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a9df37f8701bbc0ba731c034e89eda2a5">ast_cli_allow_at_shutdown</a></div><div class="ttdeci">int ast_cli_allow_at_shutdown(struct ast_cli_entry *e)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/dd3/main_2cli_8c_source.html#l03026">main/cli.c:3026</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a821120ebd995b34627205de93d046d8a"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a821120ebd995b34627205de93d046d8a">ast_dump_locks</a></div><div class="ttdeci">struct ast_str * ast_dump_locks(void)</div><div class="ttdoc">Generate a lock dump equivalent to &quot;core show locks&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01264">main/utils.c:1264</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="affe49f382e18630af11285269398ea51"></a>
<h2 class="memtitle"><span class="permalink"><a href="#affe49f382e18630af11285269398ea51">&#9670;&nbsp;</a></span>lock_info_destroy()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void lock_info_destroy </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Destroy a thread's lock info. </p>
<p>This gets called automatically when the thread stops </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00864">864</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00182">ast_free</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00855">AST_LIST_REMOVE</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00823">thr_lock_info::file</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00824">thr_lock_info::func</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00828">thr_lock_info::line_num</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00846">thr_lock_info::lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00826">thr_lock_info::lock_addr</a>, <a class="el" href="../../d1/d01/func__lock_8c_source.html#l00115">lock_info</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00853">lock_infos_lock</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00825">thr_lock_info::lock_name</a>, <a class="el" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00136">ast_mutex_info::mutex</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00841">thr_lock_info::num_locks</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00831">thr_lock_info::pending</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00627">pthread_mutex_destroy</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00623">pthread_mutex_lock</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00624">pthread_mutex_unlock</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00820">thr_lock_info::thread_name</a>.</p>
<div class="fragment"><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;{</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../de/d84/structthr__lock__info.html">thr_lock_info</a> *<a class="code" href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a> = data;</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a>.<a class="code" href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>);</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;<a class="code" href="../../d1/d14/structlock__infos.html">lock_infos</a>, lock_info, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a>(&amp;<a class="code" href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a>.<a class="code" href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">mutex</a>);</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">num_locks</a>; i++) {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">pending</a> == -1) {</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;         <span class="comment">/* This just means that the last lock this thread went for was by</span></div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;<span class="comment">          * using trylock, and it failed.  This is fine. */</span></div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;      }</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>,</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;         <span class="stringliteral">&quot;Thread &#39;%s&#39; still has a lock! - &#39;%s&#39; (%p) from &#39;%s&#39; in %s:%d!\n&quot;</span>,</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;         lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#af081a07b0c5074db7c1896da8fb72e81">thread_name</a>,</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;         lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#aab5e878cae779b0da45f2c9ddce62ae8">lock_name</a>,</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;         lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">lock_addr</a>,</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;         lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">func</a>,</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;         lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#af0baa3ccdd9d2a6adf03b72e2bea5789">file</a>,</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;         lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">locks</a>[i].<a class="code" href="../../de/d84/structthr__lock__info.html#a7661b5d028be7f8997cef563e3890fd9">line_num</a></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;      );</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   }</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#abda856b9d567d956a04e1dd3139acc40">pthread_mutex_destroy</a>(&amp;lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">lock</a>);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <span class="keywordflow">if</span> (lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#af081a07b0c5074db7c1896da8fb72e81">thread_name</a>) {</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>((<span class="keywordtype">void</span> *) lock_info-&gt;<a class="code" href="../../de/d84/structthr__lock__info.html#af081a07b0c5074db7c1896da8fb72e81">thread_name</a>);</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   }</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(lock_info);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;}</div><div class="ttc" id="structthr__lock__info_html_abb7462a60a130c6741693c39bf3717ba"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#abb7462a60a130c6741693c39bf3717ba">thr_lock_info::locks</a></div><div class="ttdeci">struct thr_lock_info::@431 locks[AST_MAX_LOCKS]</div></div>
<div class="ttc" id="structthr__lock__info_html_aab5e878cae779b0da45f2c9ddce62ae8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#aab5e878cae779b0da45f2c9ddce62ae8">thr_lock_info::lock_name</a></div><div class="ttdeci">const char * lock_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00825">main/utils.c:825</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a79ec26d453dcd29aec17f5536233e849"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a79ec26d453dcd29aec17f5536233e849">thr_lock_info::pending</a></div><div class="ttdeci">int pending</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00831">main/utils.c:831</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a7661b5d028be7f8997cef563e3890fd9"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a7661b5d028be7f8997cef563e3890fd9">thr_lock_info::line_num</a></div><div class="ttdeci">int line_num</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00828">main/utils.c:828</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0f8def5bce8663fdf3c26aa4bad23d2c"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0f8def5bce8663fdf3c26aa4bad23d2c">thr_lock_info::num_locks</a></div><div class="ttdeci">unsigned int num_locks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00841">main/utils.c:841</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="structthr__lock__info_html_ab4044b4dc4bb1ae63bd44579f60221b8"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#ab4044b4dc4bb1ae63bd44579f60221b8">thr_lock_info::lock_addr</a></div><div class="ttdeci">void * lock_addr</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00826">main/utils.c:826</a></div></div>
<div class="ttc" id="lock_8h_html_abda856b9d567d956a04e1dd3139acc40"><div class="ttname"><a href="../../dd/d42/lock_8h.html#abda856b9d567d956a04e1dd3139acc40">pthread_mutex_destroy</a></div><div class="ttdeci">#define pthread_mutex_destroy</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00627">lock.h:627</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a1196be5ab4cded8d600e0668cc67a3ef"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a1196be5ab4cded8d600e0668cc67a3ef">lock_infos_lock</a></div><div class="ttdeci">static ast_mutex_t lock_infos_lock</div><div class="ttdoc">Locked when accessing the lock_infos list. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00853">main/utils.c:853</a></div></div>
<div class="ttc" id="lock_8h_html_a6ef26f63d38c1d8cdf05a15b6b368c24"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6ef26f63d38c1d8cdf05a15b6b368c24">pthread_mutex_lock</a></div><div class="ttdeci">#define pthread_mutex_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00623">lock.h:623</a></div></div>
<div class="ttc" id="structthr__lock__info_html_afc4e949c7b7d0ab565ecfb62c3380171"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#afc4e949c7b7d0ab565ecfb62c3380171">thr_lock_info::func</a></div><div class="ttdeci">const char * func</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00824">main/utils.c:824</a></div></div>
<div class="ttc" id="func__lock_8c_html_a418645ebdd5c70fda7487d0195b8a759"><div class="ttname"><a href="../../d1/d01/func__lock_8c.html#a418645ebdd5c70fda7487d0195b8a759">lock_info</a></div><div class="ttdeci">static const struct ast_datastore_info lock_info</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d01/func__lock_8c_source.html#l00115">func_lock.c:115</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="structthr__lock__info_html_a0abaf4b5d42c4e5d19190035fade3599"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#a0abaf4b5d42c4e5d19190035fade3599">thr_lock_info::lock</a></div><div class="ttdeci">pthread_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00846">main/utils.c:846</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af0baa3ccdd9d2a6adf03b72e2bea5789"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af0baa3ccdd9d2a6adf03b72e2bea5789">thr_lock_info::file</a></div><div class="ttdeci">const char * file</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00823">main/utils.c:823</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structthr__lock__info_html_af081a07b0c5074db7c1896da8fb72e81"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html#af081a07b0c5074db7c1896da8fb72e81">thr_lock_info::thread_name</a></div><div class="ttdeci">const char * thread_name</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00820">main/utils.c:820</a></div></div>
<div class="ttc" id="structlock__infos_html"><div class="ttname"><a href="../../d1/d14/structlock__infos.html">lock_infos</a></div><div class="ttdoc">A list of each thread&amp;#39;s lock info. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00857">main/utils.c:857</a></div></div>
<div class="ttc" id="structthr__lock__info_html"><div class="ttname"><a href="../../de/d84/structthr__lock__info.html">thr_lock_info</a></div><div class="ttdoc">Keep track of which locks a thread holds. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00816">main/utils.c:816</a></div></div>
<div class="ttc" id="structast__mutex__info_html_a4acff8232e4aec9cd5c6dc200ac55ef3"><div class="ttname"><a href="../../d8/dc5/structast__mutex__info.html#a4acff8232e4aec9cd5c6dc200ac55ef3">ast_mutex_info::mutex</a></div><div class="ttdeci">pthread_mutex_t mutex</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00136">lock.h:136</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="lock_8h_html_ab417dd049910b852a43732c15e8dcaf2"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab417dd049910b852a43732c15e8dcaf2">pthread_mutex_unlock</a></div><div class="ttdeci">#define pthread_mutex_unlock</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00624">lock.h:624</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a780930e03627966e238198517d769254"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a780930e03627966e238198517d769254">&#9670;&nbsp;</a></span>locktype2str()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static const char* locktype2str </td>
          <td>(</td>
          <td class="paramtype">enum <a class="el" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153d">ast_lock_type</a>&#160;</td>
          <td class="paramname"><em>type</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01132">1132</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../dd/d42/lock_8h_source.html#l00253">AST_MUTEX</a>, <a class="el" href="../../dd/d42/lock_8h_source.html#l00254">AST_RDLOCK</a>, and <a class="el" href="../../dd/d42/lock_8h_source.html#l00255">AST_WRLOCK</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01174">append_lock_information()</a>.</p>
<div class="fragment"><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;{</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;   <span class="keywordflow">switch</span> (<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>) {</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153da484ddc5786cd0fc44cdc7d722426d794">AST_MUTEX</a>:</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;MUTEX&quot;</span>;</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153da368469c7c1924af1388369b17da5b366">AST_RDLOCK</a>:</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;RDLOCK&quot;</span>;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153da394daead2db186af926a26729a23484d">AST_WRLOCK</a>:</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;WRLOCK&quot;</span>;</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;   }</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;UNKNOWN&quot;</span>;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;}</div><div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="lock_8h_html_a91005557686d603e1210a200ef97153da368469c7c1924af1388369b17da5b366"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153da368469c7c1924af1388369b17da5b366">AST_RDLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00254">lock.h:254</a></div></div>
<div class="ttc" id="lock_8h_html_a91005557686d603e1210a200ef97153da484ddc5786cd0fc44cdc7d722426d794"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153da484ddc5786cd0fc44cdc7d722426d794">AST_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00253">lock.h:253</a></div></div>
<div class="ttc" id="lock_8h_html_a91005557686d603e1210a200ef97153da394daead2db186af926a26729a23484d"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a91005557686d603e1210a200ef97153da394daead2db186af926a26729a23484d">AST_WRLOCK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00255">lock.h:255</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aad3e5b2dbf4e988341484e0b1ab48ecb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad3e5b2dbf4e988341484e0b1ab48ecb">&#9670;&nbsp;</a></span>safe_mkdir()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int safe_mkdir </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>base_path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>path</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02266">2266</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00094">ast_begins_with()</a>, <a class="el" href="../../d9/db0/astmm_8c_source.html#l01766">ast_std_free()</a>, <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">c</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02336">ast_safe_mkdir()</a>.</p>
<div class="fragment"><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;{</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, absolute_path, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a1b7699f7e51f653f1032daa2df2319cd">ast_std_free</a>);</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;   absolute_path = realpath(path, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;   <span class="keywordflow">if</span> (absolute_path) {</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;      <span class="comment">/* Path exists, but is it in the right place? */</span></div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a>(absolute_path, base_path)) {</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;         <span class="keywordflow">return</span> EPERM;</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;      }</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <span class="comment">/* It is in the right place! */</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      <span class="comment">/* Path doesn&#39;t exist. */</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;      <span class="comment">/* The slash terminating the subpath we&#39;re checking */</span></div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      <span class="keywordtype">char</span> *path_term = strchr(path, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;      <span class="comment">/* True indicates the parent path is within base_path */</span></div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;      <span class="keywordtype">int</span> parent_is_safe = 0;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;      <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;      <span class="keywordflow">while</span> (path_term) {</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keywordtype">char</span> *, absolute_subpath, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a1b7699f7e51f653f1032daa2df2319cd">ast_std_free</a>);</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;         <span class="comment">/* Truncate the path one past the slash */</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a> = *(path_term + 1);</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;         *(path_term + 1) = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;         absolute_subpath = realpath(path, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;         <span class="keywordflow">if</span> (absolute_subpath) {</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;            <span class="comment">/* Subpath exists, but is it safe? */</span></div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;            parent_is_safe = <a class="code" href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a>(</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;               absolute_subpath, base_path);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (parent_is_safe) {</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;            <span class="comment">/* Subpath does not exist, but parent is safe</span></div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="comment">             * Create it */</span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;            res = mkdir(path, mode);</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;            <span class="keywordflow">if</span> (res != 0) {</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EEXIST);</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;               <span class="keywordflow">return</span> <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;            }</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;            <span class="comment">/* Subpath did not exist, parent was not safe</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment">             * Fail! */</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;            <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EPERM;</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;         }</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;         <span class="comment">/* Restore the path */</span></div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;         *(path_term + 1) = c;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;         <span class="comment">/* Move on to the next slash */</span></div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;         path_term = strchr(path_term + 1, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;      }</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;      <span class="comment">/* Now to build the final path, but only if it&#39;s safe */</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      <span class="keywordflow">if</span> (!parent_is_safe) {</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;         <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> = EPERM;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      }</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;      res = mkdir(path, mode);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      <span class="keywordflow">if</span> (res != 0 &amp;&amp; <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EEXIST) {</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;      }</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   }</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;}</div><div class="ttc" id="astmm_8h_html_a1b7699f7e51f653f1032daa2df2319cd"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a1b7699f7e51f653f1032daa2df2319cd">ast_std_free</a></div><div class="ttdeci">void ast_std_free(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01766">astmm.c:1766</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="strings_8h_html_ac51fa66c90ce950b248c9ff3e8c4e453"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac51fa66c90ce950b248c9ff3e8c4e453">ast_begins_with</a></div><div class="ttdeci">static int force_inline attribute_pure ast_begins_with(const char *str, const char *prefix)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00094">strings.h:94</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae011d19bb4f1d706eecb7e2b0c7ad581"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae011d19bb4f1d706eecb7e2b0c7ad581">&#9670;&nbsp;</a></span>tvfix()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static struct timeval tvfix </td>
          <td>(</td>
          <td class="paramtype">struct timeval&#160;</td>
          <td class="paramname"><em>a</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01990">1990</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">a</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01985">ONE_MILLION</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02005">ast_tvadd()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02019">ast_tvsub()</a>.</p>
<div class="fragment"><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;{</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec &gt;= <a class="code" href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a>) {</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;warning too large timestamp %ld.%ld\n&quot;</span>,</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;         (<span class="keywordtype">long</span>)<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_sec, (<span class="keywordtype">long</span> <span class="keywordtype">int</span>) <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec);</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_sec += <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec / <a class="code" href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a>;</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec %= <a class="code" href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a>;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec &lt; 0) {</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;warning negative timestamp %ld.%ld\n&quot;</span>,</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;         (<span class="keywordtype">long</span>)<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_sec, (<span class="keywordtype">long</span> <span class="keywordtype">int</span>) <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>.tv_usec = 0;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;   }</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>;</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a6a146c1b2155b03eb2ffa3f4ba755034"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a6a146c1b2155b03eb2ffa3f4ba755034">ONE_MILLION</a></div><div class="ttdeci">#define ONE_MILLION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01985">main/utils.c:1985</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a6f276043cbd97b244614b67790355751"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f276043cbd97b244614b67790355751">&#9670;&nbsp;</a></span>utils_shutdown()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void utils_shutdown </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02360">2360</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, and <a class="el" href="../../da/d4d/clicompat_8c_source.html#l00030">ast_cli_unregister_multiple()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02369">ast_utils_init()</a>.</p>
<div class="fragment"><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;{</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;   close(<a class="code" href="../../de/d1f/main_2utils_8c.html#a29aac26dfc884358b9b98aa7c89fee44">dev_urandom_fd</a>);</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;   <a class="code" href="../../de/d1f/main_2utils_8c.html#a29aac26dfc884358b9b98aa7c89fee44">dev_urandom_fd</a> = -1;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;<span class="preprocessor">#if defined(DEBUG_THREADS) &amp;&amp; !defined(LOW_MEMORY)</span></div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(<a class="code" href="../../de/d1f/main_2utils_8c.html#a0a37d4de9660278d7ea9c8aee6c20f39">utils_cli</a>, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(<a class="code" href="../../de/d1f/main_2utils_8c.html#a0a37d4de9660278d7ea9c8aee6c20f39">utils_cli</a>));</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;}</div><div class="ttc" id="main_2utils_8c_html_a29aac26dfc884358b9b98aa7c89fee44"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a29aac26dfc884358b9b98aa7c89fee44">dev_urandom_fd</a></div><div class="ttdeci">static int dev_urandom_fd</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l00792">main/utils.c:792</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="main_2utils_8c_html_a0a37d4de9660278d7ea9c8aee6c20f39"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#a0a37d4de9660278d7ea9c8aee6c20f39">utils_cli</a></div><div class="ttdeci">static struct ast_cli_entry utils_cli[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01369">main/utils.c:1369</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9c786f7f08470eeb27c3f6d1e11c9b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9c786f7f08470eeb27c3f6d1e11c9b1">&#9670;&nbsp;</a></span>wait_for_output()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int wait_for_output </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutms</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01539">1539</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">References <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/dfb/poll-compat_8h_source.html#l00088">ast_poll</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00098">ast_tvdiff_ms()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01592">ast_carefulwrite()</a>.</p>
<div class="fragment"><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;{</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;   <span class="keyword">struct </span>pollfd pfd = {</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;      .fd = fd,</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;      .events = POLLOUT,</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   };</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;   <span class="keyword">struct </span>timeval start = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;   <span class="keywordtype">int</span> elapsed = 0;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   <span class="comment">/* poll() until the fd is writable without blocking */</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;   <span class="keywordflow">while</span> ((res = <a class="code" href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a>(&amp;pfd, 1, timeoutms - elapsed)) &lt;= 0) {</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      <span class="keywordflow">if</span> (res == 0) {</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;         <span class="comment">/* timed out. */</span></div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;<span class="preprocessor">#ifndef STANDALONE</span></div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Timed out trying to write\n&quot;</span>);</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == -1) {</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;         <span class="comment">/* poll() returned an error, check to see if it was fatal */</span></div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EINTR || <a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> == EAGAIN) {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;            elapsed = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;            <span class="keywordflow">if</span> (elapsed &gt;= timeoutms) {</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;               <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;            }</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;            <span class="comment">/* This was an acceptable error, go back into poll() */</span></div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;         }</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;         <span class="comment">/* Fatal error, bail. */</span></div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;poll returned error: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      }</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;      elapsed = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), start);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;      <span class="keywordflow">if</span> (elapsed &gt;= timeoutms) {</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;      }</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;   }</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;}</div><div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="poll-compat_8h_html_a5a0c58fa8311e94cd0ed34382aa822f9"><div class="ttname"><a href="../../d4/dfb/poll-compat_8h.html#a5a0c58fa8311e94cd0ed34382aa822f9">ast_poll</a></div><div class="ttdeci">#define ast_poll(a, b, c)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dfb/poll-compat_8h_source.html#l00088">poll-compat.h:88</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a7f200bdbb0ccc080852f2279a1d470dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f200bdbb0ccc080852f2279a1d470dc">&#9670;&nbsp;</a></span>ast_uri_http</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> ast_uri_http = {<a class="el" href="../../d5/d60/utils_8h.html#a4ffc11863753bae3999421ad4b05a3b0">AST_URI_UNRESERVED</a>}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00573">573</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3c/func__curl_8c_source.html#l00663">acf_curl_helper()</a>, <a class="el" href="../../db/d0b/resource__bridges_8c_source.html#l00634">ast_ari_bridges_record()</a>, <a class="el" href="../../da/d49/resource__channels_8c_source.html#l00748">ast_ari_channels_record()</a>, <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00048">AST_TEST_DEFINE()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00515">config_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00415">destroy_curl()</a>, <a class="el" href="../../dd/de9/res__agi_8c_source.html#l01787">launch_asyncagi()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00061">realtime_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00132">realtime_multi_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00464">require_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00354">store_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00281">update2_curl()</a>, <a class="el" href="../../de/d36/res__config__curl_8c_source.html#l00232">update_curl()</a>, <a class="el" href="../../d2/d1a/func__uri_8c_source.html#l00087">uridecode()</a>, and <a class="el" href="../../d2/d1a/func__uri_8c_source.html#l00073">uriencode()</a>.</p>

</div>
</div>
<a id="af7cc8e3b6b28b9315c312edb79af2f59"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af7cc8e3b6b28b9315c312edb79af2f59">&#9670;&nbsp;</a></span>ast_uri_http_legacy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> ast_uri_http_legacy = {<a class="el" href="../../d5/d60/utils_8h.html#a021aaefbd5124ef9375a0449706faf8a">AST_URI_LEGACY_SPACE</a> | <a class="el" href="../../d5/d60/utils_8h.html#a4ffc11863753bae3999421ad4b05a3b0">AST_URI_UNRESERVED</a>}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00574">574</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d2/d3c/func__curl_8c_source.html#l00663">acf_curl_helper()</a>, <a class="el" href="../../d7/dbc/res__ari_8c_source.html#l00491">ast_ari_invoke()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01353">ast_http_get_post_vars()</a>, <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00048">AST_TEST_DEFINE()</a>, and <a class="el" href="../../dd/d43/http_8c_source.html#l01401">handle_uri()</a>.</p>

</div>
</div>
<a id="aee0c854dd14dc6f16978ce018c21c939"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aee0c854dd14dc6f16978ce018c21c939">&#9670;&nbsp;</a></span>ast_uri_sip_user</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const struct <a class="el" href="../../dc/dac/structast__flags.html">ast_flags</a> ast_uri_sip_user = {<a class="el" href="../../d5/d60/utils_8h.html#a4ffc11863753bae3999421ad4b05a3b0">AST_URI_UNRESERVED</a> | <a class="el" href="../../d5/d60/utils_8h.html#a2d4c792f38355851799a810dec6abd4c">AST_URI_SIP_USER_UNRESERVED</a>}</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00575">575</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14653">add_diversion()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l12996">add_rpid()</a>, <a class="el" href="../../d9/dbe/test__utils_8c_source.html#l00048">AST_TEST_DEFINE()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14385">build_contact()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18508">get_destination()</a>, <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l00905">get_name_and_number()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l18812">get_refer_info()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l26347">handle_request_invite()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l14410">initreqprep()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l23617">parse_moved_contact()</a>, <a class="el" href="../../d5/dfe/chan__sip_8c_source.html#l08161">sip_new()</a>, and <a class="el" href="../../d5/d85/reqresp__parser_8c_source.html#l02153">sip_uri_cmp()</a>.</p>

</div>
</div>
<a id="a833369687dfc95492b2d5ef4e82c892f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a833369687dfc95492b2d5ef4e82c892f">&#9670;&nbsp;</a></span>b2a</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char b2a[256]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00080">80</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00294">ast_base64decode()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00538">base64_init()</a>.</p>

</div>
</div>
<a id="aaea12600bd0250b269b9061e6ba49dec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaea12600bd0250b269b9061e6ba49dec">&#9670;&nbsp;</a></span>b2a_url</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char b2a_url[256]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00081">81</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00427">ast_base64url_decode()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00538">base64_init()</a>.</p>

</div>
</div>
<a id="a094cd85754f67592588ab5a0636cf0ea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a094cd85754f67592588ab5a0636cf0ea">&#9670;&nbsp;</a></span>base64</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char base64[64]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00078">78</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00353">ast_base64encode_full()</a>, <a class="el" href="../../dd/d43/http_8c_source.html#l01579">ast_http_get_auth()</a>, <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l00790">ast_websocket_uri_cb()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00538">base64_init()</a>, <a class="el" href="../../de/d4c/res__http__websocket_8c_source.html#l01300">websocket_client_handshake_get_response()</a>, and <a class="el" href="../../dc/d6b/res__xmpp_8c_source.html#l02695">xmpp_client_authenticate_sasl()</a>.</p>

</div>
</div>
<a id="a22f268341ef4b7675ce09044962d9046"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a22f268341ef4b7675ce09044962d9046">&#9670;&nbsp;</a></span>base64url</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char base64url[64]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00079">79</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00469">ast_base64url_encode_full()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00538">base64_init()</a>.</p>

</div>
</div>
<a id="a29aac26dfc884358b9b98aa7c89fee44"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a29aac26dfc884358b9b98aa7c89fee44">&#9670;&nbsp;</a></span>dev_urandom_fd</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">int dev_urandom_fd = -1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00792">792</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../df/da9/uuid_8c_source.html#l00194">ast_uuid_init()</a>.</p>

</div>
</div>
<a id="a3ee5b00b500b43bd5aa3beaed4687062"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3ee5b00b500b43bd5aa3beaed4687062">&#9670;&nbsp;</a></span>escape_sequences</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char escape_sequences[]</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   <span class="charliteral">&#39;\a&#39;</span>, <span class="charliteral">&#39;\b&#39;</span>, <span class="charliteral">&#39;\f&#39;</span>, <span class="charliteral">&#39;\n&#39;</span>, <span class="charliteral">&#39;\r&#39;</span>, <span class="charliteral">&#39;\t&#39;</span>, <span class="charliteral">&#39;\v&#39;</span>, <span class="charliteral">&#39;\\&#39;</span>, <span class="charliteral">&#39;\&#39;&#39;</span>, <span class="charliteral">&#39;\&quot;&#39;</span>, <span class="charliteral">&#39;\?&#39;</span>, <span class="charliteral">&#39;\0&#39;</span></div><div class="line">}</div></div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01774">1774</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01786">ast_escape()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01829">ast_escape_c()</a>.</p>

</div>
</div>
<a id="abc3f1ac567f35d628dd8766937f9cbcd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc3f1ac567f35d628dd8766937f9cbcd">&#9670;&nbsp;</a></span>escape_sequences_map</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char escape_sequences_map[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   <span class="charliteral">&#39;a&#39;</span>, <span class="charliteral">&#39;b&#39;</span>, <span class="charliteral">&#39;f&#39;</span>, <span class="charliteral">&#39;n&#39;</span>, <span class="charliteral">&#39;r&#39;</span>, <span class="charliteral">&#39;t&#39;</span>, <span class="charliteral">&#39;v&#39;</span>, <span class="charliteral">&#39;\\&#39;</span>, <span class="charliteral">&#39;\&#39;&#39;</span>, <span class="charliteral">&#39;&quot;&#39;</span>, <span class="charliteral">&#39;?&#39;</span>, <span class="charliteral">&#39;\0&#39;</span></div><div class="line">}</div></div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01782">1782</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

</div>
</div>
<a id="ac465762c00b512ce7c2af42eb20cf7f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac465762c00b512ce7c2af42eb20cf7f8">&#9670;&nbsp;</a></span>inet_ntoa_buf</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> inet_ntoa_buf = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../de/d1f/main_2utils_8c.html#a0114e8cab34567d42d506ad18c7ff28e">__init_inet_ntoa_buf</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00083">83</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00782">ast_inet_ntoa()</a>.</p>

</div>
</div>
<a id="a468e2af6a422562a7810b869bd378c87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a468e2af6a422562a7810b869bd378c87">&#9670;&nbsp;</a></span>lock_infos</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d1/d14/structlock__infos.html">lock_infos</a>   <a class="el" href="../../d1/d14/structlock__infos.html">lock_infos</a> = { .<a class="el" href="../../d7/d8e/test__cdr_8c.html#ad010071647150404acc6651544245543">first</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, .<a class="el" href="../../d7/d8e/test__cdr_8c.html#abaf7793fbb72797de5118c5f1f7b21ae">last</a> = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a id="a1196be5ab4cded8d600e0668cc67a3ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1196be5ab4cded8d600e0668cc67a3ef">&#9670;&nbsp;</a></span>lock_infos_lock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> lock_infos_lock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Locked when accessing the <a class="el" href="../../d1/d14/structlock__infos.html" title="A list of each thread&#39;s lock info. ">lock_infos</a> list. </p>

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00853">853</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01264">ast_dump_locks()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01231">ast_log_show_lock()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01394">dummy_start()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00864">lock_info_destroy()</a>.</p>

</div>
</div>
<a id="aff56af259d6f99172edddacdad8e9372"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff56af259d6f99172edddacdad8e9372">&#9670;&nbsp;</a></span>randomlock</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../dd/d42/lock_8h.html#a44a55ccb432d858a224b401116277e93">ast_mutex_t</a> randomlock = { PTHREAD_RECURSIVE_MUTEX_INITIALIZER_NP , <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, {1, 0} }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02061">2061</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02064">ast_random()</a>.</p>

</div>
</div>
<a id="ae1445fe6bc0aafd9832b2d53377c952a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae1445fe6bc0aafd9832b2d53377c952a">&#9670;&nbsp;</a></span>thread_lock_info</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> thread_lock_info = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../de/d1f/main_2utils_8c.html#a2fe93a7ac760f085e33a7c0ca8f2ef9f">__init_thread_lock_info</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00902">902</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00995">ast_find_lock_info()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00962">ast_mark_lock_acquired()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00978">ast_mark_lock_failed()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01088">ast_remove_lock_info()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01059">ast_restore_lock_info()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l00905">ast_store_lock_info()</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01030">ast_suspend_lock_info()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01394">dummy_start()</a>.</p>

</div>
</div>
<a id="a2e272837476aeb77658b7e5301cc5f26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e272837476aeb77658b7e5301cc5f26">&#9670;&nbsp;</a></span>thread_user_interface_tl</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../dd/d17/structast__threadstorage.html">ast_threadstorage</a> thread_user_interface_tl = { .once = PTHREAD_ONCE_INIT , .key_init = <a class="el" href="../../de/d1f/main_2utils_8c.html#a12fdb94f6849011cfb98e881874198bb">__init_thread_user_interface_tl</a> , .custom_init = <a class="el" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> , }</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02979">2979</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02996">ast_thread_is_user_interface()</a>, and <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l02981">ast_thread_user_interface_set()</a>.</p>

</div>
</div>
<a id="a0a37d4de9660278d7ea9c8aee6c20f39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a37d4de9660278d7ea9c8aee6c20f39">&#9670;&nbsp;</a></span>utils_cli</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> utils_cli[]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">   { .handler =  <a class="code" href="../../de/d1f/main_2utils_8c.html#aacd4c782fd585bc68be358d6c4534cbd">handle_show_locks</a> , .summary =  <span class="stringliteral">&quot;Show which locks are held by which thread&quot;</span> ,},</div><div class="line">}</div><div class="ttc" id="main_2utils_8c_html_aacd4c782fd585bc68be358d6c4534cbd"><div class="ttname"><a href="../../de/d1f/main_2utils_8c.html#aacd4c782fd585bc68be358d6c4534cbd">handle_show_locks</a></div><div class="ttdeci">static char * handle_show_locks(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01339">main/utils.c:1339</a></div></div>
</div><!-- fragment -->
<p class="definition">Definition at line <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01369">1369</a> of file <a class="el" href="../../de/d1f/main_2utils_8c_source.html">main/utils.c</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:47:01 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
