<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: core_local.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">core_local.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../de/d47/core__local_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 2013 Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Richard Mudgett &lt;rmudgett@digium.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> * \file</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"> * \brief Local proxy channel driver.</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> * \author Richard Mudgett &lt;rmudgett@digium.com&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> * See Also:</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * \arg \ref AstCREDITS</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment">/*** MODULEINFO</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment">   &lt;support_level&gt;core&lt;/support_level&gt;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/* ------------------------------------------------------------------- */</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7b/channel_8h.html">asterisk/channel.h</a>&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/db0/cli_8h.html">asterisk/cli.h</a>&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/manager_8h.html">asterisk/manager.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/da2/devicestate_8h.html">asterisk/devicestate.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/da5/astobj2_8h.html">asterisk/astobj2.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d56/bridge_8h.html">asterisk/bridge.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../de/dea/core__unreal_8h.html">asterisk/core_unreal.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/da6/core__local_8h.html">asterisk/core_local.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d79/stasis_8h.html">asterisk/stasis.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d4a/stasis__channels_8h.html">asterisk/stasis_channels.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d78/__private_8h.html">asterisk/_private.h</a>&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d4a/stasis__channels_8h.html">asterisk/stasis_channels.h</a>&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/d95/stream_8h.html">asterisk/stream.h</a>&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d39/translate_8h.html">asterisk/translate.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">   &lt;manager name=&quot;LocalOptimizeAway&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">         Optimize away a local channel when possible.</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">         &lt;parameter name=&quot;Channel&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">            &lt;para&gt;The channel name to optimize away.&lt;/para&gt;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">         &lt;para&gt;A local channel created with &quot;/n&quot; will not automatically optimize away.</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">         Calling this command on the local channel will clear that flag and allow</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">         it to optimize away if it&#39;s bridged or when it becomes bridged.&lt;/para&gt;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;LocalBridge&quot;&gt;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_CALL&quot;&gt;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when two halves of a Local Channel form a bridge.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">            &lt;channel_snapshot prefix=&quot;LocalOne&quot;/&gt;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">            &lt;channel_snapshot prefix=&quot;LocalTwo&quot;/&gt;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">            &lt;parameter name=&quot;Context&quot;&gt;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;<span class="comment">               &lt;para&gt;The context in the dialplan that Channel2 starts in.&lt;/para&gt;</span></div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="comment">            &lt;parameter name=&quot;Exten&quot;&gt;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="comment">               &lt;para&gt;The extension in the dialplan that Channel2 starts in.&lt;/para&gt;</span></div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">            &lt;parameter name=&quot;LocalOptimization&quot;&gt;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">                  &lt;enum name=&quot;Yes&quot;/&gt;</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">                  &lt;enum name=&quot;No&quot;/&gt;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;LocalOptimizationBegin&quot;&gt;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_CALL&quot;&gt;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when two halves of a Local Channel begin to optimize</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">         themselves out of the media path.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">            &lt;channel_snapshot prefix=&quot;LocalOne&quot;/&gt;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">            &lt;channel_snapshot prefix=&quot;LocalTwo&quot;/&gt;</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">            &lt;channel_snapshot prefix=&quot;Source&quot;/&gt;</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">            &lt;parameter name=&quot;DestUniqueId&quot;&gt;</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">               &lt;para&gt;The unique ID of the bridge into which the local channel is optimizing.&lt;/para&gt;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">            &lt;parameter name=&quot;Id&quot;&gt;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">               &lt;para&gt;Identification for the optimization operation.&lt;/para&gt;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">         &lt;see-also&gt;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">            &lt;ref type=&quot;managerEvent&quot;&gt;LocalOptimizationEnd&lt;/ref&gt;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">            &lt;ref type=&quot;manager&quot;&gt;LocalOptimizeAway&lt;/ref&gt;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">         &lt;/see-also&gt;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;LocalOptimizationEnd&quot;&gt;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_CALL&quot;&gt;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when two halves of a Local Channel have finished optimizing</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">         themselves out of the media path.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">            &lt;channel_snapshot prefix=&quot;LocalOne&quot;/&gt;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">            &lt;channel_snapshot prefix=&quot;LocalTwo&quot;/&gt;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">            &lt;parameter name=&quot;Success&quot;&gt;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">               &lt;para&gt;Indicates whether the local optimization succeeded.&lt;/para&gt;</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">            &lt;parameter name=&quot;Id&quot;&gt;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">               &lt;para&gt;Identification for the optimization operation. Matches the &lt;replaceable&gt;Id&lt;/replaceable&gt;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">               from a previous &lt;literal&gt;LocalOptimizationBegin&lt;/literal&gt;&lt;/para&gt;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">         &lt;see-also&gt;</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">            &lt;ref type=&quot;managerEvent&quot;&gt;LocalOptimizationBegin&lt;/ref&gt;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">            &lt;ref type=&quot;manager&quot;&gt;LocalOptimizeAway&lt;/ref&gt;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">         &lt;/see-also&gt;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a71535bf985a1a06d548fd73a0a0ec32c">  136</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../de/d47/core__local_8c.html#a71535bf985a1a06d548fd73a0a0ec32c">tdesc</a>[] = <span class="stringliteral">&quot;Local Proxy Channel Driver&quot;</span>;</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div><div class="line"><a name="l00138"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#aef9f33a8f0b0099c02a84d0c01d77aab">  138</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../de/d47/core__local_8c.html#aef9f33a8f0b0099c02a84d0c01d77aab">locals</a>;</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d47/core__local_8c.html#a42fd7736b71d3a69295c9c3688a954bd">local_request</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> *cause);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d47/core__local_8c.html#afc0a9dd20337f59366378ec86066ba27">local_request_with_stream_topology</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> *cause);</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#a282de5be1a50fbd2194768755f3fde23">local_call</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, <span class="keyword">const</span> <span class="keywordtype">char</span> *dest, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#ad93a911b38a7898024708bc097b57aaa">local_hangup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#a2fa5e01de83caeddebc1192f8884db5d">local_devicestate</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d47/core__local_8c.html#a5de2da08a00f136d2fc5dca749a91b0f">local_optimization_started_cb</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/df3/structast__unreal__pvt.html">ast_unreal_pvt</a> *base, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *source,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../de/dea/core__unreal_8h.html#abc6dcce8e64173a023700dd4288d7c97">ast_unreal_channel_indicator</a> dest, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d47/core__local_8c.html#ac43b245aa7e65bb5e250ffd278ec2f40">local_optimization_finished_cb</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/df3/structast__unreal__pvt.html">ast_unreal_pvt</a> *base, <span class="keywordtype">int</span> success, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#aa9d0af0b82721bcbe1de5c5a2ee4423b">local_setoption</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">int</span> option, <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> datalen);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *<a class="code" href="../../de/d47/core__local_8c.html#aacb88b428949346ccf4ab8eda6970bd1">local_message_to_ami</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *msg);</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment"> * @{ \brief Define local channel message types.</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<a class="code" href="../../de/d47/core__local_8c.html#a3ab2314f2722021435701bc08d7f9722">STASIS_MESSAGE_TYPE_DEFN</a>(<a class="code" href="../../d5/da6/core__local_8h.html#aacf7aa4abdef7f39643948a814d3e1f9">ast_local_bridge_type</a>,</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;   .<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a> = <a class="code" href="../../de/d47/core__local_8c.html#aacb88b428949346ccf4ab8eda6970bd1">local_message_to_ami</a>,</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;   );</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<a class="code" href="../../de/d47/core__local_8c.html#a3ab2314f2722021435701bc08d7f9722">STASIS_MESSAGE_TYPE_DEFN</a>(<a class="code" href="../../d5/da6/core__local_8h.html#a8f023d0ccc8c7d3365abf4d60412deb5">ast_local_optimization_begin_type</a>,</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;   .<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a> = <a class="code" href="../../de/d47/core__local_8c.html#aacb88b428949346ccf4ab8eda6970bd1">local_message_to_ami</a>,</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   );</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<a class="code" href="../../de/d47/core__local_8c.html#a3ab2314f2722021435701bc08d7f9722">STASIS_MESSAGE_TYPE_DEFN</a>(<a class="code" href="../../d5/da6/core__local_8h.html#a6f6f7583dcbd0b63d59bdfe79f654945">ast_local_optimization_end_type</a>,</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;   .<a class="code" href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a> = <a class="code" href="../../de/d47/core__local_8c.html#aacb88b428949346ccf4ab8eda6970bd1">local_message_to_ami</a>,</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   );<span class="comment"></span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">/*! @} */</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">/*! \brief Callbacks from the unreal core when channel optimization occurs */</span></div><div class="line"><a name="l00167"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#afa315cbd2576e826f5ee9da318bbbd8c">  167</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d09/structast__unreal__pvt__callbacks.html">ast_unreal_pvt_callbacks</a> <a class="code" href="../../de/d47/core__local_8c.html#afa315cbd2576e826f5ee9da318bbbd8c">local_unreal_callbacks</a> = {</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;   .<a class="code" href="../../df/d09/structast__unreal__pvt__callbacks.html#a3c5890f67bf431d002c55d3ed27adfa0">optimization_started</a> = <a class="code" href="../../de/d47/core__local_8c.html#a5de2da08a00f136d2fc5dca749a91b0f">local_optimization_started_cb</a>,</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;   .optimization_finished = <a class="code" href="../../de/d47/core__local_8c.html#ac43b245aa7e65bb5e250ffd278ec2f40">local_optimization_finished_cb</a>,</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;};</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">/* PBX interface structure for channel registration */</span></div><div class="line"><a name="l00173"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a6d83e64e81a38a3cd94555a85fe07130">  173</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a> <a class="code" href="../../de/d47/core__local_8c.html#a6d83e64e81a38a3cd94555a85fe07130">local_tech</a> = {</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;   .<a class="code" href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">type</a> = <span class="stringliteral">&quot;Local&quot;</span>,</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;   .description = <a class="code" href="../../de/d47/core__local_8c.html#a71535bf985a1a06d548fd73a0a0ec32c">tdesc</a>,</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;   .requester = <a class="code" href="../../de/d47/core__local_8c.html#a42fd7736b71d3a69295c9c3688a954bd">local_request</a>,</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;   .requester_with_stream_topology = <a class="code" href="../../de/d47/core__local_8c.html#afc0a9dd20337f59366378ec86066ba27">local_request_with_stream_topology</a>,</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;   .send_digit_begin = <a class="code" href="../../de/dea/core__unreal_8h.html#a4965c000097a4852ac4b87b36f79a245">ast_unreal_digit_begin</a>,</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   .send_digit_end = <a class="code" href="../../de/dea/core__unreal_8h.html#a043bdfcf85546fb513f92a4112e32043">ast_unreal_digit_end</a>,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   .call = <a class="code" href="../../de/d47/core__local_8c.html#a282de5be1a50fbd2194768755f3fde23">local_call</a>,</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;   .hangup = <a class="code" href="../../de/d47/core__local_8c.html#ad93a911b38a7898024708bc097b57aaa">local_hangup</a>,</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   .answer = <a class="code" href="../../de/dea/core__unreal_8h.html#adaae5a585ad788986bfeb0c1e16fb0e9">ast_unreal_answer</a>,</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   .read_stream = <a class="code" href="../../de/dea/core__unreal_8h.html#a3d66dffd828eee5208501563e1083cf7">ast_unreal_read</a>,</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   .write = <a class="code" href="../../de/dea/core__unreal_8h.html#a87e56045a9650da1a0991cff6a5883d9">ast_unreal_write</a>,</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   .write_stream = <a class="code" href="../../de/dea/core__unreal_8h.html#adba57ba4d5001a18178a940f91d2fd52">ast_unreal_write_stream</a>,</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   .exception = <a class="code" href="../../de/dea/core__unreal_8h.html#a3d66dffd828eee5208501563e1083cf7">ast_unreal_read</a>,</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   .indicate = <a class="code" href="../../de/dea/core__unreal_8h.html#a94a4d30c378717a36519a45eefbc890b">ast_unreal_indicate</a>,</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   .fixup = <a class="code" href="../../de/dea/core__unreal_8h.html#a3df8555d28dd20b248fa6819673eaf4e">ast_unreal_fixup</a>,</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   .send_html = <a class="code" href="../../de/dea/core__unreal_8h.html#a52e47430bd2da159275e4c48483e4369">ast_unreal_sendhtml</a>,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   .send_text = <a class="code" href="../../de/dea/core__unreal_8h.html#aab2dfbf927d0a6c37e0e32d81b5fcc64">ast_unreal_sendtext</a>,</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;   .devicestate = <a class="code" href="../../de/d47/core__local_8c.html#a2fa5e01de83caeddebc1192f8884db5d">local_devicestate</a>,</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   .queryoption = <a class="code" href="../../de/dea/core__unreal_8h.html#a2a58e21b81c349475178b88bcd3599b3">ast_unreal_queryoption</a>,</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;   .setoption = <a class="code" href="../../de/d47/core__local_8c.html#aa9d0af0b82721bcbe1de5c5a2ee4423b">local_setoption</a>,</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;};</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">/*! What to do with the ;2 channel when ast_call() happens. */</span></div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7d">  197</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7d">local_call_action</a> {</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;   <span class="comment">/* The ast_call() will run dialplan on the ;2 channel. */</span></div><div class="line"><a name="l00199"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da90d3c5d66511308989ef4545d72adc5f">  199</a></span>&#160;   <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da90d3c5d66511308989ef4545d72adc5f">LOCAL_CALL_ACTION_DIALPLAN</a>,</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;   <span class="comment">/* The ast_call() will impart the ;2 channel into a bridge. */</span></div><div class="line"><a name="l00201"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da1d8347c3eb33285a4f2e2dd57a41a978">  201</a></span>&#160;   <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da1d8347c3eb33285a4f2e2dd57a41a978">LOCAL_CALL_ACTION_BRIDGE</a>,</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;   <span class="comment">/* The ast_call() will masquerade the ;2 channel into a channel. */</span></div><div class="line"><a name="l00203"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da36557343c7753f1e969383a5921dbec9">  203</a></span>&#160;   <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da36557343c7753f1e969383a5921dbec9">LOCAL_CALL_ACTION_MASQUERADE</a>,</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;};</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">/*! Join a bridge on ast_call() parameters. */</span></div><div class="line"><a name="l00207"></a><span class="lineno"><a class="line" href="../../d2/d17/structlocal__bridge.html">  207</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d2/d17/structlocal__bridge.html">local_bridge</a> {<span class="comment"></span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">   /*! Bridge to join. */</span></div><div class="line"><a name="l00209"></a><span class="lineno"><a class="line" href="../../d2/d17/structlocal__bridge.html#a41e600f905922b7a8225f1da337a62ed">  209</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *<a class="code" href="../../d2/d17/structlocal__bridge.html#a41e600f905922b7a8225f1da337a62ed">join</a>;<span class="comment"></span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">   /*! Channel to swap with when joining bridge. */</span></div><div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">  211</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a>;<span class="comment"></span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">   /*! Features that are specific to this channel when pushed into the bridge. */</span></div><div class="line"><a name="l00213"></a><span class="lineno"><a class="line" href="../../d2/d17/structlocal__bridge.html#a65633fdc6178dc8d9f754fda0166d16e">  213</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *<a class="code" href="../../d2/d17/structlocal__bridge.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;};</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment"> * \brief the local pvt structure for all channels</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment"> * The local channel pvt has two ast_chan objects - the &quot;owner&quot; and the &quot;next channel&quot;, the outbound channel</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment"> * ast_chan owner -&gt; local_pvt -&gt; ast_chan chan</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00223"></a><span class="lineno"><a class="line" href="../../dc/dd4/structlocal__pvt.html">  223</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> {<span class="comment"></span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">   /*! Unreal channel driver base class values. */</span></div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">  225</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/df3/structast__unreal__pvt.html">ast_unreal_pvt</a> base;<span class="comment"></span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">   /*! Additional action arguments */</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;   <span class="keyword">union </span>{<span class="comment"></span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">      /*! Make ;2 join a bridge on ast_call(). */</span></div><div class="line"><a name="l00229"></a><span class="lineno"><a class="line" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">  229</a></span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d2/d17/structlocal__bridge.html">local_bridge</a> bridge;<span class="comment"></span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">      /*! Make ;2 masquerade into this channel on ast_call(). */</span></div><div class="line"><a name="l00231"></a><span class="lineno"><a class="line" href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">  231</a></span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">masq</a>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;   } action;<span class="comment"></span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">   /*! What to do with the ;2 channel on ast_call(). */</span></div><div class="line"><a name="l00234"></a><span class="lineno"><a class="line" href="../../dc/dd4/structlocal__pvt.html#aca731531d68f5a15cd5d927abb5740c5">  234</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7d">local_call_action</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;<span class="comment"></span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">   /*! Context to call */</span></div><div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">  236</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>[<a class="code" href="../../d5/d7b/channel_8h.html#abcf1aea85b924e9cd605040b86241e2a">AST_MAX_CONTEXT</a>];<span class="comment"></span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">   /*! Extension to call */</span></div><div class="line"><a name="l00238"></a><span class="lineno"><a class="line" href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">  238</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>];</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;};</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a973a646143d042b91ec6248ea6ba00f1">  241</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d47/core__local_8c.html#a973a646143d042b91ec6248ea6ba00f1">ast_local_lock_all</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">void</span> **<a class="code" href="../../df/d3c/structast__channel.html#a19aa04db5508cf9496602e694dc69e2f">tech_pvt</a>,</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> **base_chan, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> **base_owner)</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;{</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   *tech_pvt = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   *base_chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   *base_owner = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;      *tech_pvt = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(p);</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;      <a class="code" href="../../de/dea/core__unreal_8h.html#aee6431a3ba70b90b669de8bd0d3334ab">ast_unreal_lock_all</a>(&amp;p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, base_chan, base_owner);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;   }</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;}</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a2ed2a62610af1f7e8c25b89001e35963">  256</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="../../de/d47/core__local_8c.html#a2ed2a62610af1f7e8c25b89001e35963">ast_local_unlock_all</a>(<span class="keywordtype">void</span> *tech_pvt, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *base_chan,</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *base_owner)</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordflow">if</span> (base_chan) {</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(base_chan);</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(base_chan);</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;   }</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;   <span class="keywordflow">if</span> (base_owner) {</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(base_owner);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(base_owner);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   }</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   <span class="keywordflow">if</span> (tech_pvt) {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p = tech_pvt;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(&amp;p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>);</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tech_pvt, -1);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   }</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;}</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div><div class="line"><a name="l00276"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a2b73f14ae5dc7e11bafc684936cf26d0">  276</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d47/core__local_8c.html#a2b73f14ae5dc7e11bafc684936cf26d0">ast_local_get_peer</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;{</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *found;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;   <span class="keywordflow">if</span> (!p) {</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   }</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   found = p ? <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(locals, p, 0) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      <span class="comment">/* ast is either not a local channel or it has alredy been hungup */</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   }</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(found);</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="keywordflow">if</span> (ast == p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) {</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;      peer = p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ast == p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a84d1435c5b8d387806714ea7079304b7">chan</a>) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      peer = p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;      peer = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   }</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;   <span class="keywordflow">if</span> (peer) {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(peer);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;   }</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(found);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(found, -1);</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <span class="keywordflow">return</span> peer;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;}</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">/*! \brief Adds devicestate to local channels */</span></div><div class="line"><a name="l00308"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a2fa5e01de83caeddebc1192f8884db5d">  308</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#a2fa5e01de83caeddebc1192f8884db5d">local_devicestate</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>)</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;{</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;   <span class="keywordtype">int</span> is_inuse = 0;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <span class="keywordtype">int</span> res = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;   <span class="keywordtype">char</span> *opts;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *lp;</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it;</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <span class="comment">/* Strip options if they exist */</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;   opts = strchr(exten, <span class="charliteral">&#39;/&#39;</span>);</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="keywordflow">if</span> (opts) {</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      *opts = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   }</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   context = strchr(exten, <span class="charliteral">&#39;@&#39;</span>);</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;   <span class="keywordflow">if</span> (!context) {</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;         <span class="stringliteral">&quot;Someone used Local/%s somewhere without a @context. This is bad.\n&quot;</span>, data);</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   }</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;   *context++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   it = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(locals, 0);</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;   <span class="keywordflow">for</span> (; (lp = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(lp, -1)) {</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(lp);</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      <span class="keywordflow">if</span> (!strcmp(exten, lp-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">exten</a>)</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;         &amp;&amp; !strcmp(context, lp-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>)) {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;         res = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;         <span class="keywordflow">if</span> (lp-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;lp-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#aeccb8e47f59ed0393a2755e0e7d927e1">AST_UNREAL_CARETAKER_THREAD</a>)) {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            is_inuse = 1;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;         }</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      }</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(lp);</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;      <span class="keywordflow">if</span> (is_inuse) {</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;         res = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(lp, -1);</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;      }</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;   }</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it);</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Checking if extension %s@%s exists (devicestate)\n&quot;</span>, exten, context);</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, context, exten, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;         res = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;   }</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;}</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#aa2268e1d9c8beea6d0de0c7af97b42ca">  362</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/dcb/structast__multi__channel__blob.html">ast_multi_channel_blob</a> *<a class="code" href="../../de/d47/core__local_8c.html#aa2268e1d9c8beea6d0de0c7af97b42ca">local_channel_optimization_blob</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p,</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      <span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object)</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;{</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dcb/structast__multi__channel__blob.html">ast_multi_channel_blob</a> *payload;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, local_one_snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, local_two_snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;   local_one_snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>));</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;   <span class="keywordflow">if</span> (!local_one_snapshot) {</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;   }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   local_two_snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <span class="keywordflow">if</span> (!local_two_snapshot) {</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   }</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;   payload = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafe90e356833a3ec8ba6020a39d0689b9">ast_multi_channel_blob_create</a>(json_object);</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga9a3ff91f86f5f2e7e60571246c8e5873">ast_multi_channel_blob_add_channel</a>(payload, <span class="stringliteral">&quot;1&quot;</span>, local_one_snapshot);</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga9a3ff91f86f5f2e7e60571246c8e5873">ast_multi_channel_blob_add_channel</a>(payload, <span class="stringliteral">&quot;2&quot;</span>, local_two_snapshot);</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;   <span class="keywordflow">return</span> payload;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;}</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">/*! \brief Callback for \ref ast_unreal_pvt_callbacks \ref optimization_started_cb */</span></div><div class="line"><a name="l00390"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a5de2da08a00f136d2fc5dca749a91b0f">  390</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d47/core__local_8c.html#a5de2da08a00f136d2fc5dca749a91b0f">local_optimization_started_cb</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/df3/structast__unreal__pvt.html">ast_unreal_pvt</a> *base, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *source,</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../de/dea/core__unreal_8h.html#abc6dcce8e64173a023700dd4288d7c97">ast_unreal_channel_indicator</a> dest, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;{</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json_object, <a class="code" href="../../d4/d05/json_8h.html#a8055cb3a9f4d7d5842826e6157ae00db">ast_json_null</a>(), <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/dcb/structast__multi__channel__blob.html">ast_multi_channel_blob</a> *, payload, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p = (<span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *)base;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da6/core__local_8h.html#a8f023d0ccc8c7d3365abf4d60412deb5">ast_local_optimization_begin_type</a>()) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;   }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: i, s: I}&quot;</span>,</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;         <span class="stringliteral">&quot;dest&quot;</span>, dest, <span class="stringliteral">&quot;id&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)<span class="keywordtype">id</span>);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;   }</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;   payload = <a class="code" href="../../de/d47/core__local_8c.html#aa2268e1d9c8beea6d0de0c7af97b42ca">local_channel_optimization_blob</a>(p, json_object);</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;   <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   }</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;   <span class="keywordflow">if</span> (source) {</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, source_snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      source_snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(source));</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordflow">if</span> (!source_snapshot) {</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      }</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga9a3ff91f86f5f2e7e60571246c8e5873">ast_multi_channel_blob_add_channel</a>(payload, <span class="stringliteral">&quot;source&quot;</span>, source_snapshot);</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;   }</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../d5/da6/core__local_8h.html#a8f023d0ccc8c7d3365abf4d60412deb5">ast_local_optimization_begin_type</a>(), payload);</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;   }</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>), msg);</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">/*! \brief Callback for \ref ast_unreal_pvt_callbacks \ref optimization_finished_cb */</span></div><div class="line"><a name="l00433"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#ac43b245aa7e65bb5e250ffd278ec2f40">  433</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d47/core__local_8c.html#ac43b245aa7e65bb5e250ffd278ec2f40">local_optimization_finished_cb</a>(<span class="keyword">struct</span> <a class="code" href="../../d6/df3/structast__unreal__pvt.html">ast_unreal_pvt</a> *<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <span class="keywordtype">int</span> success, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <span class="keywordtype">id</span>)</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;{</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json_object, <a class="code" href="../../d4/d05/json_8h.html#a8055cb3a9f4d7d5842826e6157ae00db">ast_json_null</a>(), <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/dcb/structast__multi__channel__blob.html">ast_multi_channel_blob</a> *, payload, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p = (<span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *)base;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da6/core__local_8h.html#a6f6f7583dcbd0b63d59bdfe79f654945">ast_local_optimization_end_type</a>()) {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;   }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: i, s: I}&quot;</span>, <span class="stringliteral">&quot;success&quot;</span>, success, <span class="stringliteral">&quot;id&quot;</span>, (<a class="code" href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a>)<span class="keywordtype">id</span>);</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;   }</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;   payload = <a class="code" href="../../de/d47/core__local_8c.html#aa2268e1d9c8beea6d0de0c7af97b42ca">local_channel_optimization_blob</a>(p, json_object);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;   <span class="keywordflow">if</span> (!payload) {</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;   }</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../d5/da6/core__local_8h.html#a6f6f7583dcbd0b63d59bdfe79f654945">ast_local_optimization_end_type</a>(), payload);</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;   }</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>), msg);</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;}</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;</div><div class="line"><a name="l00463"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#aacb88b428949346ccf4ab8eda6970bd1">  463</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a> *<a class="code" href="../../de/d47/core__local_8c.html#aacb88b428949346ccf4ab8eda6970bd1">local_message_to_ami</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>)</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;{</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/dcb/structast__multi__channel__blob.html">ast_multi_channel_blob</a> *obj = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *blob = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga54c9b2b1131c872d25a1395882333ae3">ast_multi_channel_blob_get_json</a>(obj);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *local_snapshot_one;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *local_snapshot_two;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, local_channel_one, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, local_channel_two, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, event_buffer, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   local_snapshot_one = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac6cf4ef94e11b14625a81ba56f89a183">ast_multi_channel_blob_get_channel</a>(obj, <span class="stringliteral">&quot;1&quot;</span>);</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;   local_snapshot_two = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac6cf4ef94e11b14625a81ba56f89a183">ast_multi_channel_blob_get_channel</a>(obj, <span class="stringliteral">&quot;2&quot;</span>);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   <span class="keywordflow">if</span> (!local_snapshot_one || !local_snapshot_two) {</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;   }</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;   event_buffer = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(1024);</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;   local_channel_one = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(local_snapshot_one, <span class="stringliteral">&quot;LocalOne&quot;</span>);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;   local_channel_two = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(local_snapshot_two, <span class="stringliteral">&quot;LocalTwo&quot;</span>);</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   <span class="keywordflow">if</span> (!event_buffer || !local_channel_one || !local_channel_two) {</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;   }</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message) == <a class="code" href="../../d5/da6/core__local_8h.html#a8f023d0ccc8c7d3365abf4d60412deb5">ast_local_optimization_begin_type</a>()) {</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *source_snapshot;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, source_str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *dest_uniqueid;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      source_snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gac6cf4ef94e11b14625a81ba56f89a183">ast_multi_channel_blob_get_channel</a>(obj, <span class="stringliteral">&quot;source&quot;</span>);</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      <span class="keywordflow">if</span> (source_snapshot) {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;         source_str = <a class="code" href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a>(source_snapshot, <span class="stringliteral">&quot;Source&quot;</span>);</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;         <span class="keywordflow">if</span> (!source_str) {</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;         }</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      }</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      dest_uniqueid = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(blob, <span class="stringliteral">&quot;dest&quot;</span>) == <a class="code" href="../../de/dea/core__unreal_8h.html#abc6dcce8e64173a023700dd4288d7c97add17eccb0c0c8596b9327fd0fad20742">AST_UNREAL_OWNER</a> ?</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;            local_snapshot_one-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a> : local_snapshot_two-&gt;<a class="code" href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">base</a>-&gt;<a class="code" href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">uniqueid</a>;</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keyword">event</span> = <span class="stringliteral">&quot;LocalOptimizationBegin&quot;</span>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">if</span> (source_str) {</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;event_buffer, 0, <span class="stringliteral">&quot;%s&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(source_str));</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;      }</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;event_buffer, 0, <span class="stringliteral">&quot;DestUniqueId: %s\r\n&quot;</span>, dest_uniqueid);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;event_buffer, 0, <span class="stringliteral">&quot;Id: %u\r\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(blob, <span class="stringliteral">&quot;id&quot;</span>)));</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message) == <a class="code" href="../../d5/da6/core__local_8h.html#a6f6f7583dcbd0b63d59bdfe79f654945">ast_local_optimization_end_type</a>()) {</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keyword">event</span> = <span class="stringliteral">&quot;LocalOptimizationEnd&quot;</span>;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;event_buffer, 0, <span class="stringliteral">&quot;Success: %s\r\n&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(blob, <span class="stringliteral">&quot;success&quot;</span>)) ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;event_buffer, 0, <span class="stringliteral">&quot;Id: %u\r\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>) <a class="code" href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(blob, <span class="stringliteral">&quot;id&quot;</span>)));</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message) == <a class="code" href="../../d5/da6/core__local_8h.html#aacf7aa4abdef7f39643948a814d3e1f9">ast_local_bridge_type</a>()) {</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;      <span class="keyword">event</span> = <span class="stringliteral">&quot;LocalBridge&quot;</span>;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;event_buffer, 0, <span class="stringliteral">&quot;Context: %s\r\n&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(blob, <span class="stringliteral">&quot;context&quot;</span>)));</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;event_buffer, 0, <span class="stringliteral">&quot;Exten: %s\r\n&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(blob, <span class="stringliteral">&quot;exten&quot;</span>)));</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;event_buffer, 0, <span class="stringliteral">&quot;LocalOptimization: %s\r\n&quot;</span>, <a class="code" href="../../d4/d05/json_8h.html#ae19fc17ca5bc416b135feb64bfeb6b9e">ast_json_is_true</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(blob, <span class="stringliteral">&quot;can_optimize&quot;</span>)) ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   }</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a>(<a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, event,</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span>,</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(local_channel_one),</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(local_channel_two),</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(event_buffer));</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;}</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment"> * \brief Post the \ref ast_local_bridge_type \ref stasis message</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment"> * \param p local_pvt to raise the local bridge message</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00540"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a71086fbc353a3b15afe97defe127d131">  540</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d47/core__local_8c.html#a71086fbc353a3b15afe97defe127d131">publish_local_bridge_message</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;{</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/dcb/structast__multi__channel__blob.html">ast_multi_channel_blob</a> *, multi_blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, blob, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, one_snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a> *, two_snapshot, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *owner;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/da6/core__local_8h.html#aacf7aa4abdef7f39643948a814d3e1f9">ast_local_bridge_type</a>()) {</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;   }</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <a class="code" href="../../de/dea/core__unreal_8h.html#aee6431a3ba70b90b669de8bd0d3334ab">ast_unreal_lock_all</a>(&amp;p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, &amp;chan, &amp;owner);</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;   blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s, s: s, s: b}&quot;</span>,</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;      <span class="stringliteral">&quot;context&quot;</span>, p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>,</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;      <span class="stringliteral">&quot;exten&quot;</span>, p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">exten</a>,</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;      <span class="stringliteral">&quot;can_optimize&quot;</span>, !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#a47d17d1d47d65d45b278fb7e26027f97">AST_UNREAL_NO_OPTIMIZATION</a>));</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;   <span class="keywordflow">if</span> (!blob) {</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   }</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;   multi_blob = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gafe90e356833a3ec8ba6020a39d0689b9">ast_multi_channel_blob_create</a>(blob);</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;   <span class="keywordflow">if</span> (!multi_blob) {</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;   }</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;   one_snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(owner));</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">if</span> (!one_snapshot) {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;   }</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;   two_snapshot = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;   <span class="keywordflow">if</span> (!two_snapshot) {</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;   }</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga9a3ff91f86f5f2e7e60571246c8e5873">ast_multi_channel_blob_add_channel</a>(multi_blob, <span class="stringliteral">&quot;1&quot;</span>, one_snapshot);</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga9a3ff91f86f5f2e7e60571246c8e5873">ast_multi_channel_blob_add_channel</a>(multi_blob, <span class="stringliteral">&quot;2&quot;</span>, two_snapshot);</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;   msg = <a class="code" href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a>(<a class="code" href="../../d5/da6/core__local_8h.html#aacf7aa4abdef7f39643948a814d3e1f9">ast_local_bridge_type</a>(), multi_blob);</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;   }</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a>(owner), msg);</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a>:</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(owner);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(owner);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(&amp;p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>);</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;}</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div><div class="line"><a name="l00599"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a36ca4008cc93eb1ee59194e732ee6b8a">  599</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#a36ca4008cc93eb1ee59194e732ee6b8a">ast_local_setup_bridge</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, <span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a>, <span class="keyword">struct</span> <a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *<a class="code" href="../../d2/d17/structlocal__bridge.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>)</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;{</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *found;</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;   <span class="comment">/* Sanity checks. */</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;   <span class="keywordflow">if</span> (!ast || !bridge) {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(features);</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   p = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   found = p ? <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(locals, p, 0) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <span class="keywordflow">if</span> (found) {</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(found);</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      <span class="keywordflow">if</span> (found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#aca731531d68f5a15cd5d927abb5740c5">type</a> == <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da90d3c5d66511308989ef4545d72adc5f">LOCAL_CALL_ACTION_DIALPLAN</a></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;         &amp;&amp; found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;         &amp;&amp; found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a84d1435c5b8d387806714ea7079304b7">chan</a></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;         &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#aeccb8e47f59ed0393a2755e0e7d927e1">AST_UNREAL_CARETAKER_THREAD</a>)) {</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, +1);</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;         <span class="keywordflow">if</span> (swap) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(swap);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;         }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;         found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#aca731531d68f5a15cd5d927abb5740c5">type</a> = <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da1d8347c3eb33285a4f2e2dd57a41a978">LOCAL_CALL_ACTION_BRIDGE</a>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;         found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a41e600f905922b7a8225f1da337a62ed">join</a> = <a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;         found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a> = <a class="code" href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a>;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;         found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a65633fdc6178dc8d9f754fda0166d16e">features</a> = <a class="code" href="../../d2/d17/structlocal__bridge.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         res = 0;</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;         <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(features);</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;      }</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(found);</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(found, -1);</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   }</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;}</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#ac2e6544ffc24e3c97e1b028c1d5a4957">  641</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#ac2e6544ffc24e3c97e1b028c1d5a4957">ast_local_setup_masquerade</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">masq</a>)</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;{</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *found;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;   <span class="comment">/* Sanity checks. */</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;   <span class="keywordflow">if</span> (!ast || !masq) {</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;   }</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   p = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   found = p ? <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(locals, p, 0) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;   <span class="keywordflow">if</span> (found) {</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(found);</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;      <span class="keywordflow">if</span> (found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#aca731531d68f5a15cd5d927abb5740c5">type</a> == <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da90d3c5d66511308989ef4545d72adc5f">LOCAL_CALL_ACTION_DIALPLAN</a></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;         &amp;&amp; found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a></div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;         &amp;&amp; found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a84d1435c5b8d387806714ea7079304b7">chan</a></div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;         &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#aeccb8e47f59ed0393a2755e0e7d927e1">AST_UNREAL_CARETAKER_THREAD</a>)) {</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(masq);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;         found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#aca731531d68f5a15cd5d927abb5740c5">type</a> = <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da36557343c7753f1e969383a5921dbec9">LOCAL_CALL_ACTION_MASQUERADE</a>;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;         found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">masq</a> = <a class="code" href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">masq</a>;</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;         res = 0;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;      }</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(found);</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(found, -1);</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   }</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;}</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;<span class="comment">/*! \brief Initiate new call, part of PBX interface</span></div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="comment"> *         dest is the dial string */</span></div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a282de5be1a50fbd2194768755f3fde23">  677</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#a282de5be1a50fbd2194768755f3fde23">local_call</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, <span class="keyword">const</span> <span class="keywordtype">char</span> *dest, <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;{</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   <span class="keywordtype">int</span> pvt_locked = 0;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *owner = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="keywordtype">char</span> *reduced_dest = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(dest);</div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;   <span class="keywordtype">char</span> *slash;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *chan_cid;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <span class="keywordflow">if</span> (!p) {</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;   }</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <span class="comment">/* since we are letting go of channel locks that were locked coming into</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">    * this function, then we need to give the tech pvt a ref */</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(p, 1);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(ast);</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;   <a class="code" href="../../de/dea/core__unreal_8h.html#aee6431a3ba70b90b669de8bd0d3334ab">ast_unreal_lock_all</a>(&amp;p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, &amp;chan, &amp;owner);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   pvt_locked = 1;</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keywordflow">if</span> (owner != ast) {</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;      res = -1;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;      <span class="keywordflow">goto</span> return_cleanup;</div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;   }</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;   <span class="keywordflow">if</span> (!owner || !chan) {</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;      res = -1;</div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;      <span class="keywordflow">goto</span> return_cleanup;</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;   }</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;   <a class="code" href="../../de/dea/core__unreal_8h.html#a52f2bf8e0ea4a9292dbf3dd60d813b83">ast_unreal_call_setup</a>(owner, chan);</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="comment">    * If the local channel has /n on the end of it, we need to lop</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">    * that off for our argument to setting up the CC_INTERFACES</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="comment">    * variable.</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keywordflow">if</span> ((slash = strrchr(reduced_dest, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;      *slash = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;   }</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;   <a class="code" href="../../de/dc8/ccss_8h.html#a96b06671059cd5d6600917d1c028452f">ast_set_cc_interfaces_chanvar</a>(chan, reduced_dest);</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(p);</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;   pvt_locked = 0;</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(owner);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;   chan_cid = <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.valid,</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(chan)-&gt;<span class="keywordtype">id</span>.<a class="code" href="../../d6/d49/structnumber.html">number</a>.str, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;   <span class="keywordflow">if</span> (chan_cid) {</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;      chan_cid = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(chan_cid);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;   }</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;   res = -1;</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;   <span class="keywordflow">switch</span> (p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#aca731531d68f5a15cd5d927abb5740c5">type</a>) {</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da90d3c5d66511308989ef4545d72adc5f">LOCAL_CALL_ACTION_DIALPLAN</a>:</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">exten</a>, 1, chan_cid)) {</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;No such extension/context %s@%s while calling Local channel\n&quot;</span>,</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;            p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">exten</a>, p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;         <a class="code" href="../../de/d47/core__local_8c.html#a71086fbc353a3b15afe97defe127d131">publish_local_bridge_message</a>(p);</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;         <span class="comment">/* Start switch on sub channel */</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;         res = <a class="code" href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a>(chan);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;      }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da1d8347c3eb33285a4f2e2dd57a41a978">LOCAL_CALL_ACTION_BRIDGE</a>:</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;      <a class="code" href="../../de/d47/core__local_8c.html#a71086fbc353a3b15afe97defe127d131">publish_local_bridge_message</a>(p);</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;      res = <a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a41e600f905922b7a8225f1da337a62ed">join</a>, chan, p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a>,</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;         p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>, <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a>);</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a41e600f905922b7a8225f1da337a62ed">join</a>, -1);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;      p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a41e600f905922b7a8225f1da337a62ed">join</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a>);</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;      p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;      p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a65633fdc6178dc8d9f754fda0166d16e">features</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da36557343c7753f1e969383a5921dbec9">LOCAL_CALL_ACTION_MASQUERADE</a>:</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;      <a class="code" href="../../de/d47/core__local_8c.html#a71086fbc353a3b15afe97defe127d131">publish_local_bridge_message</a>(p);</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#a8043e35bcff5fb2d410dd161ac6e4360">ast_channel_move</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">masq</a>, chan);</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;      <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;         <span class="comment">/* Chan is now an orphaned zombie.  Destroy it. */</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(chan);</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;      }</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;      p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">masq</a> = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">masq</a>);</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   }</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(p);</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#aeccb8e47f59ed0393a2755e0e7d927e1">AST_UNREAL_CARETAKER_THREAD</a>);</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(p);</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   }</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <span class="comment">/* we already unlocked them, clear them here so the cleanup label won&#39;t touch them. */</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   owner = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(owner);</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;return_cleanup:</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <span class="keywordflow">if</span> (p) {</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;      <span class="keywordflow">if</span> (pvt_locked) {</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(p);</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;      }</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(p, -1);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   }</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   }</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="comment">    * owner is supposed to be == to ast, if it is, don&#39;t unlock it</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="comment">    * because ast must exit locked</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <span class="keywordflow">if</span> (owner) {</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;      <span class="keywordflow">if</span> (owner != ast) {</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(owner);</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;      }</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(owner);</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;      <span class="comment">/* we have to exit with ast locked */</span></div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(ast);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   }</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;}</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;<span class="comment">/*! \brief Hangup a call through the local proxy channel */</span></div><div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#ad93a911b38a7898024708bc097b57aaa">  811</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#ad93a911b38a7898024708bc097b57aaa">local_hangup</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast)</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;{</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(ast);</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <span class="keywordflow">if</span> (!p) {</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;   }</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;   <span class="comment">/* give the pvt a ref to fulfill calling requirements. */</span></div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(p, +1);</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;   res = <a class="code" href="../../de/dea/core__unreal_8h.html#a6ac78d0ab735c236df975d62bdf865ee">ast_unreal_hangup</a>(&amp;p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, ast);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;   <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;      <span class="keywordtype">int</span> unlink;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(p);</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;      unlink = !p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> &amp;&amp; !p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(p);</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      <span class="keywordflow">if</span> (unlink) {</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(locals, p);</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      }</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;   }</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(p, -1);</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;}</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment"> * \brief struct local_pvt destructor.</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;<span class="comment"> * \param vdoomed Object to destroy.</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a341920c3da474ce09d240733315dc561">  846</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d47/core__local_8c.html#a341920c3da474ce09d240733315dc561">local_pvt_destructor</a>(<span class="keywordtype">void</span> *vdoomed)</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;{</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *doomed = vdoomed;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;   <span class="keywordflow">switch</span> (doomed-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#aca731531d68f5a15cd5d927abb5740c5">type</a>) {</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da90d3c5d66511308989ef4545d72adc5f">LOCAL_CALL_ACTION_DIALPLAN</a>:</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da1d8347c3eb33285a4f2e2dd57a41a978">LOCAL_CALL_ACTION_BRIDGE</a>:</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(doomed-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a41e600f905922b7a8225f1da337a62ed">join</a>);</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(doomed-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">swap</a>);</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(doomed-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">bridge</a>.<a class="code" href="../../d2/d17/structlocal__bridge.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>);</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da36557343c7753f1e969383a5921dbec9">LOCAL_CALL_ACTION_MASQUERADE</a>:</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(doomed-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">action</a>.<a class="code" href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">masq</a>);</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   }</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;   <a class="code" href="../../de/dea/core__unreal_8h.html#a626487b2c5bcd06d653b0585966fa652">ast_unreal_destructor</a>(&amp;doomed-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;}</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;<span class="comment">/*! \brief Create a call structure */</span></div><div class="line"><a name="l00866"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a1c52c6de8b4cbb654c20ec582950bddc">  866</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *<a class="code" href="../../de/d47/core__local_8c.html#a1c52c6de8b4cbb654c20ec582950bddc">local_alloc</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *data, <span class="keyword">struct</span> <a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology)</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;{</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *pvt;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   <span class="keywordtype">char</span> *opts;</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;   pvt = (<span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *) <a class="code" href="../../de/dea/core__unreal_8h.html#a71bc61a95d73739e9a383895328153a5">ast_unreal_alloc_stream_topology</a>(<span class="keyword">sizeof</span>(*pvt), <a class="code" href="../../de/d47/core__local_8c.html#a341920c3da474ce09d240733315dc561">local_pvt_destructor</a>, topology);</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;   <span class="keywordflow">if</span> (!pvt) {</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   }</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a8e2a12ecf414fe4b30130e7d7e23708a">callbacks</a> = &amp;<a class="code" href="../../de/d47/core__local_8c.html#afa315cbd2576e826f5ee9da318bbbd8c">local_unreal_callbacks</a>;</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;<span class="comment">    * Local channels intercept MOH by default.</span></div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;<span class="comment">    *</span></div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">    * This is a silly default because it represents state held by</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="comment">    * the local channels.  Unless local channel optimization is</span></div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;<span class="comment">    * disabled, the state will dissapear when the local channels</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;<span class="comment">    * optimize out.</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#a2d201793065a9b7ec5db126eb5dc793f">AST_UNREAL_MOH_INTERCEPT</a>);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="comment">/* Look for options */</span></div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <span class="keywordflow">if</span> ((opts = strchr(parse, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;      *opts++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;      <span class="keywordflow">if</span> (strchr(opts, <span class="charliteral">&#39;n&#39;</span>)) {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#a47d17d1d47d65d45b278fb7e26027f97">AST_UNREAL_NO_OPTIMIZATION</a>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;      }</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;      <span class="keywordflow">if</span> (strchr(opts, <span class="charliteral">&#39;j&#39;</span>)) {</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#a47d17d1d47d65d45b278fb7e26027f97">AST_UNREAL_NO_OPTIMIZATION</a>)) {</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a09abe21e12f90d900a42e110cd0e3310">jb_conf</a>, <a class="code" href="../../dc/d14/abstract__jb_8h.html#a91d74b317405fff79ca4459da11f98e3af49c3e265d3ff27e62d8c38779d89dd9">AST_JB_ENABLED</a>);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;You must use the &#39;n&#39; option with the &#39;j&#39; option to enable the jitter buffer\n&quot;</span>);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;         }</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      }</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;      <span class="keywordflow">if</span> (strchr(opts, <span class="charliteral">&#39;m&#39;</span>)) {</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#a2d201793065a9b7ec5db126eb5dc793f">AST_UNREAL_MOH_INTERCEPT</a>);</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      }</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;   }</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;   <span class="comment">/* Look for a context */</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   <span class="keywordflow">if</span> ((context = strchr(parse, <span class="charliteral">&#39;@&#39;</span>))) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      *context++ = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;   }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(context, <span class="stringliteral">&quot;default&quot;</span>), <span class="keyword">sizeof</span>(pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>));</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">exten</a>, parse, <span class="keyword">sizeof</span>(pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">exten</a>));</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;   snprintf(pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a8ac4f05ce7902eaf3d508a96f810334a">name</a>, <span class="keyword">sizeof</span>(pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a8ac4f05ce7902eaf3d508a96f810334a">name</a>), <span class="stringliteral">&quot;%s@%s&quot;</span>, pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">exten</a>, pvt-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>);</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;   <span class="keywordflow">return</span> pvt; <span class="comment">/* this is returned with a ref */</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;}</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">/*! \brief Part of PBX interface */</span></div><div class="line"><a name="l00922"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a42fd7736b71d3a69295c9c3688a954bd">  922</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d47/core__local_8c.html#a42fd7736b71d3a69295c9c3688a954bd">local_request</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> *cause)</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;{</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;   topology = <a class="code" href="../../d8/d95/stream_8h.html#ab57b837e53f8ea2335ec9dc00cdc0c0c">ast_stream_topology_create_from_format_cap</a>(cap);</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="keywordflow">if</span> (!topology) {</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   }</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   chan = <a class="code" href="../../de/d47/core__local_8c.html#afc0a9dd20337f59366378ec86066ba27">local_request_with_stream_topology</a>(type, topology, assignedids, requestor, data, cause);</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   <a class="code" href="../../d8/d95/stream_8h.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a>(topology);</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <span class="keywordflow">return</span> chan;</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;}</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;<span class="comment">/*! \brief Part of PBX interface */</span></div><div class="line"><a name="l00940"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#afc0a9dd20337f59366378ec86066ba27">  940</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../de/d47/core__local_8c.html#afc0a9dd20337f59366378ec86066ba27">local_request_with_stream_topology</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *topology, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a> *assignedids, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *requestor, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> *cause)</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;{</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a> *audio_filtered_topology;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;   <span class="keywordtype">int</span> i;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p;</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a> <a class="code" href="../../df/d3c/structast__channel.html#a62f8995a6eac6c8a48205a6f3815d54b">callid</a>;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   <span class="comment">/* Create a copy of the requested topology as we don&#39;t have ownership over</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;<span class="comment">    * the one that is passed in.</span></div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   audio_filtered_topology = <a class="code" href="../../d8/d95/stream_8h.html#a00b605b453fe5ff538e361126d600303">ast_stream_topology_clone</a>(topology);</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   <span class="keywordflow">if</span> (!audio_filtered_topology) {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   }</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   <span class="comment">/* Some users of Local channels request every known format in the</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">    * universe. The core itself automatically pruned this list down to a single</span></div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;<span class="comment">    * &quot;best&quot; format for audio in non-multistream. We replicate the logic here to</span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">    * do the same thing.</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../d8/d95/stream_8h.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a>(audio_filtered_topology); ++i) {</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d4/d17/structast__stream.html">ast_stream</a> *stream;</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;      <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *tmp_fmt = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d98/structast__format.html">ast_format</a> *best_audio_fmt = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *caps;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;      stream = <a class="code" href="../../d8/d95/stream_8h.html#aa4a9c0de95417c5db8eda8544cd1631d">ast_stream_topology_get_stream</a>(audio_filtered_topology, i);</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d8/d95/stream_8h.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a>(stream) != <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a> ||</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;         <a class="code" href="../../d8/d95/stream_8h.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a>(stream) == <a class="code" href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a>) {</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;      }</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      <span class="comment">/* Respect the immutable state of formats on the stream and create a new</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">       * format capabilities to replace the existing one.</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      caps = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;      <span class="keywordflow">if</span> (!caps) {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(audio_filtered_topology, -1);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      }</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <span class="comment">/* The ast_translator_best_choice function treats both caps as const</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;<span class="comment">       * but does not declare it in the API.</span></div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      res = <a class="code" href="../../db/d39/translate_8h.html#a67f43da0468e888ba70f0d001499e3e7">ast_translator_best_choice</a>((<span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *)<a class="code" href="../../d8/d95/stream_8h.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(stream), local_tech.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>,</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;         &amp;tmp_fmt, &amp;best_audio_fmt);</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;      <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *tech_codecs = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *request_codecs = <a class="code" href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No translator path exists for channel type %s (native %s) to %s\n&quot;</span>, type,</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;            <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(local_tech.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, &amp;tech_codecs),</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;            <a class="code" href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a>(<a class="code" href="../../d8/d95/stream_8h.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a>(stream), &amp;request_codecs));</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;         <span class="comment">/* If there are no formats then we abort */</span></div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(caps, -1);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(audio_filtered_topology, -1);</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;      }</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;      <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(caps, best_audio_fmt, 0);</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;      <a class="code" href="../../d8/d95/stream_8h.html#a8dc44f43dab4a5484631812d9bbc3ae9">ast_stream_set_formats</a>(stream, caps);</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(caps, -1);</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(tmp_fmt, -1);</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(best_audio_fmt, -1);</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;   }</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   <span class="comment">/* Allocate a new private structure and then Asterisk channels */</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;   p = <a class="code" href="../../de/d47/core__local_8c.html#a1c52c6de8b4cbb654c20ec582950bddc">local_alloc</a>(data, audio_filtered_topology);</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(audio_filtered_topology, -1);</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="keywordflow">if</span> (!p) {</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;   }</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;   callid = <a class="code" href="../../d1/d8c/logger_8h.html#a5b3f39ea262ffa795ce4b597968ad00b">ast_read_threadstorage_callid</a>();</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;   chan = <a class="code" href="../../de/dea/core__unreal_8h.html#a19fc2390f9ee8aff8defe3bbe99c8198">ast_unreal_new_channels</a>(&amp;p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, &amp;local_tech, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a>, <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a>,</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;      p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">exten</a>, p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>, assignedids, requestor, callid);</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(locals, p);</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   }</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(p, -1); <span class="comment">/* kill the ref from the alloc */</span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;   <span class="keywordflow">return</span> chan;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;}</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;<span class="comment">/*! \brief CLI command &quot;local show channels&quot; */</span></div><div class="line"><a name="l01030"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a36c5d4ca60db345cd702a5ed9f0c4ca6"> 1030</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/d47/core__local_8c.html#a36c5d4ca60db345cd702a5ed9f0c4ca6">locals_show</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;{</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p;</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> it;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;local show channels&quot;</span>;</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;         <span class="stringliteral">&quot;Usage: local show channels\n&quot;</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;         <span class="stringliteral">&quot;       Provides summary information on active local proxy channels.\n&quot;</span>;</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;   }</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   }</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(locals) == 0) {</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No local channels in use\n&quot;</span>);</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a>;</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;   }</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   it = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(locals, 0);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">while</span> ((p = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;it))) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(p);</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s -- %s\n&quot;</span>,</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;         p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a> ? <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">owner</a>) : <span class="stringliteral">&quot;&lt;unowned&gt;&quot;</span>,</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;         p-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>.<a class="code" href="../../d6/df3/structast__unreal__pvt.html#a8ac4f05ce7902eaf3d508a96f810334a">name</a>);</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(p);</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(p, -1);</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   }</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;it);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;}</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;</div><div class="line"><a name="l01069"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#ab56419f942fd8b5e73abe4e71afdf913"> 1069</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> <a class="code" href="../../de/d47/core__local_8c.html#ab56419f942fd8b5e73abe4e71afdf913">cli_local</a>[] = {</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../de/d47/core__local_8c.html#a36c5d4ca60db345cd702a5ed9f0c4ca6">locals_show</a>, <span class="stringliteral">&quot;List status of local channels&quot;</span>),</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;};</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;</div><div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a032f72c97267b6964fc9a37daf217934"> 1073</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#a032f72c97267b6964fc9a37daf217934">manager_optimize_away</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;{</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d84/structchannel.html">channel</a>;</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *p;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dd4/structlocal__pvt.html">local_pvt</a> *found;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;   channel = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Channel&quot;</span>);</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(channel)) {</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;&#39;Channel&#39; not specified.&quot;</span>);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   }</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;   chan = <a class="code" href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a>(channel);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Channel does not exist.&quot;</span>);</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   }</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   p = <a class="code" href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a>(chan);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(chan);</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   found = p ? <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(locals, p, 0) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;   <span class="keywordflow">if</span> (found) {</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(found);</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a>(&amp;found-&gt;<a class="code" href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">base</a>, <a class="code" href="../../de/dea/core__unreal_8h.html#a47d17d1d47d65d45b278fb7e26027f97">AST_UNREAL_NO_OPTIMIZATION</a>);</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(found);</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(found, -1);</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, <span class="stringliteral">&quot;Queued channel to be optimized away&quot;</span>);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Unable to find channel&quot;</span>);</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   }</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;}</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;</div><div class="line"><a name="l01110"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a19be9dc9ebec2a2688b21c6d508e0a23"> 1110</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#a19be9dc9ebec2a2688b21c6d508e0a23">locals_cmp_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;{</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   <span class="keywordflow">return</span> (obj == arg) ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> : 0;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;}</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;<span class="comment"> * \brief Shutdown the local proxy channel.</span></div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;<span class="comment"> * \return Nothing</span></div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01122"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#ab8dea80daa912f92d2ee79d6f2eb642a"> 1122</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../de/d47/core__local_8c.html#ab8dea80daa912f92d2ee79d6f2eb642a">local_shutdown</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;{</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   <span class="comment">/* First, take us out of the channel loop */</span></div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(cli_local, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_local));</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;LocalOptimizeAway&quot;</span>);</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a>(&amp;local_tech);</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(locals, -1);</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   locals = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(local_tech.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;   local_tech.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../d5/da6/core__local_8h.html#a8f023d0ccc8c7d3365abf4d60412deb5">ast_local_optimization_begin_type</a>);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../d5/da6/core__local_8h.html#a6f6f7583dcbd0b63d59bdfe79f654945">ast_local_optimization_end_type</a>);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(<a class="code" href="../../d5/da6/core__local_8h.html#aacf7aa4abdef7f39643948a814d3e1f9">ast_local_bridge_type</a>);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;}</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;</div><div class="line"><a name="l01140"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#a793027a091729ed260ef271e15557a60"> 1140</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#a793027a091729ed260ef271e15557a60">ast_local_init</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;{</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../d5/da6/core__local_8h.html#a8f023d0ccc8c7d3365abf4d60412deb5">ast_local_optimization_begin_type</a>)) {</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   }</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../d5/da6/core__local_8h.html#a6f6f7583dcbd0b63d59bdfe79f654945">ast_local_optimization_end_type</a>)) {</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;   }</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(<a class="code" href="../../d5/da6/core__local_8h.html#aacf7aa4abdef7f39643948a814d3e1f9">ast_local_bridge_type</a>)) {</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   }</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   <span class="keywordflow">if</span> (!(local_tech.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a> = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>))) {</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   }</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#a0c30a7fc5698f5e075cfe620cddfc7f1">ast_format_cap_append_by_type</a>(local_tech.<a class="code" href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">capabilities</a>, <a class="code" href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a>);</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;   locals = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../de/d47/core__local_8c.html#a19be9dc9ebec2a2688b21c6d508e0a23">locals_cmp_cb</a>);</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <span class="keywordflow">if</span> (!locals) {</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   }</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <span class="comment">/* Make sure we can register our channel type */</span></div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a>(&amp;local_tech)) {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Unable to register channel class &#39;Local&#39;\n&quot;</span>);</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   }</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(cli_local, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_local));</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;   <a class="code" href="../../db/d45/manager_8h.html#a1d34461b8a3210b19e66f06bcdebfeb3">ast_manager_register_xml_core</a>(<span class="stringliteral">&quot;LocalOptimizeAway&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a>|<a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../de/d47/core__local_8c.html#a032f72c97267b6964fc9a37daf217934">manager_optimize_away</a>);</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   <a class="code" href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a>(<a class="code" href="../../de/d47/core__local_8c.html#ab8dea80daa912f92d2ee79d6f2eb642a">local_shutdown</a>);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;}</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"><a class="line" href="../../de/d47/core__local_8c.html#aa9d0af0b82721bcbe1de5c5a2ee4423b"> 1177</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../de/d47/core__local_8c.html#aa9d0af0b82721bcbe1de5c5a2ee4423b">local_setoption</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *ast, <span class="keywordtype">int</span> option, <span class="keywordtype">void</span> *<a class="code" href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">data</a>, <span class="keywordtype">int</span> datalen)</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;{</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="keywordflow">switch</span> (option) {</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ad712464e42606f08900cf2057a10ba08">AST_OPTION_SECURE_SIGNALING</a>:</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aacda7851474c2c67e1a959b2d82d672f">AST_OPTION_SECURE_MEDIA</a>:</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;         <span class="keywordflow">return</span> 0; <span class="comment">/* local calls (like forwardings) are secure always */</span></div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../de/dea/core__unreal_8h.html#a1fa50409321a37fa9c227c15add49af5">ast_unreal_setoption</a>(ast, option, data, datalen);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   }</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;}</div><div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="structast__manager__event__blob_html"><div class="ttname"><a href="../../dd/d96/structast__manager__event__blob.html">ast_manager_event_blob</a></div><div class="ttdoc">Struct containing info for an AMI event to send out. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00491">manager.h:491</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="core__local_8h_html"><div class="ttname"><a href="../../d5/da6/core__local_8h.html">core_local.h</a></div><div class="ttdoc">Local proxy channel special access. </div></div>
<div class="ttc" id="cli_8h_html_a5c4130cf8f1e93acfdd84416cebf1aef"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a></div><div class="ttdeci">#define AST_CLI_DEFINE(fn, txt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00197">cli.h:197</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a8ff938fb2f815be425fd2859a21e6d61"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a8ff938fb2f815be425fd2859a21e6d61">ast_channel_tech::type</a></div><div class="ttdeci">const char *const type</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00630">channel.h:630</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html_ab6103ad1bbc12922f93c0526204573cf"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html#ab6103ad1bbc12922f93c0526204573cf">ast_channel_snapshot::base</a></div><div class="ttdeci">struct ast_channel_snapshot_base * base</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00146">stasis_channels.h:146</a></div></div>
<div class="ttc" id="core__local_8c_html_a032f72c97267b6964fc9a37daf217934"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a032f72c97267b6964fc9a37daf217934">manager_optimize_away</a></div><div class="ttdeci">static int manager_optimize_away(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l01073">core_local.c:1073</a></div></div>
<div class="ttc" id="stasis__channels_8h_html"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html">stasis_channels.h</a></div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="core__unreal_8h_html_abc6dcce8e64173a023700dd4288d7c97add17eccb0c0c8596b9327fd0fad20742"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#abc6dcce8e64173a023700dd4288d7c97add17eccb0c0c8596b9327fd0fad20742">AST_UNREAL_OWNER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00050">core_unreal.h:50</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="core__local_8c_html_ac43b245aa7e65bb5e250ffd278ec2f40"><div class="ttname"><a href="../../de/d47/core__local_8c.html#ac43b245aa7e65bb5e250ffd278ec2f40">local_optimization_finished_cb</a></div><div class="ttdeci">static void local_optimization_finished_cb(struct ast_unreal_pvt *base, int success, unsigned int id)</div><div class="ttdoc">Callback for ast_unreal_pvt_callbacks optimization_finished_cb. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00433">core_local.c:433</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a81348336816e0a2f6f3a76da487a46dc">AST_STATE_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00036">channelstate.h:36</a></div></div>
<div class="ttc" id="core__local_8c_html_a19be9dc9ebec2a2688b21c6d508e0a23"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a19be9dc9ebec2a2688b21c6d508e0a23">locals_cmp_cb</a></div><div class="ttdeci">static int locals_cmp_cb(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l01110">core_local.c:1110</a></div></div>
<div class="ttc" id="structlocal__pvt_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../dc/dd4/structlocal__pvt.html#ac25ea00ee3f082df06e0cf468cbde240">local_pvt::context</a></div><div class="ttdeci">char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00236">core_local.c:236</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="channel_8h_html_a3dc9d235c0e16ab0a6812b4aa6572cce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3dc9d235c0e16ab0a6812b4aa6572cce">ast_channel_tech_pvt</a></div><div class="ttdeci">void * ast_channel_tech_pvt(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00565">channel_internal_api.c:565</a></div></div>
<div class="ttc" id="core__local_8c_html_adc07bb06c3ca3a6ebb11ad83e9a2cc7da90d3c5d66511308989ef4545d72adc5f"><div class="ttname"><a href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da90d3c5d66511308989ef4545d72adc5f">LOCAL_CALL_ACTION_DIALPLAN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00199">core_local.c:199</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="devicestate_8h_html"><div class="ttname"><a href="../../da/da2/devicestate_8h.html">devicestate.h</a></div><div class="ttdoc">Device state management. </div></div>
<div class="ttc" id="translate_8h_html"><div class="ttname"><a href="../../db/d39/translate_8h.html">translate.h</a></div><div class="ttdoc">Support for translation of data formats. translate.c. </div></div>
<div class="ttc" id="core__local_8c_html_a2b73f14ae5dc7e11bafc684936cf26d0"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a2b73f14ae5dc7e11bafc684936cf26d0">ast_local_get_peer</a></div><div class="ttdeci">struct ast_channel * ast_local_get_peer(struct ast_channel *ast)</div><div class="ttdoc">Get the other local channel in the pair. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00276">core_local.c:276</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660a10482c2bc6340e09ed02b00bc0e3f433">AST_STATE_RING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00040">channelstate.h:40</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="channel_8h_html_a53b708b7fc71dcbcd33acae0ad4d7ef8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a53b708b7fc71dcbcd33acae0ad4d7ef8">ast_channel_unregister</a></div><div class="ttdeci">void ast_channel_unregister(const struct ast_channel_tech *tech)</div><div class="ttdoc">Unregister a channel technology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00570">channel.c:570</a></div></div>
<div class="ttc" id="structast__unreal__pvt_html_a8e2a12ecf414fe4b30130e7d7e23708a"><div class="ttname"><a href="../../d6/df3/structast__unreal__pvt.html#a8e2a12ecf414fe4b30130e7d7e23708a">ast_unreal_pvt::callbacks</a></div><div class="ttdeci">struct ast_unreal_pvt_callbacks * callbacks</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00092">core_unreal.h:92</a></div></div>
<div class="ttc" id="structast__channel_html_a19aa04db5508cf9496602e694dc69e2f"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a19aa04db5508cf9496602e694dc69e2f">ast_channel::tech_pvt</a></div><div class="ttdeci">void * tech_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00075">channel_internal_api.c:75</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="stream_8h_html_a86319542b92fb0dc6b2ed337d83cf8ce"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a86319542b92fb0dc6b2ed337d83cf8ce">ast_stream_get_type</a></div><div class="ttdeci">enum ast_media_type ast_stream_get_type(const struct ast_stream *stream)</div><div class="ttdoc">Get the media type of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00316">stream.c:316</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="stasis_8h_html"><div class="ttname"><a href="../../dd/d79/stasis_8h.html">stasis.h</a></div><div class="ttdoc">Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. </div></div>
<div class="ttc" id="structast__cli__entry_html"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a></div><div class="ttdoc">descriptor for a cli entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00171">cli.h:171</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="pbx_8h_html_a9a937fbb3b5f4e68880a9c5714a29ce5"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9a937fbb3b5f4e68880a9c5714a29ce5">ast_pbx_start</a></div><div class="ttdeci">enum ast_pbx_result ast_pbx_start(struct ast_channel *c)</div><div class="ttdoc">Create a new thread and start the PBX. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04712">pbx.c:4712</a></div></div>
<div class="ttc" id="format__cap_8h_html_a035f4aa78f172a18311bfa15dd232c6f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a035f4aa78f172a18311bfa15dd232c6f">AST_FORMAT_CAP_NAMES_LEN</a></div><div class="ttdeci">#define AST_FORMAT_CAP_NAMES_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00326">format_cap.h:326</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="json_8h_html_ae2cc29409ec389e8feaf38ec3a585d83"><div class="ttname"><a href="../../d4/d05/json_8h.html#ae2cc29409ec389e8feaf38ec3a585d83">ast_json_int_t</a></div><div class="ttdeci">AST_JSON_INT_T ast_json_int_t</div><div class="ttdoc">Primarily used to cast when packing to an &quot;I&quot; type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d05/json_8h_source.html#l00087">json.h:87</a></div></div>
<div class="ttc" id="core__local_8c_html_a71535bf985a1a06d548fd73a0a0ec32c"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a71535bf985a1a06d548fd73a0a0ec32c">tdesc</a></div><div class="ttdeci">static const char tdesc[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00136">core_local.c:136</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="astobj2_8h_html_add41bd9979cb8642f81dd38aa2dfcd6d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a></div><div class="ttdeci">#define ao2_container_alloc_list(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01335">astobj2.h:1335</a></div></div>
<div class="ttc" id="structast__unreal__pvt_html_a9241175b397dfd032c4cadbc8c9c2d05"><div class="ttname"><a href="../../d6/df3/structast__unreal__pvt.html#a9241175b397dfd032c4cadbc8c9c2d05">ast_unreal_pvt::owner</a></div><div class="ttdeci">struct ast_channel * owner</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00093">core_unreal.h:93</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a52e47430bd2da159275e4c48483e4369"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a52e47430bd2da159275e4c48483e4369">ast_unreal_sendhtml</a></div><div class="ttdeci">int ast_unreal_sendhtml(struct ast_channel *ast, int subclass, const char *data, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00846">core_unreal.c:846</a></div></div>
<div class="ttc" id="json_8h_html_ae19fc17ca5bc416b135feb64bfeb6b9e"><div class="ttname"><a href="../../d4/d05/json_8h.html#ae19fc17ca5bc416b135feb64bfeb6b9e">ast_json_is_true</a></div><div class="ttdeci">int ast_json_is_true(const struct ast_json *value)</div><div class="ttdoc">Check if value is JSON true. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00253">json.c:253</a></div></div>
<div class="ttc" id="structast__channel__snapshot_html"><div class="ttname"><a href="../../dd/dbe/structast__channel__snapshot.html">ast_channel_snapshot</a></div><div class="ttdoc">Structure representing a snapshot of channel state. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00145">stasis_channels.h:145</a></div></div>
<div class="ttc" id="core__local_8c_html_aa2268e1d9c8beea6d0de0c7af97b42ca"><div class="ttname"><a href="../../de/d47/core__local_8c.html#aa2268e1d9c8beea6d0de0c7af97b42ca">local_channel_optimization_blob</a></div><div class="ttdeci">static struct ast_multi_channel_blob * local_channel_optimization_blob(struct local_pvt *p, struct ast_json *json_object)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00362">core_local.c:362</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a47d17d1d47d65d45b278fb7e26027f97"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a47d17d1d47d65d45b278fb7e26027f97">AST_UNREAL_NO_OPTIMIZATION</a></div><div class="ttdeci">#define AST_UNREAL_NO_OPTIMIZATION</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00108">core_unreal.h:108</a></div></div>
<div class="ttc" id="stream_8h_html_a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a343d6a412f1391cbbe60bbc1736f3288adda44d968899f20b2f5c167d38ab23e7">AST_STREAM_STATE_REMOVED</a></div><div class="ttdoc">Set when the stream has been removed/declined. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d95/stream_8h_source.html#l00078">stream.h:78</a></div></div>
<div class="ttc" id="manager_8h_html_ab71472ea55b4114f460a4459e3dcd18b"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab71472ea55b4114f460a4459e3dcd18b">ast_manager_build_channel_state_string_prefix</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string_prefix(const struct ast_channel_snapshot *snapshot, const char *prefix)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00487">manager_channels.c:487</a></div></div>
<div class="ttc" id="structast__unreal__pvt_html_a09abe21e12f90d900a42e110cd0e3310"><div class="ttname"><a href="../../d6/df3/structast__unreal__pvt.html#a09abe21e12f90d900a42e110cd0e3310">ast_unreal_pvt::jb_conf</a></div><div class="ttdeci">struct ast_jb_conf jb_conf</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00096">core_unreal.h:96</a></div></div>
<div class="ttc" id="stasis_8h_html_a31197e193b1dfd6c122ff6d7c7f6b3fa"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_CLEANUP(name)</div><div class="ttdoc">Boiler-plate messaging macro for cleaning up message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01523">stasis.h:1523</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="structast__assigned__ids_html"><div class="ttname"><a href="../../da/de5/structast__assigned__ids.html">ast_assigned_ids</a></div><div class="ttdoc">Structure to pass both assignedid values to channel drivers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00605">channel.h:605</a></div></div>
<div class="ttc" id="structlocal__bridge_html_a3bf3c4e34892d0033814ab5fec0e006f"><div class="ttname"><a href="../../d2/d17/structlocal__bridge.html#a3bf3c4e34892d0033814ab5fec0e006f">local_bridge::swap</a></div><div class="ttdeci">struct ast_channel * swap</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00211">core_local.c:211</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="structast__format_html"><div class="ttname"><a href="../../d0/d98/structast__format.html">ast_format</a></div><div class="ttdoc">Definition of a media format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00043">format.c:43</a></div></div>
<div class="ttc" id="structast__channel__snapshot__base_html_a753c7b39e3284d771f13f513b003d033"><div class="ttname"><a href="../../d6/d29/structast__channel__snapshot__base.html#a753c7b39e3284d771f13f513b003d033">ast_channel_snapshot_base::uniqueid</a></div><div class="ttdeci">const ast_string_field uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00112">stasis_channels.h:112</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="format__cap_8h_html_a0c30a7fc5698f5e075cfe620cddfc7f1"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a0c30a7fc5698f5e075cfe620cddfc7f1">ast_format_cap_append_by_type</a></div><div class="ttdeci">int ast_format_cap_append_by_type(struct ast_format_cap *cap, enum ast_media_type type)</div><div class="ttdoc">Add all codecs Asterisk knows about for a specific type to the capabilities structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00216">format_cap.c:216</a></div></div>
<div class="ttc" id="core__unreal_8h_html_aeccb8e47f59ed0393a2755e0e7d927e1"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#aeccb8e47f59ed0393a2755e0e7d927e1">AST_UNREAL_CARETAKER_THREAD</a></div><div class="ttdeci">#define AST_UNREAL_CARETAKER_THREAD</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00107">core_unreal.h:107</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="stream_8h_html_ab57b837e53f8ea2335ec9dc00cdc0c0c"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ab57b837e53f8ea2335ec9dc00cdc0c0c">ast_stream_topology_create_from_format_cap</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_create_from_format_cap(struct ast_format_cap *cap)</div><div class="ttdoc">A helper function that, given a format capabilities structure, creates a topology and separates the m...</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00848">stream.c:848</a></div></div>
<div class="ttc" id="logger_8h_html_a6db44a7e26f0bc42801fc7225817c6a1"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6db44a7e26f0bc42801fc7225817c6a1">ast_callid</a></div><div class="ttdeci">unsigned int ast_callid</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00087">logger.h:87</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aacda7851474c2c67e1a959b2d82d672f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aacda7851474c2c67e1a959b2d82d672f">AST_OPTION_SECURE_MEDIA</a></div><div class="ttdeci">#define AST_OPTION_SECURE_MEDIA</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00515">include/asterisk/frame.h:515</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="channel_8h_html_ab5f3776fda943e52820ceeee5835c1b4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab5f3776fda943e52820ceeee5835c1b4">ast_channel_register</a></div><div class="ttdeci">int ast_channel_register(const struct ast_channel_tech *tech)</div><div class="ttdoc">Register a channel technology (a new channel driver) Called by a channel module to register the kind ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00539">channel.c:539</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="strings_8h_html_a7fc844c12b769ccded05e7514036e241"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a7fc844c12b769ccded05e7514036e241">ast_str_alloca</a></div><div class="ttdeci">#define ast_str_alloca(init_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00800">strings.h:800</a></div></div>
<div class="ttc" id="core__local_8c_html_ad93a911b38a7898024708bc097b57aaa"><div class="ttname"><a href="../../de/d47/core__local_8c.html#ad93a911b38a7898024708bc097b57aaa">local_hangup</a></div><div class="ttdeci">static int local_hangup(struct ast_channel *ast)</div><div class="ttdoc">Hangup a call through the local proxy channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00811">core_local.c:811</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a19fc2390f9ee8aff8defe3bbe99c8198"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a19fc2390f9ee8aff8defe3bbe99c8198">ast_unreal_new_channels</a></div><div class="ttdeci">struct ast_channel * ast_unreal_new_channels(struct ast_unreal_pvt *p, const struct ast_channel_tech *tech, int semi1_state, int semi2_state, const char *exten, const char *context, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, ast_callid callid)</div><div class="ttdoc">Create the semi1 and semi2 unreal channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l01162">core_unreal.c:1162</a></div></div>
<div class="ttc" id="stream_8h_html_aa4a9c0de95417c5db8eda8544cd1631d"><div class="ttname"><a href="../../d8/d95/stream_8h.html#aa4a9c0de95417c5db8eda8544cd1631d">ast_stream_topology_get_stream</a></div><div class="ttdeci">struct ast_stream * ast_stream_topology_get_stream(const struct ast_stream_topology *topology, unsigned int position)</div><div class="ttdoc">Get a specific stream from the topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00788">stream.c:788</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a94a4d30c378717a36519a45eefbc890b"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a94a4d30c378717a36519a45eefbc890b">ast_unreal_indicate</a></div><div class="ttdeci">int ast_unreal_indicate(struct ast_channel *ast, int condition, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00622">core_unreal.c:622</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__channel_html_a8f64897c7ccc5c13f276d1d07c4e7095"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a8f64897c7ccc5c13f276d1d07c4e7095">ast_channel::data</a></div><div class="ttdeci">const char * data</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00083">channel_internal_api.c:83</a></div></div>
<div class="ttc" id="channel_8h_html_a8043e35bcff5fb2d410dd161ac6e4360"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8043e35bcff5fb2d410dd161ac6e4360">ast_channel_move</a></div><div class="ttdeci">int ast_channel_move(struct ast_channel *dest, struct ast_channel *source)</div><div class="ttdoc">Move a channel from its current location to a new location. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10867">channel.c:10867</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_a8fd806ad19b8f5513a4cf18cbf77532c"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#a8fd806ad19b8f5513a4cf18cbf77532c">end</a></div><div class="ttdeci">char * end</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00073">eagi_proxy.c:73</a></div></div>
<div class="ttc" id="manager_8h_html_a1d34461b8a3210b19e66f06bcdebfeb3"><div class="ttname"><a href="../../db/d45/manager_8h.html#a1d34461b8a3210b19e66f06bcdebfeb3">ast_manager_register_xml_core</a></div><div class="ttdeci">#define ast_manager_register_xml_core(action, authority, func)</div><div class="ttdoc">Register a manager callback using XML documentation to describe the manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00197">manager.h:197</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="stream_8h_html_a8dc44f43dab4a5484631812d9bbc3ae9"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a8dc44f43dab4a5484631812d9bbc3ae9">ast_stream_set_formats</a></div><div class="ttdeci">void ast_stream_set_formats(struct ast_stream *stream, struct ast_format_cap *caps)</div><div class="ttdoc">Set the current negotiated formats of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00365">stream.c:365</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ad3debd15062b4b9463e5703724dd9a1f"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a></div><div class="ttdeci">void ast_bridge_features_destroy(struct ast_bridge_features *features)</div><div class="ttdoc">Destroy an allocated bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03741">bridge.c:3741</a></div></div>
<div class="ttc" id="manager_8h_html_a3ace32eaf9a3fc2f7d15121c64bf8ecd"><div class="ttname"><a href="../../db/d45/manager_8h.html#a3ace32eaf9a3fc2f7d15121c64bf8ecd">ast_manager_event_blob_create</a></div><div class="ttdeci">struct ast_manager_event_blob * ast_manager_event_blob_create(int event_flags, const char *manager_event, const char *extra_fields_fmt,...)</div><div class="ttdoc">Construct a ast_manager_event_blob. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09727">manager.c:9727</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga54c9b2b1131c872d25a1395882333ae3"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga54c9b2b1131c872d25a1395882333ae3">ast_multi_channel_blob_get_json</a></div><div class="ttdeci">struct ast_json * ast_multi_channel_blob_get_json(struct ast_multi_channel_blob *obj)</div><div class="ttdoc">Retrieve the JSON blob from a ast_multi_channel_blob. Returned ast_json is still owned by obj...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01030">stasis_channels.c:1030</a></div></div>
<div class="ttc" id="translate_8h_html_a67f43da0468e888ba70f0d001499e3e7"><div class="ttname"><a href="../../db/d39/translate_8h.html#a67f43da0468e888ba70f0d001499e3e7">ast_translator_best_choice</a></div><div class="ttdeci">int ast_translator_best_choice(struct ast_format_cap *dst_cap, struct ast_format_cap *src_cap, struct ast_format **dst_fmt_out, struct ast_format **src_fmt_out)</div><div class="ttdoc">Chooses the best translation path. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l01385">translate.c:1385</a></div></div>
<div class="ttc" id="stream_8h_html"><div class="ttname"><a href="../../d8/d95/stream_8h.html">stream.h</a></div><div class="ttdoc">Media Stream API. </div></div>
<div class="ttc" id="logger_8h_html_a5b3f39ea262ffa795ce4b597968ad00b"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a5b3f39ea262ffa795ce4b597968ad00b">ast_read_threadstorage_callid</a></div><div class="ttdeci">ast_callid ast_read_threadstorage_callid(void)</div><div class="ttdoc">extracts the callerid from the thread </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d22/logger_8c_source.html#l01962">logger.c:1962</a></div></div>
<div class="ttc" id="core__local_8c_html_a5de2da08a00f136d2fc5dca749a91b0f"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a5de2da08a00f136d2fc5dca749a91b0f">local_optimization_started_cb</a></div><div class="ttdeci">static void local_optimization_started_cb(struct ast_unreal_pvt *base, struct ast_channel *source, enum ast_unreal_channel_indicator dest, unsigned int id)</div><div class="ttdoc">Callback for ast_unreal_pvt_callbacks optimization_started_cb. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00390">core_local.c:390</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="core__local_8c_html_a42fd7736b71d3a69295c9c3688a954bd"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a42fd7736b71d3a69295c9c3688a954bd">local_request</a></div><div class="ttdeci">static struct ast_channel * local_request(const char *type, struct ast_format_cap *cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *data, int *cause)</div><div class="ttdoc">Part of PBX interface. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00922">core_local.c:922</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a3df8555d28dd20b248fa6819673eaf4e"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a3df8555d28dd20b248fa6819673eaf4e">ast_unreal_fixup</a></div><div class="ttdeci">int ast_unreal_fixup(struct ast_channel *oldchan, struct ast_channel *newchan)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00369">core_unreal.c:369</a></div></div>
<div class="ttc" id="core__local_8c_html_ab56419f942fd8b5e73abe4e71afdf913"><div class="ttname"><a href="../../de/d47/core__local_8c.html#ab56419f942fd8b5e73abe4e71afdf913">cli_local</a></div><div class="ttdeci">static struct ast_cli_entry cli_local[]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l01069">core_local.c:1069</a></div></div>
<div class="ttc" id="structnumber_html"><div class="ttname"><a href="../../d6/d49/structnumber.html">number</a></div><div class="ttdoc">Number structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d55/app__followme_8c_source.html#l00154">app_followme.c:154</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a2d201793065a9b7ec5db126eb5dc793f"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a2d201793065a9b7ec5db126eb5dc793f">AST_UNREAL_MOH_INTERCEPT</a></div><div class="ttdeci">#define AST_UNREAL_MOH_INTERCEPT</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00109">core_unreal.h:109</a></div></div>
<div class="ttc" id="json_8h_html_a8055cb3a9f4d7d5842826e6157ae00db"><div class="ttname"><a href="../../d4/d05/json_8h.html#a8055cb3a9f4d7d5842826e6157ae00db">ast_json_null</a></div><div class="ttdeci">struct ast_json * ast_json_null(void)</div><div class="ttdoc">Get the JSON null value. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00248">json.c:248</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="core__local_8c_html_a793027a091729ed260ef271e15557a60"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a793027a091729ed260ef271e15557a60">ast_local_init</a></div><div class="ttdeci">int ast_local_init(void)</div><div class="ttdoc">Initialize the local proxy channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l01140">core_local.c:1140</a></div></div>
<div class="ttc" id="core__local_8c_html_a36ca4008cc93eb1ee59194e732ee6b8a"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a36ca4008cc93eb1ee59194e732ee6b8a">ast_local_setup_bridge</a></div><div class="ttdeci">int ast_local_setup_bridge(struct ast_channel *ast, struct ast_bridge *bridge, struct ast_channel *swap, struct ast_bridge_features *features)</div><div class="ttdoc">Setup the outgoing local channel to join a bridge on ast_call(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00599">core_local.c:599</a></div></div>
<div class="ttc" id="manager_8h_html_a420f0f755e1c3378b45ca7f6f0669ffa"><div class="ttname"><a href="../../db/d45/manager_8h.html#a420f0f755e1c3378b45ca7f6f0669ffa">EVENT_FLAG_SYSTEM</a></div><div class="ttdeci">#define EVENT_FLAG_SYSTEM</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00071">manager.h:71</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="bridge_8h_html_a582e1dd73a483ac881cff01fa07f39ae"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a></div><div class="ttdeci">int ast_bridge_impart(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, enum ast_bridge_impart_flags flags) attribute_warn_unused_result</div><div class="ttdoc">Impart a channel to a bridge (non-blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01924">bridge.c:1924</a></div></div>
<div class="ttc" id="channel_8h_html"><div class="ttname"><a href="../../d5/d7b/channel_8h.html">channel.h</a></div><div class="ttdoc">General Asterisk PBX channel definitions. </div></div>
<div class="ttc" id="asterisk_8h_html_a412442e1beffe5bec07ed2e9ea72afc3"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#a412442e1beffe5bec07ed2e9ea72afc3">ast_register_cleanup</a></div><div class="ttdeci">int ast_register_cleanup(void(*func)(void))</div><div class="ttdoc">Register a function to be executed before Asterisk gracefully exits. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00019">clicompat.c:19</a></div></div>
<div class="ttc" id="structlocal__pvt_html_a01ac602361510301b3613f38b600f36e"><div class="ttname"><a href="../../dc/dd4/structlocal__pvt.html#a01ac602361510301b3613f38b600f36e">local_pvt::base</a></div><div class="ttdeci">struct ast_unreal_pvt base</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00225">core_local.c:225</a></div></div>
<div class="ttc" id="structast__unreal__pvt__callbacks_html_a3c5890f67bf431d002c55d3ed27adfa0"><div class="ttname"><a href="../../df/d09/structast__unreal__pvt__callbacks.html#a3c5890f67bf431d002c55d3ed27adfa0">ast_unreal_pvt_callbacks::optimization_started</a></div><div class="ttdeci">void(*const optimization_started)(struct ast_unreal_pvt *p, struct ast_channel *source, enum ast_unreal_channel_indicator dest, unsigned int id)</div><div class="ttdoc">Called when an optimization attempt has started. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00069">core_unreal.h:69</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a626487b2c5bcd06d653b0585966fa652"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a626487b2c5bcd06d653b0585966fa652">ast_unreal_destructor</a></div><div class="ttdeci">void ast_unreal_destructor(void *vdoomed)</div><div class="ttdoc">struct ast_unreal_pvt destructor. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l01099">core_unreal.c:1099</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a1b651e46c0b2d93ed26b96c214b997a8">AST_MEDIA_TYPE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00031">codec.h:31</a></div></div>
<div class="ttc" id="core__local_8c_html_a36c5d4ca60db345cd702a5ed9f0c4ca6"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a36c5d4ca60db345cd702a5ed9f0c4ca6">locals_show</a></div><div class="ttdeci">static char * locals_show(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdoc">CLI command &quot;local show channels&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l01030">core_local.c:1030</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga9a3ff91f86f5f2e7e60571246c8e5873"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga9a3ff91f86f5f2e7e60571246c8e5873">ast_multi_channel_blob_add_channel</a></div><div class="ttdeci">void ast_multi_channel_blob_add_channel(struct ast_multi_channel_blob *obj, const char *role, struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Add a ast_channel_snapshot to a ast_multi_channel_blob object. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00956">stasis_channels.c:956</a></div></div>
<div class="ttc" id="astobj2_8h_html"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html">astobj2.h</a></div></div>
<div class="ttc" id="structlocal__bridge_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d2/d17/structlocal__bridge.html#a65633fdc6178dc8d9f754fda0166d16e">local_bridge::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00213">core_local.c:213</a></div></div>
<div class="ttc" id="channel_8h_html_af4e59494f74ad9e0c50170d9e276ad31"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a></div><div class="ttdeci">#define AST_MAX_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00135">channel.h:135</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="structmansession_html"><div class="ttname"><a href="../../d2/d8a/structmansession.html">mansession</a></div><div class="ttdoc">In case you didn&amp;#39;t read that giant block of text above the mansession_session struct, the struct mansession is named this solely to keep the API the same in Asterisk. This structure really represents data that is different from Manager action to Manager action. The mansession_session pointer contained within points to session-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01625">manager.c:1625</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a1fa50409321a37fa9c227c15add49af5"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a1fa50409321a37fa9c227c15add49af5">ast_unreal_setoption</a></div><div class="ttdeci">int ast_unreal_setoption(struct ast_channel *chan, int option, void *data, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00097">core_unreal.c:97</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="json_8h_html_a6772fcee88746a9d4f6ec6f240b76dd0"><div class="ttname"><a href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a></div><div class="ttdeci">const char * ast_json_string_get(const struct ast_json *string)</div><div class="ttdoc">Get the value of a JSON string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00273">json.c:273</a></div></div>
<div class="ttc" id="core__local_8c_html_afc0a9dd20337f59366378ec86066ba27"><div class="ttname"><a href="../../de/d47/core__local_8c.html#afc0a9dd20337f59366378ec86066ba27">local_request_with_stream_topology</a></div><div class="ttdeci">static struct ast_channel * local_request_with_stream_topology(const char *type, struct ast_stream_topology *topology, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *data, int *cause)</div><div class="ttdoc">Part of PBX interface. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00940">core_local.c:940</a></div></div>
<div class="ttc" id="abstract__jb_8h_html_a91d74b317405fff79ca4459da11f98e3af49c3e265d3ff27e62d8c38779d89dd9"><div class="ttname"><a href="../../dc/d14/abstract__jb_8h.html#a91d74b317405fff79ca4459da11f98e3af49c3e265d3ff27e62d8c38779d89dd9">AST_JB_ENABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d14/abstract__jb_8h_source.html#l00045">abstract_jb.h:45</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="stream_8h_html_ae8e2f46d218285e0f0ec97ba8ab77ffb"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ae8e2f46d218285e0f0ec97ba8ab77ffb">ast_stream_get_formats</a></div><div class="ttdeci">const struct ast_format_cap * ast_stream_get_formats(const struct ast_stream *stream)</div><div class="ttdoc">Get the current negotiated formats of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00330">stream.c:330</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="structast__channel__tech_html"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html">ast_channel_tech</a></div><div class="ttdoc">Structure to describe a channel &quot;technology&quot;, ie a channel driver See for examples: ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00629">channel.h:629</a></div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="structast__unreal__pvt_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d6/df3/structast__unreal__pvt.html#a84d1435c5b8d387806714ea7079304b7">ast_unreal_pvt::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00094">core_unreal.h:94</a></div></div>
<div class="ttc" id="structast__stream__topology_html"><div class="ttname"><a href="../../da/d35/structast__stream__topology.html">ast_stream_topology</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00123">stream.c:123</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="channel_8h_html_afdeaf9abb1aecc715313a4f62c1cf9c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a></div><div class="ttdeci">struct stasis_topic * ast_channel_topic(struct ast_channel *chan)</div><div class="ttdoc">A topic which publishes the events for a particular channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01502">channel_internal_api.c:1502</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a52f2bf8e0ea4a9292dbf3dd60d813b83"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a52f2bf8e0ea4a9292dbf3dd60d813b83">ast_unreal_call_setup</a></div><div class="ttdeci">void ast_unreal_call_setup(struct ast_channel *semi1, struct ast_channel *semi2)</div><div class="ttdoc">Setup unreal owner and chan channels before initiating call. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00870">core_unreal.c:870</a></div></div>
<div class="ttc" id="core__local_8c_html_afa315cbd2576e826f5ee9da318bbbd8c"><div class="ttname"><a href="../../de/d47/core__local_8c.html#afa315cbd2576e826f5ee9da318bbbd8c">local_unreal_callbacks</a></div><div class="ttdeci">struct ast_unreal_pvt_callbacks local_unreal_callbacks</div><div class="ttdoc">Callbacks from the unreal core when channel optimization occurs. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00167">core_local.c:167</a></div></div>
<div class="ttc" id="core__local_8h_html_a6f6f7583dcbd0b63d59bdfe79f654945"><div class="ttname"><a href="../../d5/da6/core__local_8h.html#a6f6f7583dcbd0b63d59bdfe79f654945">ast_local_optimization_end_type</a></div><div class="ttdeci">struct stasis_message_type * ast_local_optimization_end_type(void)</div><div class="ttdoc">Message type for when a local channel optimization completes. </div></div>
<div class="ttc" id="group__Group__AMI_html_gafadf012f66a9fd7ecf985ec5b9dee101"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a></div><div class="ttdeci">int ast_manager_unregister(const char *action)</div><div class="ttdoc">Unregister a registered manager command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07258">manager.c:7258</a></div></div>
<div class="ttc" id="manager_8h_html"><div class="ttname"><a href="../../db/d45/manager_8h.html">manager.h</a></div><div class="ttdoc">The AMI - Asterisk Manager Interface - is a TCP protocol created to manage Asterisk with third-party ...</div></div>
<div class="ttc" id="structlocal__pvt_html_aca731531d68f5a15cd5d927abb5740c5"><div class="ttname"><a href="../../dc/dd4/structlocal__pvt.html#aca731531d68f5a15cd5d927abb5740c5">local_pvt::type</a></div><div class="ttdeci">enum local_call_action type</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00234">core_local.c:234</a></div></div>
<div class="ttc" id="core__local_8c_html_adc07bb06c3ca3a6ebb11ad83e9a2cc7d"><div class="ttname"><a href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7d">local_call_action</a></div><div class="ttdeci">local_call_action</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00197">core_local.c:197</a></div></div>
<div class="ttc" id="core__local_8c_html_a71086fbc353a3b15afe97defe127d131"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a71086fbc353a3b15afe97defe127d131">publish_local_bridge_message</a></div><div class="ttdeci">static void publish_local_bridge_message(struct local_pvt *p)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00540">core_local.c:540</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a87e56045a9650da1a0991cff6a5883d9"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a87e56045a9650da1a0991cff6a5883d9">ast_unreal_write</a></div><div class="ttdeci">int ast_unreal_write(struct ast_channel *ast, struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00318">core_unreal.c:318</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="core__local_8c_html_a2ed2a62610af1f7e8c25b89001e35963"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a2ed2a62610af1f7e8c25b89001e35963">ast_local_unlock_all</a></div><div class="ttdeci">void ast_local_unlock_all(void *tech_pvt, struct ast_channel *base_chan, struct ast_channel *base_owner)</div><div class="ttdoc">Remove a reference to the given local channel&amp;#39;s private tech, unlock the given local channel&amp;#39;s privat...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00256">core_local.c:256</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a4965c000097a4852ac4b87b36f79a245"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a4965c000097a4852ac4b87b36f79a245">ast_unreal_digit_begin</a></div><div class="ttdeci">int ast_unreal_digit_begin(struct ast_channel *ast, char digit)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00779">core_unreal.c:779</a></div></div>
<div class="ttc" id="core__local_8c_html_a6d83e64e81a38a3cd94555a85fe07130"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a6d83e64e81a38a3cd94555a85fe07130">local_tech</a></div><div class="ttdeci">static struct ast_channel_tech local_tech</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00173">core_local.c:173</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="structlocal__pvt_html_a740364e243c4edddf4260922922bd163"><div class="ttname"><a href="../../dc/dd4/structlocal__pvt.html#a740364e243c4edddf4260922922bd163">local_pvt::action</a></div><div class="ttdeci">union local_pvt::@376 action</div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="stasis_8h_html_a72a06fdaec039fdfb5f36892e725f9ec"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a72a06fdaec039fdfb5f36892e725f9ec">stasis_message_create</a></div><div class="ttdeci">struct stasis_message * stasis_message_create(struct stasis_message_type *type, void *data)</div><div class="ttdoc">Create a new message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00174">stasis_message.c:174</a></div></div>
<div class="ttc" id="structast__unreal__pvt_html_a8ac4f05ce7902eaf3d508a96f810334a"><div class="ttname"><a href="../../d6/df3/structast__unreal__pvt.html#a8ac4f05ce7902eaf3d508a96f810334a">ast_unreal_pvt::name</a></div><div class="ttdeci">char name[AST_MAX_EXTENSION+AST_MAX_CONTEXT+2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00099">core_unreal.h:99</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00604">bridge.h:604</a></div></div>
<div class="ttc" id="codec_8h_html_a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841"><div class="ttname"><a href="../../d1/d16/codec_8h.html#a0f1467803be2cc40b53765e3df54c212a044356ace82a79fd7d127e97b03c7841">AST_MEDIA_TYPE_AUDIO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d16/codec_8h_source.html#l00032">codec.h:32</a></div></div>
<div class="ttc" id="structast__unreal__pvt_html"><div class="ttname"><a href="../../d6/df3/structast__unreal__pvt.html">ast_unreal_pvt</a></div><div class="ttdoc">The base pvt structure for local channel derivatives. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00091">core_unreal.h:91</a></div></div>
<div class="ttc" id="core__local_8c_html_a3ab2314f2722021435701bc08d7f9722"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a3ab2314f2722021435701bc08d7f9722">STASIS_MESSAGE_TYPE_DEFN</a></div><div class="ttdeci">STASIS_MESSAGE_TYPE_DEFN(ast_local_bridge_type,.to_ami=local_message_to_ami,)</div><div class="ttdoc">Define local channel message types. </div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="format__cap_8h_html_a4dff925fc9e3bb805b926d18447eb3eb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a4dff925fc9e3bb805b926d18447eb3eb">ast_format_cap_get_names</a></div><div class="ttdeci">const char * ast_format_cap_get_names(const struct ast_format_cap *cap, struct ast_str **buf)</div><div class="ttdoc">Get the names of codecs of a set of formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00736">format_cap.c:736</a></div></div>
<div class="ttc" id="core__unreal_8h_html_adba57ba4d5001a18178a940f91d2fd52"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#adba57ba4d5001a18178a940f91d2fd52">ast_unreal_write_stream</a></div><div class="ttdeci">int ast_unreal_write_stream(struct ast_channel *ast, int stream_num, struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00323">core_unreal.c:323</a></div></div>
<div class="ttc" id="structast__channel__tech_html_a0f943c30fc292bd35c9619493661920f"><div class="ttname"><a href="../../d4/d85/structast__channel__tech.html#a0f943c30fc292bd35c9619493661920f">ast_channel_tech::capabilities</a></div><div class="ttdeci">struct ast_format_cap * capabilities</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00633">channel.h:633</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a043bdfcf85546fb513f92a4112e32043"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a043bdfcf85546fb513f92a4112e32043">ast_unreal_digit_end</a></div><div class="ttdeci">int ast_unreal_digit_end(struct ast_channel *ast, char digit, unsigned int duration)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00801">core_unreal.c:801</a></div></div>
<div class="ttc" id="structast__channel_html_a62f8995a6eac6c8a48205a6f3815d54b"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a62f8995a6eac6c8a48205a6f3815d54b">ast_channel::callid</a></div><div class="ttdeci">ast_callid callid</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00098">channel_internal_api.c:98</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="structlocal__bridge_html_a41e600f905922b7a8225f1da337a62ed"><div class="ttname"><a href="../../d2/d17/structlocal__bridge.html#a41e600f905922b7a8225f1da337a62ed">local_bridge::join</a></div><div class="ttdeci">struct ast_bridge * join</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00209">core_local.c:209</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="channel_8h_html_abcf1aea85b924e9cd605040b86241e2a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abcf1aea85b924e9cd605040b86241e2a">AST_MAX_CONTEXT</a></div><div class="ttdeci">#define AST_MAX_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00136">channel.h:136</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ad712464e42606f08900cf2057a10ba08"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ad712464e42606f08900cf2057a10ba08">AST_OPTION_SECURE_SIGNALING</a></div><div class="ttdeci">#define AST_OPTION_SECURE_SIGNALING</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00514">include/asterisk/frame.h:514</a></div></div>
<div class="ttc" id="core__local_8c_html_a2fa5e01de83caeddebc1192f8884db5d"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a2fa5e01de83caeddebc1192f8884db5d">local_devicestate</a></div><div class="ttdeci">static int local_devicestate(const char *data)</div><div class="ttdoc">Adds devicestate to local channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00308">core_local.c:308</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="core__local_8c_html_a1c52c6de8b4cbb654c20ec582950bddc"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a1c52c6de8b4cbb654c20ec582950bddc">local_alloc</a></div><div class="ttdeci">static struct local_pvt * local_alloc(const char *data, struct ast_stream_topology *topology)</div><div class="ttdoc">Create a call structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00866">core_local.c:866</a></div></div>
<div class="ttc" id="res__pjsip__exten__state_8c_html_ae8731a90be4dc2d8272b7dfd8a001d4c"><div class="ttname"><a href="../../d2/d3d/res__pjsip__exten__state_8c.html#ae8731a90be4dc2d8272b7dfd8a001d4c">to_ami</a></div><div class="ttdeci">static void to_ami(struct ast_sip_subscription *sub, struct ast_str **buf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d3d/res__pjsip__exten__state_8c_source.html#l00542">res_pjsip_exten_state.c:542</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a3d66dffd828eee5208501563e1083cf7"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a3d66dffd828eee5208501563e1083cf7">ast_unreal_read</a></div><div class="ttdeci">struct ast_frame * ast_unreal_read(struct ast_channel *ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00313">core_unreal.c:313</a></div></div>
<div class="ttc" id="core__local_8c_html_ac2e6544ffc24e3c97e1b028c1d5a4957"><div class="ttname"><a href="../../de/d47/core__local_8c.html#ac2e6544ffc24e3c97e1b028c1d5a4957">ast_local_setup_masquerade</a></div><div class="ttdeci">int ast_local_setup_masquerade(struct ast_channel *ast, struct ast_channel *masq)</div><div class="ttdoc">Setup the outgoing local channel to masquerade into a channel on ast_call(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00641">core_local.c:641</a></div></div>
<div class="ttc" id="__private_8h_html"><div class="ttname"><a href="../../d4/d78/__private_8h.html">_private.h</a></div><div class="ttdoc">Prototypes for public functions only of internal interest,. </div></div>
<div class="ttc" id="core__unreal_8h_html_abc6dcce8e64173a023700dd4288d7c97"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#abc6dcce8e64173a023700dd4288d7c97">ast_unreal_channel_indicator</a></div><div class="ttdeci">ast_unreal_channel_indicator</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00049">core_unreal.h:49</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="stream_8h_html_a5eb43440630db819220df97b01f48922"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a5eb43440630db819220df97b01f48922">ast_stream_topology_get_count</a></div><div class="ttdeci">int ast_stream_topology_get_count(const struct ast_stream_topology *topology)</div><div class="ttdoc">Get the number of streams in a topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00765">stream.c:765</a></div></div>
<div class="ttc" id="core__local_8h_html_aacf7aa4abdef7f39643948a814d3e1f9"><div class="ttname"><a href="../../d5/da6/core__local_8h.html#aacf7aa4abdef7f39643948a814d3e1f9">ast_local_bridge_type</a></div><div class="ttdeci">struct stasis_message_type * ast_local_bridge_type(void)</div><div class="ttdoc">Message type for when two local channel halves are bridged together. </div></div>
<div class="ttc" id="utils_8h_html_a7b260320610a09017a9416398acd0a70"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7b260320610a09017a9416398acd0a70">ast_clear_flag</a></div><div class="ttdeci">#define ast_clear_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00077">utils.h:77</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="core__local_8c_html_aacb88b428949346ccf4ab8eda6970bd1"><div class="ttname"><a href="../../de/d47/core__local_8c.html#aacb88b428949346ccf4ab8eda6970bd1">local_message_to_ami</a></div><div class="ttdeci">static struct ast_manager_event_blob * local_message_to_ami(struct stasis_message *msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00463">core_local.c:463</a></div></div>
<div class="ttc" id="stream_8h_html_a00b605b453fe5ff538e361126d600303"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a00b605b453fe5ff538e361126d600303">ast_stream_topology_clone</a></div><div class="ttdeci">struct ast_stream_topology * ast_stream_topology_clone(const struct ast_stream_topology *topology)</div><div class="ttdoc">Create a deep clone of an existing stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00667">stream.c:667</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="core__local_8c_html_a282de5be1a50fbd2194768755f3fde23"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a282de5be1a50fbd2194768755f3fde23">local_call</a></div><div class="ttdeci">static int local_call(struct ast_channel *ast, const char *dest, int timeout)</div><div class="ttdoc">Initiate new call, part of PBX interface dest is the dial string. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00677">core_local.c:677</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="core__local_8h_html_a8f023d0ccc8c7d3365abf4d60412deb5"><div class="ttname"><a href="../../d5/da6/core__local_8h.html#a8f023d0ccc8c7d3365abf4d60412deb5">ast_local_optimization_begin_type</a></div><div class="ttdeci">struct stasis_message_type * ast_local_optimization_begin_type(void)</div><div class="ttdoc">Message type for when a local channel optimization begins. </div></div>
<div class="ttc" id="core__local_8c_html_a973a646143d042b91ec6248ea6ba00f1"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a973a646143d042b91ec6248ea6ba00f1">ast_local_lock_all</a></div><div class="ttdeci">void ast_local_lock_all(struct ast_channel *chan, void **tech_pvt, struct ast_channel **base_chan, struct ast_channel **base_owner)</div><div class="ttdoc">Add a reference to the local channel&amp;#39;s private tech, lock the local channel&amp;#39;s private base...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00241">core_local.c:241</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a2a58e21b81c349475178b88bcd3599b3"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a2a58e21b81c349475178b88bcd3599b3">ast_unreal_queryoption</a></div><div class="ttdeci">int ast_unreal_queryoption(struct ast_channel *ast, int option, void *data, int *datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00166">core_unreal.c:166</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga68c55b443ba97dc157b493aafd05c876"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga68c55b443ba97dc157b493aafd05c876">ast_channel_snapshot_get_latest</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_channel_snapshot_get_latest(const char *uniqueid)</div><div class="ttdoc">Obtain the latest ast_channel_snapshot from the Stasis Message Bus API cache. This is an ao2 object...</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00903">stasis_channels.c:903</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structlocal__pvt_html"><div class="ttname"><a href="../../dc/dd4/structlocal__pvt.html">local_pvt</a></div><div class="ttdoc">the local pvt structure for all channels </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00223">core_local.c:223</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="cli_8h_html"><div class="ttname"><a href="../../dc/db0/cli_8h.html">cli.h</a></div><div class="ttdoc">Standard Command Line Interface. </div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="core__unreal_8h_html_adaae5a585ad788986bfeb0c1e16fb0e9"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#adaae5a585ad788986bfeb0c1e16fb0e9">ast_unreal_answer</a></div><div class="ttdeci">int ast_unreal_answer(struct ast_channel *ast)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00254">core_unreal.c:254</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gac6cf4ef94e11b14625a81ba56f89a183"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gac6cf4ef94e11b14625a81ba56f89a183">ast_multi_channel_blob_get_channel</a></div><div class="ttdeci">struct ast_channel_snapshot * ast_multi_channel_blob_get_channel(struct ast_multi_channel_blob *obj, const char *role)</div><div class="ttdoc">Retrieve a channel snapshot associated with a specific role from a ast_multi_channel_blob. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00977">stasis_channels.c:977</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a71bc61a95d73739e9a383895328153a5"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a71bc61a95d73739e9a383895328153a5">ast_unreal_alloc_stream_topology</a></div><div class="ttdeci">struct ast_unreal_pvt * ast_unreal_alloc_stream_topology(size_t size, ao2_destructor_fn destructor, struct ast_stream_topology *topology)</div><div class="ttdoc">Allocate the base unreal struct for a derivative. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l01128">core_unreal.c:1128</a></div></div>
<div class="ttc" id="structast__multi__channel__blob_html"><div class="ttname"><a href="../../df/dcb/structast__multi__channel__blob.html">ast_multi_channel_blob</a></div><div class="ttdoc">A multi channel blob data structure for multi_channel_blob stasis messages. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00811">stasis_channels.c:811</a></div></div>
<div class="ttc" id="structast__stream_html"><div class="ttname"><a href="../../d4/d17/structast__stream.html">ast_stream</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00081">stream.c:81</a></div></div>
<div class="ttc" id="core__local_8c_html_a341920c3da474ce09d240733315dc561"><div class="ttname"><a href="../../de/d47/core__local_8c.html#a341920c3da474ce09d240733315dc561">local_pvt_destructor</a></div><div class="ttdeci">static void local_pvt_destructor(void *vdoomed)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00846">core_local.c:846</a></div></div>
<div class="ttc" id="channel_8h_html_aec583a3e25358ee552a4f3df53914cd0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a></div><div class="ttdeci">int ast_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02814">channel.c:2814</a></div></div>
<div class="ttc" id="structlocal__pvt_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../dc/dd4/structlocal__pvt.html#a78d4847658b695383d849efd12399b38">local_pvt::exten</a></div><div class="ttdeci">char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00238">core_local.c:238</a></div></div>
<div class="ttc" id="core__local_8c_html_adc07bb06c3ca3a6ebb11ad83e9a2cc7da1d8347c3eb33285a4f2e2dd57a41a978"><div class="ttname"><a href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da1d8347c3eb33285a4f2e2dd57a41a978">LOCAL_CALL_ACTION_BRIDGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00201">core_local.c:201</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__cli__args_html"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html">ast_cli_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00158">cli.h:158</a></div></div>
<div class="ttc" id="core__local_8c_html_adc07bb06c3ca3a6ebb11ad83e9a2cc7da36557343c7753f1e969383a5921dbec9"><div class="ttname"><a href="../../de/d47/core__local_8c.html#adc07bb06c3ca3a6ebb11ad83e9a2cc7da36557343c7753f1e969383a5921dbec9">LOCAL_CALL_ACTION_MASQUERADE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00203">core_local.c:203</a></div></div>
<div class="ttc" id="structlocal__pvt_html_ae38ae730b987d648a6fe1c84c8a13442"><div class="ttname"><a href="../../dc/dd4/structlocal__pvt.html#ae38ae730b987d648a6fe1c84c8a13442">local_pvt::masq</a></div><div class="ttdeci">struct ast_channel * masq</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00231">core_local.c:231</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="core__local_8c_html_aef9f33a8f0b0099c02a84d0c01d77aab"><div class="ttname"><a href="../../de/d47/core__local_8c.html#aef9f33a8f0b0099c02a84d0c01d77aab">locals</a></div><div class="ttdeci">static struct ao2_container * locals</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00138">core_local.c:138</a></div></div>
<div class="ttc" id="stream_8h_html_a88eca139ded2d5bbc6cdcf793febc265"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a88eca139ded2d5bbc6cdcf793febc265">ast_stream_topology_free</a></div><div class="ttdeci">void ast_stream_topology_free(struct ast_stream_topology *topology)</div><div class="ttdoc">Unreference and destroy a stream topology. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00743">stream.c:743</a></div></div>
<div class="ttc" id="channel_8h_html_ac7e42045272530c8678418993e75fd56"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac7e42045272530c8678418993e75fd56">ast_channel_get_by_name</a></div><div class="ttdeci">struct ast_channel * ast_channel_get_by_name(const char *name)</div><div class="ttdoc">Find a channel by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01454">channel.c:1454</a></div></div>
<div class="ttc" id="bridge_8h_html"><div class="ttname"><a href="../../d4/d56/bridge_8h.html">bridge.h</a></div><div class="ttdoc">Bridging API. </div></div>
<div class="ttc" id="cli_8h_html_a7cc1753a05a0821f6c70dd2bccfbab5c"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a7cc1753a05a0821f6c70dd2bccfbab5c">RESULT_SUCCESS</a></div><div class="ttdeci">#define RESULT_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00040">cli.h:40</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="json_8h_html_ad20fdcbab1ed5c078284a687cced2877"><div class="ttname"><a href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a></div><div class="ttdeci">intmax_t ast_json_integer_get(const struct ast_json *integer)</div><div class="ttdoc">Get the value from a JSON integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00322">json.c:322</a></div></div>
<div class="ttc" id="structast__unreal__pvt__callbacks_html"><div class="ttname"><a href="../../df/d09/structast__unreal__pvt__callbacks.html">ast_unreal_pvt_callbacks</a></div><div class="ttdoc">Callbacks that can be provided by concrete implementations of the unreal channel driver that will be ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dea/core__unreal_8h_source.html#l00058">core_unreal.h:58</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
<div class="ttc" id="core__local_8c_html_aa9d0af0b82721bcbe1de5c5a2ee4423b"><div class="ttname"><a href="../../de/d47/core__local_8c.html#aa9d0af0b82721bcbe1de5c5a2ee4423b">local_setoption</a></div><div class="ttdeci">static int local_setoption(struct ast_channel *chan, int option, void *data, int datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l01177">core_local.c:1177</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structlocal__pvt_html_a742d27f540faf87b545a0fcf2df50596"><div class="ttname"><a href="../../dc/dd4/structlocal__pvt.html#a742d27f540faf87b545a0fcf2df50596">local_pvt::bridge</a></div><div class="ttdeci">struct local_bridge bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00229">core_local.c:229</a></div></div>
<div class="ttc" id="core__unreal_8h_html_a6ac78d0ab735c236df975d62bdf865ee"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#a6ac78d0ab735c236df975d62bdf865ee">ast_unreal_hangup</a></div><div class="ttdeci">int ast_unreal_hangup(struct ast_unreal_pvt *p, struct ast_channel *ast)</div><div class="ttdoc">Hangup one end (maybe both ends) of an unreal channel derivative. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l01018">core_unreal.c:1018</a></div></div>
<div class="ttc" id="stream_8h_html_a6fdfb5754dad81680c197d5c9df44971"><div class="ttname"><a href="../../d8/d95/stream_8h.html#a6fdfb5754dad81680c197d5c9df44971">ast_stream_get_state</a></div><div class="ttdeci">enum ast_stream_state ast_stream_get_state(const struct ast_stream *stream)</div><div class="ttdoc">Get the current state of a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00373">stream.c:373</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gafe90e356833a3ec8ba6020a39d0689b9"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gafe90e356833a3ec8ba6020a39d0689b9">ast_multi_channel_blob_create</a></div><div class="ttdeci">struct ast_multi_channel_blob * ast_multi_channel_blob_create(struct ast_json *blob)</div><div class="ttdoc">Create a ast_multi_channel_blob suitable for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00881">stasis_channels.c:881</a></div></div>
<div class="ttc" id="core__unreal_8h_html_aee6431a3ba70b90b669de8bd0d3334ab"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#aee6431a3ba70b90b669de8bd0d3334ab">ast_unreal_lock_all</a></div><div class="ttdeci">void ast_unreal_lock_all(struct ast_unreal_pvt *p, struct ast_channel **outchan, struct ast_channel **outowner)</div><div class="ttdoc">Send an unreal pvt in with no locks held and get all locks. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00047">core_unreal.c:47</a></div></div>
<div class="ttc" id="ccss_8h_html_a96b06671059cd5d6600917d1c028452f"><div class="ttname"><a href="../../de/dc8/ccss_8h.html#a96b06671059cd5d6600917d1c028452f">ast_set_cc_interfaces_chanvar</a></div><div class="ttdeci">int ast_set_cc_interfaces_chanvar(struct ast_channel *chan, const char *const extension)</div><div class="ttdoc">Set the CC_INTERFACES channel variable for a channel using an. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d5a/ccss_8c_source.html#l03668">ccss.c:3668</a></div></div>
<div class="ttc" id="structlocal__bridge_html"><div class="ttname"><a href="../../d2/d17/structlocal__bridge.html">local_bridge</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l00207">core_local.c:207</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="core__local_8c_html_ab8dea80daa912f92d2ee79d6f2eb642a"><div class="ttname"><a href="../../de/d47/core__local_8c.html#ab8dea80daa912f92d2ee79d6f2eb642a">local_shutdown</a></div><div class="ttdeci">static void local_shutdown(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/core__local_8c_source.html#l01122">core_local.c:1122</a></div></div>
<div class="ttc" id="core__unreal_8h_html_aab2dfbf927d0a6c37e0e32d81b5fcc64"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html#aab2dfbf927d0a6c37e0e32d81b5fcc64">ast_unreal_sendtext</a></div><div class="ttdeci">int ast_unreal_sendtext(struct ast_channel *ast, const char *text)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d2e/core__unreal_8c_source.html#l00824">core_unreal.c:824</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
<div class="ttc" id="core__unreal_8h_html"><div class="ttname"><a href="../../de/dea/core__unreal_8h.html">core_unreal.h</a></div><div class="ttdoc">Unreal channel derivative framework. </div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:43:41 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
