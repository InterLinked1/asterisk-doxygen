<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: features.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">features.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Call Parking and Pickup API Includes code and algorithms from the Zapata library.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="../../db/de0/pbx_8h_source.html">asterisk/pbx.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../df/d90/linkedlists_8h_source.html">asterisk/linkedlists.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d4/d56/bridge_8h_source.html">asterisk/bridge.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for features.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d3c/features_8h__incl.png" border="0" usemap="#features_8h" alt=""/></div>
<map name="features_8h" id="features_8h">
<area shape="rect" id="node2" href="../../db/de0/pbx_8h.html" title="Core PBX routines and definitions. " alt="" coords="1631,229,1742,256"/>
<area shape="rect" id="node11" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="390,528,541,555"/>
<area shape="rect" id="node29" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="809,80,937,107"/>
<area shape="rect" id="node3" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="1029,304,1168,331"/>
<area shape="rect" id="node7" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="1985,603,2143,629"/>
<area shape="rect" id="node9" href="../../d0/d0a/format_8h.html" title="Media Format API. " alt="" coords="891,528,1021,555"/>
<area shape="rect" id="node14" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="93,379,240,405"/>
<area shape="rect" id="node21" href="../../da/da2/devicestate_8h.html" title="Device state management. " alt="" coords="1268,453,1431,480"/>
<area shape="rect" id="node25" href="../../d7/d00/sched_8h.html" title="Scheduler Routines (derived from cheops) " alt="" coords="1573,304,1699,331"/>
<area shape="rect" id="node26" href="../../d6/dd7/presencestate_8h.html" title="Presence state management. " alt="" coords="1369,304,1549,331"/>
<area shape="rect" id="node27" href="../../d6/da0/hashtab_8h.html" title="Generic (perhaps overly so) hashtable implementation Hash Table support in Asterisk. " alt="" coords="1815,528,1955,555"/>
<area shape="rect" id="node28" href="../../d1/d99/xmldoc_8h.html" title="Asterisk XML Documentation API. " alt="" coords="2127,304,2262,331"/>
<area shape="rect" id="node4" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="1455,453,1599,480"/>
<area shape="rect" id="node5" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="1629,528,1744,555"/>
<area shape="rect" id="node6" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="546,603,659,629"/>
<area shape="rect" id="node8" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="877,453,1035,480"/>
<area shape="rect" id="node10" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="535,453,670,480"/>
<area shape="rect" id="node12" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1354,379,1518,405"/>
<area shape="rect" id="node13" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="713,453,839,480"/>
<area shape="rect" id="node15" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="1623,453,1750,480"/>
<area shape="rect" id="node16" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1543,379,1649,405"/>
<area shape="rect" id="node17" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="253,453,403,480"/>
<area shape="rect" id="node18" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="598,379,759,405"/>
<area shape="rect" id="node19" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="1155,528,1325,555"/>
<area shape="rect" id="node20" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="1162,379,1278,405"/>
<area shape="rect" id="node22" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="416,379,573,405"/>
<area shape="rect" id="node23" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="1825,453,1951,480"/>
<area shape="rect" id="node24" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="783,379,934,405"/>
<area shape="rect" id="node30" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="939,229,1127,256"/>
<area shape="rect" id="node31" href="../../de/d41/bridge__channel_8h.html" title="asterisk/bridge_channel.h" alt="" coords="1006,155,1191,181"/>
<area shape="rect" id="node33" href="../../dd/dff/bridge__roles_8h.html" title="Channel Bridging Roles API. " alt="" coords="366,229,533,256"/>
<area shape="rect" id="node34" href="../../d3/d08/dsp_8h.html" title="Convenient Signal Processing routines. " alt="" coords="681,155,791,181"/>
<area shape="rect" id="node35" href="../../dd/d1d/uuid_8h.html" title="Universally unique identifier support. " alt="" coords="816,155,931,181"/>
<area shape="rect" id="node32" href="../../d0/d3b/bridge__technology_8h.html" title="Channel Bridging API. " alt="" coords="1152,229,1355,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d2/d8d/features_8h__dep__incl.png" border="0" usemap="#features_8hdep" alt=""/></div>
<map name="features_8hdep" id="features_8hdep">
<area shape="rect" id="node2" href="../../d8/d6e/app__bridgeaddchan_8c.html" title="Application to place the channel into an existing Bridge. " alt="" coords="5,87,164,114"/>
<area shape="rect" id="node3" href="../../dc/d22/app__bridgewait_8c.html" title="Application to place the channel into a holding Bridge. " alt="" coords="188,87,317,114"/>
<area shape="rect" id="node4" href="../../d7/d1b/app__channelredirect_8c.html" title="ChannelRedirect application. " alt="" coords="342,87,505,114"/>
<area shape="rect" id="node5" href="../../dc/d04/app__chanspy_8c.html" title="ChanSpy: Listen in on any channel. " alt="" coords="529,87,643,114"/>
<area shape="rect" id="node6" href="../../d9/d12/app__dial_8c.html" title="dial() &amp; retrydial() &#45; Trivial application to dial a channel and send an URL on answer ..." alt="" coords="668,87,755,114"/>
<area shape="rect" id="node7" href="../../dd/d55/app__followme_8c.html" title="Find&#45;Me Follow&#45;Me application. " alt="" coords="779,87,899,114"/>
<area shape="rect" id="node8" href="../../da/dfb/app__queue_8c.html" title="True call queues with optional send URL on answer. " alt="" coords="923,87,1027,114"/>
<area shape="rect" id="node9" href="../../d1/d97/chan__dahdi_8c.html" title="DAHDI for Pseudo TDM. " alt="" coords="1051,87,1158,114"/>
<area shape="rect" id="node10" href="../../d5/dff/chan__iax2_8c.html" title="Implementation of Inter&#45;Asterisk eXchange Version 2 as specified in RFC 5456. " alt="" coords="1183,87,1280,114"/>
<area shape="rect" id="node11" href="../../d0/dd6/chan__mgcp_8c.html" title="Implementation of Media Gateway Control Protocol. " alt="" coords="1305,87,1411,114"/>
<area shape="rect" id="node12" href="../../d7/d9b/chan__misdn_8c.html" title="the chan_misdn channel driver for Asterisk " alt="" coords="1436,87,1547,114"/>
<area shape="rect" id="node13" href="../../d1/d94/sip_8h.html" title="chan_sip header file " alt="" coords="1571,87,1623,114"/>
<area shape="rect" id="node25" href="../../d2/d09/sig__analog_8c.html" title="Analog signaling module. " alt="" coords="1647,87,1749,114"/>
<area shape="rect" id="node26" href="../../d0/d95/bridge_8c.html" title="Bridging API. " alt="" coords="1773,87,1847,114"/>
<area shape="rect" id="node27" href="../../d7/d9b/bridge__basic_8c.html" title="Basic bridge class. It is a subclass of struct ast_bridge. " alt="" coords="1871,87,1984,114"/>
<area shape="rect" id="node28" href="../../d4/d28/channel_8c.html" title="Channel Management. " alt="" coords="2009,87,2091,114"/>
<area shape="rect" id="node29" href="../../d5/d92/features_8c.html" title="Routines implementing call features as call pickup, parking and transfer. " alt="" coords="2116,87,2203,114"/>
<area shape="rect" id="node30" href="../../d4/d10/manager_8c.html" title="The Asterisk Management Interface &#45; AMI. " alt="" coords="2227,87,2318,114"/>
<area shape="rect" id="node31" href="../../da/ded/parking__applications_8c.html" title="Call Parking Applications. " alt="" coords="2342,87,2505,114"/>
<area shape="rect" id="node32" href="../../d9/dc5/parking__bridge_8c.html" title="Parking Bridge Class. " alt="" coords="2529,87,2656,114"/>
<area shape="rect" id="node33" href="../../d1/db7/parking__bridge__features_8c.html" title="Parking Bridge DTMF and Interval features. " alt="" coords="2681,87,2867,114"/>
<area shape="rect" id="node34" href="../../db/d81/parking__controller_8c.html" title="Parking Entry, Exit, and other assorted controls. " alt="" coords="2891,87,3038,114"/>
<area shape="rect" id="node35" href="../../d0/d39/parking__manager_8c.html" title="Call Parking Manager Actions and Events. " alt="" coords="3062,87,3206,114"/>
<area shape="rect" id="node36" href="../../d0/daf/parking__ui_8c.html" title="Call Parking CLI commands. " alt="" coords="3230,87,3329,114"/>
<area shape="rect" id="node37" href="../../d7/d45/res__parking_8c.html" title="Call Parking Resource. " alt="" coords="3353,87,3459,114"/>
<area shape="rect" id="node38" href="../../dd/d7c/res__pjsip__one__touch__record__info_8c.html" title="res_pjsip_one_touch\l_record_info.c" alt="" coords="3483,80,3635,121"/>
<area shape="rect" id="node39" href="../../df/dae/test__bridging_8c.html" title="Bridging unit tests. " alt="" coords="3660,87,3776,114"/>
<area shape="rect" id="node40" href="../../db/dc4/test__cel_8c.html" title="CEL unit tests. " alt="" coords="3801,87,3883,114"/>
<area shape="rect" id="node41" href="../../de/da4/test__channel__feature__hooks_8c.html" title="Channel features unit tests. " alt="" coords="3907,80,4065,121"/>
<area shape="rect" id="node14" href="../../d5/dfe/chan__sip_8c.html" title="Implementation of Session Initiation Protocol. " alt="" coords="1383,244,1472,271"/>
<area shape="rect" id="node15" href="../../d5/d87/globals_8h.html" title="sip global declaration header file " alt="" coords="1113,169,1192,196"/>
<area shape="rect" id="node16" href="../../d8/d06/sip_2dialplan__functions_8c.html" title="sip channel dialplan functions and unit tests " alt="" coords="1125,244,1271,271"/>
<area shape="rect" id="node17" href="../../d1/d2b/config__parser_8h.html" title="sip.conf parser header file " alt="" coords="1537,169,1656,196"/>
<area shape="rect" id="node18" href="../../d8/d9c/config__parser_8c.html" title="sip config parsing functions and unit tests " alt="" coords="1563,244,1681,271"/>
<area shape="rect" id="node19" href="../../d1/dc9/dialog_8h.html" title="sip dialog management header file " alt="" coords="1217,169,1289,196"/>
<area shape="rect" id="node20" href="../../d4/dd3/sip_2include_2dialplan__functions_8h.html" title="SIP dialplan functions header file. " alt="" coords="1313,169,1461,196"/>
<area shape="rect" id="node21" href="../../d2/d1d/channels_2sip_2include_2security__events_8h.html" title="Generate security events in the SIP channel. " alt="" coords="1732,169,1867,196"/>
<area shape="rect" id="node22" href="../../d4/dea/channels_2sip_2security__events_8c.html" title="Generate security events in the SIP channel. " alt="" coords="1785,244,1918,271"/>
<area shape="rect" id="node23" href="../../d5/d85/reqresp__parser_8c.html" title="sip request parsing functions and unit tests " alt="" coords="1943,169,2072,196"/>
<area shape="rect" id="node24" href="../../d1/dba/channels_2sip_2utils_8c.html" title="Utility functions for chan_sip. " alt="" coords="2097,169,2155,196"/>
</map>
</div>
</div>
<p><a href="../../de/d47/features_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a3f4a95405348aa63ef907e692901011f"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom">{ <br />
&#160;&#160;<a class="el" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa7e260a8ce4ea1f7036380328a503f417">AST_FEATURE_FLAG_NEEDSDTMF</a> = (1 &lt;&lt; 0), 
<a class="el" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa1d106267aa4d386c2354dc57b8ec6a40">AST_FEATURE_FLAG_ONPEER</a> = (1 &lt;&lt; 1), 
<a class="el" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa2400fd06fffa892d753ab1957f653d41">AST_FEATURE_FLAG_ONSELF</a> = (1 &lt;&lt; 2), 
<a class="el" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fafbc6e73e751f0075b505a5fbdec63056">AST_FEATURE_FLAG_BYCALLEE</a> = (1 &lt;&lt; 3), 
<br />
&#160;&#160;<a class="el" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e">AST_FEATURE_FLAG_BYCALLER</a> = (1 &lt;&lt; 4), 
<a class="el" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa54b7e168009244e5f9bb4182c8fda16c">AST_FEATURE_FLAG_BYBOTH</a> = (3 &lt;&lt; 3)
<br />
 }<tr class="memdesc:a3f4a95405348aa63ef907e692901011f"><td class="mdescLeft">&#160;</td><td class="mdescRight">main call feature structure  <a href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011f">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:a3f4a95405348aa63ef907e692901011f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aabeca6aae7e5db0dfe25ab88c1a40b07"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d47/features_8h.html#aabeca6aae7e5db0dfe25ab88c1a40b07">ast_bridge_add_channel</a> (struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features, int play_tone, const char *xfersound)</td></tr>
<tr class="memdesc:aabeca6aae7e5db0dfe25ab88c1a40b07"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add an arbitrary channel to a bridge.  <a href="#aabeca6aae7e5db0dfe25ab88c1a40b07">More...</a><br /></td></tr>
<tr class="separator:aabeca6aae7e5db0dfe25ab88c1a40b07"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3fe7c7e43b8f3140716d836816bf827f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d47/features_8h.html#a3fe7c7e43b8f3140716d836816bf827f">ast_bridge_call</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer, struct <a class="el" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="el" href="../../d0/d8a/muted_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>)</td></tr>
<tr class="memdesc:a3fe7c7e43b8f3140716d836816bf827f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bridge a call, optionally allowing redirection.  <a href="#a3fe7c7e43b8f3140716d836816bf827f">More...</a><br /></td></tr>
<tr class="separator:a3fe7c7e43b8f3140716d836816bf827f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b286e6d3fdb7ca3a907c5b327e1b4a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d47/features_8h.html#a8b286e6d3fdb7ca3a907c5b327e1b4a9">ast_bridge_call_with_flags</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *peer, struct <a class="el" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="el" href="../../d0/d8a/muted_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, unsigned int flags)</td></tr>
<tr class="memdesc:a8b286e6d3fdb7ca3a907c5b327e1b4a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Bridge a call, and add additional flags to the bridge.  <a href="#a8b286e6d3fdb7ca3a907c5b327e1b4a9">More...</a><br /></td></tr>
<tr class="separator:a8b286e6d3fdb7ca3a907c5b327e1b4a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa66e4da38daa333f3a871726d46eed96"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d47/features_8h.html#aa66e4da38daa333f3a871726d46eed96">ast_bridge_timelimit</a> (struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, struct <a class="el" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *<a class="el" href="../../d0/d8a/muted_8c.html#a74bb62276efdf39dd94048e007fca05b">config</a>, char *<a class="el" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>, struct timeval *calldurationlimit)</td></tr>
<tr class="memdesc:aa66e4da38daa333f3a871726d46eed96"><td class="mdescLeft">&#160;</td><td class="mdescRight">parse L option and read associated channel variables to set warning, warning frequency, and timelimit  <a href="#aa66e4da38daa333f3a871726d46eed96">More...</a><br /></td></tr>
<tr class="separator:aa66e4da38daa333f3a871726d46eed96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Call Parking and Pickup API Includes code and algorithms from the Zapata library. </p>

<p class="definition">Definition in file <a class="el" href="../../de/d47/features_8h_source.html">features.h</a>.</p>
</div><h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a3f4a95405348aa63ef907e692901011f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f4a95405348aa63ef907e692901011f">&#9670;&nbsp;</a></span>anonymous enum</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">anonymous enum</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>main call feature structure </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a3f4a95405348aa63ef907e692901011fa7e260a8ce4ea1f7036380328a503f417"></a>AST_FEATURE_FLAG_NEEDSDTMF&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3f4a95405348aa63ef907e692901011fa1d106267aa4d386c2354dc57b8ec6a40"></a>AST_FEATURE_FLAG_ONPEER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3f4a95405348aa63ef907e692901011fa2400fd06fffa892d753ab1957f653d41"></a>AST_FEATURE_FLAG_ONSELF&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3f4a95405348aa63ef907e692901011fafbc6e73e751f0075b505a5fbdec63056"></a>AST_FEATURE_FLAG_BYCALLEE&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e"></a>AST_FEATURE_FLAG_BYCALLER&#160;</td><td class="fielddoc"></td></tr>
<tr><td class="fieldname"><a id="a3f4a95405348aa63ef907e692901011fa54b7e168009244e5f9bb4182c8fda16c"></a>AST_FEATURE_FLAG_BYBOTH&#160;</td><td class="fielddoc"></td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../de/d47/features_8h_source.html#l00033">33</a> of file <a class="el" href="../../de/d47/features_8h_source.html">features.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;     {</div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;   <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa7e260a8ce4ea1f7036380328a503f417">AST_FEATURE_FLAG_NEEDSDTMF</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;   <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa1d106267aa4d386c2354dc57b8ec6a40">AST_FEATURE_FLAG_ONPEER</a> =    (1 &lt;&lt; 1),</div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;   <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa2400fd06fffa892d753ab1957f653d41">AST_FEATURE_FLAG_ONSELF</a> =    (1 &lt;&lt; 2),</div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;   <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fafbc6e73e751f0075b505a5fbdec63056">AST_FEATURE_FLAG_BYCALLEE</a> =  (1 &lt;&lt; 3),</div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;   <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e">AST_FEATURE_FLAG_BYCALLER</a> =  (1 &lt;&lt; 4),</div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;   <a class="code" href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa54b7e168009244e5f9bb4182c8fda16c">AST_FEATURE_FLAG_BYBOTH</a>  =   (3 &lt;&lt; 3),</div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;};</div><div class="ttc" id="features_8h_html_a3f4a95405348aa63ef907e692901011fa1d106267aa4d386c2354dc57b8ec6a40"><div class="ttname"><a href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa1d106267aa4d386c2354dc57b8ec6a40">AST_FEATURE_FLAG_ONPEER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/features_8h_source.html#l00035">features.h:35</a></div></div>
<div class="ttc" id="features_8h_html_a3f4a95405348aa63ef907e692901011fa54b7e168009244e5f9bb4182c8fda16c"><div class="ttname"><a href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa54b7e168009244e5f9bb4182c8fda16c">AST_FEATURE_FLAG_BYBOTH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/features_8h_source.html#l00039">features.h:39</a></div></div>
<div class="ttc" id="features_8h_html_a3f4a95405348aa63ef907e692901011fa2400fd06fffa892d753ab1957f653d41"><div class="ttname"><a href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa2400fd06fffa892d753ab1957f653d41">AST_FEATURE_FLAG_ONSELF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/features_8h_source.html#l00036">features.h:36</a></div></div>
<div class="ttc" id="features_8h_html_a3f4a95405348aa63ef907e692901011fa7e260a8ce4ea1f7036380328a503f417"><div class="ttname"><a href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa7e260a8ce4ea1f7036380328a503f417">AST_FEATURE_FLAG_NEEDSDTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/features_8h_source.html#l00034">features.h:34</a></div></div>
<div class="ttc" id="features_8h_html_a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e"><div class="ttname"><a href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fa56f450ad592f4fe14a2619bd13a5c62e">AST_FEATURE_FLAG_BYCALLER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/features_8h_source.html#l00038">features.h:38</a></div></div>
<div class="ttc" id="features_8h_html_a3f4a95405348aa63ef907e692901011fafbc6e73e751f0075b505a5fbdec63056"><div class="ttname"><a href="../../de/d47/features_8h.html#a3f4a95405348aa63ef907e692901011fafbc6e73e751f0075b505a5fbdec63056">AST_FEATURE_FLAG_BYCALLEE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d47/features_8h_source.html#l00037">features.h:37</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aabeca6aae7e5db0dfe25ab88c1a40b07"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabeca6aae7e5db0dfe25ab88c1a40b07">&#9670;&nbsp;</a></span>ast_bridge_add_channel()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_add_channel </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td>
          <td class="paramname"><em>bridge</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *&#160;</td>
          <td class="paramname"><em>features</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>play_tone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>xfersound</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add an arbitrary channel to a bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<p>The channel that is being added to the bridge can be in any state: unbridged, bridged, answered, unanswered, etc. The channel will be added asynchronously, meaning that when this function returns once the channel has been added to the bridge, not once the channel has been removed from the bridge.</p>
<p>In addition, a tone can optionally be played to the channel once the channel is placed into the bridge.</p>
<dl class="section note"><dt>Note</dt><dd>When this function returns, there is no guarantee that the channel that was passed in is valid any longer. Do not attempt to operate on the channel after this function returns.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge</td><td>Bridge to which the channel should be added </td></tr>
    <tr><td class="paramname">chan</td><td>The channel to add to the bridge </td></tr>
    <tr><td class="paramname">features</td><td>Features for this channel in the bridge </td></tr>
    <tr><td class="paramname">play_tone</td><td>Indicates if a tone should be played to the channel </td></tr>
    <tr><td class="paramname">xfersound</td><td>Sound that should be used to indicate transfer with play_tone</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The features parameter must be NULL or obtained by <a class="el" href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed" title="Allocate a new bridge features struct. ">ast_bridge_features_new()</a>. You must not dereference features after calling even if the call fails.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>Success </td></tr>
    <tr><td class="paramname">-1</td><td>Failure </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d0/d95/bridge_8c_source.html#l02519">2519</a> of file <a class="el" href="../../d0/d95/bridge_8c_source.html">bridge.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01958">ao2_cleanup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02814">ast_answer()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">ast_bridge_channel_queue_playfile()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03741">ast_bridge_features_destroy()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01924">ast_bridge_impart()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00604">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00500">ast_bridge_lock_both</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10735">ast_channel_get_bridge()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10783">ast_channel_get_bridge_channel()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00721">ast_channel_pbx()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02970">ast_channel_ref</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02981">ast_channel_unref</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l10794">ast_channel_yank()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l02548">ast_hangup()</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07876">ast_moh_stop()</a>, <a class="el" href="../../d9/d95/channelstate_8h_source.html#l00042">AST_STATE_UP</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00361">bridge_dissolve_check_stolen()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01469">bridge_find_channel()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02447">bridge_move_locked()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d5/d60/utils_8h_source.html#l00911">RAII_VAR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d92/features_8c_source.html#l00757">action_bridge()</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l01007">bridge_exec()</a>, and <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00452">manager_park_unbridged()</a>.</p>
<div class="fragment"><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;{</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *, chan_bridge, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *, yanked_chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;   <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(chan);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;   chan_bridge = <a class="code" href="../../d5/d7b/channel_8h.html#a557663006d52a9cdc11f42602bf48326">ast_channel_get_bridge</a>(chan);</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;   <span class="keywordflow">if</span> (chan_bridge) {</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;      <span class="comment">/* The channel is in a bridge so it is not getting any new features. */</span></div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;      <a class="code" href="../../d0/d95/bridge_8c.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(features);</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a04a2852f4166568323aa33cd3d0158c7">ast_bridge_lock_both</a>(bridge, chan_bridge);</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;      bridge_channel = <a class="code" href="../../d0/d95/bridge_8c.html#af611fd393ca26b5fd2a8071867470ffc">bridge_find_channel</a>(chan_bridge, chan);</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d95/bridge_8c.html#a64d0fdf87038032f7f5032752114e0ef">bridge_move_locked</a>(bridge, chan_bridge, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1)) {</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(chan_bridge);</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;      }</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;<span class="comment">       * bridge_move_locked() will implicitly ensure that</span></div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;<span class="comment">       * bridge_channel is not NULL.</span></div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(bridge_channel != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;<span class="comment">       * Additional checks if the channel we just stole dissolves the</span></div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;<span class="comment">       * original bridge.</span></div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      <a class="code" href="../../d0/d95/bridge_8c.html#ae73ffed95c5c683369117e42e864d3c4">bridge_dissolve_check_stolen</a>(chan_bridge, bridge_channel);</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(chan_bridge);</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;      <span class="comment">/* Slightly less easy case. We need to yank channel A from</span></div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;<span class="comment">       * where he currently is and impart him into our bridge.</span></div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;      yanked_chan = <a class="code" href="../../d5/d7b/channel_8h.html#a17e5eed14e9256176bb685dc7bac620a">ast_channel_yank</a>(chan);</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;      <span class="keywordflow">if</span> (!yanked_chan) {</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not gain control of channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;         <a class="code" href="../../d0/d95/bridge_8c.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(features);</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;      }</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(yanked_chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(yanked_chan);</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;      }</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a>(yanked_chan);</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d0/d95/bridge_8c.html#a4a1f0ebb4769ef2340211b0d05a1077a">ast_bridge_impart</a>(bridge, yanked_chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, features,</div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a>)) {</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;         <span class="comment">/* It is possible for us to yank a channel and have some other</span></div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;<span class="comment">          * thread start a PBX on the channl after we yanked it. In particular,</span></div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;<span class="comment">          * this can theoretically happen on the ;2 of a Local channel if we</span></div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;<span class="comment">          * yank it prior to the ;1 being answered. Make sure that it isn&#39;t</span></div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;<span class="comment">          * executing a PBX before hanging it up.</span></div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a>(yanked_chan)) {</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a>(yanked_chan);</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(yanked_chan);</div><div class="line"><a name="l02585"></a><span class="lineno"> 2585</span>&#160;         }</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;      }</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;   }</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;   <span class="keywordflow">if</span> (play_tone &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(xfersound)) {</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *play_chan = yanked_chan ?: chan;</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *, play_bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(play_chan);</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;      play_bridge_channel = <a class="code" href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a>(play_chan);</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(play_chan);</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;      <span class="keywordflow">if</span> (!play_bridge_channel) {</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to play tone for channel %s. No longer in a bridge.\n&quot;</span>,</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(play_chan));</div><div class="line"><a name="l02601"></a><span class="lineno"> 2601</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;         <a class="code" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a>(play_bridge_channel, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, xfersound, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;      }</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;   }</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;}</div><div class="ttc" id="bridge_8c_html_a64d0fdf87038032f7f5032752114e0ef"><div class="ttname"><a href="../../d0/d95/bridge_8c.html#a64d0fdf87038032f7f5032752114e0ef">bridge_move_locked</a></div><div class="ttdeci">static int bridge_move_locked(struct ast_bridge *dst_bridge, struct ast_bridge *src_bridge, struct ast_channel *chan, struct ast_channel *swap, int attempt_recovery)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l02447">bridge.c:2447</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="bridge_8h_html_a04a2852f4166568323aa33cd3d0158c7"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a04a2852f4166568323aa33cd3d0158c7">ast_bridge_lock_both</a></div><div class="ttdeci">#define ast_bridge_lock_both(bridge1, bridge2)</div><div class="ttdoc">Lock two bridges. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00500">bridge.h:500</a></div></div>
<div class="ttc" id="channel_8h_html_ab733a7825810b895a89b629e0ea89380"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ab733a7825810b895a89b629e0ea89380">ast_channel_unref</a></div><div class="ttdeci">#define ast_channel_unref(c)</div><div class="ttdoc">Decrease channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02981">channel.h:2981</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="bridge_8c_html_af611fd393ca26b5fd2a8071867470ffc"><div class="ttname"><a href="../../d0/d95/bridge_8c.html#af611fd393ca26b5fd2a8071867470ffc">bridge_find_channel</a></div><div class="ttdeci">struct ast_bridge_channel * bridge_find_channel(struct ast_bridge *bridge, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01469">bridge.c:1469</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="channel_8h_html_a17e5eed14e9256176bb685dc7bac620a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a17e5eed14e9256176bb685dc7bac620a">ast_channel_yank</a></div><div class="ttdeci">struct ast_channel * ast_channel_yank(struct ast_channel *yankee)</div><div class="ttdoc">Gain control of a channel in the system. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10794">channel.c:10794</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="bridge_8c_html_ae73ffed95c5c683369117e42e864d3c4"><div class="ttname"><a href="../../d0/d95/bridge_8c.html#ae73ffed95c5c683369117e42e864d3c4">bridge_dissolve_check_stolen</a></div><div class="ttdeci">static void bridge_dissolve_check_stolen(struct ast_bridge *bridge, struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00361">bridge.c:361</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a52fead32f69533450f3c05b2e6960149"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a></div><div class="ttdeci">void ast_moh_stop(struct ast_channel *chan)</div><div class="ttdoc">Turn off music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07876">channel.c:7876</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="channel_8h_html_a557663006d52a9cdc11f42602bf48326"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a557663006d52a9cdc11f42602bf48326">ast_channel_get_bridge</a></div><div class="ttdeci">struct ast_bridge * ast_channel_get_bridge(const struct ast_channel *chan)</div><div class="ttdoc">Get the bridge associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10735">channel.c:10735</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="channel_8h_html_a488b7d6f7488bedc53be45d4ef4471c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a488b7d6f7488bedc53be45d4ef4471c9">ast_channel_pbx</a></div><div class="ttdeci">struct ast_pbx * ast_channel_pbx(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00721">channel_internal_api.c:721</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge_8c_html_a4a1f0ebb4769ef2340211b0d05a1077a"><div class="ttname"><a href="../../d0/d95/bridge_8c.html#a4a1f0ebb4769ef2340211b0d05a1077a">ast_bridge_impart</a></div><div class="ttdeci">int ast_bridge_impart(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, enum ast_bridge_impart_flags flags)</div><div class="ttdoc">Impart a channel to a bridge (non-blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01924">bridge.c:1924</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00604">bridge.h:604</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge_8c_html_ad3debd15062b4b9463e5703724dd9a1f"><div class="ttname"><a href="../../d0/d95/bridge_8c.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a></div><div class="ttdeci">void ast_bridge_features_destroy(struct ast_bridge_features *features)</div><div class="ttdoc">Destroy an allocated bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03741">bridge.c:3741</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="channel_8h_html_a9b6409c38af733c46eead884d86dd284"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b6409c38af733c46eead884d86dd284">ast_channel_get_bridge_channel</a></div><div class="ttdeci">struct ast_bridge_channel * ast_channel_get_bridge_channel(struct ast_channel *chan)</div><div class="ttdoc">Get a reference to the channel&amp;#39;s bridge pointer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l10783">channel.c:10783</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="channel_8h_html_a6801c703e767d6f760c54c8b86a30024"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6801c703e767d6f760c54c8b86a30024">ast_channel_ref</a></div><div class="ttdeci">#define ast_channel_ref(c)</div><div class="ttdoc">Increase channel reference count. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02970">channel.h:2970</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ac352fd6d6188d7431155f34ae2a38799"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a></div><div class="ttdeci">int ast_bridge_channel_queue_playfile(struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdoc">Queue a bridge action play file frame onto the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01404">bridge_channel.c:1404</a></div></div>
<div class="ttc" id="channel_8h_html_aec583a3e25358ee552a4f3df53914cd0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a></div><div class="ttdeci">int ast_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02814">channel.c:2814</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a3fe7c7e43b8f3140716d836816bf827f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3fe7c7e43b8f3140716d836816bf827f">&#9670;&nbsp;</a></span>ast_bridge_call()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_call </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bridge a call, optionally allowing redirection. </p>
<dl class="section note"><dt>Note</dt><dd>The function caller is assumed to have already done the COLP exchange for the initial bridging of the two channels if it was desired.</dd></dl>
<p>Bridge a call, optionally allowing redirection.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The bridge considers this channel the caller. </td></tr>
    <tr><td class="paramname">peer</td><td>The bridge considers this channel the callee. </td></tr>
    <tr><td class="paramname">config</td><td>Configuration for this bridge.</td></tr>
  </table>
  </dd>
</dl>
<p>Set start time, check for two channels,check if monitor on check for feature activation, create new CDR </p><dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">res</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on failure to bridge. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d92/features_8c_source.html#l00716">716</a> of file <a class="el" href="../../d5/d92/features_8c_source.html">features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d92/features_8c_source.html#l00633">ast_bridge_call_with_flags()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../dd/d55/app__followme_8c_source.html#l01339">app_exec()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;{</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d92/features_8c.html#a8b286e6d3fdb7ca3a907c5b327e1b4a9">ast_bridge_call_with_flags</a>(chan, peer, config, 0);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div><div class="ttc" id="features_8c_html_a8b286e6d3fdb7ca3a907c5b327e1b4a9"><div class="ttname"><a href="../../d5/d92/features_8c.html#a8b286e6d3fdb7ca3a907c5b327e1b4a9">ast_bridge_call_with_flags</a></div><div class="ttdeci">int ast_bridge_call_with_flags(struct ast_channel *chan, struct ast_channel *peer, struct ast_bridge_config *config, unsigned int flags)</div><div class="ttdoc">Bridge a call, and add additional flags to the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00633">features.c:633</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a8b286e6d3fdb7ca3a907c5b327e1b4a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b286e6d3fdb7ca3a907c5b327e1b4a9">&#9670;&nbsp;</a></span>ast_bridge_call_with_flags()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_call_with_flags </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>peer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>flags</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Bridge a call, and add additional flags to the bridge. </p>
<p>This does the same thing as <a class="el" href="../../d5/d92/features_8c.html#a3fe7c7e43b8f3140716d836816bf827f">ast_bridge_call</a>, except that once the bridge is created, the provided flags are set on the bridge. The provided flags are added to the bridge's flags; they will not clear any flags already set.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">chan</td><td>The calling channel </td></tr>
    <tr><td class="paramname">peer</td><td>The called channel </td></tr>
    <tr><td class="paramname">config</td><td>Bridge configuration for the channels </td></tr>
    <tr><td class="paramname">flags</td><td>Additional flags to set on the created bridge</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The function caller is assumed to have already done the COLP exchange for the initial bridging of the two channels if it was desired. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d92/features_8c_source.html#l00633">633</a> of file <a class="el" href="../../d5/d92/features_8c_source.html">features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03617">ast_bridge_basic_new()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03630">ast_bridge_basic_set_flags()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00970">ast_bridge_destroy()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03720">ast_bridge_features_cleanup()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03741">ast_bridge_features_destroy()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03687">ast_bridge_features_init()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l03750">ast_bridge_features_new()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01924">ast_bridge_impart()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00604">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00606">AST_BRIDGE_IMPART_INHIBIT_JOIN_COLP</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01667">ast_bridge_join()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00551">AST_BRIDGE_JOIN_INHIBIT_JOIN_COLP</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00549">AST_BRIDGE_JOIN_PASS_REFERENCE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00997">ast_channel_softhangup_internal_flag()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01127">AST_SOFTHANGUP_ASYNCGOTO</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00528">bridge_failed_peer_goto()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01091">ast_bridge_config::end_bridge_callback</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01092">ast_bridge_config::end_bridge_callback_data</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00259">ast_dial_features::peer_features</a>, <a class="el" href="../../d5/d92/features_8c_source.html#l00536">pre_bridge_setup()</a>, and <a class="el" href="../../d1/d8c/logger_8h_source.html#l00749">SCOPE_TRACE</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d92/features_8c_source.html#l00716">ast_bridge_call()</a>, and <a class="el" href="../../da/dfb/app__queue_8c_source.html#l06722">try_calling()</a>.</p>
<div class="fragment"><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;{</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> chan_features;</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *peer_features;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ac7388257651bb6a92d3208512fab0ba6">SCOPE_TRACE</a>(1, <span class="stringliteral">&quot;%s Peer: %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(peer));</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;   <span class="comment">/* Setup features. */</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;   res = <a class="code" href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a>(&amp;chan_features);</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;   peer_features = <a class="code" href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed">ast_bridge_features_new</a>();</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;   <span class="keywordflow">if</span> (res || !peer_features) {</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(peer_features);</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a>(chan, peer);</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;   }</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d92/features_8c.html#a19270bbca76aa0850d34134c16424063">pre_bridge_setup</a>(chan, peer, config, &amp;chan_features, peer_features)) {</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(peer_features);</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a>(chan, peer);</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;   }</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;   <span class="comment">/* Create bridge */</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;   bridge = <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a>();</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;   <span class="keywordflow">if</span> (!bridge) {</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a>(peer_features);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a>(chan, peer);</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   }</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   <a class="code" href="../../d4/d1e/bridge__basic_8h.html#a3532f26d87ff1bdddd1b7d945b6c5802">ast_bridge_basic_set_flags</a>(bridge, flags);</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;   <span class="comment">/* Put peer into the bridge */</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a>(bridge, peer, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, peer_features,</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a> | <a class="code" href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a9d897e78dc2fcd2447531e2ee0310933">AST_BRIDGE_IMPART_INHIBIT_JOIN_COLP</a>)) {</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a>(bridge, 0);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;      <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;      <a class="code" href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a>(chan, peer);</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;   }</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="comment">/* Join bridge */</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a>(bridge, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;chan_features, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>,</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d">AST_BRIDGE_JOIN_PASS_REFERENCE</a> | <a class="code" href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a3ebef74566687cfbc25d174725fc6d56">AST_BRIDGE_JOIN_INHIBIT_JOIN_COLP</a>);</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="comment">    * If the bridge was broken for a hangup that isn&#39;t real, then</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="comment">    * don&#39;t run the h extension, because the channel isn&#39;t really</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">    * hung up.  This should really only happen with</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">    * AST_SOFTHANGUP_ASYNCGOTO.</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   res = -1;</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a>(chan) &amp; <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4">AST_SOFTHANGUP_ASYNCGOTO</a>) {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      res = 0;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;   }</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;   <a class="code" href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a>(&amp;chan_features);</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <span class="keywordflow">if</span> (res &amp;&amp; config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a5fd13b216c2752f4f1fb843cae429558">end_bridge_callback</a>) {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a5fd13b216c2752f4f1fb843cae429558">end_bridge_callback</a>(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a30cb875f49910a9515ee92d8dfdf8b83">end_bridge_callback_data</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="bridge__features_8h_html_aafc3026d777c0bf6899e93263178e102"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#aafc3026d777c0bf6899e93263178e102">ast_bridge_features_cleanup</a></div><div class="ttdeci">void ast_bridge_features_cleanup(struct ast_bridge_features *features)</div><div class="ttdoc">Clean up the contents of a bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03720">bridge.c:3720</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a3128b52009fb3dd764dce90ea377fce1"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a3128b52009fb3dd764dce90ea377fce1">ast_bridge_features_init</a></div><div class="ttdeci">int ast_bridge_features_init(struct ast_bridge_features *features)</div><div class="ttdoc">Initialize bridge features structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03687">bridge.c:3687</a></div></div>
<div class="ttc" id="bridge_8h_html_a4adad484788bb018b8699eeed2ddfedd"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a4adad484788bb018b8699eeed2ddfedd">ast_bridge_destroy</a></div><div class="ttdeci">int ast_bridge_destroy(struct ast_bridge *bridge, int cause)</div><div class="ttdoc">Destroy a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l00970">bridge.c:970</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__features_8h_html_ad3debd15062b4b9463e5703724dd9a1f"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#ad3debd15062b4b9463e5703724dd9a1f">ast_bridge_features_destroy</a></div><div class="ttdeci">void ast_bridge_features_destroy(struct ast_bridge_features *features)</div><div class="ttdoc">Destroy an allocated bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03741">bridge.c:3741</a></div></div>
<div class="ttc" id="features_8c_html_a19270bbca76aa0850d34134c16424063"><div class="ttname"><a href="../../d5/d92/features_8c.html#a19270bbca76aa0850d34134c16424063">pre_bridge_setup</a></div><div class="ttdeci">static int pre_bridge_setup(struct ast_channel *chan, struct ast_channel *peer, struct ast_bridge_config *config, struct ast_bridge_features *chan_features, struct ast_bridge_features *peer_features)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00536">features.c:536</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101a9d897e78dc2fcd2447531e2ee0310933"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101a9d897e78dc2fcd2447531e2ee0310933">AST_BRIDGE_IMPART_INHIBIT_JOIN_COLP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00606">bridge.h:606</a></div></div>
<div class="ttc" id="bridge_8h_html_a582e1dd73a483ac881cff01fa07f39ae"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a582e1dd73a483ac881cff01fa07f39ae">ast_bridge_impart</a></div><div class="ttdeci">int ast_bridge_impart(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, enum ast_bridge_impart_flags flags) attribute_warn_unused_result</div><div class="ttdoc">Impart a channel to a bridge (non-blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01924">bridge.c:1924</a></div></div>
<div class="ttc" id="bridge__basic_8h_html_a3532f26d87ff1bdddd1b7d945b6c5802"><div class="ttname"><a href="../../d4/d1e/bridge__basic_8h.html#a3532f26d87ff1bdddd1b7d945b6c5802">ast_bridge_basic_set_flags</a></div><div class="ttdeci">void ast_bridge_basic_set_flags(struct ast_bridge *bridge, unsigned int flags)</div><div class="ttdoc">Set feature flags on a basic bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/bridge__basic_8c_source.html#l03630">bridge_basic.c:3630</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a30cb875f49910a9515ee92d8dfdf8b83"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a30cb875f49910a9515ee92d8dfdf8b83">ast_bridge_config::end_bridge_callback_data</a></div><div class="ttdeci">void * end_bridge_callback_data</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01092">channel.h:1092</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge_8h_html_ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ac086b7d74fb40c2ede8514274585b101aecfd8e6279a21b20ee4db0ab69c847e8">AST_BRIDGE_IMPART_CHAN_INDEPENDENT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00604">bridge.h:604</a></div></div>
<div class="ttc" id="bridge_8h_html_ad52005264bec898a8f825bd47d91cf93a3ebef74566687cfbc25d174725fc6d56"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a3ebef74566687cfbc25d174725fc6d56">AST_BRIDGE_JOIN_INHIBIT_JOIN_COLP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00551">bridge.h:551</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="bridge_8h_html_a116a27b8e1e111729ee1828d4fab6b5a"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a116a27b8e1e111729ee1828d4fab6b5a">ast_bridge_join</a></div><div class="ttdeci">int ast_bridge_join(struct ast_bridge *bridge, struct ast_channel *chan, struct ast_channel *swap, struct ast_bridge_features *features, struct ast_bridge_tech_optimizations *tech_args, enum ast_bridge_join_flags flags)</div><div class="ttdoc">Join a channel to a bridge (blocking) </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01667">bridge.c:1667</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a085c0c603de12dc2474a17a92e1cb5a4">AST_SOFTHANGUP_ASYNCGOTO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01127">channel.h:1127</a></div></div>
<div class="ttc" id="bridge__features_8h_html_abf9e5d393615c63d27e0bd530301a1ed"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#abf9e5d393615c63d27e0bd530301a1ed">ast_bridge_features_new</a></div><div class="ttdeci">struct ast_bridge_features * ast_bridge_features_new(void)</div><div class="ttdoc">Allocate a new bridge features struct. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03750">bridge.c:3750</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a5fd13b216c2752f4f1fb843cae429558"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a5fd13b216c2752f4f1fb843cae429558">ast_bridge_config::end_bridge_callback</a></div><div class="ttdeci">void(* end_bridge_callback)(void *)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01091">channel.h:1091</a></div></div>
<div class="ttc" id="channel_8h_html_adac99999f1e55833e7f903979d67b48b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adac99999f1e55833e7f903979d67b48b">ast_channel_softhangup_internal_flag</a></div><div class="ttdeci">int ast_channel_softhangup_internal_flag(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00997">channel_internal_api.c:997</a></div></div>
<div class="ttc" id="bridge__basic_8h_html_a1410fb71fa67f9ee92f15b18439b7571"><div class="ttname"><a href="../../d4/d1e/bridge__basic_8h.html#a1410fb71fa67f9ee92f15b18439b7571">ast_bridge_basic_new</a></div><div class="ttdeci">struct ast_bridge * ast_bridge_basic_new(void)</div><div class="ttdoc">Create a new basic class bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/bridge__basic_8c_source.html#l03617">bridge_basic.c:3617</a></div></div>
<div class="ttc" id="logger_8h_html_ac7388257651bb6a92d3208512fab0ba6"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ac7388257651bb6a92d3208512fab0ba6">SCOPE_TRACE</a></div><div class="ttdeci">#define SCOPE_TRACE(level,...)</div><div class="ttdoc">Print a trace message with details when a scope is entered or existed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00749">logger.h:749</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge_8h_html_ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ad52005264bec898a8f825bd47d91cf93a9106169928c6eeccad5b5ebcf762ac9d">AST_BRIDGE_JOIN_PASS_REFERENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00549">bridge.h:549</a></div></div>
<div class="ttc" id="features_8c_html_ac06adfce185b6dcc89bd7410e2ee344a"><div class="ttname"><a href="../../d5/d92/features_8c.html#ac06adfce185b6dcc89bd7410e2ee344a">bridge_failed_peer_goto</a></div><div class="ttdeci">static void bridge_failed_peer_goto(struct ast_channel *chan, struct ast_channel *peer)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d92/features_8c_source.html#l00528">features.c:528</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa66e4da38daa333f3a871726d46eed96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa66e4da38daa333f3a871726d46eed96">&#9670;&nbsp;</a></span>ast_bridge_timelimit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_timelimit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td>
          <td class="paramname"><em>chan</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d13/structast__bridge__config.html">ast_bridge_config</a> *&#160;</td>
          <td class="paramname"><em>config</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>parse</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct timeval *&#160;</td>
          <td class="paramname"><em>calldurationlimit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>parse L option and read associated channel variables to set warning, warning frequency, and timelimit </p>
<dl class="section note"><dt>Note</dt><dd>caller must be aware of freeing memory for warning_sound, end_sound, and start_sound </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d5/d92/features_8c_source.html#l00886">886</a> of file <a class="el" href="../../d5/d92/features_8c_source.html">features.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01064">AST_FEATURE_PLAY_WARNING</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00070">ast_set_flag</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00243">ast_strdup</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d1f/main_2utils_8c_source.html#l01951">ast_true()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00463">ast_verb</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01088">ast_bridge_config::end_sound</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01079">ast_bridge_config::features_callee</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01078">ast_bridge_config::features_caller</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00274">LOG_WARNING</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_builtin_getvar_helper()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01085">ast_bridge_config::play_warning</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01089">ast_bridge_config::start_sound</a>, <a class="el" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01084">ast_bridge_config::timelimit</a>, <a class="el" href="../../dc/df2/ast__expr2f_8c_source.html#l00614">var</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l01086">ast_bridge_config::warning_freq</a>, and <a class="el" href="../../d5/d7b/channel_8h_source.html#l01087">ast_bridge_config::warning_sound</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d92/features_8c_source.html#l01007">bridge_exec()</a>, and <a class="el" href="../../d9/d12/app__dial_8c_source.html#l02254">dial_exec_full()</a>.</p>
<div class="fragment"><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;{</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <span class="keywordtype">char</span> *stringp = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>);</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <span class="keywordtype">char</span> *limit_str, *warning_str, *warnfreq_str;</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;   <span class="keywordtype">int</span> play_to_caller = 0, play_to_callee = 0;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;   <span class="keywordtype">int</span> delta;</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;   limit_str = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;   warning_str = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;   warnfreq_str = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;   config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> = atol(limit_str);</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;   <span class="keywordflow">if</span> (warning_str)</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = atol(warning_str);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;   <span class="keywordflow">if</span> (warnfreq_str)</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> = atol(warnfreq_str);</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;   <span class="keywordflow">if</span> (!config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>) {</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Bridge does not accept L(%s)\n&quot;</span>, limit_str);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> = 0;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;      <span class="keywordflow">return</span> -1; <span class="comment">/* error */</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (delta = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> - config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>) &gt; 0) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      <span class="keywordtype">int</span> w = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="comment">       * If the first warning is requested _after_ the entire call</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="comment">       * would end, and no warning frequency is requested, then turn</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="comment">       * off the warning. If a warning frequency is requested, reduce</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="comment">       * the &#39;first warning&#39; time by that frequency until it falls</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="comment">       * within the call&#39;s total time limit.</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="comment">       * Graphically:</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="comment">       *                timelim-&gt;|    delta        |&lt;-playwarning</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="comment">       *      0__________________|_________________|</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="comment">       *                       | w  |    |    |    |</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="comment">       *</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="comment">       * so the number of intervals to cut is 1+(delta-1)/w</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;      <span class="keywordflow">if</span> (w == 0) {</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;         config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = 0;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;         config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> -= w * ( 1 + (delta-1)/w );</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;         <span class="keywordflow">if</span> (config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> &lt; 1)</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;            config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> = 0;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;      }</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   }</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_PLAYAUDIO_CALLER&quot;</span>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;   play_to_caller = var ? <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(var) : 1;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_PLAYAUDIO_CALLEE&quot;</span>);</div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;   play_to_callee = var ? <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(var) : 0;</div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   <span class="keywordflow">if</span> (!play_to_caller &amp;&amp; !play_to_callee)</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      play_to_caller = 1;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_WARNING_FILE&quot;</span>);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a> = !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var) ? <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var) : <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;timeleft&quot;</span>);</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <span class="comment">/* The code looking at config wants a NULL, not just &quot;&quot;, to decide</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">    * that the message should not be played, so we replace &quot;&quot; with NULL.</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">    * Note, pbx_builtin_getvar_helper _can_ return NULL if the variable is</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">    * not found.</span></div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_TIMEOUT_FILE&quot;</span>);</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;   config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a> = !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var) ? <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;   var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;LIMIT_CONNECT_FILE&quot;</span>);</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;   config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">start_sound</a> = !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(var) ? <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var) : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;   <span class="comment">/* undo effect of S(x) in case they are both used */</span></div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;   calldurationlimit-&gt;tv_sec = 0;</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;   calldurationlimit-&gt;tv_usec = 0;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;   <span class="comment">/* more efficient to do it like S(x) does since no advanced opts */</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;   <span class="keywordflow">if</span> (!config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> &amp;&amp; !config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">start_sound</a> &amp;&amp; !config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a> &amp;&amp; config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>) {</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;      calldurationlimit-&gt;tv_sec = config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> / 1000;</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;      calldurationlimit-&gt;tv_usec = (config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> % 1000) * 1000;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting call duration limit to %.3lf seconds.\n&quot;</span>,</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;         calldurationlimit-&gt;tv_sec + calldurationlimit-&gt;tv_usec / 1000000.0);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;      play_to_caller = 0;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      play_to_callee = 0;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> = 0;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = 0;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;      config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> = 0;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Limit Data for this call:\n&quot;</span>);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;timelimit      = %ld ms (%.3lf s)\n&quot;</span>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> / 1000.0);</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;play_warning   = %ld ms (%.3lf s)\n&quot;</span>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> / 1000.0);</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;play_to_caller = %s\n&quot;</span>, play_to_caller ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;play_to_callee = %s\n&quot;</span>, play_to_callee ? <span class="stringliteral">&quot;yes&quot;</span> : <span class="stringliteral">&quot;no&quot;</span>);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;warning_freq   = %ld ms (%.3lf s)\n&quot;</span>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> / 1000.0);</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;start_sound    = %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">start_sound</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;warning_sound  = %s\n&quot;</span>, config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a>);</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;end_sound      = %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a>, <span class="stringliteral">&quot;&quot;</span>));</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;   }</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordflow">if</span> (play_to_caller)</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">features_caller</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab">AST_FEATURE_PLAY_WARNING</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   <span class="keywordflow">if</span> (play_to_callee)</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a>(&amp;(config-&gt;<a class="code" href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">features_callee</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab">AST_FEATURE_PLAY_WARNING</a>);</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a725b051d26c3350f8cd04467b4202c60"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a725b051d26c3350f8cd04467b4202c60">ast_bridge_config::features_callee</a></div><div class="ttdeci">struct ast_flags features_callee</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01079">channel.h:1079</a></div></div>
<div class="ttc" id="utils_8h_html_ab5033a1f3d781d45e7ccc27598114510"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab5033a1f3d781d45e7ccc27598114510">ast_set_flag</a></div><div class="ttdeci">#define ast_set_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00070">utils.h:70</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="structast__bridge__config_html_af134a8361d8611e10872c9c0f806ba64"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#af134a8361d8611e10872c9c0f806ba64">ast_bridge_config::start_sound</a></div><div class="ttdeci">const char * start_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01089">channel.h:1089</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="channel_8h_html_a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a25f1c885c7f5230ea4c9bc48dde88fe1ae6373d88ce4e9e5d9b7031272a9bc5ab">AST_FEATURE_PLAY_WARNING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01064">channel.h:1064</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a0b23b4ebfc857809d07d1ced94c9a6eb"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a0b23b4ebfc857809d07d1ced94c9a6eb">ast_bridge_config::end_sound</a></div><div class="ttdeci">const char * end_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01088">channel.h:1088</a></div></div>
<div class="ttc" id="structast__bridge__config_html_af3d16394c849390df1c8f72569faeb37"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#af3d16394c849390df1c8f72569faeb37">ast_bridge_config::play_warning</a></div><div class="ttdeci">long play_warning</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01085">channel.h:1085</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="structast__bridge__config_html_aa9510db9c5a776dfbd1aaab8c48970f0"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#aa9510db9c5a776dfbd1aaab8c48970f0">ast_bridge_config::features_caller</a></div><div class="ttdeci">struct ast_flags features_caller</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01078">channel.h:1078</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__bridge__config_html_a1fa6cb6235cf4abe198a8561e3c18bae"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#a1fa6cb6235cf4abe198a8561e3c18bae">ast_bridge_config::warning_sound</a></div><div class="ttdeci">const char * warning_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01087">channel.h:1087</a></div></div>
<div class="ttc" id="structast__bridge__config_html_abc09654c9b36de6b0bd0bfd92d31c0c0"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#abc09654c9b36de6b0bd0bfd92d31c0c0">ast_bridge_config::warning_freq</a></div><div class="ttdeci">long warning_freq</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01086">channel.h:1086</a></div></div>
<div class="ttc" id="structast__bridge__config_html_ab88b1e2ff0d0fed0616512352e723162"><div class="ttname"><a href="../../d0/d13/structast__bridge__config.html#ab88b1e2ff0d0fed0616512352e723162">ast_bridge_config::timelimit</a></div><div class="ttdeci">long timelimit</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01084">channel.h:1084</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:45:52 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
