<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: bridge_channel.h File Reference</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_6d4b1cdb59e2db6ad82005b337288fef.html">asterisk</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">bridge_channel.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="../../dc/d7a/bridge__features_8h_source.html">asterisk/bridge_features.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="../../d0/d3b/bridge__technology_8h_source.html">asterisk/bridge_technology.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for bridge_channel.h:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d82/bridge__channel_8h__incl.png" border="0" usemap="#bridge__channel_8h" alt=""/></div>
<map name="bridge__channel_8h" id="bridge__channel_8h">
<area shape="rect" id="node2" href="../../dc/d7a/bridge__features_8h.html" title="Channel Bridging API. " alt="" coords="797,80,985,107"/>
<area shape="rect" id="node23" href="../../d0/d3b/bridge__technology_8h.html" title="Channel Bridging API. " alt="" coords="1009,80,1212,107"/>
<area shape="rect" id="node3" href="../../d5/d7b/channel_8h.html" title="General Asterisk PBX channel definitions. " alt="" coords="821,155,960,181"/>
<area shape="rect" id="node4" href="../../dc/d4d/alertpipe_8h.html" title="asterisk/alertpipe.h" alt="" coords="49,229,193,256"/>
<area shape="rect" id="node5" href="../../d5/d60/utils_8h.html" title="Utility functions. " alt="" coords="107,304,221,331"/>
<area shape="rect" id="node6" href="../../dd/d42/lock_8h.html" title="Asterisk locking&#45;related definitions: " alt="" coords="362,453,475,480"/>
<area shape="rect" id="node7" href="../../d1/d0f/stringfields_8h.html" title="asterisk/stringfields.h" alt="" coords="5,379,163,405"/>
<area shape="rect" id="node8" href="../../dc/d14/abstract__jb_8h.html" title="Common implementation&#45;independent jitterbuffer stuff. " alt="" coords="1055,229,1214,256"/>
<area shape="rect" id="node9" href="../../d5/da5/astobj2_8h.html" title="asterisk/astobj2.h" alt="" coords="418,304,553,331"/>
<area shape="rect" id="node10" href="../../df/d90/linkedlists_8h.html" title="A set of macros to manage forward&#45;linked lists. " alt="" coords="721,379,871,405"/>
<area shape="rect" id="node11" href="../../d4/dfb/poll-compat_8h.html" title="asterisk/poll&#45;compat.h" alt="" coords="1238,229,1402,256"/>
<area shape="rect" id="node12" href="../../d6/d66/include_2asterisk_2frame_8h.html" title="Asterisk internal frame definitions. " alt="" coords="577,304,703,331"/>
<area shape="rect" id="node13" href="../../d9/de7/chanvars_8h.html" title="Channel Variables. " alt="" coords="779,304,925,331"/>
<area shape="rect" id="node14" href="../../d3/de6/include_2asterisk_2config_8h.html" title="Configuration File Parser. " alt="" coords="218,229,345,256"/>
<area shape="rect" id="node15" href="../../dc/d07/cdr_8h.html" title="Call Detail Record API. " alt="" coords="1427,229,1533,256"/>
<area shape="rect" id="node16" href="../../d9/db6/datastore_8h.html" title="Asterisk datastore objects. " alt="" coords="950,304,1101,331"/>
<area shape="rect" id="node17" href="../../d0/d3c/format__cap_8h.html" title="Format Capabilities API. " alt="" coords="1558,229,1719,256"/>
<area shape="rect" id="node18" href="../../d9/d95/channelstate_8h.html" title="Channel states. " alt="" coords="1744,229,1915,256"/>
<area shape="rect" id="node19" href="../../de/dc8/ccss_8h.html" title="Call Completion Supplementary Services API. " alt="" coords="1125,304,1241,331"/>
<area shape="rect" id="node20" href="../../db/d3c/framehook_8h.html" title="FrameHook Architecture. " alt="" coords="671,229,828,256"/>
<area shape="rect" id="node21" href="../../dd/d79/stasis_8h.html" title="Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. " alt="" coords="369,229,495,256"/>
<area shape="rect" id="node22" href="../../d4/d61/endpoints_8h.html" title="Endpoint abstractions. " alt="" coords="1939,229,2090,256"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="../../d0/d5f/bridge__channel_8h__dep__incl.png" border="0" usemap="#bridge__channel_8hdep" alt=""/></div>
<map name="bridge__channel_8hdep" id="bridge__channel_8hdep">
<area shape="rect" id="node2" href="../../d4/d56/bridge_8h.html" title="Bridging API. " alt="" coords="2592,80,2667,107"/>
<area shape="rect" id="node14" href="../../d0/d95/bridge_8c.html" title="Bridging API. " alt="" coords="3134,244,3207,271"/>
<area shape="rect" id="node19" href="../../d1/db7/parking__bridge__features_8c.html" title="Parking Bridge DTMF and Interval features. " alt="" coords="5,244,192,271"/>
<area shape="rect" id="node26" href="../../d3/d32/bridge__channel_8c.html" title="Bridging Channel API. " alt="" coords="4223,244,4353,271"/>
<area shape="rect" id="node3" href="../../de/d11/app__agent__pool_8c.html" title="Call center agent pool. " alt="" coords="3805,162,3939,189"/>
<area shape="rect" id="node4" href="../../d0/df4/app__attended__transfer_8c.html" title="Attended transfer by caller channel. " alt="" coords="3964,162,4143,189"/>
<area shape="rect" id="node5" href="../../d7/d7c/app__blind__transfer_8c.html" title="Blind transfer by caller channel. " alt="" coords="4167,162,4318,189"/>
<area shape="rect" id="node6" href="../../d8/d6e/app__bridgeaddchan_8c.html" title="Application to place the channel into an existing Bridge. " alt="" coords="217,244,375,271"/>
<area shape="rect" id="node7" href="../../de/d47/features_8h.html" title="Call Parking and Pickup API Includes code and algorithms from the Zapata library. ..." alt="" coords="1023,162,1110,189"/>
<area shape="rect" id="node8" href="../../dc/d22/app__bridgewait_8c.html" title="Application to place the channel into a holding Bridge. " alt="" coords="399,244,529,271"/>
<area shape="rect" id="node9" href="../../d1/d97/chan__dahdi_8c.html" title="DAHDI for Pseudo TDM. " alt="" coords="1280,244,1387,271"/>
<area shape="rect" id="node10" href="../../d5/dff/chan__iax2_8c.html" title="Implementation of Inter&#45;Asterisk eXchange Version 2 as specified in RFC 5456. " alt="" coords="553,244,650,271"/>
<area shape="rect" id="node11" href="../../d0/dd6/chan__mgcp_8c.html" title="Implementation of Media Gateway Control Protocol. " alt="" coords="1411,244,1517,271"/>
<area shape="rect" id="node12" href="../../d7/d9b/chan__misdn_8c.html" title="the chan_misdn channel driver for Asterisk " alt="" coords="674,244,785,271"/>
<area shape="rect" id="node13" href="../../d2/d09/sig__analog_8c.html" title="Analog signaling module. " alt="" coords="1541,244,1643,271"/>
<area shape="rect" id="node15" href="../../d7/d9b/bridge__basic_8c.html" title="Basic bridge class. It is a subclass of struct ast_bridge. " alt="" coords="1027,244,1141,271"/>
<area shape="rect" id="node16" href="../../d4/d28/channel_8c.html" title="Channel Management. " alt="" coords="809,244,892,271"/>
<area shape="rect" id="node17" href="../../d5/d92/features_8c.html" title="Routines implementing call features as call pickup, parking and transfer. " alt="" coords="917,244,1003,271"/>
<area shape="rect" id="node18" href="../../d4/d10/manager_8c.html" title="The Asterisk Management Interface &#45; AMI. " alt="" coords="1165,244,1256,271"/>
<area shape="rect" id="node20" href="../../d0/dcf/app__confbridge_8c.html" title="Conference Bridge application. " alt="" coords="1788,319,1919,345"/>
<area shape="rect" id="node21" href="../../d4/de3/confbridge_8h.html" title="confbridge.h" alt="" coords="1891,244,1992,271"/>
<area shape="rect" id="node22" href="../../d8/d4f/conf__chan__announce_8c.html" title="ConfBridge announcer channel driver. " alt="" coords="4861,319,5029,345"/>
<area shape="rect" id="node23" href="../../d9/d44/conf__chan__record_8c.html" title="ConfBridge recorder channel driver. " alt="" coords="1612,319,1759,345"/>
<area shape="rect" id="node24" href="../../dd/d92/confbridge__manager_8c.html" title="Confbridge manager events for stasis messages. " alt="" coords="1947,319,2111,345"/>
<area shape="rect" id="node25" href="../../dc/d4e/stasis__bridges_8h.html" title="stasis_bridges.h" alt="" coords="1655,162,1780,189"/>
<area shape="rect" id="node27" href="../../da/dc9/cel_8c.html" title="Channel Event Logging API. " alt="" coords="4148,244,4199,271"/>
<area shape="rect" id="node28" href="../../df/dd3/main_2cli_8c.html" title="Standard Command Line Interface. " alt="" coords="1769,244,1815,271"/>
<area shape="rect" id="node29" href="../../da/d0f/stasis__bridges_8c.html" title="Stasis Messages and Data Types for Bridge Objects. " alt="" coords="2067,244,2191,271"/>
<area shape="rect" id="node30" href="../../d2/ddd/app__dumpchan_8c.html" title="Application to dump channel variables. " alt="" coords="1855,162,1987,189"/>
<area shape="rect" id="node31" href="../../de/dea/core__unreal_8h.html" title="Unreal channel derivative framework. " alt="" coords="5089,162,5199,189"/>
<area shape="rect" id="node32" href="../../df/d0c/chan__bridge__media_8c.html" title="Bridge Media Channels driver. " alt="" coords="4983,244,5142,271"/>
<area shape="rect" id="node33" href="../../de/d47/core__local_8c.html" title="Local proxy channel driver. " alt="" coords="5218,244,5315,271"/>
<area shape="rect" id="node34" href="../../df/d2e/core__unreal_8c.html" title="Unreal channel derivatives framework for channel drivers like local channels. " alt="" coords="5339,244,5447,271"/>
<area shape="rect" id="node35" href="../../d9/d45/bridge__builtin__features_8c.html" title="Built in bridging features. " alt="" coords="4377,244,4556,271"/>
<area shape="rect" id="node36" href="../../d2/d33/parking_8h.html" title="Call Parking API. " alt="" coords="4495,162,4577,189"/>
<area shape="rect" id="node37" href="../../d5/dfe/chan__sip_8c.html" title="Implementation of Session Initiation Protocol. " alt="" coords="4581,244,4670,271"/>
<area shape="rect" id="node38" href="../../d0/d80/chan__skinny_8c.html" title="Implementation of the Skinny protocol. " alt="" coords="4695,244,4804,271"/>
<area shape="rect" id="node39" href="../../d3/d2a/parking_8c.html" title="Parking Core. " alt="" coords="4828,244,4908,271"/>
<area shape="rect" id="node40" href="../../d2/df4/bridge__builtin__interval__features_8c.html" title="Built in bridging interval features. " alt="" coords="2063,155,2225,196"/>
<area shape="rect" id="node41" href="../../d8/d66/bridge__holding_8c.html" title="Bridging technology for storing channels in a bridge for the purpose of holding, parking, queues, and other such states where a channel may need to be in a bridge but not actually communicating with anything. " alt="" coords="2249,162,2375,189"/>
<area shape="rect" id="node42" href="../../d1/d27/bridge__native__rtp_8c.html" title="Native RTP bridging technology module. " alt="" coords="2400,162,2544,189"/>
<area shape="rect" id="node43" href="../../da/daf/bridge__simple_8c.html" title="Simple two channel bridging module. " alt="" coords="2568,162,2691,189"/>
<area shape="rect" id="node44" href="../../d8/df0/bridge__softmix__internal_8h.html" title="Multi&#45;party software based channel mixing (header) " alt="" coords="2715,162,2898,189"/>
<area shape="rect" id="node45" href="../../d3/dac/chan__oss_8c.html" title="Channel driver for OSS sound cards. " alt="" coords="2923,162,3016,189"/>
<area shape="rect" id="node46" href="../../d1/d6d/chan__unistim_8c.html" title="chan_unistim channel driver for Asterisk " alt="" coords="3041,162,3159,189"/>
<area shape="rect" id="node47" href="../../d9/da5/bridge__native__dahdi_8c.html" title="Native DAHDI bridging support. " alt="" coords="3183,162,3345,189"/>
<area shape="rect" id="node48" href="../../d9/d3d/func__channel_8c.html" title="Channel info dialplan functions. " alt="" coords="3369,162,3487,189"/>
<area shape="rect" id="node49" href="../../dd/d13/bridge__roles_8c.html" title="Channel Bridging Roles API. " alt="" coords="3511,162,3622,189"/>
<area shape="rect" id="node50" href="../../dc/d2b/stasis__channels_8c.html" title="Stasis Messages and Data Types for Channel Objects. " alt="" coords="3646,162,3781,189"/>
</map>
</div>
</div>
<p><a href="../../de/d41/bridge__channel_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure that contains information regarding a channel in a bridge.  <a href="../../d5/dca/structast__bridge__channel.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:aa467e25606c2a21df25c61f139007782"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel)&#160;&#160;&#160;<a class="el" href="../../de/d41/bridge__channel_8h.html#abb70de322d703cbae008e889909de002">_ast_bridge_channel_lock</a>(bridge_channel, __FILE__, __PRETTY_FUNCTION__, __LINE__, #bridge_channel)</td></tr>
<tr class="memdesc:aa467e25606c2a21df25c61f139007782"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the bridge_channel.  <a href="#aa467e25606c2a21df25c61f139007782">More...</a><br /></td></tr>
<tr class="separator:aa467e25606c2a21df25c61f139007782"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa58823cb0b78a23c0b9e869d2ccfe7f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#aaa58823cb0b78a23c0b9e869d2ccfe7f">ast_bridge_channel_trylock</a>(bridge_channel)&#160;&#160;&#160;<a class="el" href="../../de/d41/bridge__channel_8h.html#a762cb46fede6edffd48c071d09c3e62d">_ast_bridge_channel_trylock</a>(bridge_channel, __FILE__, __PRETTY_FUNCTION__, __LINE__, #bridge_channel)</td></tr>
<tr class="memdesc:aaa58823cb0b78a23c0b9e869d2ccfe7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try locking the bridge_channel.  <a href="#aaa58823cb0b78a23c0b9e869d2ccfe7f">More...</a><br /></td></tr>
<tr class="separator:aaa58823cb0b78a23c0b9e869d2ccfe7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a483cd10a0ddcca5814298bdb4f153878"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel)&#160;&#160;&#160;<a class="el" href="../../de/d41/bridge__channel_8h.html#a5ad1ff3299d9feaa7513faa8c99fb775">_ast_bridge_channel_unlock</a>(bridge_channel, __FILE__, __PRETTY_FUNCTION__, __LINE__, #bridge_channel)</td></tr>
<tr class="memdesc:a483cd10a0ddcca5814298bdb4f153878"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock the bridge_channel.  <a href="#a483cd10a0ddcca5814298bdb4f153878">More...</a><br /></td></tr>
<tr class="separator:a483cd10a0ddcca5814298bdb4f153878"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a7c65814e807e654cd23c9d952e23b69a"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a>) (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const void *payload, size_t payload_size)</td></tr>
<tr class="memdesc:a7c65814e807e654cd23c9d952e23b69a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom callback run on a bridge channel.  <a href="#a7c65814e807e654cd23c9d952e23b69a">More...</a><br /></td></tr>
<tr class="separator:a7c65814e807e654cd23c9d952e23b69a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afb66d5073210f00fef9adc41e16a5f00"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>) (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *playfile)</td></tr>
<tr class="memdesc:afb66d5073210f00fef9adc41e16a5f00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Custom interpretation of the playfile name.  <a href="#afb66d5073210f00fef9adc41e16a5f00">More...</a><br /></td></tr>
<tr class="separator:afb66d5073210f00fef9adc41e16a5f00"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:a411218cf4d743baa73c2def8f024cb23"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a> { <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a> = (1 &lt;&lt; 0)
 }</td></tr>
<tr class="separator:a411218cf4d743baa73c2def8f024cb23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab44a00c2c23eaeec1d8b61eb254eecaa"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a> { <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a> = 0, 
<a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, 
<a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a>
 }<tr class="memdesc:ab44a00c2c23eaeec1d8b61eb254eecaa"><td class="mdescLeft">&#160;</td><td class="mdescRight">State information about a bridged channel.  <a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">More...</a><br /></td></tr>
</td></tr>
<tr class="separator:ab44a00c2c23eaeec1d8b61eb254eecaa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad52acdbb06c9299895662cf57a4323a3"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3">bridge_channel_thread_state</a> { <a class="el" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aeaf381ba8ae8b2716b0dff5e77d539f4">BRIDGE_CHANNEL_THREAD_IDLE</a>, 
<a class="el" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aae37f04db23e9c3e3d350cc34c6476ef">BRIDGE_CHANNEL_THREAD_SIMPLE</a>, 
<a class="el" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3a90dd0ccabc55139d4f416a7fdde24921">BRIDGE_CHANNEL_THREAD_FRAME</a>
 }</td></tr>
<tr class="separator:ad52acdbb06c9299895662cf57a4323a3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:abb70de322d703cbae008e889909de002"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#abb70de322d703cbae008e889909de002">_ast_bridge_channel_lock</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *file, const char *function, int line, const char *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>)</td></tr>
<tr class="separator:abb70de322d703cbae008e889909de002"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a762cb46fede6edffd48c071d09c3e62d"><td class="memItemLeft" align="right" valign="top">static int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a762cb46fede6edffd48c071d09c3e62d">_ast_bridge_channel_trylock</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *file, const char *function, int line, const char *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>)</td></tr>
<tr class="separator:a762cb46fede6edffd48c071d09c3e62d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5ad1ff3299d9feaa7513faa8c99fb775"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a5ad1ff3299d9feaa7513faa8c99fb775">_ast_bridge_channel_unlock</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *file, const char *function, int line, const char *<a class="el" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>)</td></tr>
<tr class="separator:a5ad1ff3299d9feaa7513faa8c99fb775"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69864377e8f1cf05ba95f1645bc98c65"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a69864377e8f1cf05ba95f1645bc98c65">ast_bridge_channel_feature_digit</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="memdesc:a69864377e8f1cf05ba95f1645bc98c65"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a DTMF digit to the collected digits to match against DTMF features.  <a href="#a69864377e8f1cf05ba95f1645bc98c65">More...</a><br /></td></tr>
<tr class="separator:a69864377e8f1cf05ba95f1645bc98c65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a3de22abaf5ae848a3745186fa399e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a2a3de22abaf5ae848a3745186fa399e0">ast_bridge_channel_feature_digit_add</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int <a class="el" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>)</td></tr>
<tr class="memdesc:a2a3de22abaf5ae848a3745186fa399e0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Add a DTMF digit to the collected digits.  <a href="#a2a3de22abaf5ae848a3745186fa399e0">More...</a><br /></td></tr>
<tr class="separator:a2a3de22abaf5ae848a3745186fa399e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae04b08c94e2d24a179c9b8e0842ccc57"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ae04b08c94e2d24a179c9b8e0842ccc57">ast_bridge_channel_get_chan</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:ae04b08c94e2d24a179c9b8e0842ccc57"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a ref to the bridge_channel's <a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a>.  <a href="#ae04b08c94e2d24a179c9b8e0842ccc57">More...</a><br /></td></tr>
<tr class="separator:ae04b08c94e2d24a179c9b8e0842ccc57"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e482bb2dcffd792205f114ddfa098fb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int cause)</td></tr>
<tr class="memdesc:a7e482bb2dcffd792205f114ddfa098fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Kick the channel out of the bridge.  <a href="#a7e482bb2dcffd792205f114ddfa098fb">More...</a><br /></td></tr>
<tr class="separator:a7e482bb2dcffd792205f114ddfa098fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad58d921ec1c5a6f12be8f94327dd98c0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a> new_state, int cause)</td></tr>
<tr class="memdesc:ad58d921ec1c5a6f12be8f94327dd98c0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set bridge channel state to leave bridge (if not leaving already).  <a href="#ad58d921ec1c5a6f12be8f94327dd98c0">More...</a><br /></td></tr>
<tr class="separator:ad58d921ec1c5a6f12be8f94327dd98c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab37a1835212d045dcfe7ef7f25eb5e31"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ab37a1835212d045dcfe7ef7f25eb5e31">ast_bridge_channel_leave_bridge_nolock</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a> new_state, int cause)</td></tr>
<tr class="memdesc:ab37a1835212d045dcfe7ef7f25eb5e31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set bridge channel state to leave bridge (if not leaving already).  <a href="#ab37a1835212d045dcfe7ef7f25eb5e31">More...</a><br /></td></tr>
<tr class="separator:ab37a1835212d045dcfe7ef7f25eb5e31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d01ff5caf025a97796d2dbb78f5f02c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:a7d01ff5caf025a97796d2dbb78f5f02c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock the bridge associated with the bridge channel.  <a href="#a7d01ff5caf025a97796d2dbb78f5f02c">More...</a><br /></td></tr>
<tr class="separator:a7d01ff5caf025a97796d2dbb78f5f02c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aada1c86f1020a0d546b371a8ff602cee"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#aada1c86f1020a0d546b371a8ff602cee">ast_bridge_channel_merge_inhibit</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int <a class="el" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>)</td></tr>
<tr class="memdesc:aada1c86f1020a0d546b371a8ff602cee"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adjust the bridge_channel's bridge merge inhibit request count.  <a href="#aada1c86f1020a0d546b371a8ff602cee">More...</a><br /></td></tr>
<tr class="separator:aada1c86f1020a0d546b371a8ff602cee"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a891462a54b03fb795d42765b661cede6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a891462a54b03fb795d42765b661cede6">ast_bridge_channel_notify_talking</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, int started_talking)</td></tr>
<tr class="memdesc:a891462a54b03fb795d42765b661cede6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lets the bridging indicate when a bridge channel has stopped or started talking.  <a href="#a891462a54b03fb795d42765b661cede6">More...</a><br /></td></tr>
<tr class="separator:a891462a54b03fb795d42765b661cede6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a9bea2845810c6891440a012a275a36"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a0a9bea2845810c6891440a012a275a36">ast_bridge_channel_peer</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:a0a9bea2845810c6891440a012a275a36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the peer bridge channel of a two party bridge.  <a href="#a0a9bea2845810c6891440a012a275a36">More...</a><br /></td></tr>
<tr class="separator:a0a9bea2845810c6891440a012a275a36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01de7987fb023a0c1e52965454797d0b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a01de7987fb023a0c1e52965454797d0b">ast_bridge_channel_playfile</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a> custom_play, const char *playfile, const char *moh_class)</td></tr>
<tr class="memdesc:a01de7987fb023a0c1e52965454797d0b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play a file on the bridge channel.  <a href="#a01de7987fb023a0c1e52965454797d0b">More...</a><br /></td></tr>
<tr class="separator:a01de7987fb023a0c1e52965454797d0b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fa039da96461900d3a9f0ceefd7298f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a4fa039da96461900d3a9f0ceefd7298f">ast_bridge_channel_queue_app</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *<a class="el" href="../../d9/da0/pbx__private_8h.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, const char *app_args, const char *moh_class)</td></tr>
<tr class="memdesc:a4fa039da96461900d3a9f0ceefd7298f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a bridge action run application frame onto the bridge channel.  <a href="#a4fa039da96461900d3a9f0ceefd7298f">More...</a><br /></td></tr>
<tr class="separator:a4fa039da96461900d3a9f0ceefd7298f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7de2a71d5af8f85035713f1f3cb69a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ad7de2a71d5af8f85035713f1f3cb69a9">ast_bridge_channel_queue_callback</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a> flags, <a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a> callback, const void *payload, size_t payload_size)</td></tr>
<tr class="memdesc:ad7de2a71d5af8f85035713f1f3cb69a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a bridge action custom callback frame onto the bridge channel.  <a href="#ad7de2a71d5af8f85035713f1f3cb69a9">More...</a><br /></td></tr>
<tr class="separator:ad7de2a71d5af8f85035713f1f3cb69a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc0302bab9fb2f318db695fe1f9047d8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#abc0302bab9fb2f318db695fe1f9047d8">ast_bridge_channel_queue_control_data</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a> control, const void *data, size_t datalen)</td></tr>
<tr class="memdesc:abc0302bab9fb2f318db695fe1f9047d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a control frame onto the bridge channel with data.  <a href="#abc0302bab9fb2f318db695fe1f9047d8">More...</a><br /></td></tr>
<tr class="separator:abc0302bab9fb2f318db695fe1f9047d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aba51942a86849ae41c5397d596cb8ed1"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *fr)</td></tr>
<tr class="memdesc:aba51942a86849ae41c5397d596cb8ed1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a frame to the specified bridge_channel.  <a href="#aba51942a86849ae41c5397d596cb8ed1">More...</a><br /></td></tr>
<tr class="separator:aba51942a86849ae41c5397d596cb8ed1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac352fd6d6188d7431155f34ae2a38799"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ac352fd6d6188d7431155f34ae2a38799">ast_bridge_channel_queue_playfile</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a> custom_play, const char *playfile, const char *moh_class)</td></tr>
<tr class="memdesc:ac352fd6d6188d7431155f34ae2a38799"><td class="mdescLeft">&#160;</td><td class="mdescRight">Queue a bridge action play file frame onto the bridge channel.  <a href="#ac352fd6d6188d7431155f34ae2a38799">More...</a><br /></td></tr>
<tr class="separator:ac352fd6d6188d7431155f34ae2a38799"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac7787cec5827585d82ad62292744aeaf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ac7787cec5827585d82ad62292744aeaf">ast_bridge_channel_queue_playfile_sync</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a> custom_play, const char *playfile, const char *moh_class)</td></tr>
<tr class="memdesc:ac7787cec5827585d82ad62292744aeaf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronously queue a bridge action play file frame onto the bridge channel.  <a href="#ac7787cec5827585d82ad62292744aeaf">More...</a><br /></td></tr>
<tr class="separator:ac7787cec5827585d82ad62292744aeaf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac77801ebc652f818148d6da29869970c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ac77801ebc652f818148d6da29869970c">ast_bridge_channel_restore_formats</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:ac77801ebc652f818148d6da29869970c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Restore the formats of a bridge channel's channel to how they were before bridge_channel_internal_join.  <a href="#ac77801ebc652f818148d6da29869970c">More...</a><br /></td></tr>
<tr class="separator:ac77801ebc652f818148d6da29869970c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18a051cde2dd2ad809524473ef4ae5ef"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a18a051cde2dd2ad809524473ef4ae5ef">ast_bridge_channel_run_app</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *<a class="el" href="../../d9/da0/pbx__private_8h.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, const char *app_args, const char *moh_class)</td></tr>
<tr class="memdesc:a18a051cde2dd2ad809524473ef4ae5ef"><td class="mdescLeft">&#160;</td><td class="mdescRight">Run an application on the bridge channel.  <a href="#a18a051cde2dd2ad809524473ef4ae5ef">More...</a><br /></td></tr>
<tr class="separator:a18a051cde2dd2ad809524473ef4ae5ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa464f1acd378d6a297a514007cec8d18"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#aa464f1acd378d6a297a514007cec8d18">ast_bridge_channel_stream_map</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:aa464f1acd378d6a297a514007cec8d18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps a channel's stream topology to and from the bridge.  <a href="#aa464f1acd378d6a297a514007cec8d18">More...</a><br /></td></tr>
<tr class="separator:aa464f1acd378d6a297a514007cec8d18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a609d9cf54ffe625a1a13cbce1df9492e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a609d9cf54ffe625a1a13cbce1df9492e">ast_bridge_channel_update_accountcodes</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *joining, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *leaving)</td></tr>
<tr class="separator:a609d9cf54ffe625a1a13cbce1df9492e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a27c80bee9eb9c5fa1a17c722115c5ac1"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a27c80bee9eb9c5fa1a17c722115c5ac1">ast_bridge_channel_update_linkedids</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *swap)</td></tr>
<tr class="separator:a27c80bee9eb9c5fa1a17c722115c5ac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a04e98e9a5ac91b85c516b4d579a34449"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a04e98e9a5ac91b85c516b4d579a34449">ast_bridge_channel_write_app</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *<a class="el" href="../../d9/da0/pbx__private_8h.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, const char *app_args, const char *moh_class)</td></tr>
<tr class="memdesc:a04e98e9a5ac91b85c516b4d579a34449"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a bridge action run application frame into the bridge.  <a href="#a04e98e9a5ac91b85c516b4d579a34449">More...</a><br /></td></tr>
<tr class="separator:a04e98e9a5ac91b85c516b4d579a34449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae014c66309327185b609d7e3ccf21af5"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ae014c66309327185b609d7e3ccf21af5">ast_bridge_channel_write_callback</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a> flags, <a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a> callback, const void *payload, size_t payload_size)</td></tr>
<tr class="memdesc:ae014c66309327185b609d7e3ccf21af5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a bridge action custom callback frame into the bridge.  <a href="#ae014c66309327185b609d7e3ccf21af5">More...</a><br /></td></tr>
<tr class="separator:ae014c66309327185b609d7e3ccf21af5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d7ca6b64c5bd875d4f16e8aef443497"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a> control, const void *data, size_t datalen)</td></tr>
<tr class="memdesc:a9d7ca6b64c5bd875d4f16e8aef443497"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a control frame into the bridge with data.  <a href="#a9d7ca6b64c5bd875d4f16e8aef443497">More...</a><br /></td></tr>
<tr class="separator:a9d7ca6b64c5bd875d4f16e8aef443497"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad70b0a7df24a2aa9e284d8c785dcbd45"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *moh_class)</td></tr>
<tr class="memdesc:ad70b0a7df24a2aa9e284d8c785dcbd45"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a hold frame into the bridge.  <a href="#ad70b0a7df24a2aa9e284d8c785dcbd45">More...</a><br /></td></tr>
<tr class="separator:ad70b0a7df24a2aa9e284d8c785dcbd45"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af9a368f3ce4811e8ca53ef51d6cd69f9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#af9a368f3ce4811e8ca53ef51d6cd69f9">ast_bridge_channel_write_park</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *parkee_uuid, const char *parker_uuid, const char *<a class="el" href="../../da/d37/structapp__data.html">app_data</a>)</td></tr>
<tr class="memdesc:af9a368f3ce4811e8ca53ef51d6cd69f9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Have a bridge channel park a channel in the bridge.  <a href="#af9a368f3ce4811e8ca53ef51d6cd69f9">More...</a><br /></td></tr>
<tr class="separator:af9a368f3ce4811e8ca53ef51d6cd69f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad30f159c66c054fd95a739c087a6c5e9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#ad30f159c66c054fd95a739c087a6c5e9">ast_bridge_channel_write_playfile</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, <a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a> custom_play, const char *playfile, const char *moh_class)</td></tr>
<tr class="memdesc:ad30f159c66c054fd95a739c087a6c5e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write a bridge action play file frame into the bridge.  <a href="#ad30f159c66c054fd95a739c087a6c5e9">More...</a><br /></td></tr>
<tr class="separator:ad30f159c66c054fd95a739c087a6c5e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4be080559ea3fc87e50aa29a95af74f0"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../de/d41/bridge__channel_8h.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a> (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel)</td></tr>
<tr class="memdesc:a4be080559ea3fc87e50aa29a95af74f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write an unhold frame into the bridge.  <a href="#a4be080559ea3fc87e50aa29a95af74f0">More...</a><br /></td></tr>
<tr class="separator:a4be080559ea3fc87e50aa29a95af74f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="aa467e25606c2a21df25c61f139007782"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa467e25606c2a21df25c61f139007782">&#9670;&nbsp;</a></span>ast_bridge_channel_lock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_bridge_channel_lock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bridge_channel</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../de/d41/bridge__channel_8h.html#abb70de322d703cbae008e889909de002">_ast_bridge_channel_lock</a>(bridge_channel, __FILE__, __PRETTY_FUNCTION__, __LINE__, #bridge_channel)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock the bridge_channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>What to lock</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">231</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01660">agent_bridge_channel_get_lock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03174">ast_bridge_channel_stream_map()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02027">bridge_channel_attended_transfer()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02055">bridge_channel_change_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02444">bridge_channel_handle_write()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00892">bridge_channel_internal_unsuspend_nolock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00830">bridge_channel_queue_deferred_frames()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel_write_frame()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>, <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00206">bridge_parking_push()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02181">map_source_to_destinations()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00720">remove_hooks_on_personality_change()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02463">softmix_bridge_stream_topology_changed()</a>.</p>

</div>
</div>
<a id="aaa58823cb0b78a23c0b9e869d2ccfe7f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaa58823cb0b78a23c0b9e869d2ccfe7f">&#9670;&nbsp;</a></span>ast_bridge_channel_trylock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_bridge_channel_trylock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bridge_channel</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../de/d41/bridge__channel_8h.html#a762cb46fede6edffd48c071d09c3e62d">_ast_bridge_channel_trylock</a>(bridge_channel, __FILE__, __PRETTY_FUNCTION__, __LINE__, #bridge_channel)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try locking the bridge_channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>What to try locking</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">non-zero</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00218">218</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l02627">optimize_lock_chan_stack()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02672">optimize_lock_peer_stack()</a>.</p>

</div>
</div>
<a id="a483cd10a0ddcca5814298bdb4f153878"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a483cd10a0ddcca5814298bdb4f153878">&#9670;&nbsp;</a></span>ast_bridge_channel_unlock</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ast_bridge_channel_unlock</td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname">bridge_channel</td><td>)</td>
          <td>&#160;&#160;&#160;<a class="el" href="../../de/d41/bridge__channel_8h.html#a5ad1ff3299d9feaa7513faa8c99fb775">_ast_bridge_channel_unlock</a>(bridge_channel, __FILE__, __PRETTY_FUNCTION__, __LINE__, #bridge_channel)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Unlock the bridge_channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>What to unlock</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">244</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01660">agent_bridge_channel_get_lock()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01889">agent_request_exec()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03174">ast_bridge_channel_stream_map()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02968">ast_bridge_unreal_optimize_out()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02027">bridge_channel_attended_transfer()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02055">bridge_channel_change_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02444">bridge_channel_handle_write()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00892">bridge_channel_internal_unsuspend_nolock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00830">bridge_channel_queue_deferred_frames()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel_write_frame()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>, <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00206">bridge_parking_push()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">caller_abort_agent()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01847">caller_joined_bridge()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02181">map_source_to_destinations()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02627">optimize_lock_chan_stack()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02672">optimize_lock_peer_stack()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00720">remove_hooks_on_personality_change()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02463">softmix_bridge_stream_topology_changed()</a>.</p>

</div>
</div>
<h2 class="groupheader">Typedef Documentation</h2>
<a id="a7c65814e807e654cd23c9d952e23b69a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7c65814e807e654cd23c9d952e23b69a">&#9670;&nbsp;</a></span>ast_bridge_custom_callback_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* ast_bridge_custom_callback_fn) (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const void *payload, size_t payload_size)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Custom callback run on a bridge channel. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to operate on. </td></tr>
    <tr><td class="paramname">payload</td><td>Data to pass to the callback. (NULL if none). </td></tr>
    <tr><td class="paramname">payload_size</td><td>Size of the payload if payload is non-NULL. A number otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The payload MUST NOT have any resources that need to be freed.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00612">612</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>

</div>
</div>
<a id="afb66d5073210f00fef9adc41e16a5f00"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afb66d5073210f00fef9adc41e16a5f00">&#9670;&nbsp;</a></span>ast_bridge_custom_play_fn</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* ast_bridge_custom_play_fn) (struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *bridge_channel, const char *playfile)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Custom interpretation of the playfile name. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to play the file on </td></tr>
    <tr><td class="paramname">playfile</td><td>Sound filename to play.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00524">524</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="a411218cf4d743baa73c2def8f024cb23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a411218cf4d743baa73c2def8f024cb23">&#9670;&nbsp;</a></span>ast_bridge_channel_custom_callback_option</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77"></a>AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA&#160;</td><td class="fielddoc"><p>The callback temporarily affects media. (Like a custom playfile.) </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00614">614</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;                                               {<span class="comment"></span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">   /*! The callback temporarily affects media. (Like a custom playfile.) */</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;};</div><div class="ttc" id="bridge__channel_8h_html_a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23a7d9b9e7c20920a163afd3009c21a0e77">AST_BRIDGE_CHANNEL_CB_OPTION_MEDIA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00616">bridge_channel.h:616</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab44a00c2c23eaeec1d8b61eb254eecaa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab44a00c2c23eaeec1d8b61eb254eecaa">&#9670;&nbsp;</a></span>bridge_channel_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>State information about a bridged channel. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"></a>BRIDGE_CHANNEL_STATE_WAIT&#160;</td><td class="fielddoc"><p>Waiting for a signal (Channel in the bridge) </p>
</td></tr>
<tr><td class="fieldname"><a id="ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"></a>BRIDGE_CHANNEL_STATE_END&#160;</td><td class="fielddoc"><p>Bridged channel was forced out and should be hung up (Bridge may dissolve.) </p>
</td></tr>
<tr><td class="fieldname"><a id="ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac"></a>BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE&#160;</td><td class="fielddoc"><p>Bridged channel was forced out. Don't dissolve the bridge regardless </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00060">60</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;                          {<span class="comment"></span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">   /*! Waiting for a signal (Channel in the bridge) */</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a> = 0,<span class="comment"></span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">   /*! Bridged channel was forced out and should be hung up (Bridge may dissolve.) */</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>,<span class="comment"></span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">   /*! Bridged channel was forced out. Don&#39;t dissolve the bridge regardless */</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a>,</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;};</div><div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaa708398f920511beb8ea9df06bf16daac">BRIDGE_CHANNEL_STATE_END_NO_DISSOLVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00066">bridge_channel.h:66</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad52acdbb06c9299895662cf57a4323a3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad52acdbb06c9299895662cf57a4323a3">&#9670;&nbsp;</a></span>bridge_channel_thread_state</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3">bridge_channel_thread_state</a></td>
        </tr>
      </table>
</div><div class="memdoc">
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="ad52acdbb06c9299895662cf57a4323a3aeaf381ba8ae8b2716b0dff5e77d539f4"></a>BRIDGE_CHANNEL_THREAD_IDLE&#160;</td><td class="fielddoc"><p>Bridge channel thread is idle/waiting. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad52acdbb06c9299895662cf57a4323a3aae37f04db23e9c3e3d350cc34c6476ef"></a>BRIDGE_CHANNEL_THREAD_SIMPLE&#160;</td><td class="fielddoc"><p>Bridge channel thread is writing a normal/simple frame. </p>
</td></tr>
<tr><td class="fieldname"><a id="ad52acdbb06c9299895662cf57a4323a3a90dd0ccabc55139d4f416a7fdde24921"></a>BRIDGE_CHANNEL_THREAD_FRAME&#160;</td><td class="fielddoc"><p>Bridge channel thread is processing a frame. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00069">69</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>
<div class="fragment"><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                                 {<span class="comment"></span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">   /*! Bridge channel thread is idle/waiting. */</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aeaf381ba8ae8b2716b0dff5e77d539f4">BRIDGE_CHANNEL_THREAD_IDLE</a>,<span class="comment"></span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="comment">   /*! Bridge channel thread is writing a normal/simple frame. */</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aae37f04db23e9c3e3d350cc34c6476ef">BRIDGE_CHANNEL_THREAD_SIMPLE</a>,<span class="comment"></span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">   /*! Bridge channel thread is processing a frame. */</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3a90dd0ccabc55139d4f416a7fdde24921">BRIDGE_CHANNEL_THREAD_FRAME</a>,</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;};</div><div class="ttc" id="bridge__channel_8h_html_ad52acdbb06c9299895662cf57a4323a3a90dd0ccabc55139d4f416a7fdde24921"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3a90dd0ccabc55139d4f416a7fdde24921">BRIDGE_CHANNEL_THREAD_FRAME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00075">bridge_channel.h:75</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad52acdbb06c9299895662cf57a4323a3aae37f04db23e9c3e3d350cc34c6476ef"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aae37f04db23e9c3e3d350cc34c6476ef">BRIDGE_CHANNEL_THREAD_SIMPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00073">bridge_channel.h:73</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ad52acdbb06c9299895662cf57a4323a3aeaf381ba8ae8b2716b0dff5e77d539f4"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ad52acdbb06c9299895662cf57a4323a3aeaf381ba8ae8b2716b0dff5e77d539f4">BRIDGE_CHANNEL_THREAD_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00071">bridge_channel.h:71</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abb70de322d703cbae008e889909de002"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb70de322d703cbae008e889909de002">&#9670;&nbsp;</a></span>_ast_bridge_channel_lock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _ast_bridge_channel_lock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00232">232</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00222">__ao2_lock()</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00703">AO2_LOCK_REQ_MUTEX</a>.</p>
<div class="fragment"><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ae8abe54e1e1460641ed987db20e75e81">__ao2_lock</a>(bridge_channel, <a class="code" href="../../d5/da5/astobj2_8h.html#a4e9f309cb90824e22969f0cf1b5b445da1381af5f17622000f344130ef673987b">AO2_LOCK_REQ_MUTEX</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="keyword">function</span>, line, <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae8abe54e1e1460641ed987db20e75e81"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae8abe54e1e1460641ed987db20e75e81">__ao2_lock</a></div><div class="ttdeci">int __ao2_lock(void *a, enum ao2_lock_req lock_how, const char *file, const char *func, int line, const char *var)</div><div class="ttdoc">Lock an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00222">astobj2.c:222</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="astobj2_8h_html_a4e9f309cb90824e22969f0cf1b5b445da1381af5f17622000f344130ef673987b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a4e9f309cb90824e22969f0cf1b5b445da1381af5f17622000f344130ef673987b">AO2_LOCK_REQ_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00703">astobj2.h:703</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a762cb46fede6edffd48c071d09c3e62d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a762cb46fede6edffd48c071d09c3e62d">&#9670;&nbsp;</a></span>_ast_bridge_channel_trylock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int _ast_bridge_channel_trylock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00219">219</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00342">__ao2_trylock()</a>, and <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00703">AO2_LOCK_REQ_MUTEX</a>.</p>
<div class="fragment"><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;{</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a321ba5fa712b06adeedb310a1fe519f4">__ao2_trylock</a>(bridge_channel, <a class="code" href="../../d5/da5/astobj2_8h.html#a4e9f309cb90824e22969f0cf1b5b445da1381af5f17622000f344130ef673987b">AO2_LOCK_REQ_MUTEX</a>, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="keyword">function</span>, line, <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="astobj2_8h_html_a4e9f309cb90824e22969f0cf1b5b445da1381af5f17622000f344130ef673987b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a4e9f309cb90824e22969f0cf1b5b445da1381af5f17622000f344130ef673987b">AO2_LOCK_REQ_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00703">astobj2.h:703</a></div></div>
<div class="ttc" id="astobj2_8h_html_a321ba5fa712b06adeedb310a1fe519f4"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a321ba5fa712b06adeedb310a1fe519f4">__ao2_trylock</a></div><div class="ttdeci">int __ao2_trylock(void *a, enum ao2_lock_req lock_how, const char *file, const char *func, int line, const char *var)</div><div class="ttdoc">Try locking (don&amp;#39;t block if fail) </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00342">astobj2.c:342</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a5ad1ff3299d9feaa7513faa8c99fb775"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5ad1ff3299d9feaa7513faa8c99fb775">&#9670;&nbsp;</a></span>_ast_bridge_channel_unlock()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void _ast_bridge_channel_unlock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>var</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">245</a> of file <a class="el" href="../../de/d41/bridge__channel_8h_source.html">bridge_channel.h</a>.</p>

<p class="reference">References <a class="el" href="../../da/df7/astobj2_8c_source.html#l00288">__ao2_unlock()</a>, <a class="el" href="../../dd/d16/pbx__app_8c_source.html#l00463">app_name()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00292">ast_bridge_channel_leave_bridge_nolock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00369">ast_bridge_channel_merge_inhibit()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00244">ast_bridge_channel_notify_talking()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00321">ast_bridge_channel_peer()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01315">ast_bridge_channel_queue_app()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01143">ast_bridge_channel_queue_control_data()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00337">ast_bridge_channel_restore_formats()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">ast_bridge_channel_run_app()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00596">ast_bridge_channel_update_accountcodes()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00381">ast_bridge_channel_update_linkedids()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01309">ast_bridge_channel_write_app()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01155">ast_bridge_channel_write_control_data()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01167">ast_bridge_channel_write_hold()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">ast_bridge_channel_write_unhold()</a>, <a class="el" href="../../d0/d29/chan__pjsip_8c_source.html#l02559">request()</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00093">ast_bridge_channel::swap</a>.</p>
<div class="fragment"><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;{</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ae77cde78a0e0ae3e75a2911857bfadc5">__ao2_unlock</a>(bridge_channel, <a class="code" href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">file</a>, <span class="keyword">function</span>, line, <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>);</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;}</div><div class="ttc" id="namespacemake__ari__stubs_html_a40a5d58ffa6e88aa578d6683ac413105"><div class="ttname"><a href="../../d2/dc8/namespacemake__ari__stubs.html#a40a5d58ffa6e88aa578d6683ac413105">make_ari_stubs.file</a></div><div class="ttdeci">file</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d28/make__ari__stubs_8py_source.html#l00025">make_ari_stubs.py:25</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae77cde78a0e0ae3e75a2911857bfadc5"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae77cde78a0e0ae3e75a2911857bfadc5">__ao2_unlock</a></div><div class="ttdeci">int __ao2_unlock(void *a, const char *file, const char *func, int line, const char *var)</div><div class="ttdoc">Unlock an object. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00288">astobj2.c:288</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a69864377e8f1cf05ba95f1645bc98c65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69864377e8f1cf05ba95f1645bc98c65">&#9670;&nbsp;</a></span>ast_bridge_channel_feature_digit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_feature_digit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a DTMF digit to the collected digits to match against DTMF features. </p>
<dl class="section since"><dt>Since</dt><dd>12.8.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel that received a DTMF digit. </td></tr>
    <tr><td class="paramname">digit</td><td>DTMF digit to add to collected digits or 0 for timeout event. </td></tr>
    <tr><td class="paramname">clear_digits</td><td>clear the digits array prior to calling hooks</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Neither the bridge nor the bridge_channel locks should be held when entering this function.</dd>
<dd>
This is intended to be called by bridge hooks and the bridge channel thread.</dd>
<dd>
This is intended to be called by non-DTMF bridge hooks and the bridge channel thread. Calling from a DTMF bridge hook can potentially cause unbounded recursion.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">1762</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01756">ao2_find</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../de/dfe/isdn__lib_8c_source.html#l00042">ARRAY_LEN</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l00459">ast_check_hangup_locked()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">AST_CONTROL_SRCUPDATE</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l04322">ast_indicate()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00238">ast_samp2tv()</a>, <a class="el" href="../../d2/ddc/test_8h_source.html#l00196">ast_test_suite_event_notify</a>, <a class="el" href="../../d4/dc5/extconf_8c_source.html#l02283">ast_tvadd()</a>, <a class="el" href="../../de/df7/time_8h_source.html#l00150">ast_tvnow()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01717">bridge_channel_feature_digit_add()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01733">bridge_channel_feature_digit_timeout()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00854">bridge_channel_internal_suspend_nolock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel_unsuspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01659">bridge_channel_write_dtmf_stream()</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00203">ast_bridge_hook::callback</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00222">ast_bridge_hook_dtmf_parms::code</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00175">ast_bridge_channel::collected</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00230">ast_bridge_hook_dtmf::dtmf</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00265">ast_bridge_features::dtmf_hooks</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00279">ast_bridge_features::dtmf_passthrough</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00228">ast_bridge_hook_dtmf::generic</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00207">ast_bridge_hook::hook_pvt</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00173">ast_bridge_channel::interdigit_timeout</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01120">OBJ_SEARCH_PARTIAL_KEY</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00125">ast_bridge_channel::suspended</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01675">testsuite_notify_feature_success()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01883">bridge_channel_handle_feature_timeout()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02548">bridge_handle_dtmf()</a>.</p>
<div class="fragment"><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;{</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html">ast_bridge_hook_dtmf</a> *hook = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;   <span class="keywordtype">size_t</span> dtmf_len;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <span class="keyword">struct </span>sanity_check_of_dtmf_size {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="keywordtype">char</span> check[1 / (<a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>) == <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">dtmf</a>.<a class="code" href="../../d3/d00/structast__bridge__hook__dtmf__parms.html#a112bc20acdbae84f53c59cffc6bf3a94">code</a>))];</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   };</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;   dtmf_len = strlen(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   <span class="keywordflow">if</span> (!dtmf_len &amp;&amp; !<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="comment">/* Nothing to do */</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;   }</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      dtmf_len = <a class="code" href="../../d3/d32/bridge__channel_8c.html#aedf7b84efe76a7dc658d6ff5f9e9f187">bridge_channel_feature_digit_add</a>(bridge_channel, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, dtmf_len);</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   }</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      <span class="comment">/* See if a DTMF feature hook matches or can match */</span></div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      hook = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a70760b613dd26b51a5667e7f0fa7fb8a">dtmf_hooks</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>,</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a>);</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <span class="keywordflow">if</span> (!hook) {</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;No DTMF feature hooks on %p(%s) match &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;            bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;            bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dtmf_len != strlen(hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">dtmf</a>.<a class="code" href="../../d3/d00/structast__bridge__hook__dtmf__parms.html#a112bc20acdbae84f53c59cffc6bf3a94">code</a>)) {</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> digit_timeout;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;         <span class="comment">/* Need more digits to match */</span></div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1);</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;         digit_timeout = <a class="code" href="../../d3/d32/bridge__channel_8c.html#aedbf9a98366b9363db3af0645cef3364">bridge_channel_feature_digit_timeout</a>(bridge_channel);</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a5c2f7dd8767c2be956356bf7656da9dc">interdigit_timeout</a> =</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;            <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(digit_timeout, 1000));</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;         <span class="keywordtype">int</span> remove_me;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;         <span class="keywordtype">int</span> already_suspended;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;DTMF feature hook %p matched DTMF string &#39;%s&#39; on %p(%s)\n&quot;</span>,</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;            hook, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>, bridge_channel,</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="comment">          * Clear the collected digits before executing the hook</span></div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;<span class="comment">          * in case the hook starts another sequence.</span></div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;         already_suspended = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a>;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;         <span class="keywordflow">if</span> (!already_suspended) {</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a447f05a7615581929349765430257a75">bridge_channel_internal_suspend_nolock</a>(bridge_channel);</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;         }</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;         <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>);</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;         <span class="comment">/* Execute the matched hook on this channel. */</span></div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;         remove_me = hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a071aadb15e85b96f455641d6adbfdb71">generic</a>.<a class="code" href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">callback</a>(bridge_channel, hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a071aadb15e85b96f455641d6adbfdb71">generic</a>.<a class="code" href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">hook_pvt</a>);</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;         <span class="keywordflow">if</span> (remove_me) {</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;DTMF hook %p is being removed from %p(%s)\n&quot;</span>,</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;               hook, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a70760b613dd26b51a5667e7f0fa7fb8a">dtmf_hooks</a>, hook);</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;         }</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;         <a class="code" href="../../d3/d32/bridge__channel_8c.html#a4362f1ed2bb8f4ece359734785de3e24">testsuite_notify_feature_success</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, hook-&gt;<a class="code" href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">dtmf</a>.<a class="code" href="../../d3/d00/structast__bridge__hook__dtmf__parms.html#a112bc20acdbae84f53c59cffc6bf3a94">code</a>);</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1);</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a>);</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;         <span class="keywordflow">if</span> (!already_suspended) {</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a>(bridge_channel);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;         }</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;         <span class="comment">/*</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;<span class="comment">          * If we are handing the channel off to an external hook for</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;<span class="comment">          * ownership, we are not guaranteed what kind of state it will</span></div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<span class="comment">          * come back in.  If the channel hungup, we need to detect that</span></div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;<span class="comment">          * here if the hook did not already change the state.</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;<span class="comment">          */</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;         <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a> &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)) {</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;            <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, 0);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;            bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;         }</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;         <span class="comment">/* if there is dtmf that has been collected then loop back through,</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;<span class="comment">            but set digit to -1 so it doesn&#39;t try to do an add since the dtmf</span></div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;<span class="comment">            is already in the buffer */</span></div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;         dtmf_len = strlen(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>);</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;         <span class="keywordflow">if</span> (!dtmf_len) {</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;         }</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   }</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;DTMF feature string collection on %p(%s) timed out\n&quot;</span>,</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;         bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;   }</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;   <span class="comment">/* Timeout or DTMF digit didn&#39;t allow a match with any hooks. */</span></div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="keywordflow">if</span> (features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a9ed40fc6a252b84f86044f975cc94283">dtmf_passthrough</a>) {</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;      <span class="comment">/* Stream the collected DTMF to the other channels. */</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aed96ccca09065f16ac440c0ebd52f46e">bridge_channel_write_dtmf_stream</a>(bridge_channel,</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;         bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;   }</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;FEATURE_DETECTION&quot;</span>, <span class="stringliteral">&quot;Result: fail&quot;</span>);</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_ae7cf5bbda4cf5f01c7fbaf80404b8586"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a></div><div class="ttdeci">struct ast_bridge_channel::@233 dtmf_hook_state</div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a447f05a7615581929349765430257a75"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a447f05a7615581929349765430257a75">bridge_channel_internal_suspend_nolock</a></div><div class="ttdeci">void bridge_channel_internal_suspend_nolock(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00854">bridge_channel.c:854</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="channel_8h_html_a723ac44c92b9edb6c1a731e01edacb4a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a723ac44c92b9edb6c1a731e01edacb4a">ast_check_hangup_locked</a></div><div class="ttdeci">int ast_check_hangup_locked(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00459">channel.c:459</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">ast_bridge_channel::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00125">bridge_channel.h:125</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a70760b613dd26b51a5667e7f0fa7fb8a"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a70760b613dd26b51a5667e7f0fa7fb8a">ast_bridge_features::dtmf_hooks</a></div><div class="ttdeci">struct ao2_container * dtmf_hooks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00265">bridge_features.h:265</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a61eb94728edfc0596b44498ce570d084"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">ast_bridge_channel::collected</a></div><div class="ttdeci">char collected[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00175">bridge_channel.h:175</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf_html"><div class="ttname"><a href="../../dd/d92/structast__bridge__hook__dtmf.html">ast_bridge_hook_dtmf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00226">bridge_features.h:226</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a009e81151b19671f42b5e84ab6a619f4">AST_CONTROL_SRCUPDATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00297">include/asterisk/frame.h:297</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca269370d42230fc6aa6700e2948e1eb20">OBJ_SEARCH_PARTIAL_KEY</a></div><div class="ttdoc">The arg parameter is a partial search key similar to OBJ_SEARCH_KEY. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01120">astobj2.h:1120</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7e482bb2dcffd792205f114ddfa098fb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a></div><div class="ttdeci">void ast_bridge_channel_kick(struct ast_bridge_channel *bridge_channel, int cause)</div><div class="ttdoc">Kick the channel out of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00605">bridge_channel.c:605</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aedbf9a98366b9363db3af0645cef3364"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aedbf9a98366b9363db3af0645cef3364">bridge_channel_feature_digit_timeout</a></div><div class="ttdeci">static unsigned int bridge_channel_feature_digit_timeout(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01733">bridge_channel.c:1733</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf_html_a09e6a40a51d2d887563667ee42a6c1f5"><div class="ttname"><a href="../../dd/d92/structast__bridge__hook__dtmf.html#a09e6a40a51d2d887563667ee42a6c1f5">ast_bridge_hook_dtmf::dtmf</a></div><div class="ttdeci">struct ast_bridge_hook_dtmf_parms dtmf</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00230">bridge_features.h:230</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a5c2f7dd8767c2be956356bf7656da9dc"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a5c2f7dd8767c2be956356bf7656da9dc">ast_bridge_channel::interdigit_timeout</a></div><div class="ttdeci">struct timeval interdigit_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00173">bridge_channel.h:173</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a9ed40fc6a252b84f86044f975cc94283"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a9ed40fc6a252b84f86044f975cc94283">ast_bridge_features::dtmf_passthrough</a></div><div class="ttdeci">unsigned int dtmf_passthrough</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00279">bridge_features.h:279</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_aff642471ebace1228460a3b47653fc35"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">ast_bridge_hook::callback</a></div><div class="ttdeci">ast_bridge_hook_callback callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00203">bridge_features.h:203</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_ad6640f8898b13ff6d292522ee3d4973f"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">ast_bridge_hook::hook_pvt</a></div><div class="ttdeci">void * hook_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00207">bridge_features.h:207</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf_html_a071aadb15e85b96f455641d6adbfdb71"><div class="ttname"><a href="../../dd/d92/structast__bridge__hook__dtmf.html#a071aadb15e85b96f455641d6adbfdb71">ast_bridge_hook_dtmf::generic</a></div><div class="ttdeci">struct ast_bridge_hook generic</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00228">bridge_features.h:228</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8c_html_a4362f1ed2bb8f4ece359734785de3e24"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a4362f1ed2bb8f4ece359734785de3e24">testsuite_notify_feature_success</a></div><div class="ttdeci">static void testsuite_notify_feature_success(struct ast_channel *chan, const char *dtmf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01675">bridge_channel.c:1675</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aed96ccca09065f16ac440c0ebd52f46e"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aed96ccca09065f16ac440c0ebd52f46e">bridge_channel_write_dtmf_stream</a></div><div class="ttdeci">static int bridge_channel_write_dtmf_stream(struct ast_bridge_channel *bridge_channel, const char *dtmf)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01659">bridge_channel.c:1659</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
<div class="ttc" id="structast__bridge__hook__dtmf__parms_html_a112bc20acdbae84f53c59cffc6bf3a94"><div class="ttname"><a href="../../d3/d00/structast__bridge__hook__dtmf__parms.html#a112bc20acdbae84f53c59cffc6bf3a94">ast_bridge_hook_dtmf_parms::code</a></div><div class="ttdeci">char code[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00222">bridge_features.h:222</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a8ecf592ba328e49347e4b727be38e06b"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a8ecf592ba328e49347e4b727be38e06b">bridge_channel_unsuspend</a></div><div class="ttdeci">static void bridge_channel_unsuspend(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel.c:918</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aedf7b84efe76a7dc658d6ff5f9e9f187"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aedf7b84efe76a7dc658d6ff5f9e9f187">bridge_channel_feature_digit_add</a></div><div class="ttdeci">static int bridge_channel_feature_digit_add(struct ast_bridge_channel *bridge_channel, int digit, size_t dtmf_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01717">bridge_channel.c:1717</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a2a3de22abaf5ae848a3745186fa399e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2a3de22abaf5ae848a3745186fa399e0">&#9670;&nbsp;</a></span>ast_bridge_channel_feature_digit_add()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_feature_digit_add </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>digit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Add a DTMF digit to the collected digits. </p>
<dl class="section since"><dt>Since</dt><dd>13.3.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel that received a DTMF digit. </td></tr>
    <tr><td class="paramname">digit</td><td>DTMF digit to add to collected digits</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Neither the bridge nor the bridge_channel locks should be held when entering this function.</dd>
<dd>
This is can only be called from within DTMF bridge hooks. </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01754">1754</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01717">bridge_channel_feature_digit_add()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00175">ast_bridge_channel::collected</a>, and <a class="el" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l00928">play_file()</a>.</p>
<div class="fragment"><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;{</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>) {</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#aedf7b84efe76a7dc658d6ff5f9e9f187">bridge_channel_feature_digit_add</a>(</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;         bridge_channel, <a class="code" href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a>, strlen(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">dtmf_hook_state</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">collected</a>));</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   }</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;}</div><div class="ttc" id="app__alarmreceiver_8c_html_ac2c887b7f7b359bfdda8a128980f5081"><div class="ttname"><a href="../../dc/d5c/app__alarmreceiver_8c.html#ac2c887b7f7b359bfdda8a128980f5081">digit</a></div><div class="ttdeci">char digit</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d5c/app__alarmreceiver_8c_source.html#l00131">app_alarmreceiver.c:131</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_ae7cf5bbda4cf5f01c7fbaf80404b8586"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#ae7cf5bbda4cf5f01c7fbaf80404b8586">ast_bridge_channel::dtmf_hook_state</a></div><div class="ttdeci">struct ast_bridge_channel::@233 dtmf_hook_state</div></div>
<div class="ttc" id="structast__bridge__channel_html_a61eb94728edfc0596b44498ce570d084"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a61eb94728edfc0596b44498ce570d084">ast_bridge_channel::collected</a></div><div class="ttdeci">char collected[MAXIMUM_DTMF_FEATURE_STRING]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00175">bridge_channel.h:175</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aedf7b84efe76a7dc658d6ff5f9e9f187"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aedf7b84efe76a7dc658d6ff5f9e9f187">bridge_channel_feature_digit_add</a></div><div class="ttdeci">static int bridge_channel_feature_digit_add(struct ast_bridge_channel *bridge_channel, int digit, size_t dtmf_len)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01717">bridge_channel.c:1717</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae04b08c94e2d24a179c9b8e0842ccc57"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae04b08c94e2d24a179c9b8e0842ccc57">&#9670;&nbsp;</a></span>ast_bridge_channel_get_chan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../df/d3c/structast__channel.html">ast_channel</a>* ast_bridge_channel_get_chan </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a ref to the bridge_channel's <a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>The bridge channel</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The returned channel NEEDS to be unref'd once you are done with it. In general, this function is best used when accessing the bridge_channel chan from outside of a bridging thread.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">ref'd</td><td><a class="el" href="../../df/d3c/structast__channel.html" title="Main Channel structure associated with a channel. ">ast_channel</a> on success </td></tr>
    <tr><td class="paramname">NULL</td><td>otherwise </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00211">211</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00491">ao2_bump</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00718">ao2_lock</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00730">ao2_unlock</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">ast_bridge_channel_write_unhold()</a>.</p>
<div class="fragment"><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;{</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(bridge_channel);</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;   chan = <a class="code" href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(bridge_channel);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;   <span class="keywordflow">return</span> chan;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="astobj2_8h_html_ac438c3fcd3150481fad38689fd813a15"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ac438c3fcd3150481fad38689fd813a15">ao2_bump</a></div><div class="ttdeci">#define ao2_bump(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00491">astobj2.h:491</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7e482bb2dcffd792205f114ddfa098fb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e482bb2dcffd792205f114ddfa098fb">&#9670;&nbsp;</a></span>ast_bridge_channel_kick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_kick </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Kick the channel out of the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is being kicked or hungup. </td></tr>
    <tr><td class="paramname">cause</td><td>Cause of channel being kicked. If cause &lt;= 0 then use cause on channel if cause still &lt;= 0 use AST_CAUSE_NORMAL_CLEARING.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks and the bridge channel thread.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">605</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00534">ao2_iterator_destroy()</a>, <a class="el" href="../../d7/d22/astobj2__container_8c_source.html#l00485">ao2_iterator_init()</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01933">ao2_iterator_next</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d5/da5/astobj2_8h_source.html#l01598">ao2_unlink</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00193">AST_BRIDGE_HOOK_TYPE_HANGUP</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00064">BRIDGE_CHANNEL_STATE_END</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00203">ast_bridge_hook::callback</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00278">channel_set_cause()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00207">ast_bridge_hook::hook_pvt</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00267">ast_bridge_features::other_hooks</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>, and <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00211">ast_bridge_hook::type</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">ast_bridge_channel_run_app()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02027">bridge_channel_attended_transfer()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02016">bridge_channel_blind_transfer()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02067">bridge_channel_handle_action()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02020">kick_it()</a>.</p>
<div class="fragment"><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;{</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a> *features = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d3b/structast__bridge__hook.html">ast_bridge_hook</a> *hook;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> == <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a346c98a88d53425181a425b3834b05f5">channel_set_cause</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, cause);</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;      cause = 0;</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   }</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;   <span class="comment">/* Run any hangup hooks. */</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">other_hooks</a>, 0);</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;   <span class="keywordflow">for</span> (; (hook = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(hook, -1)) {</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;      <span class="keywordtype">int</span> remove_me;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;      <span class="keywordflow">if</span> (hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#a9b8d1356a63d1d2c5892a83ea93af921">type</a> != <a class="code" href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3aaffe52570f582bed6f59dc12ca2a5c9e">AST_BRIDGE_HOOK_TYPE_HANGUP</a>) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;      }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;      remove_me = hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">callback</a>(bridge_channel, hook-&gt;<a class="code" href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">hook_pvt</a>);</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      <span class="keywordflow">if</span> (remove_me) {</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Hangup hook %p is being removed from %p(%s)\n&quot;</span>,</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;            hook, bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(features-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">other_hooks</a>, hook);</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      }</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;   }</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;   <span class="comment">/* Default hangup action. */</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, cause);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="structast__bridge__features_html"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html">ast_bridge_features</a></div><div class="ttdoc">Structure that contains features information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00263">bridge_features.h:263</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad58d921ec1c5a6f12be8f94327dd98c0"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00314">bridge_channel.c:314</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_a9b8d1356a63d1d2c5892a83ea93af921"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#a9b8d1356a63d1d2c5892a83ea93af921">ast_bridge_hook::type</a></div><div class="ttdeci">enum ast_bridge_hook_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00211">bridge_features.h:211</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a346c98a88d53425181a425b3834b05f5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a346c98a88d53425181a425b3834b05f5">channel_set_cause</a></div><div class="ttdeci">static int channel_set_cause(struct ast_channel *chan, int cause)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00278">bridge_channel.c:278</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00064">bridge_channel.h:64</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_aff642471ebace1228460a3b47653fc35"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#aff642471ebace1228460a3b47653fc35">ast_bridge_hook::callback</a></div><div class="ttdeci">ast_bridge_hook_callback callback</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00203">bridge_features.h:203</a></div></div>
<div class="ttc" id="structast__bridge__hook_html_ad6640f8898b13ff6d292522ee3d4973f"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html#ad6640f8898b13ff6d292522ee3d4973f">ast_bridge_hook::hook_pvt</a></div><div class="ttdeci">void * hook_pvt</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00207">bridge_features.h:207</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="bridge__features_8h_html_a122c52bc5dec74974f3d4cf3870e7da3aaffe52570f582bed6f59dc12ca2a5c9e"><div class="ttname"><a href="../../dc/d7a/bridge__features_8h.html#a122c52bc5dec74974f3d4cf3870e7da3aaffe52570f582bed6f59dc12ca2a5c9e">AST_BRIDGE_HOOK_TYPE_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00193">bridge_features.h:193</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="structast__bridge__features_html_a2918c32314a019cebcc4259e324a2745"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#a2918c32314a019cebcc4259e324a2745">ast_bridge_features::other_hooks</a></div><div class="ttdeci">struct ao2_container * other_hooks</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00267">bridge_features.h:267</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structast__bridge__hook_html"><div class="ttname"><a href="../../da/d3b/structast__bridge__hook.html">ast_bridge_hook</a></div><div class="ttdoc">Structure that is the essence of a feature hook. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00201">bridge_features.h:201</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad58d921ec1c5a6f12be8f94327dd98c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad58d921ec1c5a6f12be8f94327dd98c0">&#9670;&nbsp;</a></span>ast_bridge_channel_leave_bridge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_leave_bridge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a>&#160;</td>
          <td class="paramname"><em>new_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set bridge channel state to leave bridge (if not leaving already). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to change the state on </td></tr>
    <tr><td class="paramname">new_state</td><td>The new state to place the channel into </td></tr>
    <tr><td class="paramname">cause</td><td>Cause of channel leaving bridge. If cause &lt;= 0 then use cause on channel if cause still &lt;= 0 use AST_CAUSE_NORMAL_CLEARING.</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage:</p>
<div class="fragment"><div class="line"><a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div></div><!-- fragment --><p>This places the channel pointed to by bridge_channel into the state BRIDGE_CHANNEL_STATE_END if it was BRIDGE_CHANNEL_STATE_WAIT before. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">314</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00292">ast_bridge_channel_leave_bridge_nolock()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01952">ast_bridge_depart()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01997">ast_bridge_remove()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00290">basic_hangup_hook()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01103">bridge_agent_hold_heartbeat()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01196">bridge_agent_hold_push()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00443">bridge_channel_complete_join()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02136">bridge_channel_dissolve_check()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02235">bridge_channel_internal_push_full()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00319">bridge_dissolve()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02362">bridge_do_move()</a>, <a class="el" href="../../d2/df4/bridge__builtin__interval__features_8c_source.html#l00051">bridge_features_duration_callback()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04620">bridge_swap_attended_transfer()</a>, <a class="el" href="../../dc/d22/app__bridgewait_8c_source.html#l00204">bridgewait_timeout_callback()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01847">caller_joined_bridge()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01722">caller_safety_timeout()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00491">feature_hangup()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00575">parking_duration_callback()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00683">say_parking_space()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00303">set_softmix_bridge_data()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02793">try_swap_optimize_out()</a>, and <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02392">user_timeout()</a>.</p>
<div class="fragment"><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;{</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#ab37a1835212d045dcfe7ef7f25eb5e31">ast_bridge_channel_leave_bridge_nolock</a>(bridge_channel, new_state, cause);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div><div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ab37a1835212d045dcfe7ef7f25eb5e31"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab37a1835212d045dcfe7ef7f25eb5e31">ast_bridge_channel_leave_bridge_nolock</a></div><div class="ttdeci">void ast_bridge_channel_leave_bridge_nolock(struct ast_bridge_channel *bridge_channel, enum bridge_channel_state new_state, int cause)</div><div class="ttdoc">Set bridge channel state to leave bridge (if not leaving already). </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00292">bridge_channel.c:292</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ab37a1835212d045dcfe7ef7f25eb5e31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab37a1835212d045dcfe7ef7f25eb5e31">&#9670;&nbsp;</a></span>ast_bridge_channel_leave_bridge_nolock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_leave_bridge_nolock </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaa">bridge_channel_state</a>&#160;</td>
          <td class="paramname"><em>new_state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cause</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set bridge channel state to leave bridge (if not leaving already). </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to change the state on </td></tr>
    <tr><td class="paramname">new_state</td><td>The new state to place the channel into </td></tr>
    <tr><td class="paramname">cause</td><td>Cause of channel leaving bridge. If cause &lt;= 0 then use cause on channel if cause still &lt;= 0 use AST_CAUSE_NORMAL_CLEARING.</td></tr>
  </table>
  </dd>
</dl>
<p>Example usage:</p>
<div class="fragment"><div class="line"><a class="code" href="../../de/d41/bridge__channel_8h.html#ad58d921ec1c5a6f12be8f94327dd98c0">ast_bridge_channel_leave_bridge</a>(bridge_channel, <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaaf0e5994fd47d241360d94f7da1adf326">BRIDGE_CHANNEL_STATE_END</a>, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div></div><!-- fragment --><p>This places the channel pointed to by bridge_channel into the state BRIDGE_CHANNEL_STATE_END if it was BRIDGE_CHANNEL_STATE_WAIT before. </p>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00292">292</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d0/d95/bridge_8c_source.html#l01242">ast_bridge_vars_set()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00259">bridge_channel_poke()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00278">channel_set_cause()</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00314">ast_bridge_channel_leave_bridge()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l02096">bridge_do_merge()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01696">caller_abort_agent()</a>.</p>
<div class="fragment"><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;{</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> != <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;   }</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Setting %p(%s) state from:%u to:%u\n&quot;</span>,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;      bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a>,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;      new_state);</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a346c98a88d53425181a425b3834b05f5">channel_set_cause</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, cause);</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a67a0030855111322bb27b3502345adc6">ast_bridge_vars_set</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;   <span class="comment">/* Change the state on the bridge channel */</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;   bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> = new_state;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9755f224fead29ce51d3a96401b54599">bridge_channel_poke</a>(bridge_channel);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="bridge_8h_html_a67a0030855111322bb27b3502345adc6"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a67a0030855111322bb27b3502345adc6">ast_bridge_vars_set</a></div><div class="ttdeci">void ast_bridge_vars_set(struct ast_channel *chan, const char *name, const char *pvtid)</div><div class="ttdoc">Sets BRIDGECHANNEL and BRIDGEPVTCALLID for a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l01242">bridge.c:1242</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a346c98a88d53425181a425b3834b05f5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a346c98a88d53425181a425b3834b05f5">channel_set_cause</a></div><div class="ttdeci">static int channel_set_cause(struct ast_channel *chan, int cause)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00278">bridge_channel.c:278</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9755f224fead29ce51d3a96401b54599"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9755f224fead29ce51d3a96401b54599">bridge_channel_poke</a></div><div class="ttdeci">static void bridge_channel_poke(struct ast_bridge_channel *bridge_channel)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00259">bridge_channel.c:259</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a7d01ff5caf025a97796d2dbb78f5f02c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d01ff5caf025a97796d2dbb78f5f02c">&#9670;&nbsp;</a></span>ast_bridge_channel_lock_bridge()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_lock_bridge </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lock the bridge associated with the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel that wants to lock the bridge.</td></tr>
  </table>
  </dd>
</dl>
<p>This is an upstream lock operation. The defined locking order is bridge then bridge_channel.</p>
<dl class="section note"><dt>Note</dt><dd>On entry, neither the bridge nor bridge_channel is locked.</dd>
<dd>
The bridge_channel-&gt;bridge pointer changes because of a bridge-merge/channel-move operation between bridges.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">222</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00480">ast_bridge_lock</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d0/dcf/app__confbridge_8c_source.html#l02881">action_toggle_binaural()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01738">agent_alert()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01762">ast_bridge_channel_feature_digit()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00369">ast_bridge_channel_merge_inhibit()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01482">ast_bridge_notify_masquerade()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00290">basic_hangup_hook()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02330">bridge_channel_handle_control()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00875">bridge_channel_suspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00918">bridge_channel_unsuspend()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02808">bridge_channel_wait()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel_write_frame()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>, <a class="el" href="../../db/dba/bridge__softmix__binaural_8c_source.html#l00467">check_binaural_position_change()</a>, <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00416">deferred_action()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">feature_automixmonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00220">feature_automonitor()</a>, and <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00336">parking_blind_transfer_park()</a>.</p>
<div class="fragment"><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;{</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;      <span class="comment">/* Safely get the bridge pointer */</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, +1);</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;      <span class="comment">/* Lock the bridge and see if it is still the bridge we need to lock. */</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a>(bridge);</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      <span class="keywordflow">if</span> (bridge == bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>) {</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      }</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;      <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, -1);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;   }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="bridge_8h_html_ab8ee807d2c3a21d19e16fedf35c90de8"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#ab8ee807d2c3a21d19e16fedf35c90de8">ast_bridge_lock</a></div><div class="ttdeci">#define ast_bridge_lock(bridge)</div><div class="ttdoc">Lock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00480">bridge.h:480</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aada1c86f1020a0d546b371a8ff602cee"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aada1c86f1020a0d546b371a8ff602cee">&#9670;&nbsp;</a></span>ast_bridge_channel_merge_inhibit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d4/d84/structast__bridge.html">ast_bridge</a>* ast_bridge_channel_merge_inhibit </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>request</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Adjust the bridge_channel's bridge merge inhibit request count. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>What to operate on. </td></tr>
    <tr><td class="paramname">request</td><td>Inhibit request increment. (Positive to add requests. Negative to remove requests.)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This API call is meant for internal bridging operations.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">bridge</td><td>adjusted merge inhibit with reference count. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00369">369</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00222">ast_bridge_channel_lock_bridge()</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00493">ast_bridge_unlock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l03052">bridge_merge_inhibit_nolock()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03295">feature_attended_transfer()</a>.</p>
<div class="fragment"><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;{</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;   <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a>(bridge_channel);</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;   bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(bridge, +1);</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;   <a class="code" href="../../d5/dde/bridge__internal_8h.html#ae1af73cc9e9cce0a151dddc8cfae3e4b">bridge_merge_inhibit_nolock</a>(bridge, <a class="code" href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a>);</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   <a class="code" href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a>(bridge);</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   <span class="keywordflow">return</span> bridge;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;}</div><div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="bridge__internal_8h_html_ae1af73cc9e9cce0a151dddc8cfae3e4b"><div class="ttname"><a href="../../d5/dde/bridge__internal_8h.html#ae1af73cc9e9cce0a151dddc8cfae3e4b">bridge_merge_inhibit_nolock</a></div><div class="ttdeci">void bridge_merge_inhibit_nolock(struct ast_bridge *bridge, int request)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d95/bridge_8c_source.html#l03052">bridge.c:3052</a></div></div>
<div class="ttc" id="bridge_8h_html_a0fb66f4741ca8d106af1917a2f1aab6e"><div class="ttname"><a href="../../d4/d56/bridge_8h.html#a0fb66f4741ca8d106af1917a2f1aab6e">ast_bridge_unlock</a></div><div class="ttdeci">#define ast_bridge_unlock(bridge)</div><div class="ttdoc">Unlock the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00493">bridge.h:493</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_a4e2e6fb7d874f0d2deddd2ecfc8afb32"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#a4e2e6fb7d874f0d2deddd2ecfc8afb32">request</a></div><div class="ttdeci">static int request(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02559">chan_pjsip.c:2559</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7d01ff5caf025a97796d2dbb78f5f02c"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7d01ff5caf025a97796d2dbb78f5f02c">ast_bridge_channel_lock_bridge</a></div><div class="ttdeci">void ast_bridge_channel_lock_bridge(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Lock the bridge associated with the bridge channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00222">bridge_channel.c:222</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a891462a54b03fb795d42765b661cede6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a891462a54b03fb795d42765b661cede6">&#9670;&nbsp;</a></span>ast_bridge_channel_notify_talking()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_notify_talking </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>started_talking</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Lets the bridging indicate when a bridge channel has stopped or started talking. </p>
<dl class="section note"><dt>Note</dt><dd>All DSP functionality on the bridge has been pushed down to the lowest possible layer, which in this case is the specific bridging technology being used. Since it is necessary for the knowledge of which channels are talking to make its way up to the application, this function has been created to allow the bridging technology to communicate that information with the bridging core.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>The bridge channel that has either started or stopped talking. </td></tr>
    <tr><td class="paramname">started_talking</td><td>set to 1 when this indicates the channel has started talking set to 0 when this indicates the channel has stopped talking.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00244">244</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">AST_FRAME_BRIDGE_ACTION</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00045">BRIDGE_CHANNEL_ACTION_TALKING_START</a>, <a class="el" href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00047">BRIDGE_CHANNEL_ACTION_TALKING_STOP</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01042">clear_talking()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00942">softmix_bridge_write_voice()</a>.</p>
<div class="fragment"><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;{</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> action = {</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a>,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;      .subclass.integer = started_talking</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;         ? <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87">BRIDGE_CHANNEL_ACTION_TALKING_START</a> : <a class="code" href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa56e18ff73f676281575bc87452730220">BRIDGE_CHANNEL_ACTION_TALKING_STOP</a>,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;   };</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a>(bridge_channel, &amp;action);</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af36653b08c00f5d824ed6046e9233ef9">AST_FRAME_BRIDGE_ACTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00127">include/asterisk/frame.h:127</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aba51942a86849ae41c5397d596cb8ed1"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a></div><div class="ttdeci">int ast_bridge_channel_queue_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *fr)</div><div class="ttdoc">Write a frame to the specified bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01044">bridge_channel.c:1044</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa73a3ac2a21fe5971393db0875aaf1c87">BRIDGE_CHANNEL_ACTION_TALKING_START</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00045">bridge_channel_internal.h:45</a></div></div>
<div class="ttc" id="bridge__channel__internal_8h_html_adadb2f6b306233caecdabcf1a7440b0aa56e18ff73f676281575bc87452730220"><div class="ttname"><a href="../../d9/dfc/bridge__channel__internal_8h.html#adadb2f6b306233caecdabcf1a7440b0aa56e18ff73f676281575bc87452730220">BRIDGE_CHANNEL_ACTION_TALKING_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/dfc/bridge__channel__internal_8h_source.html#l00047">bridge_channel_internal.h:47</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a0a9bea2845810c6891440a012a275a36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a9bea2845810c6891440a012a275a36">&#9670;&nbsp;</a></span>ast_bridge_channel_peer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a>* ast_bridge_channel_peer </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the peer bridge channel of a two party bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>What to get the peer of.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>On entry, bridge_channel-&gt;bridge is already locked.</dd>
<dd>
This is an internal bridge function.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">peer</td><td>on success. </td></tr>
    <tr><td class="paramname">NULL</td><td>no peer channel. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00321">321</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00121">ast_bridge_channel::in_bridge</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00381">ast_bridge::num_channels</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00393">bridge_reconfigured_connected_line_update()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04620">bridge_swap_attended_transfer()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00336">parking_blind_transfer_park()</a>, and <a class="el" href="../../d0/d95/bridge_8c_source.html#l02793">try_swap_optimize_out()</a>.</p>
<div class="fragment"><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;{</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *other = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">in_bridge</a> &amp;&amp; bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">num_channels</a> == 2) {</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, other, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;         <span class="keywordflow">if</span> (other != bridge_channel) {</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;         }</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;      }</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   }</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;   <span class="keywordflow">return</span> other;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;}</div><div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_afacf05ff49bf5cd3c7170b3c51943d2e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#afacf05ff49bf5cd3c7170b3c51943d2e">ast_bridge_channel::in_bridge</a></div><div class="ttdeci">unsigned int in_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00121">bridge_channel.h:121</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="structast__bridge_html_a97e3bedeadf444995deb6fab68f57e21"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a97e3bedeadf444995deb6fab68f57e21">ast_bridge::num_channels</a></div><div class="ttdeci">unsigned int num_channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00381">bridge.h:381</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a01de7987fb023a0c1e52965454797d0b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a01de7987fb023a0c1e52965454797d0b">&#9670;&nbsp;</a></span>ast_bridge_channel_playfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_playfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>&#160;</td>
          <td class="paramname"><em>custom_play</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play a file on the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to play the file on </td></tr>
    <tr><td class="paramname">custom_play</td><td>Call this function to play the playfile. (NULL if normal sound file to play) </td></tr>
    <tr><td class="paramname">playfile</td><td>Sound filename to play. </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while file is played. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01321">1321</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01167">ast_bridge_channel_write_hold()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">ast_bridge_channel_write_unhold()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01260">ast_channel_flags()</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a03cad86bc84ad7a0de6c70fef09e9dde">ast_channel_latest_musicclass()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d2/d4d/file_8h_source.html#l00047">AST_DIGIT_NONE</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l00992">AST_FLAG_MOH</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l07866">ast_moh_start()</a>, <a class="el" href="../../d8/d8a/astmm_8h_source.html#l00300">ast_strdupa</a>, <a class="el" href="../../d6/d13/file_8c_source.html#l01814">ast_stream_and_wait()</a>, <a class="el" href="../../d5/d60/utils_8h_source.html#l00063">ast_test_flag</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01368">bridge_channel_playfile()</a>.</p>
<div class="fragment"><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;{</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a>(bridge_channel, moh_class);</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   }</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="keywordflow">if</span> (custom_play) {</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      custom_play(bridge_channel, playfile);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, playfile, <a class="code" href="../../d2/d4d/file_8h.html#abb7bdff3c549191072878402b0a0ca9c">AST_DIGIT_NONE</a>);</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   }</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a>(bridge_channel);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;   }</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;   <span class="comment">/*</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment">    * It may be necessary to resume music on hold after we finish</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment">    * playing the announcment.</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment">    */</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af342fb5a757280799be80248e898d14a">AST_FLAG_MOH</a>)) {</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *latest_musicclass;</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;      latest_musicclass = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a03cad86bc84ad7a0de6c70fef09e9dde">ast_channel_latest_musicclass</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, latest_musicclass, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   }</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="channel_8h_html_a82f2c6e4d47f62f6b65c5887eb096fd5af342fb5a757280799be80248e898d14a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a82f2c6e4d47f62f6b65c5887eb096fd5af342fb5a757280799be80248e898d14a">AST_FLAG_MOH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00992">channel.h:992</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a4be080559ea3fc87e50aa29a95af74f0"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a></div><div class="ttdeci">int ast_bridge_channel_write_unhold(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Write an unhold frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01193">bridge_channel.c:1193</a></div></div>
<div class="ttc" id="channel_8h_html_a03cad86bc84ad7a0de6c70fef09e9dde"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a03cad86bc84ad7a0de6c70fef09e9dde">ast_channel_latest_musicclass</a></div><div class="ttdeci">const char * ast_channel_latest_musicclass(const struct ast_channel *chan)</div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="file_8h_html_abb7bdff3c549191072878402b0a0ca9c"><div class="ttname"><a href="../../d2/d4d/file_8h.html#abb7bdff3c549191072878402b0a0ca9c">AST_DIGIT_NONE</a></div><div class="ttdeci">#define AST_DIGIT_NONE</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00047">file.h:47</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="file_8h_html_a95b94a020720147325a486e210b36775"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a95b94a020720147325a486e210b36775">ast_stream_and_wait</a></div><div class="ttdeci">int ast_stream_and_wait(struct ast_channel *chan, const char *file, const char *digits)</div><div class="ttdoc">stream file until digit If the file name is non-empty, try to play it. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01814">file.c:1814</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad70b0a7df24a2aa9e284d8c785dcbd45"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a></div><div class="ttdeci">int ast_bridge_channel_write_hold(struct ast_bridge_channel *bridge_channel, const char *moh_class)</div><div class="ttdoc">Write a hold frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01167">bridge_channel.c:1167</a></div></div>
<div class="ttc" id="channel_8h_html_a91de92158876186d28ba1773877f2732"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a91de92158876186d28ba1773877f2732">ast_channel_flags</a></div><div class="ttdeci">struct ast_flags * ast_channel_flags(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01260">channel_internal_api.c:1260</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4fa039da96461900d3a9f0ceefd7298f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fa039da96461900d3a9f0ceefd7298f">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_app()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_app </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a bridge action run application frame onto the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to put the frame onto </td></tr>
    <tr><td class="paramname">app_name</td><td>Dialplan application name. </td></tr>
    <tr><td class="paramname">app_args</td><td>Arguments for the application. (NULL or empty for no arguments) </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while application is running. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01315">1315</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01285">payload_helper_app()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;{</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad00550db31054aa051277a5d7dffd196">payload_helper_app</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a>,</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;      bridge_channel, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, app_args, moh_class);</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a7169723f8af325431a959806a6b9ba96"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a></div><div class="ttdeci">static int bridge_channel_queue_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel.c:938</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad00550db31054aa051277a5d7dffd196"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad00550db31054aa051277a5d7dffd196">payload_helper_app</a></div><div class="ttdeci">static int payload_helper_app(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, const char *app_name, const char *app_args, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01285">bridge_channel.c:1285</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad7de2a71d5af8f85035713f1f3cb69a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7de2a71d5af8f85035713f1f3cb69a9">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a bridge action custom callback frame onto the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to put the frame onto. </td></tr>
    <tr><td class="paramname">flags</td><td>Custom callback option flags. </td></tr>
    <tr><td class="paramname">callback</td><td>Custom callback run on a bridge channel. </td></tr>
    <tr><td class="paramname">payload</td><td>Data to pass to the callback. (NULL if none). </td></tr>
    <tr><td class="paramname">payload_size</td><td>Size of the payload if payload is non-NULL. A number otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The payload MUST NOT have any resources that need to be freed.</dd>
<dd>
This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01492">1492</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01457">payload_helper_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l02025">ast_bridge_kick()</a>, <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00093">defer_action()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l05269">handle_bridge_kick_channel()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01812">send_alert_to_agent()</a>.</p>
<div class="fragment"><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;{</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#afee5c64c70dc8139d5b8eed7a33e1c85">payload_helper_cb</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a>,</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;      bridge_channel, flags, callback, payload, payload_size);</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_a7169723f8af325431a959806a6b9ba96"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a></div><div class="ttdeci">static int bridge_channel_queue_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel.c:938</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_afee5c64c70dc8139d5b8eed7a33e1c85"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#afee5c64c70dc8139d5b8eed7a33e1c85">payload_helper_cb</a></div><div class="ttdeci">static int payload_helper_cb(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, enum ast_bridge_channel_custom_callback_option flags, ast_bridge_custom_callback_fn callback, const void *payload, size_t payload_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01457">bridge_channel.c:1457</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="abc0302bab9fb2f318db695fe1f9047d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc0302bab9fb2f318db695fe1f9047d8">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_control_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_control_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a>&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a control frame onto the bridge channel with data. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to queue the frame onto. </td></tr>
    <tr><td class="paramname">control</td><td>Type of control frame. </td></tr>
    <tr><td class="paramname">data</td><td>Frame payload data to pass. </td></tr>
    <tr><td class="paramname">datalen</td><td>Frame payload data length to pass.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01143">1143</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">ast_bridge_channel_queue_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l00393">bridge_reconfigured_connected_line_update()</a>, and <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01818">send_colp_to_agent()</a>.</p>
<div class="fragment"><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;{</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;      .subclass.integer = control,</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;      .datalen = <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>,</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;      .data.ptr = (<span class="keywordtype">void</span> *) <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>,</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   };</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a>(bridge_channel, &amp;frame);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_aba51942a86849ae41c5397d596cb8ed1"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aba51942a86849ae41c5397d596cb8ed1">ast_bridge_channel_queue_frame</a></div><div class="ttdeci">int ast_bridge_channel_queue_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *fr)</div><div class="ttdoc">Write a frame to the specified bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01044">bridge_channel.c:1044</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aba51942a86849ae41c5397d596cb8ed1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aba51942a86849ae41c5397d596cb8ed1">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_frame()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_frame </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d0/d99/structast__frame.html">ast_frame</a> *&#160;</td>
          <td class="paramname"><em>fr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a frame to the specified bridge_channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to queue the frame. </td></tr>
    <tr><td class="paramname">fr</td><td>Frame to write.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01044">1044</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00151">ast_bridge_channel::alert_pipe</a>, <a class="el" href="../../d6/d7a/alertpipe_8c_source.html#l00120">ast_alertpipe_write()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">AST_FRAME_DTMF_BEGIN</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">AST_FRAME_DTMF_END</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00116">AST_FRAME_IMAGE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">AST_FRAME_NULL</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">AST_FRAME_RTCP</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">AST_FRAME_TEXT</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00137">AST_FRAME_TEXT_DATA</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">AST_FRAME_VIDEO</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">AST_FRAME_VOICE</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">ast_frdup</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l01467">ast_is_deferrable_frame()</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00730">AST_LIST_INSERT_TAIL</a>, <a class="el" href="../../da/df7/astobj2_8c_source.html#l00042">ast_log</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00458">AST_MSG_DATA_ATTR_BODY</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00456">AST_MSG_DATA_ATTR_FROM</a>, <a class="el" href="../../d2/d0d/message_8h_source.html#l00455">AST_MSG_DATA_ATTR_TO</a>, <a class="el" href="../../d0/d6d/message_8c_source.html#l01533">ast_msg_data_get_attribute()</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00682">AST_VECTOR_GET</a>, <a class="el" href="../../d6/d68/vector_8h_source.html#l00611">AST_VECTOR_SIZE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00062">BRIDGE_CHANNEL_STATE_WAIT</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_frame_free()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00441">DEBUG_ATLEAST</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00132">ast_bridge_channel::features</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00241">LOG_DEBUG</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00285">LOG_ERROR</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">ast_frame::ptr</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00089">ast_bridge_channel::state</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">ast_frame::stream_num</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00125">ast_bridge_channel::suspended</a>, <a class="el" href="../../dc/d7a/bridge__features_8h_source.html#l00283">ast_bridge_features::text_messaging</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00192">ast_bridge_channel::to_channel</a>, and <a class="el" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00244">ast_bridge_channel_notify_talking()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01143">ast_bridge_channel_queue_control_data()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01122">ast_bridge_queue_everyone_else()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel_queue_action_data_sync()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01485">remb_send_report()</a>, <a class="el" href="../../dd/d92/confbridge__manager_8c_source.html#l00358">send_message()</a>, <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l01763">softmix_mixing_loop()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l00863">softmix_pass_video_top_priority()</a>.</p>
<div class="fragment"><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;{</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *dup;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">suspended</a></div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      <span class="comment">/* Also defer DTMF frames. */</span></div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;      &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;      &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      &amp;&amp; !<a class="code" href="../../d5/d7b/channel_8h.html#af040cd3070189adb70454717407a4315">ast_is_deferrable_frame</a>(fr)) {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;      <span class="comment">/* Drop non-deferable frames when suspended. */</span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;   }</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;   <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>) {</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;      <span class="comment">/* &quot;Accept&quot; the frame and discard it. */</span></div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;   }</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;   <span class="keywordflow">if</span> ((fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a> || fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a> ||</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;      fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a> || fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a> ||</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;      fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a>) &amp;&amp; fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &gt; -1) {</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;      <span class="keywordtype">int</span> num = -1;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;      <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a> &lt; (<span class="keywordtype">int</span>)<a class="code" href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">to_channel</a>)) {</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;         num = <a class="code" href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">to_channel</a>, fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">stream_num</a>);</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;      }</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;      <span class="keywordflow">if</span> (num == -1) {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;         <span class="comment">/* We don&#39;t have a mapped stream so just discard this frame. */</span></div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;      }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;   }</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   dup = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(fr);</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;   <span class="keywordflow">if</span> (!dup) {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;   }</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="keywordflow">if</span> (bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">state</a> != <a class="code" href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a>) {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;      <span class="comment">/* Drop frames on channels leaving the bridge. */</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(dup);</div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;   }</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <span class="keywordflow">if</span> ((fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a> || fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a>) &amp;&amp;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;      !bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">features</a>-&gt;<a class="code" href="../../db/dba/structast__bridge__features.html#ad1ee5fa0669878cce5cf86ca3d3dd921">text_messaging</a>) {</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;      <span class="comment">/* This channel is not accepting text messages. */</span></div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;      <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a>(dup);</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;   }</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a>(1)) {</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;      <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a>) {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Queuing TEXT frame to &#39;%s&#39;: %*.s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;            fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, (<span class="keywordtype">char</span> *)fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a>) {</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d9/d44/structast__msg__data.html">ast_msg_data</a> *msg = fr-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a>, <span class="stringliteral">&quot;Queueing TEXT_DATA frame from &#39;%s&#39; to &#39;%s:%s&#39;: %s\n&quot;</span>,</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;            <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a>),</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;            <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a>),</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;            <a class="code" href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a>(msg, <a class="code" href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a>));</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;      }</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;   }</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">wr_queue</a>, dup, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>);</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dc/d4d/alertpipe_8h.html#a3c1d9ad40416df5adef7cc213e87d88b">ast_alertpipe_write</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">alert_pipe</a>)) {</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;We couldn&#39;t write alert pipe for %p(%s)... something is VERY wrong\n&quot;</span>,</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;         bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;}</div><div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ada620aba450c2a60eb096001f2361741">AST_FRAME_TEXT_DATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00137">include/asterisk/frame.h:137</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a0f0f211998e9727566ad340464c66070">AST_MSG_DATA_ATTR_BODY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00458">message.h:458</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a7e580256fbadf0a28137681296f9b6b8"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a7e580256fbadf0a28137681296f9b6b8">ast_bridge_channel::wr_queue</a></div><div class="ttdeci">struct ast_bridge_channel::@230 wr_queue</div></div>
<div class="ttc" id="structast__bridge__channel_html_a65633fdc6178dc8d9f754fda0166d16e"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a65633fdc6178dc8d9f754fda0166d16e">ast_bridge_channel::features</a></div><div class="ttdeci">struct ast_bridge_features * features</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00132">bridge_channel.h:132</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0af7728b18670d3cd075f63d67f8867078">AST_FRAME_TEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00114">include/asterisk/frame.h:114</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a871f4f1d537a1cd524ee8c28b623104f"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a871f4f1d537a1cd524ee8c28b623104f">ast_bridge_channel::state</a></div><div class="ttdeci">enum bridge_channel_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00089">bridge_channel.h:89</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a2862ffde11c780129862e5549415a6f6"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a2862ffde11c780129862e5549415a6f6">ast_bridge_channel::suspended</a></div><div class="ttdeci">unsigned int suspended</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00125">bridge_channel.h:125</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structast__msg__data_html"><div class="ttname"><a href="../../d9/d44/structast__msg__data.html">ast_msg_data</a></div><div class="ttdoc">Structure used to transport a message through the frame core. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01406">message.c:1406</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_affe0d3ce4e4266e3b4a4ea543fbc4d78"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a></div><div class="ttdeci">struct ast_bridge_channel::@236 stream_map</div></div>
<div class="ttc" id="logger_8h_html_a6ff63e8955665c4a58b1598f2b07c51a"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a6ff63e8955665c4a58b1598f2b07c51a">LOG_DEBUG</a></div><div class="ttdeci">#define LOG_DEBUG</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00241">logger.h:241</a></div></div>
<div class="ttc" id="alertpipe_8h_html_a3c1d9ad40416df5adef7cc213e87d88b"><div class="ttname"><a href="../../dc/d4d/alertpipe_8h.html#a3c1d9ad40416df5adef7cc213e87d88b">ast_alertpipe_write</a></div><div class="ttdeci">ssize_t ast_alertpipe_write(int alert_pipe[2])</div><div class="ttdoc">Write an event to an alert pipe. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d7a/alertpipe_8c_source.html#l00120">alertpipe.c:120</a></div></div>
<div class="ttc" id="structast__bridge__features_html_ad1ee5fa0669878cce5cf86ca3d3dd921"><div class="ttname"><a href="../../db/dba/structast__bridge__features.html#ad1ee5fa0669878cce5cf86ca3d3dd921">ast_bridge_features::text_messaging</a></div><div class="ttdeci">unsigned int text_messaging</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7a/bridge__features_8h_source.html#l00283">bridge_features.h:283</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a6c9398ee8989239124295d096a87bf32">AST_FRAME_IMAGE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00116">include/asterisk/frame.h:116</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a34d60938c22ee31e3eafa756c016020d">AST_MSG_DATA_ATTR_TO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00455">message.h:455</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ac2b2b163b29fde967531b8bf92966c97">AST_FRAME_RTCP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00135">include/asterisk/frame.h:135</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">include/asterisk/frame.h:107</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a8eed32758f5880ff8ec632c30525472b"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">ast_bridge_channel::to_channel</a></div><div class="ttdeci">struct ast_vector_int to_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00192">bridge_channel.h:192</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a55935aecf1002b1dfa1324bc3799b67c"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a55935aecf1002b1dfa1324bc3799b67c">ast_bridge_channel::alert_pipe</a></div><div class="ttdeci">int alert_pipe[2]</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00151">bridge_channel.h:151</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#gga44ac88ed1b656e254dcad5cf0dbd2a22a7e8412f5b805e70e50a66150bad4d292">AST_MSG_DATA_ATTR_FROM</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d0d/message_8h_source.html#l00456">message.h:456</a></div></div>
<div class="ttc" id="group__ast__msg__data_html_ga4edd2c0456a7d3f1658e48e2150c9665"><div class="ttname"><a href="../../d8/d0e/group__ast__msg__data.html#ga4edd2c0456a7d3f1658e48e2150c9665">ast_msg_data_get_attribute</a></div><div class="ttdeci">const char * ast_msg_data_get_attribute(struct ast_msg_data *msg, enum ast_msg_data_attribute_type attribute_type)</div><div class="ttdoc">Get attribute from ast_msg_data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d6d/message_8c_source.html#l01533">message.c:1533</a></div></div>
<div class="ttc" id="vector_8h_html_aef32ac52c3e8a530d16eb92cde22cacd"><div class="ttname"><a href="../../d6/d68/vector_8h.html#aef32ac52c3e8a530d16eb92cde22cacd">AST_VECTOR_GET</a></div><div class="ttdeci">#define AST_VECTOR_GET(vec, idx)</div><div class="ttdoc">Get an element from a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00682">vector.h:682</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_af040cd3070189adb70454717407a4315"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af040cd3070189adb70454717407a4315">ast_is_deferrable_frame</a></div><div class="ttdeci">int ast_is_deferrable_frame(const struct ast_frame *frame)</div><div class="ttdoc">Should we keep this frame for later? </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01467">channel.c:1467</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a8383e75e786449dd2f4258b0819dd8f1"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a8383e75e786449dd2f4258b0819dd8f1">ast_frame::stream_num</a></div><div class="ttdeci">int stream_num</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00197">include/asterisk/frame.h:197</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a3742c8c577dcc82edd8c4431a11a599e"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a3742c8c577dcc82edd8c4431a11a599e">bridge_frame_free</a></div><div class="ttdeci">static void bridge_frame_free(struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01023">bridge_channel.c:1023</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a17ae96b6ea8a2388bb0d409e8124ff30">AST_FRAME_VIDEO</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00103">include/asterisk/frame.h:103</a></div></div>
<div class="ttc" id="logger_8h_html_a33f6031de4ab6d1406465a7a3ee18e86"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a33f6031de4ab6d1406465a7a3ee18e86">DEBUG_ATLEAST</a></div><div class="ttdeci">#define DEBUG_ATLEAST(level)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00441">logger.h:441</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#ab44a00c2c23eaeec1d8b61eb254eecaaad84ac14921aab9ebb49fdf063ee22853">BRIDGE_CHANNEL_STATE_WAIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00062">bridge_channel.h:62</a></div></div>
<div class="ttc" id="vector_8h_html_a20b08af81cc9452fb721c9a698f81bdf"><div class="ttname"><a href="../../d6/d68/vector_8h.html#a20b08af81cc9452fb721c9a698f81bdf">AST_VECTOR_SIZE</a></div><div class="ttdeci">#define AST_VECTOR_SIZE(vec)</div><div class="ttdoc">Get the number of elements in a vector. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d68/vector_8h_source.html#l00611">vector.h:611</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac352fd6d6188d7431155f34ae2a38799"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac352fd6d6188d7431155f34ae2a38799">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_playfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_playfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>&#160;</td>
          <td class="paramname"><em>custom_play</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Queue a bridge action play file frame onto the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to put the frame onto. </td></tr>
    <tr><td class="paramname">custom_play</td><td>Call this function to play the playfile. (NULL if normal sound file to play) </td></tr>
    <tr><td class="paramname">playfile</td><td>Sound filename to play. </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while file is played. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01404">1404</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel_queue_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01378">payload_helper_playfile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l02519">ast_bridge_add_channel()</a>, <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00342">bridge_parking_pull()</a>, <a class="el" href="../../d9/dc5/parking__bridge_8c_source.html#l00206">bridge_parking_push()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l01203">check_bridge_play_sound()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00408">feature_automixmonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00220">feature_automonitor()</a>, <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00105">parker_parked_call_message_response()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01717">play_sound()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00323">start_automixmonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">start_automonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00300">stop_automixmonitor()</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00106">stop_automonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;{</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a>,</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;      bridge_channel, custom_play, playfile, moh_class);</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ad1c82bb3775f693a3e2c8d4a092985b5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a></div><div class="ttdeci">static int payload_helper_playfile(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01378">bridge_channel.c:1378</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7169723f8af325431a959806a6b9ba96"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7169723f8af325431a959806a6b9ba96">bridge_channel_queue_action_data</a></div><div class="ttdeci">static int bridge_channel_queue_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00938">bridge_channel.c:938</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac7787cec5827585d82ad62292744aeaf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac7787cec5827585d82ad62292744aeaf">&#9670;&nbsp;</a></span>ast_bridge_channel_queue_playfile_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_queue_playfile_sync </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>&#160;</td>
          <td class="paramname"><em>custom_play</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronously queue a bridge action play file frame onto the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.2.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to put the frame onto. </td></tr>
    <tr><td class="paramname">custom_play</td><td>Call this function to play the playfile. (NULL if normal sound file to play) </td></tr>
    <tr><td class="paramname">playfile</td><td>Sound filename to play. </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while file is played. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<p>This function will block until the queued frame has been destroyed. This will happen either if an error occurs or if the queued playback finishes.</p>
<dl class="section note"><dt>Note</dt><dd>No locks may be held when calling this function.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>The playback was successfully queued. </td></tr>
    <tr><td class="paramname">-1</td><td>The playback could not be queued. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01410">1410</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel_queue_action_data_sync()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01378">payload_helper_playfile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00105">parker_parked_call_message_response()</a>, and <a class="el" href="../../d7/de1/res__stasis__playback_8c_source.html#l00418">play_uri()</a>.</p>
<div class="fragment"><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;{</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#a88f8ccbfa86786e2a9726a90cba14a84">bridge_channel_queue_action_data_sync</a>,</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      bridge_channel, custom_play, playfile, moh_class);</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ad1c82bb3775f693a3e2c8d4a092985b5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a></div><div class="ttdeci">static int payload_helper_playfile(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01378">bridge_channel.c:1378</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a88f8ccbfa86786e2a9726a90cba14a84"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a88f8ccbfa86786e2a9726a90cba14a84">bridge_channel_queue_action_data_sync</a></div><div class="ttdeci">static int bridge_channel_queue_action_data_sync(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00966">bridge_channel.c:966</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ac77801ebc652f818148d6da29869970c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac77801ebc652f818148d6da29869970c">&#9670;&nbsp;</a></span>ast_bridge_channel_restore_formats()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_restore_formats </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Restore the formats of a bridge channel's channel to how they were before bridge_channel_internal_join. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to restore </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00337">337</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/d60/utils_8h_source.html#l00695">ast_assert</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00856">ast_channel_readformat()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l00860">ast_channel_writeformat()</a>, <a class="el" href="../../d1/d8c/logger_8h_source.html#l00452">ast_debug</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00201">ast_format_cmp()</a>, <a class="el" href="../../d0/d0a/format_8h_source.html#l00038">AST_FORMAT_CMP_NOT_EQUAL</a>, <a class="el" href="../../de/da6/format_8c_source.html#l00334">ast_format_get_name()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05849">ast_set_read_format()</a>, <a class="el" href="../../d4/d28/channel_8c_source.html#l05890">ast_set_write_format()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00137">ast_bridge_channel::read_format</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00139">ast_bridge_channel::write_format</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02902">bridge_channel_internal_join()</a>, and <a class="el" href="../../d8/d66/bridge__holding_8c_source.html#l00297">participant_reaction_announcer_leave()</a>.</p>
<div class="fragment"><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;{</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a> != <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;   <span class="comment">/* Restore original formats of the channel as they came in */</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge is returning %p(%s) to read format %s\n&quot;</span>,</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;         bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a>));</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a>)) {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge failed to return %p(%s) to read format %s\n&quot;</span>,</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;            bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">read_format</a>));</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      }</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;   }</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a>) {</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge is returning %p(%s) to write format %s\n&quot;</span>,</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;         bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;         <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a>));</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a>)) {</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Bridge failed to return %p(%s) to write format %s\n&quot;</span>,</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;            bridge_channel, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            <a class="code" href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">write_format</a>));</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="format_8h_html_a082f0fca94b18ba466f6e28d3ccb2fc8"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a082f0fca94b18ba466f6e28d3ccb2fc8">ast_format_get_name</a></div><div class="ttdeci">const char * ast_format_get_name(const struct ast_format *format)</div><div class="ttdoc">Get the name associated with a format. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00334">format.c:334</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="channel_8h_html_aaced431562223538a94e0e69cf94151a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aaced431562223538a94e0e69cf94151a">ast_channel_readformat</a></div><div class="ttdeci">struct ast_format * ast_channel_readformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00856">channel_internal_api.c:856</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ad88eb6e1d9b89b5e60412393b887391c">AST_FORMAT_CMP_NOT_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00038">format.h:38</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="channel_8h_html_abbdfb98077180544657b2d16c5d25f74"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a></div><div class="ttdeci">int ast_set_write_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05890">channel.c:5890</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4e704d59963fad8db5a2d20f6aef944a"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4e704d59963fad8db5a2d20f6aef944a">ast_bridge_channel::write_format</a></div><div class="ttdeci">struct ast_format * write_format</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00139">bridge_channel.h:139</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a86f01027937b6cb7bd99d64117af52a8"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a86f01027937b6cb7bd99d64117af52a8">ast_bridge_channel::read_format</a></div><div class="ttdeci">struct ast_format * read_format</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00137">bridge_channel.h:137</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="channel_8h_html_a1dc625bd14a7875b04bfe0c388858929"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1dc625bd14a7875b04bfe0c388858929">ast_channel_writeformat</a></div><div class="ttdeci">struct ast_format * ast_channel_writeformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00860">channel_internal_api.c:860</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a18a051cde2dd2ad809524473ef4ae5ef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18a051cde2dd2ad809524473ef4ae5ef">&#9670;&nbsp;</a></span>ast_bridge_channel_run_app()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_run_app </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Run an application on the bridge channel. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel to run the application on. </td></tr>
    <tr><td class="paramname">app_name</td><td>Dialplan application name. </td></tr>
    <tr><td class="paramname">app_args</td><td>Arguments for the application. (NULL tolerant) </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while application is running. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">1241</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00605">ast_bridge_channel_kick()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01167">ast_bridge_channel_write_hold()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">ast_bridge_channel_write_unhold()</a>, <a class="el" href="../../d4/da3/causes_8h_source.html#l00105">AST_CAUSE_NORMAL_CLEARING</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01211">run_app_helper()</a>, and <a class="el" href="../../d6/d90/strings_8h_source.html#l00079">S_OR</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01274">bridge_channel_run_app()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00436">dynamic_dtmf_hook_callback()</a>.</p>
<div class="fragment"><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;{</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a>(bridge_channel, moh_class);</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d3/d32/bridge__channel_8c.html#ae10c9159324fffc5b0e5ea02e3cd6973">run_app_helper</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(app_args, <span class="stringliteral">&quot;&quot;</span>))) {</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="comment">/* Break the bridge if the app returns non-zero. */</span></div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a>(bridge_channel, <a class="code" href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a>);</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;   }</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <span class="keywordflow">if</span> (moh_class) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a>(bridge_channel);</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   }</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ae10c9159324fffc5b0e5ea02e3cd6973"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ae10c9159324fffc5b0e5ea02e3cd6973">run_app_helper</a></div><div class="ttdeci">static int run_app_helper(struct ast_channel *chan, const char *app_name, const char *app_args)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01211">bridge_channel.c:1211</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a4be080559ea3fc87e50aa29a95af74f0"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a4be080559ea3fc87e50aa29a95af74f0">ast_bridge_channel_write_unhold</a></div><div class="ttdeci">int ast_bridge_channel_write_unhold(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Write an unhold frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01193">bridge_channel.c:1193</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a7e482bb2dcffd792205f114ddfa098fb"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a7e482bb2dcffd792205f114ddfa098fb">ast_bridge_channel_kick</a></div><div class="ttdeci">void ast_bridge_channel_kick(struct ast_bridge_channel *bridge_channel, int cause)</div><div class="ttdoc">Kick the channel out of the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00605">bridge_channel.c:605</a></div></div>
<div class="ttc" id="causes_8h_html_af2235eb1c27925e4020ce286255d165f"><div class="ttname"><a href="../../d4/da3/causes_8h.html#af2235eb1c27925e4020ce286255d165f">AST_CAUSE_NORMAL_CLEARING</a></div><div class="ttdeci">#define AST_CAUSE_NORMAL_CLEARING</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/da3/causes_8h_source.html#l00105">causes.h:105</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad70b0a7df24a2aa9e284d8c785dcbd45"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad70b0a7df24a2aa9e284d8c785dcbd45">ast_bridge_channel_write_hold</a></div><div class="ttdeci">int ast_bridge_channel_write_hold(struct ast_bridge_channel *bridge_channel, const char *moh_class)</div><div class="ttdoc">Write a hold frame into the bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01167">bridge_channel.c:1167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aa464f1acd378d6a297a514007cec8d18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa464f1acd378d6a297a514007cec8d18">&#9670;&nbsp;</a></span>ast_bridge_channel_stream_map()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_stream_map </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps a channel's stream topology to and from the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>15.0.0</dd></dl>
<p>When a channel joins a bridge or its associated stream topology is updated, each stream in the topology needs to be mapped according to its media type to the bridge. Calling this method creates a mapping of each stream on the channel indexed to the bridge's supported media types and vice versa (i.e. bridge's media types indexed to channel streams).</p>
<p>The first channel to join the bridge creates the initial order for the bridge's media types (e.g. a one to one mapping is made). Subsequently added channels are mapped to that order adding more media types if/when the newly added channel has more streams and/or media types specified by the bridge.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Channel to map</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The bridge_channel's bridge must be locked prior to calling this function.</dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Nothing </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l03174">3174</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00231">ast_bridge_channel_lock</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00244">ast_bridge_channel_unlock</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01583">ast_channel_get_stream_topology()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../d8/d4d/stream_8c_source.html#l00985">ast_stream_topology_map()</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, <a class="el" href="../../d4/d56/bridge_8h_source.html#l00412">ast_bridge::media_types</a>, <a class="el" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00190">ast_bridge_channel::to_bridge</a>, and <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00192">ast_bridge_channel::to_channel</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l00443">bridge_channel_complete_join()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l02608">bridge_handle_trip()</a>, <a class="el" href="../../d1/d27/bridge__native__rtp_8c_source.html#l00920">native_rtp_stream_topology_changed()</a>, <a class="el" href="../../da/daf/bridge__simple_8c_source.html#l00204">simple_bridge_stream_topology_changed()</a>, and <a class="el" href="../../db/d4e/bridge__softmix_8c_source.html#l02463">softmix_bridge_stream_topology_changed()</a>.</p>
<div class="fragment"><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;{</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a>(bridge_channel);</div><div class="line"><a name="l03177"></a><span class="lineno"> 3177</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;   <a class="code" href="../../d8/d95/stream_8h.html#ad9b482e485bd9a3c1d2ab8acdd90eadc">ast_stream_topology_map</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;      &amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a19fea4d448628d518b0043b2b17037dd">media_types</a>, &amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a18ea63e0b49a472021ff7848f4193dd5">to_bridge</a>,</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;      &amp;bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">stream_map</a>.<a class="code" href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">to_channel</a>);</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;   <a class="code" href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a>(bridge_channel);</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="channel_8h_html_ae35174b33cb8d9b4c1424448b21e50d2"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ae35174b33cb8d9b4c1424448b21e50d2">ast_channel_get_stream_topology</a></div><div class="ttdeci">struct ast_stream_topology * ast_channel_get_stream_topology(const struct ast_channel *chan)</div><div class="ttdoc">Retrieve the topology of streams on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01583">channel_internal_api.c:1583</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_affe0d3ce4e4266e3b4a4ea543fbc4d78"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#affe0d3ce4e4266e3b4a4ea543fbc4d78">ast_bridge_channel::stream_map</a></div><div class="ttdeci">struct ast_bridge_channel::@236 stream_map</div></div>
<div class="ttc" id="structast__bridge__channel_html_a18ea63e0b49a472021ff7848f4193dd5"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a18ea63e0b49a472021ff7848f4193dd5">ast_bridge_channel::to_bridge</a></div><div class="ttdeci">struct ast_vector_int to_bridge</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00190">bridge_channel.h:190</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_aa467e25606c2a21df25c61f139007782"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#aa467e25606c2a21df25c61f139007782">ast_bridge_channel_lock</a></div><div class="ttdeci">#define ast_bridge_channel_lock(bridge_channel)</div><div class="ttdoc">Lock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00231">bridge_channel.h:231</a></div></div>
<div class="ttc" id="bridge__channel_8h_html_a483cd10a0ddcca5814298bdb4f153878"><div class="ttname"><a href="../../de/d41/bridge__channel_8h.html#a483cd10a0ddcca5814298bdb4f153878">ast_bridge_channel_unlock</a></div><div class="ttdeci">#define ast_bridge_channel_unlock(bridge_channel)</div><div class="ttdoc">Unlock the bridge_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00244">bridge_channel.h:244</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a8eed32758f5880ff8ec632c30525472b"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a8eed32758f5880ff8ec632c30525472b">ast_bridge_channel::to_channel</a></div><div class="ttdeci">struct ast_vector_int to_channel</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00192">bridge_channel.h:192</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge_html_a19fea4d448628d518b0043b2b17037dd"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a19fea4d448628d518b0043b2b17037dd">ast_bridge::media_types</a></div><div class="ttdeci">struct ast_vector_int media_types</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00412">bridge.h:412</a></div></div>
<div class="ttc" id="stream_8h_html_ad9b482e485bd9a3c1d2ab8acdd90eadc"><div class="ttname"><a href="../../d8/d95/stream_8h.html#ad9b482e485bd9a3c1d2ab8acdd90eadc">ast_stream_topology_map</a></div><div class="ttdeci">void ast_stream_topology_map(const struct ast_stream_topology *topology, struct ast_vector_int *types, struct ast_vector_int *v0, struct ast_vector_int *v1)</div><div class="ttdoc">Map a given topology&amp;#39;s streams to the given types. </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4d/stream_8c_source.html#l00985">stream.c:985</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a609d9cf54ffe625a1a13cbce1df9492e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a609d9cf54ffe625a1a13cbce1df9492e">&#9670;&nbsp;</a></span>ast_bridge_channel_update_accountcodes()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_update_accountcodes </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>joining</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>leaving</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00596">596</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00529">bridge_channel_update_accountcodes_joining()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00576">bridge_channel_update_accountcodes_leaving()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00688">bridge_basic_pull()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00671">bridge_basic_push()</a>, <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00284">bridge_stasis_pull()</a>, and <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00192">bridge_stasis_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;{</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;   <span class="keywordflow">if</span> (joining) {</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#a34beb432a9c38ae2010e6ce9a9f548d6">bridge_channel_update_accountcodes_joining</a>(joining, leaving);</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      <a class="code" href="../../d3/d32/bridge__channel_8c.html#ac4b1c09de8a7b54ae9deb1dd6ac6d252">bridge_channel_update_accountcodes_leaving</a>(leaving);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   }</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ac4b1c09de8a7b54ae9deb1dd6ac6d252"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ac4b1c09de8a7b54ae9deb1dd6ac6d252">bridge_channel_update_accountcodes_leaving</a></div><div class="ttdeci">static void bridge_channel_update_accountcodes_leaving(struct ast_bridge_channel *leaving)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00576">bridge_channel.c:576</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a34beb432a9c38ae2010e6ce9a9f548d6"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a34beb432a9c38ae2010e6ce9a9f548d6">bridge_channel_update_accountcodes_joining</a></div><div class="ttdeci">static void bridge_channel_update_accountcodes_joining(struct ast_bridge_channel *joining, struct ast_bridge_channel *swap)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00529">bridge_channel.c:529</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a27c80bee9eb9c5fa1a17c722115c5ac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a27c80bee9eb9c5fa1a17c722115c5ac1">&#9670;&nbsp;</a></span>ast_bridge_channel_update_linkedids()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ast_bridge_channel_update_linkedids </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>swap</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00381">381</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01404">ast_channel_internal_copy_linkedid()</a>, <a class="el" href="../../db/de2/channel__internal__api_8c_source.html#l01387">ast_channel_internal_oldest_linkedid()</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02945">ast_channel_lock</a>, <a class="el" href="../../d5/d7b/channel_8h_source.html#l02946">ast_channel_unlock</a>, <a class="el" href="../../df/d90/linkedlists_8h_source.html#l00490">AST_LIST_TRAVERSE</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00100">ast_bridge_channel::bridge</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../d4/d56/bridge_8h_source.html#l00371">ast_bridge::channels</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00671">bridge_basic_push()</a>, and <a class="el" href="../../d9/de0/stasis__bridge_8c_source.html#l00192">bridge_stasis_push()</a>.</p>
<div class="fragment"><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;{</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *other;</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d84/structast__bridge.html">ast_bridge</a> *bridge = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">bridge</a>;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *oldest_linkedid_chan = bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, other, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      <span class="keywordflow">if</span> (other == swap) {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      oldest_linkedid_chan = <a class="code" href="../../d5/d7b/channel_8h.html#a6a88ad6a505fc3e60b9e1198cbf2493c">ast_channel_internal_oldest_linkedid</a>(</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;         oldest_linkedid_chan, other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;   }</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a0d764eaff90822aecd3387f6cfa608cf">ast_channel_internal_copy_linkedid</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, oldest_linkedid_chan);</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;bridge-&gt;<a class="code" href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">channels</a>, other, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;      <span class="keywordflow">if</span> (other == swap) {</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a0d764eaff90822aecd3387f6cfa608cf">ast_channel_internal_copy_linkedid</a>(other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, oldest_linkedid_chan);</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(other-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;   }</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;}</div><div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a4fe7571e3c1759f3689d4453c132bdb7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a4fe7571e3c1759f3689d4453c132bdb7">ast_bridge_channel::bridge</a></div><div class="ttdeci">struct ast_bridge * bridge</div><div class="ttdoc">Bridge this channel is participating in. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00100">bridge_channel.h:100</a></div></div>
<div class="ttc" id="structast__bridge_html"><div class="ttname"><a href="../../d4/d84/structast__bridge.html">ast_bridge</a></div><div class="ttdoc">Structure that contains information about a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00357">bridge.h:357</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="channel_8h_html_a0d764eaff90822aecd3387f6cfa608cf"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a0d764eaff90822aecd3387f6cfa608cf">ast_channel_internal_copy_linkedid</a></div><div class="ttdeci">void ast_channel_internal_copy_linkedid(struct ast_channel *dest, struct ast_channel *source)</div><div class="ttdoc">Copy the full linkedid channel id structure from one channel to another. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01404">channel_internal_api.c:1404</a></div></div>
<div class="ttc" id="structast__bridge_html_a77542a877d8ed62331c5b3b6aa3e87a7"><div class="ttname"><a href="../../d4/d84/structast__bridge.html#a77542a877d8ed62331c5b3b6aa3e87a7">ast_bridge::channels</a></div><div class="ttdeci">struct ast_bridge_channels_list channels</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d56/bridge_8h_source.html#l00371">bridge.h:371</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__bridge__channel_html"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a></div><div class="ttdoc">Structure that contains information regarding a channel in a bridge. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00084">bridge_channel.h:84</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_a6a88ad6a505fc3e60b9e1198cbf2493c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a6a88ad6a505fc3e60b9e1198cbf2493c">ast_channel_internal_oldest_linkedid</a></div><div class="ttdeci">struct ast_channel * ast_channel_internal_oldest_linkedid(struct ast_channel *a, struct ast_channel *b)</div><div class="ttdoc">Determine which channel has an older linkedid. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01387">channel_internal_api.c:1387</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a04e98e9a5ac91b85c516b4d579a34449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a04e98e9a5ac91b85c516b4d579a34449">&#9670;&nbsp;</a></span>ast_bridge_channel_write_app()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_app </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_args</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a bridge action run application frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the frame into the bridge </td></tr>
    <tr><td class="paramname">app_name</td><td>Dialplan application name. </td></tr>
    <tr><td class="paramname">app_args</td><td>Arguments for the application. (NULL or empty for no arguments) </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while application is running. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01309">1309</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01285">payload_helper_app()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>.</p>
<div class="fragment"><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;{</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad00550db31054aa051277a5d7dffd196">payload_helper_app</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a>,</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      bridge_channel, <a class="code" href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a>, app_args, moh_class);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ab5fa80b07664f5cad47c085e069d8671"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a></div><div class="ttdeci">static int bridge_channel_write_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel.c:1010</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad00550db31054aa051277a5d7dffd196"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad00550db31054aa051277a5d7dffd196">payload_helper_app</a></div><div class="ttdeci">static int payload_helper_app(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, const char *app_name, const char *app_args, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01285">bridge_channel.c:1285</a></div></div>
<div class="ttc" id="pbx__app_8c_html_a6d3c140ecf1f736c6750d5a17e5bf958"><div class="ttname"><a href="../../dd/d16/pbx__app_8c.html#a6d3c140ecf1f736c6750d5a17e5bf958">app_name</a></div><div class="ttdeci">const char * app_name(struct ast_app *app)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00463">pbx_app.c:463</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ae014c66309327185b609d7e3ccf21af5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae014c66309327185b609d7e3ccf21af5">&#9670;&nbsp;</a></span>ast_bridge_channel_write_callback()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_callback </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../de/d41/bridge__channel_8h.html#a411218cf4d743baa73c2def8f024cb23">ast_bridge_channel_custom_callback_option</a>&#160;</td>
          <td class="paramname"><em>flags</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#a7c65814e807e654cd23c9d952e23b69a">ast_bridge_custom_callback_fn</a>&#160;</td>
          <td class="paramname"><em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>payload</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>payload_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a bridge action custom callback frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the frame into the bridge </td></tr>
    <tr><td class="paramname">flags</td><td>Custom callback option flags. </td></tr>
    <tr><td class="paramname">callback</td><td>Custom callback run on a bridge channel. </td></tr>
    <tr><td class="paramname">payload</td><td>Data to pass to the callback. (NULL if none). </td></tr>
    <tr><td class="paramname">payload_size</td><td>Size of the payload if payload is non-NULL. A number otherwise.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>The payload MUST NOT have any resources that need to be freed.</dd>
<dd>
This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01484">1484</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01457">payload_helper_cb()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l00476">dynamic_dtmf_hook_trip()</a>.</p>
<div class="fragment"><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;{</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#afee5c64c70dc8139d5b8eed7a33e1c85">payload_helper_cb</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a>,</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;      bridge_channel, flags, callback, payload, payload_size);</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ab5fa80b07664f5cad47c085e069d8671"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a></div><div class="ttdeci">static int bridge_channel_write_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel.c:1010</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_afee5c64c70dc8139d5b8eed7a33e1c85"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#afee5c64c70dc8139d5b8eed7a33e1c85">payload_helper_cb</a></div><div class="ttdeci">static int payload_helper_cb(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, enum ast_bridge_channel_custom_callback_option flags, ast_bridge_custom_callback_fn callback, const void *payload, size_t payload_size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01457">bridge_channel.c:1457</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a9d7ca6b64c5bd875d4f16e8aef443497"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d7ca6b64c5bd875d4f16e8aef443497">&#9670;&nbsp;</a></span>ast_bridge_channel_write_control_data()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_control_data </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">enum <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390">ast_control_frame_type</a>&#160;</td>
          <td class="paramname"><em>control</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>datalen</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a control frame into the bridge with data. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the frame into the bridge. </td></tr>
    <tr><td class="paramname">control</td><td>Type of control frame. </td></tr>
    <tr><td class="paramname">data</td><td>Frame payload data to pass. </td></tr>
    <tr><td class="paramname">datalen</td><td>Frame payload data length to pass.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01155">1155</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">AST_FRAME_CONTROL</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel_write_frame()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">ast_frame::datalen</a>, and <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">ast_frame::frametype</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../de/d11/app__agent__pool_8c_source.html#l01034">agent_connect_caller()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01167">ast_bridge_channel_write_hold()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">ast_bridge_channel_write_unhold()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01814">ringing()</a>.</p>
<div class="fragment"><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;{</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> frame = {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;      .<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>,</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;      .subclass.integer = control,</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;      .datalen = <a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>,</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;      .data.ptr = (<span class="keywordtype">void</span> *) <a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>,</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   };</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aa2de5bc97f8dffac7f5f56f3f6d107f4">bridge_channel_write_frame</a>(bridge_channel, &amp;frame);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_aa2de5bc97f8dffac7f5f56f3f6d107f4"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aa2de5bc97f8dffac7f5f56f3f6d107f4">bridge_channel_write_frame</a></div><div class="ttdeci">static int bridge_channel_write_frame(struct ast_bridge_channel *bridge_channel, struct ast_frame *frame)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00650">bridge_channel.c:650</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad70b0a7df24a2aa9e284d8c785dcbd45"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad70b0a7df24a2aa9e284d8c785dcbd45">&#9670;&nbsp;</a></span>ast_bridge_channel_write_hold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_hold </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a hold frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the hold into the bridge. </td></tr>
    <tr><td class="paramname">moh_class</td><td>The suggested music class for the other end to use.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01167">1167</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01155">ast_bridge_channel_write_control_data()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#ga624c4bd0bf97a8a1a9e335cb26996f97">ast_channel_hold_type()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01120">ast_channel_publish_cached_blob()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">AST_CONTROL_HOLD</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00591">ast_json_pack()</a>, <a class="el" href="../../df/d98/json_8c_source.html#l00073">ast_json_unref()</a>, <a class="el" href="../../d6/d90/strings_8h_source.html#l00052">ast_strlen_zero</a>, <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00091">ast_bridge_channel::chan</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01321">ast_bridge_channel_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">ast_bridge_channel_run_app()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03295">feature_attended_transfer()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03472">feature_blind_transfer()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01772">hold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;{</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *blob;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;   <span class="keywordtype">size_t</span> datalen;</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(moh_class)) {</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;      datalen = strlen(moh_class) + 1;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;      blob = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>,</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;         <span class="stringliteral">&quot;musicclass&quot;</span>, moh_class);</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      moh_class = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      datalen = 0;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;      blob = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;   }</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a>(bridge_channel-&gt;<a class="code" href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga624c4bd0bf97a8a1a9e335cb26996f97">ast_channel_hold_type</a>(), blob);</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;   res = <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a>(bridge_channel, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>,</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      moh_class, datalen);</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>(blob);</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;}</div><div class="ttc" id="group__StasisTopicsAndMessages_html_ga624c4bd0bf97a8a1a9e335cb26996f97"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga624c4bd0bf97a8a1a9e335cb26996f97">ast_channel_hold_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_hold_type(void)</div><div class="ttdoc">Message type for when a channel is placed on hold. </div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">include/asterisk/frame.h:293</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga565fc39c360b014dd5d4054fa72bbae8"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a></div><div class="ttdeci">void ast_channel_publish_cached_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message using the latest snapshot from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01120">stasis_channels.c:1120</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9d7ca6b64c5bd875d4f16e8aef443497"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a></div><div class="ttdeci">int ast_bridge_channel_write_control_data(struct ast_bridge_channel *bridge_channel, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Write a control frame into the bridge with data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01155">bridge_channel.c:1155</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structast__bridge__channel_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/dca/structast__bridge__channel.html#a84d1435c5b8d387806714ea7079304b7">ast_bridge_channel::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d41/bridge__channel_8h_source.html#l00091">bridge_channel.h:91</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
</div><!-- fragment -->
</div>
</div>
<a id="af9a368f3ce4811e8ca53ef51d6cd69f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af9a368f3ce4811e8ca53ef51d6cd69f9">&#9670;&nbsp;</a></span>ast_bridge_channel_write_park()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_park </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>parkee_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>parker_uuid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>app_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Have a bridge channel park a channel in the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Bridge channel performing the parking </td></tr>
    <tr><td class="paramname">parkee_uuid</td><td>Unique id of the channel we want to park </td></tr>
    <tr><td class="paramname">parker_uuid</td><td>Unique id of the channel parking the call </td></tr>
    <tr><td class="paramname"><a class="el" href="../../da/d37/structapp__data.html">app_data</a></td><td>string indicating data used for park application (NULL allowed)</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01555">1555</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01531">payload_helper_park()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d39/parking__manager_8c_source.html#l00473">manager_park_bridged()</a>, and <a class="el" href="../../d1/db7/parking__bridge__features_8c_source.html#l00336">parking_blind_transfer_park()</a>.</p>
<div class="fragment"><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;{</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#aededbd6efeb3d8f8fe8e531c674e5eac">payload_helper_park</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a>,</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      bridge_channel, parkee_uuid, parker_uuid, <a class="code" href="../../da/d37/structapp__data.html">app_data</a>);</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ab5fa80b07664f5cad47c085e069d8671"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a></div><div class="ttdeci">static int bridge_channel_write_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel.c:1010</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_aededbd6efeb3d8f8fe8e531c674e5eac"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#aededbd6efeb3d8f8fe8e531c674e5eac">payload_helper_park</a></div><div class="ttdeci">static int payload_helper_park(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, const char *parkee_uuid, const char *parker_uuid, const char *app_data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01531">bridge_channel.c:1531</a></div></div>
<div class="ttc" id="structapp__data_html"><div class="ttname"><a href="../../da/d37/structapp__data.html">app_data</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d77/test__res__stasis_8c_source.html#l00062">test_res_stasis.c:62</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="ad30f159c66c054fd95a739c087a6c5e9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad30f159c66c054fd95a739c087a6c5e9">&#9670;&nbsp;</a></span>ast_bridge_channel_write_playfile()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_playfile </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d41/bridge__channel_8h.html#afb66d5073210f00fef9adc41e16a5f00">ast_bridge_custom_play_fn</a>&#160;</td>
          <td class="paramname"><em>custom_play</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>playfile</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>moh_class</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write a bridge action play file frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the frame into the bridge </td></tr>
    <tr><td class="paramname">custom_play</td><td>Call this function to play the playfile. (NULL if normal sound file to play) </td></tr>
    <tr><td class="paramname">playfile</td><td>Sound filename to play. </td></tr>
    <tr><td class="paramname">moh_class</td><td>MOH class to request bridge peers to hear while file is played. NULL if no MOH. Empty if default MOH class.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>This is intended to be called by bridge hooks.</dd></dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01398">1398</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel_write_action_data()</a>, and <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01378">payload_helper_playfile()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00323">start_automixmonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00139">start_automonitor()</a>, <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00300">stop_automixmonitor()</a>, and <a class="el" href="../../d9/d45/bridge__builtin__features_8c_source.html#l00106">stop_automonitor()</a>.</p>
<div class="fragment"><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;{</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a>(<a class="code" href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a>,</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      bridge_channel, custom_play, playfile, moh_class);</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;}</div><div class="ttc" id="bridge__channel_8c_html_ab5fa80b07664f5cad47c085e069d8671"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ab5fa80b07664f5cad47c085e069d8671">bridge_channel_write_action_data</a></div><div class="ttdeci">static int bridge_channel_write_action_data(struct ast_bridge_channel *bridge_channel, enum bridge_channel_action_type action, const void *data, size_t datalen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01010">bridge_channel.c:1010</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ad1c82bb3775f693a3e2c8d4a092985b5"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ad1c82bb3775f693a3e2c8d4a092985b5">payload_helper_playfile</a></div><div class="ttdeci">static int payload_helper_playfile(ast_bridge_channel_post_action_data post_it, struct ast_bridge_channel *bridge_channel, ast_bridge_custom_play_fn custom_play, const char *playfile, const char *moh_class)</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01378">bridge_channel.c:1378</a></div></div>
</div><!-- fragment -->
</div>
</div>
<a id="a4be080559ea3fc87e50aa29a95af74f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4be080559ea3fc87e50aa29a95af74f0">&#9670;&nbsp;</a></span>ast_bridge_channel_write_unhold()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ast_bridge_channel_write_unhold </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="../../d5/dca/structast__bridge__channel.html">ast_bridge_channel</a> *&#160;</td>
          <td class="paramname"><em>bridge_channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write an unhold frame into the bridge. </p>
<dl class="section since"><dt>Since</dt><dd>12.0.0</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">bridge_channel</td><td>Which channel is putting the hold into the bridge.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>on success. </td></tr>
    <tr><td class="paramname">-1</td><td>on error. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01193">1193</a> of file <a class="el" href="../../d3/d32/bridge__channel_8c_source.html">bridge_channel.c</a>.</p>

<p class="reference">References <a class="el" href="../../d5/da5/astobj2_8h_source.html#l00464">ao2_ref</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l00211">ast_bridge_channel_get_chan()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01155">ast_bridge_channel_write_control_data()</a>, <a class="el" href="../../dc/d2b/stasis__channels_8c_source.html#l01120">ast_channel_publish_cached_blob()</a>, <a class="el" href="../../df/deb/group__StasisTopicsAndMessages.html#gacdff76704ce4ee5c18b5656592886c78">ast_channel_unhold_type()</a>, <a class="el" href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">AST_CONTROL_UNHOLD</a>, and <a class="el" href="../../dc/d7f/resample_8c_source.html#l00096">NULL</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../de/d41/bridge__channel_8h_source.html#l00245">_ast_bridge_channel_unlock()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01321">ast_bridge_channel_playfile()</a>, <a class="el" href="../../d3/d32/bridge__channel_8c_source.html#l01241">ast_bridge_channel_run_app()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04729">ast_bridge_transfer_attended()</a>, <a class="el" href="../../d0/d95/bridge_8c_source.html#l04477">ast_bridge_transfer_blind()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03295">feature_attended_transfer()</a>, <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l03472">feature_blind_transfer()</a>, and <a class="el" href="../../d7/d9b/bridge__basic_8c_source.html#l01793">unhold()</a>.</p>
<div class="fragment"><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;{</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan = <a class="code" href="../../d3/d32/bridge__channel_8c.html#ae04b08c94e2d24a179c9b8e0842ccc57">ast_bridge_channel_get_chan</a>(bridge_channel);</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   <span class="keywordflow">if</span> (!chan) {</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   }</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;   <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a>(chan, <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gacdff76704ce4ee5c18b5656592886c78">ast_channel_unhold_type</a>(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(chan, -1);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d3/d32/bridge__channel_8c.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a>(bridge_channel, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;}</div><div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gacdff76704ce4ee5c18b5656592886c78"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gacdff76704ce4ee5c18b5656592886c78">ast_channel_unhold_type</a></div><div class="ttdeci">struct stasis_message_type * ast_channel_unhold_type(void)</div><div class="ttdoc">Message type for when a channel is removed from hold. </div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga565fc39c360b014dd5d4054fa72bbae8"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga565fc39c360b014dd5d4054fa72bbae8">ast_channel_publish_cached_blob</a></div><div class="ttdeci">void ast_channel_publish_cached_blob(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Publish a channel blob message using the latest snapshot from the cache. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l01120">stasis_channels.c:1120</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_ae04b08c94e2d24a179c9b8e0842ccc57"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#ae04b08c94e2d24a179c9b8e0842ccc57">ast_bridge_channel_get_chan</a></div><div class="ttdeci">struct ast_channel * ast_bridge_channel_get_chan(struct ast_bridge_channel *bridge_channel)</div><div class="ttdoc">Get a ref to the bridge_channel&amp;#39;s ast_channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l00211">bridge_channel.c:211</a></div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="bridge__channel_8c_html_a9d7ca6b64c5bd875d4f16e8aef443497"><div class="ttname"><a href="../../d3/d32/bridge__channel_8c.html#a9d7ca6b64c5bd875d4f16e8aef443497">ast_bridge_channel_write_control_data</a></div><div class="ttdeci">int ast_bridge_channel_write_control_data(struct ast_bridge_channel *bridge_channel, enum ast_control_frame_type control, const void *data, size_t datalen)</div><div class="ttdoc">Write a control frame into the bridge with data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d32/bridge__channel_8c_source.html#l01155">bridge_channel.c:1155</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">include/asterisk/frame.h:294</a></div></div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:44:53 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
