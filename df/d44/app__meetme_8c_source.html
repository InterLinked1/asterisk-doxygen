<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Asterisk - The Open Source Telephony Project: app_meetme.c Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Asterisk - The Open Source Telephony Project
   &#160;<span id="projectnumber">18.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_9654b8d08f4bba4e84b362c5fd320bee.html">apps</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">app_meetme.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../df/d44/app__meetme_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment"> * Asterisk -- An open source telephony toolkit.</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"> * Copyright (C) 1999 - 2007, Digium, Inc.</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"> * Mark Spencer &lt;markster@digium.com&gt;</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment"> * SLA Implementation by:</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment"> * Russell Bryant &lt;russell@digium.com&gt;</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> * See http://www.asterisk.org for more information about</span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"> * the Asterisk project. Please do not directly contact</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment"> * any of the maintainers of this project for assistance;</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment"> * the project provides a web site, mailing lists and IRC</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> * channels for your use.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment"> * This program is free software, distributed under the terms of</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment"> * the GNU General Public License Version 2. See the LICENSE file</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment"> * at the top of the source tree.</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="comment">/*! \file</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment"> * \brief Meet me conference bridge and Shared Line Appearances</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="comment"> * \author Mark Spencer &lt;markster@digium.com&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="comment"> * \author (SLA) Russell Bryant &lt;russell@digium.com&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="comment"> * \ingroup applications</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="comment">/*! \li \ref app_meetme.c uses configuration file \ref meetme.conf</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="comment"> * \addtogroup configuration_file Configuration Files</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"> * \page meetme.conf meetme.conf</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"> * \verbinclude meetme.conf.sample</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">/*** MODULEINFO</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="comment">   &lt;depend&gt;dahdi&lt;/depend&gt;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">   &lt;defaultenabled&gt;no&lt;/defaultenabled&gt;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">   &lt;support_level&gt;extended&lt;/support_level&gt;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">   &lt;replacement&gt;app_confbridge&lt;/replacement&gt;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/db2/asterisk_8h.html">asterisk.h</a>&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;dahdi/user.h&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d42/lock_8h.html">asterisk/lock.h</a>&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/d4d/file_8h.html">asterisk/file.h</a>&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d7b/channel_8h.html">asterisk/channel.h</a>&quot;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/de0/pbx_8h.html">asterisk/pbx.h</a>&quot;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d16/module_8h.html">asterisk/module.h</a>&quot;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html">asterisk/config.h</a>&quot;</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html">asterisk/app.h</a>&quot;</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d08/dsp_8h.html">asterisk/dsp.h</a>&quot;</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/d07/musiconhold_8h.html">asterisk/musiconhold.h</a>&quot;</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d45/manager_8h.html">asterisk/manager.h</a>&quot;</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dc/db0/cli_8h.html">asterisk/cli.h</a>&quot;</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dce/say_8h.html">asterisk/say.h</a>&quot;</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/d60/utils_8h.html">asterisk/utils.h</a>&quot;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d39/translate_8h.html">asterisk/translate.h</a>&quot;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/dc2/ulaw_8h.html">asterisk/ulaw.h</a>&quot;</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/da5/astobj2_8h.html">asterisk/astobj2.h</a>&quot;</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/da2/devicestate_8h.html">asterisk/devicestate.h</a>&quot;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/dcf/dial_8h.html">asterisk/dial.h</a>&quot;</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/da3/causes_8h.html">asterisk/causes.h</a>&quot;</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/df2/paths_8h.html">asterisk/paths.h</a>&quot;</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d2/ddc/test_8h.html">asterisk/test.h</a>&quot;</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../dd/d79/stasis_8h.html">asterisk/stasis.h</a>&quot;</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d4a/stasis__channels_8h.html">asterisk/stasis_channels.h</a>&quot;</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d25/stasis__message__router_8h.html">asterisk/stasis_message_router.h</a>&quot;</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d4/d05/json_8h.html">asterisk/json.h</a>&quot;</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d1/d18/include_2asterisk_2format__compatibility_8h.html">asterisk/format_compatibility.h</a>&quot;</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d00/enter_8h.html">enter.h</a>&quot;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../da/dd8/leave_8h.html">leave.h</a>&quot;</span></div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">/*** DOCUMENTATION</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">   &lt;application name=&quot;MeetMe&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="comment">         MeetMe conference bridge.</span></div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">         &lt;parameter name=&quot;confno&quot;&gt;</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">            &lt;para&gt;The conference number&lt;/para&gt;</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">         &lt;parameter name=&quot;options&quot;&gt;</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;<span class="comment">            &lt;optionlist&gt;</span></div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;<span class="comment">               &lt;option name=&quot;a&quot;&gt;</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="comment">                  &lt;para&gt;Set admin mode.&lt;/para&gt;</span></div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;<span class="comment">               &lt;option name=&quot;A&quot;&gt;</span></div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;<span class="comment">                  &lt;para&gt;Set marked mode.&lt;/para&gt;</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">               &lt;option name=&quot;b&quot;&gt;</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">                  &lt;para&gt;Run AGI script specified in &lt;variable&gt;MEETME_AGI_BACKGROUND&lt;/variable&gt;</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">                  Default: &lt;literal&gt;conf-background.agi&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">                  &lt;note&gt;&lt;para&gt;This does not work with non-DAHDI channels in the same</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">                  conference).&lt;/para&gt;&lt;/note&gt;</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">               &lt;option name=&quot;c&quot;&gt;</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">                  &lt;para&gt;Announce user(s) count on joining a conference.&lt;/para&gt;</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">               &lt;option name=&quot;C&quot;&gt;</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="comment">                  &lt;para&gt;Continue in dialplan when kicked out of conference.&lt;/para&gt;</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;<span class="comment">               &lt;option name=&quot;d&quot;&gt;</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="comment">                  &lt;para&gt;Dynamically add conference.&lt;/para&gt;</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="comment">               &lt;option name=&quot;D&quot;&gt;</span></div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="comment">                  &lt;para&gt;Dynamically add conference, prompting for a PIN.&lt;/para&gt;</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="comment">               &lt;option name=&quot;e&quot;&gt;</span></div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">                  &lt;para&gt;Select an empty conference.&lt;/para&gt;</span></div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">               &lt;option name=&quot;E&quot;&gt;</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">                  &lt;para&gt;Select an empty pinless conference.&lt;/para&gt;</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="comment">               &lt;option name=&quot;F&quot;&gt;</span></div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;<span class="comment">                  &lt;para&gt;Pass DTMF through the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;<span class="comment">               &lt;option name=&quot;G&quot;&gt;</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;<span class="comment">                  &lt;argument name=&quot;x&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">                     &lt;para&gt;The file to playback&lt;/para&gt;</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;<span class="comment">                  &lt;/argument&gt;</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;<span class="comment">                  &lt;para&gt;Play an intro announcement in conference.&lt;/para&gt;</span></div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;<span class="comment">               &lt;option name=&quot;i&quot;&gt;</span></div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;<span class="comment">                  &lt;para&gt;Announce user join/leave with review.&lt;/para&gt;</span></div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">               &lt;option name=&quot;I&quot;&gt;</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="comment">                  &lt;para&gt;Announce user join/leave without review.&lt;/para&gt;</span></div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="comment">               &lt;option name=&quot;k&quot;&gt;</span></div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="comment">                  &lt;para&gt;Close the conference if there&#39;s only one active participant left at exit.&lt;/para&gt;</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="comment">               &lt;option name=&quot;l&quot;&gt;</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;<span class="comment">                  &lt;para&gt;Set listen only mode (Listen only, no talking).&lt;/para&gt;</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="comment">               &lt;option name=&quot;m&quot;&gt;</span></div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="comment">                  &lt;para&gt;Set initially muted.&lt;/para&gt;</span></div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="comment">               &lt;option name=&quot;M&quot; hasparams=&quot;optional&quot;&gt;</span></div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">                  &lt;para&gt;Enable music on hold when the conference has a single caller. Optionally,</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">                  specify a musiconhold class to use. If one is not provided, it will use the</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;<span class="comment">                  channel&#39;s currently set music class, or &lt;literal&gt;default&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="comment">                  &lt;argument name=&quot;class&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;<span class="comment">               &lt;option name=&quot;n&quot;&gt;</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="comment">                  &lt;para&gt;Disable the denoiser. By default, if &lt;literal&gt;func_speex&lt;/literal&gt; is loaded, Asterisk</span></div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;<span class="comment">                  will apply a denoiser to channels in the MeetMe conference. However, channel</span></div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;<span class="comment">                  drivers that present audio with a varying rate will experience degraded</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="comment">                  performance with a denoiser attached. This parameter allows a channel joining</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="comment">                  the conference to choose not to have a denoiser attached without having to</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="comment">                  unload &lt;literal&gt;func_speex&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="comment">               &lt;option name=&quot;o&quot;&gt;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;<span class="comment">                  &lt;para&gt;Set talker optimization - treats talkers who aren&#39;t speaking as</span></div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">                  being muted, meaning (a) No encode is done on transmission and (b)</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;<span class="comment">                  Received audio that is not registered as talking is omitted causing no</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="comment">                  buildup in background noise.&lt;/para&gt;</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">               &lt;option name=&quot;p&quot; hasparams=&quot;optional&quot;&gt;</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">                  &lt;para&gt;Allow user to exit the conference by pressing &lt;literal&gt;#&lt;/literal&gt; (default)</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">                  or any of the defined keys. Dial plan execution will continue at the next</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;<span class="comment">                  priority following MeetMe. The key used is set to channel variable</span></div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;<span class="comment">                  &lt;variable&gt;MEETME_EXIT_KEY&lt;/variable&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="comment">                  &lt;argument name=&quot;keys&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="comment">                  &lt;note&gt;</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="comment">                     &lt;para&gt;Option &lt;literal&gt;s&lt;/literal&gt; has priority for &lt;literal&gt;*&lt;/literal&gt;</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;<span class="comment">                     since it cannot change its activation code.&lt;/para&gt;</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">                  &lt;/note&gt;</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">               &lt;option name=&quot;P&quot;&gt;</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">                  &lt;para&gt;Always prompt for the pin even if it is specified.&lt;/para&gt;</span></div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="comment">               &lt;option name=&quot;q&quot;&gt;</span></div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">                  &lt;para&gt;Quiet mode (don&#39;t play enter/leave sounds).&lt;/para&gt;</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="comment">               &lt;option name=&quot;r&quot;&gt;</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">                  &lt;para&gt;Record conference (records as &lt;variable&gt;MEETME_RECORDINGFILE&lt;/variable&gt;</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">                  using format &lt;variable&gt;MEETME_RECORDINGFORMAT&lt;/variable&gt;. Default filename is</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">                  &lt;literal&gt;meetme-conf-rec-${CONFNO}-${UNIQUEID}&lt;/literal&gt; and the default format is</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">                  wav.&lt;/para&gt;</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">               &lt;option name=&quot;s&quot;&gt;</span></div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">                  &lt;para&gt;Present menu (user or admin) when &lt;literal&gt;*&lt;/literal&gt; is received</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment">                  (send to menu).&lt;/para&gt;</span></div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">               &lt;option name=&quot;t&quot;&gt;</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">                  &lt;para&gt;Set talk only mode. (Talk only, no listening).&lt;/para&gt;</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;<span class="comment">               &lt;option name=&quot;T&quot;&gt;</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="comment">                  &lt;para&gt;Set talker detection (sent to manager interface and meetme list).&lt;/para&gt;</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">               &lt;option name=&quot;v&quot; hasparams=&quot;optional&quot;&gt;</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">                  &lt;para&gt;Announce when a user is joining or leaving the conference.  Use the voicemail greeting as the announcement.</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;<span class="comment">                   If the i or I options are set, the application will fall back to them if no voicemail greeting can be found.&lt;/para&gt;</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="comment">                  &lt;argument name=&quot;mailbox@[context]&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;<span class="comment">                     &lt;para&gt;The mailbox and voicemail context to play from.  If no context provided, assumed context is default.&lt;/para&gt;</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="comment">                  &lt;/argument&gt;</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;<span class="comment">               &lt;option name=&quot;w&quot; hasparams=&quot;optional&quot;&gt;</span></div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">                  &lt;para&gt;Wait until the marked user enters the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">                  &lt;argument name=&quot;secs&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="comment">               &lt;option name=&quot;x&quot;&gt;</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="comment">                  &lt;para&gt;Leave the conference when the last marked user leaves.&lt;/para&gt;</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">               &lt;option name=&quot;X&quot;&gt;</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">                  &lt;para&gt;Allow user to exit the conference by entering a valid single digit</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;<span class="comment">                  extension &lt;variable&gt;MEETME_EXIT_CONTEXT&lt;/variable&gt; or the current context</span></div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">                  if that variable is not defined.&lt;/para&gt;</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">                  &lt;note&gt;</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">                     &lt;para&gt;Option &lt;literal&gt;s&lt;/literal&gt; has priority for &lt;literal&gt;*&lt;/literal&gt;</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">                     since it cannot change its activation code.&lt;/para&gt;</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;<span class="comment">                  &lt;/note&gt;</span></div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">               &lt;option name=&quot;1&quot;&gt;</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="comment">                  &lt;para&gt;Do not play message when first person enters&lt;/para&gt;</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="comment">               &lt;option name=&quot;S&quot;&gt;</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;<span class="comment">                  &lt;para&gt;Kick the user &lt;replaceable&gt;x&lt;/replaceable&gt; seconds &lt;emphasis&gt;after&lt;/emphasis&gt; he entered into</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="comment">                  the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;<span class="comment">                  &lt;argument name=&quot;x&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">               &lt;option name=&quot;L&quot; argsep=&quot;:&quot;&gt;</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="comment">                  &lt;para&gt;Limit the conference to &lt;replaceable&gt;x&lt;/replaceable&gt; ms. Play a warning when</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;<span class="comment">                  &lt;replaceable&gt;y&lt;/replaceable&gt; ms are left. Repeat the warning every &lt;replaceable&gt;z&lt;/replaceable&gt; ms.</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;<span class="comment">                  The following special variables can be used with this option:&lt;/para&gt;</span></div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;<span class="comment">                  &lt;variablelist&gt;</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;<span class="comment">                     &lt;variable name=&quot;CONF_LIMIT_TIMEOUT_FILE&quot;&gt;</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;<span class="comment">                        &lt;para&gt;File to play when time is up.&lt;/para&gt;</span></div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;<span class="comment">                     &lt;/variable&gt;</span></div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">                     &lt;variable name=&quot;CONF_LIMIT_WARNING_FILE&quot;&gt;</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;<span class="comment">                        &lt;para&gt;File to play as warning if &lt;replaceable&gt;y&lt;/replaceable&gt; is defined. The</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;<span class="comment">                        default is to say the time remaining.&lt;/para&gt;</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="comment">                     &lt;/variable&gt;</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;<span class="comment">                  &lt;/variablelist&gt;</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">                  &lt;argument name=&quot;x&quot; /&gt;</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">                  &lt;argument name=&quot;y&quot; /&gt;</span></div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment">                  &lt;argument name=&quot;z&quot; /&gt;</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;<span class="comment">            &lt;/optionlist&gt;</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">         &lt;parameter name=&quot;pin&quot; /&gt;</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;<span class="comment">         &lt;para&gt;Enters the user into a specified MeetMe conference.  If the &lt;replaceable&gt;confno&lt;/replaceable&gt;</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;<span class="comment">         is omitted, the user will be prompted to enter one.  User can exit the conference by hangup, or</span></div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">         if the &lt;literal&gt;p&lt;/literal&gt; option is specified, by pressing &lt;literal&gt;#&lt;/literal&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="comment">         &lt;note&gt;&lt;para&gt;The DAHDI kernel modules and a functional DAHDI timing source (see dahdi_test)</span></div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="comment">         must be present for conferencing to operate properly. In addition, the chan_dahdi channel driver</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;<span class="comment">         must be loaded for the &lt;literal&gt;i&lt;/literal&gt; and &lt;literal&gt;r&lt;/literal&gt; options to operate at</span></div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;<span class="comment">         all.&lt;/para&gt;&lt;/note&gt;</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MeetMeCount&lt;/ref&gt;</span></div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MeetMeAdmin&lt;/ref&gt;</span></div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MeetMeChannelAdmin&lt;/ref&gt;</span></div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;<span class="comment">   &lt;application name=&quot;MeetMeCount&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">         MeetMe participant count.</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">         &lt;parameter name=&quot;confno&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">            &lt;para&gt;Conference number.&lt;/para&gt;</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">         &lt;parameter name=&quot;var&quot; /&gt;</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;<span class="comment">         &lt;para&gt;Plays back the number of users in the specified MeetMe conference.</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="comment">         If &lt;replaceable&gt;var&lt;/replaceable&gt; is specified, playback will be skipped and the value</span></div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;<span class="comment">         will be returned in the variable. Upon application completion, MeetMeCount will hangup</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">         the channel, unless priority &lt;literal&gt;n+1&lt;/literal&gt; exists, in which case priority progress will</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;<span class="comment">         continue.&lt;/para&gt;</span></div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MeetMe&lt;/ref&gt;</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;<span class="comment">   &lt;application name=&quot;MeetMeAdmin&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;<span class="comment">         MeetMe conference administration.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">         &lt;parameter name=&quot;confno&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;<span class="comment">         &lt;parameter name=&quot;command&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">            &lt;optionlist&gt;</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="comment">               &lt;option name=&quot;e&quot;&gt;</span></div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;<span class="comment">                  &lt;para&gt;Eject last user that joined.&lt;/para&gt;</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">               &lt;option name=&quot;E&quot;&gt;</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="comment">                  &lt;para&gt;Extend conference end time, if scheduled.&lt;/para&gt;</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;<span class="comment">               &lt;option name=&quot;k&quot;&gt;</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;<span class="comment">                  &lt;para&gt;Kick one user out of conference.&lt;/para&gt;</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">               &lt;option name=&quot;K&quot;&gt;</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">                  &lt;para&gt;Kick all users out of conference.&lt;/para&gt;</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">               &lt;option name=&quot;l&quot;&gt;</span></div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">                  &lt;para&gt;Unlock conference.&lt;/para&gt;</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="comment">               &lt;option name=&quot;L&quot;&gt;</span></div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;<span class="comment">                  &lt;para&gt;Lock conference.&lt;/para&gt;</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;<span class="comment">               &lt;option name=&quot;m&quot;&gt;</span></div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">                  &lt;para&gt;Unmute one user.&lt;/para&gt;</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;<span class="comment">               &lt;option name=&quot;M&quot;&gt;</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">                  &lt;para&gt;Mute one user.&lt;/para&gt;</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;<span class="comment">               &lt;option name=&quot;n&quot;&gt;</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;<span class="comment">                  &lt;para&gt;Unmute all users in the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">               &lt;option name=&quot;N&quot;&gt;</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">                  &lt;para&gt;Mute all non-admin users in the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">               &lt;option name=&quot;r&quot;&gt;</span></div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment">                  &lt;para&gt;Reset one user&#39;s volume settings.&lt;/para&gt;</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="comment">               &lt;option name=&quot;R&quot;&gt;</span></div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;<span class="comment">                  &lt;para&gt;Reset all users volume settings.&lt;/para&gt;</span></div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;<span class="comment">               &lt;option name=&quot;s&quot;&gt;</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;<span class="comment">                  &lt;para&gt;Lower entire conference speaking volume.&lt;/para&gt;</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<span class="comment">               &lt;option name=&quot;S&quot;&gt;</span></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<span class="comment">                  &lt;para&gt;Raise entire conference speaking volume.&lt;/para&gt;</span></div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;<span class="comment">               &lt;option name=&quot;t&quot;&gt;</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">                  &lt;para&gt;Lower one user&#39;s talk volume.&lt;/para&gt;</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">               &lt;option name=&quot;T&quot;&gt;</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">                  &lt;para&gt;Raise one user&#39;s talk volume.&lt;/para&gt;</span></div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">               &lt;option name=&quot;u&quot;&gt;</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;<span class="comment">                  &lt;para&gt;Lower one user&#39;s listen volume.&lt;/para&gt;</span></div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;<span class="comment">               &lt;option name=&quot;U&quot;&gt;</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;<span class="comment">                  &lt;para&gt;Raise one user&#39;s listen volume.&lt;/para&gt;</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;<span class="comment">               &lt;option name=&quot;v&quot;&gt;</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;<span class="comment">                  &lt;para&gt;Lower entire conference listening volume.&lt;/para&gt;</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;<span class="comment">               &lt;option name=&quot;V&quot;&gt;</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">                  &lt;para&gt;Raise entire conference listening volume.&lt;/para&gt;</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">            &lt;/optionlist&gt;</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="comment">         &lt;parameter name=&quot;user&quot; /&gt;</span></div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;<span class="comment">         &lt;para&gt;Run admin &lt;replaceable&gt;command&lt;/replaceable&gt; for conference &lt;replaceable&gt;confno&lt;/replaceable&gt;.&lt;/para&gt;</span></div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;<span class="comment">         &lt;para&gt;Will additionally set the variable &lt;variable&gt;MEETMEADMINSTATUS&lt;/variable&gt; with one of</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;<span class="comment">         the following values:&lt;/para&gt;</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="comment">         &lt;variablelist&gt;</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">            &lt;variable name=&quot;MEETMEADMINSTATUS&quot;&gt;</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="comment">               &lt;value name=&quot;NOPARSE&quot;&gt;</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;<span class="comment">                  Invalid arguments.</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;<span class="comment">               &lt;value name=&quot;NOTFOUND&quot;&gt;</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;<span class="comment">                  User specified was not found.</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="comment">               &lt;value name=&quot;FAILED&quot;&gt;</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="comment">                  Another failure occurred.</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;<span class="comment">               &lt;value name=&quot;OK&quot;&gt;</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="comment">                  The operation was completed successfully.</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="comment">               &lt;/value&gt;</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;<span class="comment">            &lt;/variable&gt;</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;<span class="comment">         &lt;/variablelist&gt;</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MeetMe&lt;/ref&gt;</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="comment">   &lt;application name=&quot;MeetMeChannelAdmin&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="comment">         MeetMe conference Administration (channel specific).</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="comment">         &lt;parameter name=&quot;channel&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="comment">         &lt;parameter name=&quot;command&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="comment">            &lt;optionlist&gt;</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="comment">               &lt;option name=&quot;k&quot;&gt;</span></div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="comment">                  &lt;para&gt;Kick the specified user out of the conference he is in.&lt;/para&gt;</span></div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">               &lt;option name=&quot;m&quot;&gt;</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="comment">                  &lt;para&gt;Unmute the specified user.&lt;/para&gt;</span></div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="comment">               &lt;option name=&quot;M&quot;&gt;</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="comment">                  &lt;para&gt;Mute the specified user.&lt;/para&gt;</span></div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="comment">            &lt;/optionlist&gt;</span></div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="comment">         &lt;para&gt;Run admin &lt;replaceable&gt;command&lt;/replaceable&gt; for a specific</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="comment">         &lt;replaceable&gt;channel&lt;/replaceable&gt; in any conference.&lt;/para&gt;</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">   &lt;application name=&quot;SLAStation&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">         Shared Line Appearance Station.</span></div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="comment">         &lt;parameter name=&quot;station&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="comment">            &lt;para&gt;Station name&lt;/para&gt;</span></div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="comment">         &lt;para&gt;This application should be executed by an SLA station. The argument depends</span></div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="comment">         on how the call was initiated. If the phone was just taken off hook, then the argument</span></div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="comment">         &lt;replaceable&gt;station&lt;/replaceable&gt; should be just the station name. If the call was</span></div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">         initiated by pressing a line key, then the station name should be preceded by an underscore</span></div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">         and the trunk name associated with that line button.&lt;/para&gt;</span></div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">         &lt;para&gt;For example: &lt;literal&gt;station1_line1&lt;/literal&gt;&lt;/para&gt;</span></div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="comment">         &lt;para&gt;On exit, this application will set the variable &lt;variable&gt;SLASTATION_STATUS&lt;/variable&gt; to</span></div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">         one of the following values:&lt;/para&gt;</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="comment">         &lt;variablelist&gt;</span></div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="comment">            &lt;variable name=&quot;SLASTATION_STATUS&quot;&gt;</span></div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="comment">               &lt;value name=&quot;FAILURE&quot; /&gt;</span></div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="comment">               &lt;value name=&quot;CONGESTION&quot; /&gt;</span></div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="comment">               &lt;value name=&quot;SUCCESS&quot; /&gt;</span></div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="comment">            &lt;/variable&gt;</span></div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="comment">         &lt;/variablelist&gt;</span></div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">   &lt;application name=&quot;SLATrunk&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="comment">         Shared Line Appearance Trunk.</span></div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="comment">         &lt;parameter name=&quot;trunk&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="comment">            &lt;para&gt;Trunk name&lt;/para&gt;</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="comment">         &lt;parameter name=&quot;options&quot;&gt;</span></div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="comment">            &lt;optionlist&gt;</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="comment">               &lt;option name=&quot;M&quot; hasparams=&quot;optional&quot;&gt;</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="comment">                  &lt;para&gt;Play back the specified MOH &lt;replaceable&gt;class&lt;/replaceable&gt;</span></div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="comment">                  instead of ringing&lt;/para&gt;</span></div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="comment">                  &lt;argument name=&quot;class&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="comment">               &lt;/option&gt;</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="comment">            &lt;/optionlist&gt;</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="comment">         &lt;para&gt;This application should be executed by an SLA trunk on an inbound call. The channel calling</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="comment">         this application should correspond to the SLA trunk with the name &lt;replaceable&gt;trunk&lt;/replaceable&gt;</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="comment">         that is being passed as an argument.&lt;/para&gt;</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">         &lt;para&gt;On exit, this application will set the variable &lt;variable&gt;SLATRUNK_STATUS&lt;/variable&gt; to</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">         one of the following values:&lt;/para&gt;</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">         &lt;variablelist&gt;</span></div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">            &lt;variable name=&quot;SLATRUNK_STATUS&quot;&gt;</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="comment">               &lt;value name=&quot;FAILURE&quot; /&gt;</span></div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="comment">               &lt;value name=&quot;SUCCESS&quot; /&gt;</span></div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="comment">               &lt;value name=&quot;UNANSWERED&quot; /&gt;</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="comment">               &lt;value name=&quot;RINGTIMEOUT&quot; /&gt;</span></div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="comment">            &lt;/variable&gt;</span></div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="comment">         &lt;/variablelist&gt;</span></div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="comment">   &lt;/application&gt;</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="comment">   &lt;function name=&quot;MEETME_INFO&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">         Query a given conference of various properties.</span></div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">         &lt;parameter name=&quot;keyword&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="comment">            &lt;para&gt;Options:&lt;/para&gt;</span></div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="comment">            &lt;enumlist&gt;</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">               &lt;enum name=&quot;lock&quot;&gt;</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="comment">                  &lt;para&gt;Boolean of whether the corresponding conference is locked.&lt;/para&gt;</span></div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="comment">               &lt;/enum&gt;</span></div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="comment">               &lt;enum name=&quot;parties&quot;&gt;</span></div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;<span class="comment">                  &lt;para&gt;Number of parties in a given conference&lt;/para&gt;</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;<span class="comment">               &lt;/enum&gt;</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">               &lt;enum name=&quot;activity&quot;&gt;</span></div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">                  &lt;para&gt;Duration of conference in seconds.&lt;/para&gt;</span></div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">               &lt;/enum&gt;</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;<span class="comment">               &lt;enum name=&quot;dynamic&quot;&gt;</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;<span class="comment">                  &lt;para&gt;Boolean of whether the corresponding conference is dynamic.&lt;/para&gt;</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;<span class="comment">               &lt;/enum&gt;</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;<span class="comment">            &lt;/enumlist&gt;</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="comment">         &lt;parameter name=&quot;confno&quot; required=&quot;true&quot;&gt;</span></div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;<span class="comment">            &lt;para&gt;Conference number to retrieve information from.&lt;/para&gt;</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">      &lt;description /&gt;</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">      &lt;see-also&gt;</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MeetMe&lt;/ref&gt;</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MeetMeCount&lt;/ref&gt;</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MeetMeAdmin&lt;/ref&gt;</span></div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;<span class="comment">         &lt;ref type=&quot;application&quot;&gt;MeetMeChannelAdmin&lt;/ref&gt;</span></div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;<span class="comment">      &lt;/see-also&gt;</span></div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;<span class="comment">   &lt;/function&gt;</span></div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">   &lt;manager name=&quot;MeetmeMute&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;<span class="comment">         Mute a Meetme user.</span></div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">         &lt;parameter name=&quot;Meetme&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">         &lt;parameter name=&quot;Usernum&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;<span class="comment">   &lt;manager name=&quot;MeetmeUnmute&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;<span class="comment">         Unmute a Meetme user.</span></div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="comment">         &lt;parameter name=&quot;Meetme&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;<span class="comment">         &lt;parameter name=&quot;Usernum&quot; required=&quot;true&quot; /&gt;</span></div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;<span class="comment">   &lt;manager name=&quot;MeetmeList&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">         List participants in a conference.</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;<span class="comment">         &lt;parameter name=&quot;Conference&quot; required=&quot;false&quot;&gt;</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;<span class="comment">            &lt;para&gt;Conference number.&lt;/para&gt;</span></div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;<span class="comment">         &lt;/parameter&gt;</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="comment">         &lt;para&gt;Lists all users in a particular MeetMe conference.</span></div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;<span class="comment">         MeetmeList will follow as separate events, followed by a final event called</span></div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;<span class="comment">         MeetmeListComplete.&lt;/para&gt;</span></div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">   &lt;manager name=&quot;MeetmeListRooms&quot; language=&quot;en_US&quot;&gt;</span></div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">      &lt;synopsis&gt;</span></div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;<span class="comment">         List active conferences.</span></div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;<span class="comment">      &lt;/synopsis&gt;</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">      &lt;syntax&gt;</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;<span class="comment">         &lt;xi:include xpointer=&quot;xpointer(/docs/manager[@name=&#39;Login&#39;]/syntax/parameter[@name=&#39;ActionID&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;<span class="comment">      &lt;/syntax&gt;</span></div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="comment">      &lt;description&gt;</span></div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;<span class="comment">         &lt;para&gt;Lists data about all active conferences.</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;<span class="comment">            MeetmeListRooms will follow as separate events, followed by a final event called</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">            MeetmeListRoomsComplete.&lt;/para&gt;</span></div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">      &lt;/description&gt;</span></div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">   &lt;/manager&gt;</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;MeetmeJoin&quot;&gt;</span></div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_CALL&quot;&gt;</span></div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when a user joins a MeetMe conference.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;<span class="comment">            &lt;parameter name=&quot;Meetme&quot;&gt;</span></div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;<span class="comment">               &lt;para&gt;The identifier for the MeetMe conference.&lt;/para&gt;</span></div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;<span class="comment">            &lt;parameter name=&quot;User&quot;&gt;</span></div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;<span class="comment">               &lt;para&gt;The identifier of the MeetMe user who joined.&lt;/para&gt;</span></div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">            &lt;channel_snapshot/&gt;</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">         &lt;see-also&gt;</span></div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;<span class="comment">            &lt;ref type=&quot;managerEvent&quot;&gt;MeetmeLeave&lt;/ref&gt;</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;<span class="comment">            &lt;ref type=&quot;application&quot;&gt;MeetMe&lt;/ref&gt;</span></div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;<span class="comment">         &lt;/see-also&gt;</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;MeetmeLeave&quot;&gt;</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_CALL&quot;&gt;</span></div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when a user leaves a MeetMe conference.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;MeetmeJoin&#39;]/managerEventInstance/syntax/parameter)&quot; /&gt;</span></div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;<span class="comment">            &lt;channel_snapshot/&gt;</span></div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">            &lt;parameter name=&quot;Duration&quot;&gt;</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<span class="comment">               &lt;para&gt;The length of time in seconds that the Meetme user was in the conference.&lt;/para&gt;</span></div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<span class="comment">         &lt;see-also&gt;</span></div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;<span class="comment">            &lt;ref type=&quot;managerEvent&quot;&gt;MeetmeJoin&lt;/ref&gt;</span></div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;<span class="comment">         &lt;/see-also&gt;</span></div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;MeetmeEnd&quot;&gt;</span></div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_CALL&quot;&gt;</span></div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when a MeetMe conference ends.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;MeetmeJoin&#39;]/managerEventInstance/syntax/parameter[@name=&#39;Meetme&#39;])&quot; /&gt;</span></div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="comment">         &lt;see-also&gt;</span></div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;<span class="comment">            &lt;ref type=&quot;managerEvent&quot;&gt;MeetmeJoin&lt;/ref&gt;</span></div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;<span class="comment">         &lt;/see-also&gt;</span></div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;MeetmeTalkRequest&quot;&gt;</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_CALL&quot;&gt;</span></div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when a MeetMe user has started talking.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;MeetmeJoin&#39;]/managerEventInstance/syntax/parameter)&quot; /&gt;</span></div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;<span class="comment">            &lt;channel_snapshot/&gt;</span></div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;<span class="comment">            &lt;parameter name=&quot;Duration&quot;&gt;</span></div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;<span class="comment">               &lt;para&gt;The length of time in seconds that the Meetme user has been in the conference at the time of this event.&lt;/para&gt;</span></div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">            &lt;parameter name=&quot;Status&quot;&gt;</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">               &lt;enumlist&gt;</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;<span class="comment">                  &lt;enum name=&quot;on&quot;/&gt;</span></div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;<span class="comment">                  &lt;enum name=&quot;off&quot;/&gt;</span></div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;<span class="comment">               &lt;/enumlist&gt;</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;<span class="comment">            &lt;/parameter&gt;</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;MeetmeTalking&quot;&gt;</span></div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_CALL&quot;&gt;</span></div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when a MeetMe user begins or ends talking.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;MeetmeJoin&#39;]/managerEventInstance/syntax/parameter)&quot; /&gt;</span></div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;<span class="comment">            &lt;channel_snapshot/&gt;</span></div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;MeetmeTalkRequest&#39;]/managerEventInstance/syntax/parameter)&quot; /&gt;</span></div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;<span class="comment">   &lt;managerEvent language=&quot;en_US&quot; name=&quot;MeetmeMute&quot;&gt;</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">      &lt;managerEventInstance class=&quot;EVENT_FLAG_CALL&quot;&gt;</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">         &lt;synopsis&gt;Raised when a MeetMe user is muted or unmuted.&lt;/synopsis&gt;</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;<span class="comment">         &lt;syntax&gt;</span></div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;MeetmeJoin&#39;]/managerEventInstance/syntax/parameter)&quot; /&gt;</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="comment">            &lt;channel_snapshot/&gt;</span></div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;<span class="comment">            &lt;xi:include xpointer=&quot;xpointer(/docs/managerEvent[@name=&#39;MeetmeTalkRequest&#39;]/managerEventInstance/syntax/parameter)&quot; /&gt;</span></div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;<span class="comment">         &lt;/syntax&gt;</span></div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;<span class="comment">      &lt;/managerEventInstance&gt;</span></div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;<span class="comment">   &lt;/managerEvent&gt;</span></div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;<span class="comment"> ***/</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;</div><div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a62921b92fa4fb37f1e3a5d4c644fc1d8">  642</a></span>&#160;<span class="preprocessor">#define CONFIG_FILE_NAME   &quot;meetme.conf&quot;</span></div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a8150bc2c862d46744a596001d6109ffa">  643</a></span>&#160;<span class="preprocessor">#define SLA_CONFIG_FILE    &quot;sla.conf&quot;</span></div><div class="line"><a name="l00644"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">  644</a></span>&#160;<span class="preprocessor">#define STR_CONCISE        &quot;concise&quot;</span></div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;<span class="comment">/*! each buffer is 20ms, so this is 640ms total */</span></div><div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af71d7de559e9731a4d8e57bafa341486">  647</a></span>&#160;<span class="preprocessor">#define DEFAULT_AUDIO_BUFFERS  32</span></div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">/*! String format for scheduled conferences */</span></div><div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af3a7249af0dc84e61384327caa331213">  650</a></span>&#160;<span class="preprocessor">#define DATE_FORMAT &quot;%Y-%m-%d %H:%M:%S&quot;</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00653"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">  653</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> =     (1 &lt;&lt; 1), <span class="comment">/*!&lt; User is muted */</span></div><div class="line"><a name="l00654"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">  654</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a> = (1 &lt;&lt; 2), <span class="comment">/*!&lt; User muted self */</span></div><div class="line"><a name="l00655"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14">  655</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14">ADMINFLAG_KICKME</a> =    (1 &lt;&lt; 3),  <span class="comment">/*!&lt; User has been kicked */</span><span class="comment"></span></div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">   /*! User has requested to speak */</span></div><div class="line"><a name="l00657"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">  657</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a> = (1 &lt;&lt; 4),</div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5acd2fa7d4984319bf6a4c01527d04647f">  658</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5acd2fa7d4984319bf6a4c01527d04647f">ADMINFLAG_HANGUP</a> = (1 &lt;&lt; 5),  <span class="comment">/*!&lt; User will be leaving the conference */</span></div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;};</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;</div><div class="line"><a name="l00661"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#acb4e9672a8f8da6bfbe4aec38d0f6454">  661</a></span>&#160;<span class="preprocessor">#define MEETME_DELAYDETECTTALK     300</span></div><div class="line"><a name="l00662"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a36a45aad3f831056ed083856012785e3">  662</a></span>&#160;<span class="preprocessor">#define MEETME_DELAYDETECTENDTALK  1000</span></div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#addd70c99776f00581f71a71d3c10d86f">  664</a></span>&#160;<span class="preprocessor">#define AST_FRAME_BITS  32</span></div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;</div><div class="line"><a name="l00666"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780b">  666</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780b">volume_action</a> {</div><div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">  667</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>,</div><div class="line"><a name="l00668"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">  668</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a></div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;};</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;</div><div class="line"><a name="l00671"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49b">  671</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49b">entrance_sound</a> {</div><div class="line"><a name="l00672"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49ba951ab68bb8f7daafb78951107080904e">  672</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49ba951ab68bb8f7daafb78951107080904e">ENTER</a>,</div><div class="line"><a name="l00673"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49bae09e07839103de682cb13fa773793fc0">  673</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49bae09e07839103de682cb13fa773793fc0">LEAVE</a></div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;};</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298">  676</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298">recording_state</a> {</div><div class="line"><a name="l00677"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a44a4c13334429a322cb3408ec48c1cfb">  677</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a44a4c13334429a322cb3408ec48c1cfb">MEETME_RECORD_OFF</a>,</div><div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a0ba2326d29dd47c10f7eb501b58bfb45">  678</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a0ba2326d29dd47c10f7eb501b58bfb45">MEETME_RECORD_STARTED</a>,</div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298aed2f74b0993cd2122169387b4ff74113">  679</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298aed2f74b0993cd2122169387b4ff74113">MEETME_RECORD_ACTIVE</a>,</div><div class="line"><a name="l00680"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a79313598c5f4a645e3b006f59572a75d">  680</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a79313598c5f4a645e3b006f59572a75d">MEETME_RECORD_TERMINATE</a></div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;};</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;</div><div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2be5f0b8c25b67aa5ca5502d61c16b73">  683</a></span>&#160;<span class="preprocessor">#define CONF_SIZE  320</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="keyword">enum</span> {<span class="comment"></span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="comment">   /*! user has admin access on the conference */</span></div><div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">  687</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a> = (1 &lt;&lt; 0),<span class="comment"></span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="comment">   /*! If set the user can only receive audio from the conference */</span></div><div class="line"><a name="l00689"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">  689</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a> = (1 &lt;&lt; 1),<span class="comment"></span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="comment">   /*! If set asterisk will exit conference when key defined in p() option is pressed */</span></div><div class="line"><a name="l00691"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aeae3eb825018940e6703d8151f1f20d5">  691</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aeae3eb825018940e6703d8151f1f20d5">CONFFLAG_KEYEXIT</a> = (1 &lt;&lt; 2),<span class="comment"></span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="comment">   /*! If set asterisk will provide a menu to the user when &#39;*&#39; is pressed */</span></div><div class="line"><a name="l00693"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8c1f23aabf6a93f20eb6b11fe8e2b857">  693</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8c1f23aabf6a93f20eb6b11fe8e2b857">CONFFLAG_STARMENU</a> = (1 &lt;&lt; 3),<span class="comment"></span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="comment">   /*! If set the use can only send audio to the conference */</span></div><div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a39a9c6b58c7b77ef675e56d00c89e0a8">  695</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a39a9c6b58c7b77ef675e56d00c89e0a8">CONFFLAG_TALKER</a> = (1 &lt;&lt; 4),<span class="comment"></span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="comment">   /*! If set there will be no enter or leave sounds */</span></div><div class="line"><a name="l00697"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">  697</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a> = (1 &lt;&lt; 5),<span class="comment"></span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="comment">   /*! If set, when user joins the conference, they will be told the number</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="comment">    *  of users that are already in */</span></div><div class="line"><a name="l00700"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a642977b3db866f6c6f87b1d5f7791d5b">  700</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a642977b3db866f6c6f87b1d5f7791d5b">CONFFLAG_ANNOUNCEUSERCOUNT</a> = (1 &lt;&lt; 6),<span class="comment"></span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="comment">   /*! Set to run AGI Script in Background */</span></div><div class="line"><a name="l00702"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76bd08a36963707fcb29643b2d3bb49">  702</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76bd08a36963707fcb29643b2d3bb49">CONFFLAG_AGI</a> = (1 &lt;&lt; 7),<span class="comment"></span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">   /*! Set to have music on hold when user is alone in conference */</span></div><div class="line"><a name="l00704"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a9fc9420ac235de446f7a35a766a7bd4b">  704</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a9fc9420ac235de446f7a35a766a7bd4b">CONFFLAG_MOH</a> = (1 &lt;&lt; 8),<span class="comment"></span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="comment">   /*! If set, the channel will leave the conference if all marked users leave */</span></div><div class="line"><a name="l00706"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">  706</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">CONFFLAG_MARKEDEXIT</a> = (1 &lt;&lt; 9),<span class="comment"></span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="comment">   /*! If set, the MeetMe will wait until a marked user enters */</span></div><div class="line"><a name="l00708"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">  708</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a> = (1 &lt;&lt; 10),<span class="comment"></span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="comment">   /*! If set, the MeetMe will exit to the specified context */</span></div><div class="line"><a name="l00710"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a61bdcc99c25b743f89316b3da3796cc1">  710</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a61bdcc99c25b743f89316b3da3796cc1">CONFFLAG_EXIT_CONTEXT</a> = (1 &lt;&lt; 11),<span class="comment"></span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="comment">   /*! If set, the user will be marked */</span></div><div class="line"><a name="l00712"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">  712</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a> = (1 &lt;&lt; 12),<span class="comment"></span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="comment">   /*! If set, user will be ask record name on entry of conference */</span></div><div class="line"><a name="l00714"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">  714</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> = (1 &lt;&lt; 13),<span class="comment"></span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="comment">   /*! If set, the MeetMe will be recorded */</span></div><div class="line"><a name="l00716"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">  716</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a> = (1&lt;&lt; 14),<span class="comment"></span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="comment">   /*! If set, the user will be monitored if the user is talking or not */</span></div><div class="line"><a name="l00718"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f">  718</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f">CONFFLAG_MONITORTALKER</a> = (1 &lt;&lt; 15),</div><div class="line"><a name="l00719"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae83ea6d46f620c57461a6df40e7b321c">  719</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae83ea6d46f620c57461a6df40e7b321c">CONFFLAG_DYNAMIC</a> = (1 &lt;&lt; 16),</div><div class="line"><a name="l00720"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a85da35a1f1708d3792f40ddfdde12919">  720</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a85da35a1f1708d3792f40ddfdde12919">CONFFLAG_DYNAMICPIN</a> = (1 &lt;&lt; 17),</div><div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a829c143c29ff7d7c84cf2a4b6a86cfe9">  721</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a829c143c29ff7d7c84cf2a4b6a86cfe9">CONFFLAG_EMPTY</a> = (1 &lt;&lt; 18),</div><div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae572ce074f616f8c0d48ce7a7b4d7546">  722</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae572ce074f616f8c0d48ce7a7b4d7546">CONFFLAG_EMPTYNOPIN</a> = (1 &lt;&lt; 19),</div><div class="line"><a name="l00723"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a403c4698d20d41dffb30064fdd738c09">  723</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a403c4698d20d41dffb30064fdd738c09">CONFFLAG_ALWAYSPROMPT</a> = (1 &lt;&lt; 20),<span class="comment"></span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="comment">   /*! If set, treat talking users as muted users */</span></div><div class="line"><a name="l00725"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a434e3c9758615b337ac4ab431538e60e">  725</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a434e3c9758615b337ac4ab431538e60e">CONFFLAG_OPTIMIZETALKER</a> = (1 &lt;&lt; 21),<span class="comment"></span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="comment">   /*! If set, won&#39;t speak the extra prompt when the first person</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="comment">    *  enters the conference */</span></div><div class="line"><a name="l00728"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acebf32e64aaad2bef9c62ae75ee816b7">  728</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acebf32e64aaad2bef9c62ae75ee816b7">CONFFLAG_NOONLYPERSON</a> = (1 &lt;&lt; 22),<span class="comment"></span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="comment">   /*! If set, user will be asked to record name on entry of conference</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="comment">    *  without review */</span></div><div class="line"><a name="l00731"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">  731</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a> = (1 &lt;&lt; 23),<span class="comment"></span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="comment">   /*! If set, the user will be initially self-muted */</span></div><div class="line"><a name="l00733"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ad7732ac9c48e20f3c0bb5948ff1e01cf">  733</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ad7732ac9c48e20f3c0bb5948ff1e01cf">CONFFLAG_STARTMUTED</a> = (1 &lt;&lt; 24),<span class="comment"></span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="comment">   /*! Pass DTMF through the conference */</span></div><div class="line"><a name="l00735"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">  735</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a> = (1 &lt;&lt; 25),</div><div class="line"><a name="l00736"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac793d6a4a78ffd301d51be06a771b70c">  736</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac793d6a4a78ffd301d51be06a771b70c">CONFFLAG_SLA_STATION</a> = (1 &lt;&lt; 26),</div><div class="line"><a name="l00737"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac5154b9d3575197ced6458b31fba2143">  737</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac5154b9d3575197ced6458b31fba2143">CONFFLAG_SLA_TRUNK</a> = (1 &lt;&lt; 27),<span class="comment"></span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="comment">   /*! If set, the user should continue in the dialplan if kicked out */</span></div><div class="line"><a name="l00739"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83">  739</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83">CONFFLAG_KICK_CONTINUE</a> = (1 &lt;&lt; 28),</div><div class="line"><a name="l00740"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8626cc2dc0a4e9e97be85ecd0ebaef15">  740</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8626cc2dc0a4e9e97be85ecd0ebaef15">CONFFLAG_DURATION_STOP</a> = (1 &lt;&lt; 29),</div><div class="line"><a name="l00741"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a67bec58b805ac5d933829e8a28fa89e6">  741</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a67bec58b805ac5d933829e8a28fa89e6">CONFFLAG_DURATION_LIMIT</a> = (1 &lt;&lt; 30),</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;};</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="comment">/* These flags are defined separately because we ran out of bits that an enum can be used to represent.</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="comment">   If you add new flags, be sure to do it in the same way that these are. */</span><span class="comment"></span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="comment">/*! Do not write any audio to this channel until the state is up. */</span></div><div class="line"><a name="l00747"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#acf5c7d460a31834ce02e286d133db0d7">  747</a></span>&#160;<span class="preprocessor">#define CONFFLAG_NO_AUDIO_UNTIL_UP  (1ULL &lt;&lt; 31)</span></div><div class="line"><a name="l00748"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aca38113ae6bc93688baec212aaa33377">  748</a></span>&#160;<span class="preprocessor">#define CONFFLAG_INTROMSG           (1ULL &lt;&lt; 32) </span><span class="comment">/*!&lt; If set play an intro announcement at start of conference */</span><span class="preprocessor"></span></div><div class="line"><a name="l00749"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">  749</a></span>&#160;<span class="preprocessor">#define CONFFLAG_INTROUSER_VMREC    (1ULL &lt;&lt; 33)</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="comment">/*! If there&#39;s only one person left in a conference when someone leaves, kill the conference */</span></div><div class="line"><a name="l00751"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aa202f4f3c667a3af94a9ab09766c2586">  751</a></span>&#160;<span class="preprocessor">#define CONFFLAG_KILL_LAST_MAN_STANDING (1ULL &lt;&lt; 34)</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="comment">/*! If set, don&#39;t enable a denoiser for the channel */</span></div><div class="line"><a name="l00753"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2b758e811891e08a43129dcf43c77fbd">  753</a></span>&#160;<span class="preprocessor">#define CONFFLAG_DONT_DENOISE       (1ULL &lt;&lt; 35)</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l00756"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eabfe6814e02021fa3fde4e9dd602d110b">  756</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eabfe6814e02021fa3fde4e9dd602d110b">OPT_ARG_WAITMARKED</a> = 0,</div><div class="line"><a name="l00757"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea95e81c82fdf625d648da836620d15dca">  757</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea95e81c82fdf625d648da836620d15dca">OPT_ARG_EXITKEYS</a>   = 1,</div><div class="line"><a name="l00758"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea22d5403ad37aee04f7beb26b97518b33">  758</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea22d5403ad37aee04f7beb26b97518b33">OPT_ARG_DURATION_STOP</a> = 2,</div><div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab92f4dda872862b445c7ee78b5eca872">  759</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab92f4dda872862b445c7ee78b5eca872">OPT_ARG_DURATION_LIMIT</a> = 3,</div><div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">  760</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a> = 4,</div><div class="line"><a name="l00761"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab415b22a4e9742e57fc6ef8f2c5362d9">  761</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab415b22a4e9742e57fc6ef8f2c5362d9">OPT_ARG_INTROMSG</a> = 5,</div><div class="line"><a name="l00762"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eaef6bb24270917468d46263b7d7a0c79c">  762</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eaef6bb24270917468d46263b7d7a0c79c">OPT_ARG_INTROUSER_VMREC</a> = 6,</div><div class="line"><a name="l00763"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eaec7326f60e7edad15d96ff935e5616d6">  763</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eaec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a> = 7,</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;};</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a520a3c6b7d57903d9a616051da1a019d">AST_APP_OPTIONS</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a1df808b41e9d1fa7679196ce8293c33b">meetme_opts</a>, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ab451a4653176c211d131b899e1f91bde">BEGIN_OPTIONS</a></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;A&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a> ),</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;a&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a> ),</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;b&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76bd08a36963707fcb29643b2d3bb49">CONFFLAG_AGI</a> ),</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;c&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a642977b3db866f6c6f87b1d5f7791d5b">CONFFLAG_ANNOUNCEUSERCOUNT</a> ),</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;C&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83">CONFFLAG_KICK_CONTINUE</a>),</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;D&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a85da35a1f1708d3792f40ddfdde12919">CONFFLAG_DYNAMICPIN</a> ),</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;d&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae83ea6d46f620c57461a6df40e7b321c">CONFFLAG_DYNAMIC</a> ),</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;E&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae572ce074f616f8c0d48ce7a7b4d7546">CONFFLAG_EMPTYNOPIN</a> ),</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;e&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a829c143c29ff7d7c84cf2a4b6a86cfe9">CONFFLAG_EMPTY</a> ),</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;F&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a> ),</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;G&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#aca38113ae6bc93688baec212aaa33377">CONFFLAG_INTROMSG</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab415b22a4e9742e57fc6ef8f2c5362d9">OPT_ARG_INTROMSG</a> ),</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;v&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a> , <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eaef6bb24270917468d46263b7d7a0c79c">OPT_ARG_INTROUSER_VMREC</a>),</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;i&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> ),</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;I&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a> ),</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;k&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#aa202f4f3c667a3af94a9ab09766c2586">CONFFLAG_KILL_LAST_MAN_STANDING</a> ),</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;M&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a9fc9420ac235de446f7a35a766a7bd4b">CONFFLAG_MOH</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a> ),</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;m&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ad7732ac9c48e20f3c0bb5948ff1e01cf">CONFFLAG_STARTMUTED</a> ),</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;n&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a2b758e811891e08a43129dcf43c77fbd">CONFFLAG_DONT_DENOISE</a> ),</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;o&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a434e3c9758615b337ac4ab431538e60e">CONFFLAG_OPTIMIZETALKER</a> ),</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;P&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a403c4698d20d41dffb30064fdd738c09">CONFFLAG_ALWAYSPROMPT</a> ),</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;p&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aeae3eb825018940e6703d8151f1f20d5">CONFFLAG_KEYEXIT</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea95e81c82fdf625d648da836620d15dca">OPT_ARG_EXITKEYS</a> ),</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;q&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a> ),</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;r&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a> ),</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;s&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8c1f23aabf6a93f20eb6b11fe8e2b857">CONFFLAG_STARMENU</a> ),</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;T&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f">CONFFLAG_MONITORTALKER</a> ),</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;l&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a> ),</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;t&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a39a9c6b58c7b77ef675e56d00c89e0a8">CONFFLAG_TALKER</a> ),</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;w&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eabfe6814e02021fa3fde4e9dd602d110b">OPT_ARG_WAITMARKED</a> ),</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;X&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a61bdcc99c25b743f89316b3da3796cc1">CONFFLAG_EXIT_CONTEXT</a> ),</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;x&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">CONFFLAG_MARKEDEXIT</a> ),</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a>(<span class="charliteral">&#39;1&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acebf32e64aaad2bef9c62ae75ee816b7">CONFFLAG_NOONLYPERSON</a> ),</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;S&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8626cc2dc0a4e9e97be85ecd0ebaef15">CONFFLAG_DURATION_STOP</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea22d5403ad37aee04f7beb26b97518b33">OPT_ARG_DURATION_STOP</a>),</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;L&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a67bec58b805ac5d933829e8a28fa89e6">CONFFLAG_DURATION_LIMIT</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab92f4dda872862b445c7ee78b5eca872">OPT_ARG_DURATION_LIMIT</a>),</div><div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1df808b41e9d1fa7679196ce8293c33b">  800</a></span>&#160;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a2a1890787b3e55318c417c0a3e1432c7">END_OPTIONS</a> );</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;</div><div class="line"><a name="l00802"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a3ed16a1a934fc63de92ab3128228402b">  802</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a3ed16a1a934fc63de92ab3128228402b">app</a> = <span class="stringliteral">&quot;MeetMe&quot;</span>;</div><div class="line"><a name="l00803"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a575017c9b5eba1c508bb2236270b4306">  803</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a575017c9b5eba1c508bb2236270b4306">app2</a> = <span class="stringliteral">&quot;MeetMeCount&quot;</span>;</div><div class="line"><a name="l00804"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a8e303966dc2d93e3c9ddeea3f4258f12">  804</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a8e303966dc2d93e3c9ddeea3f4258f12">app3</a> = <span class="stringliteral">&quot;MeetMeAdmin&quot;</span>;</div><div class="line"><a name="l00805"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a548baad9550302b0e5f31687cbdf04bb">  805</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a548baad9550302b0e5f31687cbdf04bb">app4</a> = <span class="stringliteral">&quot;MeetMeChannelAdmin&quot;</span>;</div><div class="line"><a name="l00806"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a5d3475b5094d98dbe2cde61a7cbd6e6d">  806</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a5d3475b5094d98dbe2cde61a7cbd6e6d">slastation_app</a> = <span class="stringliteral">&quot;SLAStation&quot;</span>;</div><div class="line"><a name="l00807"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1c33b49a824e1d37dc3dc94b13d8830d">  807</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> * <span class="keyword">const</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a1c33b49a824e1d37dc3dc94b13d8830d">slatrunk_app</a> = <span class="stringliteral">&quot;SLATrunk&quot;</span>;</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;<span class="comment">/* Lookup RealTime conferences based on confno and current time */</span></div><div class="line"><a name="l00810"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae30bfc0de78dd15d5e61f3359a795ebb">  810</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae30bfc0de78dd15d5e61f3359a795ebb">rt_schedule</a>;</div><div class="line"><a name="l00811"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aacbac1f0d72bfec51d91f4ace69cbbd4">  811</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aacbac1f0d72bfec51d91f4ace69cbbd4">fuzzystart</a>;</div><div class="line"><a name="l00812"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aaaea827a7f6f7ee74d3dda01ec71644e">  812</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aaaea827a7f6f7ee74d3dda01ec71644e">earlyalert</a>;</div><div class="line"><a name="l00813"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a35cc725664fd0b4f53fbbb7d0f15c038">  813</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a35cc725664fd0b4f53fbbb7d0f15c038">endalert</a>;</div><div class="line"><a name="l00814"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae0a2b76878a215d1ac6e738b85b4b9d8">  814</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae0a2b76878a215d1ac6e738b85b4b9d8">extendby</a>;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;<span class="comment">/*! Log participant count to the RealTime backend */</span></div><div class="line"><a name="l00817"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1590866b16d9cf85be855116bec22712">  817</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a1590866b16d9cf85be855116bec22712">rt_log_members</a>;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;</div><div class="line"><a name="l00819"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aa062a857f2cbc03c82512074e6c68afd">  819</a></span>&#160;<span class="preprocessor">#define MAX_CONFNUM 80</span></div><div class="line"><a name="l00820"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">  820</a></span>&#160;<span class="preprocessor">#define MAX_PIN     80</span></div><div class="line"><a name="l00821"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a83128aa5fb371ea385d8bc0f6186e20f">  821</a></span>&#160;<span class="preprocessor">#define OPTIONS_LEN 100</span></div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;<span class="comment">/* Enough space for &quot;&lt;conference #&gt;,&lt;pin&gt;,&lt;admin pin&gt;&quot; followed by a 0 byte. */</span></div><div class="line"><a name="l00824"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#afad3aadf1645aabf53eea7d30a839411">  824</a></span>&#160;<span class="preprocessor">#define MAX_SETTINGS (MAX_CONFNUM + MAX_PIN + MAX_PIN + 3)</span></div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;</div><div class="line"><a name="l00826"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bf">  826</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bf">announcetypes</a> {</div><div class="line"><a name="l00827"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfa7a2844a08140930251b7a890184cf1f1">  827</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfa7a2844a08140930251b7a890184cf1f1">CONF_HASJOIN</a>,</div><div class="line"><a name="l00828"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfafe977bca19aa4a5f72ff226a312b74af">  828</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfafe977bca19aa4a5f72ff226a312b74af">CONF_HASLEFT</a></div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;};</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;</div><div class="line"><a name="l00831"></a><span class="lineno"><a class="line" href="../../dd/d4b/structannounce__listitem.html">  831</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/d4b/structannounce__listitem.html">announce_listitem</a> {</div><div class="line"><a name="l00832"></a><span class="lineno"><a class="line" href="../../dd/d4b/structannounce__listitem.html#ac709d8bd30a90ca4ebb677d7daf42ed0">  832</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../dd/d4b/structannounce__listitem.html">announce_listitem</a>) <a class="code" href="../../dd/d4b/structannounce__listitem.html#ac739ddc112a78429124efe57bd171e37">entry</a>;</div><div class="line"><a name="l00833"></a><span class="lineno"><a class="line" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">  833</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];          <span class="comment">/*!&lt; Name Recorded file Location */</span></div><div class="line"><a name="l00834"></a><span class="lineno"><a class="line" href="../../dd/d4b/structannounce__listitem.html#adf416dc058363e2fd5750c77e2d78bee">  834</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d4b/structannounce__listitem.html#adf416dc058363e2fd5750c77e2d78bee">language</a>[<a class="code" href="../../d5/d7b/channel_8h.html#a9238c3318ae8d3bea2cbbe1d1e459eb7">MAX_LANGUAGE</a>];</div><div class="line"><a name="l00835"></a><span class="lineno"><a class="line" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">  835</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">confchan</a>;</div><div class="line"><a name="l00836"></a><span class="lineno"><a class="line" href="../../dd/d4b/structannounce__listitem.html#aae887e628e91515c97a46a3834c91069">  836</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d4b/structannounce__listitem.html#aae887e628e91515c97a46a3834c91069">confusers</a>;</div><div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="../../dd/d4b/structannounce__listitem.html#a185c325c6063263f7b3119f4045c22e0">  837</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d4b/structannounce__listitem.html#a185c325c6063263f7b3119f4045c22e0">vmrec</a>;</div><div class="line"><a name="l00838"></a><span class="lineno"><a class="line" href="../../dd/d4b/structannounce__listitem.html#aaf09e68427ae0e6025d08e028646d43a">  838</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bf">announcetypes</a> <a class="code" href="../../dd/d4b/structannounce__listitem.html#aaf09e68427ae0e6025d08e028646d43a">announcetype</a>;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;};</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;<span class="comment">/*! \brief The MeetMe Conference object */</span></div><div class="line"><a name="l00842"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html">  842</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> {</div><div class="line"><a name="l00843"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">  843</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>;                   <span class="comment">/*!&lt; Conference specific lock (players) */</span></div><div class="line"><a name="l00844"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">  844</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>;                 <span class="comment">/*!&lt; Conference specific lock (listeners) */</span></div><div class="line"><a name="l00845"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">  845</a></span>&#160;   <span class="keywordtype">char</span> confno[<a class="code" href="../../df/d44/app__meetme_8c.html#aa062a857f2cbc03c82512074e6c68afd">MAX_CONFNUM</a>];               <span class="comment">/*!&lt; Conference */</span></div><div class="line"><a name="l00846"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">  846</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;               <span class="comment">/*!&lt; Announcements channel */</span></div><div class="line"><a name="l00847"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">  847</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>;              <span class="comment">/*!&lt; Listen/Record channel */</span></div><div class="line"><a name="l00848"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">  848</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a>;                                 <span class="comment">/*!&lt; Announcements fd */</span></div><div class="line"><a name="l00849"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">  849</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">dahdiconf</a>;                            <span class="comment">/*!&lt; DAHDI Conf # */</span></div><div class="line"><a name="l00850"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">  850</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>;                              <span class="comment">/*!&lt; Number of active users */</span></div><div class="line"><a name="l00851"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">  851</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>;                        <span class="comment">/*!&lt; Number of marked users */</span></div><div class="line"><a name="l00852"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#ad7b1f4e72963d085053fb4ef80e9fb33">  852</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#ad7b1f4e72963d085053fb4ef80e9fb33">maxusers</a>;                           <span class="comment">/*!&lt; Participant limit if scheduled */</span></div><div class="line"><a name="l00853"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a35cc725664fd0b4f53fbbb7d0f15c038">  853</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a35cc725664fd0b4f53fbbb7d0f15c038">endalert</a>;                           <span class="comment">/*!&lt; When to play conf ending message */</span></div><div class="line"><a name="l00854"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">  854</a></span>&#160;   time_t <a class="code" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">start</a>;                           <span class="comment">/*!&lt; Start time (s) */</span></div><div class="line"><a name="l00855"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">  855</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a>;                           <span class="comment">/*!&lt; reference count of usage */</span></div><div class="line"><a name="l00856"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#af06bdf9e29424094b6e9eddc4d9f9f62">  856</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298">recording_state</a> recording:2;       <span class="comment">/*!&lt; recording status */</span></div><div class="line"><a name="l00857"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">  857</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">isdynamic</a>:1;               <span class="comment">/*!&lt; Created on the fly? */</span></div><div class="line"><a name="l00858"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">  858</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a>:1;                  <span class="comment">/*!&lt; Is the conference locked? */</span></div><div class="line"><a name="l00859"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a0775e550a18cb0caa88650d9f8369ce1">  859</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a0775e550a18cb0caa88650d9f8369ce1">gmuted</a>:1;                  <span class="comment">/*!&lt; Is the conference globally muted? (all non-admins) */</span></div><div class="line"><a name="l00860"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#aa9af2bfdaafa007e201fc6f01dfd9f68">  860</a></span>&#160;   pthread_t <a class="code" href="../../d8/d44/structast__conference.html#aa9af2bfdaafa007e201fc6f01dfd9f68">recordthread</a>;                 <span class="comment">/*!&lt; thread for recording */</span></div><div class="line"><a name="l00861"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">  861</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">recordthreadlock</a>;           <span class="comment">/*!&lt; control threads trying to start recordthread */</span></div><div class="line"><a name="l00862"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a324189adc86f9f14b363b10e4f9241f3">  862</a></span>&#160;   pthread_attr_t <a class="code" href="../../d8/d44/structast__conference.html#a324189adc86f9f14b363b10e4f9241f3">attr</a>;                    <span class="comment">/*!&lt; thread attribute */</span></div><div class="line"><a name="l00863"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">  863</a></span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>;                <span class="comment">/*!&lt; Filename to record the Conference into */</span></div><div class="line"><a name="l00864"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">  864</a></span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>;                  <span class="comment">/*!&lt; Format to record the Conference in */</span></div><div class="line"><a name="l00865"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#ad3479638ded235d29e4bbba475abe931">  865</a></span>&#160;   <span class="keywordtype">char</span> pin[<a class="code" href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a>];                      <span class="comment">/*!&lt; If protected by a PIN */</span></div><div class="line"><a name="l00866"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">  866</a></span>&#160;   <span class="keywordtype">char</span> pinadmin[<a class="code" href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a>];                 <span class="comment">/*!&lt; If protected by a admin PIN */</span></div><div class="line"><a name="l00867"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#ae42dbdf188676f5840d98c4427e75a4f">  867</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../df/d3c/structast__channel.html#a1245ce5e07d09b4eccf64f29f6d83664">uniqueid</a>[32];</div><div class="line"><a name="l00868"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">  868</a></span>&#160;   <span class="keywordtype">long</span> <a class="code" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">endtime</a>;                           <span class="comment">/*!&lt; When to end the conf if scheduled */</span></div><div class="line"><a name="l00869"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a925d07390890a216d14e47a42b59eb05">  869</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#a925d07390890a216d14e47a42b59eb05">useropts</a>;                   <span class="comment">/*!&lt; RealTime user flags */</span></div><div class="line"><a name="l00870"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#afa3f2aa238dd1090b0ab5e87b9188f2a">  870</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#afa3f2aa238dd1090b0ab5e87b9188f2a">adminopts</a>;                  <span class="comment">/*!&lt; RealTime moderator flags */</span></div><div class="line"><a name="l00871"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a9c9fece27d0906bb0c5e522e26c92d7f">  871</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#a9c9fece27d0906bb0c5e522e26c92d7f">bookid</a>;                     <span class="comment">/*!&lt; RealTime conference id */</span></div><div class="line"><a name="l00872"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">  872</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *transframe[32];</div><div class="line"><a name="l00873"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">  873</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *<a class="code" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">origframe</a>;</div><div class="line"><a name="l00874"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a16f06197fcaec99baf94c770e1549fc8">  874</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a> *transpath[32];</div><div class="line"><a name="l00875"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">  875</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>;</div><div class="line"><a name="l00876"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#ab55bb9db1b52fa09a59d5eaf7054ec7f">  876</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a>) list;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;   <span class="comment">/* announce_thread related data */</span></div><div class="line"><a name="l00878"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a32ad66f5110971b6c12b3e7e5d700ed6">  878</a></span>&#160;   pthread_t <a class="code" href="../../d8/d44/structast__conference.html#a32ad66f5110971b6c12b3e7e5d700ed6">announcethread</a>;</div><div class="line"><a name="l00879"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a2d6ea8e1bd00fa11be2f422d8949e33e">  879</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../d8/d44/structast__conference.html#a2d6ea8e1bd00fa11be2f422d8949e33e">announcethreadlock</a>;</div><div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#ad55362a02bb3873c199d40bcd1407d25">  880</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#ad55362a02bb3873c199d40bcd1407d25">announcethread_stop</a>:1;</div><div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#aaf8da2ce427bc9d88ba925c185056a41">  881</a></span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> <a class="code" href="../../d8/d44/structast__conference.html#aaf8da2ce427bc9d88ba925c185056a41">announcelist_addition</a>;</div><div class="line"><a name="l00882"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a70042bbb2c09d878dc28f0cb1c3db372">  882</a></span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../dd/d4b/structannounce__listitem.html">announce_listitem</a>) announcelist;</div><div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">  883</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>;</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;};</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;</div><div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="../../df/dd2/structconfs.html#adf04f66344e3fb0a6f6a69bf39d19902">  886</a></span>&#160;<span class="keyword">static</span> <a class="code" href="../../df/d90/linkedlists_8h.html#a10f9ed9242a397abf76de1ed1fa33c3b">AST_LIST_HEAD_STATIC</a>(<a class="code" href="../../df/dd2/structconfs.html">confs</a>, <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a>);</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div><div class="line"><a name="l00888"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a27bb593e08b2fbe3c75194dcd6e83856">  888</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a27bb593e08b2fbe3c75194dcd6e83856">conf_map</a>[1024] = {0, };</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;</div><div class="line"><a name="l00890"></a><span class="lineno"><a class="line" href="../../da/d4c/structvolume.html">  890</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../da/d4c/structvolume.html">volume</a> {</div><div class="line"><a name="l00891"></a><span class="lineno"><a class="line" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">  891</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>;                            <span class="comment">/*!&lt; Desired volume adjustment */</span></div><div class="line"><a name="l00892"></a><span class="lineno"><a class="line" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">  892</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a>;                             <span class="comment">/*!&lt; Actual volume adjustment (for channels that can&#39;t adjust) */</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;};</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;<span class="comment">/*! \brief The MeetMe User object */</span></div><div class="line"><a name="l00896"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html">  896</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> {</div><div class="line"><a name="l00897"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">  897</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>;                            <span class="comment">/*!&lt; User Number */</span></div><div class="line"><a name="l00898"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">  898</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> userflags;           <span class="comment">/*!&lt; Flags as set in the conference */</span></div><div class="line"><a name="l00899"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">  899</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a>;                         <span class="comment">/*!&lt; Flags set by the Admin */</span></div><div class="line"><a name="l00900"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">  900</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;               <span class="comment">/*!&lt; Connected channel */</span></div><div class="line"><a name="l00901"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">  901</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a>;                            <span class="comment">/*!&lt; Is user talking */</span></div><div class="line"><a name="l00902"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#af950158a50739005416f058684729d28">  902</a></span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d7/d90/structast__conf__user.html#af950158a50739005416f058684729d28">dahdichannel</a>;                       <span class="comment">/*!&lt; Is a DAHDI channel */</span></div><div class="line"><a name="l00903"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#afb4343dd2ff2928ecf7017fdd8a013bb">  903</a></span>&#160;   <span class="keywordtype">char</span> usrvalue[50];                      <span class="comment">/*!&lt; Custom User Value */</span></div><div class="line"><a name="l00904"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">  904</a></span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];    <span class="comment">/*!&lt; Name Recorded file Location */</span></div><div class="line"><a name="l00905"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a12f01daf47a1827d4ae33b345da7d46b">  905</a></span>&#160;   time_t <a class="code" href="../../d7/d90/structast__conf__user.html#a12f01daf47a1827d4ae33b345da7d46b">jointime</a>;                        <span class="comment">/*!&lt; Time the user joined the conference */</span></div><div class="line"><a name="l00906"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#ae5ad22d81786b1fc2a541ad84f1cd860">  906</a></span>&#160;   time_t <a class="code" href="../../d7/d90/structast__conf__user.html#ae5ad22d81786b1fc2a541ad84f1cd860">kicktime</a>;                        <span class="comment">/*!&lt; Time the user will be kicked from the conference */</span></div><div class="line"><a name="l00907"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#ab83335d6897e2ea22f24b1b8afd95b0f">  907</a></span>&#160;   <span class="keyword">struct </span>timeval start_time;              <span class="comment">/*!&lt; Time the user entered into the conference */</span></div><div class="line"><a name="l00908"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">  908</a></span>&#160;   <span class="keywordtype">long</span> <a class="code" href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>;                         <span class="comment">/*!&lt; Time limit for the user to be in the conference L(x:y:z) */</span></div><div class="line"><a name="l00909"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#af3d16394c849390df1c8f72569faeb37">  909</a></span>&#160;   <span class="keywordtype">long</span> <a class="code" href="../../d7/d90/structast__conf__user.html#af3d16394c849390df1c8f72569faeb37">play_warning</a>;                      <span class="comment">/*!&lt; Play a warning when &#39;y&#39; ms are left */</span></div><div class="line"><a name="l00910"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#abc09654c9b36de6b0bd0bfd92d31c0c0">  910</a></span>&#160;   <span class="keywordtype">long</span> <a class="code" href="../../d7/d90/structast__conf__user.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a>;                      <span class="comment">/*!&lt; Repeat the warning every &#39;z&#39; ms */</span></div><div class="line"><a name="l00911"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a1fa6cb6235cf4abe198a8561e3c18bae">  911</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d90/structast__conf__user.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a>;              <span class="comment">/*!&lt; File to play as warning if &#39;y&#39; is defined */</span></div><div class="line"><a name="l00912"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a0b23b4ebfc857809d07d1ced94c9a6eb">  912</a></span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d90/structast__conf__user.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a>;                  <span class="comment">/*!&lt; File to play when time is up. */</span></div><div class="line"><a name="l00913"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">  913</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d4c/structvolume.html">volume</a> talk;</div><div class="line"><a name="l00914"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">  914</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d4c/structvolume.html">volume</a> listen;</div><div class="line"><a name="l00915"></a><span class="lineno"><a class="line" href="../../d7/d90/structast__conf__user.html#a486277d971f3fee0aef037df2242cc16">  915</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a>) list;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;};</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;</div><div class="line"><a name="l00918"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215">  918</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215">sla_which_trunk_refs</a> {</div><div class="line"><a name="l00919"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">  919</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>,</div><div class="line"><a name="l00920"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215a5b13df634bb3782cb4a25c0fe0712515">  920</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215a5b13df634bb3782cb4a25c0fe0712515">INACTIVE_TRUNK_REFS</a>,</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;};</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div><div class="line"><a name="l00923"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75">  923</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75">sla_trunk_state</a> {</div><div class="line"><a name="l00924"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">  924</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>,</div><div class="line"><a name="l00925"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a4822569aa984228bec67e07f5b9862a5">  925</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a4822569aa984228bec67e07f5b9862a5">SLA_TRUNK_STATE_RINGING</a>,</div><div class="line"><a name="l00926"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">  926</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>,</div><div class="line"><a name="l00927"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a17322fe34775141bef95a88fd00ed59d">  927</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a17322fe34775141bef95a88fd00ed59d">SLA_TRUNK_STATE_ONHOLD</a>,</div><div class="line"><a name="l00928"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">  928</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a>,</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;};</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;</div><div class="line"><a name="l00931"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685c">  931</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685c">sla_hold_access</a> {<span class="comment"></span></div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;<span class="comment">   /*! This means that any station can put it on hold, and any station</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;<span class="comment">    * can retrieve the call from hold. */</span></div><div class="line"><a name="l00934"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685ca1e46cd00f27d565cf02c15ec55c8be06">  934</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685ca1e46cd00f27d565cf02c15ec55c8be06">SLA_HOLD_OPEN</a>,<span class="comment"></span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;<span class="comment">   /*! This means that only the station that put the call on hold may</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;<span class="comment">    * retrieve it from hold. */</span></div><div class="line"><a name="l00937"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685cab53c785cab44a382700c0c2e7bfabf3b">  937</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685cab53c785cab44a382700c0c2e7bfabf3b">SLA_HOLD_PRIVATE</a>,</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;};</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a>;</div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;</div><div class="line"><a name="l00942"></a><span class="lineno"><a class="line" href="../../dd/d95/structsla__station.html">  942</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> {</div><div class="line"><a name="l00943"></a><span class="lineno"><a class="line" href="../../dd/d95/structsla__station.html#a547cfb512cb714556eac16a7e08e21d2">  943</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ac63e9e237da22b6faf3be4edfc4f5a11">AST_RWLIST_ENTRY</a>(<a class="code" href="../../dd/d95/structsla__station.html">sla_station</a>) <a class="code" href="../../dd/d4b/structannounce__listitem.html#ac739ddc112a78429124efe57bd171e37">entry</a>;</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a061580e89c55282a7140fa3fdfd52b6d">AST_DECLARE_STRING_FIELDS</a>(</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(device);</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(autocontext);</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   );</div><div class="line"><a name="l00949"></a><span class="lineno"><a class="line" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">  949</a></span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a>) <a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>;</div><div class="line"><a name="l00950"></a><span class="lineno"><a class="line" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">  950</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/db7/structast__dial.html">ast_dial</a> *<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>;<span class="comment"></span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;<span class="comment">   /*! Ring timeout for this station, for any trunk.  If a ring timeout</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="comment">    *  is set for a specific trunk on this station, that will take</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;<span class="comment">    *  priority over this value. */</span></div><div class="line"><a name="l00954"></a><span class="lineno"><a class="line" href="../../dd/d95/structsla__station.html#a1f1a04b798d6b529cac3ee205c5e7961">  954</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d95/structsla__station.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>;<span class="comment"></span></div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;<span class="comment">   /*! Ring delay for this station, for any trunk.  If a ring delay</span></div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;<span class="comment">    *  is set for a specific trunk on this station, that will take</span></div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;<span class="comment">    *  priority over this value. */</span></div><div class="line"><a name="l00958"></a><span class="lineno"><a class="line" href="../../dd/d95/structsla__station.html#a8b9f36f9500c33f5968999247558066e">  958</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d95/structsla__station.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a>;<span class="comment"></span></div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;<span class="comment">   /*! This option uses the values in the sla_hold_access enum and sets the</span></div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;<span class="comment">    * access control type for hold on this station. */</span></div><div class="line"><a name="l00961"></a><span class="lineno"><a class="line" href="../../dd/d95/structsla__station.html#a9f0acfbb10f035a4ad88dc2c8ad41030">  961</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d95/structsla__station.html#a9f0acfbb10f035a4ad88dc2c8ad41030">hold_access</a>:1;<span class="comment"></span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;<span class="comment">   /*! Mark used during reload processing */</span></div><div class="line"><a name="l00963"></a><span class="lineno"><a class="line" href="../../dd/d95/structsla__station.html#aa328161f4934a6c22ca967fcb5cbc1e1">  963</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dd/d95/structsla__station.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a>:1;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;};</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;<span class="comment"> * \brief A reference to a station</span></div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;<span class="comment"> * This struct looks near useless at first glance.  However, its existence</span></div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;<span class="comment"> * in the list of stations in sla_trunk means that this station references</span></div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;<span class="comment"> * that trunk.  We use the mark to keep track of whether it needs to be</span></div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;<span class="comment"> * removed from the sla_trunk&#39;s list of stations during a reload.</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l00974"></a><span class="lineno"><a class="line" href="../../d0/db1/structsla__station__ref.html">  974</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> {</div><div class="line"><a name="l00975"></a><span class="lineno"><a class="line" href="../../d0/db1/structsla__station__ref.html#a14b2c910103ac179351c1fd993a87202">  975</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a>) <a class="code" href="../../dd/d4b/structannounce__listitem.html#ac739ddc112a78429124efe57bd171e37">entry</a>;</div><div class="line"><a name="l00976"></a><span class="lineno"><a class="line" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">  976</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;<span class="comment"></span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;<span class="comment">   /*! Mark used during reload processing */</span></div><div class="line"><a name="l00978"></a><span class="lineno"><a class="line" href="../../d0/db1/structsla__station__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">  978</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/db1/structsla__station__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a>:1;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;};</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;</div><div class="line"><a name="l00981"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html">  981</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> {</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a061580e89c55282a7140fa3fdfd52b6d">AST_DECLARE_STRING_FIELDS</a>(</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>);</div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(device);</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a>(autocontext);</div><div class="line"><a name="l00986"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">  986</a></span>&#160;   );</div><div class="line"><a name="l00987"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#a18364cb1f63f203cc32521f0cce7e1a4">  987</a></span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a>) stations;<span class="comment"></span></div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">   /*! Number of stations that use this trunk */</span></div><div class="line"><a name="l00989"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#a1d9bf56b0ad4ad9e4b195ccc2179eda4">  989</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dbe/structsla__trunk.html#a1d9bf56b0ad4ad9e4b195ccc2179eda4">num_stations</a>;<span class="comment"></span></div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">   /*! Number of stations currently on a call with this trunk */</span></div><div class="line"><a name="l00991"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#aaf4bad1817a2988a07bb37913898d976">  991</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dbe/structsla__trunk.html#aaf4bad1817a2988a07bb37913898d976">active_stations</a>;<span class="comment"></span></div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;<span class="comment">   /*! Number of stations that have this trunk on hold. */</span></div><div class="line"><a name="l00993"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#a2ccd06fb5f2eeea9c3d1798c67d271e6">  993</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dbe/structsla__trunk.html#a2ccd06fb5f2eeea9c3d1798c67d271e6">hold_stations</a>;</div><div class="line"><a name="l00994"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">  994</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l00995"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#a1f1a04b798d6b529cac3ee205c5e7961">  995</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dbe/structsla__trunk.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>;<span class="comment"></span></div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;<span class="comment">   /*! If set to 1, no station will be able to join an active call with</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;<span class="comment">    *  this trunk. */</span></div><div class="line"><a name="l00998"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#a748f7c363274abc31c4396fde91f9f4e">  998</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dbe/structsla__trunk.html#a748f7c363274abc31c4396fde91f9f4e">barge_disabled</a>:1;<span class="comment"></span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;<span class="comment">   /*! This option uses the values in the sla_hold_access enum and sets the</span></div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;<span class="comment">    * access control type for hold on this trunk. */</span></div><div class="line"><a name="l01001"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#a9f0acfbb10f035a4ad88dc2c8ad41030"> 1001</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dbe/structsla__trunk.html#a9f0acfbb10f035a4ad88dc2c8ad41030">hold_access</a>:1;<span class="comment"></span></div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;<span class="comment">   /*! Whether this trunk is currently on hold, meaning that once a station</span></div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;<span class="comment">    *  connects to it, the trunk channel needs to have UNHOLD indicated to it. */</span></div><div class="line"><a name="l01004"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#adbb5ea13ff67a0f65a71edddb0eef433"> 1004</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dbe/structsla__trunk.html#adbb5ea13ff67a0f65a71edddb0eef433">on_hold</a>:1;<span class="comment"></span></div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;<span class="comment">   /*! Mark used during reload processing */</span></div><div class="line"><a name="l01006"></a><span class="lineno"><a class="line" href="../../d4/dbe/structsla__trunk.html#aa328161f4934a6c22ca967fcb5cbc1e1"> 1006</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d4/dbe/structsla__trunk.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a>:1;</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;};</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;<span class="comment"> * \brief A station&#39;s reference to a trunk</span></div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;<span class="comment"> * An sla_station keeps a list of trunk_refs.  This holds metadata about the</span></div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment"> * stations usage of the trunk.</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01015"></a><span class="lineno"><a class="line" href="../../d5/d5a/structsla__trunk__ref.html"> 1015</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> {</div><div class="line"><a name="l01016"></a><span class="lineno"><a class="line" href="../../d5/d5a/structsla__trunk__ref.html#abb60876a7d4fcf1a055b33ade8b3c837"> 1016</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a>) <a class="code" href="../../dd/d4b/structannounce__listitem.html#ac739ddc112a78429124efe57bd171e37">entry</a>;</div><div class="line"><a name="l01017"></a><span class="lineno"><a class="line" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35"> 1017</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>;</div><div class="line"><a name="l01018"></a><span class="lineno"><a class="line" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3"> 1018</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75">sla_trunk_state</a> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l01019"></a><span class="lineno"><a class="line" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7"> 1019</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;<span class="comment"></span></div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;<span class="comment">   /*! Ring timeout to use when this trunk is ringing on this specific</span></div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;<span class="comment">    *  station.  This takes higher priority than a ring timeout set at</span></div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;<span class="comment">    *  the station level. */</span></div><div class="line"><a name="l01023"></a><span class="lineno"><a class="line" href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961"> 1023</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>;<span class="comment"></span></div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="comment">   /*! Ring delay to use when this trunk is ringing on this specific</span></div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;<span class="comment">    *  station.  This takes higher priority than a ring delay set at</span></div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;<span class="comment">    *  the station level. */</span></div><div class="line"><a name="l01027"></a><span class="lineno"><a class="line" href="../../d5/d5a/structsla__trunk__ref.html#a8b9f36f9500c33f5968999247558066e"> 1027</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a>;<span class="comment"></span></div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;<span class="comment">   /*! Mark used during reload processing */</span></div><div class="line"><a name="l01029"></a><span class="lineno"><a class="line" href="../../d5/d5a/structsla__trunk__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1"> 1029</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a>:1;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;};</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a59e909b5a966f969559654af7e78c1f5"> 1032</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a59e909b5a966f969559654af7e78c1f5">sla_stations</a>;</div><div class="line"><a name="l01033"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae22d3998d449264ec9892307921bf465"> 1033</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d2/da9/structao2__container.html">ao2_container</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#ae22d3998d449264ec9892307921bf465">sla_trunks</a>;</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;</div><div class="line"><a name="l01035"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af202f7f4426763c7a42b46fa5b868d2d"> 1035</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../df/d44/app__meetme_8c.html#af202f7f4426763c7a42b46fa5b868d2d">sla_registrar</a>[] = <span class="stringliteral">&quot;SLA&quot;</span>;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;<span class="comment">/*! \brief Event types that can be queued up for the SLA thread */</span></div><div class="line"><a name="l01038"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261a"> 1038</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261a">sla_event_type</a> {<span class="comment"></span></div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;<span class="comment">   /*! A station has put the call on hold */</span></div><div class="line"><a name="l01040"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa23fb375274d3c96370d1a64e418f6a40"> 1040</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa23fb375274d3c96370d1a64e418f6a40">SLA_EVENT_HOLD</a>,<span class="comment"></span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;<span class="comment">   /*! The state of a dial has changed */</span></div><div class="line"><a name="l01042"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aacd2fcc269af2c1a25641c5afa9109ea3"> 1042</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aacd2fcc269af2c1a25641c5afa9109ea3">SLA_EVENT_DIAL_STATE</a>,<span class="comment"></span></div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;<span class="comment">   /*! The state of a ringing trunk has changed */</span></div><div class="line"><a name="l01044"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7"> 1044</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7">SLA_EVENT_RINGING_TRUNK</a>,</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;};</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;</div><div class="line"><a name="l01047"></a><span class="lineno"><a class="line" href="../../da/d0f/structsla__event.html"> 1047</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../da/d0f/structsla__event.html">sla_event</a> {</div><div class="line"><a name="l01048"></a><span class="lineno"><a class="line" href="../../da/d0f/structsla__event.html#a0c10632f8ed1ab1d182c2d1f9ae163fc"> 1048</a></span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261a">sla_event_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l01049"></a><span class="lineno"><a class="line" href="../../da/d0f/structsla__event.html#a0569f66b3f952276c1a8ec5f2ffd5466"> 1049</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../da/d0f/structsla__event.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l01050"></a><span class="lineno"><a class="line" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf"> 1050</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>;</div><div class="line"><a name="l01051"></a><span class="lineno"><a class="line" href="../../da/d0f/structsla__event.html#a4c93c635104bb398f4678dbf6c5b9baf"> 1051</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../da/d0f/structsla__event.html">sla_event</a>) <a class="code" href="../../dd/d4b/structannounce__listitem.html#ac739ddc112a78429124efe57bd171e37">entry</a>;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;};</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;<span class="comment">/*! \brief A station that failed to be dialed</span></div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;<span class="comment"> * \note Only used by the SLA thread. */</span></div><div class="line"><a name="l01056"></a><span class="lineno"><a class="line" href="../../d5/d9c/structsla__failed__station.html"> 1056</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a> {</div><div class="line"><a name="l01057"></a><span class="lineno"><a class="line" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466"> 1057</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l01058"></a><span class="lineno"><a class="line" href="../../d5/d9c/structsla__failed__station.html#ad0eecb6223757f0f347c81c1e2c14eb6"> 1058</a></span>&#160;   <span class="keyword">struct </span>timeval last_try;</div><div class="line"><a name="l01059"></a><span class="lineno"><a class="line" href="../../d5/d9c/structsla__failed__station.html#a7e2dadf817bf07f16914ad0be6eb1126"> 1059</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a>) <a class="code" href="../../dd/d4b/structannounce__listitem.html#ac739ddc112a78429124efe57bd171e37">entry</a>;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;};</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;<span class="comment">/*! \brief A trunk that is ringing */</span></div><div class="line"><a name="l01063"></a><span class="lineno"><a class="line" href="../../d8/dc8/structsla__ringing__trunk.html"> 1063</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> {</div><div class="line"><a name="l01064"></a><span class="lineno"><a class="line" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35"> 1064</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>;<span class="comment"></span></div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;<span class="comment">   /*! The time that this trunk started ringing */</span></div><div class="line"><a name="l01066"></a><span class="lineno"><a class="line" href="../../d8/dc8/structsla__ringing__trunk.html#a5fad56bdd993af8ceb77ab8a83134f0f"> 1066</a></span>&#160;   <span class="keyword">struct </span>timeval ring_begin;</div><div class="line"><a name="l01067"></a><span class="lineno"><a class="line" href="../../d8/dc8/structsla__ringing__trunk.html#a18364cb1f63f203cc32521f0cce7e1a4"> 1067</a></span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a>) timed_out_stations;</div><div class="line"><a name="l01068"></a><span class="lineno"><a class="line" href="../../d8/dc8/structsla__ringing__trunk.html#a9dc6e30f2443d62d7122afcdfe4a4290"> 1068</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a>) <a class="code" href="../../dd/d4b/structannounce__listitem.html#ac739ddc112a78429124efe57bd171e37">entry</a>;</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;};</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;</div><div class="line"><a name="l01071"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0"> 1071</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0">sla_station_hangup</a> {</div><div class="line"><a name="l01072"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0a0d3359532f25486a8dd30e3ef7c90511"> 1072</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0a0d3359532f25486a8dd30e3ef7c90511">SLA_STATION_HANGUP_NORMAL</a>,</div><div class="line"><a name="l01073"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0aac519ad8347eceb83b914cae3bdc8018"> 1073</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0aac519ad8347eceb83b914cae3bdc8018">SLA_STATION_HANGUP_TIMEOUT</a>,</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;};</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;<span class="comment">/*! \brief A station that is ringing */</span></div><div class="line"><a name="l01077"></a><span class="lineno"><a class="line" href="../../dc/d5b/structsla__ringing__station.html"> 1077</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> {</div><div class="line"><a name="l01078"></a><span class="lineno"><a class="line" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466"> 1078</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;<span class="comment"></span></div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;<span class="comment">   /*! The time that this station started ringing */</span></div><div class="line"><a name="l01080"></a><span class="lineno"><a class="line" href="../../dc/d5b/structsla__ringing__station.html#a5fad56bdd993af8ceb77ab8a83134f0f"> 1080</a></span>&#160;   <span class="keyword">struct </span>timeval ring_begin;</div><div class="line"><a name="l01081"></a><span class="lineno"><a class="line" href="../../dc/d5b/structsla__ringing__station.html#a09e26d22392c6b55b559860f6300567d"> 1081</a></span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a>(<a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a>) <a class="code" href="../../dd/d4b/structannounce__listitem.html#ac739ddc112a78429124efe57bd171e37">entry</a>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;};</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;<span class="comment"> * \brief A structure for data used by the sla thread</span></div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span>{<span class="comment"></span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;<span class="comment">   /*! The SLA thread ID */</span></div><div class="line"><a name="l01089"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278"> 1089</a></span>&#160;   pthread_t <a class="code" href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a>;</div><div class="line"><a name="l01090"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9"> 1090</a></span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> <a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>;</div><div class="line"><a name="l01091"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902"> 1091</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>;</div><div class="line"><a name="l01092"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae9dd6bdb4c5c0529195a03583d0d4a8d"> 1092</a></span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a>) <a class="code" href="../../df/d44/app__meetme_8c.html#a33f960245e46142b8ba310967e28d255">ringing_trunks</a>;</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a>) <a class="code" href="../../df/d44/app__meetme_8c.html#a2e36588696fb3cad50de116134abb1ab">ringing_stations</a>;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a>) <a class="code" href="../../df/d44/app__meetme_8c.html#a8dbe3f8834ca6726019815f8a5a6e29c">failed_stations</a>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../da/d0f/structsla__event.html">sla_event</a>) <a class="code" href="../../df/d44/app__meetme_8c.html#add8be99b2331d60c0847870ff76a320a">event_q</a>;</div><div class="line"><a name="l01096"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462"> 1096</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a>:1;<span class="comment"></span></div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">   /*! Attempt to handle CallerID, even though it is known not to work</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="comment">    *  properly in some situations. */</span></div><div class="line"><a name="l01099"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aa0830a7a6de58666b7b6fb189eb8b232"> 1099</a></span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aa0830a7a6de58666b7b6fb189eb8b232">attempt_callerid</a>:1;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;} <a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a> = {</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   .thread = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>,</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;};</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;<span class="comment">/*! \brief The number of audio buffers to be allocated on pseudo channels</span></div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;<span class="comment"> *  when in a conference */</span></div><div class="line"><a name="l01106"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#acf8ac9f199da16a627957d5e9e370c2f"> 1106</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#acf8ac9f199da16a627957d5e9e370c2f">audio_buffers</a>;</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;<span class="comment">/*! \brief Map &#39;volume&#39; levels from -5 through +5 into decibel (dB)</span></div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;<span class="comment"> *    settings for channel drivers.</span></div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;<span class="comment"> *  \note these are not a straight linear-to-dB</span></div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;<span class="comment"> *  conversion... the numbers have been modified</span></div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;<span class="comment"> *  to give the user a better level of adjustability.</span></div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01115"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a6560afe628ae5e59ca4451ce0649ede4"> 1115</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a6560afe628ae5e59ca4451ce0649ede4">gain_map</a>[] = {</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;   -15,</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;   -13,</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;   -10,</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   -6,</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;   0,</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;   0,</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;   0,</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;   6,</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;   10,</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   13,</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;   15,</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;};</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;<span class="comment">/* Routes the various meetme message types to the meetme stasis callback function to turn them into events */</span></div><div class="line"><a name="l01130"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aae8cf07838e581c99be118f2bce03958"> 1130</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#aae8cf07838e581c99be118f2bce03958">meetme_event_message_router</a>;</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;<a class="code" href="../../df/d44/app__meetme_8c.html#abd38bfceed1453b41ba174892fa42d2f">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a>(meetme_join_type);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<a class="code" href="../../df/d44/app__meetme_8c.html#abd38bfceed1453b41ba174892fa42d2f">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a>(meetme_leave_type);</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<a class="code" href="../../df/d44/app__meetme_8c.html#abd38bfceed1453b41ba174892fa42d2f">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a>(meetme_end_type);</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<a class="code" href="../../df/d44/app__meetme_8c.html#abd38bfceed1453b41ba174892fa42d2f">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a>(meetme_mute_type);</div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<a class="code" href="../../df/d44/app__meetme_8c.html#abd38bfceed1453b41ba174892fa42d2f">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a>(meetme_talking_type);</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<a class="code" href="../../df/d44/app__meetme_8c.html#abd38bfceed1453b41ba174892fa42d2f">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a>(meetme_talk_request_type);</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033">meetme_stasis_cb</a>(<span class="keywordtype">void</span> *data, <span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>,</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>);</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853"> 1142</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;{</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;   <span class="keywordflow">if</span> (meetme_event_message_router) {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;      <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5646e370e39cc29f5faa7a30fda11159">stasis_message_router_unsubscribe</a>(meetme_event_message_router);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;      meetme_event_message_router = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   }</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(meetme_join_type);</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(meetme_leave_type);</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(meetme_end_type);</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(meetme_mute_type);</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(meetme_talking_type);</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a>(meetme_talk_request_type);</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;}</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;</div><div class="line"><a name="l01157"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#abdd54fb68b736c31775bab463bd0a137"> 1157</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#abdd54fb68b736c31775bab463bd0a137">meetme_stasis_init</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;{</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(meetme_join_type);</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(meetme_leave_type);</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(meetme_end_type);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(meetme_mute_type);</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(meetme_talking_type);</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a>(meetme_talk_request_type);</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;   meetme_event_message_router = <a class="code" href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a>(</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;      <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#ga34a3ac59fb8d0c49cbc2cb9b87261d31">ast_channel_topic_all</a>());</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;   <span class="keywordflow">if</span> (!meetme_event_message_router) {</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a>();</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;   }</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(meetme_event_message_router,</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;         meetme_join_type(),</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033">meetme_stasis_cb</a>,</div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a>();</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;   }</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(meetme_event_message_router,</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;         meetme_leave_type(),</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033">meetme_stasis_cb</a>,</div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a>();</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;   }</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(meetme_event_message_router,</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;         meetme_end_type(),</div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033">meetme_stasis_cb</a>,</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a>();</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   }</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;</div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(meetme_event_message_router,</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;         meetme_mute_type(),</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033">meetme_stasis_cb</a>,</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a>();</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;   }</div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(meetme_event_message_router,</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;         meetme_talking_type(),</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033">meetme_stasis_cb</a>,</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a>();</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   }</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a>(meetme_event_message_router,</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;         meetme_talk_request_type(),</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033">meetme_stasis_cb</a>,</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a>();</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   }</div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;}</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;</div><div class="line"><a name="l01226"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033"> 1226</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033">meetme_stasis_cb</a>(<span class="keywordtype">void</span> *data, <span class="keyword">struct</span> <a class="code" href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a> *<a class="code" href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a>,</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *<a class="code" href="../../d8/d9e/structmessage.html">message</a>)</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;{</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/df0/structast__channel__blob.html">ast_channel_blob</a> *channel_blob = <a class="code" href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a>(message);</div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *message_type;</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *conference_num;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a>;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_cur;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, channel_text, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, extra_text, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <span class="keywordflow">if</span> (!channel_blob) {</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   }</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   message_type = <a class="code" href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a>(message);</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;   <span class="keywordflow">if</span> (!message_type) {</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   }</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;   <span class="keywordflow">if</span> (message_type == meetme_join_type()) {</div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;      <span class="keyword">event</span> = <span class="stringliteral">&quot;MeetmeJoin&quot;</span>;</div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message_type == meetme_leave_type()) {</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;      <span class="keyword">event</span> = <span class="stringliteral">&quot;MeetmeLeave&quot;</span>;</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message_type == meetme_end_type()) {</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;      <span class="keyword">event</span> = <span class="stringliteral">&quot;MeetmeEnd&quot;</span>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message_type == meetme_mute_type()) {</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;      <span class="keyword">event</span> = <span class="stringliteral">&quot;MeetmeMute&quot;</span>;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message_type == meetme_talking_type()) {</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;      <span class="keyword">event</span> = <span class="stringliteral">&quot;MeetmeTalking&quot;</span>;</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (message_type == meetme_talk_request_type()) {</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;      <span class="keyword">event</span> = <span class="stringliteral">&quot;MeetmeTalkRequest&quot;</span>;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;   }</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;   <span class="keywordflow">if</span> (!event) {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;   }</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;   conference_num = <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(channel_blob-&gt;<a class="code" href="../../db/df0/structast__channel__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <span class="stringliteral">&quot;Meetme&quot;</span>));</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;   <span class="keywordflow">if</span> (!conference_num) {</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a>(0);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;   }</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   status = <a class="code" href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a>(<a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(channel_blob-&gt;<a class="code" href="../../db/df0/structast__channel__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <span class="stringliteral">&quot;status&quot;</span>));</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;   <span class="keywordflow">if</span> (status) {</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;      <a class="code" href="../../db/d45/manager_8h.html#a4e23b878e759dadd1e466a63193abba0">ast_str_append_event_header</a>(&amp;extra_text, <span class="stringliteral">&quot;Status&quot;</span>, status);</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   }</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;   <span class="keywordflow">if</span> (channel_blob-&gt;<a class="code" href="../../db/df0/structast__channel__blob.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>) {</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;      channel_text = <a class="code" href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a>(channel_blob-&gt;<a class="code" href="../../db/df0/structast__channel__blob.html#a36584c0251e54a7af4892d63f7a28c77">snapshot</a>);</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   }</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <span class="keywordflow">if</span> ((json_cur = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(channel_blob-&gt;<a class="code" href="../../db/df0/structast__channel__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <span class="stringliteral">&quot;user&quot;</span>))) {</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      <span class="keywordtype">int</span> user_number = <a class="code" href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a>(json_cur);</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *, user_prop_str, <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(32), <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>);</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;      <span class="keywordflow">if</span> (!user_prop_str) {</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;      }</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;user_prop_str, 0, <span class="stringliteral">&quot;%d&quot;</span>, user_number);</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;      <a class="code" href="../../db/d45/manager_8h.html#a4e23b878e759dadd1e466a63193abba0">ast_str_append_event_header</a>(&amp;extra_text, <span class="stringliteral">&quot;User&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(user_prop_str));</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      <span class="keywordflow">if</span> ((json_cur = <a class="code" href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a>(channel_blob-&gt;<a class="code" href="../../db/df0/structast__channel__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">blob</a>, <span class="stringliteral">&quot;duration&quot;</span>))) {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;         <span class="keywordtype">int</span> duration = <a class="code" href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a>(json_cur);</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;user_prop_str, 0, <span class="stringliteral">&quot;%d&quot;</span>, duration);</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;         <a class="code" href="../../db/d45/manager_8h.html#a4e23b878e759dadd1e466a63193abba0">ast_str_append_event_header</a>(&amp;extra_text, <span class="stringliteral">&quot;Duration&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(user_prop_str));</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;      }</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;      json_cur = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   }</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   <a class="code" href="../../db/d45/manager_8h.html#a1ef0ee0044dbbeb4c3a5abc6c046b208">manager_event</a>(<a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, event,</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;      <span class="stringliteral">&quot;Meetme: %s\r\n&quot;</span></div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span>,</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;      conference_num,</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;      channel_text ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(channel_text) : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;      extra_text ? <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(extra_text) : <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;}</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="comment"> * \brief Build a json object from a status value for inclusion in json extras for meetme_stasis_generate_msg</span></div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;<span class="comment"> * \param on if true, then status is on. Otherwise status is off</span></div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;<span class="comment"> * \retval NULL on failure to allocate the JSON blob.</span></div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;<span class="comment"> * \retval pointer to the JSON blob if successful.</span></div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01324"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1f74b6bae5e30f6a05295e3196986a44"> 1324</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a1f74b6bae5e30f6a05295e3196986a44">status_to_json</a>(<span class="keywordtype">int</span> on)</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;{</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>,</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;      <span class="stringliteral">&quot;status&quot;</span>, on ? <span class="stringliteral">&quot;on&quot;</span> : <span class="stringliteral">&quot;off&quot;</span>);</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;   <span class="keywordflow">return</span> json_object;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;}</div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment"> * \brief Generate a stasis message associated with a meetme event</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="comment"> * \since 12.0.0</span></div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;<span class="comment"> * \param meetme_confere The conference responsible for generating this message</span></div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;<span class="comment"> * \param chan The channel involved in the message (NULL allowed)</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;<span class="comment"> * \param user The conference user involved in the message (NULL allowed)</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;<span class="comment"> * \param message_type the type the stasis message being generated</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;<span class="comment"> * \param extras Additional json fields desired for inclusion</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01343"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c"> 1343</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *meetme_conference, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan,</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keyword">struct</span> <a class="code" href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a> *message_type, <span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *extras)</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;{</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d55/structstasis__message.html">stasis_message</a> *, msg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, json_object, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;   json_object = <a class="code" href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a>(<span class="stringliteral">&quot;{s: s}&quot;</span>,</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;      <span class="stringliteral">&quot;Meetme&quot;</span>, meetme_conference-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;   <span class="keywordflow">if</span> (!json_object) {</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;   }</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <span class="keywordflow">if</span> (extras) {</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;      <a class="code" href="../../d4/d05/json_8h.html#af7ffb5efb418e60eaa2b3d06a4c6e458">ast_json_object_update</a>(json_object, extras);</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;   }</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;   <span class="keywordflow">if</span> (user) {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;      <span class="keyword">struct </span>timeval now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      <span class="keywordtype">long</span> duration = (long)(now.tv_sec - user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a12f01daf47a1827d4ae33b345da7d46b">jointime</a>);</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_user;</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *json_user_duration;</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;      json_user = <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>);</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      <span class="keywordflow">if</span> (!json_user || <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(json_object, <span class="stringliteral">&quot;user&quot;</span>, json_user)) {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;      }</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;</div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;      <span class="keywordflow">if</span> (duration &gt; 0) {</div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;         json_user_duration = <a class="code" href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a>(duration);</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;         <span class="keywordflow">if</span> (!json_user_duration</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;            || <a class="code" href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a>(json_object, <span class="stringliteral">&quot;duration&quot;</span>, json_user_duration)) {</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;         }</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;      }</div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;   }</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;   }</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;   msg = <a class="code" href="../../df/deb/group__StasisTopicsAndMessages.html#gae23eb2907ce7b59817fc0e47f09abf42">ast_channel_blob_create</a>(chan, message_type, json_object);</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;   }</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;   <span class="keywordflow">if</span> (!msg) {</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;   }</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;   <a class="code" href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a>(<a class="code" href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a>(chan), msg);</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;}</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a977a38245885ede0c3accf2f56fc57f8">admin_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data);</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a3352a8a09d96d39d97562f874eda91fe">recordthread</a>(<span class="keywordtype">void</span> *<a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>);</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;</div><div class="line"><a name="l01398"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ade602fe2feec1303e2e8f31ae77a5ee6"> 1398</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#ade602fe2feec1303e2e8f31ae77a5ee6">istalking</a>(<span class="keywordtype">int</span> x)</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;{</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   <span class="keywordflow">if</span> (x &gt; 0)</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;(talking)&quot;</span>;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (x &lt; 0)</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;(unmonitored)&quot;</span>;</div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;(not talking)&quot;</span>;</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;}</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a274bd5a5386b1ea0514ec87feb3d8d85"> 1408</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a274bd5a5386b1ea0514ec87feb3d8d85">careful_write</a>(<span class="keywordtype">int</span> fd, <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data, <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>, <span class="keywordtype">int</span> block)</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;{</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <span class="keywordflow">while</span> (len) {</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;      <span class="keywordflow">if</span> (block) {</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;         x = DAHDI_IOMUX_WRITE | DAHDI_IOMUX_SIGEVENT;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;         res = ioctl(fd, DAHDI_IOMUX, &amp;x);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;      } <span class="keywordflow">else</span></div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;         res = 0;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      <span class="keywordflow">if</span> (res &gt;= 0)</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;         res = write(fd, data, len);</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      <span class="keywordflow">if</span> (res &lt; 1) {</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a> != EAGAIN) {</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to write audio data to conference: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;         } <span class="keywordflow">else</span></div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;            <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;      }</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      len -= res;</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;      data += res;</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;   }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;}</div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;</div><div class="line"><a name="l01435"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4a7eef0979d0a4b9267d5bc5d98fde30"> 1435</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a4a7eef0979d0a4b9267d5bc5d98fde30">set_talk_volume</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keywordtype">int</span> <a class="code" href="../../da/d4c/structvolume.html">volume</a>)</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;{</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;   <span class="keywordtype">char</span> gain_adjust;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;   <span class="comment">/* attempt to make the adjustment in the channel driver;</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;<span class="comment">      if successful, don&#39;t adjust in the frame reading routine</span></div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;   gain_adjust = gain_map[volume + 5];</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a3e9274bcddca58b613f4e676b9943c03">AST_OPTION_RXGAIN</a>, &amp;gain_adjust, <span class="keyword">sizeof</span>(gain_adjust), 0);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;}</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;</div><div class="line"><a name="l01447"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a8187d6c217b26da3f3dccc3ce846325f"> 1447</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a8187d6c217b26da3f3dccc3ce846325f">set_listen_volume</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keywordtype">int</span> <a class="code" href="../../da/d4c/structvolume.html">volume</a>)</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;{</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;   <span class="keywordtype">char</span> gain_adjust;</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;   <span class="comment">/* attempt to make the adjustment in the channel driver;</span></div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;<span class="comment">      if successful, don&#39;t adjust in the frame reading routine</span></div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;   gain_adjust = gain_map[volume + 5];</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#abcf55626860f173284cafa474946d9b2">AST_OPTION_TXGAIN</a>, &amp;gain_adjust, <span class="keyword">sizeof</span>(gain_adjust), 0);</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;}</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4780ccb62eb3184ace7cfae1af267115"> 1459</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a4780ccb62eb3184ace7cfae1af267115">tweak_volume</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d4c/structvolume.html">volume</a> *vol, <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780b">volume_action</a> action)</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;{</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;   <span class="keywordflow">switch</span> (action) {</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>:</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      <span class="keywordflow">switch</span> (vol-&gt;<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>) {</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;      <span class="keywordflow">case</span> 5:</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;         vol-&gt;<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a> = 2;</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      <span class="keywordflow">case</span> -2:</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;         vol-&gt;<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a> = 0;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;         vol-&gt;<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>++;</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;      }</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a>:</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      <span class="keywordflow">switch</span> (vol-&gt;<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>) {</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;      <span class="keywordflow">case</span> -5:</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;      <span class="keywordflow">case</span> 2:</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;         vol-&gt;<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a> = 0;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;      <span class="keywordflow">case</span> 0:</div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;         vol-&gt;<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a> = -2;</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;         vol-&gt;<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>--;</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;      }</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;   }</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;}</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;</div><div class="line"><a name="l01494"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5"> 1494</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780b">volume_action</a> action)</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;{</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4780ccb62eb3184ace7cfae1af267115">tweak_volume</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">talk</a>, action);</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;   <span class="comment">/* attempt to make the adjustment in the channel driver;</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;<span class="comment">      if successful, don&#39;t adjust in the frame reading routine</span></div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d44/app__meetme_8c.html#a4a7eef0979d0a4b9267d5bc5d98fde30">set_talk_volume</a>(user, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">talk</a>.<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>))</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">talk</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a> = 0;</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">talk</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a> = user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">talk</a>.<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;}</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;</div><div class="line"><a name="l01506"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0"> 1506</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780b">volume_action</a> action)</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;{</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4780ccb62eb3184ace7cfae1af267115">tweak_volume</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>, action);</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;   <span class="comment">/* attempt to make the adjustment in the channel driver;</span></div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;<span class="comment">      if successful, don&#39;t adjust in the frame reading routine</span></div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d44/app__meetme_8c.html#a8187d6c217b26da3f3dccc3ce846325f">set_listen_volume</a>(user, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>))</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a> = 0;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a> = user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;}</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;</div><div class="line"><a name="l01518"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a57fc53d582772f2125adafaabe596b01"> 1518</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a57fc53d582772f2125adafaabe596b01">reset_volumes</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;{</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;   <span class="keywordtype">signed</span> <span class="keywordtype">char</span> zero_volume = 0;</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#abcf55626860f173284cafa474946d9b2">AST_OPTION_TXGAIN</a>, &amp;zero_volume, <span class="keyword">sizeof</span>(zero_volume), 0);</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a3e9274bcddca58b613f4e676b9943c03">AST_OPTION_RXGAIN</a>, &amp;zero_volume, <span class="keyword">sizeof</span>(zero_volume), 0);</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;}</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;</div><div class="line"><a name="l01526"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a645090dd89fa3f8aaff60ea7eb38be18"> 1526</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a645090dd89fa3f8aaff60ea7eb38be18">conf_play</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>, <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49b">entrance_sound</a> sound)</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;{</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *data;</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;   <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;CONFPLAY&quot;</span>, <span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;      <span class="stringliteral">&quot;Conference: %s\r\n&quot;</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;      <span class="stringliteral">&quot;Marked: %d&quot;</span>,</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan),</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;      conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>,</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>);</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan))</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;      res = <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(chan);</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;   <span class="keywordflow">switch</span>(sound) {</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49ba951ab68bb8f7daafb78951107080904e">ENTER</a>:</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      data = <a class="code" href="../../d0/d00/enter_8h.html#ada5f47456e76e78df8e950dd2b384e80">enter</a>;</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;      len = <span class="keyword">sizeof</span>(<a class="code" href="../../d0/d00/enter_8h.html#ada5f47456e76e78df8e950dd2b384e80">enter</a>);</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49bae09e07839103de682cb13fa773793fc0">LEAVE</a>:</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;      data = <a class="code" href="../../da/dd8/leave_8h.html#a17d53de1e565d7ea0537d5ec21b60472">leave</a>;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;      len = <span class="keyword">sizeof</span>(<a class="code" href="../../da/dd8/leave_8h.html#a17d53de1e565d7ea0537d5ec21b60472">leave</a>);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;      data = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;      len = 0;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;   }</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;   <span class="keywordflow">if</span> (data) {</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a274bd5a5386b1ea0514ec87feb3d8d85">careful_write</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, data, len, 1);</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;   }</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;   <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;}</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a0b233f4688b41699c862089f1fc5e613"> 1567</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a0b233f4688b41699c862089f1fc5e613">user_no_cmp</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;{</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;   <span class="keywordtype">int</span> *<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a> = arg;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;   <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a> == *user_no) {</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>);</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;   }</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;}</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;</div><div class="line"><a name="l01579"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a289c5ffee97869ba1b70fd91278f2957"> 1579</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a289c5ffee97869ba1b70fd91278f2957">user_max_cmp</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;{</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;   <span class="keywordtype">int</span> *max_no = arg;</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;   <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a> &gt; *max_no) {</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;      *max_no = user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>;</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;   }</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;}</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;<span class="comment"></span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;<span class="comment"> * \brief Find or create a conference</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;<span class="comment"> * \param confno The conference name/number</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;<span class="comment"> * \param pin The regular user pin</span></div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;<span class="comment"> * \param pinadmin The admin pin</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;<span class="comment"> * \param make Make the conf if it doesn&#39;t exist</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;<span class="comment"> * \param dynamic Mark the newly created conference as dynamic</span></div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;<span class="comment"> * \param refcount How many references to mark on the conference</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;<span class="comment"> * \param chan The asterisk channel</span></div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;<span class="comment"> * \param test</span></div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;<span class="comment"> * \return A pointer to the conference struct, or NULL if it wasn&#39;t found and</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;<span class="comment"> *         make or dynamic were not set.</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l01606"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403"> 1606</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#ad3479638ded235d29e4bbba475abe931">pin</a>,</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>, <span class="keywordtype">int</span> make, <span class="keywordtype">int</span> dynamic, <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a>,</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d9/d79/structast__test.html">ast_test</a> *<a class="code" href="../../d8/d89/structtest.html">test</a>)</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;{</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf;</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;   <span class="keyword">struct </span>dahdi_confinfo dahdic = { 0, };</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;   <span class="keywordtype">int</span> confno_int = 0;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap_slin = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, list) {</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;      <span class="keywordflow">if</span> (!strcmp(confno, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>))</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;   }</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   <span class="keywordflow">if</span> (cnf || (!make &amp;&amp; !dynamic) || !cap_slin)</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;      <span class="keywordflow">goto</span> cnfout;</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap_slin, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0);</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;   <span class="comment">/* Make a new one */</span></div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   cnf = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*cnf));</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;   <span class="keywordflow">if</span> (!cnf) {</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;      <span class="keywordflow">goto</span> cnfout;</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;   }</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a> = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;      <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a0b233f4688b41699c862089f1fc5e613">user_no_cmp</a>);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;   <span class="keywordflow">if</span> (!cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>) {</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;      <span class="keywordflow">goto</span> cnfout;</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;   }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>);</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>);</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#aa9af2bfdaafa007e201fc6f01dfd9f68">recordthread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">recordthreadlock</a>);</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a32ad66f5110971b6c12b3e7e5d700ed6">announcethread</a> = <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>;</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2d6ea8e1bd00fa11be2f422d8949e33e">announcethreadlock</a>);</div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, confno, <span class="keyword">sizeof</span>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>));</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad3479638ded235d29e4bbba475abe931">pin</a>, pin, <span class="keyword">sizeof</span>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad3479638ded235d29e4bbba475abe931">pin</a>));</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>, pinadmin, <span class="keyword">sizeof</span>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>));</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ae42dbdf188676f5840d98c4427e75a4f">uniqueid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan), <span class="keyword">sizeof</span>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ae42dbdf188676f5840d98c4427e75a4f">uniqueid</a>));</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   <span class="comment">/* Setup a new dahdi conference */</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   dahdic.confno = -1;</div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   dahdic.confmode = DAHDI_CONF_CONFANN | DAHDI_CONF_CONFANNMON;</div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a> = open(<span class="stringliteral">&quot;/dev/dahdi/pseudo&quot;</span>, O_RDWR);</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   <span class="keywordflow">if</span> (cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &lt; 0 || ioctl(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a>, DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;      <span class="keywordflow">if</span> (test) {</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;         <span class="comment">/* if we are creating a conference for a unit test, it is not neccesary</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;<span class="comment">          * to open a pseudo channel, so, if we fail continue creating</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;<span class="comment">          * the conference. */</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;         <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Unable to open DAHDI pseudo device\n&quot;</span>);</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to open DAHDI pseudo device\n&quot;</span>);</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;         <span class="keywordflow">if</span> (cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &gt;= 0)</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;            close(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a>);</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, -1);</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>);</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>);</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">recordthreadlock</a>);</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2d6ea8e1bd00fa11be2f422d8949e33e">announcethreadlock</a>);</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cnf);</div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;         cnf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;         <span class="keywordflow">goto</span> cnfout;</div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;      }</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;   }</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">dahdiconf</a> = dahdic.confno;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;   <span class="comment">/* Setup a new channel for playback of audio files */</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(<span class="stringliteral">&quot;DAHDI&quot;</span>, cap_slin, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, <span class="stringliteral">&quot;pseudo&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;   <span class="keywordflow">if</span> (cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>) {</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;      dahdic.chan = 0;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;      dahdic.confno = cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">dahdiconf</a>;</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;      dahdic.confmode = DAHDI_CONF_CONFANN | DAHDI_CONF_CONFANNMON;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;      <span class="keywordflow">if</span> (ioctl(<a class="code" href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, 0), DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;         <span class="keywordflow">if</span> (test) {</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a>(test, <span class="stringliteral">&quot;Error setting conference on pseudo channel\n&quot;</span>);</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;         }</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error setting conference\n&quot;</span>);</div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;         <span class="keywordflow">if</span> (cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;            close(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a>);</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, -1);</div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>);</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>);</div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">recordthreadlock</a>);</div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2d6ea8e1bd00fa11be2f422d8949e33e">announcethreadlock</a>);</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cnf);</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;         cnf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;         <span class="keywordflow">goto</span> cnfout;</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;      }</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;   }</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;   <span class="comment">/* Fill the conference struct */</span></div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">start</a> = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad7b1f4e72963d085053fb4ef80e9fb33">maxusers</a> = 0x7fffffff;</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">isdynamic</a> = dynamic ? 1 : 0;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Created MeetMe conference %d for conference &#39;%s&#39;\n&quot;</span>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">dahdiconf</a>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, list);</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;   <span class="comment">/* Reserve conference number in map */</span></div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <span class="keywordflow">if</span> ((sscanf(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;confno_int) == 1) &amp;&amp; (confno_int &gt;= 0 &amp;&amp; confno_int &lt; 1024))</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;      conf_map[confno_int] = 1;</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;cnfout:</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap_slin);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;   <span class="keywordflow">if</span> (cnf)</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a>, refcount);</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;   <span class="keywordflow">return</span> cnf;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;}</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;</div><div class="line"><a name="l01725"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a5af7f58f66a440eaf65e3d922d169d99"> 1725</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a5af7f58f66a440eaf65e3d922d169d99">complete_confno</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;{</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf;</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;   <span class="keywordtype">char</span> *ret = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;   <span class="keywordtype">int</span> which = 0;</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(word);</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, <a class="code" href="../../d8/d44/structast__conference.html#a46885edd8fad62a4089c021a1d810740">list</a>) {</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      <span class="keywordflow">if</span> (!strncmp(word, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, len) &amp;&amp; ++which &gt; state) {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;         <span class="comment">/* dup before releasing the lock */</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;         ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;      }</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   }</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;}</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;</div><div class="line"><a name="l01744"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af5bfcbf150b2be41930ad7ef51619cd1"> 1744</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#af5bfcbf150b2be41930ad7ef51619cd1">complete_userno</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;{</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;   <span class="keywordtype">char</span> usrno[50];</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> iter;</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *usr;</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   <span class="keywordtype">char</span> *ret = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;   <span class="keywordtype">int</span> which = 0;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(word);</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;   iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, 0);</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;   <span class="keywordflow">for</span> (; (usr = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;iter)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(usr, -1)) {</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;      snprintf(usrno, <span class="keyword">sizeof</span>(usrno), <span class="stringliteral">&quot;%d&quot;</span>, usr-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>);</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;      <span class="keywordflow">if</span> (!strncmp(word, usrno, len) &amp;&amp; ++which &gt; state) {</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(usr, -1);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;         ret = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(usrno);</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;      }</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   }</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;iter);</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;}</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;</div><div class="line"><a name="l01766"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a91e9b88449fec740c2ef9274f482b60e"> 1766</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a91e9b88449fec740c2ef9274f482b60e">complete_meetmecmd_mute_kick</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *line, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, <span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;{</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <span class="keywordflow">if</span> (pos == 2) {</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a5af7f58f66a440eaf65e3d922d169d99">complete_confno</a>(word, state);</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   }</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;   <span class="keywordflow">if</span> (pos == 3) {</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a> = strlen(word);</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;      <span class="keywordtype">char</span> *ret = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;      <span class="keywordtype">char</span> *saved = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;      <span class="keywordtype">char</span> *myline;</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;      <span class="keywordtype">char</span> *confno;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf;</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(word, <span class="stringliteral">&quot;all&quot;</span>, len)) {</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;         <span class="keywordflow">if</span> (state == 0) {</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;all&quot;</span>);</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;         }</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;         --<a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;      }</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;      <span class="comment">/* Extract the confno from the command line. */</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      myline = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(line);</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;      strtok_r(myline, <span class="stringliteral">&quot; &quot;</span>, &amp;saved);</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;      strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot; &quot;</span>, &amp;saved);</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;      confno = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot; &quot;</span>, &amp;saved);</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, <a class="code" href="../../d8/d44/structast__conference.html#a46885edd8fad62a4089c021a1d810740">list</a>) {</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;         <span class="keywordflow">if</span> (!strcmp(confno, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>)) {</div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;            ret = <a class="code" href="../../df/d44/app__meetme_8c.html#af5bfcbf150b2be41930ad7ef51619cd1">complete_userno</a>(cnf, word, state);</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;         }</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;      }</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;      <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;   }</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;}</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;</div><div class="line"><a name="l01806"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aae0ef2cfd78584da1e5520fa4cdfa85f"> 1806</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#aae0ef2cfd78584da1e5520fa4cdfa85f">complete_meetmecmd_lock</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, <span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;{</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;   <span class="keywordflow">if</span> (pos == 2) {</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a5af7f58f66a440eaf65e3d922d169d99">complete_confno</a>(word, state);</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   }</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;}</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;</div><div class="line"><a name="l01814"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a6b83efd16d32463a4514e17f944423b3"> 1814</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a6b83efd16d32463a4514e17f944423b3">complete_meetmecmd_list</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *line, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a>, <span class="keywordtype">int</span> pos, <span class="keywordtype">int</span> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;{</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;   <span class="keywordflow">if</span> (pos == 2) {</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;      len = strlen(word);</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(word, <a class="code" href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">STR_CONCISE</a>, len)) {</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;         <span class="keywordflow">if</span> (state == 0) {</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">STR_CONCISE</a>);</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;         }</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;         --<a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;      }</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a5af7f58f66a440eaf65e3d922d169d99">complete_confno</a>(word, state);</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;   }</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;   <span class="keywordflow">if</span> (pos == 3 &amp;&amp; state == 0) {</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;      <span class="keywordtype">char</span> *saved = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;      <span class="keywordtype">char</span> *myline;</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>;</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      <span class="comment">/* Extract the confno from the command line. */</span></div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;      myline = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(line);</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;      strtok_r(myline, <span class="stringliteral">&quot; &quot;</span>, &amp;saved);</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;      strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot; &quot;</span>, &amp;saved);</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;      confno = strtok_r(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <span class="stringliteral">&quot; &quot;</span>, &amp;saved);</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(confno, <a class="code" href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">STR_CONCISE</a>)) {</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;         <span class="comment">/* There is nothing valid in this position now. */</span></div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;      }</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      len = strlen(word);</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;      <span class="keywordflow">if</span> (!strncasecmp(word, <a class="code" href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">STR_CONCISE</a>, len)) {</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">STR_CONCISE</a>);</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      }</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;   }</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;}</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;</div><div class="line"><a name="l01853"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a5f272b0802dbeb3b9592c16839e4a134"> 1853</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a5f272b0802dbeb3b9592c16839e4a134">meetme_show_cmd</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;{</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;   <span class="comment">/* Process the command */</span></div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf;</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;   <span class="keywordtype">int</span> hr, <a class="code" href="../../dc/dc2/f2c_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>, sec;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a> = 0;</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;   time_t now;</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;<span class="preprocessor">#define MC_HEADER_FORMAT &quot;%-14s %-14s %-10s %-8s  %-8s  %-6s\n&quot;</span></div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;<span class="preprocessor">#define MC_DATA_FORMAT &quot;%-12.12s   %4.4d        %4.4s       %02d:%02d:%02d  %-8s  %-6s\n&quot;</span></div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;meetme list&quot;</span>;</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;         <span class="stringliteral">&quot;Usage: meetme list [&lt;confno&gt;] [&quot;</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">STR_CONCISE</a> <span class="stringliteral">&quot;]\n&quot;</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;         <span class="stringliteral">&quot;       List all conferences or a specific conference.\n&quot;</span>;</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a6b83efd16d32463a4514e17f944423b3">complete_meetmecmd_list</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;   }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 2 || (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 3 &amp;&amp; !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2], <a class="code" href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">STR_CONCISE</a>))) {</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;      <span class="comment">/* List all the conferences */</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      <span class="keywordtype">int</span> concise = (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 3);</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *marked_users;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;      <span class="keywordflow">if</span> (!(marked_users = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(30))) {</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;      }</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;      now = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>)) {</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;         <span class="keywordflow">if</span> (!concise) {</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No active MeetMe conferences.\n&quot;</span>);</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;         }</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;         <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(marked_users);</div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;      }</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;      <span class="keywordflow">if</span> (!concise) {</div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#ac5a6cd9121b3a70a3b1d4f04da316913">MC_HEADER_FORMAT</a>, <span class="stringliteral">&quot;Conf Num&quot;</span>, <span class="stringliteral">&quot;Parties&quot;</span>, <span class="stringliteral">&quot;Marked&quot;</span>, <span class="stringliteral">&quot;Activity&quot;</span>, <span class="stringliteral">&quot;Creation&quot;</span>, <span class="stringliteral">&quot;Locked&quot;</span>);</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      }</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, list) {</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;         hr = (now - cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">start</a>) / 3600;</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;         min = ((now - cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">start</a>) % 3600) / 60;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;         sec = (now - cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">start</a>) % 60;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;         <span class="keywordflow">if</span> (!concise) {</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;            <span class="keywordflow">if</span> (cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a> == 0) {</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;marked_users, 0, <span class="stringliteral">&quot;N/A &quot;</span>);</div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;marked_users, 0, <span class="stringliteral">&quot;%4.4d&quot;</span>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>);</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;            }</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a9fac8c38ea4be0b32e78fb14fa907dd0">MC_DATA_FORMAT</a>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>,</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(marked_users), hr, min, sec,</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;               cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">isdynamic</a> ? <span class="stringliteral">&quot;Dynamic&quot;</span> : <span class="stringliteral">&quot;Static&quot;</span>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%s!%d!%d!%02d:%02d:%02d!%d!%d\n&quot;</span>,</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;               cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>,</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;               cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>,</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;               cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>,</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;               hr, min, sec,</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;               cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">isdynamic</a>,</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;               cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a>);</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;         }</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;         total += cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>;</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;      }</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;      <span class="keywordflow">if</span> (!concise) {</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;* Total number of MeetMe users: %d\n&quot;</span>, total);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;      }</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(marked_users);</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;   }</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 3 || (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4 &amp;&amp; !strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <a class="code" href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">STR_CONCISE</a>))) {</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> user_iter;</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;      <span class="keywordtype">int</span> concise = (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> == 4);</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      <span class="comment">/* List all the users in a conference */</span></div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>)) {</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;         <span class="keywordflow">if</span> (!concise) {</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No active MeetMe conferences.\n&quot;</span>);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;         }</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;      }</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;      <span class="comment">/* Find the right conference */</span></div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, list) {</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;         <span class="keywordflow">if</span> (strcmp(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]) == 0) {</div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;         }</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;      }</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      <span class="keywordflow">if</span> (!cnf) {</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;         <span class="keywordflow">if</span> (!concise)</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;No such conference: %s.\n&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;      }</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;      <span class="comment">/* Show all the users */</span></div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;      time(&amp;now);</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;      user_iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, 0);</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;      <span class="keywordflow">while</span>((user = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;user_iter))) {</div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;         hr = (now - user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a12f01daf47a1827d4ae33b345da7d46b">jointime</a>) / 3600;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;         min = ((now - user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a12f01daf47a1827d4ae33b345da7d46b">jointime</a>) % 3600) / 60;</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;         sec = (now - user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a12f01daf47a1827d4ae33b345da7d46b">jointime</a>) % 60;</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;         <span class="keywordflow">if</span> (!concise) {</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;User #: %-2.2d %12.12s %-20.20s Channel: %s %s %s %s %s %s %02d:%02d:%02d\n&quot;</span>,</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;               user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>,</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>),</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&lt;no name&gt;&quot;</span>),</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>) ? <span class="stringliteral">&quot;(Admin)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) ? <span class="stringliteral">&quot;(Listen only)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;               user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> ? <span class="stringliteral">&quot;(Admin Muted)&quot;</span> : user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a> ? <span class="stringliteral">&quot;(Muted)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;               user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a> ? <span class="stringliteral">&quot;(Request to Talk)&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;               <a class="code" href="../../df/d44/app__meetme_8c.html#ade602fe2feec1303e2e8f31ae77a5ee6">istalking</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a>), hr, min, sec);</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;            <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%d!%s!%s!%s!%s!%s!%s!%s!%d!%02d:%02d:%02d\n&quot;</span>,</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;               user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>,</div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>) ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;               user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>) ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;               user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a> ? <span class="stringliteral">&quot;1&quot;</span> : <span class="stringliteral">&quot;&quot;</span>,</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;               user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a>, hr, min, sec);</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;         }</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, -1);</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;      }</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;user_iter);</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      <span class="keywordflow">if</span> (!concise) {</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;%d users in that conference.\n&quot;</span>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>);</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;      }</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;   }</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;}</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;</div><div class="line"><a name="l01996"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#adfc5a1ea28b621400e2838986493d624"> 1996</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#adfc5a1ea28b621400e2838986493d624">meetme_cmd_helper</a>(<span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;{</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;   <span class="comment">/* Process the command */</span></div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *cmdline;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;   <span class="comment">/* Max confno length */</span></div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;   <span class="keywordflow">if</span> (!(cmdline = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#aa062a857f2cbc03c82512074e6c68afd">MAX_CONFNUM</a>))) {</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a>;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;   }</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;cmdline, 0, <span class="stringliteral">&quot;%s&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[2]);  <span class="comment">/* Argv 2: conference number */</span></div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[1], <span class="stringliteral">&quot;lock&quot;</span>)) {</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[1], <span class="stringliteral">&quot;lock&quot;</span>) == 0) {</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;         <span class="comment">/* Lock */</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;cmdline, 0, <span class="stringliteral">&quot;,L&quot;</span>);</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;         <span class="comment">/* Unlock */</span></div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;cmdline, 0, <span class="stringliteral">&quot;,l&quot;</span>);</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;      }</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[1], <span class="stringliteral">&quot;mute&quot;</span>)) {</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[1], <span class="stringliteral">&quot;mute&quot;</span>) == 0) {</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;         <span class="comment">/* Mute */</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;         <span class="keywordflow">if</span> (strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;all&quot;</span>) == 0) {</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;cmdline, 0, <span class="stringliteral">&quot;,N&quot;</span>);</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;cmdline, 0, <span class="stringliteral">&quot;,M,%s&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;         }</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;         <span class="comment">/* Unmute */</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;         <span class="keywordflow">if</span> (strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;all&quot;</span>) == 0) {</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;cmdline, 0, <span class="stringliteral">&quot;,n&quot;</span>);</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;cmdline, 0, <span class="stringliteral">&quot;,m,%s&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;         }</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;      }</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[1], <span class="stringliteral">&quot;kick&quot;</span>) == 0) {</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3], <span class="stringliteral">&quot;all&quot;</span>) == 0) {</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;         <span class="comment">/* Kick all */</span></div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;cmdline, 0, <span class="stringliteral">&quot;,K&quot;</span>);</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;         <span class="comment">/* Kick a single user */</span></div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;cmdline, 0, <span class="stringliteral">&quot;,k,%s&quot;</span>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">argv</a>[3]);</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;      }</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;      <span class="comment">/*</span></div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;<span class="comment">       * Should never get here because it is already filtered by the</span></div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;<span class="comment">       * callers.</span></div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;<span class="comment">       */</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cmdline);</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   }</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Cmdline: %s\n&quot;</span>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(cmdline));</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a977a38245885ede0c3accf2f56fc57f8">admin_exec</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(cmdline));</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cmdline);</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;}</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;</div><div class="line"><a name="l02056"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a5d4909119c17d1ab7fd2f1283f56abe4"> 2056</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a5d4909119c17d1ab7fd2f1283f56abe4">meetme_lock_cmd</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;{</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;meetme {lock|unlock}&quot;</span>;</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;         <span class="stringliteral">&quot;Usage: meetme lock|unlock &lt;confno&gt;\n&quot;</span></div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;         <span class="stringliteral">&quot;       Lock or unlock a conference to new users.\n&quot;</span>;</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aae0ef2cfd78584da1e5520fa4cdfa85f">complete_meetmecmd_lock</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;   }</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 3) {</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;   }</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#adfc5a1ea28b621400e2838986493d624">meetme_cmd_helper</a>(a);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;}</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;</div><div class="line"><a name="l02076"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aa46b0a964293d7efe152f2cc786ed888"> 2076</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#aa46b0a964293d7efe152f2cc786ed888">meetme_kick_cmd</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;{</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;meetme kick&quot;</span>;</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;         <span class="stringliteral">&quot;Usage: meetme kick &lt;confno&gt; all|&lt;userno&gt;\n&quot;</span></div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;         <span class="stringliteral">&quot;       Kick a conference or a user in a conference.\n&quot;</span>;</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a91e9b88449fec740c2ef9274f482b60e">complete_meetmecmd_mute_kick</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;   }</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;   }</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#adfc5a1ea28b621400e2838986493d624">meetme_cmd_helper</a>(a);</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;}</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;</div><div class="line"><a name="l02096"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a52b639668f922212a3583f91da84e5ae"> 2096</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a52b639668f922212a3583f91da84e5ae">meetme_mute_cmd</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;{</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;meetme {mute|unmute}&quot;</span>;</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;         <span class="stringliteral">&quot;Usage: meetme mute|unmute &lt;confno&gt; all|&lt;userno&gt;\n&quot;</span></div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;         <span class="stringliteral">&quot;       Mute or unmute a conference or a user in a conference.\n&quot;</span>;</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a91e9b88449fec740c2ef9274f482b60e">complete_meetmecmd_mute_kick</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">line</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">word</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">pos</a>, a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">n</a>);</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;   }</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;   <span class="keywordflow">if</span> (a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">argc</a> != 4) {</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a>;</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;   }</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#adfc5a1ea28b621400e2838986493d624">meetme_cmd_helper</a>(a);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;}</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;</div><div class="line"><a name="l02116"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a7fcb5686ee02006353e22f8c70dbcdef"> 2116</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a7fcb5686ee02006353e22f8c70dbcdef">sla_hold_str</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hold_access)</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;{</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d9b/bridge__basic_8c.html#a865b164f5f26f2bace1df76cf9cdf82e">hold</a> = <span class="stringliteral">&quot;Unknown&quot;</span>;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;   <span class="keywordflow">switch</span> (hold_access) {</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685ca1e46cd00f27d565cf02c15ec55c8be06">SLA_HOLD_OPEN</a>:</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      hold = <span class="stringliteral">&quot;Open&quot;</span>;</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685cab53c785cab44a382700c0c2e7bfabf3b">SLA_HOLD_PRIVATE</a>:</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;      hold = <span class="stringliteral">&quot;Private&quot;</span>;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;   }</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d7/d9b/bridge__basic_8c.html#a865b164f5f26f2bace1df76cf9cdf82e">hold</a>;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;}</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;</div><div class="line"><a name="l02133"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a94cb635b9fb6a74e88b8b134ac5e23d5"> 2133</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a94cb635b9fb6a74e88b8b134ac5e23d5">sla_show_trunks</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;{</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *trunk;</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;sla show trunks&quot;</span>;</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;         <span class="stringliteral">&quot;Usage: sla show trunks\n&quot;</span></div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;         <span class="stringliteral">&quot;       This will list all trunks defined in sla.conf\n&quot;</span>;</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;   }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;               <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;               <span class="stringliteral">&quot;=== Configured SLA Trunks ===================================\n&quot;</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;               <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;               <span class="stringliteral">&quot;===\n&quot;</span>);</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sla_trunks, 0);</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;   <span class="keywordflow">for</span> (; (trunk = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk, -1)) {</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;      <span class="keywordtype">char</span> ring_timeout[16] = <span class="stringliteral">&quot;(none)&quot;</span>;</div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(trunk);</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;      <span class="keywordflow">if</span> (trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>) {</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;         snprintf(ring_timeout, <span class="keyword">sizeof</span>(ring_timeout), <span class="stringliteral">&quot;%u Seconds&quot;</span>, trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>);</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      }</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== ---------------------------------------------------------\n&quot;</span></div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                  <span class="stringliteral">&quot;=== Trunk Name:       %s\n&quot;</span></div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; Device:       %s\n&quot;</span></div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; AutoContext:  %s\n&quot;</span></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; RingTimeout:  %s\n&quot;</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; BargeAllowed: %s\n&quot;</span></div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; HoldAccess:   %s\n&quot;</span></div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; Stations ...\n&quot;</span>,</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;                  trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#acb640ba9134c6732a6e7dfea154ddd3e">device</a>,</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a20af6c4792f461c41fa7606913493f27">autocontext</a>, <span class="stringliteral">&quot;(none)&quot;</span>),</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;                  ring_timeout,</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;                  trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a748f7c363274abc31c4396fde91f9f4e">barge_disabled</a> ? <span class="stringliteral">&quot;No&quot;</span> : <span class="stringliteral">&quot;Yes&quot;</span>,</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#a7fcb5686ee02006353e22f8c70dbcdef">sla_hold_str</a>(trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a9f0acfbb10f035a4ad88dc2c8ad41030">hold_access</a>));</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a923df8202a8b865a393bb34def02c109">stations</a>, station_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;===    ==&gt; Station name: %s\n&quot;</span>, station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;name);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;      }</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== ---------------------------------------------------------\n===\n&quot;</span>);</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(trunk);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   }</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=============================================================\n\n&quot;</span>);</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;}</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div><div class="line"><a name="l02193"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#adca22e29e840747e49e804c977f67386"> 2193</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#adca22e29e840747e49e804c977f67386">trunkstate2str</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75">sla_trunk_state</a> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;{</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="preprocessor">#define S(e) case e: return # e;</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;   <span class="keywordflow">switch</span> (state) {</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#abd5465a13e11fe1c52a5a0f7b0b0812e">S</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>)</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#abd5465a13e11fe1c52a5a0f7b0b0812e">S</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a4822569aa984228bec67e07f5b9862a5">SLA_TRUNK_STATE_RINGING</a>)</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#abd5465a13e11fe1c52a5a0f7b0b0812e">S</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>)</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#abd5465a13e11fe1c52a5a0f7b0b0812e">S</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a17322fe34775141bef95a88fd00ed59d">SLA_TRUNK_STATE_ONHOLD</a>)</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#abd5465a13e11fe1c52a5a0f7b0b0812e">S</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a>)</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   }</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;   <span class="keywordflow">return</span> <span class="stringliteral">&quot;Uknown State&quot;</span>;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="preprocessor">#undef S</span></div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;}</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;</div><div class="line"><a name="l02207"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ac9396eafa98ce0ee732f0ea84aefaee4"> 2207</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#ac9396eafa98ce0ee732f0ea84aefaee4">sla_show_stations</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> *e, <span class="keywordtype">int</span> cmd, <span class="keyword">struct</span> <a class="code" href="../../d3/dad/structast__cli__args.html">ast_cli_args</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a>)</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;{</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   <span class="keywordflow">switch</span> (cmd) {</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a>:</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">command</a> = <span class="stringliteral">&quot;sla show stations&quot;</span>;</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      e-&gt;<a class="code" href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">usage</a> =</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;         <span class="stringliteral">&quot;Usage: sla show stations\n&quot;</span></div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;         <span class="stringliteral">&quot;       This will list all stations defined in sla.conf\n&quot;</span>;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a>:</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;   }</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;               <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;               <span class="stringliteral">&quot;=== Configured SLA Stations =================================\n&quot;</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;               <span class="stringliteral">&quot;=============================================================\n&quot;</span></div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;               <span class="stringliteral">&quot;===\n&quot;</span>);</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sla_stations, 0);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;   <span class="keywordflow">for</span> (; (station = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station, -1)) {</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>[16] = <span class="stringliteral">&quot;(none)&quot;</span>;</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;      <span class="keywordtype">char</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a>[16] = <span class="stringliteral">&quot;(none)&quot;</span>;</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;      <span class="keywordflow">if</span> (station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>) {</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;         snprintf(ring_timeout, <span class="keyword">sizeof</span>(ring_timeout),</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;            <span class="stringliteral">&quot;%u&quot;</span>, station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>);</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;      }</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;      <span class="keywordflow">if</span> (station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a>) {</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;         snprintf(ring_delay, <span class="keyword">sizeof</span>(ring_delay),</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;            <span class="stringliteral">&quot;%u&quot;</span>, station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a>);</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;      }</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== ---------------------------------------------------------\n&quot;</span></div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;                  <span class="stringliteral">&quot;=== Station Name:    %s\n&quot;</span></div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; Device:      %s\n&quot;</span></div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; AutoContext: %s\n&quot;</span></div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; RingTimeout: %s\n&quot;</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; RingDelay:   %s\n&quot;</span></div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; HoldAccess:  %s\n&quot;</span></div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;                  <span class="stringliteral">&quot;=== ==&gt; Trunks ...\n&quot;</span>,</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;                  station-&gt;name, station-&gt;device,</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;                  <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(station-&gt;autocontext, <span class="stringliteral">&quot;(none)&quot;</span>),</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;                  ring_timeout, ring_delay,</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#a7fcb5686ee02006353e22f8c70dbcdef">sla_hold_str</a>(station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a9f0acfbb10f035a4ad88dc2c8ad41030">hold_access</a>));</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;         <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>) {</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;            snprintf(ring_timeout, <span class="keyword">sizeof</span>(ring_timeout),</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;               <span class="stringliteral">&quot;%u&quot;</span>, trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>);</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;            strcpy(ring_timeout, <span class="stringliteral">&quot;(none)&quot;</span>);</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;         }</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;         <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a>) {</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;            snprintf(ring_delay, <span class="keyword">sizeof</span>(ring_delay),</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;               <span class="stringliteral">&quot;%u&quot;</span>, trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a>);</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;            strcpy(ring_delay, <span class="stringliteral">&quot;(none)&quot;</span>);</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;         }</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;         <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;===    ==&gt; Trunk Name: %s\n&quot;</span></div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;               <span class="stringliteral">&quot;===       ==&gt; State:       %s\n&quot;</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;               <span class="stringliteral">&quot;===       ==&gt; RingTimeout: %s\n&quot;</span></div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;               <span class="stringliteral">&quot;===       ==&gt; RingDelay:   %s\n&quot;</span>,</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;               trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>,</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;               <a class="code" href="../../df/d44/app__meetme_8c.html#adca22e29e840747e49e804c977f67386">trunkstate2str</a>(trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a>),</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;               ring_timeout, ring_delay);</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;      }</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;      <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;=== ---------------------------------------------------------\n&quot;</span></div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;                  <span class="stringliteral">&quot;===\n&quot;</span>);</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;   }</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a>(a-&gt;<a class="code" href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">fd</a>, <span class="stringliteral">&quot;============================================================\n&quot;</span></div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;               <span class="stringliteral">&quot;\n&quot;</span>);</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a>;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;}</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;</div><div class="line"><a name="l02290"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a31b7cf161faa4ea68f99829392d4b2fd"> 2290</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a> <a class="code" href="../../df/d44/app__meetme_8c.html#a31b7cf161faa4ea68f99829392d4b2fd">cli_meetme</a>[] = {</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#aa46b0a964293d7efe152f2cc786ed888">meetme_kick_cmd</a>, <span class="stringliteral">&quot;Kick a conference or a user in a conference.&quot;</span>),</div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a5f272b0802dbeb3b9592c16839e4a134">meetme_show_cmd</a>, <span class="stringliteral">&quot;List all conferences or a specific conference.&quot;</span>),</div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a5d4909119c17d1ab7fd2f1283f56abe4">meetme_lock_cmd</a>, <span class="stringliteral">&quot;Lock or unlock a conference to new users.&quot;</span>),</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a52b639668f922212a3583f91da84e5ae">meetme_mute_cmd</a>, <span class="stringliteral">&quot;Mute or unmute a conference or a user in a conference.&quot;</span>),</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a94cb635b9fb6a74e88b8b134ac5e23d5">sla_show_trunks</a>, <span class="stringliteral">&quot;Show SLA Trunks&quot;</span>),</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#ac9396eafa98ce0ee732f0ea84aefaee4">sla_show_stations</a>, <span class="stringliteral">&quot;Show SLA Stations&quot;</span>),</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;};</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;</div><div class="line"><a name="l02299"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a42bbab56ce6a8eb0aaf501be26cf5271"> 2299</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a42bbab56ce6a8eb0aaf501be26cf5271">conf_flush</a>(<span class="keywordtype">int</span> fd, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;{</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;   <span class="comment">/* read any frames that may be waiting on the channel</span></div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;<span class="comment">      and throw them away</span></div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<span class="comment">   */</span></div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;   <span class="keywordflow">if</span> (chan) {</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;      <span class="comment">/* when no frames are available, this will wait</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;<span class="comment">         for 1 millisecond maximum</span></div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;<span class="comment">      */</span></div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;      <span class="keywordflow">while</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(chan, 1) &gt; 0) {</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;         f = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(chan);</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;         <span class="keywordflow">if</span> (f)</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;         <span class="keywordflow">else</span> <span class="comment">/* channel was hung up or something else happened */</span></div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;      }</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;   }</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;   <span class="comment">/* flush any data sitting in the pseudo channel */</span></div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;   x = DAHDI_FLUSH_ALL;</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;   <span class="keywordflow">if</span> (ioctl(fd, DAHDI_FLUSH, &amp;x))</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error flushing channel\n&quot;</span>);</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;}</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;<span class="comment">/*! \brief Remove the conference from the list and free it.</span></div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="comment">   We assume that this was called while holding conflock. */</span></div><div class="line"><a name="l02331"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2acb14ff82a951501e9dbd8b700e8509"> 2331</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2acb14ff82a951501e9dbd8b700e8509">conf_free</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>)</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;{</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4b/structannounce__listitem.html">announce_listitem</a> *<a class="code" href="../../d8/d4f/test__config_8c.html#aecdc7cbd5dfa76493c0212caa55d706c">item</a>;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, conf, list);</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a>(conf, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, meetme_end_type(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;   <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af06bdf9e29424094b6e9eddc4d9f9f62">recording</a> == <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298aed2f74b0993cd2122169387b4ff74113">MEETME_RECORD_ACTIVE</a>) {</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;      conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af06bdf9e29424094b6e9eddc4d9f9f62">recording</a> = <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a79313598c5f4a645e3b006f59572a75d">MEETME_RECORD_TERMINATE</a>;</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;      <span class="keywordflow">while</span> (1) {</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;         usleep(1);</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;         <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af06bdf9e29424094b6e9eddc4d9f9f62">recording</a> == <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a44a4c13334429a322cb3408ec48c1cfb">MEETME_RECORD_OFF</a>)</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;      }</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;   }</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;   <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../df/d44/app__meetme_8c.html#addd70c99776f00581f71a71d3c10d86f">AST_FRAME_BITS</a>; x++) {</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[x])</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;         <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[x]);</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a16f06197fcaec99baf94c770e1549fc8">transpath</a>[x])</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;         <a class="code" href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a16f06197fcaec99baf94c770e1549fc8">transpath</a>[x]);</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;   }</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;   <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a32ad66f5110971b6c12b3e7e5d700ed6">announcethread</a> != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;      conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad55362a02bb3873c199d40bcd1407d25">announcethread_stop</a> = 1;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a>);</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#aaf8da2ce427bc9d88ba925c185056a41">announcelist_addition</a>);</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;      pthread_join(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a32ad66f5110971b6c12b3e7e5d700ed6">announcethread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;      <span class="keywordflow">while</span> ((item = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2e7bbd159351d331708b134ddd105a96">announcelist</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;         <span class="comment">/* If it&#39;s a voicemail greeting file we don&#39;t want to remove it */</span></div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;         <span class="keywordflow">if</span> (!item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a185c325c6063263f7b3119f4045c22e0">vmrec</a>){</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;         }</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(item, -1);</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;      }</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;   }</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;   <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">origframe</a>)</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">origframe</a>);</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;   <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a> &gt;= 0)</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;      close(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">fd</a>);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;   <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>) {</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>);</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;   }</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;   <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>) {</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, -1);</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;   }</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;   <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>) {</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;      <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>);</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;   }</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>);</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>);</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">recordthreadlock</a>);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2d6ea8e1bd00fa11be2f422d8949e33e">announcethreadlock</a>);</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(conf);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;}</div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;</div><div class="line"><a name="l02400"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ada5e10a4d240af38d13e13d576b66f4a"> 2400</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ada5e10a4d240af38d13e13d576b66f4a">conf_queue_dtmf</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>,</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *sender, <span class="keyword">struct</span> <a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f)</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;{</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> user_iter;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   user_iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, 0);</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   <span class="keywordflow">while</span> ((user = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;user_iter))) {</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;      <span class="keywordflow">if</span> (user == sender) {</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, -1);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;      }</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, f) &lt; 0)</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error writing frame to channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, -1);</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;   }</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;user_iter);</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;}</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;</div><div class="line"><a name="l02419"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4178d3abb2ecba4c119838052829dd94"> 2419</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a4178d3abb2ecba4c119838052829dd94">sla_queue_event_full</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261a">sla_event_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>,</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref, <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station, <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a>)</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;{</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../da/d0f/structsla__event.html">sla_event</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.thread == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station, -1);</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref, -1);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   }</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;   <span class="keywordflow">if</span> (!(event = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*event)))) {</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station, -1);</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref, -1);</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;   }</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;   <span class="keyword">event</span>-&gt;type = <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;   <span class="keyword">event</span>-&gt;trunk_ref = <a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>;</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;   <span class="keyword">event</span>-&gt;station = <a class="code" href="../../da/d0f/structsla__event.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;   <span class="keywordflow">if</span> (!lock) {</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.event_q, event, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;   }</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.event_q, event, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.cond);</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;}</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;</div><div class="line"><a name="l02451"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a45318e8513f0ffb15b49943c18ea0e58"> 2451</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a45318e8513f0ffb15b49943c18ea0e58">sla_queue_event_nolock</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261a">sla_event_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>)</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;{</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4178d3abb2ecba4c119838052829dd94">sla_queue_event_full</a>(type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;}</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;</div><div class="line"><a name="l02456"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745"> 2456</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745">sla_queue_event</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261a">sla_event_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>)</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;{</div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4178d3abb2ecba4c119838052829dd94">sla_queue_event_full</a>(type, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 1);</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;}</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="comment">/*! \brief Queue a SLA event from the conference */</span></div><div class="line"><a name="l02462"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a5e80b8d035834753764ad2be58e4bb07"> 2462</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a5e80b8d035834753764ad2be58e4bb07">sla_queue_event_conf</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261a">sla_event_type</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan,</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>)</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;{</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station;</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;   <span class="keywordtype">char</span> *trunk_name;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   trunk_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;   <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;trunk_name, <span class="stringliteral">&quot;_&quot;</span>);</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(trunk_name)) {</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid conference name for SLA - &#39;%s&#39;!\n&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;   }</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sla_stations, 0);</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   <span class="keywordflow">while</span> ((station = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;         <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a> == chan &amp;&amp; !strcmp(trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, trunk_name)) {</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref, 1);</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;         }</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;      }</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      <span class="keywordflow">if</span> (trunk_ref) {</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;         <span class="comment">/* station reference given to sla_queue_event_full() */</span></div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;      }</div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station, -1);</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;   }</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;   <span class="keywordflow">if</span> (!trunk_ref) {</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Trunk not found for event!\n&quot;</span>);</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;   }</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a4178d3abb2ecba4c119838052829dd94">sla_queue_event_full</a>(type, trunk_ref, station, 1);</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;}</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;<span class="comment">/*! \brief Decrement reference counts, as incremented by find_conf() */</span></div><div class="line"><a name="l02504"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034"> 2504</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>)</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;{</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;   <span class="keywordtype">int</span> confno_int = 0;</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#acbbba9058696fc07cec1485a88b5f4ad">ast_atomic_dec_and_test</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a>)) {</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      <span class="comment">/* Take the conference room number out of an inuse state */</span></div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;      <span class="keywordflow">if</span> ((sscanf(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <span class="stringliteral">&quot;%4d&quot;</span>, &amp;confno_int) == 1) &amp;&amp; (confno_int &gt;= 0 &amp;&amp; confno_int &lt; 1024)) {</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;         conf_map[confno_int] = 0;</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;      }</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a2acb14ff82a951501e9dbd8b700e8509">conf_free</a>(conf);</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;      res = 1;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   }</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;}</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;</div><div class="line"><a name="l02523"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a30a63a191f0d3fafcea99e759e0c46a5"> 2523</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a30a63a191f0d3fafcea99e759e0c46a5">rt_extend_conf</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *confno)</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;{</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;   <span class="keywordtype">char</span> currenttime[32];</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;   <span class="keywordtype">char</span> endtime[32];</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, *orig_var;</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;   <span class="keywordtype">char</span> bookid[51];</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;   <span class="keywordflow">if</span> (!extendby) {</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;   }</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;   now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;</div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02539"></a><span class="lineno"> 2539</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(currenttime, <span class="keyword">sizeof</span>(currenttime), <a class="code" href="../../df/d44/app__meetme_8c.html#af3a7249af0dc84e61384327caa331213">DATE_FORMAT</a>, &amp;tm);</div><div class="line"><a name="l02540"></a><span class="lineno"> 2540</span>&#160;</div><div class="line"><a name="l02541"></a><span class="lineno"> 2541</span>&#160;   var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>,</div><div class="line"><a name="l02542"></a><span class="lineno"> 2542</span>&#160;      confno, <span class="stringliteral">&quot;startTime&lt;= &quot;</span>, currenttime,</div><div class="line"><a name="l02543"></a><span class="lineno"> 2543</span>&#160;      <span class="stringliteral">&quot;endtime&gt;= &quot;</span>, currenttime, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02544"></a><span class="lineno"> 2544</span>&#160;</div><div class="line"><a name="l02545"></a><span class="lineno"> 2545</span>&#160;   orig_var = <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l02546"></a><span class="lineno"> 2546</span>&#160;</div><div class="line"><a name="l02547"></a><span class="lineno"> 2547</span>&#160;   <span class="comment">/* Identify the specific RealTime conference */</span></div><div class="line"><a name="l02548"></a><span class="lineno"> 2548</span>&#160;   <span class="keywordflow">while</span> (var) {</div><div class="line"><a name="l02549"></a><span class="lineno"> 2549</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;bookid&quot;</span>)) {</div><div class="line"><a name="l02550"></a><span class="lineno"> 2550</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bookid, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(bookid));</div><div class="line"><a name="l02551"></a><span class="lineno"> 2551</span>&#160;      }</div><div class="line"><a name="l02552"></a><span class="lineno"> 2552</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;endtime&quot;</span>)) {</div><div class="line"><a name="l02553"></a><span class="lineno"> 2553</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(endtime, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(endtime));</div><div class="line"><a name="l02554"></a><span class="lineno"> 2554</span>&#160;      }</div><div class="line"><a name="l02555"></a><span class="lineno"> 2555</span>&#160;</div><div class="line"><a name="l02556"></a><span class="lineno"> 2556</span>&#160;      var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l02557"></a><span class="lineno"> 2557</span>&#160;   }</div><div class="line"><a name="l02558"></a><span class="lineno"> 2558</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(orig_var);</div><div class="line"><a name="l02559"></a><span class="lineno"> 2559</span>&#160;</div><div class="line"><a name="l02560"></a><span class="lineno"> 2560</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#a3eb2c73accce1b149ce597de80d1677a">ast_strptime</a>(endtime, <a class="code" href="../../df/d44/app__meetme_8c.html#af3a7249af0dc84e61384327caa331213">DATE_FORMAT</a>, &amp;tm);</div><div class="line"><a name="l02561"></a><span class="lineno"> 2561</span>&#160;   now = <a class="code" href="../../d5/deb/localtime_8h.html#ae0843e4dbbd1fed36d2676dda58e0c44">ast_mktime</a>(&amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02562"></a><span class="lineno"> 2562</span>&#160;</div><div class="line"><a name="l02563"></a><span class="lineno"> 2563</span>&#160;   now.tv_sec += <a class="code" href="../../df/d44/app__meetme_8c.html#ae0a2b76878a215d1ac6e738b85b4b9d8">extendby</a>;</div><div class="line"><a name="l02564"></a><span class="lineno"> 2564</span>&#160;</div><div class="line"><a name="l02565"></a><span class="lineno"> 2565</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02566"></a><span class="lineno"> 2566</span>&#160;   <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(currenttime, <span class="keyword">sizeof</span>(currenttime), <a class="code" href="../../df/d44/app__meetme_8c.html#af3a7249af0dc84e61384327caa331213">DATE_FORMAT</a>, &amp;tm);</div><div class="line"><a name="l02567"></a><span class="lineno"> 2567</span>&#160;   strcat(currenttime, <span class="stringliteral">&quot;0&quot;</span>); <span class="comment">/* Seconds needs to be 00 */</span></div><div class="line"><a name="l02568"></a><span class="lineno"> 2568</span>&#160;</div><div class="line"><a name="l02569"></a><span class="lineno"> 2569</span>&#160;   var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>,</div><div class="line"><a name="l02570"></a><span class="lineno"> 2570</span>&#160;      confno, <span class="stringliteral">&quot;startTime&lt;= &quot;</span>, currenttime,</div><div class="line"><a name="l02571"></a><span class="lineno"> 2571</span>&#160;      <span class="stringliteral">&quot;endtime&gt;= &quot;</span>, currenttime, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02572"></a><span class="lineno"> 2572</span>&#160;</div><div class="line"><a name="l02573"></a><span class="lineno"> 2573</span>&#160;   <span class="comment">/* If there is no conflict with extending the conference, update the DB */</span></div><div class="line"><a name="l02574"></a><span class="lineno"> 2574</span>&#160;   <span class="keywordflow">if</span> (!var) {</div><div class="line"><a name="l02575"></a><span class="lineno"> 2575</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Trying to update the endtime of Conference %s to %s\n&quot;</span>, confno, currenttime);</div><div class="line"><a name="l02576"></a><span class="lineno"> 2576</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ab845019b2f1bb324ff57e14192d62c39">ast_update_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;bookid&quot;</span>, bookid, <span class="stringliteral">&quot;endtime&quot;</span>, currenttime, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02577"></a><span class="lineno"> 2577</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02578"></a><span class="lineno"> 2578</span>&#160;</div><div class="line"><a name="l02579"></a><span class="lineno"> 2579</span>&#160;   }</div><div class="line"><a name="l02580"></a><span class="lineno"> 2580</span>&#160;</div><div class="line"><a name="l02581"></a><span class="lineno"> 2581</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(var);</div><div class="line"><a name="l02582"></a><span class="lineno"> 2582</span>&#160;   <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l02583"></a><span class="lineno"> 2583</span>&#160;}</div><div class="line"><a name="l02584"></a><span class="lineno"> 2584</span>&#160;</div><div class="line"><a name="l02585"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601"> 2585</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601">conf_start_moh</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a>)</div><div class="line"><a name="l02586"></a><span class="lineno"> 2586</span>&#160;{</div><div class="line"><a name="l02587"></a><span class="lineno"> 2587</span>&#160;   <span class="keywordtype">char</span> *original_moh;</div><div class="line"><a name="l02588"></a><span class="lineno"> 2588</span>&#160;</div><div class="line"><a name="l02589"></a><span class="lineno"> 2589</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02590"></a><span class="lineno"> 2590</span>&#160;   original_moh = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a9b745a6d0e3d7af90d2708dca5b5e069">ast_channel_musicclass</a>(chan));</div><div class="line"><a name="l02591"></a><span class="lineno"> 2591</span>&#160;   ast_channel_musicclass_set(chan, musicclass);</div><div class="line"><a name="l02592"></a><span class="lineno"> 2592</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02593"></a><span class="lineno"> 2593</span>&#160;</div><div class="line"><a name="l02594"></a><span class="lineno"> 2594</span>&#160;   <a class="code" href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a>(chan, original_moh, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02595"></a><span class="lineno"> 2595</span>&#160;</div><div class="line"><a name="l02596"></a><span class="lineno"> 2596</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l02597"></a><span class="lineno"> 2597</span>&#160;   ast_channel_musicclass_set(chan, original_moh);</div><div class="line"><a name="l02598"></a><span class="lineno"> 2598</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l02599"></a><span class="lineno"> 2599</span>&#160;}</div><div class="line"><a name="l02600"></a><span class="lineno"> 2600</span>&#160;</div><div class="line"><a name="l02601"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#add1f426b8d82cf993d8167e21de8319b"> 2601</a></span>&#160;<span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#add1f426b8d82cf993d8167e21de8319b">get_announce_filename</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bf">announcetypes</a> <a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>)</div><div class="line"><a name="l02602"></a><span class="lineno"> 2602</span>&#160;{</div><div class="line"><a name="l02603"></a><span class="lineno"> 2603</span>&#160;   <span class="keywordflow">switch</span> (type) {</div><div class="line"><a name="l02604"></a><span class="lineno"> 2604</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfafe977bca19aa4a5f72ff226a312b74af">CONF_HASLEFT</a>:</div><div class="line"><a name="l02605"></a><span class="lineno"> 2605</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;conf-hasleft&quot;</span>;</div><div class="line"><a name="l02606"></a><span class="lineno"> 2606</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02607"></a><span class="lineno"> 2607</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfa7a2844a08140930251b7a890184cf1f1">CONF_HASJOIN</a>:</div><div class="line"><a name="l02608"></a><span class="lineno"> 2608</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;conf-hasjoin&quot;</span>;</div><div class="line"><a name="l02609"></a><span class="lineno"> 2609</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02610"></a><span class="lineno"> 2610</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02611"></a><span class="lineno"> 2611</span>&#160;      <span class="keywordflow">return</span> <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02612"></a><span class="lineno"> 2612</span>&#160;   }</div><div class="line"><a name="l02613"></a><span class="lineno"> 2613</span>&#160;}</div><div class="line"><a name="l02614"></a><span class="lineno"> 2614</span>&#160;</div><div class="line"><a name="l02615"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a17b11cfe0e59eab973dd6aa57de91f8b"> 2615</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a17b11cfe0e59eab973dd6aa57de91f8b">announce_thread</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l02616"></a><span class="lineno"> 2616</span>&#160;{</div><div class="line"><a name="l02617"></a><span class="lineno"> 2617</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d4b/structannounce__listitem.html">announce_listitem</a> *current;</div><div class="line"><a name="l02618"></a><span class="lineno"> 2618</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a> = data;</div><div class="line"><a name="l02619"></a><span class="lineno"> 2619</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02620"></a><span class="lineno"> 2620</span>&#160;   <span class="keywordtype">char</span> filename[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l02621"></a><span class="lineno"> 2621</span>&#160;   <a class="code" href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a>(, <a class="code" href="../../dd/d4b/structannounce__listitem.html">announce_listitem</a>) local_list;</div><div class="line"><a name="l02622"></a><span class="lineno"> 2622</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;local_list);</div><div class="line"><a name="l02623"></a><span class="lineno"> 2623</span>&#160;</div><div class="line"><a name="l02624"></a><span class="lineno"> 2624</span>&#160;   <span class="keywordflow">while</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad55362a02bb3873c199d40bcd1407d25">announcethread_stop</a>) {</div><div class="line"><a name="l02625"></a><span class="lineno"> 2625</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l02626"></a><span class="lineno"> 2626</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad55362a02bb3873c199d40bcd1407d25">announcethread_stop</a>) {</div><div class="line"><a name="l02627"></a><span class="lineno"> 2627</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l02628"></a><span class="lineno"> 2628</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02629"></a><span class="lineno"> 2629</span>&#160;      }</div><div class="line"><a name="l02630"></a><span class="lineno"> 2630</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2e7bbd159351d331708b134ddd105a96">announcelist</a>))</div><div class="line"><a name="l02631"></a><span class="lineno"> 2631</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#aaf8da2ce427bc9d88ba925c185056a41">announcelist_addition</a>, &amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l02632"></a><span class="lineno"> 2632</span>&#160;</div><div class="line"><a name="l02633"></a><span class="lineno"> 2633</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ad66405f1d0b9e1fb484643d9a36e94ed">AST_LIST_APPEND_LIST</a>(&amp;local_list, &amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2e7bbd159351d331708b134ddd105a96">announcelist</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l02634"></a><span class="lineno"> 2634</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2e7bbd159351d331708b134ddd105a96">announcelist</a>);</div><div class="line"><a name="l02635"></a><span class="lineno"> 2635</span>&#160;</div><div class="line"><a name="l02636"></a><span class="lineno"> 2636</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l02637"></a><span class="lineno"> 2637</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad55362a02bb3873c199d40bcd1407d25">announcethread_stop</a>) {</div><div class="line"><a name="l02638"></a><span class="lineno"> 2638</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l02639"></a><span class="lineno"> 2639</span>&#160;      }</div><div class="line"><a name="l02640"></a><span class="lineno"> 2640</span>&#160;</div><div class="line"><a name="l02641"></a><span class="lineno"> 2641</span>&#160;      <span class="keywordflow">for</span> (res = 1; !conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad55362a02bb3873c199d40bcd1407d25">announcethread_stop</a> &amp;&amp; (current = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;local_list, <a class="code" href="../../d3/d96/structentry.html">entry</a>)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(current, -1)) {</div><div class="line"><a name="l02642"></a><span class="lineno"> 2642</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;About to play %s\n&quot;</span>, current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>);</div><div class="line"><a name="l02643"></a><span class="lineno"> 2643</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l02644"></a><span class="lineno"> 2644</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02645"></a><span class="lineno"> 2645</span>&#160;         <span class="keywordflow">if</span> ((current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">confchan</a>) &amp;&amp; (current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aae887e628e91515c97a46a3834c91069">confusers</a> &gt; 1) &amp;&amp; !<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">confchan</a>)) {</div><div class="line"><a name="l02646"></a><span class="lineno"> 2646</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">confchan</a>, current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#adf416dc058363e2fd5750c77e2d78bee">language</a>))</div><div class="line"><a name="l02647"></a><span class="lineno"> 2647</span>&#160;               res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">confchan</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02648"></a><span class="lineno"> 2648</span>&#160;            <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l02649"></a><span class="lineno"> 2649</span>&#160;               <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(filename, <a class="code" href="../../df/d44/app__meetme_8c.html#add1f426b8d82cf993d8167e21de8319b">get_announce_filename</a>(current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aaf09e68427ae0e6025d08e028646d43a">announcetype</a>), <span class="keyword">sizeof</span>(filename));</div><div class="line"><a name="l02650"></a><span class="lineno"> 2650</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">confchan</a>, filename, current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#adf416dc058363e2fd5750c77e2d78bee">language</a>))</div><div class="line"><a name="l02651"></a><span class="lineno"> 2651</span>&#160;                  <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">confchan</a>, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02652"></a><span class="lineno"> 2652</span>&#160;            }</div><div class="line"><a name="l02653"></a><span class="lineno"> 2653</span>&#160;         }</div><div class="line"><a name="l02654"></a><span class="lineno"> 2654</span>&#160;         <span class="keywordflow">if</span> (current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aaf09e68427ae0e6025d08e028646d43a">announcetype</a> == <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfafe977bca19aa4a5f72ff226a312b74af">CONF_HASLEFT</a> &amp;&amp; current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aaf09e68427ae0e6025d08e028646d43a">announcetype</a> &amp;&amp; !current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a185c325c6063263f7b3119f4045c22e0">vmrec</a>) {</div><div class="line"><a name="l02655"></a><span class="lineno"> 2655</span>&#160;            <span class="comment">/* only remove it if it isn&#39;t a VM recording file */</span></div><div class="line"><a name="l02656"></a><span class="lineno"> 2656</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02657"></a><span class="lineno"> 2657</span>&#160;         }</div><div class="line"><a name="l02658"></a><span class="lineno"> 2658</span>&#160;      }</div><div class="line"><a name="l02659"></a><span class="lineno"> 2659</span>&#160;   }</div><div class="line"><a name="l02660"></a><span class="lineno"> 2660</span>&#160;</div><div class="line"><a name="l02661"></a><span class="lineno"> 2661</span>&#160;   <span class="comment">/* thread marked to stop, clean up */</span></div><div class="line"><a name="l02662"></a><span class="lineno"> 2662</span>&#160;   <span class="keywordflow">while</span> ((current = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;local_list, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l02663"></a><span class="lineno"> 2663</span>&#160;      <span class="comment">/* only delete if it&#39;s a vm rec */</span></div><div class="line"><a name="l02664"></a><span class="lineno"> 2664</span>&#160;      <span class="keywordflow">if</span> (!current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a185c325c6063263f7b3119f4045c22e0">vmrec</a>) {</div><div class="line"><a name="l02665"></a><span class="lineno"> 2665</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(current-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l02666"></a><span class="lineno"> 2666</span>&#160;      }</div><div class="line"><a name="l02667"></a><span class="lineno"> 2667</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(current, -1);</div><div class="line"><a name="l02668"></a><span class="lineno"> 2668</span>&#160;   }</div><div class="line"><a name="l02669"></a><span class="lineno"> 2669</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02670"></a><span class="lineno"> 2670</span>&#160;}</div><div class="line"><a name="l02671"></a><span class="lineno"> 2671</span>&#160;</div><div class="line"><a name="l02672"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a465e55d6bb67a80682ef3ca1b488a826"> 2672</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a465e55d6bb67a80682ef3ca1b488a826">can_write</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *confflags)</div><div class="line"><a name="l02673"></a><span class="lineno"> 2673</span>&#160;{</div><div class="line"><a name="l02674"></a><span class="lineno"> 2674</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#acf5c7d460a31834ce02e286d133db0d7">CONFFLAG_NO_AUDIO_UNTIL_UP</a>)) {</div><div class="line"><a name="l02675"></a><span class="lineno"> 2675</span>&#160;      <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l02676"></a><span class="lineno"> 2676</span>&#160;   }</div><div class="line"><a name="l02677"></a><span class="lineno"> 2677</span>&#160;</div><div class="line"><a name="l02678"></a><span class="lineno"> 2678</span>&#160;   <span class="keywordflow">return</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) == <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>);</div><div class="line"><a name="l02679"></a><span class="lineno"> 2679</span>&#160;}</div><div class="line"><a name="l02680"></a><span class="lineno"> 2680</span>&#160;</div><div class="line"><a name="l02681"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a755b9d1d1758de8ecd6c1acb1369f4ba"> 2681</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a755b9d1d1758de8ecd6c1acb1369f4ba">send_talking_event</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>, <span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keywordtype">int</span> talking)</div><div class="line"><a name="l02682"></a><span class="lineno"> 2682</span>&#160;{</div><div class="line"><a name="l02683"></a><span class="lineno"> 2683</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, status_blob, <a class="code" href="../../df/d44/app__meetme_8c.html#a1f74b6bae5e30f6a05295e3196986a44">status_to_json</a>(talking), <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l02684"></a><span class="lineno"> 2684</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a>(conf, chan, user, meetme_talking_type(), status_blob);</div><div class="line"><a name="l02685"></a><span class="lineno"> 2685</span>&#160;}</div><div class="line"><a name="l02686"></a><span class="lineno"> 2686</span>&#160;</div><div class="line"><a name="l02687"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae1a11424819b90f48a2f8817af8681cd"> 2687</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae1a11424819b90f48a2f8817af8681cd">set_user_talking</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>, <span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keywordtype">int</span> talking, <span class="keywordtype">int</span> <a class="code" href="../../da/dde/chan__phone_8c.html#a4e40373706bcf5cdb9409dac3166d280">monitor</a>)</div><div class="line"><a name="l02688"></a><span class="lineno"> 2688</span>&#160;{</div><div class="line"><a name="l02689"></a><span class="lineno"> 2689</span>&#160;   <span class="keywordtype">int</span> last_talking = user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a>;</div><div class="line"><a name="l02690"></a><span class="lineno"> 2690</span>&#160;   <span class="keywordflow">if</span> (last_talking == talking)</div><div class="line"><a name="l02691"></a><span class="lineno"> 2691</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l02692"></a><span class="lineno"> 2692</span>&#160;</div><div class="line"><a name="l02693"></a><span class="lineno"> 2693</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> = talking;</div><div class="line"><a name="l02694"></a><span class="lineno"> 2694</span>&#160;</div><div class="line"><a name="l02695"></a><span class="lineno"> 2695</span>&#160;   <span class="keywordflow">if</span> (monitor) {</div><div class="line"><a name="l02696"></a><span class="lineno"> 2696</span>&#160;      <span class="comment">/* Check if talking state changed. Take care of -1 which means unmonitored */</span></div><div class="line"><a name="l02697"></a><span class="lineno"> 2697</span>&#160;      <span class="keywordtype">int</span> was_talking = (last_talking &gt; 0);</div><div class="line"><a name="l02698"></a><span class="lineno"> 2698</span>&#160;      <span class="keywordtype">int</span> now_talking = (talking &gt; 0);</div><div class="line"><a name="l02699"></a><span class="lineno"> 2699</span>&#160;      <span class="keywordflow">if</span> (was_talking != now_talking) {</div><div class="line"><a name="l02700"></a><span class="lineno"> 2700</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a755b9d1d1758de8ecd6c1acb1369f4ba">send_talking_event</a>(chan, conf, user, now_talking);</div><div class="line"><a name="l02701"></a><span class="lineno"> 2701</span>&#160;      }</div><div class="line"><a name="l02702"></a><span class="lineno"> 2702</span>&#160;   }</div><div class="line"><a name="l02703"></a><span class="lineno"> 2703</span>&#160;}</div><div class="line"><a name="l02704"></a><span class="lineno"> 2704</span>&#160;</div><div class="line"><a name="l02705"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ab1d211197f87ddeed62493bc7033f3f9"> 2705</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d211197f87ddeed62493bc7033f3f9">user_set_hangup_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *check_admin_arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l02706"></a><span class="lineno"> 2706</span>&#160;{</div><div class="line"><a name="l02707"></a><span class="lineno"> 2707</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l02708"></a><span class="lineno"> 2708</span>&#160;   <span class="comment">/* actual pointer contents of check_admin_arg is irrelevant */</span></div><div class="line"><a name="l02709"></a><span class="lineno"> 2709</span>&#160;</div><div class="line"><a name="l02710"></a><span class="lineno"> 2710</span>&#160;   <span class="keywordflow">if</span> (!check_admin_arg || (check_admin_arg &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>))) {</div><div class="line"><a name="l02711"></a><span class="lineno"> 2711</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5acd2fa7d4984319bf6a4c01527d04647f">ADMINFLAG_HANGUP</a>;</div><div class="line"><a name="l02712"></a><span class="lineno"> 2712</span>&#160;   }</div><div class="line"><a name="l02713"></a><span class="lineno"> 2713</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02714"></a><span class="lineno"> 2714</span>&#160;}</div><div class="line"><a name="l02715"></a><span class="lineno"> 2715</span>&#160;</div><div class="line"><a name="l02716"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a18611e5423481fce6079cfdc9be23859"> 2716</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a18611e5423481fce6079cfdc9be23859">user_set_kickme_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *check_admin_arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l02717"></a><span class="lineno"> 2717</span>&#160;{</div><div class="line"><a name="l02718"></a><span class="lineno"> 2718</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l02719"></a><span class="lineno"> 2719</span>&#160;   <span class="comment">/* actual pointer contents of check_admin_arg is irrelevant */</span></div><div class="line"><a name="l02720"></a><span class="lineno"> 2720</span>&#160;</div><div class="line"><a name="l02721"></a><span class="lineno"> 2721</span>&#160;   <span class="keywordflow">if</span> (!check_admin_arg || (check_admin_arg &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>))) {</div><div class="line"><a name="l02722"></a><span class="lineno"> 2722</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14">ADMINFLAG_KICKME</a>;</div><div class="line"><a name="l02723"></a><span class="lineno"> 2723</span>&#160;   }</div><div class="line"><a name="l02724"></a><span class="lineno"> 2724</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02725"></a><span class="lineno"> 2725</span>&#160;}</div><div class="line"><a name="l02726"></a><span class="lineno"> 2726</span>&#160;</div><div class="line"><a name="l02727"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aab43cc97424af77028a4caa8e54d8fc8"> 2727</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aab43cc97424af77028a4caa8e54d8fc8">user_set_unmuted_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *check_admin_arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l02728"></a><span class="lineno"> 2728</span>&#160;{</div><div class="line"><a name="l02729"></a><span class="lineno"> 2729</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l02730"></a><span class="lineno"> 2730</span>&#160;   <span class="comment">/* actual pointer contents of check_admin_arg is irrelevant */</span></div><div class="line"><a name="l02731"></a><span class="lineno"> 2731</span>&#160;</div><div class="line"><a name="l02732"></a><span class="lineno"> 2732</span>&#160;   <span class="keywordflow">if</span> (!check_admin_arg || !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>)) {</div><div class="line"><a name="l02733"></a><span class="lineno"> 2733</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp;= ~(<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a>);</div><div class="line"><a name="l02734"></a><span class="lineno"> 2734</span>&#160;   }</div><div class="line"><a name="l02735"></a><span class="lineno"> 2735</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02736"></a><span class="lineno"> 2736</span>&#160;}</div><div class="line"><a name="l02737"></a><span class="lineno"> 2737</span>&#160;</div><div class="line"><a name="l02738"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a7c7ed16928ff798a1ad1a2f7eaf0ebe0"> 2738</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a7c7ed16928ff798a1ad1a2f7eaf0ebe0">user_set_muted_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *check_admin_arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l02739"></a><span class="lineno"> 2739</span>&#160;{</div><div class="line"><a name="l02740"></a><span class="lineno"> 2740</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l02741"></a><span class="lineno"> 2741</span>&#160;   <span class="comment">/* actual pointer contents of check_admin_arg is irrelevant */</span></div><div class="line"><a name="l02742"></a><span class="lineno"> 2742</span>&#160;</div><div class="line"><a name="l02743"></a><span class="lineno"> 2743</span>&#160;   <span class="keywordflow">if</span> (!check_admin_arg || !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>)) {</div><div class="line"><a name="l02744"></a><span class="lineno"> 2744</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a>;</div><div class="line"><a name="l02745"></a><span class="lineno"> 2745</span>&#160;   }</div><div class="line"><a name="l02746"></a><span class="lineno"> 2746</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02747"></a><span class="lineno"> 2747</span>&#160;}</div><div class="line"><a name="l02748"></a><span class="lineno"> 2748</span>&#160;</div><div class="line"><a name="l02749"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4"> 2749</a></span>&#160;<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4">menu_modes</a> {</div><div class="line"><a name="l02750"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f"> 2750</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a> = 0,</div><div class="line"><a name="l02751"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4ab3da6b31f681a1e2901440b330a266a8"> 2751</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4ab3da6b31f681a1e2901440b330a266a8">MENU_NORMAL</a>,</div><div class="line"><a name="l02752"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a98486ef3937db9b46bd9307a5f2b71a9"> 2752</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a98486ef3937db9b46bd9307a5f2b71a9">MENU_ADMIN</a>,</div><div class="line"><a name="l02753"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9a5a6dbfc43f3c8834b7e718a78311ff"> 2753</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9a5a6dbfc43f3c8834b7e718a78311ff">MENU_ADMIN_EXTENDED</a>,</div><div class="line"><a name="l02754"></a><span class="lineno"> 2754</span>&#160;};</div><div class="line"><a name="l02755"></a><span class="lineno"> 2755</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02756"></a><span class="lineno"> 2756</span>&#160;<span class="comment">/*! \internal</span></div><div class="line"><a name="l02757"></a><span class="lineno"> 2757</span>&#160;<span class="comment"> * \brief Processes menu options for the standard menu (accessible through the &#39;s&#39; option for app_meetme)</span></div><div class="line"><a name="l02758"></a><span class="lineno"> 2758</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02759"></a><span class="lineno"> 2759</span>&#160;<span class="comment"> * \param menu_mode a pointer to the currently active menu_mode.</span></div><div class="line"><a name="l02760"></a><span class="lineno"> 2760</span>&#160;<span class="comment"> * \param dtmf a pointer to the dtmf value currently being processed against the menu.</span></div><div class="line"><a name="l02761"></a><span class="lineno"> 2761</span>&#160;<span class="comment"> * \param conf the active conference for which the user has called the menu from.</span></div><div class="line"><a name="l02762"></a><span class="lineno"> 2762</span>&#160;<span class="comment"> * \param confflags flags used by conf for various options</span></div><div class="line"><a name="l02763"></a><span class="lineno"> 2763</span>&#160;<span class="comment"> * \param chan ast_channel belonging to the user who called the menu</span></div><div class="line"><a name="l02764"></a><span class="lineno"> 2764</span>&#160;<span class="comment"> * \param user which meetme conference user invoked the menu</span></div><div class="line"><a name="l02765"></a><span class="lineno"> 2765</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02766"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1a18c35c2d3cf47bb0b07f2ec3c3d434"> 2766</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a1a18c35c2d3cf47bb0b07f2ec3c3d434">meetme_menu_normal</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4">menu_modes</a> *menu_mode, <span class="keywordtype">int</span> *dtmf, <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>, <span class="keyword">struct</span> <a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *confflags, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l02767"></a><span class="lineno"> 2767</span>&#160;{</div><div class="line"><a name="l02768"></a><span class="lineno"> 2768</span>&#160;   <span class="keywordflow">switch</span> (*dtmf) {</div><div class="line"><a name="l02769"></a><span class="lineno"> 2769</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>: <span class="comment">/* Un/Mute */</span></div><div class="line"><a name="l02770"></a><span class="lineno"> 2770</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02771"></a><span class="lineno"> 2771</span>&#160;</div><div class="line"><a name="l02772"></a><span class="lineno"> 2772</span>&#160;      <span class="comment">/* user can only toggle the self-muted state */</span></div><div class="line"><a name="l02773"></a><span class="lineno"> 2773</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> ^= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>;</div><div class="line"><a name="l02774"></a><span class="lineno"> 2774</span>&#160;</div><div class="line"><a name="l02775"></a><span class="lineno"> 2775</span>&#160;      <span class="comment">/* they can&#39;t override the admin mute state */</span></div><div class="line"><a name="l02776"></a><span class="lineno"> 2776</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) || (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>))) {</div><div class="line"><a name="l02777"></a><span class="lineno"> 2777</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-muted&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02778"></a><span class="lineno"> 2778</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02779"></a><span class="lineno"> 2779</span>&#160;         }</div><div class="line"><a name="l02780"></a><span class="lineno"> 2780</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02781"></a><span class="lineno"> 2781</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-unmuted&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02782"></a><span class="lineno"> 2782</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02783"></a><span class="lineno"> 2783</span>&#160;         }</div><div class="line"><a name="l02784"></a><span class="lineno"> 2784</span>&#160;      }</div><div class="line"><a name="l02785"></a><span class="lineno"> 2785</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02786"></a><span class="lineno"> 2786</span>&#160;</div><div class="line"><a name="l02787"></a><span class="lineno"> 2787</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;2&#39;</span>:</div><div class="line"><a name="l02788"></a><span class="lineno"> 2788</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02789"></a><span class="lineno"> 2789</span>&#160;      <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>)) {</div><div class="line"><a name="l02790"></a><span class="lineno"> 2790</span>&#160;         user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a>;</div><div class="line"><a name="l02791"></a><span class="lineno"> 2791</span>&#160;      }</div><div class="line"><a name="l02792"></a><span class="lineno"> 2792</span>&#160;</div><div class="line"><a name="l02793"></a><span class="lineno"> 2793</span>&#160;      <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a>) {</div><div class="line"><a name="l02794"></a><span class="lineno"> 2794</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;beep&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02795"></a><span class="lineno"> 2795</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02796"></a><span class="lineno"> 2796</span>&#160;         }</div><div class="line"><a name="l02797"></a><span class="lineno"> 2797</span>&#160;      }</div><div class="line"><a name="l02798"></a><span class="lineno"> 2798</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02799"></a><span class="lineno"> 2799</span>&#160;</div><div class="line"><a name="l02800"></a><span class="lineno"> 2800</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;4&#39;</span>:</div><div class="line"><a name="l02801"></a><span class="lineno"> 2801</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a>);</div><div class="line"><a name="l02802"></a><span class="lineno"> 2802</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02803"></a><span class="lineno"> 2803</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;5&#39;</span>:</div><div class="line"><a name="l02804"></a><span class="lineno"> 2804</span>&#160;      <span class="comment">/* Extend RT conference */</span></div><div class="line"><a name="l02805"></a><span class="lineno"> 2805</span>&#160;      <span class="keywordflow">if</span> (rt_schedule) {</div><div class="line"><a name="l02806"></a><span class="lineno"> 2806</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a30a63a191f0d3fafcea99e759e0c46a5">rt_extend_conf</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l02807"></a><span class="lineno"> 2807</span>&#160;      }</div><div class="line"><a name="l02808"></a><span class="lineno"> 2808</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02809"></a><span class="lineno"> 2809</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02810"></a><span class="lineno"> 2810</span>&#160;</div><div class="line"><a name="l02811"></a><span class="lineno"> 2811</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;6&#39;</span>:</div><div class="line"><a name="l02812"></a><span class="lineno"> 2812</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>);</div><div class="line"><a name="l02813"></a><span class="lineno"> 2813</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02814"></a><span class="lineno"> 2814</span>&#160;</div><div class="line"><a name="l02815"></a><span class="lineno"> 2815</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;7&#39;</span>:</div><div class="line"><a name="l02816"></a><span class="lineno"> 2816</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a>);</div><div class="line"><a name="l02817"></a><span class="lineno"> 2817</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02818"></a><span class="lineno"> 2818</span>&#160;</div><div class="line"><a name="l02819"></a><span class="lineno"> 2819</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;8&#39;</span>:</div><div class="line"><a name="l02820"></a><span class="lineno"> 2820</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02821"></a><span class="lineno"> 2821</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02822"></a><span class="lineno"> 2822</span>&#160;</div><div class="line"><a name="l02823"></a><span class="lineno"> 2823</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;9&#39;</span>:</div><div class="line"><a name="l02824"></a><span class="lineno"> 2824</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>);</div><div class="line"><a name="l02825"></a><span class="lineno"> 2825</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02826"></a><span class="lineno"> 2826</span>&#160;</div><div class="line"><a name="l02827"></a><span class="lineno"> 2827</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02828"></a><span class="lineno"> 2828</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02829"></a><span class="lineno"> 2829</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-errormenu&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02830"></a><span class="lineno"> 2830</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02831"></a><span class="lineno"> 2831</span>&#160;      }</div><div class="line"><a name="l02832"></a><span class="lineno"> 2832</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02833"></a><span class="lineno"> 2833</span>&#160;   }</div><div class="line"><a name="l02834"></a><span class="lineno"> 2834</span>&#160;}</div><div class="line"><a name="l02835"></a><span class="lineno"> 2835</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02836"></a><span class="lineno"> 2836</span>&#160;<span class="comment">/*! \internal</span></div><div class="line"><a name="l02837"></a><span class="lineno"> 2837</span>&#160;<span class="comment"> * \brief Processes menu options for the adminstrator menu (accessible through the &#39;s&#39; option for app_meetme)</span></div><div class="line"><a name="l02838"></a><span class="lineno"> 2838</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02839"></a><span class="lineno"> 2839</span>&#160;<span class="comment"> * \param menu_mode a pointer to the currently active menu_mode.</span></div><div class="line"><a name="l02840"></a><span class="lineno"> 2840</span>&#160;<span class="comment"> * \param dtmf a pointer to the dtmf value currently being processed against the menu.</span></div><div class="line"><a name="l02841"></a><span class="lineno"> 2841</span>&#160;<span class="comment"> * \param conf the active conference for which the user has called the menu from.</span></div><div class="line"><a name="l02842"></a><span class="lineno"> 2842</span>&#160;<span class="comment"> * \param confflags flags used by conf for various options</span></div><div class="line"><a name="l02843"></a><span class="lineno"> 2843</span>&#160;<span class="comment"> * \param chan ast_channel belonging to the user who called the menu</span></div><div class="line"><a name="l02844"></a><span class="lineno"> 2844</span>&#160;<span class="comment"> * \param user which meetme conference user invoked the menu</span></div><div class="line"><a name="l02845"></a><span class="lineno"> 2845</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02846"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a5b81d4eabb9d7a2502f49cac82ebaea5"> 2846</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a5b81d4eabb9d7a2502f49cac82ebaea5">meetme_menu_admin</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4">menu_modes</a> *menu_mode, <span class="keywordtype">int</span> *dtmf, <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>, <span class="keyword">struct</span> <a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *confflags, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>)</div><div class="line"><a name="l02847"></a><span class="lineno"> 2847</span>&#160;{</div><div class="line"><a name="l02848"></a><span class="lineno"> 2848</span>&#160;   <span class="keywordflow">switch</span>(*dtmf) {</div><div class="line"><a name="l02849"></a><span class="lineno"> 2849</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>: <span class="comment">/* Un/Mute */</span></div><div class="line"><a name="l02850"></a><span class="lineno"> 2850</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02851"></a><span class="lineno"> 2851</span>&#160;      <span class="comment">/* for admin, change both admin and use flags */</span></div><div class="line"><a name="l02852"></a><span class="lineno"> 2852</span>&#160;      <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>)) {</div><div class="line"><a name="l02853"></a><span class="lineno"> 2853</span>&#160;         user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp;= ~(<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>);</div><div class="line"><a name="l02854"></a><span class="lineno"> 2854</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02855"></a><span class="lineno"> 2855</span>&#160;         user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>);</div><div class="line"><a name="l02856"></a><span class="lineno"> 2856</span>&#160;      }</div><div class="line"><a name="l02857"></a><span class="lineno"> 2857</span>&#160;</div><div class="line"><a name="l02858"></a><span class="lineno"> 2858</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) || (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>))) {</div><div class="line"><a name="l02859"></a><span class="lineno"> 2859</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-muted&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02860"></a><span class="lineno"> 2860</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02861"></a><span class="lineno"> 2861</span>&#160;         }</div><div class="line"><a name="l02862"></a><span class="lineno"> 2862</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02863"></a><span class="lineno"> 2863</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-unmuted&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02864"></a><span class="lineno"> 2864</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02865"></a><span class="lineno"> 2865</span>&#160;         }</div><div class="line"><a name="l02866"></a><span class="lineno"> 2866</span>&#160;      }</div><div class="line"><a name="l02867"></a><span class="lineno"> 2867</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02868"></a><span class="lineno"> 2868</span>&#160;</div><div class="line"><a name="l02869"></a><span class="lineno"> 2869</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;2&#39;</span>: <span class="comment">/* Un/Lock the Conference */</span></div><div class="line"><a name="l02870"></a><span class="lineno"> 2870</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02871"></a><span class="lineno"> 2871</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a>) {</div><div class="line"><a name="l02872"></a><span class="lineno"> 2872</span>&#160;         conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> = 0;</div><div class="line"><a name="l02873"></a><span class="lineno"> 2873</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-unlockednow&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02874"></a><span class="lineno"> 2874</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02875"></a><span class="lineno"> 2875</span>&#160;         }</div><div class="line"><a name="l02876"></a><span class="lineno"> 2876</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02877"></a><span class="lineno"> 2877</span>&#160;         conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> = 1;</div><div class="line"><a name="l02878"></a><span class="lineno"> 2878</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-lockednow&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02879"></a><span class="lineno"> 2879</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02880"></a><span class="lineno"> 2880</span>&#160;         }</div><div class="line"><a name="l02881"></a><span class="lineno"> 2881</span>&#160;      }</div><div class="line"><a name="l02882"></a><span class="lineno"> 2882</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02883"></a><span class="lineno"> 2883</span>&#160;</div><div class="line"><a name="l02884"></a><span class="lineno"> 2884</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;3&#39;</span>: <span class="comment">/* Eject last user */</span></div><div class="line"><a name="l02885"></a><span class="lineno"> 2885</span>&#160;   {</div><div class="line"><a name="l02886"></a><span class="lineno"> 2886</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *usr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02887"></a><span class="lineno"> 2887</span>&#160;      <span class="keywordtype">int</span> max_no = 0;</div><div class="line"><a name="l02888"></a><span class="lineno"> 2888</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a289c5ffee97869ba1b70fd91278f2957">user_max_cmp</a>, &amp;max_no);</div><div class="line"><a name="l02889"></a><span class="lineno"> 2889</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02890"></a><span class="lineno"> 2890</span>&#160;      usr = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, &amp;max_no, 0);</div><div class="line"><a name="l02891"></a><span class="lineno"> 2891</span>&#160;      <span class="keywordflow">if</span> ((<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(usr-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>) == <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan)) || <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;usr-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>)) {</div><div class="line"><a name="l02892"></a><span class="lineno"> 2892</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-errormenu&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02893"></a><span class="lineno"> 2893</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02894"></a><span class="lineno"> 2894</span>&#160;         }</div><div class="line"><a name="l02895"></a><span class="lineno"> 2895</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02896"></a><span class="lineno"> 2896</span>&#160;         usr-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14">ADMINFLAG_KICKME</a>;</div><div class="line"><a name="l02897"></a><span class="lineno"> 2897</span>&#160;      }</div><div class="line"><a name="l02898"></a><span class="lineno"> 2898</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(usr, -1);</div><div class="line"><a name="l02899"></a><span class="lineno"> 2899</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l02900"></a><span class="lineno"> 2900</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02901"></a><span class="lineno"> 2901</span>&#160;   }</div><div class="line"><a name="l02902"></a><span class="lineno"> 2902</span>&#160;</div><div class="line"><a name="l02903"></a><span class="lineno"> 2903</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;4&#39;</span>:</div><div class="line"><a name="l02904"></a><span class="lineno"> 2904</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a>);</div><div class="line"><a name="l02905"></a><span class="lineno"> 2905</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02906"></a><span class="lineno"> 2906</span>&#160;</div><div class="line"><a name="l02907"></a><span class="lineno"> 2907</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;5&#39;</span>:</div><div class="line"><a name="l02908"></a><span class="lineno"> 2908</span>&#160;      <span class="comment">/* Extend RT conference */</span></div><div class="line"><a name="l02909"></a><span class="lineno"> 2909</span>&#160;      <span class="keywordflow">if</span> (rt_schedule) {</div><div class="line"><a name="l02910"></a><span class="lineno"> 2910</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../df/d44/app__meetme_8c.html#a30a63a191f0d3fafcea99e759e0c46a5">rt_extend_conf</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>)) {</div><div class="line"><a name="l02911"></a><span class="lineno"> 2911</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-extended&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02912"></a><span class="lineno"> 2912</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02913"></a><span class="lineno"> 2913</span>&#160;            }</div><div class="line"><a name="l02914"></a><span class="lineno"> 2914</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02915"></a><span class="lineno"> 2915</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-nonextended&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02916"></a><span class="lineno"> 2916</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02917"></a><span class="lineno"> 2917</span>&#160;            }</div><div class="line"><a name="l02918"></a><span class="lineno"> 2918</span>&#160;         }</div><div class="line"><a name="l02919"></a><span class="lineno"> 2919</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l02920"></a><span class="lineno"> 2920</span>&#160;      }</div><div class="line"><a name="l02921"></a><span class="lineno"> 2921</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02922"></a><span class="lineno"> 2922</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02923"></a><span class="lineno"> 2923</span>&#160;</div><div class="line"><a name="l02924"></a><span class="lineno"> 2924</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;6&#39;</span>:</div><div class="line"><a name="l02925"></a><span class="lineno"> 2925</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>);</div><div class="line"><a name="l02926"></a><span class="lineno"> 2926</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02927"></a><span class="lineno"> 2927</span>&#160;</div><div class="line"><a name="l02928"></a><span class="lineno"> 2928</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;7&#39;</span>:</div><div class="line"><a name="l02929"></a><span class="lineno"> 2929</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a>);</div><div class="line"><a name="l02930"></a><span class="lineno"> 2930</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02931"></a><span class="lineno"> 2931</span>&#160;</div><div class="line"><a name="l02932"></a><span class="lineno"> 2932</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;8&#39;</span>:</div><div class="line"><a name="l02933"></a><span class="lineno"> 2933</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-adminmenu-menu8&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02934"></a><span class="lineno"> 2934</span>&#160;         <span class="comment">/* If the user provides DTMF while playing the sound, we want to drop right into the extended menu function with new DTMF once we get out of here. */</span></div><div class="line"><a name="l02935"></a><span class="lineno"> 2935</span>&#160;         *dtmf = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l02936"></a><span class="lineno"> 2936</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l02937"></a><span class="lineno"> 2937</span>&#160;      }</div><div class="line"><a name="l02938"></a><span class="lineno"> 2938</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9a5a6dbfc43f3c8834b7e718a78311ff">MENU_ADMIN_EXTENDED</a>;</div><div class="line"><a name="l02939"></a><span class="lineno"> 2939</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02940"></a><span class="lineno"> 2940</span>&#160;</div><div class="line"><a name="l02941"></a><span class="lineno"> 2941</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;9&#39;</span>:</div><div class="line"><a name="l02942"></a><span class="lineno"> 2942</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>);</div><div class="line"><a name="l02943"></a><span class="lineno"> 2943</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02944"></a><span class="lineno"> 2944</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l02945"></a><span class="lineno"> 2945</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l02946"></a><span class="lineno"> 2946</span>&#160;      <span class="comment">/* Play an error message! */</span></div><div class="line"><a name="l02947"></a><span class="lineno"> 2947</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-errormenu&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02948"></a><span class="lineno"> 2948</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l02949"></a><span class="lineno"> 2949</span>&#160;      }</div><div class="line"><a name="l02950"></a><span class="lineno"> 2950</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02951"></a><span class="lineno"> 2951</span>&#160;   }</div><div class="line"><a name="l02952"></a><span class="lineno"> 2952</span>&#160;</div><div class="line"><a name="l02953"></a><span class="lineno"> 2953</span>&#160;}</div><div class="line"><a name="l02954"></a><span class="lineno"> 2954</span>&#160;<span class="comment"></span></div><div class="line"><a name="l02955"></a><span class="lineno"> 2955</span>&#160;<span class="comment">/*! \internal</span></div><div class="line"><a name="l02956"></a><span class="lineno"> 2956</span>&#160;<span class="comment"> * \brief Processes menu options for the extended administrator menu (accessible through option 8 on the administrator menu)</span></div><div class="line"><a name="l02957"></a><span class="lineno"> 2957</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l02958"></a><span class="lineno"> 2958</span>&#160;<span class="comment"> * \param menu_mode a pointer to the currently active menu_mode.</span></div><div class="line"><a name="l02959"></a><span class="lineno"> 2959</span>&#160;<span class="comment"> * \param dtmf a pointer to the dtmf value currently being processed against the menu.</span></div><div class="line"><a name="l02960"></a><span class="lineno"> 2960</span>&#160;<span class="comment"> * \param conf the active conference for which the user has called the menu from.</span></div><div class="line"><a name="l02961"></a><span class="lineno"> 2961</span>&#160;<span class="comment"> * \param confflags flags used by conf for various options</span></div><div class="line"><a name="l02962"></a><span class="lineno"> 2962</span>&#160;<span class="comment"> * \param chan ast_channel belonging to the user who called the menu</span></div><div class="line"><a name="l02963"></a><span class="lineno"> 2963</span>&#160;<span class="comment"> * \param user which meetme conference user invoked the menu</span></div><div class="line"><a name="l02964"></a><span class="lineno"> 2964</span>&#160;<span class="comment"> * \param recordingtmp character buffer which may hold the name of the conference recording file</span></div><div class="line"><a name="l02965"></a><span class="lineno"> 2965</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l02966"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae3b7a24962a5f3c18133dbfb7170d9b3"> 2966</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae3b7a24962a5f3c18133dbfb7170d9b3">meetme_menu_admin_extended</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4">menu_modes</a> *menu_mode, <span class="keywordtype">int</span> *dtmf,</div><div class="line"><a name="l02967"></a><span class="lineno"> 2967</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>, <span class="keyword">struct</span> <a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *confflags, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan,</div><div class="line"><a name="l02968"></a><span class="lineno"> 2968</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keywordtype">char</span> *recordingtmp, <span class="keywordtype">int</span> recordingtmp_size,</div><div class="line"><a name="l02969"></a><span class="lineno"> 2969</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap_slin)</div><div class="line"><a name="l02970"></a><span class="lineno"> 2970</span>&#160;{</div><div class="line"><a name="l02971"></a><span class="lineno"> 2971</span>&#160;   <span class="keywordtype">int</span> keepplaying;</div><div class="line"><a name="l02972"></a><span class="lineno"> 2972</span>&#160;   <span class="keywordtype">int</span> playednamerec;</div><div class="line"><a name="l02973"></a><span class="lineno"> 2973</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l02974"></a><span class="lineno"> 2974</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> user_iter;</div><div class="line"><a name="l02975"></a><span class="lineno"> 2975</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *usr = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l02976"></a><span class="lineno"> 2976</span>&#160;</div><div class="line"><a name="l02977"></a><span class="lineno"> 2977</span>&#160;   <span class="keywordflow">switch</span>(*dtmf) {</div><div class="line"><a name="l02978"></a><span class="lineno"> 2978</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;1&#39;</span>: <span class="comment">/* *81 Roll call */</span></div><div class="line"><a name="l02979"></a><span class="lineno"> 2979</span>&#160;      keepplaying = 1;</div><div class="line"><a name="l02980"></a><span class="lineno"> 2980</span>&#160;      playednamerec = 0;</div><div class="line"><a name="l02981"></a><span class="lineno"> 2981</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 1) {</div><div class="line"><a name="l02982"></a><span class="lineno"> 2982</span>&#160;         <span class="keywordflow">if</span> (keepplaying &amp;&amp; !<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-onlyperson&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02983"></a><span class="lineno"> 2983</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l02984"></a><span class="lineno"> 2984</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l02985"></a><span class="lineno"> 2985</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l02986"></a><span class="lineno"> 2986</span>&#160;               keepplaying = 0;</div><div class="line"><a name="l02987"></a><span class="lineno"> 2987</span>&#160;            }</div><div class="line"><a name="l02988"></a><span class="lineno"> 2988</span>&#160;         }</div><div class="line"><a name="l02989"></a><span class="lineno"> 2989</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 2) {</div><div class="line"><a name="l02990"></a><span class="lineno"> 2990</span>&#160;         <span class="keywordflow">if</span> (keepplaying &amp;&amp; !<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-onlyone&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02991"></a><span class="lineno"> 2991</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l02992"></a><span class="lineno"> 2992</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l02993"></a><span class="lineno"> 2993</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l02994"></a><span class="lineno"> 2994</span>&#160;               keepplaying = 0;</div><div class="line"><a name="l02995"></a><span class="lineno"> 2995</span>&#160;            }</div><div class="line"><a name="l02996"></a><span class="lineno"> 2996</span>&#160;         }</div><div class="line"><a name="l02997"></a><span class="lineno"> 2997</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l02998"></a><span class="lineno"> 2998</span>&#160;         <span class="keywordflow">if</span> (keepplaying &amp;&amp; !<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-thereare&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l02999"></a><span class="lineno"> 2999</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l03000"></a><span class="lineno"> 3000</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03001"></a><span class="lineno"> 3001</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l03002"></a><span class="lineno"> 3002</span>&#160;               keepplaying = 0;</div><div class="line"><a name="l03003"></a><span class="lineno"> 3003</span>&#160;            }</div><div class="line"><a name="l03004"></a><span class="lineno"> 3004</span>&#160;         }</div><div class="line"><a name="l03005"></a><span class="lineno"> 3005</span>&#160;         <span class="keywordflow">if</span> (keepplaying) {</div><div class="line"><a name="l03006"></a><span class="lineno"> 3006</span>&#160;            res = <a class="code" href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a>(chan, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> - 1, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), (<span class="keywordtype">char</span> *) <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03007"></a><span class="lineno"> 3007</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03008"></a><span class="lineno"> 3008</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l03009"></a><span class="lineno"> 3009</span>&#160;               keepplaying = 0;</div><div class="line"><a name="l03010"></a><span class="lineno"> 3010</span>&#160;            }</div><div class="line"><a name="l03011"></a><span class="lineno"> 3011</span>&#160;         }</div><div class="line"><a name="l03012"></a><span class="lineno"> 3012</span>&#160;         <span class="keywordflow">if</span> (keepplaying &amp;&amp; !<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-otherinparty&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03013"></a><span class="lineno"> 3013</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l03014"></a><span class="lineno"> 3014</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03015"></a><span class="lineno"> 3015</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l03016"></a><span class="lineno"> 3016</span>&#160;               keepplaying = 0;</div><div class="line"><a name="l03017"></a><span class="lineno"> 3017</span>&#160;            }</div><div class="line"><a name="l03018"></a><span class="lineno"> 3018</span>&#160;         }</div><div class="line"><a name="l03019"></a><span class="lineno"> 3019</span>&#160;      }</div><div class="line"><a name="l03020"></a><span class="lineno"> 3020</span>&#160;      user_iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, 0);</div><div class="line"><a name="l03021"></a><span class="lineno"> 3021</span>&#160;      <span class="keywordflow">while</span>((usr = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;user_iter))) {</div><div class="line"><a name="l03022"></a><span class="lineno"> 3022</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(usr-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div><div class="line"><a name="l03023"></a><span class="lineno"> 3023</span>&#160;            <span class="keywordflow">if</span> (keepplaying &amp;&amp; !<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, usr-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03024"></a><span class="lineno"> 3024</span>&#160;               res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l03025"></a><span class="lineno"> 3025</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03026"></a><span class="lineno"> 3026</span>&#160;               <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l03027"></a><span class="lineno"> 3027</span>&#160;                  keepplaying = 0;</div><div class="line"><a name="l03028"></a><span class="lineno"> 3028</span>&#160;               }</div><div class="line"><a name="l03029"></a><span class="lineno"> 3029</span>&#160;            }</div><div class="line"><a name="l03030"></a><span class="lineno"> 3030</span>&#160;            playednamerec = 1;</div><div class="line"><a name="l03031"></a><span class="lineno"> 3031</span>&#160;         }</div><div class="line"><a name="l03032"></a><span class="lineno"> 3032</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(usr, -1);</div><div class="line"><a name="l03033"></a><span class="lineno"> 3033</span>&#160;      }</div><div class="line"><a name="l03034"></a><span class="lineno"> 3034</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;user_iter);</div><div class="line"><a name="l03035"></a><span class="lineno"> 3035</span>&#160;      <span class="keywordflow">if</span> (keepplaying &amp;&amp; playednamerec &amp;&amp; !<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-roll-callcomplete&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03036"></a><span class="lineno"> 3036</span>&#160;         res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l03037"></a><span class="lineno"> 3037</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03038"></a><span class="lineno"> 3038</span>&#160;         <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l03039"></a><span class="lineno"> 3039</span>&#160;            keepplaying = 0;</div><div class="line"><a name="l03040"></a><span class="lineno"> 3040</span>&#160;         }</div><div class="line"><a name="l03041"></a><span class="lineno"> 3041</span>&#160;      }</div><div class="line"><a name="l03042"></a><span class="lineno"> 3042</span>&#160;</div><div class="line"><a name="l03043"></a><span class="lineno"> 3043</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l03044"></a><span class="lineno"> 3044</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03045"></a><span class="lineno"> 3045</span>&#160;</div><div class="line"><a name="l03046"></a><span class="lineno"> 3046</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;2&#39;</span>: <span class="comment">/* *82 Eject all non-admins */</span></div><div class="line"><a name="l03047"></a><span class="lineno"> 3047</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 1) {</div><div class="line"><a name="l03048"></a><span class="lineno"> 3048</span>&#160;         <span class="keywordflow">if</span>(!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-errormenu&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03049"></a><span class="lineno"> 3049</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03050"></a><span class="lineno"> 3050</span>&#160;         }</div><div class="line"><a name="l03051"></a><span class="lineno"> 3051</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03052"></a><span class="lineno"> 3052</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a18611e5423481fce6079cfdc9be23859">user_set_kickme_cb</a>, &amp;conf);</div><div class="line"><a name="l03053"></a><span class="lineno"> 3053</span>&#160;      }</div><div class="line"><a name="l03054"></a><span class="lineno"> 3054</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03055"></a><span class="lineno"> 3055</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l03056"></a><span class="lineno"> 3056</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03057"></a><span class="lineno"> 3057</span>&#160;</div><div class="line"><a name="l03058"></a><span class="lineno"> 3058</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;3&#39;</span>: <span class="comment">/* *83 (Admin) mute/unmute all non-admins */</span></div><div class="line"><a name="l03059"></a><span class="lineno"> 3059</span>&#160;      <span class="keywordflow">if</span>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0775e550a18cb0caa88650d9f8369ce1">gmuted</a>) {</div><div class="line"><a name="l03060"></a><span class="lineno"> 3060</span>&#160;         conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0775e550a18cb0caa88650d9f8369ce1">gmuted</a> = 0;</div><div class="line"><a name="l03061"></a><span class="lineno"> 3061</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#aab43cc97424af77028a4caa8e54d8fc8">user_set_unmuted_cb</a>, &amp;conf);</div><div class="line"><a name="l03062"></a><span class="lineno"> 3062</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-now-unmuted&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03063"></a><span class="lineno"> 3063</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03064"></a><span class="lineno"> 3064</span>&#160;         }</div><div class="line"><a name="l03065"></a><span class="lineno"> 3065</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03066"></a><span class="lineno"> 3066</span>&#160;         conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0775e550a18cb0caa88650d9f8369ce1">gmuted</a> = 1;</div><div class="line"><a name="l03067"></a><span class="lineno"> 3067</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a7c7ed16928ff798a1ad1a2f7eaf0ebe0">user_set_muted_cb</a>, &amp;conf);</div><div class="line"><a name="l03068"></a><span class="lineno"> 3068</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-now-muted&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03069"></a><span class="lineno"> 3069</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03070"></a><span class="lineno"> 3070</span>&#160;         }</div><div class="line"><a name="l03071"></a><span class="lineno"> 3071</span>&#160;      }</div><div class="line"><a name="l03072"></a><span class="lineno"> 3072</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03073"></a><span class="lineno"> 3073</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l03074"></a><span class="lineno"> 3074</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03075"></a><span class="lineno"> 3075</span>&#160;</div><div class="line"><a name="l03076"></a><span class="lineno"> 3076</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;4&#39;</span>: <span class="comment">/* *84 Record conference */</span></div><div class="line"><a name="l03077"></a><span class="lineno"> 3077</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af06bdf9e29424094b6e9eddc4d9f9f62">recording</a> != <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298aed2f74b0993cd2122169387b4ff74113">MEETME_RECORD_ACTIVE</a>) {</div><div class="line"><a name="l03078"></a><span class="lineno"> 3078</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab2de736b42974f12ec7d57c41d234bf4">ast_set_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a>);</div><div class="line"><a name="l03079"></a><span class="lineno"> 3079</span>&#160;         <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>) {</div><div class="line"><a name="l03080"></a><span class="lineno"> 3080</span>&#160;            <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l03081"></a><span class="lineno"> 3081</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03082"></a><span class="lineno"> 3082</span>&#160;            <span class="keywordflow">if</span> ((var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MEETME_RECORDINGFILE&quot;</span>))) {</div><div class="line"><a name="l03083"></a><span class="lineno"> 3083</span>&#160;               conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var);</div><div class="line"><a name="l03084"></a><span class="lineno"> 3084</span>&#160;            }</div><div class="line"><a name="l03085"></a><span class="lineno"> 3085</span>&#160;            <span class="keywordflow">if</span> ((var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MEETME_RECORDINGFORMAT&quot;</span>))) {</div><div class="line"><a name="l03086"></a><span class="lineno"> 3086</span>&#160;               conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var);</div><div class="line"><a name="l03087"></a><span class="lineno"> 3087</span>&#160;            }</div><div class="line"><a name="l03088"></a><span class="lineno"> 3088</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03089"></a><span class="lineno"> 3089</span>&#160;            <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>) {</div><div class="line"><a name="l03090"></a><span class="lineno"> 3090</span>&#160;               snprintf(recordingtmp, recordingtmp_size, <span class="stringliteral">&quot;meetme-conf-rec-%s-%s&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l03091"></a><span class="lineno"> 3091</span>&#160;               conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(recordingtmp);</div><div class="line"><a name="l03092"></a><span class="lineno"> 3092</span>&#160;            }</div><div class="line"><a name="l03093"></a><span class="lineno"> 3093</span>&#160;            <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>) {</div><div class="line"><a name="l03094"></a><span class="lineno"> 3094</span>&#160;               conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;wav&quot;</span>);</div><div class="line"><a name="l03095"></a><span class="lineno"> 3095</span>&#160;            }</div><div class="line"><a name="l03096"></a><span class="lineno"> 3096</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Starting recording of MeetMe Conference %s into file %s.%s.\n&quot;</span>,</div><div class="line"><a name="l03097"></a><span class="lineno"> 3097</span>&#160;            conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>);</div><div class="line"><a name="l03098"></a><span class="lineno"> 3098</span>&#160;         }</div><div class="line"><a name="l03099"></a><span class="lineno"> 3099</span>&#160;</div><div class="line"><a name="l03100"></a><span class="lineno"> 3100</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">recordthreadlock</a>);</div><div class="line"><a name="l03101"></a><span class="lineno"> 3101</span>&#160;         <span class="keywordflow">if</span> ((conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#aa9af2bfdaafa007e201fc6f01dfd9f68">recordthread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a>) &amp;&amp; ((conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(<span class="stringliteral">&quot;DAHDI&quot;</span>, cap_slin, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, <span class="stringliteral">&quot;pseudo&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)))) {</div><div class="line"><a name="l03102"></a><span class="lineno"> 3102</span>&#160;            <span class="keyword">struct </span>dahdi_confinfo dahdic;</div><div class="line"><a name="l03103"></a><span class="lineno"> 3103</span>&#160;</div><div class="line"><a name="l03104"></a><span class="lineno"> 3104</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l03105"></a><span class="lineno"> 3105</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l03106"></a><span class="lineno"> 3106</span>&#160;            dahdic.chan = 0;</div><div class="line"><a name="l03107"></a><span class="lineno"> 3107</span>&#160;            dahdic.confno = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">dahdiconf</a>;</div><div class="line"><a name="l03108"></a><span class="lineno"> 3108</span>&#160;            dahdic.confmode = DAHDI_CONF_CONFANN | DAHDI_CONF_CONFANNMON;</div><div class="line"><a name="l03109"></a><span class="lineno"> 3109</span>&#160;            <span class="keywordflow">if</span> (ioctl(<a class="code" href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>, 0), DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l03110"></a><span class="lineno"> 3110</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error starting listen channel\n&quot;</span>);</div><div class="line"><a name="l03111"></a><span class="lineno"> 3111</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>);</div><div class="line"><a name="l03112"></a><span class="lineno"> 3112</span>&#160;               conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03113"></a><span class="lineno"> 3113</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03114"></a><span class="lineno"> 3114</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#aa73be876e3a4024b91ce2e09d8b945d1">ast_pthread_create_detached_background</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#aa9af2bfdaafa007e201fc6f01dfd9f68">recordthread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, recordthread, conf);</div><div class="line"><a name="l03115"></a><span class="lineno"> 3115</span>&#160;            }</div><div class="line"><a name="l03116"></a><span class="lineno"> 3116</span>&#160;         }</div><div class="line"><a name="l03117"></a><span class="lineno"> 3117</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">recordthreadlock</a>);</div><div class="line"><a name="l03118"></a><span class="lineno"> 3118</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-now-recording&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03119"></a><span class="lineno"> 3119</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03120"></a><span class="lineno"> 3120</span>&#160;         }</div><div class="line"><a name="l03121"></a><span class="lineno"> 3121</span>&#160;      }</div><div class="line"><a name="l03122"></a><span class="lineno"> 3122</span>&#160;</div><div class="line"><a name="l03123"></a><span class="lineno"> 3123</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03124"></a><span class="lineno"> 3124</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l03125"></a><span class="lineno"> 3125</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03126"></a><span class="lineno"> 3126</span>&#160;</div><div class="line"><a name="l03127"></a><span class="lineno"> 3127</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;8&#39;</span>: <span class="comment">/* *88 Exit the menu and return to the conference... without an error message */</span></div><div class="line"><a name="l03128"></a><span class="lineno"> 3128</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03129"></a><span class="lineno"> 3129</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l03130"></a><span class="lineno"> 3130</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03131"></a><span class="lineno"> 3131</span>&#160;</div><div class="line"><a name="l03132"></a><span class="lineno"> 3132</span>&#160;   <span class="keywordflow">default</span>:</div><div class="line"><a name="l03133"></a><span class="lineno"> 3133</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-errormenu&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03134"></a><span class="lineno"> 3134</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03135"></a><span class="lineno"> 3135</span>&#160;      }</div><div class="line"><a name="l03136"></a><span class="lineno"> 3136</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03137"></a><span class="lineno"> 3137</span>&#160;      *menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l03138"></a><span class="lineno"> 3138</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03139"></a><span class="lineno"> 3139</span>&#160;   }</div><div class="line"><a name="l03140"></a><span class="lineno"> 3140</span>&#160;}</div><div class="line"><a name="l03141"></a><span class="lineno"> 3141</span>&#160;<span class="comment"></span></div><div class="line"><a name="l03142"></a><span class="lineno"> 3142</span>&#160;<span class="comment">/*! \internal</span></div><div class="line"><a name="l03143"></a><span class="lineno"> 3143</span>&#160;<span class="comment"> * \brief Processes menu options for the various menu types (accessible through the &#39;s&#39; option for app_meetme)</span></div><div class="line"><a name="l03144"></a><span class="lineno"> 3144</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l03145"></a><span class="lineno"> 3145</span>&#160;<span class="comment"> * \param menu_mode a pointer to the currently active menu_mode.</span></div><div class="line"><a name="l03146"></a><span class="lineno"> 3146</span>&#160;<span class="comment"> * \param dtmf a pointer to the dtmf value currently being processed against the menu.</span></div><div class="line"><a name="l03147"></a><span class="lineno"> 3147</span>&#160;<span class="comment"> * \param conf the active conference for which the user has called the menu from.</span></div><div class="line"><a name="l03148"></a><span class="lineno"> 3148</span>&#160;<span class="comment"> * \param confflags flags used by conf for various options</span></div><div class="line"><a name="l03149"></a><span class="lineno"> 3149</span>&#160;<span class="comment"> * \param chan ast_channel belonging to the user who called the menu</span></div><div class="line"><a name="l03150"></a><span class="lineno"> 3150</span>&#160;<span class="comment"> * \param user which meetme conference user invoked the menu</span></div><div class="line"><a name="l03151"></a><span class="lineno"> 3151</span>&#160;<span class="comment"> * \param recordingtmp character buffer which may hold the name of the conference recording file</span></div><div class="line"><a name="l03152"></a><span class="lineno"> 3152</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l03153"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a79498a73deb647def1fc19bf0bc4e42d"> 3153</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a79498a73deb647def1fc19bf0bc4e42d">meetme_menu</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4">menu_modes</a> *menu_mode, <span class="keywordtype">int</span> *dtmf,</div><div class="line"><a name="l03154"></a><span class="lineno"> 3154</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>, <span class="keyword">struct</span> <a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *confflags, <span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan,</div><div class="line"><a name="l03155"></a><span class="lineno"> 3155</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a>, <span class="keywordtype">char</span> *recordingtmp, <span class="keywordtype">int</span> recordingtmp_size,</div><div class="line"><a name="l03156"></a><span class="lineno"> 3156</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap_slin)</div><div class="line"><a name="l03157"></a><span class="lineno"> 3157</span>&#160;{</div><div class="line"><a name="l03158"></a><span class="lineno"> 3158</span>&#160;   <span class="keywordflow">switch</span> (*menu_mode) {</div><div class="line"><a name="l03159"></a><span class="lineno"> 3159</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>:</div><div class="line"><a name="l03160"></a><span class="lineno"> 3160</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03161"></a><span class="lineno"> 3161</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4ab3da6b31f681a1e2901440b330a266a8">MENU_NORMAL</a>:</div><div class="line"><a name="l03162"></a><span class="lineno"> 3162</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1a18c35c2d3cf47bb0b07f2ec3c3d434">meetme_menu_normal</a>(menu_mode, dtmf, conf, confflags, chan, user);</div><div class="line"><a name="l03163"></a><span class="lineno"> 3163</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03164"></a><span class="lineno"> 3164</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a98486ef3937db9b46bd9307a5f2b71a9">MENU_ADMIN</a>:</div><div class="line"><a name="l03165"></a><span class="lineno"> 3165</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a5b81d4eabb9d7a2502f49cac82ebaea5">meetme_menu_admin</a>(menu_mode, dtmf, conf, confflags, chan, user);</div><div class="line"><a name="l03166"></a><span class="lineno"> 3166</span>&#160;      <span class="comment">/* Admin Menu is capable of branching into another menu, in which case it will reset dtmf and change the menu mode. */</span></div><div class="line"><a name="l03167"></a><span class="lineno"> 3167</span>&#160;      <span class="keywordflow">if</span> (*menu_mode != <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9a5a6dbfc43f3c8834b7e718a78311ff">MENU_ADMIN_EXTENDED</a> || (*dtmf &lt;= 0)) {</div><div class="line"><a name="l03168"></a><span class="lineno"> 3168</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l03169"></a><span class="lineno"> 3169</span>&#160;      }</div><div class="line"><a name="l03170"></a><span class="lineno"> 3170</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9a5a6dbfc43f3c8834b7e718a78311ff">MENU_ADMIN_EXTENDED</a>:</div><div class="line"><a name="l03171"></a><span class="lineno"> 3171</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#ae3b7a24962a5f3c18133dbfb7170d9b3">meetme_menu_admin_extended</a>(menu_mode, dtmf, conf, confflags, chan, user,</div><div class="line"><a name="l03172"></a><span class="lineno"> 3172</span>&#160;         recordingtmp, recordingtmp_size, cap_slin);</div><div class="line"><a name="l03173"></a><span class="lineno"> 3173</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l03174"></a><span class="lineno"> 3174</span>&#160;   }</div><div class="line"><a name="l03175"></a><span class="lineno"> 3175</span>&#160;}</div><div class="line"><a name="l03176"></a><span class="lineno"> 3176</span>&#160;</div><div class="line"><a name="l03177"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a9970b644e96d7aa6caad2001d38eb741"> 3177</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a9970b644e96d7aa6caad2001d38eb741">conf_run</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>, <span class="keyword">struct</span> <a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *confflags, <span class="keywordtype">char</span> *optargs[])</div><div class="line"><a name="l03178"></a><span class="lineno"> 3178</span>&#160;{</div><div class="line"><a name="l03179"></a><span class="lineno"> 3179</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03180"></a><span class="lineno"> 3180</span>&#160;   <span class="keywordtype">int</span> fd;</div><div class="line"><a name="l03181"></a><span class="lineno"> 3181</span>&#160;   <span class="keyword">struct </span>dahdi_confinfo dahdic, dahdic_empty;</div><div class="line"><a name="l03182"></a><span class="lineno"> 3182</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f;</div><div class="line"><a name="l03183"></a><span class="lineno"> 3183</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *<a class="code" href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a>;</div><div class="line"><a name="l03184"></a><span class="lineno"> 3184</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> fr;</div><div class="line"><a name="l03185"></a><span class="lineno"> 3185</span>&#160;   <span class="keywordtype">int</span> outfd;</div><div class="line"><a name="l03186"></a><span class="lineno"> 3186</span>&#160;   <span class="keywordtype">int</span> ms;</div><div class="line"><a name="l03187"></a><span class="lineno"> 3187</span>&#160;   <span class="keywordtype">int</span> nfds;</div><div class="line"><a name="l03188"></a><span class="lineno"> 3188</span>&#160;   <span class="keywordtype">int</span> res;</div><div class="line"><a name="l03189"></a><span class="lineno"> 3189</span>&#160;   <span class="keywordtype">int</span> retrydahdi;</div><div class="line"><a name="l03190"></a><span class="lineno"> 3190</span>&#160;   <span class="keywordtype">int</span> origfd;</div><div class="line"><a name="l03191"></a><span class="lineno"> 3191</span>&#160;   <span class="keywordtype">int</span> musiconhold = 0, mohtempstopped = 0;</div><div class="line"><a name="l03192"></a><span class="lineno"> 3192</span>&#160;   <span class="keywordtype">int</span> firstpass = 0;</div><div class="line"><a name="l03193"></a><span class="lineno"> 3193</span>&#160;   <span class="keywordtype">int</span> lastmarked = 0;</div><div class="line"><a name="l03194"></a><span class="lineno"> 3194</span>&#160;   <span class="keywordtype">int</span> currentmarked = 0;</div><div class="line"><a name="l03195"></a><span class="lineno"> 3195</span>&#160;   <span class="keywordtype">int</span> ret = -1;</div><div class="line"><a name="l03196"></a><span class="lineno"> 3196</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l03197"></a><span class="lineno"> 3197</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4">menu_modes</a> menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a>;</div><div class="line"><a name="l03198"></a><span class="lineno"> 3198</span>&#160;   <span class="keywordtype">int</span> talkreq_manager = 0;</div><div class="line"><a name="l03199"></a><span class="lineno"> 3199</span>&#160;   <span class="keywordtype">int</span> using_pseudo = 0;</div><div class="line"><a name="l03200"></a><span class="lineno"> 3200</span>&#160;   <span class="keywordtype">int</span> duration = 20;</div><div class="line"><a name="l03201"></a><span class="lineno"> 3201</span>&#160;   <span class="keywordtype">int</span> sent_event = 0;</div><div class="line"><a name="l03202"></a><span class="lineno"> 3202</span>&#160;   <span class="keywordtype">int</span> checked = 0;</div><div class="line"><a name="l03203"></a><span class="lineno"> 3203</span>&#160;   <span class="keywordtype">int</span> announcement_played = 0;</div><div class="line"><a name="l03204"></a><span class="lineno"> 3204</span>&#160;   <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l03205"></a><span class="lineno"> 3205</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d6/de5/structast__dsp.html">ast_dsp</a> *dsp = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03206"></a><span class="lineno"> 3206</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/da3/structast__app.html">ast_app</a> *agi_app;</div><div class="line"><a name="l03207"></a><span class="lineno"> 3207</span>&#160;   <span class="keywordtype">char</span> *agifile;</div><div class="line"><a name="l03208"></a><span class="lineno"> 3208</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *agifiledefault = <span class="stringliteral">&quot;conf-background.agi&quot;</span>, *tmpvar;</div><div class="line"><a name="l03209"></a><span class="lineno"> 3209</span>&#160;   <span class="keywordtype">char</span> meetmesecs[30] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03210"></a><span class="lineno"> 3210</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dc/df4/app__voicemail_8c.html#ae6cb2a817afda0bf313344240f1eacda">exitcontext</a>[<a class="code" href="../../d5/d7b/channel_8h.html#abcf1aea85b924e9cd605040b86241e2a">AST_MAX_CONTEXT</a>] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03211"></a><span class="lineno"> 3211</span>&#160;   <span class="keywordtype">char</span> recordingtmp[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a> * 2] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03212"></a><span class="lineno"> 3212</span>&#160;   <span class="keywordtype">char</span> members[10] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l03213"></a><span class="lineno"> 3213</span>&#160;   <span class="keywordtype">int</span> dtmf = 0, opt_waitmarked_timeout = 0;</div><div class="line"><a name="l03214"></a><span class="lineno"> 3214</span>&#160;   time_t <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = 0;</div><div class="line"><a name="l03215"></a><span class="lineno"> 3215</span>&#160;   <span class="keyword">struct </span>dahdi_bufferinfo bi;</div><div class="line"><a name="l03216"></a><span class="lineno"> 3216</span>&#160;   <span class="keywordtype">char</span> __buf[<a class="code" href="../../df/d44/app__meetme_8c.html#a2be5f0b8c25b67aa5ca5502d61c16b73">CONF_SIZE</a> + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>];</div><div class="line"><a name="l03217"></a><span class="lineno"> 3217</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a> = __buf + <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l03218"></a><span class="lineno"> 3218</span>&#160;   <span class="keywordtype">char</span> *exitkeys = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03219"></a><span class="lineno"> 3219</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> calldurationlimit = 0;</div><div class="line"><a name="l03220"></a><span class="lineno"> 3220</span>&#160;   <span class="keywordtype">long</span> timelimit = 0;</div><div class="line"><a name="l03221"></a><span class="lineno"> 3221</span>&#160;   <span class="keywordtype">long</span> play_warning = 0;</div><div class="line"><a name="l03222"></a><span class="lineno"> 3222</span>&#160;   <span class="keywordtype">long</span> warning_freq = 0;</div><div class="line"><a name="l03223"></a><span class="lineno"> 3223</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *warning_sound = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03224"></a><span class="lineno"> 3224</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *end_sound = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03225"></a><span class="lineno"> 3225</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l03226"></a><span class="lineno"> 3226</span>&#160;   <span class="keywordtype">long</span> time_left_ms = 0;</div><div class="line"><a name="l03227"></a><span class="lineno"> 3227</span>&#160;   <span class="keyword">struct </span>timeval nexteventts = { 0, };</div><div class="line"><a name="l03228"></a><span class="lineno"> 3228</span>&#160;   <span class="keywordtype">int</span> to;</div><div class="line"><a name="l03229"></a><span class="lineno"> 3229</span>&#160;   <span class="keywordtype">int</span> setusercount = 0;</div><div class="line"><a name="l03230"></a><span class="lineno"> 3230</span>&#160;   <span class="keywordtype">int</span> confsilence = 0, totalsilence = 0;</div><div class="line"><a name="l03231"></a><span class="lineno"> 3231</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a>, *<a class="code" href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a>;</div><div class="line"><a name="l03232"></a><span class="lineno"> 3232</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d69/structast__format__cap.html">ast_format_cap</a> *cap_slin = <a class="code" href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a>(<a class="code" href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a>);</div><div class="line"><a name="l03233"></a><span class="lineno"> 3233</span>&#160;</div><div class="line"><a name="l03234"></a><span class="lineno"> 3234</span>&#160;   <span class="keywordflow">if</span> (!cap_slin) {</div><div class="line"><a name="l03235"></a><span class="lineno"> 3235</span>&#160;      <span class="keywordflow">goto</span> conf_run_cleanup;</div><div class="line"><a name="l03236"></a><span class="lineno"> 3236</span>&#160;   }</div><div class="line"><a name="l03237"></a><span class="lineno"> 3237</span>&#160;   <a class="code" href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a>(cap_slin, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>, 0);</div><div class="line"><a name="l03238"></a><span class="lineno"> 3238</span>&#160;</div><div class="line"><a name="l03239"></a><span class="lineno"> 3239</span>&#160;   <span class="keywordflow">if</span> (!(user = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*user), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))) {</div><div class="line"><a name="l03240"></a><span class="lineno"> 3240</span>&#160;      <span class="keywordflow">goto</span> conf_run_cleanup;</div><div class="line"><a name="l03241"></a><span class="lineno"> 3241</span>&#160;   }</div><div class="line"><a name="l03242"></a><span class="lineno"> 3242</span>&#160;</div><div class="line"><a name="l03243"></a><span class="lineno"> 3243</span>&#160;   <span class="comment">/* Possible timeout waiting for marked user */</span></div><div class="line"><a name="l03244"></a><span class="lineno"> 3244</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>) &amp;&amp;</div><div class="line"><a name="l03245"></a><span class="lineno"> 3245</span>&#160;      !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eabfe6814e02021fa3fde4e9dd602d110b">OPT_ARG_WAITMARKED</a>]) &amp;&amp;</div><div class="line"><a name="l03246"></a><span class="lineno"> 3246</span>&#160;      (sscanf(optargs[OPT_ARG_WAITMARKED], <span class="stringliteral">&quot;%30d&quot;</span>, &amp;opt_waitmarked_timeout) == 1) &amp;&amp;</div><div class="line"><a name="l03247"></a><span class="lineno"> 3247</span>&#160;      (opt_waitmarked_timeout &gt; 0)) {</div><div class="line"><a name="l03248"></a><span class="lineno"> 3248</span>&#160;      timeout = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) + opt_waitmarked_timeout;</div><div class="line"><a name="l03249"></a><span class="lineno"> 3249</span>&#160;   }</div><div class="line"><a name="l03250"></a><span class="lineno"> 3250</span>&#160;</div><div class="line"><a name="l03251"></a><span class="lineno"> 3251</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8626cc2dc0a4e9e97be85ecd0ebaef15">CONFFLAG_DURATION_STOP</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea22d5403ad37aee04f7beb26b97518b33">OPT_ARG_DURATION_STOP</a>])) {</div><div class="line"><a name="l03252"></a><span class="lineno"> 3252</span>&#160;      calldurationlimit = atoi(optargs[OPT_ARG_DURATION_STOP]);</div><div class="line"><a name="l03253"></a><span class="lineno"> 3253</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting call duration limit to %u seconds.\n&quot;</span>, calldurationlimit);</div><div class="line"><a name="l03254"></a><span class="lineno"> 3254</span>&#160;   }</div><div class="line"><a name="l03255"></a><span class="lineno"> 3255</span>&#160;</div><div class="line"><a name="l03256"></a><span class="lineno"> 3256</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a67bec58b805ac5d933829e8a28fa89e6">CONFFLAG_DURATION_LIMIT</a>) &amp;&amp; !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab92f4dda872862b445c7ee78b5eca872">OPT_ARG_DURATION_LIMIT</a>])) {</div><div class="line"><a name="l03257"></a><span class="lineno"> 3257</span>&#160;      <span class="keywordtype">char</span> *limit_str, *warning_str, *warnfreq_str;</div><div class="line"><a name="l03258"></a><span class="lineno"> 3258</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l03259"></a><span class="lineno"> 3259</span>&#160;</div><div class="line"><a name="l03260"></a><span class="lineno"> 3260</span>&#160;      parse = optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab92f4dda872862b445c7ee78b5eca872">OPT_ARG_DURATION_LIMIT</a>];</div><div class="line"><a name="l03261"></a><span class="lineno"> 3261</span>&#160;      limit_str = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;parse, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l03262"></a><span class="lineno"> 3262</span>&#160;      warning_str = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;parse, <span class="stringliteral">&quot;:&quot;</span>);</div><div class="line"><a name="l03263"></a><span class="lineno"> 3263</span>&#160;      warnfreq_str = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l03264"></a><span class="lineno"> 3264</span>&#160;</div><div class="line"><a name="l03265"></a><span class="lineno"> 3265</span>&#160;      timelimit = atol(limit_str);</div><div class="line"><a name="l03266"></a><span class="lineno"> 3266</span>&#160;      <span class="keywordflow">if</span> (warning_str)</div><div class="line"><a name="l03267"></a><span class="lineno"> 3267</span>&#160;         play_warning = atol(warning_str);</div><div class="line"><a name="l03268"></a><span class="lineno"> 3268</span>&#160;      <span class="keywordflow">if</span> (warnfreq_str)</div><div class="line"><a name="l03269"></a><span class="lineno"> 3269</span>&#160;         warning_freq = atol(warnfreq_str);</div><div class="line"><a name="l03270"></a><span class="lineno"> 3270</span>&#160;</div><div class="line"><a name="l03271"></a><span class="lineno"> 3271</span>&#160;      <span class="keywordflow">if</span> (!timelimit) {</div><div class="line"><a name="l03272"></a><span class="lineno"> 3272</span>&#160;         timelimit = play_warning = warning_freq = 0;</div><div class="line"><a name="l03273"></a><span class="lineno"> 3273</span>&#160;         warning_sound = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03274"></a><span class="lineno"> 3274</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (play_warning &gt; timelimit) {</div><div class="line"><a name="l03275"></a><span class="lineno"> 3275</span>&#160;         <span class="keywordflow">if</span> (!warning_freq) {</div><div class="line"><a name="l03276"></a><span class="lineno"> 3276</span>&#160;            play_warning = 0;</div><div class="line"><a name="l03277"></a><span class="lineno"> 3277</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03278"></a><span class="lineno"> 3278</span>&#160;            <span class="keywordflow">while</span> (play_warning &gt; timelimit)</div><div class="line"><a name="l03279"></a><span class="lineno"> 3279</span>&#160;               play_warning -= warning_freq;</div><div class="line"><a name="l03280"></a><span class="lineno"> 3280</span>&#160;            <span class="keywordflow">if</span> (play_warning &lt; 1)</div><div class="line"><a name="l03281"></a><span class="lineno"> 3281</span>&#160;               play_warning = warning_freq = 0;</div><div class="line"><a name="l03282"></a><span class="lineno"> 3282</span>&#160;         }</div><div class="line"><a name="l03283"></a><span class="lineno"> 3283</span>&#160;      }</div><div class="line"><a name="l03284"></a><span class="lineno"> 3284</span>&#160;</div><div class="line"><a name="l03285"></a><span class="lineno"> 3285</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting conference duration limit to: %ldms.\n&quot;</span>, timelimit);</div><div class="line"><a name="l03286"></a><span class="lineno"> 3286</span>&#160;      <span class="keywordflow">if</span> (play_warning) {</div><div class="line"><a name="l03287"></a><span class="lineno"> 3287</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting warning time to %ldms from the conference duration limit.\n&quot;</span>, play_warning);</div><div class="line"><a name="l03288"></a><span class="lineno"> 3288</span>&#160;      }</div><div class="line"><a name="l03289"></a><span class="lineno"> 3289</span>&#160;      <span class="keywordflow">if</span> (warning_freq) {</div><div class="line"><a name="l03290"></a><span class="lineno"> 3290</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(3, <span class="stringliteral">&quot;Setting warning frequency to %ldms.\n&quot;</span>, warning_freq);</div><div class="line"><a name="l03291"></a><span class="lineno"> 3291</span>&#160;      }</div><div class="line"><a name="l03292"></a><span class="lineno"> 3292</span>&#160;</div><div class="line"><a name="l03293"></a><span class="lineno"> 3293</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03294"></a><span class="lineno"> 3294</span>&#160;      <span class="keywordflow">if</span> ((var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;CONF_LIMIT_WARNING_FILE&quot;</span>))) {</div><div class="line"><a name="l03295"></a><span class="lineno"> 3295</span>&#160;         var = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(var);</div><div class="line"><a name="l03296"></a><span class="lineno"> 3296</span>&#160;      }</div><div class="line"><a name="l03297"></a><span class="lineno"> 3297</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03298"></a><span class="lineno"> 3298</span>&#160;</div><div class="line"><a name="l03299"></a><span class="lineno"> 3299</span>&#160;      warning_sound = var ? <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a> : <span class="stringliteral">&quot;timeleft&quot;</span>;</div><div class="line"><a name="l03300"></a><span class="lineno"> 3300</span>&#160;</div><div class="line"><a name="l03301"></a><span class="lineno"> 3301</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03302"></a><span class="lineno"> 3302</span>&#160;      <span class="keywordflow">if</span> ((var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;CONF_LIMIT_TIMEOUT_FILE&quot;</span>))) {</div><div class="line"><a name="l03303"></a><span class="lineno"> 3303</span>&#160;         var = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(var);</div><div class="line"><a name="l03304"></a><span class="lineno"> 3304</span>&#160;      }</div><div class="line"><a name="l03305"></a><span class="lineno"> 3305</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03306"></a><span class="lineno"> 3306</span>&#160;</div><div class="line"><a name="l03307"></a><span class="lineno"> 3307</span>&#160;      end_sound = var ? <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a> : <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03308"></a><span class="lineno"> 3308</span>&#160;</div><div class="line"><a name="l03309"></a><span class="lineno"> 3309</span>&#160;      <span class="comment">/* undo effect of S(x) in case they are both used */</span></div><div class="line"><a name="l03310"></a><span class="lineno"> 3310</span>&#160;      calldurationlimit = 0;</div><div class="line"><a name="l03311"></a><span class="lineno"> 3311</span>&#160;      <span class="comment">/* more efficient do it like S(x) does since no advanced opts */</span></div><div class="line"><a name="l03312"></a><span class="lineno"> 3312</span>&#160;      <span class="keywordflow">if</span> (!play_warning &amp;&amp; !end_sound &amp;&amp; timelimit) {</div><div class="line"><a name="l03313"></a><span class="lineno"> 3313</span>&#160;         calldurationlimit = timelimit / 1000;</div><div class="line"><a name="l03314"></a><span class="lineno"> 3314</span>&#160;         timelimit = play_warning = warning_freq = 0;</div><div class="line"><a name="l03315"></a><span class="lineno"> 3315</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03316"></a><span class="lineno"> 3316</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Limit Data for this call:\n&quot;</span>);</div><div class="line"><a name="l03317"></a><span class="lineno"> 3317</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;- timelimit     = %ld\n&quot;</span>, timelimit);</div><div class="line"><a name="l03318"></a><span class="lineno"> 3318</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;- play_warning  = %ld\n&quot;</span>, play_warning);</div><div class="line"><a name="l03319"></a><span class="lineno"> 3319</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;- warning_freq  = %ld\n&quot;</span>, warning_freq);</div><div class="line"><a name="l03320"></a><span class="lineno"> 3320</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;- warning_sound = %s\n&quot;</span>, warning_sound ? warning_sound : <span class="stringliteral">&quot;UNDEF&quot;</span>);</div><div class="line"><a name="l03321"></a><span class="lineno"> 3321</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;- end_sound     = %s\n&quot;</span>, end_sound ? end_sound : <span class="stringliteral">&quot;UNDEF&quot;</span>);</div><div class="line"><a name="l03322"></a><span class="lineno"> 3322</span>&#160;      }</div><div class="line"><a name="l03323"></a><span class="lineno"> 3323</span>&#160;   }</div><div class="line"><a name="l03324"></a><span class="lineno"> 3324</span>&#160;</div><div class="line"><a name="l03325"></a><span class="lineno"> 3325</span>&#160;   <span class="comment">/* Get exit keys */</span></div><div class="line"><a name="l03326"></a><span class="lineno"> 3326</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aeae3eb825018940e6703d8151f1f20d5">CONFFLAG_KEYEXIT</a>)) {</div><div class="line"><a name="l03327"></a><span class="lineno"> 3327</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea95e81c82fdf625d648da836620d15dca">OPT_ARG_EXITKEYS</a>]))</div><div class="line"><a name="l03328"></a><span class="lineno"> 3328</span>&#160;         exitkeys = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(optargs[OPT_ARG_EXITKEYS]);</div><div class="line"><a name="l03329"></a><span class="lineno"> 3329</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l03330"></a><span class="lineno"> 3330</span>&#160;         exitkeys = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<span class="stringliteral">&quot;#&quot;</span>); <span class="comment">/* Default */</span></div><div class="line"><a name="l03331"></a><span class="lineno"> 3331</span>&#160;   }</div><div class="line"><a name="l03332"></a><span class="lineno"> 3332</span>&#160;</div><div class="line"><a name="l03333"></a><span class="lineno"> 3333</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a>)) {</div><div class="line"><a name="l03334"></a><span class="lineno"> 3334</span>&#160;      <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>) {</div><div class="line"><a name="l03335"></a><span class="lineno"> 3335</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l03336"></a><span class="lineno"> 3336</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03337"></a><span class="lineno"> 3337</span>&#160;         <span class="keywordflow">if</span> ((var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MEETME_RECORDINGFILE&quot;</span>))) {</div><div class="line"><a name="l03338"></a><span class="lineno"> 3338</span>&#160;            conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var);</div><div class="line"><a name="l03339"></a><span class="lineno"> 3339</span>&#160;         }</div><div class="line"><a name="l03340"></a><span class="lineno"> 3340</span>&#160;         <span class="keywordflow">if</span> ((var = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MEETME_RECORDINGFORMAT&quot;</span>))) {</div><div class="line"><a name="l03341"></a><span class="lineno"> 3341</span>&#160;            conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var);</div><div class="line"><a name="l03342"></a><span class="lineno"> 3342</span>&#160;         }</div><div class="line"><a name="l03343"></a><span class="lineno"> 3343</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03344"></a><span class="lineno"> 3344</span>&#160;         <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>) {</div><div class="line"><a name="l03345"></a><span class="lineno"> 3345</span>&#160;            snprintf(recordingtmp, <span class="keyword">sizeof</span>(recordingtmp), <span class="stringliteral">&quot;meetme-conf-rec-%s-%s&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l03346"></a><span class="lineno"> 3346</span>&#160;            conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(recordingtmp);</div><div class="line"><a name="l03347"></a><span class="lineno"> 3347</span>&#160;         }</div><div class="line"><a name="l03348"></a><span class="lineno"> 3348</span>&#160;         <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>) {</div><div class="line"><a name="l03349"></a><span class="lineno"> 3349</span>&#160;            conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;wav&quot;</span>);</div><div class="line"><a name="l03350"></a><span class="lineno"> 3350</span>&#160;         }</div><div class="line"><a name="l03351"></a><span class="lineno"> 3351</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Starting recording of MeetMe Conference %s into file %s.%s.\n&quot;</span>,</div><div class="line"><a name="l03352"></a><span class="lineno"> 3352</span>&#160;                conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>);</div><div class="line"><a name="l03353"></a><span class="lineno"> 3353</span>&#160;      }</div><div class="line"><a name="l03354"></a><span class="lineno"> 3354</span>&#160;   }</div><div class="line"><a name="l03355"></a><span class="lineno"> 3355</span>&#160;</div><div class="line"><a name="l03356"></a><span class="lineno"> 3356</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">recordthreadlock</a>);</div><div class="line"><a name="l03357"></a><span class="lineno"> 3357</span>&#160;   <span class="keywordflow">if</span> ((conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#aa9af2bfdaafa007e201fc6f01dfd9f68">recordthread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a>) &amp;&amp;</div><div class="line"><a name="l03358"></a><span class="lineno"> 3358</span>&#160;      ((conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a> = <a class="code" href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a>(<span class="stringliteral">&quot;DAHDI&quot;</span>, cap_slin, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, chan, <span class="stringliteral">&quot;pseudo&quot;</span>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)))) {</div><div class="line"><a name="l03359"></a><span class="lineno"> 3359</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l03360"></a><span class="lineno"> 3360</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l03361"></a><span class="lineno"> 3361</span>&#160;      dahdic.chan = 0;</div><div class="line"><a name="l03362"></a><span class="lineno"> 3362</span>&#160;      dahdic.confno = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">dahdiconf</a>;</div><div class="line"><a name="l03363"></a><span class="lineno"> 3363</span>&#160;      dahdic.confmode = DAHDI_CONF_CONFANN | DAHDI_CONF_CONFANNMON;</div><div class="line"><a name="l03364"></a><span class="lineno"> 3364</span>&#160;      <span class="keywordflow">if</span> (ioctl(<a class="code" href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>, 0), DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l03365"></a><span class="lineno"> 3365</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error starting listen channel\n&quot;</span>);</div><div class="line"><a name="l03366"></a><span class="lineno"> 3366</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>);</div><div class="line"><a name="l03367"></a><span class="lineno"> 3367</span>&#160;         conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l03368"></a><span class="lineno"> 3368</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03369"></a><span class="lineno"> 3369</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#aa73be876e3a4024b91ce2e09d8b945d1">ast_pthread_create_detached_background</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#aa9af2bfdaafa007e201fc6f01dfd9f68">recordthread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, recordthread, conf);</div><div class="line"><a name="l03370"></a><span class="lineno"> 3370</span>&#160;      }</div><div class="line"><a name="l03371"></a><span class="lineno"> 3371</span>&#160;   }</div><div class="line"><a name="l03372"></a><span class="lineno"> 3372</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">recordthreadlock</a>);</div><div class="line"><a name="l03373"></a><span class="lineno"> 3373</span>&#160;</div><div class="line"><a name="l03374"></a><span class="lineno"> 3374</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2d6ea8e1bd00fa11be2f422d8949e33e">announcethreadlock</a>);</div><div class="line"><a name="l03375"></a><span class="lineno"> 3375</span>&#160;   <span class="keywordflow">if</span> ((conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a32ad66f5110971b6c12b3e7e5d700ed6">announcethread</a> == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp;</div><div class="line"><a name="l03376"></a><span class="lineno"> 3376</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>)) {</div><div class="line"><a name="l03377"></a><span class="lineno"> 3377</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l03378"></a><span class="lineno"> 3378</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2e7bbd159351d331708b134ddd105a96">announcelist</a>);</div><div class="line"><a name="l03379"></a><span class="lineno"> 3379</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a32ad66f5110971b6c12b3e7e5d700ed6">announcethread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a17b11cfe0e59eab973dd6aa57de91f8b">announce_thread</a>, conf);</div><div class="line"><a name="l03380"></a><span class="lineno"> 3380</span>&#160;   }</div><div class="line"><a name="l03381"></a><span class="lineno"> 3381</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2d6ea8e1bd00fa11be2f422d8949e33e">announcethreadlock</a>);</div><div class="line"><a name="l03382"></a><span class="lineno"> 3382</span>&#160;</div><div class="line"><a name="l03383"></a><span class="lineno"> 3383</span>&#160;   time(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a12f01daf47a1827d4ae33b345da7d46b">jointime</a>);</div><div class="line"><a name="l03384"></a><span class="lineno"> 3384</span>&#160;</div><div class="line"><a name="l03385"></a><span class="lineno"> 3385</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> = timelimit;</div><div class="line"><a name="l03386"></a><span class="lineno"> 3386</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#af3d16394c849390df1c8f72569faeb37">play_warning</a> = play_warning;</div><div class="line"><a name="l03387"></a><span class="lineno"> 3387</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a> = warning_freq;</div><div class="line"><a name="l03388"></a><span class="lineno"> 3388</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a> = warning_sound;</div><div class="line"><a name="l03389"></a><span class="lineno"> 3389</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a> = end_sound;</div><div class="line"><a name="l03390"></a><span class="lineno"> 3390</span>&#160;</div><div class="line"><a name="l03391"></a><span class="lineno"> 3391</span>&#160;   <span class="keywordflow">if</span> (calldurationlimit &gt; 0) {</div><div class="line"><a name="l03392"></a><span class="lineno"> 3392</span>&#160;      time(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ae5ad22d81786b1fc2a541ad84f1cd860">kicktime</a>);</div><div class="line"><a name="l03393"></a><span class="lineno"> 3393</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ae5ad22d81786b1fc2a541ad84f1cd860">kicktime</a> = user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ae5ad22d81786b1fc2a541ad84f1cd860">kicktime</a> + calldurationlimit;</div><div class="line"><a name="l03394"></a><span class="lineno"> 3394</span>&#160;   }</div><div class="line"><a name="l03395"></a><span class="lineno"> 3395</span>&#160;</div><div class="line"><a name="l03396"></a><span class="lineno"> 3396</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab83335d6897e2ea22f24b1b8afd95b0f">start_time</a>))</div><div class="line"><a name="l03397"></a><span class="lineno"> 3397</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab83335d6897e2ea22f24b1b8afd95b0f">start_time</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03398"></a><span class="lineno"> 3398</span>&#160;   time_left_ms = user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>;</div><div class="line"><a name="l03399"></a><span class="lineno"> 3399</span>&#160;</div><div class="line"><a name="l03400"></a><span class="lineno"> 3400</span>&#160;   <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>) {</div><div class="line"><a name="l03401"></a><span class="lineno"> 3401</span>&#160;      nexteventts = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab83335d6897e2ea22f24b1b8afd95b0f">start_time</a>, <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>, 1000));</div><div class="line"><a name="l03402"></a><span class="lineno"> 3402</span>&#160;      nexteventts = <a class="code" href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a>(nexteventts, <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#af3d16394c849390df1c8f72569faeb37">play_warning</a>, 1000));</div><div class="line"><a name="l03403"></a><span class="lineno"> 3403</span>&#160;   }</div><div class="line"><a name="l03404"></a><span class="lineno"> 3404</span>&#160;</div><div class="line"><a name="l03405"></a><span class="lineno"> 3405</span>&#160;   <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> &amp;&amp; (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>))) {</div><div class="line"><a name="l03406"></a><span class="lineno"> 3406</span>&#160;      <span class="comment">/* Sorry, but this conference is locked! */</span></div><div class="line"><a name="l03407"></a><span class="lineno"> 3407</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-locked&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))</div><div class="line"><a name="l03408"></a><span class="lineno"> 3408</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03409"></a><span class="lineno"> 3409</span>&#160;      <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03410"></a><span class="lineno"> 3410</span>&#160;   }</div><div class="line"><a name="l03411"></a><span class="lineno"> 3411</span>&#160;</div><div class="line"><a name="l03412"></a><span class="lineno"> 3412</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>);</div><div class="line"><a name="l03413"></a><span class="lineno"> 3413</span>&#160;</div><div class="line"><a name="l03414"></a><span class="lineno"> 3414</span>&#160;   <span class="keywordflow">if</span> (rt_schedule &amp;&amp; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad7b1f4e72963d085053fb4ef80e9fb33">maxusers</a>) {</div><div class="line"><a name="l03415"></a><span class="lineno"> 3415</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> &gt;= conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad7b1f4e72963d085053fb4ef80e9fb33">maxusers</a>) {</div><div class="line"><a name="l03416"></a><span class="lineno"> 3416</span>&#160;         <span class="comment">/* Sorry, but this confernce has reached the participant limit! */</span></div><div class="line"><a name="l03417"></a><span class="lineno"> 3417</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>);</div><div class="line"><a name="l03418"></a><span class="lineno"> 3418</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-full&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))</div><div class="line"><a name="l03419"></a><span class="lineno"> 3419</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03420"></a><span class="lineno"> 3420</span>&#160;         <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03421"></a><span class="lineno"> 3421</span>&#160;      }</div><div class="line"><a name="l03422"></a><span class="lineno"> 3422</span>&#160;   }</div><div class="line"><a name="l03423"></a><span class="lineno"> 3423</span>&#160;</div><div class="line"><a name="l03424"></a><span class="lineno"> 3424</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>);</div><div class="line"><a name="l03425"></a><span class="lineno"> 3425</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a289c5ffee97869ba1b70fd91278f2957">user_max_cmp</a>, &amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>);</div><div class="line"><a name="l03426"></a><span class="lineno"> 3426</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>++;</div><div class="line"><a name="l03427"></a><span class="lineno"> 3427</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, user);</div><div class="line"><a name="l03428"></a><span class="lineno"> 3428</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>);</div><div class="line"><a name="l03429"></a><span class="lineno"> 3429</span>&#160;</div><div class="line"><a name="l03430"></a><span class="lineno"> 3430</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = chan;</div><div class="line"><a name="l03431"></a><span class="lineno"> 3431</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a> = *confflags;</div><div class="line"><a name="l03432"></a><span class="lineno"> 3432</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> = <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ad7732ac9c48e20f3c0bb5948ff1e01cf">CONFFLAG_STARTMUTED</a>) ? <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a> : 0;</div><div class="line"><a name="l03433"></a><span class="lineno"> 3433</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>)) {</div><div class="line"><a name="l03434"></a><span class="lineno"> 3434</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0775e550a18cb0caa88650d9f8369ce1">gmuted</a>) ? <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> : 0;</div><div class="line"><a name="l03435"></a><span class="lineno"> 3435</span>&#160;   }</div><div class="line"><a name="l03436"></a><span class="lineno"> 3436</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> = -1;</div><div class="line"><a name="l03437"></a><span class="lineno"> 3437</span>&#160;</div><div class="line"><a name="l03438"></a><span class="lineno"> 3438</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>);</div><div class="line"><a name="l03439"></a><span class="lineno"> 3439</span>&#160;</div><div class="line"><a name="l03440"></a><span class="lineno"> 3440</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp; (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>))) {</div><div class="line"><a name="l03441"></a><span class="lineno"> 3441</span>&#160;      <span class="keywordtype">char</span> destdir[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l03442"></a><span class="lineno"> 3442</span>&#160;</div><div class="line"><a name="l03443"></a><span class="lineno"> 3443</span>&#160;      snprintf(destdir, <span class="keyword">sizeof</span>(destdir), <span class="stringliteral">&quot;%s/meetme&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a>);</div><div class="line"><a name="l03444"></a><span class="lineno"> 3444</span>&#160;</div><div class="line"><a name="l03445"></a><span class="lineno"> 3445</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a>(destdir, 0777) != 0) {</div><div class="line"><a name="l03446"></a><span class="lineno"> 3446</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;mkdir &#39;%s&#39; failed: %s\n&quot;</span>, destdir, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03447"></a><span class="lineno"> 3447</span>&#160;         <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03448"></a><span class="lineno"> 3448</span>&#160;      }</div><div class="line"><a name="l03449"></a><span class="lineno"> 3449</span>&#160;</div><div class="line"><a name="l03450"></a><span class="lineno"> 3450</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>)){</div><div class="line"><a name="l03451"></a><span class="lineno"> 3451</span>&#160;         context = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eaef6bb24270917468d46263b7d7a0c79c">OPT_ARG_INTROUSER_VMREC</a>]);</div><div class="line"><a name="l03452"></a><span class="lineno"> 3452</span>&#160;         mailbox = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;context, <span class="stringliteral">&quot;@&quot;</span>);</div><div class="line"><a name="l03453"></a><span class="lineno"> 3453</span>&#160;</div><div class="line"><a name="l03454"></a><span class="lineno"> 3454</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(mailbox)) {</div><div class="line"><a name="l03455"></a><span class="lineno"> 3455</span>&#160;            <span class="comment">/* invalid input, clear the v flag*/</span></div><div class="line"><a name="l03456"></a><span class="lineno"> 3456</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a32495ee3248a37ac92279090110f6fbf">ast_clear_flag64</a>(confflags,<a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>);</div><div class="line"><a name="l03457"></a><span class="lineno"> 3457</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>,<span class="stringliteral">&quot;You must specify a mailbox in the v() option\n&quot;</span>);</div><div class="line"><a name="l03458"></a><span class="lineno"> 3458</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03459"></a><span class="lineno"> 3459</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(context)) {</div><div class="line"><a name="l03460"></a><span class="lineno"> 3460</span>&#160;                context = <span class="stringliteral">&quot;default&quot;</span>;</div><div class="line"><a name="l03461"></a><span class="lineno"> 3461</span>&#160;            }</div><div class="line"><a name="l03462"></a><span class="lineno"> 3462</span>&#160;            <span class="comment">/* if there is no mailbox we don&#39;t need to do this logic  */</span></div><div class="line"><a name="l03463"></a><span class="lineno"> 3463</span>&#160;            snprintf(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <span class="keyword">sizeof</span>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>),</div><div class="line"><a name="l03464"></a><span class="lineno"> 3464</span>&#160;                <span class="stringliteral">&quot;%s/voicemail/%s/%s/greet&quot;</span>,<a class="code" href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a>,context,mailbox);</div><div class="line"><a name="l03465"></a><span class="lineno"> 3465</span>&#160;</div><div class="line"><a name="l03466"></a><span class="lineno"> 3466</span>&#160;            <span class="comment">/* if the greeting doesn&#39;t exist then use the temp file method instead, clear flag v */</span></div><div class="line"><a name="l03467"></a><span class="lineno"> 3467</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)){</div><div class="line"><a name="l03468"></a><span class="lineno"> 3468</span>&#160;               snprintf(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <span class="keyword">sizeof</span>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>),</div><div class="line"><a name="l03469"></a><span class="lineno"> 3469</span>&#160;                   <span class="stringliteral">&quot;%s/meetme-username-%s-%d&quot;</span>, destdir,</div><div class="line"><a name="l03470"></a><span class="lineno"> 3470</span>&#160;                   conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>);</div><div class="line"><a name="l03471"></a><span class="lineno"> 3471</span>&#160;               <a class="code" href="../../d5/d60/utils_8h.html#a32495ee3248a37ac92279090110f6fbf">ast_clear_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>);</div><div class="line"><a name="l03472"></a><span class="lineno"> 3472</span>&#160;            }</div><div class="line"><a name="l03473"></a><span class="lineno"> 3473</span>&#160;         }</div><div class="line"><a name="l03474"></a><span class="lineno"> 3474</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03475"></a><span class="lineno"> 3475</span>&#160;         snprintf(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <span class="keyword">sizeof</span>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>),</div><div class="line"><a name="l03476"></a><span class="lineno"> 3476</span>&#160;             <span class="stringliteral">&quot;%s/meetme-username-%s-%d&quot;</span>, destdir,</div><div class="line"><a name="l03477"></a><span class="lineno"> 3477</span>&#160;             conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>);</div><div class="line"><a name="l03478"></a><span class="lineno"> 3478</span>&#160;      }</div><div class="line"><a name="l03479"></a><span class="lineno"> 3479</span>&#160;</div><div class="line"><a name="l03480"></a><span class="lineno"> 3480</span>&#160;      res = 0;</div><div class="line"><a name="l03481"></a><span class="lineno"> 3481</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a>) &amp;&amp; !<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l03482"></a><span class="lineno"> 3482</span>&#160;         res = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a675ebd613588a960e37bd6fa2477f30f">ast_play_and_record</a>(chan, <span class="stringliteral">&quot;vm-rec-name&quot;</span>, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, 10, <span class="stringliteral">&quot;sln&quot;</span>, &amp;duration, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d3/d08/dsp_8h.html#aab28c68838eaed4e0c89460a4e554cca">ast_dsp_get_threshold_from_settings</a>(<a class="code" href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f">THRESHOLD_SILENCE</a>), 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03483"></a><span class="lineno"> 3483</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a>) &amp;&amp; !<a class="code" href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>))</div><div class="line"><a name="l03484"></a><span class="lineno"> 3484</span>&#160;         res = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a88b6ee77eea0c8a6cc0a315e1c1fc815">ast_record_review</a>(chan, <span class="stringliteral">&quot;vm-rec-name&quot;</span>, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, 10, <span class="stringliteral">&quot;sln&quot;</span>, &amp;duration, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03485"></a><span class="lineno"> 3485</span>&#160;      <span class="keywordflow">if</span> (res == -1)</div><div class="line"><a name="l03486"></a><span class="lineno"> 3486</span>&#160;         <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03487"></a><span class="lineno"> 3487</span>&#160;</div><div class="line"><a name="l03488"></a><span class="lineno"> 3488</span>&#160;   }</div><div class="line"><a name="l03489"></a><span class="lineno"> 3489</span>&#160;</div><div class="line"><a name="l03490"></a><span class="lineno"> 3490</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>);</div><div class="line"><a name="l03491"></a><span class="lineno"> 3491</span>&#160;</div><div class="line"><a name="l03492"></a><span class="lineno"> 3492</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a>))</div><div class="line"><a name="l03493"></a><span class="lineno"> 3493</span>&#160;      conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>++;</div><div class="line"><a name="l03494"></a><span class="lineno"> 3494</span>&#160;   conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>++;</div><div class="line"><a name="l03495"></a><span class="lineno"> 3495</span>&#160;   <span class="keywordflow">if</span> (rt_log_members) {</div><div class="line"><a name="l03496"></a><span class="lineno"> 3496</span>&#160;      <span class="comment">/* Update table */</span></div><div class="line"><a name="l03497"></a><span class="lineno"> 3497</span>&#160;      snprintf(members, <span class="keyword">sizeof</span>(members), <span class="stringliteral">&quot;%d&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>);</div><div class="line"><a name="l03498"></a><span class="lineno"> 3498</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a403ec8b49645ea204e82cb72bb8cf9f4">ast_realtime_require_field</a>(<span class="stringliteral">&quot;meetme&quot;</span>,</div><div class="line"><a name="l03499"></a><span class="lineno"> 3499</span>&#160;         <span class="stringliteral">&quot;confno&quot;</span>, strlen(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>) &gt; 7 ? <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be">RQ_UINTEGER4</a> : strlen(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>) &gt; 4 ? <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a> : <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a>, strlen(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>),</div><div class="line"><a name="l03500"></a><span class="lineno"> 3500</span>&#160;         <span class="stringliteral">&quot;members&quot;</span>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a>, strlen(members),</div><div class="line"><a name="l03501"></a><span class="lineno"> 3501</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03502"></a><span class="lineno"> 3502</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ab845019b2f1bb324ff57e14192d62c39">ast_update_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <span class="stringliteral">&quot;members&quot;</span>, members, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03503"></a><span class="lineno"> 3503</span>&#160;   }</div><div class="line"><a name="l03504"></a><span class="lineno"> 3504</span>&#160;   setusercount = 1;</div><div class="line"><a name="l03505"></a><span class="lineno"> 3505</span>&#160;</div><div class="line"><a name="l03506"></a><span class="lineno"> 3506</span>&#160;   <span class="comment">/* This device changed state now - if this is the first user */</span></div><div class="line"><a name="l03507"></a><span class="lineno"> 3507</span>&#160;   <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 1)</div><div class="line"><a name="l03508"></a><span class="lineno"> 3508</span>&#160;      <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>, (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">isdynamic</a> ? <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a> : <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>), <span class="stringliteral">&quot;meetme:%s&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l03509"></a><span class="lineno"> 3509</span>&#160;</div><div class="line"><a name="l03510"></a><span class="lineno"> 3510</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">playlock</a>);</div><div class="line"><a name="l03511"></a><span class="lineno"> 3511</span>&#160;</div><div class="line"><a name="l03512"></a><span class="lineno"> 3512</span>&#160;   <span class="comment">/* return the unique ID of the conference */</span></div><div class="line"><a name="l03513"></a><span class="lineno"> 3513</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MEETMEUNIQUEID&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ae42dbdf188676f5840d98c4427e75a4f">uniqueid</a>);</div><div class="line"><a name="l03514"></a><span class="lineno"> 3514</span>&#160;</div><div class="line"><a name="l03515"></a><span class="lineno"> 3515</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a61bdcc99c25b743f89316b3da3796cc1">CONFFLAG_EXIT_CONTEXT</a>)) {</div><div class="line"><a name="l03516"></a><span class="lineno"> 3516</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03517"></a><span class="lineno"> 3517</span>&#160;      <span class="keywordflow">if</span> ((tmpvar = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MEETME_EXIT_CONTEXT&quot;</span>))) {</div><div class="line"><a name="l03518"></a><span class="lineno"> 3518</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(exitcontext, tmpvar, <span class="keyword">sizeof</span>(exitcontext));</div><div class="line"><a name="l03519"></a><span class="lineno"> 3519</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(<a class="code" href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a>(chan))) {</div><div class="line"><a name="l03520"></a><span class="lineno"> 3520</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(exitcontext, <a class="code" href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a>(chan), <span class="keyword">sizeof</span>(exitcontext));</div><div class="line"><a name="l03521"></a><span class="lineno"> 3521</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03522"></a><span class="lineno"> 3522</span>&#160;         <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(exitcontext, <a class="code" href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a>(chan), <span class="keyword">sizeof</span>(exitcontext));</div><div class="line"><a name="l03523"></a><span class="lineno"> 3523</span>&#160;      }</div><div class="line"><a name="l03524"></a><span class="lineno"> 3524</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03525"></a><span class="lineno"> 3525</span>&#160;   }</div><div class="line"><a name="l03526"></a><span class="lineno"> 3526</span>&#160;</div><div class="line"><a name="l03527"></a><span class="lineno"> 3527</span>&#160;   <span class="comment">/* Play an arbitrary intro message */</span></div><div class="line"><a name="l03528"></a><span class="lineno"> 3528</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#aca38113ae6bc93688baec212aaa33377">CONFFLAG_INTROMSG</a>) &amp;&amp;</div><div class="line"><a name="l03529"></a><span class="lineno"> 3529</span>&#160;         !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab415b22a4e9742e57fc6ef8f2c5362d9">OPT_ARG_INTROMSG</a>])) {</div><div class="line"><a name="l03530"></a><span class="lineno"> 3530</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, optargs[OPT_ARG_INTROMSG], <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03531"></a><span class="lineno"> 3531</span>&#160;         <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03532"></a><span class="lineno"> 3532</span>&#160;      }</div><div class="line"><a name="l03533"></a><span class="lineno"> 3533</span>&#160;   }</div><div class="line"><a name="l03534"></a><span class="lineno"> 3534</span>&#160;</div><div class="line"><a name="l03535"></a><span class="lineno"> 3535</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, (<a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acebf32e64aaad2bef9c62ae75ee816b7">CONFFLAG_NOONLYPERSON</a>))) {</div><div class="line"><a name="l03536"></a><span class="lineno"> 3536</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 1 &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>))</div><div class="line"><a name="l03537"></a><span class="lineno"> 3537</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-onlyperson&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))</div><div class="line"><a name="l03538"></a><span class="lineno"> 3538</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03539"></a><span class="lineno"> 3539</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>) &amp;&amp; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a> == 0)</div><div class="line"><a name="l03540"></a><span class="lineno"> 3540</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-waitforleader&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))</div><div class="line"><a name="l03541"></a><span class="lineno"> 3541</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03542"></a><span class="lineno"> 3542</span>&#160;   }</div><div class="line"><a name="l03543"></a><span class="lineno"> 3543</span>&#160;</div><div class="line"><a name="l03544"></a><span class="lineno"> 3544</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a642977b3db866f6c6f87b1d5f7791d5b">CONFFLAG_ANNOUNCEUSERCOUNT</a>) &amp;&amp; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> &gt; 1) {</div><div class="line"><a name="l03545"></a><span class="lineno"> 3545</span>&#160;      <span class="keywordtype">int</span> keepplaying = 1;</div><div class="line"><a name="l03546"></a><span class="lineno"> 3546</span>&#160;</div><div class="line"><a name="l03547"></a><span class="lineno"> 3547</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 2) {</div><div class="line"><a name="l03548"></a><span class="lineno"> 3548</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-onlyone&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03549"></a><span class="lineno"> 3549</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l03550"></a><span class="lineno"> 3550</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03551"></a><span class="lineno"> 3551</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0)</div><div class="line"><a name="l03552"></a><span class="lineno"> 3552</span>&#160;               keepplaying = 0;</div><div class="line"><a name="l03553"></a><span class="lineno"> 3553</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == -1)</div><div class="line"><a name="l03554"></a><span class="lineno"> 3554</span>&#160;               <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03555"></a><span class="lineno"> 3555</span>&#160;         }</div><div class="line"><a name="l03556"></a><span class="lineno"> 3556</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03557"></a><span class="lineno"> 3557</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-thereare&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03558"></a><span class="lineno"> 3558</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l03559"></a><span class="lineno"> 3559</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03560"></a><span class="lineno"> 3560</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0)</div><div class="line"><a name="l03561"></a><span class="lineno"> 3561</span>&#160;               keepplaying = 0;</div><div class="line"><a name="l03562"></a><span class="lineno"> 3562</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == -1)</div><div class="line"><a name="l03563"></a><span class="lineno"> 3563</span>&#160;               <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03564"></a><span class="lineno"> 3564</span>&#160;         }</div><div class="line"><a name="l03565"></a><span class="lineno"> 3565</span>&#160;         <span class="keywordflow">if</span> (keepplaying) {</div><div class="line"><a name="l03566"></a><span class="lineno"> 3566</span>&#160;            res = <a class="code" href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a>(chan, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> - 1, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), (<span class="keywordtype">char</span> *) <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03567"></a><span class="lineno"> 3567</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0)</div><div class="line"><a name="l03568"></a><span class="lineno"> 3568</span>&#160;               keepplaying = 0;</div><div class="line"><a name="l03569"></a><span class="lineno"> 3569</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == -1)</div><div class="line"><a name="l03570"></a><span class="lineno"> 3570</span>&#160;               <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03571"></a><span class="lineno"> 3571</span>&#160;         }</div><div class="line"><a name="l03572"></a><span class="lineno"> 3572</span>&#160;         <span class="keywordflow">if</span> (keepplaying &amp;&amp; !<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-otherinparty&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03573"></a><span class="lineno"> 3573</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l03574"></a><span class="lineno"> 3574</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l03575"></a><span class="lineno"> 3575</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0)</div><div class="line"><a name="l03576"></a><span class="lineno"> 3576</span>&#160;               keepplaying = 0;</div><div class="line"><a name="l03577"></a><span class="lineno"> 3577</span>&#160;            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (res == -1)</div><div class="line"><a name="l03578"></a><span class="lineno"> 3578</span>&#160;               <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03579"></a><span class="lineno"> 3579</span>&#160;         }</div><div class="line"><a name="l03580"></a><span class="lineno"> 3580</span>&#160;      }</div><div class="line"><a name="l03581"></a><span class="lineno"> 3581</span>&#160;   }</div><div class="line"><a name="l03582"></a><span class="lineno"> 3582</span>&#160;</div><div class="line"><a name="l03583"></a><span class="lineno"> 3583</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#acf5c7d460a31834ce02e286d133db0d7">CONFFLAG_NO_AUDIO_UNTIL_UP</a>)) {</div><div class="line"><a name="l03584"></a><span class="lineno"> 3584</span>&#160;      <span class="comment">/* We&#39;re leaving this alone until the state gets changed to up */</span></div><div class="line"><a name="l03585"></a><span class="lineno"> 3585</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l03586"></a><span class="lineno"> 3586</span>&#160;   }</div><div class="line"><a name="l03587"></a><span class="lineno"> 3587</span>&#160;</div><div class="line"><a name="l03588"></a><span class="lineno"> 3588</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a>(chan, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>) &lt; 0) {</div><div class="line"><a name="l03589"></a><span class="lineno"> 3589</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set &#39;%s&#39; to write linear mode\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03590"></a><span class="lineno"> 3590</span>&#160;      <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03591"></a><span class="lineno"> 3591</span>&#160;   }</div><div class="line"><a name="l03592"></a><span class="lineno"> 3592</span>&#160;</div><div class="line"><a name="l03593"></a><span class="lineno"> 3593</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a>(chan, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>) &lt; 0) {</div><div class="line"><a name="l03594"></a><span class="lineno"> 3594</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set &#39;%s&#39; to read linear mode\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l03595"></a><span class="lineno"> 3595</span>&#160;      <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03596"></a><span class="lineno"> 3596</span>&#160;   }</div><div class="line"><a name="l03597"></a><span class="lineno"> 3597</span>&#160;</div><div class="line"><a name="l03598"></a><span class="lineno"> 3598</span>&#160;   <span class="comment">/* Reduce background noise from each participant */</span></div><div class="line"><a name="l03599"></a><span class="lineno"> 3599</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a2b758e811891e08a43129dcf43c77fbd">CONFFLAG_DONT_DENOISE</a>)) {</div><div class="line"><a name="l03600"></a><span class="lineno"> 3600</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#ae70e64cdf669396c88ea8eda900b0b3b">ast_func_write</a>(chan, <span class="stringliteral">&quot;DENOISE(rx)&quot;</span>, <span class="stringliteral">&quot;on&quot;</span>);</div><div class="line"><a name="l03601"></a><span class="lineno"> 3601</span>&#160;   }</div><div class="line"><a name="l03602"></a><span class="lineno"> 3602</span>&#160;</div><div class="line"><a name="l03603"></a><span class="lineno"> 3603</span>&#160;   retrydahdi = (strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(chan)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="stringliteral">&quot;DAHDI&quot;</span>) || (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(chan) || <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(chan)) ? 1 : 0);</div><div class="line"><a name="l03604"></a><span class="lineno"> 3604</span>&#160;   user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#af950158a50739005416f058684729d28">dahdichannel</a> = !retrydahdi;</div><div class="line"><a name="l03605"></a><span class="lineno"> 3605</span>&#160;</div><div class="line"><a name="l03606"></a><span class="lineno"> 3606</span>&#160; dahdiretry:</div><div class="line"><a name="l03607"></a><span class="lineno"> 3607</span>&#160;   origfd = <a class="code" href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a>(chan, 0);</div><div class="line"><a name="l03608"></a><span class="lineno"> 3608</span>&#160;   <span class="keywordflow">if</span> (retrydahdi) {</div><div class="line"><a name="l03609"></a><span class="lineno"> 3609</span>&#160;      <span class="comment">/* open pseudo in non-blocking mode */</span></div><div class="line"><a name="l03610"></a><span class="lineno"> 3610</span>&#160;      fd = open(<span class="stringliteral">&quot;/dev/dahdi/pseudo&quot;</span>, O_RDWR | O_NONBLOCK);</div><div class="line"><a name="l03611"></a><span class="lineno"> 3611</span>&#160;      <span class="keywordflow">if</span> (fd &lt; 0) {</div><div class="line"><a name="l03612"></a><span class="lineno"> 3612</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to open DAHDI pseudo channel: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03613"></a><span class="lineno"> 3613</span>&#160;         <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03614"></a><span class="lineno"> 3614</span>&#160;      }</div><div class="line"><a name="l03615"></a><span class="lineno"> 3615</span>&#160;      using_pseudo = 1;</div><div class="line"><a name="l03616"></a><span class="lineno"> 3616</span>&#160;      <span class="comment">/* Setup buffering information */</span></div><div class="line"><a name="l03617"></a><span class="lineno"> 3617</span>&#160;      memset(&amp;bi, 0, <span class="keyword">sizeof</span>(bi));</div><div class="line"><a name="l03618"></a><span class="lineno"> 3618</span>&#160;      bi.bufsize = <a class="code" href="../../df/d44/app__meetme_8c.html#a2be5f0b8c25b67aa5ca5502d61c16b73">CONF_SIZE</a> / 2;</div><div class="line"><a name="l03619"></a><span class="lineno"> 3619</span>&#160;      bi.txbufpolicy = DAHDI_POLICY_IMMEDIATE;</div><div class="line"><a name="l03620"></a><span class="lineno"> 3620</span>&#160;      bi.rxbufpolicy = DAHDI_POLICY_IMMEDIATE;</div><div class="line"><a name="l03621"></a><span class="lineno"> 3621</span>&#160;      bi.numbufs = <a class="code" href="../../df/d44/app__meetme_8c.html#acf8ac9f199da16a627957d5e9e370c2f">audio_buffers</a>;</div><div class="line"><a name="l03622"></a><span class="lineno"> 3622</span>&#160;      <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SET_BUFINFO, &amp;bi)) {</div><div class="line"><a name="l03623"></a><span class="lineno"> 3623</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set buffering information: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03624"></a><span class="lineno"> 3624</span>&#160;         close(fd);</div><div class="line"><a name="l03625"></a><span class="lineno"> 3625</span>&#160;         <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03626"></a><span class="lineno"> 3626</span>&#160;      }</div><div class="line"><a name="l03627"></a><span class="lineno"> 3627</span>&#160;      x = 1;</div><div class="line"><a name="l03628"></a><span class="lineno"> 3628</span>&#160;      <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SETLINEAR, &amp;x)) {</div><div class="line"><a name="l03629"></a><span class="lineno"> 3629</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to set linear mode: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l03630"></a><span class="lineno"> 3630</span>&#160;         close(fd);</div><div class="line"><a name="l03631"></a><span class="lineno"> 3631</span>&#160;         <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03632"></a><span class="lineno"> 3632</span>&#160;      }</div><div class="line"><a name="l03633"></a><span class="lineno"> 3633</span>&#160;      nfds = 1;</div><div class="line"><a name="l03634"></a><span class="lineno"> 3634</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03635"></a><span class="lineno"> 3635</span>&#160;      <span class="comment">/* XXX Make sure we&#39;re not running on a pseudo channel XXX */</span></div><div class="line"><a name="l03636"></a><span class="lineno"> 3636</span>&#160;      fd = <a class="code" href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a>(chan, 0);</div><div class="line"><a name="l03637"></a><span class="lineno"> 3637</span>&#160;      nfds = 0;</div><div class="line"><a name="l03638"></a><span class="lineno"> 3638</span>&#160;   }</div><div class="line"><a name="l03639"></a><span class="lineno"> 3639</span>&#160;   memset(&amp;dahdic, 0, <span class="keyword">sizeof</span>(dahdic));</div><div class="line"><a name="l03640"></a><span class="lineno"> 3640</span>&#160;   memset(&amp;dahdic_empty, 0, <span class="keyword">sizeof</span>(dahdic_empty));</div><div class="line"><a name="l03641"></a><span class="lineno"> 3641</span>&#160;   <span class="comment">/* Check to see if we&#39;re in a conference... */</span></div><div class="line"><a name="l03642"></a><span class="lineno"> 3642</span>&#160;   dahdic.chan = 0;</div><div class="line"><a name="l03643"></a><span class="lineno"> 3643</span>&#160;   <span class="keywordflow">if</span> (ioctl(fd, DAHDI_GETCONF, &amp;dahdic)) {</div><div class="line"><a name="l03644"></a><span class="lineno"> 3644</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error getting conference\n&quot;</span>);</div><div class="line"><a name="l03645"></a><span class="lineno"> 3645</span>&#160;      close(fd);</div><div class="line"><a name="l03646"></a><span class="lineno"> 3646</span>&#160;      <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03647"></a><span class="lineno"> 3647</span>&#160;   }</div><div class="line"><a name="l03648"></a><span class="lineno"> 3648</span>&#160;   <span class="keywordflow">if</span> (dahdic.confmode) {</div><div class="line"><a name="l03649"></a><span class="lineno"> 3649</span>&#160;      <span class="comment">/* Whoa, already in a conference...  Retry... */</span></div><div class="line"><a name="l03650"></a><span class="lineno"> 3650</span>&#160;      <span class="keywordflow">if</span> (!retrydahdi) {</div><div class="line"><a name="l03651"></a><span class="lineno"> 3651</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;DAHDI channel is in a conference already, retrying with pseudo\n&quot;</span>);</div><div class="line"><a name="l03652"></a><span class="lineno"> 3652</span>&#160;         retrydahdi = 1;</div><div class="line"><a name="l03653"></a><span class="lineno"> 3653</span>&#160;         <span class="keywordflow">goto</span> dahdiretry;</div><div class="line"><a name="l03654"></a><span class="lineno"> 3654</span>&#160;      }</div><div class="line"><a name="l03655"></a><span class="lineno"> 3655</span>&#160;   }</div><div class="line"><a name="l03656"></a><span class="lineno"> 3656</span>&#160;   memset(&amp;dahdic, 0, <span class="keyword">sizeof</span>(dahdic));</div><div class="line"><a name="l03657"></a><span class="lineno"> 3657</span>&#160;   <span class="comment">/* Add us to the conference */</span></div><div class="line"><a name="l03658"></a><span class="lineno"> 3658</span>&#160;   dahdic.chan = 0;</div><div class="line"><a name="l03659"></a><span class="lineno"> 3659</span>&#160;   dahdic.confno = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">dahdiconf</a>;</div><div class="line"><a name="l03660"></a><span class="lineno"> 3660</span>&#160;</div><div class="line"><a name="l03661"></a><span class="lineno"> 3661</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp; (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a>) ||</div><div class="line"><a name="l03662"></a><span class="lineno"> 3662</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a>) || <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>)) &amp;&amp; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> &gt; 1) {</div><div class="line"><a name="l03663"></a><span class="lineno"> 3663</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d4b/structannounce__listitem.html">announce_listitem</a> *<a class="code" href="../../d8/d4f/test__config_8c.html#aecdc7cbd5dfa76493c0212caa55d706c">item</a>;</div><div class="line"><a name="l03664"></a><span class="lineno"> 3664</span>&#160;      <span class="keywordflow">if</span> (!(item = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*item), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)))</div><div class="line"><a name="l03665"></a><span class="lineno"> 3665</span>&#160;         <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03666"></a><span class="lineno"> 3666</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <span class="keyword">sizeof</span>(item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>));</div><div class="line"><a name="l03667"></a><span class="lineno"> 3667</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), <span class="keyword">sizeof</span>(item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#adf416dc058363e2fd5750c77e2d78bee">language</a>));</div><div class="line"><a name="l03668"></a><span class="lineno"> 3668</span>&#160;      item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">confchan</a> = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l03669"></a><span class="lineno"> 3669</span>&#160;      item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aae887e628e91515c97a46a3834c91069">confusers</a> = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>;</div><div class="line"><a name="l03670"></a><span class="lineno"> 3670</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>)){</div><div class="line"><a name="l03671"></a><span class="lineno"> 3671</span>&#160;         item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a185c325c6063263f7b3119f4045c22e0">vmrec</a> = 1;</div><div class="line"><a name="l03672"></a><span class="lineno"> 3672</span>&#160;      }</div><div class="line"><a name="l03673"></a><span class="lineno"> 3673</span>&#160;      item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aaf09e68427ae0e6025d08e028646d43a">announcetype</a> = <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfa7a2844a08140930251b7a890184cf1f1">CONF_HASJOIN</a>;</div><div class="line"><a name="l03674"></a><span class="lineno"> 3674</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l03675"></a><span class="lineno"> 3675</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(item, +1); <span class="comment">/* add one more so we can determine when announce_thread is done playing it */</span></div><div class="line"><a name="l03676"></a><span class="lineno"> 3676</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2e7bbd159351d331708b134ddd105a96">announcelist</a>, item, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l03677"></a><span class="lineno"> 3677</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#aaf8da2ce427bc9d88ba925c185056a41">announcelist_addition</a>);</div><div class="line"><a name="l03678"></a><span class="lineno"> 3678</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l03679"></a><span class="lineno"> 3679</span>&#160;</div><div class="line"><a name="l03680"></a><span class="lineno"> 3680</span>&#160;      <span class="keywordflow">while</span> (!<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>) &amp;&amp; <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(item, 0) == 2 &amp;&amp; !<a class="code" href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a>(chan, 1000)) {</div><div class="line"><a name="l03681"></a><span class="lineno"> 3681</span>&#160;         ;</div><div class="line"><a name="l03682"></a><span class="lineno"> 3682</span>&#160;      }</div><div class="line"><a name="l03683"></a><span class="lineno"> 3683</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(item, -1);</div><div class="line"><a name="l03684"></a><span class="lineno"> 3684</span>&#160;   }</div><div class="line"><a name="l03685"></a><span class="lineno"> 3685</span>&#160;</div><div class="line"><a name="l03686"></a><span class="lineno"> 3686</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>) &amp;&amp; !conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>)</div><div class="line"><a name="l03687"></a><span class="lineno"> 3687</span>&#160;      dahdic.confmode = DAHDI_CONF_CONF;</div><div class="line"><a name="l03688"></a><span class="lineno"> 3688</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>))</div><div class="line"><a name="l03689"></a><span class="lineno"> 3689</span>&#160;      dahdic.confmode = DAHDI_CONF_CONFMON | DAHDI_CONF_LISTENER;</div><div class="line"><a name="l03690"></a><span class="lineno"> 3690</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a39a9c6b58c7b77ef675e56d00c89e0a8">CONFFLAG_TALKER</a>))</div><div class="line"><a name="l03691"></a><span class="lineno"> 3691</span>&#160;      dahdic.confmode = DAHDI_CONF_CONF | DAHDI_CONF_TALKER;</div><div class="line"><a name="l03692"></a><span class="lineno"> 3692</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l03693"></a><span class="lineno"> 3693</span>&#160;      dahdic.confmode = DAHDI_CONF_CONF | DAHDI_CONF_TALKER | DAHDI_CONF_LISTENER;</div><div class="line"><a name="l03694"></a><span class="lineno"> 3694</span>&#160;</div><div class="line"><a name="l03695"></a><span class="lineno"> 3695</span>&#160;   <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l03696"></a><span class="lineno"> 3696</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error setting conference\n&quot;</span>);</div><div class="line"><a name="l03697"></a><span class="lineno"> 3697</span>&#160;      close(fd);</div><div class="line"><a name="l03698"></a><span class="lineno"> 3698</span>&#160;      <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03699"></a><span class="lineno"> 3699</span>&#160;   }</div><div class="line"><a name="l03700"></a><span class="lineno"> 3700</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Placed channel %s in DAHDI conf %d\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">dahdiconf</a>);</div><div class="line"><a name="l03701"></a><span class="lineno"> 3701</span>&#160;</div><div class="line"><a name="l03702"></a><span class="lineno"> 3702</span>&#160;   <span class="keywordflow">if</span> (!sent_event) {</div><div class="line"><a name="l03703"></a><span class="lineno"> 3703</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a>(conf, chan, user, meetme_join_type(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03704"></a><span class="lineno"> 3704</span>&#160;      sent_event = 1;</div><div class="line"><a name="l03705"></a><span class="lineno"> 3705</span>&#160;   }</div><div class="line"><a name="l03706"></a><span class="lineno"> 3706</span>&#160;</div><div class="line"><a name="l03707"></a><span class="lineno"> 3707</span>&#160;   <span class="keywordflow">if</span> (!firstpass &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) &amp;&amp;</div><div class="line"><a name="l03708"></a><span class="lineno"> 3708</span>&#160;      !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>)) {</div><div class="line"><a name="l03709"></a><span class="lineno"> 3709</span>&#160;      firstpass = 1;</div><div class="line"><a name="l03710"></a><span class="lineno"> 3710</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>))</div><div class="line"><a name="l03711"></a><span class="lineno"> 3711</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>) || (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a>) &amp;&amp;</div><div class="line"><a name="l03712"></a><span class="lineno"> 3712</span>&#160;            (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a> &gt;= 1))) {</div><div class="line"><a name="l03713"></a><span class="lineno"> 3713</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a645090dd89fa3f8aaff60ea7eb38be18">conf_play</a>(chan, conf, <a class="code" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49ba951ab68bb8f7daafb78951107080904e">ENTER</a>);</div><div class="line"><a name="l03714"></a><span class="lineno"> 3714</span>&#160;         }</div><div class="line"><a name="l03715"></a><span class="lineno"> 3715</span>&#160;   }</div><div class="line"><a name="l03716"></a><span class="lineno"> 3716</span>&#160;</div><div class="line"><a name="l03717"></a><span class="lineno"> 3717</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a42bbab56ce6a8eb0aaf501be26cf5271">conf_flush</a>(fd, chan);</div><div class="line"><a name="l03718"></a><span class="lineno"> 3718</span>&#160;</div><div class="line"><a name="l03719"></a><span class="lineno"> 3719</span>&#160;   <span class="keywordflow">if</span> (dsp)</div><div class="line"><a name="l03720"></a><span class="lineno"> 3720</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(dsp);</div><div class="line"><a name="l03721"></a><span class="lineno"> 3721</span>&#160;</div><div class="line"><a name="l03722"></a><span class="lineno"> 3722</span>&#160;   <span class="keywordflow">if</span> (!(dsp = <a class="code" href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a>())) {</div><div class="line"><a name="l03723"></a><span class="lineno"> 3723</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to allocate DSP!\n&quot;</span>);</div><div class="line"><a name="l03724"></a><span class="lineno"> 3724</span>&#160;      res = -1;</div><div class="line"><a name="l03725"></a><span class="lineno"> 3725</span>&#160;   }</div><div class="line"><a name="l03726"></a><span class="lineno"> 3726</span>&#160;</div><div class="line"><a name="l03727"></a><span class="lineno"> 3727</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76bd08a36963707fcb29643b2d3bb49">CONFFLAG_AGI</a>)) {</div><div class="line"><a name="l03728"></a><span class="lineno"> 3728</span>&#160;      <span class="comment">/* Get name of AGI file to run from $(MEETME_AGI_BACKGROUND)</span></div><div class="line"><a name="l03729"></a><span class="lineno"> 3729</span>&#160;<span class="comment">         or use default filename of conf-background.agi */</span></div><div class="line"><a name="l03730"></a><span class="lineno"> 3730</span>&#160;</div><div class="line"><a name="l03731"></a><span class="lineno"> 3731</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l03732"></a><span class="lineno"> 3732</span>&#160;      <span class="keywordflow">if</span> ((tmpvar = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MEETME_AGI_BACKGROUND&quot;</span>))) {</div><div class="line"><a name="l03733"></a><span class="lineno"> 3733</span>&#160;         agifile = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(tmpvar);</div><div class="line"><a name="l03734"></a><span class="lineno"> 3734</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03735"></a><span class="lineno"> 3735</span>&#160;         agifile = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(agifiledefault);</div><div class="line"><a name="l03736"></a><span class="lineno"> 3736</span>&#160;      }</div><div class="line"><a name="l03737"></a><span class="lineno"> 3737</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l03738"></a><span class="lineno"> 3738</span>&#160;</div><div class="line"><a name="l03739"></a><span class="lineno"> 3739</span>&#160;      <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#af950158a50739005416f058684729d28">dahdichannel</a>) {</div><div class="line"><a name="l03740"></a><span class="lineno"> 3740</span>&#160;         <span class="comment">/*  Set CONFMUTE mode on DAHDI channel to mute DTMF tones */</span></div><div class="line"><a name="l03741"></a><span class="lineno"> 3741</span>&#160;         x = 1;</div><div class="line"><a name="l03742"></a><span class="lineno"> 3742</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a31312f6b6c2296e3495ad1d9e198cbf4">AST_OPTION_TONE_VERIFY</a>, &amp;x, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), 0);</div><div class="line"><a name="l03743"></a><span class="lineno"> 3743</span>&#160;      }</div><div class="line"><a name="l03744"></a><span class="lineno"> 3744</span>&#160;      <span class="comment">/* Find a pointer to the agi app and execute the script */</span></div><div class="line"><a name="l03745"></a><span class="lineno"> 3745</span>&#160;      agi_app = <a class="code" href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a>(<span class="stringliteral">&quot;agi&quot;</span>);</div><div class="line"><a name="l03746"></a><span class="lineno"> 3746</span>&#160;      <span class="keywordflow">if</span> (agi_app) {</div><div class="line"><a name="l03747"></a><span class="lineno"> 3747</span>&#160;         ret = <a class="code" href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a>(chan, agi_app, agifile);</div><div class="line"><a name="l03748"></a><span class="lineno"> 3748</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03749"></a><span class="lineno"> 3749</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Could not find application (agi)\n&quot;</span>);</div><div class="line"><a name="l03750"></a><span class="lineno"> 3750</span>&#160;         ret = -2;</div><div class="line"><a name="l03751"></a><span class="lineno"> 3751</span>&#160;      }</div><div class="line"><a name="l03752"></a><span class="lineno"> 3752</span>&#160;      <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#af950158a50739005416f058684729d28">dahdichannel</a>) {</div><div class="line"><a name="l03753"></a><span class="lineno"> 3753</span>&#160;         <span class="comment">/*  Remove CONFMUTE mode on DAHDI channel */</span></div><div class="line"><a name="l03754"></a><span class="lineno"> 3754</span>&#160;         x = 0;</div><div class="line"><a name="l03755"></a><span class="lineno"> 3755</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a31312f6b6c2296e3495ad1d9e198cbf4">AST_OPTION_TONE_VERIFY</a>, &amp;x, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), 0);</div><div class="line"><a name="l03756"></a><span class="lineno"> 3756</span>&#160;      }</div><div class="line"><a name="l03757"></a><span class="lineno"> 3757</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03758"></a><span class="lineno"> 3758</span>&#160;      <span class="keywordtype">int</span> lastusers = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>;</div><div class="line"><a name="l03759"></a><span class="lineno"> 3759</span>&#160;      <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#af950158a50739005416f058684729d28">dahdichannel</a> &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8c1f23aabf6a93f20eb6b11fe8e2b857">CONFFLAG_STARMENU</a>)) {</div><div class="line"><a name="l03760"></a><span class="lineno"> 3760</span>&#160;         <span class="comment">/*  Set CONFMUTE mode on DAHDI channel to mute DTMF tones when the menu is enabled */</span></div><div class="line"><a name="l03761"></a><span class="lineno"> 3761</span>&#160;         x = 1;</div><div class="line"><a name="l03762"></a><span class="lineno"> 3762</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a31312f6b6c2296e3495ad1d9e198cbf4">AST_OPTION_TONE_VERIFY</a>, &amp;x, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>), 0);</div><div class="line"><a name="l03763"></a><span class="lineno"> 3763</span>&#160;      }</div><div class="line"><a name="l03764"></a><span class="lineno"> 3764</span>&#160;</div><div class="line"><a name="l03765"></a><span class="lineno"> 3765</span>&#160;      <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l03766"></a><span class="lineno"> 3766</span>&#160;         <span class="keywordtype">int</span> menu_was_active = 0;</div><div class="line"><a name="l03767"></a><span class="lineno"> 3767</span>&#160;</div><div class="line"><a name="l03768"></a><span class="lineno"> 3768</span>&#160;         outfd = -1;</div><div class="line"><a name="l03769"></a><span class="lineno"> 3769</span>&#160;         ms = -1;</div><div class="line"><a name="l03770"></a><span class="lineno"> 3770</span>&#160;         now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03771"></a><span class="lineno"> 3771</span>&#160;</div><div class="line"><a name="l03772"></a><span class="lineno"> 3772</span>&#160;         <span class="keywordflow">if</span> (rt_schedule &amp;&amp; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">endtime</a>) {</div><div class="line"><a name="l03773"></a><span class="lineno"> 3773</span>&#160;            <span class="keywordtype">char</span> currenttime[32];</div><div class="line"><a name="l03774"></a><span class="lineno"> 3774</span>&#160;            <span class="keywordtype">long</span> localendtime = 0;</div><div class="line"><a name="l03775"></a><span class="lineno"> 3775</span>&#160;            <span class="keywordtype">int</span> extended = 0;</div><div class="line"><a name="l03776"></a><span class="lineno"> 3776</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm;</div><div class="line"><a name="l03777"></a><span class="lineno"> 3777</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, *origvar;</div><div class="line"><a name="l03778"></a><span class="lineno"> 3778</span>&#160;            <span class="keyword">struct </span>timeval tmp;</div><div class="line"><a name="l03779"></a><span class="lineno"> 3779</span>&#160;</div><div class="line"><a name="l03780"></a><span class="lineno"> 3780</span>&#160;            <span class="keywordflow">if</span> (now.tv_sec % 60 == 0) {</div><div class="line"><a name="l03781"></a><span class="lineno"> 3781</span>&#160;               <span class="keywordflow">if</span> (!checked) {</div><div class="line"><a name="l03782"></a><span class="lineno"> 3782</span>&#160;                  <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03783"></a><span class="lineno"> 3783</span>&#160;                  <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(currenttime, <span class="keyword">sizeof</span>(currenttime), <a class="code" href="../../df/d44/app__meetme_8c.html#af3a7249af0dc84e61384327caa331213">DATE_FORMAT</a>, &amp;tm);</div><div class="line"><a name="l03784"></a><span class="lineno"> 3784</span>&#160;                  var = origvar = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>,</div><div class="line"><a name="l03785"></a><span class="lineno"> 3785</span>&#160;                     conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <span class="stringliteral">&quot;starttime &lt;=&quot;</span>, currenttime,</div><div class="line"><a name="l03786"></a><span class="lineno"> 3786</span>&#160;                      <span class="stringliteral">&quot;endtime &gt;=&quot;</span>, currenttime, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03787"></a><span class="lineno"> 3787</span>&#160;</div><div class="line"><a name="l03788"></a><span class="lineno"> 3788</span>&#160;                  <span class="keywordflow">for</span> ( ; <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>; var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l03789"></a><span class="lineno"> 3789</span>&#160;                     <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;endtime&quot;</span>)) {</div><div class="line"><a name="l03790"></a><span class="lineno"> 3790</span>&#160;                        <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> endtime_tm;</div><div class="line"><a name="l03791"></a><span class="lineno"> 3791</span>&#160;                        <a class="code" href="../../d5/deb/localtime_8h.html#a3eb2c73accce1b149ce597de80d1677a">ast_strptime</a>(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, &amp;endtime_tm);</div><div class="line"><a name="l03792"></a><span class="lineno"> 3792</span>&#160;                        tmp = <a class="code" href="../../d5/deb/localtime_8h.html#ae0843e4dbbd1fed36d2676dda58e0c44">ast_mktime</a>(&amp;endtime_tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03793"></a><span class="lineno"> 3793</span>&#160;                        localendtime = tmp.tv_sec;</div><div class="line"><a name="l03794"></a><span class="lineno"> 3794</span>&#160;                     }</div><div class="line"><a name="l03795"></a><span class="lineno"> 3795</span>&#160;                  }</div><div class="line"><a name="l03796"></a><span class="lineno"> 3796</span>&#160;                  <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(origvar);</div><div class="line"><a name="l03797"></a><span class="lineno"> 3797</span>&#160;</div><div class="line"><a name="l03798"></a><span class="lineno"> 3798</span>&#160;                  <span class="comment">/* A conference can be extended from the</span></div><div class="line"><a name="l03799"></a><span class="lineno"> 3799</span>&#160;<span class="comment">                     Admin/User menu or by an external source */</span></div><div class="line"><a name="l03800"></a><span class="lineno"> 3800</span>&#160;                  <span class="keywordflow">if</span> (localendtime &gt; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">endtime</a>){</div><div class="line"><a name="l03801"></a><span class="lineno"> 3801</span>&#160;                     conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">endtime</a> = localendtime;</div><div class="line"><a name="l03802"></a><span class="lineno"> 3802</span>&#160;                     extended = 1;</div><div class="line"><a name="l03803"></a><span class="lineno"> 3803</span>&#160;                  }</div><div class="line"><a name="l03804"></a><span class="lineno"> 3804</span>&#160;</div><div class="line"><a name="l03805"></a><span class="lineno"> 3805</span>&#160;                  <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">endtime</a> &amp;&amp; (now.tv_sec &gt;= conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">endtime</a>)) {</div><div class="line"><a name="l03806"></a><span class="lineno"> 3806</span>&#160;                     <a class="code" href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a>(<span class="stringliteral">&quot;Quitting time...\n&quot;</span>);</div><div class="line"><a name="l03807"></a><span class="lineno"> 3807</span>&#160;                     <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03808"></a><span class="lineno"> 3808</span>&#160;                  }</div><div class="line"><a name="l03809"></a><span class="lineno"> 3809</span>&#160;</div><div class="line"><a name="l03810"></a><span class="lineno"> 3810</span>&#160;                  <span class="keywordflow">if</span> (!announcement_played &amp;&amp; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a35cc725664fd0b4f53fbbb7d0f15c038">endalert</a>) {</div><div class="line"><a name="l03811"></a><span class="lineno"> 3811</span>&#160;                     <span class="keywordflow">if</span> (now.tv_sec + conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a35cc725664fd0b4f53fbbb7d0f15c038">endalert</a> &gt;= conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">endtime</a>) {</div><div class="line"><a name="l03812"></a><span class="lineno"> 3812</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-will-end-in&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))</div><div class="line"><a name="l03813"></a><span class="lineno"> 3813</span>&#160;                           <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03814"></a><span class="lineno"> 3814</span>&#160;                        <a class="code" href="../../db/dce/say_8h.html#a7cf9dcf6ae6fcedb7752d0deac683b3b">ast_say_digits</a>(chan, (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">endtime</a> - now.tv_sec) / 60, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l03815"></a><span class="lineno"> 3815</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;minutes&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan)))</div><div class="line"><a name="l03816"></a><span class="lineno"> 3816</span>&#160;                           <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03817"></a><span class="lineno"> 3817</span>&#160;                        <span class="keywordflow">if</span> (musiconhold) {</div><div class="line"><a name="l03818"></a><span class="lineno"> 3818</span>&#160;                           <a class="code" href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601">conf_start_moh</a>(chan, optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a>]);</div><div class="line"><a name="l03819"></a><span class="lineno"> 3819</span>&#160;                        }</div><div class="line"><a name="l03820"></a><span class="lineno"> 3820</span>&#160;                        announcement_played = 1;</div><div class="line"><a name="l03821"></a><span class="lineno"> 3821</span>&#160;                     }</div><div class="line"><a name="l03822"></a><span class="lineno"> 3822</span>&#160;                  }</div><div class="line"><a name="l03823"></a><span class="lineno"> 3823</span>&#160;</div><div class="line"><a name="l03824"></a><span class="lineno"> 3824</span>&#160;                  <span class="keywordflow">if</span> (extended) {</div><div class="line"><a name="l03825"></a><span class="lineno"> 3825</span>&#160;                     announcement_played = 0;</div><div class="line"><a name="l03826"></a><span class="lineno"> 3826</span>&#160;                  }</div><div class="line"><a name="l03827"></a><span class="lineno"> 3827</span>&#160;</div><div class="line"><a name="l03828"></a><span class="lineno"> 3828</span>&#160;                  checked = 1;</div><div class="line"><a name="l03829"></a><span class="lineno"> 3829</span>&#160;               }</div><div class="line"><a name="l03830"></a><span class="lineno"> 3830</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03831"></a><span class="lineno"> 3831</span>&#160;               checked = 0;</div><div class="line"><a name="l03832"></a><span class="lineno"> 3832</span>&#160;            }</div><div class="line"><a name="l03833"></a><span class="lineno"> 3833</span>&#160;         }</div><div class="line"><a name="l03834"></a><span class="lineno"> 3834</span>&#160;</div><div class="line"><a name="l03835"></a><span class="lineno"> 3835</span>&#160;         <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ae5ad22d81786b1fc2a541ad84f1cd860">kicktime</a> &amp;&amp; (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ae5ad22d81786b1fc2a541ad84f1cd860">kicktime</a> &lt;= now.tv_sec)) {</div><div class="line"><a name="l03836"></a><span class="lineno"> 3836</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83">CONFFLAG_KICK_CONTINUE</a>)) {</div><div class="line"><a name="l03837"></a><span class="lineno"> 3837</span>&#160;               ret = 0;</div><div class="line"><a name="l03838"></a><span class="lineno"> 3838</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03839"></a><span class="lineno"> 3839</span>&#160;               ret = -1;</div><div class="line"><a name="l03840"></a><span class="lineno"> 3840</span>&#160;            }</div><div class="line"><a name="l03841"></a><span class="lineno"> 3841</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03842"></a><span class="lineno"> 3842</span>&#160;         }</div><div class="line"><a name="l03843"></a><span class="lineno"> 3843</span>&#160;</div><div class="line"><a name="l03844"></a><span class="lineno"> 3844</span>&#160;         to = -1;</div><div class="line"><a name="l03845"></a><span class="lineno"> 3845</span>&#160;         <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>) {</div><div class="line"><a name="l03846"></a><span class="lineno"> 3846</span>&#160;            <span class="keywordtype">int</span> minutes = 0, seconds = 0, remain = 0;</div><div class="line"><a name="l03847"></a><span class="lineno"> 3847</span>&#160;</div><div class="line"><a name="l03848"></a><span class="lineno"> 3848</span>&#160;            to = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(nexteventts, now);</div><div class="line"><a name="l03849"></a><span class="lineno"> 3849</span>&#160;            <span class="keywordflow">if</span> (to &lt; 0) {</div><div class="line"><a name="l03850"></a><span class="lineno"> 3850</span>&#160;               to = 0;</div><div class="line"><a name="l03851"></a><span class="lineno"> 3851</span>&#160;            }</div><div class="line"><a name="l03852"></a><span class="lineno"> 3852</span>&#160;            time_left_ms = user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a> - <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(now, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab83335d6897e2ea22f24b1b8afd95b0f">start_time</a>);</div><div class="line"><a name="l03853"></a><span class="lineno"> 3853</span>&#160;            <span class="keywordflow">if</span> (time_left_ms &lt; to) {</div><div class="line"><a name="l03854"></a><span class="lineno"> 3854</span>&#160;               to = time_left_ms;</div><div class="line"><a name="l03855"></a><span class="lineno"> 3855</span>&#160;            }</div><div class="line"><a name="l03856"></a><span class="lineno"> 3856</span>&#160;</div><div class="line"><a name="l03857"></a><span class="lineno"> 3857</span>&#160;            <span class="keywordflow">if</span> (time_left_ms &lt;= 0) {</div><div class="line"><a name="l03858"></a><span class="lineno"> 3858</span>&#160;               <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a>) {</div><div class="line"><a name="l03859"></a><span class="lineno"> 3859</span>&#160;                  res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0b23b4ebfc857809d07d1ced94c9a6eb">end_sound</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l03860"></a><span class="lineno"> 3860</span>&#160;                  res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03861"></a><span class="lineno"> 3861</span>&#160;               }</div><div class="line"><a name="l03862"></a><span class="lineno"> 3862</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83">CONFFLAG_KICK_CONTINUE</a>)) {</div><div class="line"><a name="l03863"></a><span class="lineno"> 3863</span>&#160;                  ret = 0;</div><div class="line"><a name="l03864"></a><span class="lineno"> 3864</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03865"></a><span class="lineno"> 3865</span>&#160;                  ret = -1;</div><div class="line"><a name="l03866"></a><span class="lineno"> 3866</span>&#160;               }</div><div class="line"><a name="l03867"></a><span class="lineno"> 3867</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l03868"></a><span class="lineno"> 3868</span>&#160;            }</div><div class="line"><a name="l03869"></a><span class="lineno"> 3869</span>&#160;</div><div class="line"><a name="l03870"></a><span class="lineno"> 3870</span>&#160;            <span class="keywordflow">if</span> (!to) {</div><div class="line"><a name="l03871"></a><span class="lineno"> 3871</span>&#160;               <span class="keywordflow">if</span> (time_left_ms &gt;= 5000) {</div><div class="line"><a name="l03872"></a><span class="lineno"> 3872</span>&#160;</div><div class="line"><a name="l03873"></a><span class="lineno"> 3873</span>&#160;                  remain = (time_left_ms + 500) / 1000;</div><div class="line"><a name="l03874"></a><span class="lineno"> 3874</span>&#160;                  <span class="keywordflow">if</span> (remain / 60 &gt;= 1) {</div><div class="line"><a name="l03875"></a><span class="lineno"> 3875</span>&#160;                     minutes = remain / 60;</div><div class="line"><a name="l03876"></a><span class="lineno"> 3876</span>&#160;                     seconds = remain % 60;</div><div class="line"><a name="l03877"></a><span class="lineno"> 3877</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03878"></a><span class="lineno"> 3878</span>&#160;                     seconds = remain;</div><div class="line"><a name="l03879"></a><span class="lineno"> 3879</span>&#160;                  }</div><div class="line"><a name="l03880"></a><span class="lineno"> 3880</span>&#160;</div><div class="line"><a name="l03881"></a><span class="lineno"> 3881</span>&#160;                  <span class="comment">/* force the time left to round up if appropriate */</span></div><div class="line"><a name="l03882"></a><span class="lineno"> 3882</span>&#160;                  <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a> &amp;&amp; user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#af3d16394c849390df1c8f72569faeb37">play_warning</a>) {</div><div class="line"><a name="l03883"></a><span class="lineno"> 3883</span>&#160;                     <span class="keywordflow">if</span> (!strcmp(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a>, <span class="stringliteral">&quot;timeleft&quot;</span>)) {</div><div class="line"><a name="l03884"></a><span class="lineno"> 3884</span>&#160;</div><div class="line"><a name="l03885"></a><span class="lineno"> 3885</span>&#160;                        res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;vm-youhave&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l03886"></a><span class="lineno"> 3886</span>&#160;                        res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03887"></a><span class="lineno"> 3887</span>&#160;                        <span class="keywordflow">if</span> (minutes) {</div><div class="line"><a name="l03888"></a><span class="lineno"> 3888</span>&#160;                           res = <a class="code" href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a>(chan, minutes, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), (<span class="keywordtype">char</span> *) <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03889"></a><span class="lineno"> 3889</span>&#160;                           res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;queue-minutes&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l03890"></a><span class="lineno"> 3890</span>&#160;                           res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03891"></a><span class="lineno"> 3891</span>&#160;                        }</div><div class="line"><a name="l03892"></a><span class="lineno"> 3892</span>&#160;                        <span class="keywordflow">if</span> (seconds) {</div><div class="line"><a name="l03893"></a><span class="lineno"> 3893</span>&#160;                           res = <a class="code" href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a>(chan, seconds, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), (<span class="keywordtype">char</span> *) <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03894"></a><span class="lineno"> 3894</span>&#160;                           res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;queue-seconds&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l03895"></a><span class="lineno"> 3895</span>&#160;                           res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03896"></a><span class="lineno"> 3896</span>&#160;                        }</div><div class="line"><a name="l03897"></a><span class="lineno"> 3897</span>&#160;                     } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03898"></a><span class="lineno"> 3898</span>&#160;                        res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1fa6cb6235cf4abe198a8561e3c18bae">warning_sound</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l03899"></a><span class="lineno"> 3899</span>&#160;                        res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03900"></a><span class="lineno"> 3900</span>&#160;                     }</div><div class="line"><a name="l03901"></a><span class="lineno"> 3901</span>&#160;                     <span class="keywordflow">if</span> (musiconhold) {</div><div class="line"><a name="l03902"></a><span class="lineno"> 3902</span>&#160;                        <a class="code" href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601">conf_start_moh</a>(chan, optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a>]);</div><div class="line"><a name="l03903"></a><span class="lineno"> 3903</span>&#160;                     }</div><div class="line"><a name="l03904"></a><span class="lineno"> 3904</span>&#160;                  }</div><div class="line"><a name="l03905"></a><span class="lineno"> 3905</span>&#160;               }</div><div class="line"><a name="l03906"></a><span class="lineno"> 3906</span>&#160;               <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a>) {</div><div class="line"><a name="l03907"></a><span class="lineno"> 3907</span>&#160;                  nexteventts = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(nexteventts, <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#abc09654c9b36de6b0bd0bfd92d31c0c0">warning_freq</a>, 1000));</div><div class="line"><a name="l03908"></a><span class="lineno"> 3908</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03909"></a><span class="lineno"> 3909</span>&#160;                  nexteventts = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab83335d6897e2ea22f24b1b8afd95b0f">start_time</a>, <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">timelimit</a>, 1000));</div><div class="line"><a name="l03910"></a><span class="lineno"> 3910</span>&#160;               }</div><div class="line"><a name="l03911"></a><span class="lineno"> 3911</span>&#160;            }</div><div class="line"><a name="l03912"></a><span class="lineno"> 3912</span>&#160;         }</div><div class="line"><a name="l03913"></a><span class="lineno"> 3913</span>&#160;</div><div class="line"><a name="l03914"></a><span class="lineno"> 3914</span>&#160;         now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l03915"></a><span class="lineno"> 3915</span>&#160;         <span class="keywordflow">if</span> (timeout &amp;&amp; now.tv_sec &gt;= timeout) {</div><div class="line"><a name="l03916"></a><span class="lineno"> 3916</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83">CONFFLAG_KICK_CONTINUE</a>)) {</div><div class="line"><a name="l03917"></a><span class="lineno"> 3917</span>&#160;               ret = 0;</div><div class="line"><a name="l03918"></a><span class="lineno"> 3918</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03919"></a><span class="lineno"> 3919</span>&#160;               ret = -1;</div><div class="line"><a name="l03920"></a><span class="lineno"> 3920</span>&#160;            }</div><div class="line"><a name="l03921"></a><span class="lineno"> 3921</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l03922"></a><span class="lineno"> 3922</span>&#160;         }</div><div class="line"><a name="l03923"></a><span class="lineno"> 3923</span>&#160;</div><div class="line"><a name="l03924"></a><span class="lineno"> 3924</span>&#160;         <span class="comment">/* if we have just exited from the menu, and the user had a channel-driver</span></div><div class="line"><a name="l03925"></a><span class="lineno"> 3925</span>&#160;<span class="comment">            volume adjustment, restore it</span></div><div class="line"><a name="l03926"></a><span class="lineno"> 3926</span>&#160;<span class="comment">         */</span></div><div class="line"><a name="l03927"></a><span class="lineno"> 3927</span>&#160;         <span class="keywordflow">if</span> (!menu_mode &amp;&amp; menu_was_active &amp;&amp; user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a> &amp;&amp; !user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a>) {</div><div class="line"><a name="l03928"></a><span class="lineno"> 3928</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a4a7eef0979d0a4b9267d5bc5d98fde30">set_talk_volume</a>(user, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a>);</div><div class="line"><a name="l03929"></a><span class="lineno"> 3929</span>&#160;         }</div><div class="line"><a name="l03930"></a><span class="lineno"> 3930</span>&#160;</div><div class="line"><a name="l03931"></a><span class="lineno"> 3931</span>&#160;         menu_was_active = menu_mode;</div><div class="line"><a name="l03932"></a><span class="lineno"> 3932</span>&#160;</div><div class="line"><a name="l03933"></a><span class="lineno"> 3933</span>&#160;         currentmarked = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>;</div><div class="line"><a name="l03934"></a><span class="lineno"> 3934</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp;</div><div class="line"><a name="l03935"></a><span class="lineno"> 3935</span>&#160;             <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a>) &amp;&amp;</div><div class="line"><a name="l03936"></a><span class="lineno"> 3936</span>&#160;             <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>) &amp;&amp;</div><div class="line"><a name="l03937"></a><span class="lineno"> 3937</span>&#160;             lastmarked == 0) {</div><div class="line"><a name="l03938"></a><span class="lineno"> 3938</span>&#160;            <span class="keywordflow">if</span> (currentmarked == 1 &amp;&amp; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> &gt; 1) {</div><div class="line"><a name="l03939"></a><span class="lineno"> 3939</span>&#160;               <a class="code" href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a>(chan, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> - 1, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), (<span class="keywordtype">char</span> *) <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l03940"></a><span class="lineno"> 3940</span>&#160;               <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> - 1 == 1) {</div><div class="line"><a name="l03941"></a><span class="lineno"> 3941</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-userwilljoin&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03942"></a><span class="lineno"> 3942</span>&#160;                     <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03943"></a><span class="lineno"> 3943</span>&#160;                  }</div><div class="line"><a name="l03944"></a><span class="lineno"> 3944</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03945"></a><span class="lineno"> 3945</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-userswilljoin&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03946"></a><span class="lineno"> 3946</span>&#160;                     <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03947"></a><span class="lineno"> 3947</span>&#160;                  }</div><div class="line"><a name="l03948"></a><span class="lineno"> 3948</span>&#160;               }</div><div class="line"><a name="l03949"></a><span class="lineno"> 3949</span>&#160;            }</div><div class="line"><a name="l03950"></a><span class="lineno"> 3950</span>&#160;            <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 1 &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a>)) {</div><div class="line"><a name="l03951"></a><span class="lineno"> 3951</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-onlyperson&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03952"></a><span class="lineno"> 3952</span>&#160;                  <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03953"></a><span class="lineno"> 3953</span>&#160;               }</div><div class="line"><a name="l03954"></a><span class="lineno"> 3954</span>&#160;            }</div><div class="line"><a name="l03955"></a><span class="lineno"> 3955</span>&#160;         }</div><div class="line"><a name="l03956"></a><span class="lineno"> 3956</span>&#160;</div><div class="line"><a name="l03957"></a><span class="lineno"> 3957</span>&#160;         <span class="comment">/* Update the struct with the actual confflags */</span></div><div class="line"><a name="l03958"></a><span class="lineno"> 3958</span>&#160;         user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a> = *confflags;</div><div class="line"><a name="l03959"></a><span class="lineno"> 3959</span>&#160;</div><div class="line"><a name="l03960"></a><span class="lineno"> 3960</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>)) {</div><div class="line"><a name="l03961"></a><span class="lineno"> 3961</span>&#160;            <span class="keywordflow">if</span> (currentmarked == 0) {</div><div class="line"><a name="l03962"></a><span class="lineno"> 3962</span>&#160;               <span class="keywordflow">if</span> (lastmarked != 0) {</div><div class="line"><a name="l03963"></a><span class="lineno"> 3963</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>)) {</div><div class="line"><a name="l03964"></a><span class="lineno"> 3964</span>&#160;                     <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-leaderhasleft&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l03965"></a><span class="lineno"> 3965</span>&#160;                        <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l03966"></a><span class="lineno"> 3966</span>&#160;                     }</div><div class="line"><a name="l03967"></a><span class="lineno"> 3967</span>&#160;                  }</div><div class="line"><a name="l03968"></a><span class="lineno"> 3968</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">CONFFLAG_MARKEDEXIT</a>)) {</div><div class="line"><a name="l03969"></a><span class="lineno"> 3969</span>&#160;                     <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83">CONFFLAG_KICK_CONTINUE</a>)) {</div><div class="line"><a name="l03970"></a><span class="lineno"> 3970</span>&#160;                        ret = 0;</div><div class="line"><a name="l03971"></a><span class="lineno"> 3971</span>&#160;                     }</div><div class="line"><a name="l03972"></a><span class="lineno"> 3972</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l03973"></a><span class="lineno"> 3973</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03974"></a><span class="lineno"> 3974</span>&#160;                     dahdic.confmode = DAHDI_CONF_CONF;</div><div class="line"><a name="l03975"></a><span class="lineno"> 3975</span>&#160;                     <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l03976"></a><span class="lineno"> 3976</span>&#160;                        <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error setting conference\n&quot;</span>);</div><div class="line"><a name="l03977"></a><span class="lineno"> 3977</span>&#160;                        close(fd);</div><div class="line"><a name="l03978"></a><span class="lineno"> 3978</span>&#160;                        <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l03979"></a><span class="lineno"> 3979</span>&#160;                     }</div><div class="line"><a name="l03980"></a><span class="lineno"> 3980</span>&#160;                  }</div><div class="line"><a name="l03981"></a><span class="lineno"> 3981</span>&#160;               }</div><div class="line"><a name="l03982"></a><span class="lineno"> 3982</span>&#160;               <span class="keywordflow">if</span> (!musiconhold &amp;&amp; (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a9fc9420ac235de446f7a35a766a7bd4b">CONFFLAG_MOH</a>))) {</div><div class="line"><a name="l03983"></a><span class="lineno"> 3983</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601">conf_start_moh</a>(chan, optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a>]);</div><div class="line"><a name="l03984"></a><span class="lineno"> 3984</span>&#160;                  musiconhold = 1;</div><div class="line"><a name="l03985"></a><span class="lineno"> 3985</span>&#160;               }</div><div class="line"><a name="l03986"></a><span class="lineno"> 3986</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (currentmarked &gt;= 1 &amp;&amp; lastmarked == 0) {</div><div class="line"><a name="l03987"></a><span class="lineno"> 3987</span>&#160;               <span class="comment">/* Marked user entered, so cancel timeout */</span></div><div class="line"><a name="l03988"></a><span class="lineno"> 3988</span>&#160;               timeout = 0;</div><div class="line"><a name="l03989"></a><span class="lineno"> 3989</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>)) {</div><div class="line"><a name="l03990"></a><span class="lineno"> 3990</span>&#160;                  dahdic.confmode = DAHDI_CONF_CONFMON | DAHDI_CONF_LISTENER;</div><div class="line"><a name="l03991"></a><span class="lineno"> 3991</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a39a9c6b58c7b77ef675e56d00c89e0a8">CONFFLAG_TALKER</a>)) {</div><div class="line"><a name="l03992"></a><span class="lineno"> 3992</span>&#160;                  dahdic.confmode = DAHDI_CONF_CONF | DAHDI_CONF_TALKER;</div><div class="line"><a name="l03993"></a><span class="lineno"> 3993</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l03994"></a><span class="lineno"> 3994</span>&#160;                  dahdic.confmode = DAHDI_CONF_CONF | DAHDI_CONF_TALKER | DAHDI_CONF_LISTENER;</div><div class="line"><a name="l03995"></a><span class="lineno"> 3995</span>&#160;               }</div><div class="line"><a name="l03996"></a><span class="lineno"> 3996</span>&#160;               <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l03997"></a><span class="lineno"> 3997</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error setting conference\n&quot;</span>);</div><div class="line"><a name="l03998"></a><span class="lineno"> 3998</span>&#160;                  close(fd);</div><div class="line"><a name="l03999"></a><span class="lineno"> 3999</span>&#160;                  <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l04000"></a><span class="lineno"> 4000</span>&#160;               }</div><div class="line"><a name="l04001"></a><span class="lineno"> 4001</span>&#160;               <span class="keywordflow">if</span> (musiconhold &amp;&amp; (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a9fc9420ac235de446f7a35a766a7bd4b">CONFFLAG_MOH</a>))) {</div><div class="line"><a name="l04002"></a><span class="lineno"> 4002</span>&#160;                  <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(chan);</div><div class="line"><a name="l04003"></a><span class="lineno"> 4003</span>&#160;                  musiconhold = 0;</div><div class="line"><a name="l04004"></a><span class="lineno"> 4004</span>&#160;               }</div><div class="line"><a name="l04005"></a><span class="lineno"> 4005</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp;</div><div class="line"><a name="l04006"></a><span class="lineno"> 4006</span>&#160;                  !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a>)) {</div><div class="line"><a name="l04007"></a><span class="lineno"> 4007</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-placeintoconf&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l04008"></a><span class="lineno"> 4008</span>&#160;                     <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04009"></a><span class="lineno"> 4009</span>&#160;                  }</div><div class="line"><a name="l04010"></a><span class="lineno"> 4010</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#a645090dd89fa3f8aaff60ea7eb38be18">conf_play</a>(chan, conf, <a class="code" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49ba951ab68bb8f7daafb78951107080904e">ENTER</a>);</div><div class="line"><a name="l04011"></a><span class="lineno"> 4011</span>&#160;               }</div><div class="line"><a name="l04012"></a><span class="lineno"> 4012</span>&#160;            }</div><div class="line"><a name="l04013"></a><span class="lineno"> 4013</span>&#160;         }</div><div class="line"><a name="l04014"></a><span class="lineno"> 4014</span>&#160;</div><div class="line"><a name="l04015"></a><span class="lineno"> 4015</span>&#160;         <span class="comment">/* trying to add moh for single person conf */</span></div><div class="line"><a name="l04016"></a><span class="lineno"> 4016</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a9fc9420ac235de446f7a35a766a7bd4b">CONFFLAG_MOH</a>) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>)) {</div><div class="line"><a name="l04017"></a><span class="lineno"> 4017</span>&#160;            <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 1) {</div><div class="line"><a name="l04018"></a><span class="lineno"> 4018</span>&#160;               <span class="keywordflow">if</span> (!musiconhold) {</div><div class="line"><a name="l04019"></a><span class="lineno"> 4019</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601">conf_start_moh</a>(chan, optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a>]);</div><div class="line"><a name="l04020"></a><span class="lineno"> 4020</span>&#160;                  musiconhold = 1;</div><div class="line"><a name="l04021"></a><span class="lineno"> 4021</span>&#160;               }</div><div class="line"><a name="l04022"></a><span class="lineno"> 4022</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04023"></a><span class="lineno"> 4023</span>&#160;               <span class="keywordflow">if</span> (musiconhold) {</div><div class="line"><a name="l04024"></a><span class="lineno"> 4024</span>&#160;                  <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(chan);</div><div class="line"><a name="l04025"></a><span class="lineno"> 4025</span>&#160;                  musiconhold = 0;</div><div class="line"><a name="l04026"></a><span class="lineno"> 4026</span>&#160;               }</div><div class="line"><a name="l04027"></a><span class="lineno"> 4027</span>&#160;            }</div><div class="line"><a name="l04028"></a><span class="lineno"> 4028</span>&#160;         }</div><div class="line"><a name="l04029"></a><span class="lineno"> 4029</span>&#160;</div><div class="line"><a name="l04030"></a><span class="lineno"> 4030</span>&#160;         <span class="comment">/* Leave if the last marked user left */</span></div><div class="line"><a name="l04031"></a><span class="lineno"> 4031</span>&#160;         <span class="keywordflow">if</span> (currentmarked == 0 &amp;&amp; lastmarked != 0 &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">CONFFLAG_MARKEDEXIT</a>)) {</div><div class="line"><a name="l04032"></a><span class="lineno"> 4032</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83">CONFFLAG_KICK_CONTINUE</a>)) {</div><div class="line"><a name="l04033"></a><span class="lineno"> 4033</span>&#160;               ret = 0;</div><div class="line"><a name="l04034"></a><span class="lineno"> 4034</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04035"></a><span class="lineno"> 4035</span>&#160;               ret = -1;</div><div class="line"><a name="l04036"></a><span class="lineno"> 4036</span>&#160;            }</div><div class="line"><a name="l04037"></a><span class="lineno"> 4037</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04038"></a><span class="lineno"> 4038</span>&#160;         }</div><div class="line"><a name="l04039"></a><span class="lineno"> 4039</span>&#160;</div><div class="line"><a name="l04040"></a><span class="lineno"> 4040</span>&#160;         <span class="comment">/* Throw a TestEvent if a user exit did not cause this user to leave the conference */</span></div><div class="line"><a name="l04041"></a><span class="lineno"> 4041</span>&#160;         <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> != lastusers) {</div><div class="line"><a name="l04042"></a><span class="lineno"> 4042</span>&#160;            <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> &lt; lastusers) {</div><div class="line"><a name="l04043"></a><span class="lineno"> 4043</span>&#160;               <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;NOEXIT&quot;</span>, <span class="stringliteral">&quot;Message: CONFFLAG_MARKEDEXIT\r\nLastUsers: %d\r\nUsers: %d&quot;</span>, lastusers, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>);</div><div class="line"><a name="l04044"></a><span class="lineno"> 4044</span>&#160;            }</div><div class="line"><a name="l04045"></a><span class="lineno"> 4045</span>&#160;            lastusers = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>;</div><div class="line"><a name="l04046"></a><span class="lineno"> 4046</span>&#160;         }</div><div class="line"><a name="l04047"></a><span class="lineno"> 4047</span>&#160;</div><div class="line"><a name="l04048"></a><span class="lineno"> 4048</span>&#160;         <span class="comment">/* Check if my modes have changed */</span></div><div class="line"><a name="l04049"></a><span class="lineno"> 4049</span>&#160;</div><div class="line"><a name="l04050"></a><span class="lineno"> 4050</span>&#160;         <span class="comment">/* If I should be muted but am still talker, mute me */</span></div><div class="line"><a name="l04051"></a><span class="lineno"> 4051</span>&#160;         <span class="keywordflow">if</span> ((user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>)) &amp;&amp; (dahdic.confmode &amp; DAHDI_CONF_TALKER)) {</div><div class="line"><a name="l04052"></a><span class="lineno"> 4052</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, status_blob, <a class="code" href="../../df/d44/app__meetme_8c.html#a1f74b6bae5e30f6a05295e3196986a44">status_to_json</a>(1), <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l04053"></a><span class="lineno"> 4053</span>&#160;            dahdic.confmode ^= DAHDI_CONF_TALKER;</div><div class="line"><a name="l04054"></a><span class="lineno"> 4054</span>&#160;            <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l04055"></a><span class="lineno"> 4055</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error setting conference - Un/Mute \n&quot;</span>);</div><div class="line"><a name="l04056"></a><span class="lineno"> 4056</span>&#160;               ret = -1;</div><div class="line"><a name="l04057"></a><span class="lineno"> 4057</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04058"></a><span class="lineno"> 4058</span>&#160;            }</div><div class="line"><a name="l04059"></a><span class="lineno"> 4059</span>&#160;</div><div class="line"><a name="l04060"></a><span class="lineno"> 4060</span>&#160;            <span class="comment">/* Indicate user is not talking anymore - change him to unmonitored state */</span></div><div class="line"><a name="l04061"></a><span class="lineno"> 4061</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags,  (<a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f">CONFFLAG_MONITORTALKER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a434e3c9758615b337ac4ab431538e60e">CONFFLAG_OPTIMIZETALKER</a>))) {</div><div class="line"><a name="l04062"></a><span class="lineno"> 4062</span>&#160;               <a class="code" href="../../df/d44/app__meetme_8c.html#ae1a11424819b90f48a2f8817af8681cd">set_user_talking</a>(chan, conf, user, -1, <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f">CONFFLAG_MONITORTALKER</a>));</div><div class="line"><a name="l04063"></a><span class="lineno"> 4063</span>&#160;            }</div><div class="line"><a name="l04064"></a><span class="lineno"> 4064</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a>(conf, chan, user, meetme_mute_type(), status_blob);</div><div class="line"><a name="l04065"></a><span class="lineno"> 4065</span>&#160;         }</div><div class="line"><a name="l04066"></a><span class="lineno"> 4066</span>&#160;</div><div class="line"><a name="l04067"></a><span class="lineno"> 4067</span>&#160;         <span class="comment">/* If I should be un-muted but am not talker, un-mute me */</span></div><div class="line"><a name="l04068"></a><span class="lineno"> 4068</span>&#160;         <span class="keywordflow">if</span> (!(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>)) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) &amp;&amp; !(dahdic.confmode &amp; DAHDI_CONF_TALKER)) {</div><div class="line"><a name="l04069"></a><span class="lineno"> 4069</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, status_blob, <a class="code" href="../../df/d44/app__meetme_8c.html#a1f74b6bae5e30f6a05295e3196986a44">status_to_json</a>(0), <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l04070"></a><span class="lineno"> 4070</span>&#160;            dahdic.confmode |= DAHDI_CONF_TALKER;</div><div class="line"><a name="l04071"></a><span class="lineno"> 4071</span>&#160;            <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l04072"></a><span class="lineno"> 4072</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error setting conference - Un/Mute \n&quot;</span>);</div><div class="line"><a name="l04073"></a><span class="lineno"> 4073</span>&#160;               ret = -1;</div><div class="line"><a name="l04074"></a><span class="lineno"> 4074</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04075"></a><span class="lineno"> 4075</span>&#160;            }</div><div class="line"><a name="l04076"></a><span class="lineno"> 4076</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a>(conf, chan, user, meetme_mute_type(), status_blob);</div><div class="line"><a name="l04077"></a><span class="lineno"> 4077</span>&#160;         }</div><div class="line"><a name="l04078"></a><span class="lineno"> 4078</span>&#160;</div><div class="line"><a name="l04079"></a><span class="lineno"> 4079</span>&#160;         <span class="keywordflow">if</span> ((user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>)) &amp;&amp;</div><div class="line"><a name="l04080"></a><span class="lineno"> 4080</span>&#160;            (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a>) &amp;&amp; !(talkreq_manager)) {</div><div class="line"><a name="l04081"></a><span class="lineno"> 4081</span>&#160;</div><div class="line"><a name="l04082"></a><span class="lineno"> 4082</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, status_blob, <a class="code" href="../../df/d44/app__meetme_8c.html#a1f74b6bae5e30f6a05295e3196986a44">status_to_json</a>(1), <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l04083"></a><span class="lineno"> 4083</span>&#160;            talkreq_manager = 1;</div><div class="line"><a name="l04084"></a><span class="lineno"> 4084</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a>(conf, chan, user, meetme_talk_request_type(), status_blob);</div><div class="line"><a name="l04085"></a><span class="lineno"> 4085</span>&#160;         }</div><div class="line"><a name="l04086"></a><span class="lineno"> 4086</span>&#160;</div><div class="line"><a name="l04087"></a><span class="lineno"> 4087</span>&#160;         <span class="keywordflow">if</span> (!(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>)) &amp;&amp;</div><div class="line"><a name="l04088"></a><span class="lineno"> 4088</span>&#160;            !(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a>) &amp;&amp; (talkreq_manager)) {</div><div class="line"><a name="l04089"></a><span class="lineno"> 4089</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d1/da1/structast__json.html">ast_json</a> *, status_blob, <a class="code" href="../../df/d44/app__meetme_8c.html#a1f74b6bae5e30f6a05295e3196986a44">status_to_json</a>(0), <a class="code" href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a>);</div><div class="line"><a name="l04090"></a><span class="lineno"> 4090</span>&#160;            talkreq_manager = 0;</div><div class="line"><a name="l04091"></a><span class="lineno"> 4091</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a>(conf, chan, user, meetme_talk_request_type(), status_blob);</div><div class="line"><a name="l04092"></a><span class="lineno"> 4092</span>&#160;         }</div><div class="line"><a name="l04093"></a><span class="lineno"> 4093</span>&#160;</div><div class="line"><a name="l04094"></a><span class="lineno"> 4094</span>&#160;         <span class="comment">/* If user have been hung up, exit the conference */</span></div><div class="line"><a name="l04095"></a><span class="lineno"> 4095</span>&#160;         <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5acd2fa7d4984319bf6a4c01527d04647f">ADMINFLAG_HANGUP</a>) {</div><div class="line"><a name="l04096"></a><span class="lineno"> 4096</span>&#160;            ret = 0;</div><div class="line"><a name="l04097"></a><span class="lineno"> 4097</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04098"></a><span class="lineno"> 4098</span>&#160;         }</div><div class="line"><a name="l04099"></a><span class="lineno"> 4099</span>&#160;</div><div class="line"><a name="l04100"></a><span class="lineno"> 4100</span>&#160;         <span class="comment">/* If I have been kicked, exit the conference */</span></div><div class="line"><a name="l04101"></a><span class="lineno"> 4101</span>&#160;         <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14">ADMINFLAG_KICKME</a>) {</div><div class="line"><a name="l04102"></a><span class="lineno"> 4102</span>&#160;            <span class="comment">/* You have been kicked. */</span></div><div class="line"><a name="l04103"></a><span class="lineno"> 4103</span>&#160;            <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp;</div><div class="line"><a name="l04104"></a><span class="lineno"> 4104</span>&#160;               !<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-kicked&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l04105"></a><span class="lineno"> 4105</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04106"></a><span class="lineno"> 4106</span>&#160;            }</div><div class="line"><a name="l04107"></a><span class="lineno"> 4107</span>&#160;            ret = 0;</div><div class="line"><a name="l04108"></a><span class="lineno"> 4108</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04109"></a><span class="lineno"> 4109</span>&#160;         }</div><div class="line"><a name="l04110"></a><span class="lineno"> 4110</span>&#160;</div><div class="line"><a name="l04111"></a><span class="lineno"> 4111</span>&#160;         <span class="comment">/* Perform a hangup check here since ast_waitfor_nandfds will not always be able to get a channel after a hangup has occurred */</span></div><div class="line"><a name="l04112"></a><span class="lineno"> 4112</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a>(chan)) {</div><div class="line"><a name="l04113"></a><span class="lineno"> 4113</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l04114"></a><span class="lineno"> 4114</span>&#160;         }</div><div class="line"><a name="l04115"></a><span class="lineno"> 4115</span>&#160;</div><div class="line"><a name="l04116"></a><span class="lineno"> 4116</span>&#160;         c = <a class="code" href="../../d5/d7b/channel_8h.html#a5e62602ca9e229304f60ab5c2b32e13b">ast_waitfor_nandfds</a>(&amp;chan, 1, &amp;fd, nfds, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, &amp;outfd, &amp;ms);</div><div class="line"><a name="l04117"></a><span class="lineno"> 4117</span>&#160;</div><div class="line"><a name="l04118"></a><span class="lineno"> 4118</span>&#160;         <span class="keywordflow">if</span> (c) {</div><div class="line"><a name="l04119"></a><span class="lineno"> 4119</span>&#160;            <span class="keywordtype">char</span> <a class="code" href="../../d5/dfe/chan__sip_8c.html#a95688dd12ffb052a0e52b1d2a3afcf1d">dtmfstr</a>[2] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04120"></a><span class="lineno"> 4120</span>&#160;</div><div class="line"><a name="l04121"></a><span class="lineno"> 4121</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a>(c, 0) != origfd || (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#af950158a50739005416f058684729d28">dahdichannel</a> &amp;&amp; (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(c) || <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(c)))) {</div><div class="line"><a name="l04122"></a><span class="lineno"> 4122</span>&#160;               <span class="keywordflow">if</span> (using_pseudo) {</div><div class="line"><a name="l04123"></a><span class="lineno"> 4123</span>&#160;                  <span class="comment">/* Kill old pseudo */</span></div><div class="line"><a name="l04124"></a><span class="lineno"> 4124</span>&#160;                  close(fd);</div><div class="line"><a name="l04125"></a><span class="lineno"> 4125</span>&#160;                  using_pseudo = 0;</div><div class="line"><a name="l04126"></a><span class="lineno"> 4126</span>&#160;               }</div><div class="line"><a name="l04127"></a><span class="lineno"> 4127</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Ooh, something swapped out under us, starting over\n&quot;</span>);</div><div class="line"><a name="l04128"></a><span class="lineno"> 4128</span>&#160;               retrydahdi = (strcasecmp(<a class="code" href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a>(c)-&gt;<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>, <span class="stringliteral">&quot;DAHDI&quot;</span>) || (<a class="code" href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a>(c) || <a class="code" href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a>(c)) ? 1 : 0);</div><div class="line"><a name="l04129"></a><span class="lineno"> 4129</span>&#160;               user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#af950158a50739005416f058684729d28">dahdichannel</a> = !retrydahdi;</div><div class="line"><a name="l04130"></a><span class="lineno"> 4130</span>&#160;               <span class="keywordflow">goto</span> dahdiretry;</div><div class="line"><a name="l04131"></a><span class="lineno"> 4131</span>&#160;            }</div><div class="line"><a name="l04132"></a><span class="lineno"> 4132</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) || (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>))) {</div><div class="line"><a name="l04133"></a><span class="lineno"> 4133</span>&#160;               f = <a class="code" href="../../d5/d7b/channel_8h.html#a1950f7fe77c02d233de02d299bab8c15">ast_read_noaudio</a>(c);</div><div class="line"><a name="l04134"></a><span class="lineno"> 4134</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04135"></a><span class="lineno"> 4135</span>&#160;               f = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(c);</div><div class="line"><a name="l04136"></a><span class="lineno"> 4136</span>&#160;            }</div><div class="line"><a name="l04137"></a><span class="lineno"> 4137</span>&#160;            <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l04138"></a><span class="lineno"> 4138</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04139"></a><span class="lineno"> 4139</span>&#160;            }</div><div class="line"><a name="l04140"></a><span class="lineno"> 4140</span>&#160;            <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) {</div><div class="line"><a name="l04141"></a><span class="lineno"> 4141</span>&#160;               dtmfstr[0] = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l04142"></a><span class="lineno"> 4142</span>&#160;               dtmfstr[1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04143"></a><span class="lineno"> 4143</span>&#160;            }</div><div class="line"><a name="l04144"></a><span class="lineno"> 4144</span>&#160;</div><div class="line"><a name="l04145"></a><span class="lineno"> 4145</span>&#160;            <span class="keywordflow">if</span> ((f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) &amp;&amp; (<a class="code" href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a>(f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a>, <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>) == <a class="code" href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a>)) {</div><div class="line"><a name="l04146"></a><span class="lineno"> 4146</span>&#160;               <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">talk</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a>) {</div><div class="line"><a name="l04147"></a><span class="lineno"> 4147</span>&#160;                  <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a59b72ee1caa9e8349ca017df01e8ac55">ast_frame_adjust_volume</a>(f, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">talk</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a>);</div><div class="line"><a name="l04148"></a><span class="lineno"> 4148</span>&#160;               }</div><div class="line"><a name="l04149"></a><span class="lineno"> 4149</span>&#160;</div><div class="line"><a name="l04150"></a><span class="lineno"> 4150</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, (<a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a434e3c9758615b337ac4ab431538e60e">CONFFLAG_OPTIMIZETALKER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f">CONFFLAG_MONITORTALKER</a>))) {</div><div class="line"><a name="l04151"></a><span class="lineno"> 4151</span>&#160;                  <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> == -1) {</div><div class="line"><a name="l04152"></a><span class="lineno"> 4152</span>&#160;                     user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> = 0;</div><div class="line"><a name="l04153"></a><span class="lineno"> 4153</span>&#160;                  }</div><div class="line"><a name="l04154"></a><span class="lineno"> 4154</span>&#160;</div><div class="line"><a name="l04155"></a><span class="lineno"> 4155</span>&#160;                  res = <a class="code" href="../../d3/d08/dsp_8h.html#a3f3b67988bffb3addfbc8a4688fa466d">ast_dsp_silence</a>(dsp, f, &amp;totalsilence);</div><div class="line"><a name="l04156"></a><span class="lineno"> 4156</span>&#160;                  <span class="keywordflow">if</span> (!user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> &amp;&amp; totalsilence &lt; <a class="code" href="../../df/d44/app__meetme_8c.html#acb4e9672a8f8da6bfbe4aec38d0f6454">MEETME_DELAYDETECTTALK</a>) {</div><div class="line"><a name="l04157"></a><span class="lineno"> 4157</span>&#160;                     <a class="code" href="../../df/d44/app__meetme_8c.html#ae1a11424819b90f48a2f8817af8681cd">set_user_talking</a>(chan, conf, user, 1, <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f">CONFFLAG_MONITORTALKER</a>));</div><div class="line"><a name="l04158"></a><span class="lineno"> 4158</span>&#160;                  }</div><div class="line"><a name="l04159"></a><span class="lineno"> 4159</span>&#160;</div><div class="line"><a name="l04160"></a><span class="lineno"> 4160</span>&#160;                  <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> &amp;&amp; totalsilence &gt; <a class="code" href="../../df/d44/app__meetme_8c.html#a36a45aad3f831056ed083856012785e3">MEETME_DELAYDETECTENDTALK</a>) {</div><div class="line"><a name="l04161"></a><span class="lineno"> 4161</span>&#160;                     <a class="code" href="../../df/d44/app__meetme_8c.html#ae1a11424819b90f48a2f8817af8681cd">set_user_talking</a>(chan, conf, user, 0, <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f">CONFFLAG_MONITORTALKER</a>));</div><div class="line"><a name="l04162"></a><span class="lineno"> 4162</span>&#160;                  }</div><div class="line"><a name="l04163"></a><span class="lineno"> 4163</span>&#160;               }</div><div class="line"><a name="l04164"></a><span class="lineno"> 4164</span>&#160;               <span class="keywordflow">if</span> (using_pseudo) {</div><div class="line"><a name="l04165"></a><span class="lineno"> 4165</span>&#160;                  <span class="comment">/* Absolutely do _not_ use careful_write here...</span></div><div class="line"><a name="l04166"></a><span class="lineno"> 4166</span>&#160;<span class="comment">                     it is important that we read data from the channel</span></div><div class="line"><a name="l04167"></a><span class="lineno"> 4167</span>&#160;<span class="comment">                     as fast as it arrives, and feed it into the conference.</span></div><div class="line"><a name="l04168"></a><span class="lineno"> 4168</span>&#160;<span class="comment">                     The buffering in the pseudo channel will take care of any</span></div><div class="line"><a name="l04169"></a><span class="lineno"> 4169</span>&#160;<span class="comment">                     timing differences, unless they are so drastic as to lose</span></div><div class="line"><a name="l04170"></a><span class="lineno"> 4170</span>&#160;<span class="comment">                     audio frames (in which case carefully writing would only</span></div><div class="line"><a name="l04171"></a><span class="lineno"> 4171</span>&#160;<span class="comment">                     have delayed the audio even further).</span></div><div class="line"><a name="l04172"></a><span class="lineno"> 4172</span>&#160;<span class="comment">                  */</span></div><div class="line"><a name="l04173"></a><span class="lineno"> 4173</span>&#160;                  <span class="comment">/* As it turns out, we do want to use careful write.  We just</span></div><div class="line"><a name="l04174"></a><span class="lineno"> 4174</span>&#160;<span class="comment">                     don&#39;t want to block, but we do want to at least *try*</span></div><div class="line"><a name="l04175"></a><span class="lineno"> 4175</span>&#160;<span class="comment">                     to write out all the samples.</span></div><div class="line"><a name="l04176"></a><span class="lineno"> 4176</span>&#160;<span class="comment">                   */</span></div><div class="line"><a name="l04177"></a><span class="lineno"> 4177</span>&#160;                  <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> || !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a434e3c9758615b337ac4ab431538e60e">CONFFLAG_OPTIMIZETALKER</a>)) {</div><div class="line"><a name="l04178"></a><span class="lineno"> 4178</span>&#160;                     <a class="code" href="../../df/d44/app__meetme_8c.html#a274bd5a5386b1ea0514ec87feb3d8d85">careful_write</a>(fd, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a>, 0);</div><div class="line"><a name="l04179"></a><span class="lineno"> 4179</span>&#160;                  }</div><div class="line"><a name="l04180"></a><span class="lineno"> 4180</span>&#160;               }</div><div class="line"><a name="l04181"></a><span class="lineno"> 4181</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (((f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) &amp;&amp; (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a> == <span class="charliteral">&#39;*&#39;</span>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8c1f23aabf6a93f20eb6b11fe8e2b857">CONFFLAG_STARMENU</a>)) || ((f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) &amp;&amp; menu_mode)) {</div><div class="line"><a name="l04182"></a><span class="lineno"> 4182</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a>)) {</div><div class="line"><a name="l04183"></a><span class="lineno"> 4183</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#ada5e10a4d240af38d13e13d576b66f4a">conf_queue_dtmf</a>(conf, user, f);</div><div class="line"><a name="l04184"></a><span class="lineno"> 4184</span>&#160;               }</div><div class="line"><a name="l04185"></a><span class="lineno"> 4185</span>&#160;               <span class="comment">/* Take out of conference */</span></div><div class="line"><a name="l04186"></a><span class="lineno"> 4186</span>&#160;               <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SETCONF, &amp;dahdic_empty)) {</div><div class="line"><a name="l04187"></a><span class="lineno"> 4187</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error setting conference\n&quot;</span>);</div><div class="line"><a name="l04188"></a><span class="lineno"> 4188</span>&#160;                  close(fd);</div><div class="line"><a name="l04189"></a><span class="lineno"> 4189</span>&#160;                  <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04190"></a><span class="lineno"> 4190</span>&#160;                  <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l04191"></a><span class="lineno"> 4191</span>&#160;               }</div><div class="line"><a name="l04192"></a><span class="lineno"> 4192</span>&#160;</div><div class="line"><a name="l04193"></a><span class="lineno"> 4193</span>&#160;               <span class="comment">/* if we are entering the menu, and the user has a channel-driver</span></div><div class="line"><a name="l04194"></a><span class="lineno"> 4194</span>&#160;<span class="comment">                  volume adjustment, clear it</span></div><div class="line"><a name="l04195"></a><span class="lineno"> 4195</span>&#160;<span class="comment">               */</span></div><div class="line"><a name="l04196"></a><span class="lineno"> 4196</span>&#160;               <span class="keywordflow">if</span> (!menu_mode &amp;&amp; user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">talk</a>.<a class="code" href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">desired</a> &amp;&amp; !user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">talk</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a>) {</div><div class="line"><a name="l04197"></a><span class="lineno"> 4197</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#a4a7eef0979d0a4b9267d5bc5d98fde30">set_talk_volume</a>(user, 0);</div><div class="line"><a name="l04198"></a><span class="lineno"> 4198</span>&#160;               }</div><div class="line"><a name="l04199"></a><span class="lineno"> 4199</span>&#160;</div><div class="line"><a name="l04200"></a><span class="lineno"> 4200</span>&#160;               <span class="keywordflow">if</span> (musiconhold) {</div><div class="line"><a name="l04201"></a><span class="lineno"> 4201</span>&#160;                  <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(chan);</div><div class="line"><a name="l04202"></a><span class="lineno"> 4202</span>&#160;               } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!menu_mode) {</div><div class="line"><a name="l04203"></a><span class="lineno"> 4203</span>&#160;                  <span class="keywordtype">char</span> *menu_to_play;</div><div class="line"><a name="l04204"></a><span class="lineno"> 4204</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>)) {</div><div class="line"><a name="l04205"></a><span class="lineno"> 4205</span>&#160;                     menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a98486ef3937db9b46bd9307a5f2b71a9">MENU_ADMIN</a>;</div><div class="line"><a name="l04206"></a><span class="lineno"> 4206</span>&#160;                     menu_to_play = <span class="stringliteral">&quot;conf-adminmenu-18&quot;</span>;</div><div class="line"><a name="l04207"></a><span class="lineno"> 4207</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04208"></a><span class="lineno"> 4208</span>&#160;                     menu_mode = <a class="code" href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4ab3da6b31f681a1e2901440b330a266a8">MENU_NORMAL</a>;</div><div class="line"><a name="l04209"></a><span class="lineno"> 4209</span>&#160;                     menu_to_play = <span class="stringliteral">&quot;conf-usermenu-162&quot;</span>;</div><div class="line"><a name="l04210"></a><span class="lineno"> 4210</span>&#160;                  }</div><div class="line"><a name="l04211"></a><span class="lineno"> 4211</span>&#160;</div><div class="line"><a name="l04212"></a><span class="lineno"> 4212</span>&#160;                  <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, menu_to_play, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l04213"></a><span class="lineno"> 4213</span>&#160;                     dtmf = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l04214"></a><span class="lineno"> 4214</span>&#160;                     <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l04215"></a><span class="lineno"> 4215</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04216"></a><span class="lineno"> 4216</span>&#160;                     dtmf = 0;</div><div class="line"><a name="l04217"></a><span class="lineno"> 4217</span>&#160;                  }</div><div class="line"><a name="l04218"></a><span class="lineno"> 4218</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04219"></a><span class="lineno"> 4219</span>&#160;                  dtmf = f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>;</div><div class="line"><a name="l04220"></a><span class="lineno"> 4220</span>&#160;               }</div><div class="line"><a name="l04221"></a><span class="lineno"> 4221</span>&#160;</div><div class="line"><a name="l04222"></a><span class="lineno"> 4222</span>&#160;               <span class="keywordflow">if</span> (dtmf &gt; 0) {</div><div class="line"><a name="l04223"></a><span class="lineno"> 4223</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#a79498a73deb647def1fc19bf0bc4e42d">meetme_menu</a>(&amp;menu_mode, &amp;dtmf, conf, confflags,</div><div class="line"><a name="l04224"></a><span class="lineno"> 4224</span>&#160;                     chan, user, recordingtmp, <span class="keyword">sizeof</span>(recordingtmp), cap_slin);</div><div class="line"><a name="l04225"></a><span class="lineno"> 4225</span>&#160;               }</div><div class="line"><a name="l04226"></a><span class="lineno"> 4226</span>&#160;</div><div class="line"><a name="l04227"></a><span class="lineno"> 4227</span>&#160;               <span class="keywordflow">if</span> (musiconhold &amp;&amp; !menu_mode) {</div><div class="line"><a name="l04228"></a><span class="lineno"> 4228</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601">conf_start_moh</a>(chan, optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a>]);</div><div class="line"><a name="l04229"></a><span class="lineno"> 4229</span>&#160;               }</div><div class="line"><a name="l04230"></a><span class="lineno"> 4230</span>&#160;</div><div class="line"><a name="l04231"></a><span class="lineno"> 4231</span>&#160;               <span class="comment">/* Put back into conference */</span></div><div class="line"><a name="l04232"></a><span class="lineno"> 4232</span>&#160;               <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l04233"></a><span class="lineno"> 4233</span>&#160;                  <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error setting conference\n&quot;</span>);</div><div class="line"><a name="l04234"></a><span class="lineno"> 4234</span>&#160;                  close(fd);</div><div class="line"><a name="l04235"></a><span class="lineno"> 4235</span>&#160;                  <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04236"></a><span class="lineno"> 4236</span>&#160;                  <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l04237"></a><span class="lineno"> 4237</span>&#160;               }</div><div class="line"><a name="l04238"></a><span class="lineno"> 4238</span>&#160;</div><div class="line"><a name="l04239"></a><span class="lineno"> 4239</span>&#160;               <a class="code" href="../../df/d44/app__meetme_8c.html#a42bbab56ce6a8eb0aaf501be26cf5271">conf_flush</a>(fd, chan);</div><div class="line"><a name="l04240"></a><span class="lineno"> 4240</span>&#160;            <span class="comment">/*</span></div><div class="line"><a name="l04241"></a><span class="lineno"> 4241</span>&#160;<span class="comment">             * Since options using DTMF could absorb DTMF meant for the</span></div><div class="line"><a name="l04242"></a><span class="lineno"> 4242</span>&#160;<span class="comment">             * conference menu, we have to check them after the menu.</span></div><div class="line"><a name="l04243"></a><span class="lineno"> 4243</span>&#160;<span class="comment">             */</span></div><div class="line"><a name="l04244"></a><span class="lineno"> 4244</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a61bdcc99c25b743f89316b3da3796cc1">CONFFLAG_EXIT_CONTEXT</a>) &amp;&amp; <a class="code" href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a>(chan, exitcontext, dtmfstr, 1, <span class="stringliteral">&quot;&quot;</span>)) {</div><div class="line"><a name="l04245"></a><span class="lineno"> 4245</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a>)) {</div><div class="line"><a name="l04246"></a><span class="lineno"> 4246</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#ada5e10a4d240af38d13e13d576b66f4a">conf_queue_dtmf</a>(conf, user, f);</div><div class="line"><a name="l04247"></a><span class="lineno"> 4247</span>&#160;               }</div><div class="line"><a name="l04248"></a><span class="lineno"> 4248</span>&#160;</div><div class="line"><a name="l04249"></a><span class="lineno"> 4249</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a8f7166f50cb9642179c9b321b8143f55">ast_goto_if_exists</a>(chan, exitcontext, dtmfstr, 1)) {</div><div class="line"><a name="l04250"></a><span class="lineno"> 4250</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Got DTMF %c, goto context %s\n&quot;</span>, dtmfstr[0], exitcontext);</div><div class="line"><a name="l04251"></a><span class="lineno"> 4251</span>&#160;                  ret = 0;</div><div class="line"><a name="l04252"></a><span class="lineno"> 4252</span>&#160;                  <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04253"></a><span class="lineno"> 4253</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04254"></a><span class="lineno"> 4254</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04255"></a><span class="lineno"> 4255</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(2, <span class="stringliteral">&quot;Exit by single digit did not work in meetme. Extension %s does not exist in context %s\n&quot;</span>, dtmfstr, exitcontext);</div><div class="line"><a name="l04256"></a><span class="lineno"> 4256</span>&#160;               }</div><div class="line"><a name="l04257"></a><span class="lineno"> 4257</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aeae3eb825018940e6703d8151f1f20d5">CONFFLAG_KEYEXIT</a>) &amp;&amp;</div><div class="line"><a name="l04258"></a><span class="lineno"> 4258</span>&#160;               (strchr(exitkeys, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>))) {</div><div class="line"><a name="l04259"></a><span class="lineno"> 4259</span>&#160;               <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MEETME_EXIT_KEY&quot;</span>, dtmfstr);</div><div class="line"><a name="l04260"></a><span class="lineno"> 4260</span>&#160;</div><div class="line"><a name="l04261"></a><span class="lineno"> 4261</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a>)) {</div><div class="line"><a name="l04262"></a><span class="lineno"> 4262</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#ada5e10a4d240af38d13e13d576b66f4a">conf_queue_dtmf</a>(conf, user, f);</div><div class="line"><a name="l04263"></a><span class="lineno"> 4263</span>&#160;               }</div><div class="line"><a name="l04264"></a><span class="lineno"> 4264</span>&#160;               ret = 0;</div><div class="line"><a name="l04265"></a><span class="lineno"> 4265</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04266"></a><span class="lineno"> 4266</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04267"></a><span class="lineno"> 4267</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a> || f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a>)</div><div class="line"><a name="l04268"></a><span class="lineno"> 4268</span>&#160;               &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a>)) {</div><div class="line"><a name="l04269"></a><span class="lineno"> 4269</span>&#160;               <a class="code" href="../../df/d44/app__meetme_8c.html#ada5e10a4d240af38d13e13d576b66f4a">conf_queue_dtmf</a>(conf, user, f);</div><div class="line"><a name="l04270"></a><span class="lineno"> 4270</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac793d6a4a78ffd301d51be06a771b70c">CONFFLAG_SLA_STATION</a>) &amp;&amp; f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>) {</div><div class="line"><a name="l04271"></a><span class="lineno"> 4271</span>&#160;               <span class="keywordflow">switch</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l04272"></a><span class="lineno"> 4272</span>&#160;               <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>:</div><div class="line"><a name="l04273"></a><span class="lineno"> 4273</span>&#160;                  <a class="code" href="../../df/d44/app__meetme_8c.html#a5e80b8d035834753764ad2be58e4bb07">sla_queue_event_conf</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa23fb375274d3c96370d1a64e418f6a40">SLA_EVENT_HOLD</a>, chan, conf);</div><div class="line"><a name="l04274"></a><span class="lineno"> 4274</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04275"></a><span class="lineno"> 4275</span>&#160;               <span class="keywordflow">default</span>:</div><div class="line"><a name="l04276"></a><span class="lineno"> 4276</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04277"></a><span class="lineno"> 4277</span>&#160;               }</div><div class="line"><a name="l04278"></a><span class="lineno"> 4278</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>) {</div><div class="line"><a name="l04279"></a><span class="lineno"> 4279</span>&#160;               <span class="comment">/* Ignore NULL frames. It is perfectly normal to get these if the person is muted. */</span></div><div class="line"><a name="l04280"></a><span class="lineno"> 4280</span>&#160;            } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a>) {</div><div class="line"><a name="l04281"></a><span class="lineno"> 4281</span>&#160;               <span class="keywordflow">switch</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>) {</div><div class="line"><a name="l04282"></a><span class="lineno"> 4282</span>&#160;               <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a>:</div><div class="line"><a name="l04283"></a><span class="lineno"> 4283</span>&#160;               <span class="keywordflow">case</span> <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a>:</div><div class="line"><a name="l04284"></a><span class="lineno"> 4284</span>&#160;                  <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04285"></a><span class="lineno"> 4285</span>&#160;                  <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l04286"></a><span class="lineno"> 4286</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04287"></a><span class="lineno"> 4287</span>&#160;               <span class="keywordflow">default</span>:</div><div class="line"><a name="l04288"></a><span class="lineno"> 4288</span>&#160;                  <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1,</div><div class="line"><a name="l04289"></a><span class="lineno"> 4289</span>&#160;                     <span class="stringliteral">&quot;Got ignored control frame on channel %s, f-&gt;frametype=%u,f-&gt;subclass=%d\n&quot;</span>,</div><div class="line"><a name="l04290"></a><span class="lineno"> 4290</span>&#160;                     <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l04291"></a><span class="lineno"> 4291</span>&#160;               }</div><div class="line"><a name="l04292"></a><span class="lineno"> 4292</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04293"></a><span class="lineno"> 4293</span>&#160;               <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1,</div><div class="line"><a name="l04294"></a><span class="lineno"> 4294</span>&#160;                  <span class="stringliteral">&quot;Got unrecognized frame on channel %s, f-&gt;frametype=%u,f-&gt;subclass=%d\n&quot;</span>,</div><div class="line"><a name="l04295"></a><span class="lineno"> 4295</span>&#160;                  <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan), f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a>, f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">integer</a>);</div><div class="line"><a name="l04296"></a><span class="lineno"> 4296</span>&#160;            }</div><div class="line"><a name="l04297"></a><span class="lineno"> 4297</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l04298"></a><span class="lineno"> 4298</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (outfd &gt; -1) {</div><div class="line"><a name="l04299"></a><span class="lineno"> 4299</span>&#160;            res = read(outfd, buf, <a class="code" href="../../df/d44/app__meetme_8c.html#a2be5f0b8c25b67aa5ca5502d61c16b73">CONF_SIZE</a>);</div><div class="line"><a name="l04300"></a><span class="lineno"> 4300</span>&#160;            <span class="keywordflow">if</span> (res &gt; 0) {</div><div class="line"><a name="l04301"></a><span class="lineno"> 4301</span>&#160;               memset(&amp;fr, 0, <span class="keyword">sizeof</span>(fr));</div><div class="line"><a name="l04302"></a><span class="lineno"> 4302</span>&#160;               fr.<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>;</div><div class="line"><a name="l04303"></a><span class="lineno"> 4303</span>&#160;               fr.<a class="code" href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">subclass</a>.<a class="code" href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">format</a> = <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>;</div><div class="line"><a name="l04304"></a><span class="lineno"> 4304</span>&#160;               fr.<a class="code" href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">datalen</a> = res;</div><div class="line"><a name="l04305"></a><span class="lineno"> 4305</span>&#160;               fr.<a class="code" href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">samples</a> = res / 2;</div><div class="line"><a name="l04306"></a><span class="lineno"> 4306</span>&#160;               fr.<a class="code" href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">data</a>.<a class="code" href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ptr</a> = <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>;</div><div class="line"><a name="l04307"></a><span class="lineno"> 4307</span>&#160;               fr.<a class="code" href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">offset</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a>;</div><div class="line"><a name="l04308"></a><span class="lineno"> 4308</span>&#160;               <span class="keywordflow">if</span> (!user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a> &amp;&amp;</div><div class="line"><a name="l04309"></a><span class="lineno"> 4309</span>&#160;                  (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) ||</div><div class="line"><a name="l04310"></a><span class="lineno"> 4310</span>&#160;                   (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; (<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a>)) ||</div><div class="line"><a name="l04311"></a><span class="lineno"> 4311</span>&#160;                   (!user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a434e3c9758615b337ac4ab431538e60e">CONFFLAG_OPTIMIZETALKER</a>))</div><div class="line"><a name="l04312"></a><span class="lineno"> 4312</span>&#160;                   )) {</div><div class="line"><a name="l04313"></a><span class="lineno"> 4313</span>&#160;                  <span class="keywordtype">int</span> idx;</div><div class="line"><a name="l04314"></a><span class="lineno"> 4314</span>&#160;                  <span class="keywordflow">for</span> (idx = 0; idx &lt; <a class="code" href="../../df/d44/app__meetme_8c.html#addd70c99776f00581f71a71d3c10d86f">AST_FRAME_BITS</a>; idx++) {</div><div class="line"><a name="l04315"></a><span class="lineno"> 4315</span>&#160;                     <span class="keywordflow">if</span> (<a class="code" href="../../d1/d18/include_2asterisk_2format__compatibility_8h.html#a2fea9280c775fadc7929b5213dff7f36">ast_format_compatibility_format2bitfield</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(chan)) &amp; (1 &lt;&lt; idx)) {</div><div class="line"><a name="l04316"></a><span class="lineno"> 4316</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l04317"></a><span class="lineno"> 4317</span>&#160;                     }</div><div class="line"><a name="l04318"></a><span class="lineno"> 4318</span>&#160;                  }</div><div class="line"><a name="l04319"></a><span class="lineno"> 4319</span>&#160;                  <span class="keywordflow">if</span> (idx &gt;= AST_FRAME_BITS) {</div><div class="line"><a name="l04320"></a><span class="lineno"> 4320</span>&#160;                     <span class="keywordflow">goto</span> bailoutandtrynormal;</div><div class="line"><a name="l04321"></a><span class="lineno"> 4321</span>&#160;                  }</div><div class="line"><a name="l04322"></a><span class="lineno"> 4322</span>&#160;                  <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>);</div><div class="line"><a name="l04323"></a><span class="lineno"> 4323</span>&#160;                  <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[idx]) {</div><div class="line"><a name="l04324"></a><span class="lineno"> 4324</span>&#160;                     <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">origframe</a>) {</div><div class="line"><a name="l04325"></a><span class="lineno"> 4325</span>&#160;                        <span class="keywordflow">if</span> (musiconhold</div><div class="line"><a name="l04326"></a><span class="lineno"> 4326</span>&#160;                           &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>)</div><div class="line"><a name="l04327"></a><span class="lineno"> 4327</span>&#160;                           &amp;&amp; !<a class="code" href="../../d3/d08/dsp_8h.html#a3f3b67988bffb3addfbc8a4688fa466d">ast_dsp_silence</a>(dsp, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">origframe</a>, &amp;confsilence)</div><div class="line"><a name="l04328"></a><span class="lineno"> 4328</span>&#160;                           &amp;&amp; confsilence &lt; <a class="code" href="../../df/d44/app__meetme_8c.html#acb4e9672a8f8da6bfbe4aec38d0f6454">MEETME_DELAYDETECTTALK</a>) {</div><div class="line"><a name="l04329"></a><span class="lineno"> 4329</span>&#160;                           <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(chan);</div><div class="line"><a name="l04330"></a><span class="lineno"> 4330</span>&#160;                           mohtempstopped = 1;</div><div class="line"><a name="l04331"></a><span class="lineno"> 4331</span>&#160;                        }</div><div class="line"><a name="l04332"></a><span class="lineno"> 4332</span>&#160;                        <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a16f06197fcaec99baf94c770e1549fc8">transpath</a>[idx]) {</div><div class="line"><a name="l04333"></a><span class="lineno"> 4333</span>&#160;                           conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a16f06197fcaec99baf94c770e1549fc8">transpath</a>[idx] = <a class="code" href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a>(chan), <a class="code" href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a>);</div><div class="line"><a name="l04334"></a><span class="lineno"> 4334</span>&#160;                        }</div><div class="line"><a name="l04335"></a><span class="lineno"> 4335</span>&#160;                        <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a16f06197fcaec99baf94c770e1549fc8">transpath</a>[idx]) {</div><div class="line"><a name="l04336"></a><span class="lineno"> 4336</span>&#160;                           conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[idx] = <a class="code" href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a16f06197fcaec99baf94c770e1549fc8">transpath</a>[idx], conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">origframe</a>, 0);</div><div class="line"><a name="l04337"></a><span class="lineno"> 4337</span>&#160;                           <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[idx]) {</div><div class="line"><a name="l04338"></a><span class="lineno"> 4338</span>&#160;                              conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[idx] = &amp;<a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a>;</div><div class="line"><a name="l04339"></a><span class="lineno"> 4339</span>&#160;                           }</div><div class="line"><a name="l04340"></a><span class="lineno"> 4340</span>&#160;                        }</div><div class="line"><a name="l04341"></a><span class="lineno"> 4341</span>&#160;                     }</div><div class="line"><a name="l04342"></a><span class="lineno"> 4342</span>&#160;                  }</div><div class="line"><a name="l04343"></a><span class="lineno"> 4343</span>&#160;                  <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[idx]) {</div><div class="line"><a name="l04344"></a><span class="lineno"> 4344</span>&#160;                     <span class="keywordflow">if</span> ((conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[idx]-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> != <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a>) &amp;&amp;</div><div class="line"><a name="l04345"></a><span class="lineno"> 4345</span>&#160;                         <a class="code" href="../../df/d44/app__meetme_8c.html#a465e55d6bb67a80682ef3ca1b488a826">can_write</a>(chan, confflags)) {</div><div class="line"><a name="l04346"></a><span class="lineno"> 4346</span>&#160;                        <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *cur;</div><div class="line"><a name="l04347"></a><span class="lineno"> 4347</span>&#160;                        <span class="comment">/* the translator may have returned a list of frames, so</span></div><div class="line"><a name="l04348"></a><span class="lineno"> 4348</span>&#160;<span class="comment">                           write each one onto the channel</span></div><div class="line"><a name="l04349"></a><span class="lineno"> 4349</span>&#160;<span class="comment">                        */</span></div><div class="line"><a name="l04350"></a><span class="lineno"> 4350</span>&#160;                        <span class="keywordflow">for</span> (cur = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[idx]; cur; cur = <a class="code" href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a>(cur, <a class="code" href="../../d9/d42/structframe__list.html">frame_list</a>)) {</div><div class="line"><a name="l04351"></a><span class="lineno"> 4351</span>&#160;                           <span class="keywordflow">if</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a>(chan, cur)) {</div><div class="line"><a name="l04352"></a><span class="lineno"> 4352</span>&#160;                              <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to write frame to channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04353"></a><span class="lineno"> 4353</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l04354"></a><span class="lineno"> 4354</span>&#160;                           }</div><div class="line"><a name="l04355"></a><span class="lineno"> 4355</span>&#160;                        }</div><div class="line"><a name="l04356"></a><span class="lineno"> 4356</span>&#160;                        <span class="keywordflow">if</span> (musiconhold &amp;&amp; mohtempstopped &amp;&amp; confsilence &gt; <a class="code" href="../../df/d44/app__meetme_8c.html#a36a45aad3f831056ed083856012785e3">MEETME_DELAYDETECTENDTALK</a>) {</div><div class="line"><a name="l04357"></a><span class="lineno"> 4357</span>&#160;                           mohtempstopped = 0;</div><div class="line"><a name="l04358"></a><span class="lineno"> 4358</span>&#160;                           <a class="code" href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601">conf_start_moh</a>(chan, optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a>]);</div><div class="line"><a name="l04359"></a><span class="lineno"> 4359</span>&#160;                        }</div><div class="line"><a name="l04360"></a><span class="lineno"> 4360</span>&#160;                     }</div><div class="line"><a name="l04361"></a><span class="lineno"> 4361</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04362"></a><span class="lineno"> 4362</span>&#160;                     <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>);</div><div class="line"><a name="l04363"></a><span class="lineno"> 4363</span>&#160;                     <span class="keywordflow">goto</span> bailoutandtrynormal;</div><div class="line"><a name="l04364"></a><span class="lineno"> 4364</span>&#160;                  }</div><div class="line"><a name="l04365"></a><span class="lineno"> 4365</span>&#160;                  <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>);</div><div class="line"><a name="l04366"></a><span class="lineno"> 4366</span>&#160;               } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04367"></a><span class="lineno"> 4367</span>&#160;bailoutandtrynormal:</div><div class="line"><a name="l04368"></a><span class="lineno"> 4368</span>&#160;                  <span class="keywordflow">if</span> (musiconhold</div><div class="line"><a name="l04369"></a><span class="lineno"> 4369</span>&#160;                     &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a>)</div><div class="line"><a name="l04370"></a><span class="lineno"> 4370</span>&#160;                     &amp;&amp; !<a class="code" href="../../d3/d08/dsp_8h.html#a3f3b67988bffb3addfbc8a4688fa466d">ast_dsp_silence</a>(dsp, &amp;fr, &amp;confsilence)</div><div class="line"><a name="l04371"></a><span class="lineno"> 4371</span>&#160;                     &amp;&amp; confsilence &lt; <a class="code" href="../../df/d44/app__meetme_8c.html#acb4e9672a8f8da6bfbe4aec38d0f6454">MEETME_DELAYDETECTTALK</a>) {</div><div class="line"><a name="l04372"></a><span class="lineno"> 4372</span>&#160;                     <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(chan);</div><div class="line"><a name="l04373"></a><span class="lineno"> 4373</span>&#160;                     mohtempstopped = 1;</div><div class="line"><a name="l04374"></a><span class="lineno"> 4374</span>&#160;                  }</div><div class="line"><a name="l04375"></a><span class="lineno"> 4375</span>&#160;                  <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a>) {</div><div class="line"><a name="l04376"></a><span class="lineno"> 4376</span>&#160;                     <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a59b72ee1caa9e8349ca017df01e8ac55">ast_frame_adjust_volume</a>(&amp;fr, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">listen</a>.<a class="code" href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">actual</a>);</div><div class="line"><a name="l04377"></a><span class="lineno"> 4377</span>&#160;                  }</div><div class="line"><a name="l04378"></a><span class="lineno"> 4378</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a465e55d6bb67a80682ef3ca1b488a826">can_write</a>(chan, confflags) &amp;&amp; <a class="code" href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a>(chan, &amp;fr) &lt; 0) {</div><div class="line"><a name="l04379"></a><span class="lineno"> 4379</span>&#160;                     <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unable to write frame to channel %s\n&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l04380"></a><span class="lineno"> 4380</span>&#160;                  }</div><div class="line"><a name="l04381"></a><span class="lineno"> 4381</span>&#160;                  <span class="keywordflow">if</span> (musiconhold &amp;&amp; mohtempstopped &amp;&amp; confsilence &gt; <a class="code" href="../../df/d44/app__meetme_8c.html#a36a45aad3f831056ed083856012785e3">MEETME_DELAYDETECTENDTALK</a>) {</div><div class="line"><a name="l04382"></a><span class="lineno"> 4382</span>&#160;                     mohtempstopped = 0;</div><div class="line"><a name="l04383"></a><span class="lineno"> 4383</span>&#160;                     <a class="code" href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601">conf_start_moh</a>(chan, optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a>]);</div><div class="line"><a name="l04384"></a><span class="lineno"> 4384</span>&#160;                  }</div><div class="line"><a name="l04385"></a><span class="lineno"> 4385</span>&#160;               }</div><div class="line"><a name="l04386"></a><span class="lineno"> 4386</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04387"></a><span class="lineno"> 4387</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Failed to read frame: %s\n&quot;</span>, strerror(<a class="code" href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>));</div><div class="line"><a name="l04388"></a><span class="lineno"> 4388</span>&#160;            }</div><div class="line"><a name="l04389"></a><span class="lineno"> 4389</span>&#160;         }</div><div class="line"><a name="l04390"></a><span class="lineno"> 4390</span>&#160;         lastmarked = currentmarked;</div><div class="line"><a name="l04391"></a><span class="lineno"> 4391</span>&#160;      }</div><div class="line"><a name="l04392"></a><span class="lineno"> 4392</span>&#160;   }</div><div class="line"><a name="l04393"></a><span class="lineno"> 4393</span>&#160;</div><div class="line"><a name="l04394"></a><span class="lineno"> 4394</span>&#160;   <span class="keywordflow">if</span> (musiconhold) {</div><div class="line"><a name="l04395"></a><span class="lineno"> 4395</span>&#160;      <a class="code" href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a>(chan);</div><div class="line"><a name="l04396"></a><span class="lineno"> 4396</span>&#160;   }</div><div class="line"><a name="l04397"></a><span class="lineno"> 4397</span>&#160;</div><div class="line"><a name="l04398"></a><span class="lineno"> 4398</span>&#160;   <span class="keywordflow">if</span> (using_pseudo) {</div><div class="line"><a name="l04399"></a><span class="lineno"> 4399</span>&#160;      close(fd);</div><div class="line"><a name="l04400"></a><span class="lineno"> 4400</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04401"></a><span class="lineno"> 4401</span>&#160;      <span class="comment">/* Take out of conference */</span></div><div class="line"><a name="l04402"></a><span class="lineno"> 4402</span>&#160;      dahdic.chan = 0;</div><div class="line"><a name="l04403"></a><span class="lineno"> 4403</span>&#160;      dahdic.confno = 0;</div><div class="line"><a name="l04404"></a><span class="lineno"> 4404</span>&#160;      dahdic.confmode = 0;</div><div class="line"><a name="l04405"></a><span class="lineno"> 4405</span>&#160;      <span class="keywordflow">if</span> (ioctl(fd, DAHDI_SETCONF, &amp;dahdic)) {</div><div class="line"><a name="l04406"></a><span class="lineno"> 4406</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Error setting conference\n&quot;</span>);</div><div class="line"><a name="l04407"></a><span class="lineno"> 4407</span>&#160;      }</div><div class="line"><a name="l04408"></a><span class="lineno"> 4408</span>&#160;   }</div><div class="line"><a name="l04409"></a><span class="lineno"> 4409</span>&#160;</div><div class="line"><a name="l04410"></a><span class="lineno"> 4410</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a57fc53d582772f2125adafaabe596b01">reset_volumes</a>(user);</div><div class="line"><a name="l04411"></a><span class="lineno"> 4411</span>&#160;</div><div class="line"><a name="l04412"></a><span class="lineno"> 4412</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) &amp;&amp;</div><div class="line"><a name="l04413"></a><span class="lineno"> 4413</span>&#160;      !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>)) {</div><div class="line"><a name="l04414"></a><span class="lineno"> 4414</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a645090dd89fa3f8aaff60ea7eb38be18">conf_play</a>(chan, conf, <a class="code" href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49bae09e07839103de682cb13fa773793fc0">LEAVE</a>);</div><div class="line"><a name="l04415"></a><span class="lineno"> 4415</span>&#160;   }</div><div class="line"><a name="l04416"></a><span class="lineno"> 4416</span>&#160;</div><div class="line"><a name="l04417"></a><span class="lineno"> 4417</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> |<a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>) &amp;&amp; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> &gt; 1) {</div><div class="line"><a name="l04418"></a><span class="lineno"> 4418</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../dd/d4b/structannounce__listitem.html">announce_listitem</a> *<a class="code" href="../../d8/d4f/test__config_8c.html#aecdc7cbd5dfa76493c0212caa55d706c">item</a>;</div><div class="line"><a name="l04419"></a><span class="lineno"> 4419</span>&#160;      <span class="keywordflow">if</span> (!(item = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*item), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)))</div><div class="line"><a name="l04420"></a><span class="lineno"> 4420</span>&#160;         <span class="keywordflow">goto</span> outrun;</div><div class="line"><a name="l04421"></a><span class="lineno"> 4421</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <span class="keyword">sizeof</span>(item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>));</div><div class="line"><a name="l04422"></a><span class="lineno"> 4422</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#adf416dc058363e2fd5750c77e2d78bee">language</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), <span class="keyword">sizeof</span>(item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#adf416dc058363e2fd5750c77e2d78bee">language</a>));</div><div class="line"><a name="l04423"></a><span class="lineno"> 4423</span>&#160;      item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">confchan</a> = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a>;</div><div class="line"><a name="l04424"></a><span class="lineno"> 4424</span>&#160;      item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aae887e628e91515c97a46a3834c91069">confusers</a> = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>;</div><div class="line"><a name="l04425"></a><span class="lineno"> 4425</span>&#160;      item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#aaf09e68427ae0e6025d08e028646d43a">announcetype</a> = <a class="code" href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfafe977bca19aa4a5f72ff226a312b74af">CONF_HASLEFT</a>;</div><div class="line"><a name="l04426"></a><span class="lineno"> 4426</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>)){</div><div class="line"><a name="l04427"></a><span class="lineno"> 4427</span>&#160;         item-&gt;<a class="code" href="../../dd/d4b/structannounce__listitem.html#a185c325c6063263f7b3119f4045c22e0">vmrec</a> = 1;</div><div class="line"><a name="l04428"></a><span class="lineno"> 4428</span>&#160;      }</div><div class="line"><a name="l04429"></a><span class="lineno"> 4429</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l04430"></a><span class="lineno"> 4430</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a2e7bbd159351d331708b134ddd105a96">announcelist</a>, item, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l04431"></a><span class="lineno"> 4431</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#aaf8da2ce427bc9d88ba925c185056a41">announcelist_addition</a>);</div><div class="line"><a name="l04432"></a><span class="lineno"> 4432</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">announcelistlock</a>);</div><div class="line"><a name="l04433"></a><span class="lineno"> 4433</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a>) &amp;&amp; !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>) &amp;&amp; conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 1) {</div><div class="line"><a name="l04434"></a><span class="lineno"> 4434</span>&#160;      <span class="comment">/* Last person is leaving, so no reason to try and announce, but should delete the name recording */</span></div><div class="line"><a name="l04435"></a><span class="lineno"> 4435</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">namerecloc</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04436"></a><span class="lineno"> 4436</span>&#160;   }</div><div class="line"><a name="l04437"></a><span class="lineno"> 4437</span>&#160;</div><div class="line"><a name="l04438"></a><span class="lineno"> 4438</span>&#160; outrun:</div><div class="line"><a name="l04439"></a><span class="lineno"> 4439</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04440"></a><span class="lineno"> 4440</span>&#160;</div><div class="line"><a name="l04441"></a><span class="lineno"> 4441</span>&#160;   <span class="keywordflow">if</span> (dsp) {</div><div class="line"><a name="l04442"></a><span class="lineno"> 4442</span>&#160;      <a class="code" href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a>(dsp);</div><div class="line"><a name="l04443"></a><span class="lineno"> 4443</span>&#160;   }</div><div class="line"><a name="l04444"></a><span class="lineno"> 4444</span>&#160;</div><div class="line"><a name="l04445"></a><span class="lineno"> 4445</span>&#160;   <span class="keywordflow">if</span> (user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>) {</div><div class="line"><a name="l04446"></a><span class="lineno"> 4446</span>&#160;      <span class="comment">/* Only cleanup users who really joined! */</span></div><div class="line"><a name="l04447"></a><span class="lineno"> 4447</span>&#160;      now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04448"></a><span class="lineno"> 4448</span>&#160;</div><div class="line"><a name="l04449"></a><span class="lineno"> 4449</span>&#160;      <span class="keywordflow">if</span> (sent_event) {</div><div class="line"><a name="l04450"></a><span class="lineno"> 4450</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a>(conf, chan, user, meetme_leave_type(), <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04451"></a><span class="lineno"> 4451</span>&#160;      }</div><div class="line"><a name="l04452"></a><span class="lineno"> 4452</span>&#160;</div><div class="line"><a name="l04453"></a><span class="lineno"> 4453</span>&#160;      <span class="keywordflow">if</span> (setusercount) {</div><div class="line"><a name="l04454"></a><span class="lineno"> 4454</span>&#160;         conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>--;</div><div class="line"><a name="l04455"></a><span class="lineno"> 4455</span>&#160;         <span class="keywordflow">if</span> (rt_log_members) {</div><div class="line"><a name="l04456"></a><span class="lineno"> 4456</span>&#160;            <span class="comment">/* Update table */</span></div><div class="line"><a name="l04457"></a><span class="lineno"> 4457</span>&#160;            snprintf(members, <span class="keyword">sizeof</span>(members), <span class="stringliteral">&quot;%d&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>);</div><div class="line"><a name="l04458"></a><span class="lineno"> 4458</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a403ec8b49645ea204e82cb72bb8cf9f4">ast_realtime_require_field</a>(<span class="stringliteral">&quot;meetme&quot;</span>,</div><div class="line"><a name="l04459"></a><span class="lineno"> 4459</span>&#160;               <span class="stringliteral">&quot;confno&quot;</span>, strlen(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>) &gt; 7 ? <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be">RQ_UINTEGER4</a> : strlen(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>) &gt; 4 ? <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a> : <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a>, strlen(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>),</div><div class="line"><a name="l04460"></a><span class="lineno"> 4460</span>&#160;               <span class="stringliteral">&quot;members&quot;</span>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a>, strlen(members),</div><div class="line"><a name="l04461"></a><span class="lineno"> 4461</span>&#160;               <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04462"></a><span class="lineno"> 4462</span>&#160;            <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#ab845019b2f1bb324ff57e14192d62c39">ast_update_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <span class="stringliteral">&quot;members&quot;</span>, members, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04463"></a><span class="lineno"> 4463</span>&#160;         }</div><div class="line"><a name="l04464"></a><span class="lineno"> 4464</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a>)) {</div><div class="line"><a name="l04465"></a><span class="lineno"> 4465</span>&#160;            conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>--;</div><div class="line"><a name="l04466"></a><span class="lineno"> 4466</span>&#160;         }</div><div class="line"><a name="l04467"></a><span class="lineno"> 4467</span>&#160;      }</div><div class="line"><a name="l04468"></a><span class="lineno"> 4468</span>&#160;      <span class="comment">/* Remove ourselves from the container */</span></div><div class="line"><a name="l04469"></a><span class="lineno"> 4469</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, user);</div><div class="line"><a name="l04470"></a><span class="lineno"> 4470</span>&#160;</div><div class="line"><a name="l04471"></a><span class="lineno"> 4471</span>&#160;      <span class="comment">/* Change any states */</span></div><div class="line"><a name="l04472"></a><span class="lineno"> 4472</span>&#160;      <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>) {</div><div class="line"><a name="l04473"></a><span class="lineno"> 4473</span>&#160;         <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>, (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">isdynamic</a> ? <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a> : AST_DEVSTATE_CACHABLE), <span class="stringliteral">&quot;meetme:%s&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l04474"></a><span class="lineno"> 4474</span>&#160;      }</div><div class="line"><a name="l04475"></a><span class="lineno"> 4475</span>&#160;</div><div class="line"><a name="l04476"></a><span class="lineno"> 4476</span>&#160;      <span class="comment">/* This flag is meant to kill a conference with only one participant remaining.  */</span></div><div class="line"><a name="l04477"></a><span class="lineno"> 4477</span>&#160;      <span class="keywordflow">if</span> (conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a> == 1 &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#aa202f4f3c667a3af94a9ab09766c2586">CONFFLAG_KILL_LAST_MAN_STANDING</a>)) {</div><div class="line"><a name="l04478"></a><span class="lineno"> 4478</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, 0, <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d211197f87ddeed62493bc7033f3f9">user_set_hangup_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04479"></a><span class="lineno"> 4479</span>&#160;      }</div><div class="line"><a name="l04480"></a><span class="lineno"> 4480</span>&#160;</div><div class="line"><a name="l04481"></a><span class="lineno"> 4481</span>&#160;      <span class="comment">/* Return the number of seconds the user was in the conf */</span></div><div class="line"><a name="l04482"></a><span class="lineno"> 4482</span>&#160;      snprintf(meetmesecs, <span class="keyword">sizeof</span>(meetmesecs), <span class="stringliteral">&quot;%d&quot;</span>, (<span class="keywordtype">int</span>) (time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) - user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a12f01daf47a1827d4ae33b345da7d46b">jointime</a>));</div><div class="line"><a name="l04483"></a><span class="lineno"> 4483</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MEETMESECS&quot;</span>, meetmesecs);</div><div class="line"><a name="l04484"></a><span class="lineno"> 4484</span>&#160;</div><div class="line"><a name="l04485"></a><span class="lineno"> 4485</span>&#160;      <span class="comment">/* Return the RealTime bookid for CDR linking */</span></div><div class="line"><a name="l04486"></a><span class="lineno"> 4486</span>&#160;      <span class="keywordflow">if</span> (rt_schedule) {</div><div class="line"><a name="l04487"></a><span class="lineno"> 4487</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MEETMEBOOKID&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9c9fece27d0906bb0c5e522e26c92d7f">bookid</a>);</div><div class="line"><a name="l04488"></a><span class="lineno"> 4488</span>&#160;      }</div><div class="line"><a name="l04489"></a><span class="lineno"> 4489</span>&#160;   }</div><div class="line"><a name="l04490"></a><span class="lineno"> 4490</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, -1);</div><div class="line"><a name="l04491"></a><span class="lineno"> 4491</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04492"></a><span class="lineno"> 4492</span>&#160;</div><div class="line"><a name="l04493"></a><span class="lineno"> 4493</span>&#160;</div><div class="line"><a name="l04494"></a><span class="lineno"> 4494</span>&#160;conf_run_cleanup:</div><div class="line"><a name="l04495"></a><span class="lineno"> 4495</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>(cap_slin);</div><div class="line"><a name="l04496"></a><span class="lineno"> 4496</span>&#160;</div><div class="line"><a name="l04497"></a><span class="lineno"> 4497</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l04498"></a><span class="lineno"> 4498</span>&#160;}</div><div class="line"><a name="l04499"></a><span class="lineno"> 4499</span>&#160;</div><div class="line"><a name="l04500"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ad03ae059013a251d0b5ef753e0da893b"> 4500</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#ad03ae059013a251d0b5ef753e0da893b">find_conf_realtime</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <span class="keywordtype">int</span> make, <span class="keywordtype">int</span> dynamic,</div><div class="line"><a name="l04501"></a><span class="lineno"> 4501</span>&#160;            <span class="keywordtype">char</span> *dynamic_pin, <span class="keywordtype">size_t</span> pin_buf_len, <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a>, <span class="keyword">struct</span> <a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *confflags, <span class="keywordtype">int</span> *too_early, <span class="keywordtype">char</span> **optargs)</div><div class="line"><a name="l04502"></a><span class="lineno"> 4502</span>&#160;{</div><div class="line"><a name="l04503"></a><span class="lineno"> 4503</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>, *origvar;</div><div class="line"><a name="l04504"></a><span class="lineno"> 4504</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf;</div><div class="line"><a name="l04505"></a><span class="lineno"> 4505</span>&#160;</div><div class="line"><a name="l04506"></a><span class="lineno"> 4506</span>&#160;   *too_early = 0;</div><div class="line"><a name="l04507"></a><span class="lineno"> 4507</span>&#160;</div><div class="line"><a name="l04508"></a><span class="lineno"> 4508</span>&#160;   <span class="comment">/* Check first in the conference list */</span></div><div class="line"><a name="l04509"></a><span class="lineno"> 4509</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04510"></a><span class="lineno"> 4510</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, <a class="code" href="../../d8/d44/structast__conference.html#a46885edd8fad62a4089c021a1d810740">list</a>) {</div><div class="line"><a name="l04511"></a><span class="lineno"> 4511</span>&#160;      <span class="keywordflow">if</span> (!strcmp(confno, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>)) {</div><div class="line"><a name="l04512"></a><span class="lineno"> 4512</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04513"></a><span class="lineno"> 4513</span>&#160;      }</div><div class="line"><a name="l04514"></a><span class="lineno"> 4514</span>&#160;   }</div><div class="line"><a name="l04515"></a><span class="lineno"> 4515</span>&#160;   <span class="keywordflow">if</span> (cnf) {</div><div class="line"><a name="l04516"></a><span class="lineno"> 4516</span>&#160;      cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a> += <a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a>;</div><div class="line"><a name="l04517"></a><span class="lineno"> 4517</span>&#160;   }</div><div class="line"><a name="l04518"></a><span class="lineno"> 4518</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04519"></a><span class="lineno"> 4519</span>&#160;</div><div class="line"><a name="l04520"></a><span class="lineno"> 4520</span>&#160;   <span class="keywordflow">if</span> (!cnf) {</div><div class="line"><a name="l04521"></a><span class="lineno"> 4521</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#ad3479638ded235d29e4bbba475abe931">pin</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, *<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>; <span class="comment">/* For temp use */</span></div><div class="line"><a name="l04522"></a><span class="lineno"> 4522</span>&#160;      <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#ad7b1f4e72963d085053fb4ef80e9fb33">maxusers</a> = 0;</div><div class="line"><a name="l04523"></a><span class="lineno"> 4523</span>&#160;      <span class="keyword">struct </span>timeval now;</div><div class="line"><a name="l04524"></a><span class="lineno"> 4524</span>&#160;      <span class="keywordtype">char</span> recordingfilename[256] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04525"></a><span class="lineno"> 4525</span>&#160;      <span class="keywordtype">char</span> recordingformat[11] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04526"></a><span class="lineno"> 4526</span>&#160;      <span class="keywordtype">char</span> currenttime[32] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04527"></a><span class="lineno"> 4527</span>&#160;      <span class="keywordtype">char</span> eatime[32] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04528"></a><span class="lineno"> 4528</span>&#160;      <span class="keywordtype">char</span> bookid[51] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04529"></a><span class="lineno"> 4529</span>&#160;      <span class="keywordtype">char</span> recordingtmp[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a> * 2] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04530"></a><span class="lineno"> 4530</span>&#160;      <span class="keywordtype">char</span> useropts[<a class="code" href="../../df/d44/app__meetme_8c.html#a83128aa5fb371ea385d8bc0f6186e20f">OPTIONS_LEN</a> + 1] = <span class="stringliteral">&quot;&quot;</span>; <span class="comment">/* Used for RealTime conferences */</span></div><div class="line"><a name="l04531"></a><span class="lineno"> 4531</span>&#160;      <span class="keywordtype">char</span> adminopts[<a class="code" href="../../df/d44/app__meetme_8c.html#a83128aa5fb371ea385d8bc0f6186e20f">OPTIONS_LEN</a> + 1] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04532"></a><span class="lineno"> 4532</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> tm, etm;</div><div class="line"><a name="l04533"></a><span class="lineno"> 4533</span>&#160;      <span class="keyword">struct </span>timeval endtime = { .tv_sec = 0 };</div><div class="line"><a name="l04534"></a><span class="lineno"> 4534</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *var2;</div><div class="line"><a name="l04535"></a><span class="lineno"> 4535</span>&#160;</div><div class="line"><a name="l04536"></a><span class="lineno"> 4536</span>&#160;      <span class="keywordflow">if</span> (rt_schedule) {</div><div class="line"><a name="l04537"></a><span class="lineno"> 4537</span>&#160;         now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04538"></a><span class="lineno"> 4538</span>&#160;</div><div class="line"><a name="l04539"></a><span class="lineno"> 4539</span>&#160;         <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04540"></a><span class="lineno"> 4540</span>&#160;         <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(currenttime, <span class="keyword">sizeof</span>(currenttime), <a class="code" href="../../df/d44/app__meetme_8c.html#af3a7249af0dc84e61384327caa331213">DATE_FORMAT</a>, &amp;tm);</div><div class="line"><a name="l04541"></a><span class="lineno"> 4541</span>&#160;</div><div class="line"><a name="l04542"></a><span class="lineno"> 4542</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Looking for conference %s that starts after %s\n&quot;</span>, confno, currenttime);</div><div class="line"><a name="l04543"></a><span class="lineno"> 4543</span>&#160;</div><div class="line"><a name="l04544"></a><span class="lineno"> 4544</span>&#160;         var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>,</div><div class="line"><a name="l04545"></a><span class="lineno"> 4545</span>&#160;            confno, <span class="stringliteral">&quot;starttime &lt;= &quot;</span>, currenttime, <span class="stringliteral">&quot;endtime &gt;= &quot;</span>,</div><div class="line"><a name="l04546"></a><span class="lineno"> 4546</span>&#160;            currenttime, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04547"></a><span class="lineno"> 4547</span>&#160;</div><div class="line"><a name="l04548"></a><span class="lineno"> 4548</span>&#160;         <span class="keywordflow">if</span> (!var &amp;&amp; fuzzystart) {</div><div class="line"><a name="l04549"></a><span class="lineno"> 4549</span>&#160;            now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04550"></a><span class="lineno"> 4550</span>&#160;            now.tv_sec += <a class="code" href="../../df/d44/app__meetme_8c.html#aacbac1f0d72bfec51d91f4ace69cbbd4">fuzzystart</a>;</div><div class="line"><a name="l04551"></a><span class="lineno"> 4551</span>&#160;</div><div class="line"><a name="l04552"></a><span class="lineno"> 4552</span>&#160;            <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04553"></a><span class="lineno"> 4553</span>&#160;            <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(currenttime, <span class="keyword">sizeof</span>(currenttime), <a class="code" href="../../df/d44/app__meetme_8c.html#af3a7249af0dc84e61384327caa331213">DATE_FORMAT</a>, &amp;tm);</div><div class="line"><a name="l04554"></a><span class="lineno"> 4554</span>&#160;            var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>,</div><div class="line"><a name="l04555"></a><span class="lineno"> 4555</span>&#160;               confno, <span class="stringliteral">&quot;starttime &lt;= &quot;</span>, currenttime, <span class="stringliteral">&quot;endtime &gt;= &quot;</span>,</div><div class="line"><a name="l04556"></a><span class="lineno"> 4556</span>&#160;               currenttime, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04557"></a><span class="lineno"> 4557</span>&#160;         }</div><div class="line"><a name="l04558"></a><span class="lineno"> 4558</span>&#160;</div><div class="line"><a name="l04559"></a><span class="lineno"> 4559</span>&#160;         <span class="keywordflow">if</span> (!var &amp;&amp; earlyalert) {</div><div class="line"><a name="l04560"></a><span class="lineno"> 4560</span>&#160;            now = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l04561"></a><span class="lineno"> 4561</span>&#160;            now.tv_sec += <a class="code" href="../../df/d44/app__meetme_8c.html#aaaea827a7f6f7ee74d3dda01ec71644e">earlyalert</a>;</div><div class="line"><a name="l04562"></a><span class="lineno"> 4562</span>&#160;            <a class="code" href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a>(&amp;now, &amp;etm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04563"></a><span class="lineno"> 4563</span>&#160;            <a class="code" href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a>(eatime, <span class="keyword">sizeof</span>(eatime), <a class="code" href="../../df/d44/app__meetme_8c.html#af3a7249af0dc84e61384327caa331213">DATE_FORMAT</a>, &amp;etm);</div><div class="line"><a name="l04564"></a><span class="lineno"> 4564</span>&#160;            var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>,</div><div class="line"><a name="l04565"></a><span class="lineno"> 4565</span>&#160;               confno, <span class="stringliteral">&quot;starttime &lt;= &quot;</span>, eatime, <span class="stringliteral">&quot;endtime &gt;= &quot;</span>,</div><div class="line"><a name="l04566"></a><span class="lineno"> 4566</span>&#160;               currenttime, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04567"></a><span class="lineno"> 4567</span>&#160;            <span class="keywordflow">if</span> (var) {</div><div class="line"><a name="l04568"></a><span class="lineno"> 4568</span>&#160;               *too_early = 1;</div><div class="line"><a name="l04569"></a><span class="lineno"> 4569</span>&#160;            }</div><div class="line"><a name="l04570"></a><span class="lineno"> 4570</span>&#160;         }</div><div class="line"><a name="l04571"></a><span class="lineno"> 4571</span>&#160;</div><div class="line"><a name="l04572"></a><span class="lineno"> 4572</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04573"></a><span class="lineno"> 4573</span>&#160;          var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>, confno, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04574"></a><span class="lineno"> 4574</span>&#160;      }</div><div class="line"><a name="l04575"></a><span class="lineno"> 4575</span>&#160;</div><div class="line"><a name="l04576"></a><span class="lineno"> 4576</span>&#160;      <span class="keywordflow">if</span> (!var) {</div><div class="line"><a name="l04577"></a><span class="lineno"> 4577</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04578"></a><span class="lineno"> 4578</span>&#160;      }</div><div class="line"><a name="l04579"></a><span class="lineno"> 4579</span>&#160;</div><div class="line"><a name="l04580"></a><span class="lineno"> 4580</span>&#160;      <span class="keywordflow">if</span> (rt_schedule &amp;&amp; *too_early) {</div><div class="line"><a name="l04581"></a><span class="lineno"> 4581</span>&#160;         <span class="comment">/* Announce that the caller is early and exit */</span></div><div class="line"><a name="l04582"></a><span class="lineno"> 4582</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-has-not-started&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l04583"></a><span class="lineno"> 4583</span>&#160;            <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04584"></a><span class="lineno"> 4584</span>&#160;         }</div><div class="line"><a name="l04585"></a><span class="lineno"> 4585</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(var);</div><div class="line"><a name="l04586"></a><span class="lineno"> 4586</span>&#160;         <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04587"></a><span class="lineno"> 4587</span>&#160;      }</div><div class="line"><a name="l04588"></a><span class="lineno"> 4588</span>&#160;</div><div class="line"><a name="l04589"></a><span class="lineno"> 4589</span>&#160;      <span class="keywordflow">for</span> (origvar = var; <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>; var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l04590"></a><span class="lineno"> 4590</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;pin&quot;</span>)) {</div><div class="line"><a name="l04591"></a><span class="lineno"> 4591</span>&#160;            pin = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04592"></a><span class="lineno"> 4592</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;adminpin&quot;</span>)) {</div><div class="line"><a name="l04593"></a><span class="lineno"> 4593</span>&#160;            pinadmin = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04594"></a><span class="lineno"> 4594</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;bookId&quot;</span>)) {</div><div class="line"><a name="l04595"></a><span class="lineno"> 4595</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(bookid, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(bookid));</div><div class="line"><a name="l04596"></a><span class="lineno"> 4596</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;opts&quot;</span>)) {</div><div class="line"><a name="l04597"></a><span class="lineno"> 4597</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(useropts, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>[<a class="code" href="../../df/d44/app__meetme_8c.html#a83128aa5fb371ea385d8bc0f6186e20f">OPTIONS_LEN</a> + 1]));</div><div class="line"><a name="l04598"></a><span class="lineno"> 4598</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;maxusers&quot;</span>)) {</div><div class="line"><a name="l04599"></a><span class="lineno"> 4599</span>&#160;            maxusers = atoi(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l04600"></a><span class="lineno"> 4600</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;adminopts&quot;</span>)) {</div><div class="line"><a name="l04601"></a><span class="lineno"> 4601</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(adminopts, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(<span class="keywordtype">char</span>[<a class="code" href="../../df/d44/app__meetme_8c.html#a83128aa5fb371ea385d8bc0f6186e20f">OPTIONS_LEN</a> + 1]));</div><div class="line"><a name="l04602"></a><span class="lineno"> 4602</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;recordingfilename&quot;</span>)) {</div><div class="line"><a name="l04603"></a><span class="lineno"> 4603</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(recordingfilename, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(recordingfilename));</div><div class="line"><a name="l04604"></a><span class="lineno"> 4604</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;recordingformat&quot;</span>)) {</div><div class="line"><a name="l04605"></a><span class="lineno"> 4605</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(recordingformat, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(recordingformat));</div><div class="line"><a name="l04606"></a><span class="lineno"> 4606</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;endtime&quot;</span>)) {</div><div class="line"><a name="l04607"></a><span class="lineno"> 4607</span>&#160;            <span class="keyword">struct </span><a class="code" href="../../d5/d84/structast__tm.html">ast_tm</a> endtime_tm;</div><div class="line"><a name="l04608"></a><span class="lineno"> 4608</span>&#160;            <a class="code" href="../../d5/deb/localtime_8h.html#a3eb2c73accce1b149ce597de80d1677a">ast_strptime</a>(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%Y-%m-%d %H:%M:%S&quot;</span>, &amp;endtime_tm);</div><div class="line"><a name="l04609"></a><span class="lineno"> 4609</span>&#160;            endtime = <a class="code" href="../../d5/deb/localtime_8h.html#ae0843e4dbbd1fed36d2676dda58e0c44">ast_mktime</a>(&amp;endtime_tm, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04610"></a><span class="lineno"> 4610</span>&#160;         }</div><div class="line"><a name="l04611"></a><span class="lineno"> 4611</span>&#160;      }</div><div class="line"><a name="l04612"></a><span class="lineno"> 4612</span>&#160;</div><div class="line"><a name="l04613"></a><span class="lineno"> 4613</span>&#160;      <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a>(origvar);</div><div class="line"><a name="l04614"></a><span class="lineno"> 4614</span>&#160;</div><div class="line"><a name="l04615"></a><span class="lineno"> 4615</span>&#160;      cnf = <a class="code" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a>(confno, pin ? pin : <span class="stringliteral">&quot;&quot;</span>, pinadmin ? pinadmin : <span class="stringliteral">&quot;&quot;</span>, make, dynamic, refcount, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04616"></a><span class="lineno"> 4616</span>&#160;</div><div class="line"><a name="l04617"></a><span class="lineno"> 4617</span>&#160;      <span class="keywordflow">if</span> (cnf) {</div><div class="line"><a name="l04618"></a><span class="lineno"> 4618</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> tmp_flags;</div><div class="line"><a name="l04619"></a><span class="lineno"> 4619</span>&#160;</div><div class="line"><a name="l04620"></a><span class="lineno"> 4620</span>&#160;         cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad7b1f4e72963d085053fb4ef80e9fb33">maxusers</a> = maxusers;</div><div class="line"><a name="l04621"></a><span class="lineno"> 4621</span>&#160;         cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a35cc725664fd0b4f53fbbb7d0f15c038">endalert</a> = <a class="code" href="../../df/d44/app__meetme_8c.html#a35cc725664fd0b4f53fbbb7d0f15c038">endalert</a>;</div><div class="line"><a name="l04622"></a><span class="lineno"> 4622</span>&#160;         cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">endtime</a> = endtime.tv_sec;</div><div class="line"><a name="l04623"></a><span class="lineno"> 4623</span>&#160;         cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a925d07390890a216d14e47a42b59eb05">useropts</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(useropts);</div><div class="line"><a name="l04624"></a><span class="lineno"> 4624</span>&#160;         cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa3f2aa238dd1090b0ab5e87b9188f2a">adminopts</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(adminopts);</div><div class="line"><a name="l04625"></a><span class="lineno"> 4625</span>&#160;         cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9c9fece27d0906bb0c5e522e26c92d7f">bookid</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(bookid);</div><div class="line"><a name="l04626"></a><span class="lineno"> 4626</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(recordingfilename)) {</div><div class="line"><a name="l04627"></a><span class="lineno"> 4627</span>&#160;            cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(recordingfilename);</div><div class="line"><a name="l04628"></a><span class="lineno"> 4628</span>&#160;         }</div><div class="line"><a name="l04629"></a><span class="lineno"> 4629</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(recordingformat)) {</div><div class="line"><a name="l04630"></a><span class="lineno"> 4630</span>&#160;            cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(recordingformat);</div><div class="line"><a name="l04631"></a><span class="lineno"> 4631</span>&#160;         }</div><div class="line"><a name="l04632"></a><span class="lineno"> 4632</span>&#160;</div><div class="line"><a name="l04633"></a><span class="lineno"> 4633</span>&#160;         <span class="comment">/* Parse the other options into confflags -- need to do this in two</span></div><div class="line"><a name="l04634"></a><span class="lineno"> 4634</span>&#160;<span class="comment">          * steps, because the parse_options routine zeroes the buffer. */</span></div><div class="line"><a name="l04635"></a><span class="lineno"> 4635</span>&#160;         <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af85cb9dfd2fea9cfe820d2323c7dd471">ast_app_parse_options64</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a1df808b41e9d1fa7679196ce8293c33b">meetme_opts</a>, &amp;tmp_flags, optargs, useropts);</div><div class="line"><a name="l04636"></a><span class="lineno"> 4636</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#ab2b7ee74bfabc5749561a38506048351">ast_copy_flags64</a>(confflags, &amp;tmp_flags, tmp_flags.<a class="code" href="../../d5/d10/structast__flags64.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a>);</div><div class="line"><a name="l04637"></a><span class="lineno"> 4637</span>&#160;</div><div class="line"><a name="l04638"></a><span class="lineno"> 4638</span>&#160;         <span class="keywordflow">if</span> (strchr(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a925d07390890a216d14e47a42b59eb05">useropts</a>, <span class="charliteral">&#39;r&#39;</span>)) {</div><div class="line"><a name="l04639"></a><span class="lineno"> 4639</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(recordingfilename)) { <span class="comment">/* If the recordingfilename in the database is empty, use the channel definition or use the default. */</span></div><div class="line"><a name="l04640"></a><span class="lineno"> 4640</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04641"></a><span class="lineno"> 4641</span>&#160;               <span class="keywordflow">if</span> ((var2 = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MEETME_RECORDINGFILE&quot;</span>))) {</div><div class="line"><a name="l04642"></a><span class="lineno"> 4642</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>);</div><div class="line"><a name="l04643"></a><span class="lineno"> 4643</span>&#160;                  cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var2);</div><div class="line"><a name="l04644"></a><span class="lineno"> 4644</span>&#160;               }</div><div class="line"><a name="l04645"></a><span class="lineno"> 4645</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04646"></a><span class="lineno"> 4646</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>)) {</div><div class="line"><a name="l04647"></a><span class="lineno"> 4647</span>&#160;                  snprintf(recordingtmp, <span class="keyword">sizeof</span>(recordingtmp), <span class="stringliteral">&quot;meetme-conf-rec-%s-%s&quot;</span>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(chan));</div><div class="line"><a name="l04648"></a><span class="lineno"> 4648</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>);</div><div class="line"><a name="l04649"></a><span class="lineno"> 4649</span>&#160;                  cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(recordingtmp);</div><div class="line"><a name="l04650"></a><span class="lineno"> 4650</span>&#160;               }</div><div class="line"><a name="l04651"></a><span class="lineno"> 4651</span>&#160;            }</div><div class="line"><a name="l04652"></a><span class="lineno"> 4652</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>)) {<span class="comment">/* If the recording format is empty, use the wav as default */</span></div><div class="line"><a name="l04653"></a><span class="lineno"> 4653</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a>(chan);</div><div class="line"><a name="l04654"></a><span class="lineno"> 4654</span>&#160;               <span class="keywordflow">if</span> ((var2 = <a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;MEETME_RECORDINGFORMAT&quot;</span>))) {</div><div class="line"><a name="l04655"></a><span class="lineno"> 4655</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>);</div><div class="line"><a name="l04656"></a><span class="lineno"> 4656</span>&#160;                  cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(var2);</div><div class="line"><a name="l04657"></a><span class="lineno"> 4657</span>&#160;               }</div><div class="line"><a name="l04658"></a><span class="lineno"> 4658</span>&#160;               <a class="code" href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a>(chan);</div><div class="line"><a name="l04659"></a><span class="lineno"> 4659</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>)) {</div><div class="line"><a name="l04660"></a><span class="lineno"> 4660</span>&#160;                  <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>);</div><div class="line"><a name="l04661"></a><span class="lineno"> 4661</span>&#160;                  cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a> = <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(<span class="stringliteral">&quot;wav&quot;</span>);</div><div class="line"><a name="l04662"></a><span class="lineno"> 4662</span>&#160;               }</div><div class="line"><a name="l04663"></a><span class="lineno"> 4663</span>&#160;            }</div><div class="line"><a name="l04664"></a><span class="lineno"> 4664</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Starting recording of MeetMe Conference %s into file %s.%s.\n&quot;</span>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>);</div><div class="line"><a name="l04665"></a><span class="lineno"> 4665</span>&#160;         }</div><div class="line"><a name="l04666"></a><span class="lineno"> 4666</span>&#160;      }</div><div class="line"><a name="l04667"></a><span class="lineno"> 4667</span>&#160;   }</div><div class="line"><a name="l04668"></a><span class="lineno"> 4668</span>&#160;</div><div class="line"><a name="l04669"></a><span class="lineno"> 4669</span>&#160;   <span class="keywordflow">if</span> (cnf) {</div><div class="line"><a name="l04670"></a><span class="lineno"> 4670</span>&#160;      <span class="keywordflow">if</span> (confflags-&gt;<a class="code" href="../../d5/d10/structast__flags64.html#a899a76dc5f03f0d4ea3793c339e07ee9">flags</a> &amp;&amp; !cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a> &amp;&amp;</div><div class="line"><a name="l04671"></a><span class="lineno"> 4671</span>&#160;          !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp;</div><div class="line"><a name="l04672"></a><span class="lineno"> 4672</span>&#160;          <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>)) {</div><div class="line"><a name="l04673"></a><span class="lineno"> 4673</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No DAHDI channel available for conference, user introduction disabled (is chan_dahdi loaded?)\n&quot;</span>);</div><div class="line"><a name="l04674"></a><span class="lineno"> 4674</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a32495ee3248a37ac92279090110f6fbf">ast_clear_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>);</div><div class="line"><a name="l04675"></a><span class="lineno"> 4675</span>&#160;      }</div><div class="line"><a name="l04676"></a><span class="lineno"> 4676</span>&#160;</div><div class="line"><a name="l04677"></a><span class="lineno"> 4677</span>&#160;      <span class="keywordflow">if</span> (confflags &amp;&amp; !cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a> &amp;&amp;</div><div class="line"><a name="l04678"></a><span class="lineno"> 4678</span>&#160;          <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a>)) {</div><div class="line"><a name="l04679"></a><span class="lineno"> 4679</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No DAHDI channel available for conference, conference recording disabled (is chan_dahdi loaded?)\n&quot;</span>);</div><div class="line"><a name="l04680"></a><span class="lineno"> 4680</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a32495ee3248a37ac92279090110f6fbf">ast_clear_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a>);</div><div class="line"><a name="l04681"></a><span class="lineno"> 4681</span>&#160;      }</div><div class="line"><a name="l04682"></a><span class="lineno"> 4682</span>&#160;   }</div><div class="line"><a name="l04683"></a><span class="lineno"> 4683</span>&#160;</div><div class="line"><a name="l04684"></a><span class="lineno"> 4684</span>&#160;   <span class="keywordflow">return</span> cnf;</div><div class="line"><a name="l04685"></a><span class="lineno"> 4685</span>&#160;}</div><div class="line"><a name="l04686"></a><span class="lineno"> 4686</span>&#160;</div><div class="line"><a name="l04687"></a><span class="lineno"> 4687</span>&#160;</div><div class="line"><a name="l04688"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1a950620127847d30c0eee380b956fa7"> 4688</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a1a950620127847d30c0eee380b956fa7">find_conf</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keywordtype">char</span> *<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, <span class="keywordtype">int</span> make, <span class="keywordtype">int</span> dynamic,</div><div class="line"><a name="l04689"></a><span class="lineno"> 4689</span>&#160;               <span class="keywordtype">char</span> *dynamic_pin, <span class="keywordtype">size_t</span> pin_buf_len, <span class="keywordtype">int</span> <a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a>, <span class="keyword">struct</span> <a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> *confflags)</div><div class="line"><a name="l04690"></a><span class="lineno"> 4690</span>&#160;{</div><div class="line"><a name="l04691"></a><span class="lineno"> 4691</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l04692"></a><span class="lineno"> 4692</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l04693"></a><span class="lineno"> 4693</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { 0 };</div><div class="line"><a name="l04694"></a><span class="lineno"> 4694</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf;</div><div class="line"><a name="l04695"></a><span class="lineno"> 4695</span>&#160;</div><div class="line"><a name="l04696"></a><span class="lineno"> 4696</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(args,</div><div class="line"><a name="l04697"></a><span class="lineno"> 4697</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(confno);</div><div class="line"><a name="l04698"></a><span class="lineno"> 4698</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d8/d44/structast__conference.html#ad3479638ded235d29e4bbba475abe931">pin</a>);</div><div class="line"><a name="l04699"></a><span class="lineno"> 4699</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>);</div><div class="line"><a name="l04700"></a><span class="lineno"> 4700</span>&#160;   );</div><div class="line"><a name="l04701"></a><span class="lineno"> 4701</span>&#160;</div><div class="line"><a name="l04702"></a><span class="lineno"> 4702</span>&#160;   <span class="comment">/* Check first in the conference list */</span></div><div class="line"><a name="l04703"></a><span class="lineno"> 4703</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;The requested confno is &#39;%s&#39;?\n&quot;</span>, confno);</div><div class="line"><a name="l04704"></a><span class="lineno"> 4704</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04705"></a><span class="lineno"> 4705</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, <a class="code" href="../../d8/d44/structast__conference.html#a46885edd8fad62a4089c021a1d810740">list</a>) {</div><div class="line"><a name="l04706"></a><span class="lineno"> 4706</span>&#160;      <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Does conf %s match %s?\n&quot;</span>, confno, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l04707"></a><span class="lineno"> 4707</span>&#160;      <span class="keywordflow">if</span> (!strcmp(confno, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>))</div><div class="line"><a name="l04708"></a><span class="lineno"> 4708</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l04709"></a><span class="lineno"> 4709</span>&#160;   }</div><div class="line"><a name="l04710"></a><span class="lineno"> 4710</span>&#160;   <span class="keywordflow">if</span> (cnf) {</div><div class="line"><a name="l04711"></a><span class="lineno"> 4711</span>&#160;      cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a> += <a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a>;</div><div class="line"><a name="l04712"></a><span class="lineno"> 4712</span>&#160;   }</div><div class="line"><a name="l04713"></a><span class="lineno"> 4713</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04714"></a><span class="lineno"> 4714</span>&#160;</div><div class="line"><a name="l04715"></a><span class="lineno"> 4715</span>&#160;   <span class="keywordflow">if</span> (!cnf) {</div><div class="line"><a name="l04716"></a><span class="lineno"> 4716</span>&#160;      <span class="keywordflow">if</span> (dynamic) {</div><div class="line"><a name="l04717"></a><span class="lineno"> 4717</span>&#160;         <span class="comment">/* No need to parse meetme.conf */</span></div><div class="line"><a name="l04718"></a><span class="lineno"> 4718</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Building dynamic conference &#39;%s&#39;\n&quot;</span>, confno);</div><div class="line"><a name="l04719"></a><span class="lineno"> 4719</span>&#160;         <span class="keywordflow">if</span> (dynamic_pin) {</div><div class="line"><a name="l04720"></a><span class="lineno"> 4720</span>&#160;            <span class="keywordflow">if</span> (dynamic_pin[0] == <span class="charliteral">&#39;q&#39;</span>) {</div><div class="line"><a name="l04721"></a><span class="lineno"> 4721</span>&#160;               <span class="comment">/* Query the user to enter a PIN */</span></div><div class="line"><a name="l04722"></a><span class="lineno"> 4722</span>&#160;               <span class="keywordflow">if</span> (<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af3f76858d4dd513e59dbe5e67bc46220">ast_app_getdata</a>(chan, <span class="stringliteral">&quot;conf-getpin&quot;</span>, dynamic_pin, pin_buf_len - 1, 0) &lt; 0)</div><div class="line"><a name="l04723"></a><span class="lineno"> 4723</span>&#160;                  <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04724"></a><span class="lineno"> 4724</span>&#160;            }</div><div class="line"><a name="l04725"></a><span class="lineno"> 4725</span>&#160;            cnf = <a class="code" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a>(confno, dynamic_pin, <span class="stringliteral">&quot;&quot;</span>, make, dynamic, refcount, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04726"></a><span class="lineno"> 4726</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04727"></a><span class="lineno"> 4727</span>&#160;            cnf = <a class="code" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a>(confno, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, make, dynamic, refcount, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04728"></a><span class="lineno"> 4728</span>&#160;         }</div><div class="line"><a name="l04729"></a><span class="lineno"> 4729</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04730"></a><span class="lineno"> 4730</span>&#160;         <span class="comment">/* Check the config */</span></div><div class="line"><a name="l04731"></a><span class="lineno"> 4731</span>&#160;         cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62921b92fa4fb37f1e3a5d4c644fc1d8">CONFIG_FILE_NAME</a>, config_flags);</div><div class="line"><a name="l04732"></a><span class="lineno"> 4732</span>&#160;         <span class="keywordflow">if</span> (!cfg) {</div><div class="line"><a name="l04733"></a><span class="lineno"> 4733</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No %s file :(\n&quot;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a62921b92fa4fb37f1e3a5d4c644fc1d8">CONFIG_FILE_NAME</a>);</div><div class="line"><a name="l04734"></a><span class="lineno"> 4734</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04735"></a><span class="lineno"> 4735</span>&#160;         } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l04736"></a><span class="lineno"> 4736</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Config file &quot;</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62921b92fa4fb37f1e3a5d4c644fc1d8">CONFIG_FILE_NAME</a> <span class="stringliteral">&quot; is in an invalid format.  Aborting.\n&quot;</span>);</div><div class="line"><a name="l04737"></a><span class="lineno"> 4737</span>&#160;            <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04738"></a><span class="lineno"> 4738</span>&#160;         }</div><div class="line"><a name="l04739"></a><span class="lineno"> 4739</span>&#160;</div><div class="line"><a name="l04740"></a><span class="lineno"> 4740</span>&#160;         <span class="keywordflow">for</span> (var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;rooms&quot;</span>); <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>; var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l04741"></a><span class="lineno"> 4741</span>&#160;            <span class="keywordtype">char</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>[<a class="code" href="../../df/d44/app__meetme_8c.html#afad3aadf1645aabf53eea7d30a839411">MAX_SETTINGS</a>];</div><div class="line"><a name="l04742"></a><span class="lineno"> 4742</span>&#160;</div><div class="line"><a name="l04743"></a><span class="lineno"> 4743</span>&#160;            <span class="keywordflow">if</span> (strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;conf&quot;</span>))</div><div class="line"><a name="l04744"></a><span class="lineno"> 4744</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04745"></a><span class="lineno"> 4745</span>&#160;</div><div class="line"><a name="l04746"></a><span class="lineno"> 4746</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(parse, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(parse));</div><div class="line"><a name="l04747"></a><span class="lineno"> 4747</span>&#160;</div><div class="line"><a name="l04748"></a><span class="lineno"> 4748</span>&#160;            <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(args, parse);</div><div class="line"><a name="l04749"></a><span class="lineno"> 4749</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Will conf %s match %s?\n&quot;</span>, confno, args.confno);</div><div class="line"><a name="l04750"></a><span class="lineno"> 4750</span>&#160;            <span class="keywordflow">if</span> (!strcasecmp(args.confno, confno)) {</div><div class="line"><a name="l04751"></a><span class="lineno"> 4751</span>&#160;               <span class="comment">/* Bingo it&#39;s a valid conference */</span></div><div class="line"><a name="l04752"></a><span class="lineno"> 4752</span>&#160;               cnf = <a class="code" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a>(args.confno,</div><div class="line"><a name="l04753"></a><span class="lineno"> 4753</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(args.pin, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l04754"></a><span class="lineno"> 4754</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a>(args.pinadmin, <span class="stringliteral">&quot;&quot;</span>),</div><div class="line"><a name="l04755"></a><span class="lineno"> 4755</span>&#160;                     make, dynamic, refcount, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04756"></a><span class="lineno"> 4756</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l04757"></a><span class="lineno"> 4757</span>&#160;            }</div><div class="line"><a name="l04758"></a><span class="lineno"> 4758</span>&#160;         }</div><div class="line"><a name="l04759"></a><span class="lineno"> 4759</span>&#160;         <span class="keywordflow">if</span> (!var) {</div><div class="line"><a name="l04760"></a><span class="lineno"> 4760</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;%s isn&#39;t a valid conference\n&quot;</span>, confno);</div><div class="line"><a name="l04761"></a><span class="lineno"> 4761</span>&#160;         }</div><div class="line"><a name="l04762"></a><span class="lineno"> 4762</span>&#160;         <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l04763"></a><span class="lineno"> 4763</span>&#160;      }</div><div class="line"><a name="l04764"></a><span class="lineno"> 4764</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (dynamic_pin) {</div><div class="line"><a name="l04765"></a><span class="lineno"> 4765</span>&#160;      <span class="comment">/* Correct for the user selecting &#39;D&#39; instead of &#39;d&#39; to have</span></div><div class="line"><a name="l04766"></a><span class="lineno"> 4766</span>&#160;<span class="comment">         someone join into a conference that has already been created</span></div><div class="line"><a name="l04767"></a><span class="lineno"> 4767</span>&#160;<span class="comment">         with a pin. */</span></div><div class="line"><a name="l04768"></a><span class="lineno"> 4768</span>&#160;      <span class="keywordflow">if</span> (dynamic_pin[0] == <span class="charliteral">&#39;q&#39;</span>) {</div><div class="line"><a name="l04769"></a><span class="lineno"> 4769</span>&#160;         dynamic_pin[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l04770"></a><span class="lineno"> 4770</span>&#160;      }</div><div class="line"><a name="l04771"></a><span class="lineno"> 4771</span>&#160;   }</div><div class="line"><a name="l04772"></a><span class="lineno"> 4772</span>&#160;</div><div class="line"><a name="l04773"></a><span class="lineno"> 4773</span>&#160;   <span class="keywordflow">if</span> (cnf) {</div><div class="line"><a name="l04774"></a><span class="lineno"> 4774</span>&#160;      <span class="keywordflow">if</span> (confflags &amp;&amp; !cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a> &amp;&amp;</div><div class="line"><a name="l04775"></a><span class="lineno"> 4775</span>&#160;          !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>) &amp;&amp;</div><div class="line"><a name="l04776"></a><span class="lineno"> 4776</span>&#160;          <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a>  | <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>)) {</div><div class="line"><a name="l04777"></a><span class="lineno"> 4777</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No DAHDI channel available for conference, user introduction disabled (is chan_dahdi loaded?)\n&quot;</span>);</div><div class="line"><a name="l04778"></a><span class="lineno"> 4778</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a32495ee3248a37ac92279090110f6fbf">ast_clear_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a>);</div><div class="line"><a name="l04779"></a><span class="lineno"> 4779</span>&#160;      }</div><div class="line"><a name="l04780"></a><span class="lineno"> 4780</span>&#160;</div><div class="line"><a name="l04781"></a><span class="lineno"> 4781</span>&#160;      <span class="keywordflow">if</span> (confflags &amp;&amp; !cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">chan</a> &amp;&amp;</div><div class="line"><a name="l04782"></a><span class="lineno"> 4782</span>&#160;          <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a>)) {</div><div class="line"><a name="l04783"></a><span class="lineno"> 4783</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No DAHDI channel available for conference, conference recording disabled (is chan_dahdi loaded?)\n&quot;</span>);</div><div class="line"><a name="l04784"></a><span class="lineno"> 4784</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#a32495ee3248a37ac92279090110f6fbf">ast_clear_flag64</a>(confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a>);</div><div class="line"><a name="l04785"></a><span class="lineno"> 4785</span>&#160;      }</div><div class="line"><a name="l04786"></a><span class="lineno"> 4786</span>&#160;   }</div><div class="line"><a name="l04787"></a><span class="lineno"> 4787</span>&#160;</div><div class="line"><a name="l04788"></a><span class="lineno"> 4788</span>&#160;   <span class="keywordflow">return</span> cnf;</div><div class="line"><a name="l04789"></a><span class="lineno"> 4789</span>&#160;}</div><div class="line"><a name="l04790"></a><span class="lineno"> 4790</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04791"></a><span class="lineno"> 4791</span>&#160;<span class="comment">/*! \brief The MeetmeCount application */</span></div><div class="line"><a name="l04792"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a29a5ba76eaa83896c95fd3921bfcc379"> 4792</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a29a5ba76eaa83896c95fd3921bfcc379">count_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l04793"></a><span class="lineno"> 4793</span>&#160;{</div><div class="line"><a name="l04794"></a><span class="lineno"> 4794</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l04795"></a><span class="lineno"> 4795</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>;</div><div class="line"><a name="l04796"></a><span class="lineno"> 4796</span>&#160;   <span class="keywordtype">int</span> count;</div><div class="line"><a name="l04797"></a><span class="lineno"> 4797</span>&#160;   <span class="keywordtype">char</span> *localdata;</div><div class="line"><a name="l04798"></a><span class="lineno"> 4798</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d5/d85/structval.html">val</a>[80] = <span class="stringliteral">&quot;0&quot;</span>;</div><div class="line"><a name="l04799"></a><span class="lineno"> 4799</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(args,</div><div class="line"><a name="l04800"></a><span class="lineno"> 4800</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l04801"></a><span class="lineno"> 4801</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(varname);</div><div class="line"><a name="l04802"></a><span class="lineno"> 4802</span>&#160;   );</div><div class="line"><a name="l04803"></a><span class="lineno"> 4803</span>&#160;</div><div class="line"><a name="l04804"></a><span class="lineno"> 4804</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l04805"></a><span class="lineno"> 4805</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;MeetMeCount requires an argument (conference number)\n&quot;</span>);</div><div class="line"><a name="l04806"></a><span class="lineno"> 4806</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l04807"></a><span class="lineno"> 4807</span>&#160;   }</div><div class="line"><a name="l04808"></a><span class="lineno"> 4808</span>&#160;</div><div class="line"><a name="l04809"></a><span class="lineno"> 4809</span>&#160;   localdata = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l04810"></a><span class="lineno"> 4810</span>&#160;</div><div class="line"><a name="l04811"></a><span class="lineno"> 4811</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(args, localdata);</div><div class="line"><a name="l04812"></a><span class="lineno"> 4812</span>&#160;</div><div class="line"><a name="l04813"></a><span class="lineno"> 4813</span>&#160;   conf = <a class="code" href="../../df/d44/app__meetme_8c.html#a1a950620127847d30c0eee380b956fa7">find_conf</a>(chan, args.confno, 0, 0, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0, 1, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l04814"></a><span class="lineno"> 4814</span>&#160;</div><div class="line"><a name="l04815"></a><span class="lineno"> 4815</span>&#160;   <span class="keywordflow">if</span> (conf) {</div><div class="line"><a name="l04816"></a><span class="lineno"> 4816</span>&#160;      count = conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>;</div><div class="line"><a name="l04817"></a><span class="lineno"> 4817</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a>(conf);</div><div class="line"><a name="l04818"></a><span class="lineno"> 4818</span>&#160;      conf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04819"></a><span class="lineno"> 4819</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l04820"></a><span class="lineno"> 4820</span>&#160;      count = 0;</div><div class="line"><a name="l04821"></a><span class="lineno"> 4821</span>&#160;</div><div class="line"><a name="l04822"></a><span class="lineno"> 4822</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args.varname)) {</div><div class="line"><a name="l04823"></a><span class="lineno"> 4823</span>&#160;      <span class="comment">/* have var so load it and exit */</span></div><div class="line"><a name="l04824"></a><span class="lineno"> 4824</span>&#160;      snprintf(val, <span class="keyword">sizeof</span>(val), <span class="stringliteral">&quot;%d&quot;</span>, count);</div><div class="line"><a name="l04825"></a><span class="lineno"> 4825</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, args.varname, val);</div><div class="line"><a name="l04826"></a><span class="lineno"> 4826</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04827"></a><span class="lineno"> 4827</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>) {</div><div class="line"><a name="l04828"></a><span class="lineno"> 4828</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l04829"></a><span class="lineno"> 4829</span>&#160;      }</div><div class="line"><a name="l04830"></a><span class="lineno"> 4830</span>&#160;      res = <a class="code" href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a>(chan, count, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan), (<span class="keywordtype">char</span> *) <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>); <span class="comment">/* Needs gender */</span></div><div class="line"><a name="l04831"></a><span class="lineno"> 4831</span>&#160;   }</div><div class="line"><a name="l04832"></a><span class="lineno"> 4832</span>&#160;</div><div class="line"><a name="l04833"></a><span class="lineno"> 4833</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l04834"></a><span class="lineno"> 4834</span>&#160;}</div><div class="line"><a name="l04835"></a><span class="lineno"> 4835</span>&#160;<span class="comment"></span></div><div class="line"><a name="l04836"></a><span class="lineno"> 4836</span>&#160;<span class="comment">/*! \brief The meetme() application */</span></div><div class="line"><a name="l04837"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#acf06d30da1983dcdfcd1a32ddff7b5f9"> 4837</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#acf06d30da1983dcdfcd1a32ddff7b5f9">conf_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l04838"></a><span class="lineno"> 4838</span>&#160;{</div><div class="line"><a name="l04839"></a><span class="lineno"> 4839</span>&#160;   <span class="keywordtype">int</span> res = -1;</div><div class="line"><a name="l04840"></a><span class="lineno"> 4840</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>[<a class="code" href="../../df/d44/app__meetme_8c.html#aa062a857f2cbc03c82512074e6c68afd">MAX_CONFNUM</a>] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04841"></a><span class="lineno"> 4841</span>&#160;   <span class="keywordtype">int</span> allowretry = 0;</div><div class="line"><a name="l04842"></a><span class="lineno"> 4842</span>&#160;   <span class="keywordtype">int</span> retrycnt = 0;</div><div class="line"><a name="l04843"></a><span class="lineno"> 4843</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04844"></a><span class="lineno"> 4844</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> confflags = {0};</div><div class="line"><a name="l04845"></a><span class="lineno"> 4845</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { 0 };</div><div class="line"><a name="l04846"></a><span class="lineno"> 4846</span>&#160;   <span class="keywordtype">int</span> dynamic = 0;</div><div class="line"><a name="l04847"></a><span class="lineno"> 4847</span>&#160;   <span class="keywordtype">int</span> empty = 0, empty_no_pin = 0;</div><div class="line"><a name="l04848"></a><span class="lineno"> 4848</span>&#160;   <span class="keywordtype">int</span> always_prompt = 0;</div><div class="line"><a name="l04849"></a><span class="lineno"> 4849</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *notdata;</div><div class="line"><a name="l04850"></a><span class="lineno"> 4850</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">info</a>, the_pin[<a class="code" href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a>] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04851"></a><span class="lineno"> 4851</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(args,</div><div class="line"><a name="l04852"></a><span class="lineno"> 4852</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(confno);</div><div class="line"><a name="l04853"></a><span class="lineno"> 4853</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l04854"></a><span class="lineno"> 4854</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(pin);</div><div class="line"><a name="l04855"></a><span class="lineno"> 4855</span>&#160;   );</div><div class="line"><a name="l04856"></a><span class="lineno"> 4856</span>&#160;   <span class="keywordtype">char</span> *optargs[<a class="code" href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eaec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a>] = { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, };</div><div class="line"><a name="l04857"></a><span class="lineno"> 4857</span>&#160;</div><div class="line"><a name="l04858"></a><span class="lineno"> 4858</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l04859"></a><span class="lineno"> 4859</span>&#160;      allowretry = 1;</div><div class="line"><a name="l04860"></a><span class="lineno"> 4860</span>&#160;      notdata = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l04861"></a><span class="lineno"> 4861</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l04862"></a><span class="lineno"> 4862</span>&#160;      notdata = data;</div><div class="line"><a name="l04863"></a><span class="lineno"> 4863</span>&#160;   }</div><div class="line"><a name="l04864"></a><span class="lineno"> 4864</span>&#160;</div><div class="line"><a name="l04865"></a><span class="lineno"> 4865</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a>(chan) != <a class="code" href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a>)</div><div class="line"><a name="l04866"></a><span class="lineno"> 4866</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l04867"></a><span class="lineno"> 4867</span>&#160;</div><div class="line"><a name="l04868"></a><span class="lineno"> 4868</span>&#160;   info = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(notdata);</div><div class="line"><a name="l04869"></a><span class="lineno"> 4869</span>&#160;</div><div class="line"><a name="l04870"></a><span class="lineno"> 4870</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(args, info);</div><div class="line"><a name="l04871"></a><span class="lineno"> 4871</span>&#160;</div><div class="line"><a name="l04872"></a><span class="lineno"> 4872</span>&#160;   <span class="keywordflow">if</span> (args.confno) {</div><div class="line"><a name="l04873"></a><span class="lineno"> 4873</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(confno, args.confno, <span class="keyword">sizeof</span>(confno));</div><div class="line"><a name="l04874"></a><span class="lineno"> 4874</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(confno)) {</div><div class="line"><a name="l04875"></a><span class="lineno"> 4875</span>&#160;         allowretry = 1;</div><div class="line"><a name="l04876"></a><span class="lineno"> 4876</span>&#160;      }</div><div class="line"><a name="l04877"></a><span class="lineno"> 4877</span>&#160;   }</div><div class="line"><a name="l04878"></a><span class="lineno"> 4878</span>&#160;</div><div class="line"><a name="l04879"></a><span class="lineno"> 4879</span>&#160;   <span class="keywordflow">if</span> (args.pin)</div><div class="line"><a name="l04880"></a><span class="lineno"> 4880</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(the_pin, args.pin, <span class="keyword">sizeof</span>(the_pin));</div><div class="line"><a name="l04881"></a><span class="lineno"> 4881</span>&#160;</div><div class="line"><a name="l04882"></a><span class="lineno"> 4882</span>&#160;   <span class="keywordflow">if</span> (args.options) {</div><div class="line"><a name="l04883"></a><span class="lineno"> 4883</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af85cb9dfd2fea9cfe820d2323c7dd471">ast_app_parse_options64</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a1df808b41e9d1fa7679196ce8293c33b">meetme_opts</a>, &amp;confflags, optargs, args.options);</div><div class="line"><a name="l04884"></a><span class="lineno"> 4884</span>&#160;      dynamic = <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae83ea6d46f620c57461a6df40e7b321c">CONFFLAG_DYNAMIC</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a85da35a1f1708d3792f40ddfdde12919">CONFFLAG_DYNAMICPIN</a>);</div><div class="line"><a name="l04885"></a><span class="lineno"> 4885</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a85da35a1f1708d3792f40ddfdde12919">CONFFLAG_DYNAMICPIN</a>) &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args.pin))</div><div class="line"><a name="l04886"></a><span class="lineno"> 4886</span>&#160;         strcpy(the_pin, <span class="stringliteral">&quot;q&quot;</span>);</div><div class="line"><a name="l04887"></a><span class="lineno"> 4887</span>&#160;</div><div class="line"><a name="l04888"></a><span class="lineno"> 4888</span>&#160;      empty = <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a829c143c29ff7d7c84cf2a4b6a86cfe9">CONFFLAG_EMPTY</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae572ce074f616f8c0d48ce7a7b4d7546">CONFFLAG_EMPTYNOPIN</a>);</div><div class="line"><a name="l04889"></a><span class="lineno"> 4889</span>&#160;      empty_no_pin = <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae572ce074f616f8c0d48ce7a7b4d7546">CONFFLAG_EMPTYNOPIN</a>);</div><div class="line"><a name="l04890"></a><span class="lineno"> 4890</span>&#160;      always_prompt = <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a403c4698d20d41dffb30064fdd738c09">CONFFLAG_ALWAYSPROMPT</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a85da35a1f1708d3792f40ddfdde12919">CONFFLAG_DYNAMICPIN</a>);</div><div class="line"><a name="l04891"></a><span class="lineno"> 4891</span>&#160;   }</div><div class="line"><a name="l04892"></a><span class="lineno"> 4892</span>&#160;</div><div class="line"><a name="l04893"></a><span class="lineno"> 4893</span>&#160;   <span class="keywordflow">do</span> {</div><div class="line"><a name="l04894"></a><span class="lineno"> 4894</span>&#160;      <span class="keywordflow">if</span> (retrycnt &gt; 3)</div><div class="line"><a name="l04895"></a><span class="lineno"> 4895</span>&#160;         allowretry = 0;</div><div class="line"><a name="l04896"></a><span class="lineno"> 4896</span>&#160;      <span class="keywordflow">if</span> (empty) {</div><div class="line"><a name="l04897"></a><span class="lineno"> 4897</span>&#160;         <span class="keywordtype">int</span> i;</div><div class="line"><a name="l04898"></a><span class="lineno"> 4898</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l04899"></a><span class="lineno"> 4899</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l04900"></a><span class="lineno"> 4900</span>&#160;         <span class="keywordtype">int</span> confno_int;</div><div class="line"><a name="l04901"></a><span class="lineno"> 4901</span>&#160;</div><div class="line"><a name="l04902"></a><span class="lineno"> 4902</span>&#160;         <span class="comment">/* We only need to load the config file for static and empty_no_pin (otherwise we don&#39;t care) */</span></div><div class="line"><a name="l04903"></a><span class="lineno"> 4903</span>&#160;         <span class="keywordflow">if</span> ((empty_no_pin) || (!dynamic)) {</div><div class="line"><a name="l04904"></a><span class="lineno"> 4904</span>&#160;            cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62921b92fa4fb37f1e3a5d4c644fc1d8">CONFIG_FILE_NAME</a>, config_flags);</div><div class="line"><a name="l04905"></a><span class="lineno"> 4905</span>&#160;            <span class="keywordflow">if</span> (cfg &amp;&amp; cfg != <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l04906"></a><span class="lineno"> 4906</span>&#160;               var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, <span class="stringliteral">&quot;rooms&quot;</span>);</div><div class="line"><a name="l04907"></a><span class="lineno"> 4907</span>&#160;               <span class="keywordflow">while</span> (var) {</div><div class="line"><a name="l04908"></a><span class="lineno"> 4908</span>&#160;                  <span class="keywordtype">char</span> <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>[<a class="code" href="../../df/d44/app__meetme_8c.html#afad3aadf1645aabf53eea7d30a839411">MAX_SETTINGS</a>], *stringp = <a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>, *confno_tmp;</div><div class="line"><a name="l04909"></a><span class="lineno"> 4909</span>&#160;                  <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;conf&quot;</span>)) {</div><div class="line"><a name="l04910"></a><span class="lineno"> 4910</span>&#160;                     <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l04911"></a><span class="lineno"> 4911</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(parse, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="keyword">sizeof</span>(parse));</div><div class="line"><a name="l04912"></a><span class="lineno"> 4912</span>&#160;                     confno_tmp = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;stringp, <span class="stringliteral">&quot;|,&quot;</span>);</div><div class="line"><a name="l04913"></a><span class="lineno"> 4913</span>&#160;                     <span class="keywordflow">if</span> (!dynamic) {</div><div class="line"><a name="l04914"></a><span class="lineno"> 4914</span>&#160;                        <span class="comment">/* For static:  run through the list and see if this conference is empty */</span></div><div class="line"><a name="l04915"></a><span class="lineno"> 4915</span>&#160;                        <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04916"></a><span class="lineno"> 4916</span>&#160;                        <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, list) {</div><div class="line"><a name="l04917"></a><span class="lineno"> 4917</span>&#160;                           <span class="keywordflow">if</span> (!strcmp(confno_tmp, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>)) {</div><div class="line"><a name="l04918"></a><span class="lineno"> 4918</span>&#160;                              <span class="comment">/* The conference exists, therefore it&#39;s not empty */</span></div><div class="line"><a name="l04919"></a><span class="lineno"> 4919</span>&#160;                              found = 1;</div><div class="line"><a name="l04920"></a><span class="lineno"> 4920</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l04921"></a><span class="lineno"> 4921</span>&#160;                           }</div><div class="line"><a name="l04922"></a><span class="lineno"> 4922</span>&#160;                        }</div><div class="line"><a name="l04923"></a><span class="lineno"> 4923</span>&#160;                        <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04924"></a><span class="lineno"> 4924</span>&#160;                        cnf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l04925"></a><span class="lineno"> 4925</span>&#160;                        <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l04926"></a><span class="lineno"> 4926</span>&#160;                           <span class="comment">/* At this point, we have a confno_tmp (static conference) that is empty */</span></div><div class="line"><a name="l04927"></a><span class="lineno"> 4927</span>&#160;                           <span class="keywordflow">if</span> ((empty_no_pin &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(stringp)) || (!empty_no_pin)) {</div><div class="line"><a name="l04928"></a><span class="lineno"> 4928</span>&#160;                              <span class="comment">/* Case 1:  empty_no_pin and pin is nonexistent (NULL)</span></div><div class="line"><a name="l04929"></a><span class="lineno"> 4929</span>&#160;<span class="comment">                               * Case 2:  empty_no_pin and pin is blank (but not NULL)</span></div><div class="line"><a name="l04930"></a><span class="lineno"> 4930</span>&#160;<span class="comment">                               * Case 3:  not empty_no_pin</span></div><div class="line"><a name="l04931"></a><span class="lineno"> 4931</span>&#160;<span class="comment">                               */</span></div><div class="line"><a name="l04932"></a><span class="lineno"> 4932</span>&#160;                              <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(confno, confno_tmp, <span class="keyword">sizeof</span>(confno));</div><div class="line"><a name="l04933"></a><span class="lineno"> 4933</span>&#160;                              <span class="keywordflow">break</span>;</div><div class="line"><a name="l04934"></a><span class="lineno"> 4934</span>&#160;                           }</div><div class="line"><a name="l04935"></a><span class="lineno"> 4935</span>&#160;                        }</div><div class="line"><a name="l04936"></a><span class="lineno"> 4936</span>&#160;                     }</div><div class="line"><a name="l04937"></a><span class="lineno"> 4937</span>&#160;                  }</div><div class="line"><a name="l04938"></a><span class="lineno"> 4938</span>&#160;                  var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>;</div><div class="line"><a name="l04939"></a><span class="lineno"> 4939</span>&#160;               }</div><div class="line"><a name="l04940"></a><span class="lineno"> 4940</span>&#160;               <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l04941"></a><span class="lineno"> 4941</span>&#160;            }</div><div class="line"><a name="l04942"></a><span class="lineno"> 4942</span>&#160;</div><div class="line"><a name="l04943"></a><span class="lineno"> 4943</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(confno) &amp;&amp; (cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a29ff8cd717c0c0bac60abbd827fec409">ast_load_realtime_multientry</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno LIKE&quot;</span>, <span class="stringliteral">&quot;%&quot;</span>, <a class="code" href="../../d4/dd1/compiler_8h.html#af2af475b85aef66019c417d8ded1c435">SENTINEL</a>))) {</div><div class="line"><a name="l04944"></a><span class="lineno"> 4944</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">char</span> *catg;</div><div class="line"><a name="l04945"></a><span class="lineno"> 4945</span>&#160;               <span class="keywordflow">for</span> (catg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>); catg; catg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, catg)) {</div><div class="line"><a name="l04946"></a><span class="lineno"> 4946</span>&#160;                  <span class="keyword">const</span> <span class="keywordtype">char</span> *confno_tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;confno&quot;</span>);</div><div class="line"><a name="l04947"></a><span class="lineno"> 4947</span>&#160;                  <span class="keyword">const</span> <span class="keywordtype">char</span> *pin_tmp = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, catg, <span class="stringliteral">&quot;pin&quot;</span>);</div><div class="line"><a name="l04948"></a><span class="lineno"> 4948</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(confno_tmp)) {</div><div class="line"><a name="l04949"></a><span class="lineno"> 4949</span>&#160;                     <span class="keywordflow">continue</span>;</div><div class="line"><a name="l04950"></a><span class="lineno"> 4950</span>&#160;                  }</div><div class="line"><a name="l04951"></a><span class="lineno"> 4951</span>&#160;                  <span class="keywordflow">if</span> (!dynamic) {</div><div class="line"><a name="l04952"></a><span class="lineno"> 4952</span>&#160;                     <span class="keywordtype">int</span> found = 0;</div><div class="line"><a name="l04953"></a><span class="lineno"> 4953</span>&#160;                     <span class="comment">/* For static:  run through the list and see if this conference is empty */</span></div><div class="line"><a name="l04954"></a><span class="lineno"> 4954</span>&#160;                     <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04955"></a><span class="lineno"> 4955</span>&#160;                     <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, list) {</div><div class="line"><a name="l04956"></a><span class="lineno"> 4956</span>&#160;                        <span class="keywordflow">if</span> (!strcmp(confno_tmp, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>)) {</div><div class="line"><a name="l04957"></a><span class="lineno"> 4957</span>&#160;                           <span class="comment">/* The conference exists, therefore it&#39;s not empty */</span></div><div class="line"><a name="l04958"></a><span class="lineno"> 4958</span>&#160;                           found = 1;</div><div class="line"><a name="l04959"></a><span class="lineno"> 4959</span>&#160;                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l04960"></a><span class="lineno"> 4960</span>&#160;                        }</div><div class="line"><a name="l04961"></a><span class="lineno"> 4961</span>&#160;                     }</div><div class="line"><a name="l04962"></a><span class="lineno"> 4962</span>&#160;                     <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04963"></a><span class="lineno"> 4963</span>&#160;                     <span class="keywordflow">if</span> (!found) {</div><div class="line"><a name="l04964"></a><span class="lineno"> 4964</span>&#160;                        <span class="comment">/* At this point, we have a confno_tmp (realtime conference) that is empty */</span></div><div class="line"><a name="l04965"></a><span class="lineno"> 4965</span>&#160;                        <span class="keywordflow">if</span> ((empty_no_pin &amp;&amp; <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(pin_tmp)) || (!empty_no_pin)) {</div><div class="line"><a name="l04966"></a><span class="lineno"> 4966</span>&#160;                           <span class="comment">/* Case 1:  empty_no_pin and pin is nonexistent (NULL)</span></div><div class="line"><a name="l04967"></a><span class="lineno"> 4967</span>&#160;<span class="comment">                            * Case 2:  empty_no_pin and pin is blank (but not NULL)</span></div><div class="line"><a name="l04968"></a><span class="lineno"> 4968</span>&#160;<span class="comment">                            * Case 3:  not empty_no_pin</span></div><div class="line"><a name="l04969"></a><span class="lineno"> 4969</span>&#160;<span class="comment">                            */</span></div><div class="line"><a name="l04970"></a><span class="lineno"> 4970</span>&#160;                           <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(confno, confno_tmp, <span class="keyword">sizeof</span>(confno));</div><div class="line"><a name="l04971"></a><span class="lineno"> 4971</span>&#160;                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l04972"></a><span class="lineno"> 4972</span>&#160;                        }</div><div class="line"><a name="l04973"></a><span class="lineno"> 4973</span>&#160;                     }</div><div class="line"><a name="l04974"></a><span class="lineno"> 4974</span>&#160;                  }</div><div class="line"><a name="l04975"></a><span class="lineno"> 4975</span>&#160;               }</div><div class="line"><a name="l04976"></a><span class="lineno"> 4976</span>&#160;               <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l04977"></a><span class="lineno"> 4977</span>&#160;            }</div><div class="line"><a name="l04978"></a><span class="lineno"> 4978</span>&#160;         }</div><div class="line"><a name="l04979"></a><span class="lineno"> 4979</span>&#160;</div><div class="line"><a name="l04980"></a><span class="lineno"> 4980</span>&#160;         <span class="comment">/* Select first conference number not in use */</span></div><div class="line"><a name="l04981"></a><span class="lineno"> 4981</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(confno) &amp;&amp; dynamic) {</div><div class="line"><a name="l04982"></a><span class="lineno"> 4982</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04983"></a><span class="lineno"> 4983</span>&#160;            <span class="keywordflow">for</span> (i = 0; i &lt; <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(conf_map); i++) {</div><div class="line"><a name="l04984"></a><span class="lineno"> 4984</span>&#160;               <span class="keywordflow">if</span> (!conf_map[i]) {</div><div class="line"><a name="l04985"></a><span class="lineno"> 4985</span>&#160;                  snprintf(confno, <span class="keyword">sizeof</span>(confno), <span class="stringliteral">&quot;%d&quot;</span>, i);</div><div class="line"><a name="l04986"></a><span class="lineno"> 4986</span>&#160;                  conf_map[i] = 1;</div><div class="line"><a name="l04987"></a><span class="lineno"> 4987</span>&#160;                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l04988"></a><span class="lineno"> 4988</span>&#160;               }</div><div class="line"><a name="l04989"></a><span class="lineno"> 4989</span>&#160;            }</div><div class="line"><a name="l04990"></a><span class="lineno"> 4990</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l04991"></a><span class="lineno"> 4991</span>&#160;         }</div><div class="line"><a name="l04992"></a><span class="lineno"> 4992</span>&#160;</div><div class="line"><a name="l04993"></a><span class="lineno"> 4993</span>&#160;         <span class="comment">/* Not found? */</span></div><div class="line"><a name="l04994"></a><span class="lineno"> 4994</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(confno)) {</div><div class="line"><a name="l04995"></a><span class="lineno"> 4995</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-noempty&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l04996"></a><span class="lineno"> 4996</span>&#160;            <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;PLAYBACK&quot;</span>, <span class="stringliteral">&quot;Message: conf-noempty&quot;</span>);</div><div class="line"><a name="l04997"></a><span class="lineno"> 4997</span>&#160;            <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l04998"></a><span class="lineno"> 4998</span>&#160;               <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l04999"></a><span class="lineno"> 4999</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05000"></a><span class="lineno"> 5000</span>&#160;            <span class="keywordflow">if</span> (sscanf(confno, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;confno_int) == 1) {</div><div class="line"><a name="l05001"></a><span class="lineno"> 5001</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a>)) {</div><div class="line"><a name="l05002"></a><span class="lineno"> 5002</span>&#160;                  res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-enteringno&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l05003"></a><span class="lineno"> 5003</span>&#160;                  <span class="keywordflow">if</span> (!res) {</div><div class="line"><a name="l05004"></a><span class="lineno"> 5004</span>&#160;                     <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l05005"></a><span class="lineno"> 5005</span>&#160;                     res = <a class="code" href="../../db/dce/say_8h.html#a7cf9dcf6ae6fcedb7752d0deac683b3b">ast_say_digits</a>(chan, confno_int, <span class="stringliteral">&quot;&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l05006"></a><span class="lineno"> 5006</span>&#160;                  }</div><div class="line"><a name="l05007"></a><span class="lineno"> 5007</span>&#160;               }</div><div class="line"><a name="l05008"></a><span class="lineno"> 5008</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05009"></a><span class="lineno"> 5009</span>&#160;               <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not scan confno &#39;%s&#39;\n&quot;</span>, confno);</div><div class="line"><a name="l05010"></a><span class="lineno"> 5010</span>&#160;            }</div><div class="line"><a name="l05011"></a><span class="lineno"> 5011</span>&#160;         }</div><div class="line"><a name="l05012"></a><span class="lineno"> 5012</span>&#160;      }</div><div class="line"><a name="l05013"></a><span class="lineno"> 5013</span>&#160;</div><div class="line"><a name="l05014"></a><span class="lineno"> 5014</span>&#160;      <span class="keywordflow">while</span> (allowretry &amp;&amp; (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(confno)) &amp;&amp; (++retrycnt &lt; 4)) {</div><div class="line"><a name="l05015"></a><span class="lineno"> 5015</span>&#160;         <span class="comment">/* Prompt user for conference number */</span></div><div class="line"><a name="l05016"></a><span class="lineno"> 5016</span>&#160;         res = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af3f76858d4dd513e59dbe5e67bc46220">ast_app_getdata</a>(chan, <span class="stringliteral">&quot;conf-getconfno&quot;</span>, confno, <span class="keyword">sizeof</span>(confno) - 1, 0);</div><div class="line"><a name="l05017"></a><span class="lineno"> 5017</span>&#160;         <span class="keywordflow">if</span> (res &lt; 0) {</div><div class="line"><a name="l05018"></a><span class="lineno"> 5018</span>&#160;            <span class="comment">/* Don&#39;t try to validate when we catch an error */</span></div><div class="line"><a name="l05019"></a><span class="lineno"> 5019</span>&#160;            confno[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05020"></a><span class="lineno"> 5020</span>&#160;            allowretry = 0;</div><div class="line"><a name="l05021"></a><span class="lineno"> 5021</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l05022"></a><span class="lineno"> 5022</span>&#160;         }</div><div class="line"><a name="l05023"></a><span class="lineno"> 5023</span>&#160;      }</div><div class="line"><a name="l05024"></a><span class="lineno"> 5024</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(confno)) {</div><div class="line"><a name="l05025"></a><span class="lineno"> 5025</span>&#160;         <span class="comment">/* Check the validity of the conference */</span></div><div class="line"><a name="l05026"></a><span class="lineno"> 5026</span>&#160;         cnf = <a class="code" href="../../df/d44/app__meetme_8c.html#a1a950620127847d30c0eee380b956fa7">find_conf</a>(chan, confno, 1, dynamic, the_pin,</div><div class="line"><a name="l05027"></a><span class="lineno"> 5027</span>&#160;            <span class="keyword">sizeof</span>(the_pin), 1, &amp;confflags);</div><div class="line"><a name="l05028"></a><span class="lineno"> 5028</span>&#160;         <span class="keywordflow">if</span> (!cnf) {</div><div class="line"><a name="l05029"></a><span class="lineno"> 5029</span>&#160;            <span class="keywordtype">int</span> too_early = 0;</div><div class="line"><a name="l05030"></a><span class="lineno"> 5030</span>&#160;</div><div class="line"><a name="l05031"></a><span class="lineno"> 5031</span>&#160;            cnf = <a class="code" href="../../df/d44/app__meetme_8c.html#ad03ae059013a251d0b5ef753e0da893b">find_conf_realtime</a>(chan, confno, 1, dynamic,</div><div class="line"><a name="l05032"></a><span class="lineno"> 5032</span>&#160;               the_pin, <span class="keyword">sizeof</span>(the_pin), 1, &amp;confflags, &amp;too_early, optargs);</div><div class="line"><a name="l05033"></a><span class="lineno"> 5033</span>&#160;            <span class="keywordflow">if</span> (rt_schedule &amp;&amp; too_early)</div><div class="line"><a name="l05034"></a><span class="lineno"> 5034</span>&#160;               allowretry = 0;</div><div class="line"><a name="l05035"></a><span class="lineno"> 5035</span>&#160;         }</div><div class="line"><a name="l05036"></a><span class="lineno"> 5036</span>&#160;</div><div class="line"><a name="l05037"></a><span class="lineno"> 5037</span>&#160;         <span class="keywordflow">if</span> (!cnf) {</div><div class="line"><a name="l05038"></a><span class="lineno"> 5038</span>&#160;            <span class="keywordflow">if</span> (allowretry) {</div><div class="line"><a name="l05039"></a><span class="lineno"> 5039</span>&#160;               confno[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05040"></a><span class="lineno"> 5040</span>&#160;               res = <a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-invalid&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan));</div><div class="line"><a name="l05041"></a><span class="lineno"> 5041</span>&#160;               <span class="keywordflow">if</span> (!res)</div><div class="line"><a name="l05042"></a><span class="lineno"> 5042</span>&#160;                  <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l05043"></a><span class="lineno"> 5043</span>&#160;               res = -1;</div><div class="line"><a name="l05044"></a><span class="lineno"> 5044</span>&#160;            }</div><div class="line"><a name="l05045"></a><span class="lineno"> 5045</span>&#160;         } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05046"></a><span class="lineno"> 5046</span>&#160;            <span class="comment">/* Conference requires a pin for specified access level */</span></div><div class="line"><a name="l05047"></a><span class="lineno"> 5047</span>&#160;            <span class="keywordtype">int</span> req_pin = !<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad3479638ded235d29e4bbba475abe931">pin</a>) ||</div><div class="line"><a name="l05048"></a><span class="lineno"> 5048</span>&#160;               (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>) &amp;&amp;</div><div class="line"><a name="l05049"></a><span class="lineno"> 5049</span>&#160;                  <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>));</div><div class="line"><a name="l05050"></a><span class="lineno"> 5050</span>&#160;            <span class="comment">/* The following logic was derived from a</span></div><div class="line"><a name="l05051"></a><span class="lineno"> 5051</span>&#160;<span class="comment">             * 4 variable truth table and defines which</span></div><div class="line"><a name="l05052"></a><span class="lineno"> 5052</span>&#160;<span class="comment">             * circumstances are not exempt from pin</span></div><div class="line"><a name="l05053"></a><span class="lineno"> 5053</span>&#160;<span class="comment">             * checking.</span></div><div class="line"><a name="l05054"></a><span class="lineno"> 5054</span>&#160;<span class="comment">             * If this needs to be modified, write the</span></div><div class="line"><a name="l05055"></a><span class="lineno"> 5055</span>&#160;<span class="comment">             * truth table back out from the boolean</span></div><div class="line"><a name="l05056"></a><span class="lineno"> 5056</span>&#160;<span class="comment">             * expression AB+A&#39;D+C&#39;, change the erroneous</span></div><div class="line"><a name="l05057"></a><span class="lineno"> 5057</span>&#160;<span class="comment">             * result, and rederive the expression.</span></div><div class="line"><a name="l05058"></a><span class="lineno"> 5058</span>&#160;<span class="comment">             * Variables:</span></div><div class="line"><a name="l05059"></a><span class="lineno"> 5059</span>&#160;<span class="comment">             *  A: pin provided?</span></div><div class="line"><a name="l05060"></a><span class="lineno"> 5060</span>&#160;<span class="comment">             *  B: always prompt?</span></div><div class="line"><a name="l05061"></a><span class="lineno"> 5061</span>&#160;<span class="comment">             *  C: dynamic?</span></div><div class="line"><a name="l05062"></a><span class="lineno"> 5062</span>&#160;<span class="comment">             *  D: has users? */</span></div><div class="line"><a name="l05063"></a><span class="lineno"> 5063</span>&#160;            <span class="keywordtype">int</span> not_exempt = !cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">isdynamic</a>;</div><div class="line"><a name="l05064"></a><span class="lineno"> 5064</span>&#160;            not_exempt = not_exempt || (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args.pin) &amp;&amp; <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a403c4698d20d41dffb30064fdd738c09">CONFFLAG_ALWAYSPROMPT</a>));</div><div class="line"><a name="l05065"></a><span class="lineno"> 5065</span>&#160;            not_exempt = not_exempt || (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args.pin) &amp;&amp; cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>);</div><div class="line"><a name="l05066"></a><span class="lineno"> 5066</span>&#160;            <span class="keywordflow">if</span> (req_pin &amp;&amp; not_exempt) {</div><div class="line"><a name="l05067"></a><span class="lineno"> 5067</span>&#160;               <span class="keywordtype">char</span> pin[<a class="code" href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a>] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l05068"></a><span class="lineno"> 5068</span>&#160;               <span class="keywordtype">int</span> j;</div><div class="line"><a name="l05069"></a><span class="lineno"> 5069</span>&#160;</div><div class="line"><a name="l05070"></a><span class="lineno"> 5070</span>&#160;               <span class="comment">/* Allow the pin to be retried up to 3 times */</span></div><div class="line"><a name="l05071"></a><span class="lineno"> 5071</span>&#160;               <span class="keywordflow">for</span> (j = 0; j &lt; 3; j++) {</div><div class="line"><a name="l05072"></a><span class="lineno"> 5072</span>&#160;                  <span class="keywordflow">if</span> (*the_pin &amp;&amp; (always_prompt == 0)) {</div><div class="line"><a name="l05073"></a><span class="lineno"> 5073</span>&#160;                     <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(pin, the_pin, <span class="keyword">sizeof</span>(pin));</div><div class="line"><a name="l05074"></a><span class="lineno"> 5074</span>&#160;                     res = 0;</div><div class="line"><a name="l05075"></a><span class="lineno"> 5075</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05076"></a><span class="lineno"> 5076</span>&#160;                     <span class="comment">/* Prompt user for pin if pin is required */</span></div><div class="line"><a name="l05077"></a><span class="lineno"> 5077</span>&#160;                     <a class="code" href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a>(<span class="stringliteral">&quot;PLAYBACK&quot;</span>, <span class="stringliteral">&quot;Message: conf-getpin\r\n&quot;</span></div><div class="line"><a name="l05078"></a><span class="lineno"> 5078</span>&#160;                        <span class="stringliteral">&quot;Channel: %s&quot;</span>,</div><div class="line"><a name="l05079"></a><span class="lineno"> 5079</span>&#160;                        <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(chan));</div><div class="line"><a name="l05080"></a><span class="lineno"> 5080</span>&#160;                     res = <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af3f76858d4dd513e59dbe5e67bc46220">ast_app_getdata</a>(chan, <span class="stringliteral">&quot;conf-getpin&quot;</span>, pin + strlen(pin), <span class="keyword">sizeof</span>(pin) - 1 - strlen(pin), 0);</div><div class="line"><a name="l05081"></a><span class="lineno"> 5081</span>&#160;                  }</div><div class="line"><a name="l05082"></a><span class="lineno"> 5082</span>&#160;                  <span class="keywordflow">if</span> (res &gt;= 0) {</div><div class="line"><a name="l05083"></a><span class="lineno"> 5083</span>&#160;                     <span class="keywordflow">if</span> ((!strcasecmp(pin, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad3479638ded235d29e4bbba475abe931">pin</a>) &amp;&amp;</div><div class="line"><a name="l05084"></a><span class="lineno"> 5084</span>&#160;                          (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>) ||</div><div class="line"><a name="l05085"></a><span class="lineno"> 5085</span>&#160;                           !<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;confflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>))) ||</div><div class="line"><a name="l05086"></a><span class="lineno"> 5086</span>&#160;                          (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>) &amp;&amp;</div><div class="line"><a name="l05087"></a><span class="lineno"> 5087</span>&#160;                           !strcasecmp(pin, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>))) {</div><div class="line"><a name="l05088"></a><span class="lineno"> 5088</span>&#160;                        <span class="comment">/* Pin correct */</span></div><div class="line"><a name="l05089"></a><span class="lineno"> 5089</span>&#160;                        allowretry = 0;</div><div class="line"><a name="l05090"></a><span class="lineno"> 5090</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>) &amp;&amp; !strcasecmp(pin, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">pinadmin</a>)) {</div><div class="line"><a name="l05091"></a><span class="lineno"> 5091</span>&#160;                           <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa3f2aa238dd1090b0ab5e87b9188f2a">adminopts</a>)) {</div><div class="line"><a name="l05092"></a><span class="lineno"> 5092</span>&#160;                              <span class="keywordtype">char</span> *opts = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa3f2aa238dd1090b0ab5e87b9188f2a">adminopts</a>);</div><div class="line"><a name="l05093"></a><span class="lineno"> 5093</span>&#160;                              <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af85cb9dfd2fea9cfe820d2323c7dd471">ast_app_parse_options64</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a1df808b41e9d1fa7679196ce8293c33b">meetme_opts</a>, &amp;confflags, optargs, opts);</div><div class="line"><a name="l05094"></a><span class="lineno"> 5094</span>&#160;                           }</div><div class="line"><a name="l05095"></a><span class="lineno"> 5095</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05096"></a><span class="lineno"> 5096</span>&#160;                           <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a925d07390890a216d14e47a42b59eb05">useropts</a>)) {</div><div class="line"><a name="l05097"></a><span class="lineno"> 5097</span>&#160;                              <span class="keywordtype">char</span> *opts = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a925d07390890a216d14e47a42b59eb05">useropts</a>);</div><div class="line"><a name="l05098"></a><span class="lineno"> 5098</span>&#160;                              <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af85cb9dfd2fea9cfe820d2323c7dd471">ast_app_parse_options64</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a1df808b41e9d1fa7679196ce8293c33b">meetme_opts</a>, &amp;confflags, optargs, opts);</div><div class="line"><a name="l05099"></a><span class="lineno"> 5099</span>&#160;                           }</div><div class="line"><a name="l05100"></a><span class="lineno"> 5100</span>&#160;                        }</div><div class="line"><a name="l05101"></a><span class="lineno"> 5101</span>&#160;                        <span class="comment">/* Run the conference */</span></div><div class="line"><a name="l05102"></a><span class="lineno"> 5102</span>&#160;                        <a class="code" href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a>(4, <span class="stringliteral">&quot;Starting recording of MeetMe Conference %s into file %s.%s.\n&quot;</span>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>);</div><div class="line"><a name="l05103"></a><span class="lineno"> 5103</span>&#160;                        res = <a class="code" href="../../df/d44/app__meetme_8c.html#a9970b644e96d7aa6caad2001d38eb741">conf_run</a>(chan, cnf, &amp;confflags, optargs);</div><div class="line"><a name="l05104"></a><span class="lineno"> 5104</span>&#160;                        <span class="keywordflow">break</span>;</div><div class="line"><a name="l05105"></a><span class="lineno"> 5105</span>&#160;                     } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05106"></a><span class="lineno"> 5106</span>&#160;                        <span class="comment">/* Pin invalid */</span></div><div class="line"><a name="l05107"></a><span class="lineno"> 5107</span>&#160;                        <span class="keywordflow">if</span> (!<a class="code" href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a>(chan, <span class="stringliteral">&quot;conf-invalidpin&quot;</span>, <a class="code" href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a>(chan))) {</div><div class="line"><a name="l05108"></a><span class="lineno"> 5108</span>&#160;                           res = <a class="code" href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a>(chan, <a class="code" href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a>);</div><div class="line"><a name="l05109"></a><span class="lineno"> 5109</span>&#160;                           <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(chan);</div><div class="line"><a name="l05110"></a><span class="lineno"> 5110</span>&#160;                        } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05111"></a><span class="lineno"> 5111</span>&#160;                           <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Couldn&#39;t play invalid pin msg!\n&quot;</span>);</div><div class="line"><a name="l05112"></a><span class="lineno"> 5112</span>&#160;                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l05113"></a><span class="lineno"> 5113</span>&#160;                        }</div><div class="line"><a name="l05114"></a><span class="lineno"> 5114</span>&#160;                        <span class="keywordflow">if</span> (res &lt; 0)</div><div class="line"><a name="l05115"></a><span class="lineno"> 5115</span>&#160;                           <span class="keywordflow">break</span>;</div><div class="line"><a name="l05116"></a><span class="lineno"> 5116</span>&#160;                        pin[0] = res;</div><div class="line"><a name="l05117"></a><span class="lineno"> 5117</span>&#160;                        pin[1] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05118"></a><span class="lineno"> 5118</span>&#160;                        res = -1;</div><div class="line"><a name="l05119"></a><span class="lineno"> 5119</span>&#160;                        <span class="keywordflow">if</span> (allowretry)</div><div class="line"><a name="l05120"></a><span class="lineno"> 5120</span>&#160;                           confno[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05121"></a><span class="lineno"> 5121</span>&#160;                     }</div><div class="line"><a name="l05122"></a><span class="lineno"> 5122</span>&#160;                  } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05123"></a><span class="lineno"> 5123</span>&#160;                     <span class="comment">/* failed when getting the pin */</span></div><div class="line"><a name="l05124"></a><span class="lineno"> 5124</span>&#160;                     res = -1;</div><div class="line"><a name="l05125"></a><span class="lineno"> 5125</span>&#160;                     allowretry = 0;</div><div class="line"><a name="l05126"></a><span class="lineno"> 5126</span>&#160;                     <span class="comment">/* see if we need to get rid of the conference */</span></div><div class="line"><a name="l05127"></a><span class="lineno"> 5127</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l05128"></a><span class="lineno"> 5128</span>&#160;                  }</div><div class="line"><a name="l05129"></a><span class="lineno"> 5129</span>&#160;</div><div class="line"><a name="l05130"></a><span class="lineno"> 5130</span>&#160;                  <span class="comment">/* Don&#39;t retry pin with a static pin */</span></div><div class="line"><a name="l05131"></a><span class="lineno"> 5131</span>&#160;                  <span class="keywordflow">if</span> (*the_pin &amp;&amp; (always_prompt == 0)) {</div><div class="line"><a name="l05132"></a><span class="lineno"> 5132</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l05133"></a><span class="lineno"> 5133</span>&#160;                  }</div><div class="line"><a name="l05134"></a><span class="lineno"> 5134</span>&#160;               }</div><div class="line"><a name="l05135"></a><span class="lineno"> 5135</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05136"></a><span class="lineno"> 5136</span>&#160;               <span class="comment">/* No pin required */</span></div><div class="line"><a name="l05137"></a><span class="lineno"> 5137</span>&#160;               allowretry = 0;</div><div class="line"><a name="l05138"></a><span class="lineno"> 5138</span>&#160;</div><div class="line"><a name="l05139"></a><span class="lineno"> 5139</span>&#160;               <span class="comment">/* For RealTime conferences without a pin</span></div><div class="line"><a name="l05140"></a><span class="lineno"> 5140</span>&#160;<span class="comment">                * should still support loading options</span></div><div class="line"><a name="l05141"></a><span class="lineno"> 5141</span>&#160;<span class="comment">                */</span></div><div class="line"><a name="l05142"></a><span class="lineno"> 5142</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a925d07390890a216d14e47a42b59eb05">useropts</a>)) {</div><div class="line"><a name="l05143"></a><span class="lineno"> 5143</span>&#160;                  <span class="keywordtype">char</span> *opts = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a925d07390890a216d14e47a42b59eb05">useropts</a>);</div><div class="line"><a name="l05144"></a><span class="lineno"> 5144</span>&#160;                  <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af85cb9dfd2fea9cfe820d2323c7dd471">ast_app_parse_options64</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a1df808b41e9d1fa7679196ce8293c33b">meetme_opts</a>, &amp;confflags, optargs, opts);</div><div class="line"><a name="l05145"></a><span class="lineno"> 5145</span>&#160;               }</div><div class="line"><a name="l05146"></a><span class="lineno"> 5146</span>&#160;</div><div class="line"><a name="l05147"></a><span class="lineno"> 5147</span>&#160;               <span class="comment">/* Run the conference */</span></div><div class="line"><a name="l05148"></a><span class="lineno"> 5148</span>&#160;               res = <a class="code" href="../../df/d44/app__meetme_8c.html#a9970b644e96d7aa6caad2001d38eb741">conf_run</a>(chan, cnf, &amp;confflags, optargs);</div><div class="line"><a name="l05149"></a><span class="lineno"> 5149</span>&#160;            }</div><div class="line"><a name="l05150"></a><span class="lineno"> 5150</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a>(cnf);</div><div class="line"><a name="l05151"></a><span class="lineno"> 5151</span>&#160;            cnf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05152"></a><span class="lineno"> 5152</span>&#160;         }</div><div class="line"><a name="l05153"></a><span class="lineno"> 5153</span>&#160;      }</div><div class="line"><a name="l05154"></a><span class="lineno"> 5154</span>&#160;   } <span class="keywordflow">while</span> (allowretry);</div><div class="line"><a name="l05155"></a><span class="lineno"> 5155</span>&#160;</div><div class="line"><a name="l05156"></a><span class="lineno"> 5156</span>&#160;   <span class="keywordflow">if</span> (cnf)</div><div class="line"><a name="l05157"></a><span class="lineno"> 5157</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a>(cnf);</div><div class="line"><a name="l05158"></a><span class="lineno"> 5158</span>&#160;</div><div class="line"><a name="l05159"></a><span class="lineno"> 5159</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l05160"></a><span class="lineno"> 5160</span>&#160;}</div><div class="line"><a name="l05161"></a><span class="lineno"> 5161</span>&#160;</div><div class="line"><a name="l05162"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a90ac21323abfebfc412d2b141af2a4e5"> 5162</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a90ac21323abfebfc412d2b141af2a4e5">find_user</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>, <span class="keyword">const</span> <span class="keywordtype">char</span> *callerident)</div><div class="line"><a name="l05163"></a><span class="lineno"> 5163</span>&#160;{</div><div class="line"><a name="l05164"></a><span class="lineno"> 5164</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05165"></a><span class="lineno"> 5165</span>&#160;   <span class="keywordtype">int</span> cid;</div><div class="line"><a name="l05166"></a><span class="lineno"> 5166</span>&#160;</div><div class="line"><a name="l05167"></a><span class="lineno"> 5167</span>&#160;   <span class="keywordflow">if</span> (conf &amp;&amp; callerident &amp;&amp; sscanf(callerident, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;cid) == 1) {</div><div class="line"><a name="l05168"></a><span class="lineno"> 5168</span>&#160;      user = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, &amp;cid, 0);</div><div class="line"><a name="l05169"></a><span class="lineno"> 5169</span>&#160;      <span class="comment">/* reference decremented later in admin_exec */</span></div><div class="line"><a name="l05170"></a><span class="lineno"> 5170</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l05171"></a><span class="lineno"> 5171</span>&#160;   }</div><div class="line"><a name="l05172"></a><span class="lineno"> 5172</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05173"></a><span class="lineno"> 5173</span>&#160;}</div><div class="line"><a name="l05174"></a><span class="lineno"> 5174</span>&#160;</div><div class="line"><a name="l05175"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ac4c8be7e6d7c484515691ba11a7bbec2"> 5175</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ac4c8be7e6d7c484515691ba11a7bbec2">user_listen_volup_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *unused, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l05176"></a><span class="lineno"> 5176</span>&#160;{</div><div class="line"><a name="l05177"></a><span class="lineno"> 5177</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l05178"></a><span class="lineno"> 5178</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>);</div><div class="line"><a name="l05179"></a><span class="lineno"> 5179</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05180"></a><span class="lineno"> 5180</span>&#160;}</div><div class="line"><a name="l05181"></a><span class="lineno"> 5181</span>&#160;</div><div class="line"><a name="l05182"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae4e2c320637aac27773615d8f073152a"> 5182</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae4e2c320637aac27773615d8f073152a">user_listen_voldown_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *unused, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l05183"></a><span class="lineno"> 5183</span>&#160;{</div><div class="line"><a name="l05184"></a><span class="lineno"> 5184</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l05185"></a><span class="lineno"> 5185</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a>);</div><div class="line"><a name="l05186"></a><span class="lineno"> 5186</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05187"></a><span class="lineno"> 5187</span>&#160;}</div><div class="line"><a name="l05188"></a><span class="lineno"> 5188</span>&#160;</div><div class="line"><a name="l05189"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af6164d0f0e38dc886e4bce54fd73120f"> 5189</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#af6164d0f0e38dc886e4bce54fd73120f">user_talk_volup_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *unused, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l05190"></a><span class="lineno"> 5190</span>&#160;{</div><div class="line"><a name="l05191"></a><span class="lineno"> 5191</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l05192"></a><span class="lineno"> 5192</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>);</div><div class="line"><a name="l05193"></a><span class="lineno"> 5193</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05194"></a><span class="lineno"> 5194</span>&#160;}</div><div class="line"><a name="l05195"></a><span class="lineno"> 5195</span>&#160;</div><div class="line"><a name="l05196"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ab389de1f76067896d9df449a1c2c5a9f"> 5196</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ab389de1f76067896d9df449a1c2c5a9f">user_talk_voldown_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *unused, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l05197"></a><span class="lineno"> 5197</span>&#160;{</div><div class="line"><a name="l05198"></a><span class="lineno"> 5198</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l05199"></a><span class="lineno"> 5199</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a>);</div><div class="line"><a name="l05200"></a><span class="lineno"> 5200</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05201"></a><span class="lineno"> 5201</span>&#160;}</div><div class="line"><a name="l05202"></a><span class="lineno"> 5202</span>&#160;</div><div class="line"><a name="l05203"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a37d9a05e8d60b5d42e1494d5a246891a"> 5203</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a37d9a05e8d60b5d42e1494d5a246891a">user_reset_vol_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *unused, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l05204"></a><span class="lineno"> 5204</span>&#160;{</div><div class="line"><a name="l05205"></a><span class="lineno"> 5205</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l05206"></a><span class="lineno"> 5206</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a57fc53d582772f2125adafaabe596b01">reset_volumes</a>(user);</div><div class="line"><a name="l05207"></a><span class="lineno"> 5207</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05208"></a><span class="lineno"> 5208</span>&#160;}</div><div class="line"><a name="l05209"></a><span class="lineno"> 5209</span>&#160;</div><div class="line"><a name="l05210"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4ce13be63c079c6ac6c923fc8e34c213"> 5210</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a4ce13be63c079c6ac6c923fc8e34c213">user_chan_cb</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *args, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l05211"></a><span class="lineno"> 5211</span>&#160;{</div><div class="line"><a name="l05212"></a><span class="lineno"> 5212</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = obj;</div><div class="line"><a name="l05213"></a><span class="lineno"> 5213</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d4/d84/structchannel.html">channel</a> = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>;</div><div class="line"><a name="l05214"></a><span class="lineno"> 5214</span>&#160;</div><div class="line"><a name="l05215"></a><span class="lineno"> 5215</span>&#160;   <span class="keywordflow">if</span> (!strcmp(<a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), channel)) {</div><div class="line"><a name="l05216"></a><span class="lineno"> 5216</span>&#160;      <span class="keywordflow">return</span> (<a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a>);</div><div class="line"><a name="l05217"></a><span class="lineno"> 5217</span>&#160;   }</div><div class="line"><a name="l05218"></a><span class="lineno"> 5218</span>&#160;</div><div class="line"><a name="l05219"></a><span class="lineno"> 5219</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05220"></a><span class="lineno"> 5220</span>&#160;}</div><div class="line"><a name="l05221"></a><span class="lineno"> 5221</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05222"></a><span class="lineno"> 5222</span>&#160;<span class="comment">/*! \brief The MeetMeadmin application</span></div><div class="line"><a name="l05223"></a><span class="lineno"> 5223</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05224"></a><span class="lineno"> 5224</span>&#160;<span class="comment">  MeetMeAdmin(confno, command, caller) */</span></div><div class="line"><a name="l05225"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a977a38245885ede0c3accf2f56fc57f8"> 5225</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a977a38245885ede0c3accf2f56fc57f8">admin_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data) {</div><div class="line"><a name="l05226"></a><span class="lineno"> 5226</span>&#160;   <span class="keywordtype">char</span> *params;</div><div class="line"><a name="l05227"></a><span class="lineno"> 5227</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf;</div><div class="line"><a name="l05228"></a><span class="lineno"> 5228</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05229"></a><span class="lineno"> 5229</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(args,</div><div class="line"><a name="l05230"></a><span class="lineno"> 5230</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(confno);</div><div class="line"><a name="l05231"></a><span class="lineno"> 5231</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(command);</div><div class="line"><a name="l05232"></a><span class="lineno"> 5232</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(user);</div><div class="line"><a name="l05233"></a><span class="lineno"> 5233</span>&#160;   );</div><div class="line"><a name="l05234"></a><span class="lineno"> 5234</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l05235"></a><span class="lineno"> 5235</span>&#160;</div><div class="line"><a name="l05236"></a><span class="lineno"> 5236</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l05237"></a><span class="lineno"> 5237</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;MeetMeAdmin requires an argument!\n&quot;</span>);</div><div class="line"><a name="l05238"></a><span class="lineno"> 5238</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MEETMEADMINSTATUS&quot;</span>, <span class="stringliteral">&quot;NOPARSE&quot;</span>);</div><div class="line"><a name="l05239"></a><span class="lineno"> 5239</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05240"></a><span class="lineno"> 5240</span>&#160;   }</div><div class="line"><a name="l05241"></a><span class="lineno"> 5241</span>&#160;</div><div class="line"><a name="l05242"></a><span class="lineno"> 5242</span>&#160;   params = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l05243"></a><span class="lineno"> 5243</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(args, params);</div><div class="line"><a name="l05244"></a><span class="lineno"> 5244</span>&#160;</div><div class="line"><a name="l05245"></a><span class="lineno"> 5245</span>&#160;   <span class="keywordflow">if</span> (!args.command) {</div><div class="line"><a name="l05246"></a><span class="lineno"> 5246</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;MeetmeAdmin requires a command!\n&quot;</span>);</div><div class="line"><a name="l05247"></a><span class="lineno"> 5247</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MEETMEADMINSTATUS&quot;</span>, <span class="stringliteral">&quot;NOPARSE&quot;</span>);</div><div class="line"><a name="l05248"></a><span class="lineno"> 5248</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05249"></a><span class="lineno"> 5249</span>&#160;   }</div><div class="line"><a name="l05250"></a><span class="lineno"> 5250</span>&#160;</div><div class="line"><a name="l05251"></a><span class="lineno"> 5251</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05252"></a><span class="lineno"> 5252</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, <a class="code" href="../../d7/d90/structast__conf__user.html#aef5f3bbe582d34ef6ec2b35f3dabef0b">list</a>) {</div><div class="line"><a name="l05253"></a><span class="lineno"> 5253</span>&#160;      <span class="keywordflow">if</span> (!strcmp(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, args.confno))</div><div class="line"><a name="l05254"></a><span class="lineno"> 5254</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05255"></a><span class="lineno"> 5255</span>&#160;   }</div><div class="line"><a name="l05256"></a><span class="lineno"> 5256</span>&#160;</div><div class="line"><a name="l05257"></a><span class="lineno"> 5257</span>&#160;   <span class="keywordflow">if</span> (!cnf) {</div><div class="line"><a name="l05258"></a><span class="lineno"> 5258</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Conference number &#39;%s&#39; not found!\n&quot;</span>, args.confno);</div><div class="line"><a name="l05259"></a><span class="lineno"> 5259</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05260"></a><span class="lineno"> 5260</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MEETMEADMINSTATUS&quot;</span>, <span class="stringliteral">&quot;NOTFOUND&quot;</span>);</div><div class="line"><a name="l05261"></a><span class="lineno"> 5261</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05262"></a><span class="lineno"> 5262</span>&#160;   }</div><div class="line"><a name="l05263"></a><span class="lineno"> 5263</span>&#160;</div><div class="line"><a name="l05264"></a><span class="lineno"> 5264</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">refcount</a>, 1);</div><div class="line"><a name="l05265"></a><span class="lineno"> 5265</span>&#160;</div><div class="line"><a name="l05266"></a><span class="lineno"> 5266</span>&#160;   <span class="keywordflow">if</span> (args.user) {</div><div class="line"><a name="l05267"></a><span class="lineno"> 5267</span>&#160;      user = <a class="code" href="../../df/d44/app__meetme_8c.html#a90ac21323abfebfc412d2b141af2a4e5">find_user</a>(cnf, args.user);</div><div class="line"><a name="l05268"></a><span class="lineno"> 5268</span>&#160;      <span class="keywordflow">if</span> (!user) {</div><div class="line"><a name="l05269"></a><span class="lineno"> 5269</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Specified User not found!\n&quot;</span>);</div><div class="line"><a name="l05270"></a><span class="lineno"> 5270</span>&#160;         res = -2;</div><div class="line"><a name="l05271"></a><span class="lineno"> 5271</span>&#160;         <span class="keywordflow">goto</span> usernotfound;</div><div class="line"><a name="l05272"></a><span class="lineno"> 5272</span>&#160;      }</div><div class="line"><a name="l05273"></a><span class="lineno"> 5273</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05274"></a><span class="lineno"> 5274</span>&#160;      <span class="comment">/* fail for commands that require a user */</span></div><div class="line"><a name="l05275"></a><span class="lineno"> 5275</span>&#160;      <span class="keywordflow">switch</span> (*args.command) {</div><div class="line"><a name="l05276"></a><span class="lineno"> 5276</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>: <span class="comment">/* Unmute */</span></div><div class="line"><a name="l05277"></a><span class="lineno"> 5277</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;M&#39;</span>: <span class="comment">/* Mute */</span></div><div class="line"><a name="l05278"></a><span class="lineno"> 5278</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>: <span class="comment">/* Lower user&#39;s talk volume */</span></div><div class="line"><a name="l05279"></a><span class="lineno"> 5279</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;T&#39;</span>: <span class="comment">/* Raise user&#39;s talk volume */</span></div><div class="line"><a name="l05280"></a><span class="lineno"> 5280</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>: <span class="comment">/* Lower user&#39;s listen volume */</span></div><div class="line"><a name="l05281"></a><span class="lineno"> 5281</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;U&#39;</span>: <span class="comment">/* Raise user&#39;s listen volume */</span></div><div class="line"><a name="l05282"></a><span class="lineno"> 5282</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>: <span class="comment">/* Reset user&#39;s volume level */</span></div><div class="line"><a name="l05283"></a><span class="lineno"> 5283</span>&#160;      <span class="keywordflow">case</span> <span class="charliteral">&#39;k&#39;</span>: <span class="comment">/* Kick user */</span></div><div class="line"><a name="l05284"></a><span class="lineno"> 5284</span>&#160;         res = -2;</div><div class="line"><a name="l05285"></a><span class="lineno"> 5285</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;No user specified!\n&quot;</span>);</div><div class="line"><a name="l05286"></a><span class="lineno"> 5286</span>&#160;         <span class="keywordflow">goto</span> usernotfound;</div><div class="line"><a name="l05287"></a><span class="lineno"> 5287</span>&#160;      <span class="keywordflow">default</span>:</div><div class="line"><a name="l05288"></a><span class="lineno"> 5288</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05289"></a><span class="lineno"> 5289</span>&#160;      }</div><div class="line"><a name="l05290"></a><span class="lineno"> 5290</span>&#160;   }</div><div class="line"><a name="l05291"></a><span class="lineno"> 5291</span>&#160;</div><div class="line"><a name="l05292"></a><span class="lineno"> 5292</span>&#160;   <span class="keywordflow">switch</span> (*args.command) {</div><div class="line"><a name="l05293"></a><span class="lineno"> 5293</span>&#160;   <span class="keywordflow">case</span> 76: <span class="comment">/* L: Lock */</span></div><div class="line"><a name="l05294"></a><span class="lineno"> 5294</span>&#160;      cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> = 1;</div><div class="line"><a name="l05295"></a><span class="lineno"> 5295</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05296"></a><span class="lineno"> 5296</span>&#160;   <span class="keywordflow">case</span> 108: <span class="comment">/* l: Unlock */</span></div><div class="line"><a name="l05297"></a><span class="lineno"> 5297</span>&#160;      cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> = 0;</div><div class="line"><a name="l05298"></a><span class="lineno"> 5298</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05299"></a><span class="lineno"> 5299</span>&#160;   <span class="keywordflow">case</span> 75: <span class="comment">/* K: kick all users */</span></div><div class="line"><a name="l05300"></a><span class="lineno"> 5300</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a18611e5423481fce6079cfdc9be23859">user_set_kickme_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05301"></a><span class="lineno"> 5301</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05302"></a><span class="lineno"> 5302</span>&#160;   <span class="keywordflow">case</span> 101: <span class="comment">/* e: Eject last user*/</span></div><div class="line"><a name="l05303"></a><span class="lineno"> 5303</span>&#160;   {</div><div class="line"><a name="l05304"></a><span class="lineno"> 5304</span>&#160;      <span class="keywordtype">int</span> max_no = 0;</div><div class="line"><a name="l05305"></a><span class="lineno"> 5305</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *, eject_user, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l05306"></a><span class="lineno"> 5306</span>&#160;</div><div class="line"><a name="l05307"></a><span class="lineno"> 5307</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a289c5ffee97869ba1b70fd91278f2957">user_max_cmp</a>, &amp;max_no);</div><div class="line"><a name="l05308"></a><span class="lineno"> 5308</span>&#160;      eject_user = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, &amp;max_no, 0);</div><div class="line"><a name="l05309"></a><span class="lineno"> 5309</span>&#160;      <span class="keywordflow">if</span> (!eject_user) {</div><div class="line"><a name="l05310"></a><span class="lineno"> 5310</span>&#160;         res = -1;</div><div class="line"><a name="l05311"></a><span class="lineno"> 5311</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;No last user to kick!\n&quot;</span>);</div><div class="line"><a name="l05312"></a><span class="lineno"> 5312</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05313"></a><span class="lineno"> 5313</span>&#160;      }</div><div class="line"><a name="l05314"></a><span class="lineno"> 5314</span>&#160;</div><div class="line"><a name="l05315"></a><span class="lineno"> 5315</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;eject_user-&gt;userflags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>)) {</div><div class="line"><a name="l05316"></a><span class="lineno"> 5316</span>&#160;         eject_user-&gt;adminflags |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14">ADMINFLAG_KICKME</a>;</div><div class="line"><a name="l05317"></a><span class="lineno"> 5317</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05318"></a><span class="lineno"> 5318</span>&#160;         res = -1;</div><div class="line"><a name="l05319"></a><span class="lineno"> 5319</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Not kicking last user, is an Admin!\n&quot;</span>);</div><div class="line"><a name="l05320"></a><span class="lineno"> 5320</span>&#160;      }</div><div class="line"><a name="l05321"></a><span class="lineno"> 5321</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05322"></a><span class="lineno"> 5322</span>&#160;   }</div><div class="line"><a name="l05323"></a><span class="lineno"> 5323</span>&#160;   <span class="keywordflow">case</span> 77: <span class="comment">/* M: Mute */</span></div><div class="line"><a name="l05324"></a><span class="lineno"> 5324</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a>;</div><div class="line"><a name="l05325"></a><span class="lineno"> 5325</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05326"></a><span class="lineno"> 5326</span>&#160;   <span class="keywordflow">case</span> 78: <span class="comment">/* N: Mute all (non-admin) users */</span></div><div class="line"><a name="l05327"></a><span class="lineno"> 5327</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a7c7ed16928ff798a1ad1a2f7eaf0ebe0">user_set_muted_cb</a>, &amp;cnf);</div><div class="line"><a name="l05328"></a><span class="lineno"> 5328</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05329"></a><span class="lineno"> 5329</span>&#160;   <span class="keywordflow">case</span> 109: <span class="comment">/* m: Unmute */</span></div><div class="line"><a name="l05330"></a><span class="lineno"> 5330</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp;= ~(<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a>);</div><div class="line"><a name="l05331"></a><span class="lineno"> 5331</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05332"></a><span class="lineno"> 5332</span>&#160;   <span class="keywordflow">case</span> 110: <span class="comment">/* n: Unmute all users */</span></div><div class="line"><a name="l05333"></a><span class="lineno"> 5333</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#aab43cc97424af77028a4caa8e54d8fc8">user_set_unmuted_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05334"></a><span class="lineno"> 5334</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05335"></a><span class="lineno"> 5335</span>&#160;   <span class="keywordflow">case</span> 107: <span class="comment">/* k: Kick user */</span></div><div class="line"><a name="l05336"></a><span class="lineno"> 5336</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14">ADMINFLAG_KICKME</a>;</div><div class="line"><a name="l05337"></a><span class="lineno"> 5337</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05338"></a><span class="lineno"> 5338</span>&#160;   <span class="keywordflow">case</span> 118: <span class="comment">/* v: Lower all users listen volume */</span></div><div class="line"><a name="l05339"></a><span class="lineno"> 5339</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#ae4e2c320637aac27773615d8f073152a">user_listen_voldown_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05340"></a><span class="lineno"> 5340</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05341"></a><span class="lineno"> 5341</span>&#160;   <span class="keywordflow">case</span> 86: <span class="comment">/* V: Raise all users listen volume */</span></div><div class="line"><a name="l05342"></a><span class="lineno"> 5342</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#ac4c8be7e6d7c484515691ba11a7bbec2">user_listen_volup_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05343"></a><span class="lineno"> 5343</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05344"></a><span class="lineno"> 5344</span>&#160;   <span class="keywordflow">case</span> 115: <span class="comment">/* s: Lower all users speaking volume */</span></div><div class="line"><a name="l05345"></a><span class="lineno"> 5345</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#ab389de1f76067896d9df449a1c2c5a9f">user_talk_voldown_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05346"></a><span class="lineno"> 5346</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05347"></a><span class="lineno"> 5347</span>&#160;   <span class="keywordflow">case</span> 83: <span class="comment">/* S: Raise all users speaking volume */</span></div><div class="line"><a name="l05348"></a><span class="lineno"> 5348</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#af6164d0f0e38dc886e4bce54fd73120f">user_talk_volup_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05349"></a><span class="lineno"> 5349</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05350"></a><span class="lineno"> 5350</span>&#160;   <span class="keywordflow">case</span> 82: <span class="comment">/* R: Reset all volume levels */</span></div><div class="line"><a name="l05351"></a><span class="lineno"> 5351</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a37d9a05e8d60b5d42e1494d5a246891a">user_reset_vol_cb</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05352"></a><span class="lineno"> 5352</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05353"></a><span class="lineno"> 5353</span>&#160;   <span class="keywordflow">case</span> 114: <span class="comment">/* r: Reset user&#39;s volume level */</span></div><div class="line"><a name="l05354"></a><span class="lineno"> 5354</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a57fc53d582772f2125adafaabe596b01">reset_volumes</a>(user);</div><div class="line"><a name="l05355"></a><span class="lineno"> 5355</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05356"></a><span class="lineno"> 5356</span>&#160;   <span class="keywordflow">case</span> 85: <span class="comment">/* U: Raise user&#39;s listen volume */</span></div><div class="line"><a name="l05357"></a><span class="lineno"> 5357</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>);</div><div class="line"><a name="l05358"></a><span class="lineno"> 5358</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05359"></a><span class="lineno"> 5359</span>&#160;   <span class="keywordflow">case</span> 117: <span class="comment">/* u: Lower user&#39;s listen volume */</span></div><div class="line"><a name="l05360"></a><span class="lineno"> 5360</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a>);</div><div class="line"><a name="l05361"></a><span class="lineno"> 5361</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05362"></a><span class="lineno"> 5362</span>&#160;   <span class="keywordflow">case</span> 84: <span class="comment">/* T: Raise user&#39;s talk volume */</span></div><div class="line"><a name="l05363"></a><span class="lineno"> 5363</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a>);</div><div class="line"><a name="l05364"></a><span class="lineno"> 5364</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05365"></a><span class="lineno"> 5365</span>&#160;   <span class="keywordflow">case</span> 116: <span class="comment">/* t: Lower user&#39;s talk volume */</span></div><div class="line"><a name="l05366"></a><span class="lineno"> 5366</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a>(user, <a class="code" href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a>);</div><div class="line"><a name="l05367"></a><span class="lineno"> 5367</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05368"></a><span class="lineno"> 5368</span>&#160;   <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>: <span class="comment">/* E: Extend conference */</span></div><div class="line"><a name="l05369"></a><span class="lineno"> 5369</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a30a63a191f0d3fafcea99e759e0c46a5">rt_extend_conf</a>(args.confno)) {</div><div class="line"><a name="l05370"></a><span class="lineno"> 5370</span>&#160;         res = -1;</div><div class="line"><a name="l05371"></a><span class="lineno"> 5371</span>&#160;      }</div><div class="line"><a name="l05372"></a><span class="lineno"> 5372</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05373"></a><span class="lineno"> 5373</span>&#160;   }</div><div class="line"><a name="l05374"></a><span class="lineno"> 5374</span>&#160;</div><div class="line"><a name="l05375"></a><span class="lineno"> 5375</span>&#160;   <span class="keywordflow">if</span> (args.user) {</div><div class="line"><a name="l05376"></a><span class="lineno"> 5376</span>&#160;      <span class="comment">/* decrement reference from find_user */</span></div><div class="line"><a name="l05377"></a><span class="lineno"> 5377</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, -1);</div><div class="line"><a name="l05378"></a><span class="lineno"> 5378</span>&#160;   }</div><div class="line"><a name="l05379"></a><span class="lineno"> 5379</span>&#160;usernotfound:</div><div class="line"><a name="l05380"></a><span class="lineno"> 5380</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05381"></a><span class="lineno"> 5381</span>&#160;</div><div class="line"><a name="l05382"></a><span class="lineno"> 5382</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a>(cnf);</div><div class="line"><a name="l05383"></a><span class="lineno"> 5383</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;MEETMEADMINSTATUS&quot;</span>, res == -2 ? <span class="stringliteral">&quot;NOTFOUND&quot;</span> : res ? <span class="stringliteral">&quot;FAILED&quot;</span> : <span class="stringliteral">&quot;OK&quot;</span>);</div><div class="line"><a name="l05384"></a><span class="lineno"> 5384</span>&#160;</div><div class="line"><a name="l05385"></a><span class="lineno"> 5385</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05386"></a><span class="lineno"> 5386</span>&#160;}</div><div class="line"><a name="l05387"></a><span class="lineno"> 5387</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05388"></a><span class="lineno"> 5388</span>&#160;<span class="comment">/*! \brief The MeetMeChannelAdmin application</span></div><div class="line"><a name="l05389"></a><span class="lineno"> 5389</span>&#160;<span class="comment">   MeetMeChannelAdmin(channel, command) */</span></div><div class="line"><a name="l05390"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a850bf7360efcdaa168bcb5f190580a42"> 5390</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a850bf7360efcdaa168bcb5f190580a42">channel_admin_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data) {</div><div class="line"><a name="l05391"></a><span class="lineno"> 5391</span>&#160;   <span class="keywordtype">char</span> *params;</div><div class="line"><a name="l05392"></a><span class="lineno"> 5392</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05393"></a><span class="lineno"> 5393</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../d8/dbc/structuser.html">user</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05394"></a><span class="lineno"> 5394</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(args,</div><div class="line"><a name="l05395"></a><span class="lineno"> 5395</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d84/structchannel.html">channel</a>);</div><div class="line"><a name="l05396"></a><span class="lineno"> 5396</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(command);</div><div class="line"><a name="l05397"></a><span class="lineno"> 5397</span>&#160;   );</div><div class="line"><a name="l05398"></a><span class="lineno"> 5398</span>&#160;</div><div class="line"><a name="l05399"></a><span class="lineno"> 5399</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l05400"></a><span class="lineno"> 5400</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;MeetMeChannelAdmin requires two arguments!\n&quot;</span>);</div><div class="line"><a name="l05401"></a><span class="lineno"> 5401</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05402"></a><span class="lineno"> 5402</span>&#160;   }</div><div class="line"><a name="l05403"></a><span class="lineno"> 5403</span>&#160;</div><div class="line"><a name="l05404"></a><span class="lineno"> 5404</span>&#160;   params = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l05405"></a><span class="lineno"> 5405</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(args, params);</div><div class="line"><a name="l05406"></a><span class="lineno"> 5406</span>&#160;</div><div class="line"><a name="l05407"></a><span class="lineno"> 5407</span>&#160;   <span class="keywordflow">if</span> (!args.channel) {</div><div class="line"><a name="l05408"></a><span class="lineno"> 5408</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;MeetMeChannelAdmin requires a channel name!\n&quot;</span>);</div><div class="line"><a name="l05409"></a><span class="lineno"> 5409</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05410"></a><span class="lineno"> 5410</span>&#160;   }</div><div class="line"><a name="l05411"></a><span class="lineno"> 5411</span>&#160;</div><div class="line"><a name="l05412"></a><span class="lineno"> 5412</span>&#160;   <span class="keywordflow">if</span> (!args.command) {</div><div class="line"><a name="l05413"></a><span class="lineno"> 5413</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;MeetMeChannelAdmin requires a command!\n&quot;</span>);</div><div class="line"><a name="l05414"></a><span class="lineno"> 5414</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l05415"></a><span class="lineno"> 5415</span>&#160;   }</div><div class="line"><a name="l05416"></a><span class="lineno"> 5416</span>&#160;</div><div class="line"><a name="l05417"></a><span class="lineno"> 5417</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05418"></a><span class="lineno"> 5418</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, conf, <a class="code" href="../../d7/d90/structast__conf__user.html#aef5f3bbe582d34ef6ec2b35f3dabef0b">list</a>) {</div><div class="line"><a name="l05419"></a><span class="lineno"> 5419</span>&#160;      <span class="keywordflow">if</span> ((user = <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, 0, <a class="code" href="../../df/d44/app__meetme_8c.html#a4ce13be63c079c6ac6c923fc8e34c213">user_chan_cb</a>, args.channel))) {</div><div class="line"><a name="l05420"></a><span class="lineno"> 5420</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05421"></a><span class="lineno"> 5421</span>&#160;      }</div><div class="line"><a name="l05422"></a><span class="lineno"> 5422</span>&#160;   }</div><div class="line"><a name="l05423"></a><span class="lineno"> 5423</span>&#160;</div><div class="line"><a name="l05424"></a><span class="lineno"> 5424</span>&#160;   <span class="keywordflow">if</span> (!user) {</div><div class="line"><a name="l05425"></a><span class="lineno"> 5425</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Specified user (%s) not found\n&quot;</span>, args.channel);</div><div class="line"><a name="l05426"></a><span class="lineno"> 5426</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05427"></a><span class="lineno"> 5427</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05428"></a><span class="lineno"> 5428</span>&#160;   }</div><div class="line"><a name="l05429"></a><span class="lineno"> 5429</span>&#160;</div><div class="line"><a name="l05430"></a><span class="lineno"> 5430</span>&#160;   <span class="comment">/* perform the specified action */</span></div><div class="line"><a name="l05431"></a><span class="lineno"> 5431</span>&#160;   <span class="keywordflow">switch</span> (*args.command) {</div><div class="line"><a name="l05432"></a><span class="lineno"> 5432</span>&#160;      <span class="keywordflow">case</span> 77: <span class="comment">/* M: Mute */</span></div><div class="line"><a name="l05433"></a><span class="lineno"> 5433</span>&#160;         user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a>;</div><div class="line"><a name="l05434"></a><span class="lineno"> 5434</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05435"></a><span class="lineno"> 5435</span>&#160;      <span class="keywordflow">case</span> 109: <span class="comment">/* m: Unmute */</span></div><div class="line"><a name="l05436"></a><span class="lineno"> 5436</span>&#160;         user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp;= ~<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a>;</div><div class="line"><a name="l05437"></a><span class="lineno"> 5437</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05438"></a><span class="lineno"> 5438</span>&#160;      <span class="keywordflow">case</span> 107: <span class="comment">/* k: Kick user */</span></div><div class="line"><a name="l05439"></a><span class="lineno"> 5439</span>&#160;         user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14">ADMINFLAG_KICKME</a>;</div><div class="line"><a name="l05440"></a><span class="lineno"> 5440</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05441"></a><span class="lineno"> 5441</span>&#160;      <span class="keywordflow">default</span>: <span class="comment">/* unknown command */</span></div><div class="line"><a name="l05442"></a><span class="lineno"> 5442</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Unknown MeetMeChannelAdmin command &#39;%s&#39;\n&quot;</span>, args.command);</div><div class="line"><a name="l05443"></a><span class="lineno"> 5443</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05444"></a><span class="lineno"> 5444</span>&#160;   }</div><div class="line"><a name="l05445"></a><span class="lineno"> 5445</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, -1);</div><div class="line"><a name="l05446"></a><span class="lineno"> 5446</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05447"></a><span class="lineno"> 5447</span>&#160;</div><div class="line"><a name="l05448"></a><span class="lineno"> 5448</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05449"></a><span class="lineno"> 5449</span>&#160;}</div><div class="line"><a name="l05450"></a><span class="lineno"> 5450</span>&#160;</div><div class="line"><a name="l05451"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a66909c89e7858db0fae73a31805a8d1a"> 5451</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a66909c89e7858db0fae73a31805a8d1a">meetmemute</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m, <span class="keywordtype">int</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a>)</div><div class="line"><a name="l05452"></a><span class="lineno"> 5452</span>&#160;{</div><div class="line"><a name="l05453"></a><span class="lineno"> 5453</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>;</div><div class="line"><a name="l05454"></a><span class="lineno"> 5454</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l05455"></a><span class="lineno"> 5455</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *confid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Meetme&quot;</span>);</div><div class="line"><a name="l05456"></a><span class="lineno"> 5456</span>&#160;   <span class="keywordtype">char</span> *userid = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(<a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Usernum&quot;</span>));</div><div class="line"><a name="l05457"></a><span class="lineno"> 5457</span>&#160;   <span class="keywordtype">int</span> userno;</div><div class="line"><a name="l05458"></a><span class="lineno"> 5458</span>&#160;</div><div class="line"><a name="l05459"></a><span class="lineno"> 5459</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(confid)) {</div><div class="line"><a name="l05460"></a><span class="lineno"> 5460</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Meetme conference not specified&quot;</span>);</div><div class="line"><a name="l05461"></a><span class="lineno"> 5461</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05462"></a><span class="lineno"> 5462</span>&#160;   }</div><div class="line"><a name="l05463"></a><span class="lineno"> 5463</span>&#160;</div><div class="line"><a name="l05464"></a><span class="lineno"> 5464</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(userid)) {</div><div class="line"><a name="l05465"></a><span class="lineno"> 5465</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Meetme user number not specified&quot;</span>);</div><div class="line"><a name="l05466"></a><span class="lineno"> 5466</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05467"></a><span class="lineno"> 5467</span>&#160;   }</div><div class="line"><a name="l05468"></a><span class="lineno"> 5468</span>&#160;</div><div class="line"><a name="l05469"></a><span class="lineno"> 5469</span>&#160;   userno = strtoul(userid, &amp;userid, 10);</div><div class="line"><a name="l05470"></a><span class="lineno"> 5470</span>&#160;</div><div class="line"><a name="l05471"></a><span class="lineno"> 5471</span>&#160;   <span class="keywordflow">if</span> (*userid) {</div><div class="line"><a name="l05472"></a><span class="lineno"> 5472</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Invalid user number&quot;</span>);</div><div class="line"><a name="l05473"></a><span class="lineno"> 5473</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05474"></a><span class="lineno"> 5474</span>&#160;   }</div><div class="line"><a name="l05475"></a><span class="lineno"> 5475</span>&#160;</div><div class="line"><a name="l05476"></a><span class="lineno"> 5476</span>&#160;   <span class="comment">/* Look in the conference list */</span></div><div class="line"><a name="l05477"></a><span class="lineno"> 5477</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05478"></a><span class="lineno"> 5478</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, conf, <a class="code" href="../../d7/d90/structast__conf__user.html#aef5f3bbe582d34ef6ec2b35f3dabef0b">list</a>) {</div><div class="line"><a name="l05479"></a><span class="lineno"> 5479</span>&#160;      <span class="keywordflow">if</span> (!strcmp(confid, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>))</div><div class="line"><a name="l05480"></a><span class="lineno"> 5480</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05481"></a><span class="lineno"> 5481</span>&#160;   }</div><div class="line"><a name="l05482"></a><span class="lineno"> 5482</span>&#160;</div><div class="line"><a name="l05483"></a><span class="lineno"> 5483</span>&#160;   <span class="keywordflow">if</span> (!conf) {</div><div class="line"><a name="l05484"></a><span class="lineno"> 5484</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05485"></a><span class="lineno"> 5485</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;Meetme conference does not exist&quot;</span>);</div><div class="line"><a name="l05486"></a><span class="lineno"> 5486</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05487"></a><span class="lineno"> 5487</span>&#160;   }</div><div class="line"><a name="l05488"></a><span class="lineno"> 5488</span>&#160;</div><div class="line"><a name="l05489"></a><span class="lineno"> 5489</span>&#160;   user = <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, &amp;userno, 0);</div><div class="line"><a name="l05490"></a><span class="lineno"> 5490</span>&#160;</div><div class="line"><a name="l05491"></a><span class="lineno"> 5491</span>&#160;   <span class="keywordflow">if</span> (!user) {</div><div class="line"><a name="l05492"></a><span class="lineno"> 5492</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05493"></a><span class="lineno"> 5493</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;User number not found&quot;</span>);</div><div class="line"><a name="l05494"></a><span class="lineno"> 5494</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05495"></a><span class="lineno"> 5495</span>&#160;   }</div><div class="line"><a name="l05496"></a><span class="lineno"> 5496</span>&#160;</div><div class="line"><a name="l05497"></a><span class="lineno"> 5497</span>&#160;   <span class="keywordflow">if</span> (mute)</div><div class="line"><a name="l05498"></a><span class="lineno"> 5498</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> |= <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a>;   <span class="comment">/* request user muting */</span></div><div class="line"><a name="l05499"></a><span class="lineno"> 5499</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l05500"></a><span class="lineno"> 5500</span>&#160;      user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp;= ~(<a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a>); <span class="comment">/* request user unmuting */</span></div><div class="line"><a name="l05501"></a><span class="lineno"> 5501</span>&#160;</div><div class="line"><a name="l05502"></a><span class="lineno"> 5502</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05503"></a><span class="lineno"> 5503</span>&#160;</div><div class="line"><a name="l05504"></a><span class="lineno"> 5504</span>&#160;   <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Requested to %smute conf %s user %d userchan %s uniqueid %s\n&quot;</span>, mute ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;un&quot;</span>, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>), <a class="code" href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l05505"></a><span class="lineno"> 5505</span>&#160;</div><div class="line"><a name="l05506"></a><span class="lineno"> 5506</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, -1);</div><div class="line"><a name="l05507"></a><span class="lineno"> 5507</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a>(s, m, mute ? <span class="stringliteral">&quot;User muted&quot;</span> : <span class="stringliteral">&quot;User unmuted&quot;</span>);</div><div class="line"><a name="l05508"></a><span class="lineno"> 5508</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05509"></a><span class="lineno"> 5509</span>&#160;}</div><div class="line"><a name="l05510"></a><span class="lineno"> 5510</span>&#160;</div><div class="line"><a name="l05511"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aa469d77d3fee8f11b2d48740365fd0d5"> 5511</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aa469d77d3fee8f11b2d48740365fd0d5">action_meetmemute</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l05512"></a><span class="lineno"> 5512</span>&#160;{</div><div class="line"><a name="l05513"></a><span class="lineno"> 5513</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a66909c89e7858db0fae73a31805a8d1a">meetmemute</a>(s, m, 1);</div><div class="line"><a name="l05514"></a><span class="lineno"> 5514</span>&#160;}</div><div class="line"><a name="l05515"></a><span class="lineno"> 5515</span>&#160;</div><div class="line"><a name="l05516"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a04a4ee089b212107b1e33943ce45fb3e"> 5516</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a04a4ee089b212107b1e33943ce45fb3e">action_meetmeunmute</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l05517"></a><span class="lineno"> 5517</span>&#160;{</div><div class="line"><a name="l05518"></a><span class="lineno"> 5518</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a66909c89e7858db0fae73a31805a8d1a">meetmemute</a>(s, m, 0);</div><div class="line"><a name="l05519"></a><span class="lineno"> 5519</span>&#160;}</div><div class="line"><a name="l05520"></a><span class="lineno"> 5520</span>&#160;</div><div class="line"><a name="l05521"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a94e294b5969cdd4c4fb0802b9e6728a4"> 5521</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a94e294b5969cdd4c4fb0802b9e6728a4">action_meetmelist</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l05522"></a><span class="lineno"> 5522</span>&#160;{</div><div class="line"><a name="l05523"></a><span class="lineno"> 5523</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actionid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l05524"></a><span class="lineno"> 5524</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *conference = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;Conference&quot;</span>);</div><div class="line"><a name="l05525"></a><span class="lineno"> 5525</span>&#160;   <span class="keywordtype">char</span> idText[80] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l05526"></a><span class="lineno"> 5526</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf;</div><div class="line"><a name="l05527"></a><span class="lineno"> 5527</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d7/d90/structast__conf__user.html">ast_conf_user</a> *<a class="code" href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a>;</div><div class="line"><a name="l05528"></a><span class="lineno"> 5528</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> user_iter;</div><div class="line"><a name="l05529"></a><span class="lineno"> 5529</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a> = 0;</div><div class="line"><a name="l05530"></a><span class="lineno"> 5530</span>&#160;</div><div class="line"><a name="l05531"></a><span class="lineno"> 5531</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(actionid))</div><div class="line"><a name="l05532"></a><span class="lineno"> 5532</span>&#160;      snprintf(idText, <span class="keyword">sizeof</span>(idText), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, actionid);</div><div class="line"><a name="l05533"></a><span class="lineno"> 5533</span>&#160;</div><div class="line"><a name="l05534"></a><span class="lineno"> 5534</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>)) {</div><div class="line"><a name="l05535"></a><span class="lineno"> 5535</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l05536"></a><span class="lineno"> 5536</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05537"></a><span class="lineno"> 5537</span>&#160;   }</div><div class="line"><a name="l05538"></a><span class="lineno"> 5538</span>&#160;</div><div class="line"><a name="l05539"></a><span class="lineno"> 5539</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a>(s, m, <span class="stringliteral">&quot;Meetme user list will follow&quot;</span>, <span class="stringliteral">&quot;start&quot;</span>);</div><div class="line"><a name="l05540"></a><span class="lineno"> 5540</span>&#160;</div><div class="line"><a name="l05541"></a><span class="lineno"> 5541</span>&#160;   <span class="comment">/* Find the right conference */</span></div><div class="line"><a name="l05542"></a><span class="lineno"> 5542</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05543"></a><span class="lineno"> 5543</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, list) {</div><div class="line"><a name="l05544"></a><span class="lineno"> 5544</span>&#160;      <span class="comment">/* If we ask for one particular, and this isn&#39;t it, skip it */</span></div><div class="line"><a name="l05545"></a><span class="lineno"> 5545</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(conference) &amp;&amp; strcmp(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>, conference))</div><div class="line"><a name="l05546"></a><span class="lineno"> 5546</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l05547"></a><span class="lineno"> 5547</span>&#160;</div><div class="line"><a name="l05548"></a><span class="lineno"> 5548</span>&#160;      <span class="comment">/* Show all the users */</span></div><div class="line"><a name="l05549"></a><span class="lineno"> 5549</span>&#160;      user_iter = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">usercontainer</a>, 0);</div><div class="line"><a name="l05550"></a><span class="lineno"> 5550</span>&#160;      <span class="keywordflow">while</span> ((user = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;user_iter))) {</div><div class="line"><a name="l05551"></a><span class="lineno"> 5551</span>&#160;         total++;</div><div class="line"><a name="l05552"></a><span class="lineno"> 5552</span>&#160;         <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s,</div><div class="line"><a name="l05553"></a><span class="lineno"> 5553</span>&#160;            <span class="stringliteral">&quot;Event: MeetmeList\r\n&quot;</span></div><div class="line"><a name="l05554"></a><span class="lineno"> 5554</span>&#160;            <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l05555"></a><span class="lineno"> 5555</span>&#160;            <span class="stringliteral">&quot;Conference: %s\r\n&quot;</span></div><div class="line"><a name="l05556"></a><span class="lineno"> 5556</span>&#160;            <span class="stringliteral">&quot;UserNumber: %d\r\n&quot;</span></div><div class="line"><a name="l05557"></a><span class="lineno"> 5557</span>&#160;            <span class="stringliteral">&quot;CallerIDNum: %s\r\n&quot;</span></div><div class="line"><a name="l05558"></a><span class="lineno"> 5558</span>&#160;            <span class="stringliteral">&quot;CallerIDName: %s\r\n&quot;</span></div><div class="line"><a name="l05559"></a><span class="lineno"> 5559</span>&#160;            <span class="stringliteral">&quot;ConnectedLineNum: %s\r\n&quot;</span></div><div class="line"><a name="l05560"></a><span class="lineno"> 5560</span>&#160;            <span class="stringliteral">&quot;ConnectedLineName: %s\r\n&quot;</span></div><div class="line"><a name="l05561"></a><span class="lineno"> 5561</span>&#160;            <span class="stringliteral">&quot;Channel: %s\r\n&quot;</span></div><div class="line"><a name="l05562"></a><span class="lineno"> 5562</span>&#160;            <span class="stringliteral">&quot;Admin: %s\r\n&quot;</span></div><div class="line"><a name="l05563"></a><span class="lineno"> 5563</span>&#160;            <span class="stringliteral">&quot;Role: %s\r\n&quot;</span></div><div class="line"><a name="l05564"></a><span class="lineno"> 5564</span>&#160;            <span class="stringliteral">&quot;MarkedUser: %s\r\n&quot;</span></div><div class="line"><a name="l05565"></a><span class="lineno"> 5565</span>&#160;            <span class="stringliteral">&quot;Muted: %s\r\n&quot;</span></div><div class="line"><a name="l05566"></a><span class="lineno"> 5566</span>&#160;            <span class="stringliteral">&quot;Talking: %s\r\n&quot;</span></div><div class="line"><a name="l05567"></a><span class="lineno"> 5567</span>&#160;            <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l05568"></a><span class="lineno"> 5568</span>&#160;            idText,</div><div class="line"><a name="l05569"></a><span class="lineno"> 5569</span>&#160;            cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>,</div><div class="line"><a name="l05570"></a><span class="lineno"> 5570</span>&#160;            user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">user_no</a>,</div><div class="line"><a name="l05571"></a><span class="lineno"> 5571</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>),</div><div class="line"><a name="l05572"></a><span class="lineno"> 5572</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&lt;no name&gt;&quot;</span>),</div><div class="line"><a name="l05573"></a><span class="lineno"> 5573</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">number</a>.<a class="code" href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&lt;unknown&gt;&quot;</span>),</div><div class="line"><a name="l05574"></a><span class="lineno"> 5574</span>&#160;            <a class="code" href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a>(<a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">valid</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)-&gt;<a class="code" href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">id</a>.<a class="code" href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">name</a>.<a class="code" href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">str</a>, <span class="stringliteral">&quot;&lt;no name&gt;&quot;</span>),</div><div class="line"><a name="l05575"></a><span class="lineno"> 5575</span>&#160;            <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">chan</a>),</div><div class="line"><a name="l05576"></a><span class="lineno"> 5576</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a>) ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>,</div><div class="line"><a name="l05577"></a><span class="lineno"> 5577</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a>) ? <span class="stringliteral">&quot;Listen only&quot;</span> : <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a39a9c6b58c7b77ef675e56d00c89e0a8">CONFFLAG_TALKER</a>) ? <span class="stringliteral">&quot;Talk only&quot;</span> : <span class="stringliteral">&quot;Talk and listen&quot;</span>,</div><div class="line"><a name="l05578"></a><span class="lineno"> 5578</span>&#160;            <a class="code" href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a>(&amp;user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">userflags</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a>) ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>,</div><div class="line"><a name="l05579"></a><span class="lineno"> 5579</span>&#160;            user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a> ? <span class="stringliteral">&quot;By admin&quot;</span> : user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">adminflags</a> &amp; <a class="code" href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a> ? <span class="stringliteral">&quot;By self&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>,</div><div class="line"><a name="l05580"></a><span class="lineno"> 5580</span>&#160;            user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> &gt; 0 ? <span class="stringliteral">&quot;Yes&quot;</span> : user-&gt;<a class="code" href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">talking</a> == 0 ? <span class="stringliteral">&quot;No&quot;</span> : <span class="stringliteral">&quot;Not monitored&quot;</span>);</div><div class="line"><a name="l05581"></a><span class="lineno"> 5581</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(user, -1);</div><div class="line"><a name="l05582"></a><span class="lineno"> 5582</span>&#160;      }</div><div class="line"><a name="l05583"></a><span class="lineno"> 5583</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;user_iter);</div><div class="line"><a name="l05584"></a><span class="lineno"> 5584</span>&#160;   }</div><div class="line"><a name="l05585"></a><span class="lineno"> 5585</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05586"></a><span class="lineno"> 5586</span>&#160;</div><div class="line"><a name="l05587"></a><span class="lineno"> 5587</span>&#160;   <span class="comment">/* Send final confirmation */</span></div><div class="line"><a name="l05588"></a><span class="lineno"> 5588</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a>(s, m, <span class="stringliteral">&quot;MeetmeListComplete&quot;</span>, total);</div><div class="line"><a name="l05589"></a><span class="lineno"> 5589</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a>(s);</div><div class="line"><a name="l05590"></a><span class="lineno"> 5590</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05591"></a><span class="lineno"> 5591</span>&#160;}</div><div class="line"><a name="l05592"></a><span class="lineno"> 5592</span>&#160;</div><div class="line"><a name="l05593"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae871ecb7fca76ad99a15c73a60d37b6b"> 5593</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae871ecb7fca76ad99a15c73a60d37b6b">action_meetmelistrooms</a>(<span class="keyword">struct</span> <a class="code" href="../../d2/d8a/structmansession.html">mansession</a> *s, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d9e/structmessage.html">message</a> *m)</div><div class="line"><a name="l05594"></a><span class="lineno"> 5594</span>&#160;{</div><div class="line"><a name="l05595"></a><span class="lineno"> 5595</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *actionid = <a class="code" href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a>(m, <span class="stringliteral">&quot;ActionID&quot;</span>);</div><div class="line"><a name="l05596"></a><span class="lineno"> 5596</span>&#160;   <span class="keywordtype">char</span> idText[80] = <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l05597"></a><span class="lineno"> 5597</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf;</div><div class="line"><a name="l05598"></a><span class="lineno"> 5598</span>&#160;   <span class="keywordtype">int</span> totalitems = 0;</div><div class="line"><a name="l05599"></a><span class="lineno"> 5599</span>&#160;   <span class="keywordtype">int</span> hr, <a class="code" href="../../dc/dc2/f2c_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>, sec;</div><div class="line"><a name="l05600"></a><span class="lineno"> 5600</span>&#160;   time_t now;</div><div class="line"><a name="l05601"></a><span class="lineno"> 5601</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>[5];</div><div class="line"><a name="l05602"></a><span class="lineno"> 5602</span>&#160;</div><div class="line"><a name="l05603"></a><span class="lineno"> 5603</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(actionid)) {</div><div class="line"><a name="l05604"></a><span class="lineno"> 5604</span>&#160;      snprintf(idText, <span class="keyword">sizeof</span>(idText), <span class="stringliteral">&quot;ActionID: %s\r\n&quot;</span>, actionid);</div><div class="line"><a name="l05605"></a><span class="lineno"> 5605</span>&#160;   }</div><div class="line"><a name="l05606"></a><span class="lineno"> 5606</span>&#160;</div><div class="line"><a name="l05607"></a><span class="lineno"> 5607</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>)) {</div><div class="line"><a name="l05608"></a><span class="lineno"> 5608</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a>(s, m, <span class="stringliteral">&quot;No active conferences.&quot;</span>);</div><div class="line"><a name="l05609"></a><span class="lineno"> 5609</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05610"></a><span class="lineno"> 5610</span>&#160;   }</div><div class="line"><a name="l05611"></a><span class="lineno"> 5611</span>&#160;</div><div class="line"><a name="l05612"></a><span class="lineno"> 5612</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a>(s, m, <span class="stringliteral">&quot;Meetme conferences will follow&quot;</span>, <span class="stringliteral">&quot;start&quot;</span>);</div><div class="line"><a name="l05613"></a><span class="lineno"> 5613</span>&#160;</div><div class="line"><a name="l05614"></a><span class="lineno"> 5614</span>&#160;   now = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l05615"></a><span class="lineno"> 5615</span>&#160;</div><div class="line"><a name="l05616"></a><span class="lineno"> 5616</span>&#160;   <span class="comment">/* Traverse the conference list */</span></div><div class="line"><a name="l05617"></a><span class="lineno"> 5617</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05618"></a><span class="lineno"> 5618</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, cnf, <a class="code" href="../../d8/d44/structast__conference.html#a46885edd8fad62a4089c021a1d810740">list</a>) {</div><div class="line"><a name="l05619"></a><span class="lineno"> 5619</span>&#160;      totalitems++;</div><div class="line"><a name="l05620"></a><span class="lineno"> 5620</span>&#160;</div><div class="line"><a name="l05621"></a><span class="lineno"> 5621</span>&#160;      <span class="keywordflow">if</span> (cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a> == 0) {</div><div class="line"><a name="l05622"></a><span class="lineno"> 5622</span>&#160;         strcpy(markedusers, <span class="stringliteral">&quot;N/A&quot;</span>);</div><div class="line"><a name="l05623"></a><span class="lineno"> 5623</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05624"></a><span class="lineno"> 5624</span>&#160;         sprintf(markedusers, <span class="stringliteral">&quot;%.4d&quot;</span>, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">markedusers</a>);</div><div class="line"><a name="l05625"></a><span class="lineno"> 5625</span>&#160;      }</div><div class="line"><a name="l05626"></a><span class="lineno"> 5626</span>&#160;      hr = (now - cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">start</a>) / 3600;</div><div class="line"><a name="l05627"></a><span class="lineno"> 5627</span>&#160;      min = ((now - cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">start</a>) % 3600) / 60;</div><div class="line"><a name="l05628"></a><span class="lineno"> 5628</span>&#160;      sec = (now - cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">start</a>) % 60;</div><div class="line"><a name="l05629"></a><span class="lineno"> 5629</span>&#160;</div><div class="line"><a name="l05630"></a><span class="lineno"> 5630</span>&#160;      <a class="code" href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a>(s,</div><div class="line"><a name="l05631"></a><span class="lineno"> 5631</span>&#160;      <span class="stringliteral">&quot;Event: MeetmeListRooms\r\n&quot;</span></div><div class="line"><a name="l05632"></a><span class="lineno"> 5632</span>&#160;      <span class="stringliteral">&quot;%s&quot;</span></div><div class="line"><a name="l05633"></a><span class="lineno"> 5633</span>&#160;      <span class="stringliteral">&quot;Conference: %s\r\n&quot;</span></div><div class="line"><a name="l05634"></a><span class="lineno"> 5634</span>&#160;      <span class="stringliteral">&quot;Parties: %d\r\n&quot;</span></div><div class="line"><a name="l05635"></a><span class="lineno"> 5635</span>&#160;      <span class="stringliteral">&quot;Marked: %s\r\n&quot;</span></div><div class="line"><a name="l05636"></a><span class="lineno"> 5636</span>&#160;      <span class="stringliteral">&quot;Activity: %2.2d:%2.2d:%2.2d\r\n&quot;</span></div><div class="line"><a name="l05637"></a><span class="lineno"> 5637</span>&#160;      <span class="stringliteral">&quot;Creation: %s\r\n&quot;</span></div><div class="line"><a name="l05638"></a><span class="lineno"> 5638</span>&#160;      <span class="stringliteral">&quot;Locked: %s\r\n&quot;</span></div><div class="line"><a name="l05639"></a><span class="lineno"> 5639</span>&#160;      <span class="stringliteral">&quot;\r\n&quot;</span>,</div><div class="line"><a name="l05640"></a><span class="lineno"> 5640</span>&#160;      idText,</div><div class="line"><a name="l05641"></a><span class="lineno"> 5641</span>&#160;      cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>,</div><div class="line"><a name="l05642"></a><span class="lineno"> 5642</span>&#160;      cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>,</div><div class="line"><a name="l05643"></a><span class="lineno"> 5643</span>&#160;      markedusers,</div><div class="line"><a name="l05644"></a><span class="lineno"> 5644</span>&#160;      hr,  min, sec,</div><div class="line"><a name="l05645"></a><span class="lineno"> 5645</span>&#160;      cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">isdynamic</a> ? <span class="stringliteral">&quot;Dynamic&quot;</span> : <span class="stringliteral">&quot;Static&quot;</span>,</div><div class="line"><a name="l05646"></a><span class="lineno"> 5646</span>&#160;      cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a> ? <span class="stringliteral">&quot;Yes&quot;</span> : <span class="stringliteral">&quot;No&quot;</span>);</div><div class="line"><a name="l05647"></a><span class="lineno"> 5647</span>&#160;   }</div><div class="line"><a name="l05648"></a><span class="lineno"> 5648</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05649"></a><span class="lineno"> 5649</span>&#160;</div><div class="line"><a name="l05650"></a><span class="lineno"> 5650</span>&#160;   <span class="comment">/* Send final confirmation */</span></div><div class="line"><a name="l05651"></a><span class="lineno"> 5651</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a>(s, m, <span class="stringliteral">&quot;MeetmeListRoomsComplete&quot;</span>, totalitems);</div><div class="line"><a name="l05652"></a><span class="lineno"> 5652</span>&#160;   <a class="code" href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a>(s);</div><div class="line"><a name="l05653"></a><span class="lineno"> 5653</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05654"></a><span class="lineno"> 5654</span>&#160;}</div><div class="line"><a name="l05655"></a><span class="lineno"> 5655</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05656"></a><span class="lineno"> 5656</span>&#160;<span class="comment">/*! \internal</span></div><div class="line"><a name="l05657"></a><span class="lineno"> 5657</span>&#160;<span class="comment"> * \brief creates directory structure and assigns absolute path from relative paths for filenames</span></div><div class="line"><a name="l05658"></a><span class="lineno"> 5658</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l05659"></a><span class="lineno"> 5659</span>&#160;<span class="comment"> * \param filename contains the absolute or relative path to the desired file</span></div><div class="line"><a name="l05660"></a><span class="lineno"> 5660</span>&#160;<span class="comment"> * \param buffer stores completed filename, absolutely must be a buffer of PATH_MAX length</span></div><div class="line"><a name="l05661"></a><span class="lineno"> 5661</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05662"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a6f90bbff2c01c08f56e1d05bcc3a7f2d"> 5662</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a6f90bbff2c01c08f56e1d05bcc3a7f2d">filename_parse</a>(<span class="keywordtype">char</span> *filename, <span class="keywordtype">char</span> *buffer)</div><div class="line"><a name="l05663"></a><span class="lineno"> 5663</span>&#160;{</div><div class="line"><a name="l05664"></a><span class="lineno"> 5664</span>&#160;   <span class="keywordtype">char</span> *slash;</div><div class="line"><a name="l05665"></a><span class="lineno"> 5665</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename)) {</div><div class="line"><a name="l05666"></a><span class="lineno"> 5666</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;No file name was provided for a file save option.\n&quot;</span>);</div><div class="line"><a name="l05667"></a><span class="lineno"> 5667</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (filename[0] != <span class="charliteral">&#39;/&#39;</span>) {</div><div class="line"><a name="l05668"></a><span class="lineno"> 5668</span>&#160;      snprintf(buffer, <a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>, <span class="stringliteral">&quot;%s/meetme/%s&quot;</span>, <a class="code" href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a>, filename);</div><div class="line"><a name="l05669"></a><span class="lineno"> 5669</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l05670"></a><span class="lineno"> 5670</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a>(buffer, filename, <a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>);</div><div class="line"><a name="l05671"></a><span class="lineno"> 5671</span>&#160;   }</div><div class="line"><a name="l05672"></a><span class="lineno"> 5672</span>&#160;</div><div class="line"><a name="l05673"></a><span class="lineno"> 5673</span>&#160;   slash = buffer;</div><div class="line"><a name="l05674"></a><span class="lineno"> 5674</span>&#160;   <span class="keywordflow">if</span> ((slash = strrchr(slash, <span class="charliteral">&#39;/&#39;</span>))) {</div><div class="line"><a name="l05675"></a><span class="lineno"> 5675</span>&#160;      *slash = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05676"></a><span class="lineno"> 5676</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a>(buffer, 0777);</div><div class="line"><a name="l05677"></a><span class="lineno"> 5677</span>&#160;      *slash = <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l05678"></a><span class="lineno"> 5678</span>&#160;   }</div><div class="line"><a name="l05679"></a><span class="lineno"> 5679</span>&#160;}</div><div class="line"><a name="l05680"></a><span class="lineno"> 5680</span>&#160;</div><div class="line"><a name="l05681"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a3352a8a09d96d39d97562f874eda91fe"> 5681</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a3352a8a09d96d39d97562f874eda91fe">recordthread</a>(<span class="keywordtype">void</span> *args)</div><div class="line"><a name="l05682"></a><span class="lineno"> 5682</span>&#160;{</div><div class="line"><a name="l05683"></a><span class="lineno"> 5683</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *cnf = <a class="code" href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a>;</div><div class="line"><a name="l05684"></a><span class="lineno"> 5684</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/d99/structast__frame.html">ast_frame</a> *f = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05685"></a><span class="lineno"> 5685</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../d0/d99/structast__frame.html#ac92588540e8c1d014a08cd8a45462b19">flags</a>;</div><div class="line"><a name="l05686"></a><span class="lineno"> 5686</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/dbc/structast__filestream.html">ast_filestream</a> *s = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05687"></a><span class="lineno"> 5687</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l05688"></a><span class="lineno"> 5688</span>&#160;   <span class="keywordtype">int</span> x;</div><div class="line"><a name="l05689"></a><span class="lineno"> 5689</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *oldrecordingfilename = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05690"></a><span class="lineno"> 5690</span>&#160;   <span class="keywordtype">char</span> filename_buffer[<a class="code" href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a>];</div><div class="line"><a name="l05691"></a><span class="lineno"> 5691</span>&#160;</div><div class="line"><a name="l05692"></a><span class="lineno"> 5692</span>&#160;   <span class="keywordflow">if</span> (!cnf || !cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>) {</div><div class="line"><a name="l05693"></a><span class="lineno"> 5693</span>&#160;      pthread_exit(0);</div><div class="line"><a name="l05694"></a><span class="lineno"> 5694</span>&#160;   }</div><div class="line"><a name="l05695"></a><span class="lineno"> 5695</span>&#160;</div><div class="line"><a name="l05696"></a><span class="lineno"> 5696</span>&#160;   filename_buffer[0] = <span class="charliteral">&#39;\0&#39;</span>;</div><div class="line"><a name="l05697"></a><span class="lineno"> 5697</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a6f90bbff2c01c08f56e1d05bcc3a7f2d">filename_parse</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">recordingfilename</a>, filename_buffer);</div><div class="line"><a name="l05698"></a><span class="lineno"> 5698</span>&#160;</div><div class="line"><a name="l05699"></a><span class="lineno"> 5699</span>&#160;   <a class="code" href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>);</div><div class="line"><a name="l05700"></a><span class="lineno"> 5700</span>&#160;   flags = O_CREAT | O_TRUNC | O_WRONLY;</div><div class="line"><a name="l05701"></a><span class="lineno"> 5701</span>&#160;</div><div class="line"><a name="l05702"></a><span class="lineno"> 5702</span>&#160;</div><div class="line"><a name="l05703"></a><span class="lineno"> 5703</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af06bdf9e29424094b6e9eddc4d9f9f62">recording</a> = <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298aed2f74b0993cd2122169387b4ff74113">MEETME_RECORD_ACTIVE</a>;</div><div class="line"><a name="l05704"></a><span class="lineno"> 5704</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>, -1) &gt; -1) {</div><div class="line"><a name="l05705"></a><span class="lineno"> 5705</span>&#160;      <span class="keywordflow">if</span> (cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af06bdf9e29424094b6e9eddc4d9f9f62">recording</a> == <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a79313598c5f4a645e3b006f59572a75d">MEETME_RECORD_TERMINATE</a>) {</div><div class="line"><a name="l05706"></a><span class="lineno"> 5706</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05707"></a><span class="lineno"> 5707</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05708"></a><span class="lineno"> 5708</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05709"></a><span class="lineno"> 5709</span>&#160;      }</div><div class="line"><a name="l05710"></a><span class="lineno"> 5710</span>&#160;      <span class="keywordflow">if</span> (!s &amp;&amp; !(<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(filename_buffer)) &amp;&amp; (filename_buffer != oldrecordingfilename)) {</div><div class="line"><a name="l05711"></a><span class="lineno"> 5711</span>&#160;         s = <a class="code" href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a>(filename_buffer, cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">recordingformat</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, flags, 0, <a class="code" href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a>);</div><div class="line"><a name="l05712"></a><span class="lineno"> 5712</span>&#160;         oldrecordingfilename = filename_buffer;</div><div class="line"><a name="l05713"></a><span class="lineno"> 5713</span>&#160;      }</div><div class="line"><a name="l05714"></a><span class="lineno"> 5714</span>&#160;</div><div class="line"><a name="l05715"></a><span class="lineno"> 5715</span>&#160;      f = <a class="code" href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">lchan</a>);</div><div class="line"><a name="l05716"></a><span class="lineno"> 5716</span>&#160;      <span class="keywordflow">if</span> (!f) {</div><div class="line"><a name="l05717"></a><span class="lineno"> 5717</span>&#160;         res = -1;</div><div class="line"><a name="l05718"></a><span class="lineno"> 5718</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05719"></a><span class="lineno"> 5719</span>&#160;      }</div><div class="line"><a name="l05720"></a><span class="lineno"> 5720</span>&#160;      <span class="keywordflow">if</span> (f-&gt;<a class="code" href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">frametype</a> == <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a>) {</div><div class="line"><a name="l05721"></a><span class="lineno"> 5721</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>);</div><div class="line"><a name="l05722"></a><span class="lineno"> 5722</span>&#160;         <span class="keywordflow">for</span> (x = 0; x &lt; <a class="code" href="../../df/d44/app__meetme_8c.html#addd70c99776f00581f71a71d3c10d86f">AST_FRAME_BITS</a>; x++) {</div><div class="line"><a name="l05723"></a><span class="lineno"> 5723</span>&#160;            <span class="comment">/* Free any translations that have occured */</span></div><div class="line"><a name="l05724"></a><span class="lineno"> 5724</span>&#160;            <span class="keywordflow">if</span> (cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[x]) {</div><div class="line"><a name="l05725"></a><span class="lineno"> 5725</span>&#160;               <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[x]);</div><div class="line"><a name="l05726"></a><span class="lineno"> 5726</span>&#160;               cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">transframe</a>[x] = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05727"></a><span class="lineno"> 5727</span>&#160;            }</div><div class="line"><a name="l05728"></a><span class="lineno"> 5728</span>&#160;         }</div><div class="line"><a name="l05729"></a><span class="lineno"> 5729</span>&#160;         <span class="keywordflow">if</span> (cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">origframe</a>)</div><div class="line"><a name="l05730"></a><span class="lineno"> 5730</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">origframe</a>);</div><div class="line"><a name="l05731"></a><span class="lineno"> 5731</span>&#160;         cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">origframe</a> = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a>(f);</div><div class="line"><a name="l05732"></a><span class="lineno"> 5732</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">listenlock</a>);</div><div class="line"><a name="l05733"></a><span class="lineno"> 5733</span>&#160;         <span class="keywordflow">if</span> (s)</div><div class="line"><a name="l05734"></a><span class="lineno"> 5734</span>&#160;            res = <a class="code" href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a>(s, f);</div><div class="line"><a name="l05735"></a><span class="lineno"> 5735</span>&#160;         <span class="keywordflow">if</span> (res) {</div><div class="line"><a name="l05736"></a><span class="lineno"> 5736</span>&#160;            <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l05737"></a><span class="lineno"> 5737</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l05738"></a><span class="lineno"> 5738</span>&#160;         }</div><div class="line"><a name="l05739"></a><span class="lineno"> 5739</span>&#160;      }</div><div class="line"><a name="l05740"></a><span class="lineno"> 5740</span>&#160;      <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a>(f);</div><div class="line"><a name="l05741"></a><span class="lineno"> 5741</span>&#160;   }</div><div class="line"><a name="l05742"></a><span class="lineno"> 5742</span>&#160;   cnf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#af06bdf9e29424094b6e9eddc4d9f9f62">recording</a> = <a class="code" href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a44a4c13334429a322cb3408ec48c1cfb">MEETME_RECORD_OFF</a>;</div><div class="line"><a name="l05743"></a><span class="lineno"> 5743</span>&#160;   <span class="keywordflow">if</span> (s)</div><div class="line"><a name="l05744"></a><span class="lineno"> 5744</span>&#160;      <a class="code" href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a>(s);</div><div class="line"><a name="l05745"></a><span class="lineno"> 5745</span>&#160;</div><div class="line"><a name="l05746"></a><span class="lineno"> 5746</span>&#160;   pthread_exit(0);</div><div class="line"><a name="l05747"></a><span class="lineno"> 5747</span>&#160;}</div><div class="line"><a name="l05748"></a><span class="lineno"> 5748</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05749"></a><span class="lineno"> 5749</span>&#160;<span class="comment">/*! \brief Callback for devicestate providers */</span></div><div class="line"><a name="l05750"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a8fc3c28c0edf393e6f7a01f3e0865de6"> 5750</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="code" href="../../df/d44/app__meetme_8c.html#a8fc3c28c0edf393e6f7a01f3e0865de6">meetmestate</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l05751"></a><span class="lineno"> 5751</span>&#160;{</div><div class="line"><a name="l05752"></a><span class="lineno"> 5752</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>;</div><div class="line"><a name="l05753"></a><span class="lineno"> 5753</span>&#160;</div><div class="line"><a name="l05754"></a><span class="lineno"> 5754</span>&#160;   <span class="comment">/* Find conference */</span></div><div class="line"><a name="l05755"></a><span class="lineno"> 5755</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05756"></a><span class="lineno"> 5756</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, conf, <a class="code" href="../../d8/d44/structast__conference.html#a46885edd8fad62a4089c021a1d810740">list</a>) {</div><div class="line"><a name="l05757"></a><span class="lineno"> 5757</span>&#160;      <span class="keywordflow">if</span> (!strcmp(data, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>))</div><div class="line"><a name="l05758"></a><span class="lineno"> 5758</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l05759"></a><span class="lineno"> 5759</span>&#160;   }</div><div class="line"><a name="l05760"></a><span class="lineno"> 5760</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l05761"></a><span class="lineno"> 5761</span>&#160;   <span class="keywordflow">if</span> (!conf)</div><div class="line"><a name="l05762"></a><span class="lineno"> 5762</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l05763"></a><span class="lineno"> 5763</span>&#160;</div><div class="line"><a name="l05764"></a><span class="lineno"> 5764</span>&#160;</div><div class="line"><a name="l05765"></a><span class="lineno"> 5765</span>&#160;   <span class="comment">/* SKREP to fill */</span></div><div class="line"><a name="l05766"></a><span class="lineno"> 5766</span>&#160;   <span class="keywordflow">if</span> (!conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>)</div><div class="line"><a name="l05767"></a><span class="lineno"> 5767</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l05768"></a><span class="lineno"> 5768</span>&#160;</div><div class="line"><a name="l05769"></a><span class="lineno"> 5769</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>;</div><div class="line"><a name="l05770"></a><span class="lineno"> 5770</span>&#160;}</div><div class="line"><a name="l05771"></a><span class="lineno"> 5771</span>&#160;</div><div class="line"><a name="l05772"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a591ca01335606883af41398d3eb8be77"> 5772</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a591ca01335606883af41398d3eb8be77">meetme_set_defaults</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l05773"></a><span class="lineno"> 5773</span>&#160;{</div><div class="line"><a name="l05774"></a><span class="lineno"> 5774</span>&#160;   <span class="comment">/*  Scheduling support is off by default */</span></div><div class="line"><a name="l05775"></a><span class="lineno"> 5775</span>&#160;   rt_schedule = 0;</div><div class="line"><a name="l05776"></a><span class="lineno"> 5776</span>&#160;   fuzzystart = 0;</div><div class="line"><a name="l05777"></a><span class="lineno"> 5777</span>&#160;   earlyalert = 0;</div><div class="line"><a name="l05778"></a><span class="lineno"> 5778</span>&#160;   endalert = 0;</div><div class="line"><a name="l05779"></a><span class="lineno"> 5779</span>&#160;   extendby = 0;</div><div class="line"><a name="l05780"></a><span class="lineno"> 5780</span>&#160;</div><div class="line"><a name="l05781"></a><span class="lineno"> 5781</span>&#160;   <span class="comment">/*  Logging of participants defaults to ON for compatibility reasons */</span></div><div class="line"><a name="l05782"></a><span class="lineno"> 5782</span>&#160;   rt_log_members = 1;</div><div class="line"><a name="l05783"></a><span class="lineno"> 5783</span>&#160;</div><div class="line"><a name="l05784"></a><span class="lineno"> 5784</span>&#160;   <span class="comment">/* Set default number of buffers to be allocated. */</span></div><div class="line"><a name="l05785"></a><span class="lineno"> 5785</span>&#160;   audio_buffers = <a class="code" href="../../df/d44/app__meetme_8c.html#af71d7de559e9731a4d8e57bafa341486">DEFAULT_AUDIO_BUFFERS</a>;</div><div class="line"><a name="l05786"></a><span class="lineno"> 5786</span>&#160;}</div><div class="line"><a name="l05787"></a><span class="lineno"> 5787</span>&#160;</div><div class="line"><a name="l05788"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#acc07ba96fffd24d21a941036c4e867a4"> 5788</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#acc07ba96fffd24d21a941036c4e867a4">load_config_meetme</a>(<span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>)</div><div class="line"><a name="l05789"></a><span class="lineno"> 5789</span>&#160;{</div><div class="line"><a name="l05790"></a><span class="lineno"> 5790</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l05791"></a><span class="lineno"> 5791</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { 0 };</div><div class="line"><a name="l05792"></a><span class="lineno"> 5792</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l05793"></a><span class="lineno"> 5793</span>&#160;</div><div class="line"><a name="l05794"></a><span class="lineno"> 5794</span>&#160;   <span class="keywordflow">if</span> (!reload) {</div><div class="line"><a name="l05795"></a><span class="lineno"> 5795</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a591ca01335606883af41398d3eb8be77">meetme_set_defaults</a>();</div><div class="line"><a name="l05796"></a><span class="lineno"> 5796</span>&#160;   }</div><div class="line"><a name="l05797"></a><span class="lineno"> 5797</span>&#160;</div><div class="line"><a name="l05798"></a><span class="lineno"> 5798</span>&#160;   <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62921b92fa4fb37f1e3a5d4c644fc1d8">CONFIG_FILE_NAME</a>, config_flags))) {</div><div class="line"><a name="l05799"></a><span class="lineno"> 5799</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05800"></a><span class="lineno"> 5800</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l05801"></a><span class="lineno"> 5801</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Config file &quot;</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62921b92fa4fb37f1e3a5d4c644fc1d8">CONFIG_FILE_NAME</a> <span class="stringliteral">&quot; is in an invalid format.  Aborting.\n&quot;</span>);</div><div class="line"><a name="l05802"></a><span class="lineno"> 5802</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l05803"></a><span class="lineno"> 5803</span>&#160;   }</div><div class="line"><a name="l05804"></a><span class="lineno"> 5804</span>&#160;</div><div class="line"><a name="l05805"></a><span class="lineno"> 5805</span>&#160;   <span class="keywordflow">if</span> (reload) {</div><div class="line"><a name="l05806"></a><span class="lineno"> 5806</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a591ca01335606883af41398d3eb8be77">meetme_set_defaults</a>();</div><div class="line"><a name="l05807"></a><span class="lineno"> 5807</span>&#160;   }</div><div class="line"><a name="l05808"></a><span class="lineno"> 5808</span>&#160;</div><div class="line"><a name="l05809"></a><span class="lineno"> 5809</span>&#160;   <span class="keywordflow">if</span> ((val = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;audiobuffers&quot;</span>))) {</div><div class="line"><a name="l05810"></a><span class="lineno"> 5810</span>&#160;      <span class="keywordflow">if</span> ((sscanf(val, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;audio_buffers) != 1)) {</div><div class="line"><a name="l05811"></a><span class="lineno"> 5811</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;audiobuffers setting must be a number, not &#39;%s&#39;\n&quot;</span>, val);</div><div class="line"><a name="l05812"></a><span class="lineno"> 5812</span>&#160;         audio_buffers = <a class="code" href="../../df/d44/app__meetme_8c.html#af71d7de559e9731a4d8e57bafa341486">DEFAULT_AUDIO_BUFFERS</a>;</div><div class="line"><a name="l05813"></a><span class="lineno"> 5813</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((audio_buffers &lt; DAHDI_DEFAULT_NUM_BUFS) || (audio_buffers &gt; DAHDI_MAX_NUM_BUFS)) {</div><div class="line"><a name="l05814"></a><span class="lineno"> 5814</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;audiobuffers setting must be between %d and %d\n&quot;</span>,</div><div class="line"><a name="l05815"></a><span class="lineno"> 5815</span>&#160;            DAHDI_DEFAULT_NUM_BUFS, DAHDI_MAX_NUM_BUFS);</div><div class="line"><a name="l05816"></a><span class="lineno"> 5816</span>&#160;         audio_buffers = <a class="code" href="../../df/d44/app__meetme_8c.html#af71d7de559e9731a4d8e57bafa341486">DEFAULT_AUDIO_BUFFERS</a>;</div><div class="line"><a name="l05817"></a><span class="lineno"> 5817</span>&#160;      }</div><div class="line"><a name="l05818"></a><span class="lineno"> 5818</span>&#160;      <span class="keywordflow">if</span> (audio_buffers != <a class="code" href="../../df/d44/app__meetme_8c.html#af71d7de559e9731a4d8e57bafa341486">DEFAULT_AUDIO_BUFFERS</a>)</div><div class="line"><a name="l05819"></a><span class="lineno"> 5819</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Audio buffers per channel set to %d\n&quot;</span>, audio_buffers);</div><div class="line"><a name="l05820"></a><span class="lineno"> 5820</span>&#160;   }</div><div class="line"><a name="l05821"></a><span class="lineno"> 5821</span>&#160;</div><div class="line"><a name="l05822"></a><span class="lineno"> 5822</span>&#160;   <span class="keywordflow">if</span> ((val = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;schedule&quot;</span>)))</div><div class="line"><a name="l05823"></a><span class="lineno"> 5823</span>&#160;      rt_schedule = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(val);</div><div class="line"><a name="l05824"></a><span class="lineno"> 5824</span>&#160;   <span class="keywordflow">if</span> ((val = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;logmembercount&quot;</span>)))</div><div class="line"><a name="l05825"></a><span class="lineno"> 5825</span>&#160;      rt_log_members = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(val);</div><div class="line"><a name="l05826"></a><span class="lineno"> 5826</span>&#160;   <span class="keywordflow">if</span> ((val = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;fuzzystart&quot;</span>))) {</div><div class="line"><a name="l05827"></a><span class="lineno"> 5827</span>&#160;      <span class="keywordflow">if</span> ((sscanf(val, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;fuzzystart) != 1)) {</div><div class="line"><a name="l05828"></a><span class="lineno"> 5828</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;fuzzystart must be a number, not &#39;%s&#39;\n&quot;</span>, val);</div><div class="line"><a name="l05829"></a><span class="lineno"> 5829</span>&#160;         fuzzystart = 0;</div><div class="line"><a name="l05830"></a><span class="lineno"> 5830</span>&#160;      }</div><div class="line"><a name="l05831"></a><span class="lineno"> 5831</span>&#160;   }</div><div class="line"><a name="l05832"></a><span class="lineno"> 5832</span>&#160;   <span class="keywordflow">if</span> ((val = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;earlyalert&quot;</span>))) {</div><div class="line"><a name="l05833"></a><span class="lineno"> 5833</span>&#160;      <span class="keywordflow">if</span> ((sscanf(val, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;earlyalert) != 1)) {</div><div class="line"><a name="l05834"></a><span class="lineno"> 5834</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;earlyalert must be a number, not &#39;%s&#39;\n&quot;</span>, val);</div><div class="line"><a name="l05835"></a><span class="lineno"> 5835</span>&#160;         earlyalert = 0;</div><div class="line"><a name="l05836"></a><span class="lineno"> 5836</span>&#160;      }</div><div class="line"><a name="l05837"></a><span class="lineno"> 5837</span>&#160;   }</div><div class="line"><a name="l05838"></a><span class="lineno"> 5838</span>&#160;   <span class="keywordflow">if</span> ((val = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;endalert&quot;</span>))) {</div><div class="line"><a name="l05839"></a><span class="lineno"> 5839</span>&#160;      <span class="keywordflow">if</span> ((sscanf(val, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;endalert) != 1)) {</div><div class="line"><a name="l05840"></a><span class="lineno"> 5840</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;endalert must be a number, not &#39;%s&#39;\n&quot;</span>, val);</div><div class="line"><a name="l05841"></a><span class="lineno"> 5841</span>&#160;         endalert = 0;</div><div class="line"><a name="l05842"></a><span class="lineno"> 5842</span>&#160;      }</div><div class="line"><a name="l05843"></a><span class="lineno"> 5843</span>&#160;   }</div><div class="line"><a name="l05844"></a><span class="lineno"> 5844</span>&#160;   <span class="keywordflow">if</span> ((val = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;extendby&quot;</span>))) {</div><div class="line"><a name="l05845"></a><span class="lineno"> 5845</span>&#160;      <span class="keywordflow">if</span> ((sscanf(val, <span class="stringliteral">&quot;%30d&quot;</span>, &amp;extendby) != 1)) {</div><div class="line"><a name="l05846"></a><span class="lineno"> 5846</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;extendby must be a number, not &#39;%s&#39;\n&quot;</span>, val);</div><div class="line"><a name="l05847"></a><span class="lineno"> 5847</span>&#160;         extendby = 0;</div><div class="line"><a name="l05848"></a><span class="lineno"> 5848</span>&#160;      }</div><div class="line"><a name="l05849"></a><span class="lineno"> 5849</span>&#160;   }</div><div class="line"><a name="l05850"></a><span class="lineno"> 5850</span>&#160;</div><div class="line"><a name="l05851"></a><span class="lineno"> 5851</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l05852"></a><span class="lineno"> 5852</span>&#160;}</div><div class="line"><a name="l05853"></a><span class="lineno"> 5853</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05854"></a><span class="lineno"> 5854</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l05855"></a><span class="lineno"> 5855</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l05856"></a><span class="lineno"> 5856</span>&#160;<span class="comment"> * \brief Find an SLA trunk by name</span></div><div class="line"><a name="l05857"></a><span class="lineno"> 5857</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05858"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af590722094b4b8eee8319a0ae644a8c1"> 5858</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#af590722094b4b8eee8319a0ae644a8c1">sla_find_trunk</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)</div><div class="line"><a name="l05859"></a><span class="lineno"> 5859</span>&#160;{</div><div class="line"><a name="l05860"></a><span class="lineno"> 5860</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> tmp_trunk = {</div><div class="line"><a name="l05861"></a><span class="lineno"> 5861</span>&#160;      .<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a> = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>,</div><div class="line"><a name="l05862"></a><span class="lineno"> 5862</span>&#160;   };</div><div class="line"><a name="l05863"></a><span class="lineno"> 5863</span>&#160;</div><div class="line"><a name="l05864"></a><span class="lineno"> 5864</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(sla_trunks, &amp;tmp_trunk, <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>);</div><div class="line"><a name="l05865"></a><span class="lineno"> 5865</span>&#160;}</div><div class="line"><a name="l05866"></a><span class="lineno"> 5866</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05867"></a><span class="lineno"> 5867</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l05868"></a><span class="lineno"> 5868</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l05869"></a><span class="lineno"> 5869</span>&#160;<span class="comment"> * \brief Find an SLA station by name</span></div><div class="line"><a name="l05870"></a><span class="lineno"> 5870</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05871"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a3c7dabe74df23208e4dce8bc3fbb6d77"> 5871</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a3c7dabe74df23208e4dce8bc3fbb6d77">sla_find_station</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)</div><div class="line"><a name="l05872"></a><span class="lineno"> 5872</span>&#160;{</div><div class="line"><a name="l05873"></a><span class="lineno"> 5873</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> tmp_station = {</div><div class="line"><a name="l05874"></a><span class="lineno"> 5874</span>&#160;      .name = <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>,</div><div class="line"><a name="l05875"></a><span class="lineno"> 5875</span>&#160;   };</div><div class="line"><a name="l05876"></a><span class="lineno"> 5876</span>&#160;</div><div class="line"><a name="l05877"></a><span class="lineno"> 5877</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a>(sla_stations, &amp;tmp_station, <a class="code" href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a>);</div><div class="line"><a name="l05878"></a><span class="lineno"> 5878</span>&#160;}</div><div class="line"><a name="l05879"></a><span class="lineno"> 5879</span>&#160;</div><div class="line"><a name="l05880"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ad180a618fb2ca170f49e36927637775f"> 5880</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ad180a618fb2ca170f49e36927637775f">sla_check_station_hold_access</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *trunk,</div><div class="line"><a name="l05881"></a><span class="lineno"> 5881</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station)</div><div class="line"><a name="l05882"></a><span class="lineno"> 5882</span>&#160;{</div><div class="line"><a name="l05883"></a><span class="lineno"> 5883</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l05884"></a><span class="lineno"> 5884</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l05885"></a><span class="lineno"> 5885</span>&#160;</div><div class="line"><a name="l05886"></a><span class="lineno"> 5886</span>&#160;   <span class="comment">/* For each station that has this call on hold, check for private hold. */</span></div><div class="line"><a name="l05887"></a><span class="lineno"> 5887</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a923df8202a8b865a393bb34def02c109">stations</a>, station_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l05888"></a><span class="lineno"> 5888</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l05889"></a><span class="lineno"> 5889</span>&#160;         <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a> != trunk || station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> == station)</div><div class="line"><a name="l05890"></a><span class="lineno"> 5890</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l05891"></a><span class="lineno"> 5891</span>&#160;         <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a> == <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a> &amp;&amp;</div><div class="line"><a name="l05892"></a><span class="lineno"> 5892</span>&#160;            station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a9f0acfbb10f035a4ad88dc2c8ad41030">hold_access</a> == <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685cab53c785cab44a382700c0c2e7bfabf3b">SLA_HOLD_PRIVATE</a>)</div><div class="line"><a name="l05893"></a><span class="lineno"> 5893</span>&#160;            <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l05894"></a><span class="lineno"> 5894</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05895"></a><span class="lineno"> 5895</span>&#160;      }</div><div class="line"><a name="l05896"></a><span class="lineno"> 5896</span>&#160;   }</div><div class="line"><a name="l05897"></a><span class="lineno"> 5897</span>&#160;</div><div class="line"><a name="l05898"></a><span class="lineno"> 5898</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l05899"></a><span class="lineno"> 5899</span>&#160;}</div><div class="line"><a name="l05900"></a><span class="lineno"> 5900</span>&#160;<span class="comment"></span></div><div class="line"><a name="l05901"></a><span class="lineno"> 5901</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l05902"></a><span class="lineno"> 5902</span>&#160;<span class="comment"> * \brief Find a trunk reference on a station by name</span></div><div class="line"><a name="l05903"></a><span class="lineno"> 5903</span>&#160;<span class="comment"> * \param station the station</span></div><div class="line"><a name="l05904"></a><span class="lineno"> 5904</span>&#160;<span class="comment"> * \param name the trunk&#39;s name</span></div><div class="line"><a name="l05905"></a><span class="lineno"> 5905</span>&#160;<span class="comment"> * \pre sla_station is locked</span></div><div class="line"><a name="l05906"></a><span class="lineno"> 5906</span>&#160;<span class="comment"> * \return a pointer to the station&#39;s trunk reference.  If the trunk</span></div><div class="line"><a name="l05907"></a><span class="lineno"> 5907</span>&#160;<span class="comment"> *         is not found, it is not idle and barge is disabled, or if</span></div><div class="line"><a name="l05908"></a><span class="lineno"> 5908</span>&#160;<span class="comment"> *         it is on hold and private hold is set, then NULL will be returned.</span></div><div class="line"><a name="l05909"></a><span class="lineno"> 5909</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l05910"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aea0981ea332b08880d6404c65fe64135"> 5910</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#aea0981ea332b08880d6404c65fe64135">sla_find_trunk_ref_byname</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station,</div><div class="line"><a name="l05911"></a><span class="lineno"> 5911</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>)</div><div class="line"><a name="l05912"></a><span class="lineno"> 5912</span>&#160;{</div><div class="line"><a name="l05913"></a><span class="lineno"> 5913</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05914"></a><span class="lineno"> 5914</span>&#160;</div><div class="line"><a name="l05915"></a><span class="lineno"> 5915</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l05916"></a><span class="lineno"> 5916</span>&#160;      <span class="keywordflow">if</span> (strcasecmp(trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, name))</div><div class="line"><a name="l05917"></a><span class="lineno"> 5917</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l05918"></a><span class="lineno"> 5918</span>&#160;</div><div class="line"><a name="l05919"></a><span class="lineno"> 5919</span>&#160;      <span class="keywordflow">if</span> ( (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a748f7c363274abc31c4396fde91f9f4e">barge_disabled</a></div><div class="line"><a name="l05920"></a><span class="lineno"> 5920</span>&#160;         &amp;&amp; trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a> == <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>) ||</div><div class="line"><a name="l05921"></a><span class="lineno"> 5921</span>&#160;         (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a2ccd06fb5f2eeea9c3d1798c67d271e6">hold_stations</a></div><div class="line"><a name="l05922"></a><span class="lineno"> 5922</span>&#160;         &amp;&amp; trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a9f0acfbb10f035a4ad88dc2c8ad41030">hold_access</a> == <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685cab53c785cab44a382700c0c2e7bfabf3b">SLA_HOLD_PRIVATE</a></div><div class="line"><a name="l05923"></a><span class="lineno"> 5923</span>&#160;         &amp;&amp; trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a> != <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a>) ||</div><div class="line"><a name="l05924"></a><span class="lineno"> 5924</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#ad180a618fb2ca170f49e36927637775f">sla_check_station_hold_access</a>(trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, station) )</div><div class="line"><a name="l05925"></a><span class="lineno"> 5925</span>&#160;      {</div><div class="line"><a name="l05926"></a><span class="lineno"> 5926</span>&#160;         trunk_ref = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05927"></a><span class="lineno"> 5927</span>&#160;      }</div><div class="line"><a name="l05928"></a><span class="lineno"> 5928</span>&#160;</div><div class="line"><a name="l05929"></a><span class="lineno"> 5929</span>&#160;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l05930"></a><span class="lineno"> 5930</span>&#160;   }</div><div class="line"><a name="l05931"></a><span class="lineno"> 5931</span>&#160;</div><div class="line"><a name="l05932"></a><span class="lineno"> 5932</span>&#160;   <span class="keywordflow">if</span> (trunk_ref) {</div><div class="line"><a name="l05933"></a><span class="lineno"> 5933</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref, 1);</div><div class="line"><a name="l05934"></a><span class="lineno"> 5934</span>&#160;   }</div><div class="line"><a name="l05935"></a><span class="lineno"> 5935</span>&#160;</div><div class="line"><a name="l05936"></a><span class="lineno"> 5936</span>&#160;   <span class="keywordflow">return</span> trunk_ref;</div><div class="line"><a name="l05937"></a><span class="lineno"> 5937</span>&#160;}</div><div class="line"><a name="l05938"></a><span class="lineno"> 5938</span>&#160;</div><div class="line"><a name="l05939"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a5e5f4394d6b89f5fa10b7405234ec69b"> 5939</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a5e5f4394d6b89f5fa10b7405234ec69b">sla_station_ref_destructor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l05940"></a><span class="lineno"> 5940</span>&#160;{</div><div class="line"><a name="l05941"></a><span class="lineno"> 5941</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref = obj;</div><div class="line"><a name="l05942"></a><span class="lineno"> 5942</span>&#160;</div><div class="line"><a name="l05943"></a><span class="lineno"> 5943</span>&#160;   <span class="keywordflow">if</span> (station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>) {</div><div class="line"><a name="l05944"></a><span class="lineno"> 5944</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, -1);</div><div class="line"><a name="l05945"></a><span class="lineno"> 5945</span>&#160;      station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05946"></a><span class="lineno"> 5946</span>&#160;   }</div><div class="line"><a name="l05947"></a><span class="lineno"> 5947</span>&#160;}</div><div class="line"><a name="l05948"></a><span class="lineno"> 5948</span>&#160;</div><div class="line"><a name="l05949"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a95a34a9245e87d8481590dddcfd168d2"> 5949</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a95a34a9245e87d8481590dddcfd168d2">sla_create_station_ref</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l05950"></a><span class="lineno"> 5950</span>&#160;{</div><div class="line"><a name="l05951"></a><span class="lineno"> 5951</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l05952"></a><span class="lineno"> 5952</span>&#160;</div><div class="line"><a name="l05953"></a><span class="lineno"> 5953</span>&#160;   <span class="keywordflow">if</span> (!(station_ref = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*station_ref), <a class="code" href="../../df/d44/app__meetme_8c.html#a5e5f4394d6b89f5fa10b7405234ec69b">sla_station_ref_destructor</a>))) {</div><div class="line"><a name="l05954"></a><span class="lineno"> 5954</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05955"></a><span class="lineno"> 5955</span>&#160;   }</div><div class="line"><a name="l05956"></a><span class="lineno"> 5956</span>&#160;</div><div class="line"><a name="l05957"></a><span class="lineno"> 5957</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station, 1);</div><div class="line"><a name="l05958"></a><span class="lineno"> 5958</span>&#160;   station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> = <a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l05959"></a><span class="lineno"> 5959</span>&#160;</div><div class="line"><a name="l05960"></a><span class="lineno"> 5960</span>&#160;   <span class="keywordflow">return</span> station_ref;</div><div class="line"><a name="l05961"></a><span class="lineno"> 5961</span>&#160;}</div><div class="line"><a name="l05962"></a><span class="lineno"> 5962</span>&#160;</div><div class="line"><a name="l05963"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ad714502c1dbeae46a86c3b4e2e210ed1"> 5963</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#ad714502c1dbeae46a86c3b4e2e210ed1">sla_create_ringing_station</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l05964"></a><span class="lineno"> 5964</span>&#160;{</div><div class="line"><a name="l05965"></a><span class="lineno"> 5965</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *ringing_station;</div><div class="line"><a name="l05966"></a><span class="lineno"> 5966</span>&#160;</div><div class="line"><a name="l05967"></a><span class="lineno"> 5967</span>&#160;   <span class="keywordflow">if</span> (!(ringing_station = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ringing_station))))</div><div class="line"><a name="l05968"></a><span class="lineno"> 5968</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05969"></a><span class="lineno"> 5969</span>&#160;</div><div class="line"><a name="l05970"></a><span class="lineno"> 5970</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station, 1);</div><div class="line"><a name="l05971"></a><span class="lineno"> 5971</span>&#160;   ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> = <a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l05972"></a><span class="lineno"> 5972</span>&#160;   ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a5fad56bdd993af8ceb77ab8a83134f0f">ring_begin</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l05973"></a><span class="lineno"> 5973</span>&#160;</div><div class="line"><a name="l05974"></a><span class="lineno"> 5974</span>&#160;   <span class="keywordflow">return</span> ringing_station;</div><div class="line"><a name="l05975"></a><span class="lineno"> 5975</span>&#160;}</div><div class="line"><a name="l05976"></a><span class="lineno"> 5976</span>&#160;</div><div class="line"><a name="l05977"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aca6fbeba8b0659d90022826a4cc3e28c"> 5977</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aca6fbeba8b0659d90022826a4cc3e28c">sla_ringing_station_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *ringing_station)</div><div class="line"><a name="l05978"></a><span class="lineno"> 5978</span>&#160;{</div><div class="line"><a name="l05979"></a><span class="lineno"> 5979</span>&#160;   <span class="keywordflow">if</span> (ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>) {</div><div class="line"><a name="l05980"></a><span class="lineno"> 5980</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, -1);</div><div class="line"><a name="l05981"></a><span class="lineno"> 5981</span>&#160;      ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05982"></a><span class="lineno"> 5982</span>&#160;   }</div><div class="line"><a name="l05983"></a><span class="lineno"> 5983</span>&#160;</div><div class="line"><a name="l05984"></a><span class="lineno"> 5984</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ringing_station);</div><div class="line"><a name="l05985"></a><span class="lineno"> 5985</span>&#160;}</div><div class="line"><a name="l05986"></a><span class="lineno"> 5986</span>&#160;</div><div class="line"><a name="l05987"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ac049ae187b952bcf9518074287abf84c"> 5987</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#ac049ae187b952bcf9518074287abf84c">sla_create_failed_station</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l05988"></a><span class="lineno"> 5988</span>&#160;{</div><div class="line"><a name="l05989"></a><span class="lineno"> 5989</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a> *failed_station;</div><div class="line"><a name="l05990"></a><span class="lineno"> 5990</span>&#160;</div><div class="line"><a name="l05991"></a><span class="lineno"> 5991</span>&#160;   <span class="keywordflow">if</span> (!(failed_station = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*failed_station)))) {</div><div class="line"><a name="l05992"></a><span class="lineno"> 5992</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l05993"></a><span class="lineno"> 5993</span>&#160;   }</div><div class="line"><a name="l05994"></a><span class="lineno"> 5994</span>&#160;</div><div class="line"><a name="l05995"></a><span class="lineno"> 5995</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station, 1);</div><div class="line"><a name="l05996"></a><span class="lineno"> 5996</span>&#160;   failed_station-&gt;<a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> = <a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l05997"></a><span class="lineno"> 5997</span>&#160;   failed_station-&gt;<a class="code" href="../../d5/d9c/structsla__failed__station.html#ad0eecb6223757f0f347c81c1e2c14eb6">last_try</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l05998"></a><span class="lineno"> 5998</span>&#160;</div><div class="line"><a name="l05999"></a><span class="lineno"> 5999</span>&#160;   <span class="keywordflow">return</span> failed_station;</div><div class="line"><a name="l06000"></a><span class="lineno"> 6000</span>&#160;}</div><div class="line"><a name="l06001"></a><span class="lineno"> 6001</span>&#160;</div><div class="line"><a name="l06002"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a5b4eb1fd081eb38250072106941d5409"> 6002</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a5b4eb1fd081eb38250072106941d5409">sla_failed_station_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a> *failed_station)</div><div class="line"><a name="l06003"></a><span class="lineno"> 6003</span>&#160;{</div><div class="line"><a name="l06004"></a><span class="lineno"> 6004</span>&#160;   <span class="keywordflow">if</span> (failed_station-&gt;<a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>) {</div><div class="line"><a name="l06005"></a><span class="lineno"> 6005</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(failed_station-&gt;<a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, -1);</div><div class="line"><a name="l06006"></a><span class="lineno"> 6006</span>&#160;      failed_station-&gt;<a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06007"></a><span class="lineno"> 6007</span>&#160;   }</div><div class="line"><a name="l06008"></a><span class="lineno"> 6008</span>&#160;</div><div class="line"><a name="l06009"></a><span class="lineno"> 6009</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(failed_station);</div><div class="line"><a name="l06010"></a><span class="lineno"> 6010</span>&#160;}</div><div class="line"><a name="l06011"></a><span class="lineno"> 6011</span>&#160;</div><div class="line"><a name="l06012"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ab69997f20dabd9a6a6f42f00dd2290f4"> 6012</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="code" href="../../df/d44/app__meetme_8c.html#ab69997f20dabd9a6a6f42f00dd2290f4">sla_state_to_devstate</a>(<span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75">sla_trunk_state</a> <a class="code" href="../../d4/d88/structstate.html">state</a>)</div><div class="line"><a name="l06013"></a><span class="lineno"> 6013</span>&#160;{</div><div class="line"><a name="l06014"></a><span class="lineno"> 6014</span>&#160;   <span class="keywordflow">switch</span> (state) {</div><div class="line"><a name="l06015"></a><span class="lineno"> 6015</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>:</div><div class="line"><a name="l06016"></a><span class="lineno"> 6016</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>;</div><div class="line"><a name="l06017"></a><span class="lineno"> 6017</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a4822569aa984228bec67e07f5b9862a5">SLA_TRUNK_STATE_RINGING</a>:</div><div class="line"><a name="l06018"></a><span class="lineno"> 6018</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a>;</div><div class="line"><a name="l06019"></a><span class="lineno"> 6019</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>:</div><div class="line"><a name="l06020"></a><span class="lineno"> 6020</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>;</div><div class="line"><a name="l06021"></a><span class="lineno"> 6021</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a17322fe34775141bef95a88fd00ed59d">SLA_TRUNK_STATE_ONHOLD</a>:</div><div class="line"><a name="l06022"></a><span class="lineno"> 6022</span>&#160;   <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a>:</div><div class="line"><a name="l06023"></a><span class="lineno"> 6023</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>;</div><div class="line"><a name="l06024"></a><span class="lineno"> 6024</span>&#160;   }</div><div class="line"><a name="l06025"></a><span class="lineno"> 6025</span>&#160;</div><div class="line"><a name="l06026"></a><span class="lineno"> 6026</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a>;</div><div class="line"><a name="l06027"></a><span class="lineno"> 6027</span>&#160;}</div><div class="line"><a name="l06028"></a><span class="lineno"> 6028</span>&#160;</div><div class="line"><a name="l06029"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16"> 6029</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *trunk, <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75">sla_trunk_state</a> <a class="code" href="../../d4/d88/structstate.html">state</a>,</div><div class="line"><a name="l06030"></a><span class="lineno"> 6030</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215">sla_which_trunk_refs</a> inactive_only, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *exclude)</div><div class="line"><a name="l06031"></a><span class="lineno"> 6031</span>&#160;{</div><div class="line"><a name="l06032"></a><span class="lineno"> 6032</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station;</div><div class="line"><a name="l06033"></a><span class="lineno"> 6033</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l06034"></a><span class="lineno"> 6034</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l06035"></a><span class="lineno"> 6035</span>&#160;</div><div class="line"><a name="l06036"></a><span class="lineno"> 6036</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sla_stations, 0);</div><div class="line"><a name="l06037"></a><span class="lineno"> 6037</span>&#160;   <span class="keywordflow">while</span> ((station = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i))) {</div><div class="line"><a name="l06038"></a><span class="lineno"> 6038</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l06039"></a><span class="lineno"> 6039</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06040"></a><span class="lineno"> 6040</span>&#160;         <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a> != trunk || (inactive_only ? trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a> : 0)</div><div class="line"><a name="l06041"></a><span class="lineno"> 6041</span>&#160;               || trunk_ref == exclude) {</div><div class="line"><a name="l06042"></a><span class="lineno"> 6042</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06043"></a><span class="lineno"> 6043</span>&#160;         }</div><div class="line"><a name="l06044"></a><span class="lineno"> 6044</span>&#160;         trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a> = <a class="code" href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a>;</div><div class="line"><a name="l06045"></a><span class="lineno"> 6045</span>&#160;         <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#ab69997f20dabd9a6a6f42f00dd2290f4">sla_state_to_devstate</a>(state), <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>,</div><div class="line"><a name="l06046"></a><span class="lineno"> 6046</span>&#160;                    <span class="stringliteral">&quot;SLA:%s_%s&quot;</span>, station-&gt;name, trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l06047"></a><span class="lineno"> 6047</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06048"></a><span class="lineno"> 6048</span>&#160;      }</div><div class="line"><a name="l06049"></a><span class="lineno"> 6049</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l06050"></a><span class="lineno"> 6050</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station, -1);</div><div class="line"><a name="l06051"></a><span class="lineno"> 6051</span>&#160;   }</div><div class="line"><a name="l06052"></a><span class="lineno"> 6052</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l06053"></a><span class="lineno"> 6053</span>&#160;}</div><div class="line"><a name="l06054"></a><span class="lineno"> 6054</span>&#160;</div><div class="line"><a name="l06055"></a><span class="lineno"><a class="line" href="../../d8/d26/structrun__station__args.html"> 6055</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d8/d26/structrun__station__args.html">run_station_args</a> {</div><div class="line"><a name="l06056"></a><span class="lineno"><a class="line" href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466"> 6056</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l06057"></a><span class="lineno"><a class="line" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf"> 6057</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *<a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>;</div><div class="line"><a name="l06058"></a><span class="lineno"><a class="line" href="../../d8/d26/structrun__station__args.html#ad60cf18fa0b7812ab65423aa79f93165"> 6058</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> *<a class="code" href="../../d8/d26/structrun__station__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>;</div><div class="line"><a name="l06059"></a><span class="lineno"><a class="line" href="../../d8/d26/structrun__station__args.html#a45860a157e8d238e312118ddd5771454"> 6059</a></span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> *<a class="code" href="../../d8/d26/structrun__station__args.html#a45860a157e8d238e312118ddd5771454">cond</a>;</div><div class="line"><a name="l06060"></a><span class="lineno"> 6060</span>&#160;};</div><div class="line"><a name="l06061"></a><span class="lineno"> 6061</span>&#160;</div><div class="line"><a name="l06062"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a7392cc7f56677c79368716971d1ec023"> 6062</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a7392cc7f56677c79368716971d1ec023">answer_trunk_chan</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan)</div><div class="line"><a name="l06063"></a><span class="lineno"> 6063</span>&#160;{</div><div class="line"><a name="l06064"></a><span class="lineno"> 6064</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l06065"></a><span class="lineno"> 6065</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l06066"></a><span class="lineno"> 6066</span>&#160;}</div><div class="line"><a name="l06067"></a><span class="lineno"> 6067</span>&#160;</div><div class="line"><a name="l06068"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1e618b1883d308cb371b0e7b0800bf3f"> 6068</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a1e618b1883d308cb371b0e7b0800bf3f">run_station</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l06069"></a><span class="lineno"> 6069</span>&#160;{</div><div class="line"><a name="l06070"></a><span class="lineno"> 6070</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *, station, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06071"></a><span class="lineno"> 6071</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *, trunk_ref, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06072"></a><span class="lineno"> 6072</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/da2/structast__str.html">ast_str</a> *conf_name = <a class="code" href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a>(16);</div><div class="line"><a name="l06073"></a><span class="lineno"> 6073</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> conf_flags = { 0 };</div><div class="line"><a name="l06074"></a><span class="lineno"> 6074</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>;</div><div class="line"><a name="l06075"></a><span class="lineno"> 6075</span>&#160;</div><div class="line"><a name="l06076"></a><span class="lineno"> 6076</span>&#160;   {</div><div class="line"><a name="l06077"></a><span class="lineno"> 6077</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d26/structrun__station__args.html">run_station_args</a> *args = data;</div><div class="line"><a name="l06078"></a><span class="lineno"> 6078</span>&#160;      <a class="code" href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> = args-&gt;<a class="code" href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l06079"></a><span class="lineno"> 6079</span>&#160;      <a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a> = args-&gt;<a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>;</div><div class="line"><a name="l06080"></a><span class="lineno"> 6080</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(args-&gt;<a class="code" href="../../d8/d26/structrun__station__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06081"></a><span class="lineno"> 6081</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(args-&gt;<a class="code" href="../../d8/d26/structrun__station__args.html#a45860a157e8d238e312118ddd5771454">cond</a>);</div><div class="line"><a name="l06082"></a><span class="lineno"> 6082</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(args-&gt;<a class="code" href="../../d8/d26/structrun__station__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06083"></a><span class="lineno"> 6083</span>&#160;      <span class="comment">/* args is no longer valid here. */</span></div><div class="line"><a name="l06084"></a><span class="lineno"> 6084</span>&#160;   }</div><div class="line"><a name="l06085"></a><span class="lineno"> 6085</span>&#160;</div><div class="line"><a name="l06086"></a><span class="lineno"> 6086</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>((<span class="keywordtype">int</span> *) &amp;<a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#aaf4bad1817a2988a07bb37913898d976">active_stations</a>, 1);</div><div class="line"><a name="l06087"></a><span class="lineno"> 6087</span>&#160;   <a class="code" href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a>(&amp;conf_name, 0, <span class="stringliteral">&quot;SLA_%s&quot;</span>, <a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l06088"></a><span class="lineno"> 6088</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab2de736b42974f12ec7d57c41d234bf4">ast_set_flag64</a>(&amp;conf_flags,</div><div class="line"><a name="l06089"></a><span class="lineno"> 6089</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">CONFFLAG_MARKEDEXIT</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac793d6a4a78ffd301d51be06a771b70c">CONFFLAG_SLA_STATION</a>);</div><div class="line"><a name="l06090"></a><span class="lineno"> 6090</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a7392cc7f56677c79368716971d1ec023">answer_trunk_chan</a>(<a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l06091"></a><span class="lineno"> 6091</span>&#160;   conf = <a class="code" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a>(<a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(conf_name), <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 0, 0, 1, <a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06092"></a><span class="lineno"> 6092</span>&#160;   <span class="keywordflow">if</span> (conf) {</div><div class="line"><a name="l06093"></a><span class="lineno"> 6093</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a9970b644e96d7aa6caad2001d38eb741">conf_run</a>(<a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, conf, &amp;conf_flags, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06094"></a><span class="lineno"> 6094</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a>(conf);</div><div class="line"><a name="l06095"></a><span class="lineno"> 6095</span>&#160;      conf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06096"></a><span class="lineno"> 6096</span>&#160;   }</div><div class="line"><a name="l06097"></a><span class="lineno"> 6097</span>&#160;   <a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06098"></a><span class="lineno"> 6098</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#acbbba9058696fc07cec1485a88b5f4ad">ast_atomic_dec_and_test</a>((<span class="keywordtype">int</span> *) &amp;<a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#aaf4bad1817a2988a07bb37913898d976">active_stations</a>) &amp;&amp;</div><div class="line"><a name="l06099"></a><span class="lineno"> 6099</span>&#160;      <a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a> != <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a>) {</div><div class="line"><a name="l06100"></a><span class="lineno"> 6100</span>&#160;      <a class="code" href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a>(&amp;conf_name, 0, <span class="stringliteral">&quot;,K&quot;</span>);</div><div class="line"><a name="l06101"></a><span class="lineno"> 6101</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a977a38245885ede0c3accf2f56fc57f8">admin_exec</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a>(conf_name));</div><div class="line"><a name="l06102"></a><span class="lineno"> 6102</span>&#160;      <a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a2ccd06fb5f2eeea9c3d1798c67d271e6">hold_stations</a> = 0;</div><div class="line"><a name="l06103"></a><span class="lineno"> 6103</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(<a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06104"></a><span class="lineno"> 6104</span>&#160;   }</div><div class="line"><a name="l06105"></a><span class="lineno"> 6105</span>&#160;</div><div class="line"><a name="l06106"></a><span class="lineno"> 6106</span>&#160;   <a class="code" href="../../df/dcf/dial_8h.html#a726346c9cfd11a81839e0eb580b66059">ast_dial_join</a>(<a class="code" href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>);</div><div class="line"><a name="l06107"></a><span class="lineno"> 6107</span>&#160;   <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(<a class="code" href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>);</div><div class="line"><a name="l06108"></a><span class="lineno"> 6108</span>&#160;   <a class="code" href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06109"></a><span class="lineno"> 6109</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(conf_name);</div><div class="line"><a name="l06110"></a><span class="lineno"> 6110</span>&#160;</div><div class="line"><a name="l06111"></a><span class="lineno"> 6111</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06112"></a><span class="lineno"> 6112</span>&#160;}</div><div class="line"><a name="l06113"></a><span class="lineno"> 6113</span>&#160;</div><div class="line"><a name="l06114"></a><span class="lineno"> 6114</span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aa319bcde509ca0b265674afd864ec081">sla_ringing_trunk_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk);</div><div class="line"><a name="l06115"></a><span class="lineno"> 6115</span>&#160;</div><div class="line"><a name="l06116"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a53f8684abfc755b445ce1f77aba6f2c0"> 6116</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a53f8684abfc755b445ce1f77aba6f2c0">sla_stop_ringing_trunk</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk)</div><div class="line"><a name="l06117"></a><span class="lineno"> 6117</span>&#160;{</div><div class="line"><a name="l06118"></a><span class="lineno"> 6118</span>&#160;   <span class="keywordtype">char</span> <a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>[80];</div><div class="line"><a name="l06119"></a><span class="lineno"> 6119</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l06120"></a><span class="lineno"> 6120</span>&#160;</div><div class="line"><a name="l06121"></a><span class="lineno"> 6121</span>&#160;   snprintf(buf, <span class="keyword">sizeof</span>(buf), <span class="stringliteral">&quot;SLA_%s,K&quot;</span>, ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l06122"></a><span class="lineno"> 6122</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a977a38245885ede0c3accf2f56fc57f8">admin_exec</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, buf);</div><div class="line"><a name="l06123"></a><span class="lineno"> 6123</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06124"></a><span class="lineno"> 6124</span>&#160;</div><div class="line"><a name="l06125"></a><span class="lineno"> 6125</span>&#160;   <span class="keywordflow">while</span> ((station_ref = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#a39b158517ec4306ae852c2a829f45601">timed_out_stations</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l06126"></a><span class="lineno"> 6126</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station_ref, -1);</div><div class="line"><a name="l06127"></a><span class="lineno"> 6127</span>&#160;   }</div><div class="line"><a name="l06128"></a><span class="lineno"> 6128</span>&#160;</div><div class="line"><a name="l06129"></a><span class="lineno"> 6129</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#aa319bcde509ca0b265674afd864ec081">sla_ringing_trunk_destroy</a>(ringing_trunk);</div><div class="line"><a name="l06130"></a><span class="lineno"> 6130</span>&#160;}</div><div class="line"><a name="l06131"></a><span class="lineno"> 6131</span>&#160;</div><div class="line"><a name="l06132"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a81942bf15eb39b2b6fd8ef56f7e3c2ed"> 6132</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a81942bf15eb39b2b6fd8ef56f7e3c2ed">sla_stop_ringing_station</a>(<span class="keyword">struct</span> <a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *ringing_station,</div><div class="line"><a name="l06133"></a><span class="lineno"> 6133</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0">sla_station_hangup</a> <a class="code" href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a>)</div><div class="line"><a name="l06134"></a><span class="lineno"> 6134</span>&#160;{</div><div class="line"><a name="l06135"></a><span class="lineno"> 6135</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk;</div><div class="line"><a name="l06136"></a><span class="lineno"> 6136</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l06137"></a><span class="lineno"> 6137</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l06138"></a><span class="lineno"> 6138</span>&#160;</div><div class="line"><a name="l06139"></a><span class="lineno"> 6139</span>&#160;   <a class="code" href="../../df/dcf/dial_8h.html#a726346c9cfd11a81839e0eb580b66059">ast_dial_join</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>);</div><div class="line"><a name="l06140"></a><span class="lineno"> 6140</span>&#160;   <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>);</div><div class="line"><a name="l06141"></a><span class="lineno"> 6141</span>&#160;   ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06142"></a><span class="lineno"> 6142</span>&#160;</div><div class="line"><a name="l06143"></a><span class="lineno"> 6143</span>&#160;   <span class="keywordflow">if</span> (hangup == <a class="code" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0a0d3359532f25486a8dd30e3ef7c90511">SLA_STATION_HANGUP_NORMAL</a>)</div><div class="line"><a name="l06144"></a><span class="lineno"> 6144</span>&#160;      <span class="keywordflow">goto</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>;</div><div class="line"><a name="l06145"></a><span class="lineno"> 6145</span>&#160;</div><div class="line"><a name="l06146"></a><span class="lineno"> 6146</span>&#160;   <span class="comment">/* If the station is being hung up because of a timeout, then add it to the</span></div><div class="line"><a name="l06147"></a><span class="lineno"> 6147</span>&#160;<span class="comment">    * list of timed out stations on each of the ringing trunks.  This is so</span></div><div class="line"><a name="l06148"></a><span class="lineno"> 6148</span>&#160;<span class="comment">    * that when doing further processing to figure out which stations should be</span></div><div class="line"><a name="l06149"></a><span class="lineno"> 6149</span>&#160;<span class="comment">    * ringing, which trunk to answer, determining timeouts, etc., we know which</span></div><div class="line"><a name="l06150"></a><span class="lineno"> 6150</span>&#160;<span class="comment">    * ringing trunks we should ignore. */</span></div><div class="line"><a name="l06151"></a><span class="lineno"> 6151</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_trunks, ringing_trunk, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06152"></a><span class="lineno"> 6152</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06153"></a><span class="lineno"> 6153</span>&#160;         <span class="keywordflow">if</span> (ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a> == trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>)</div><div class="line"><a name="l06154"></a><span class="lineno"> 6154</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06155"></a><span class="lineno"> 6155</span>&#160;      }</div><div class="line"><a name="l06156"></a><span class="lineno"> 6156</span>&#160;      <span class="keywordflow">if</span> (!trunk_ref)</div><div class="line"><a name="l06157"></a><span class="lineno"> 6157</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06158"></a><span class="lineno"> 6158</span>&#160;      <span class="keywordflow">if</span> (!(station_ref = <a class="code" href="../../df/d44/app__meetme_8c.html#a95a34a9245e87d8481590dddcfd168d2">sla_create_station_ref</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)))</div><div class="line"><a name="l06159"></a><span class="lineno"> 6159</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06160"></a><span class="lineno"> 6160</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#a39b158517ec4306ae852c2a829f45601">timed_out_stations</a>, station_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06161"></a><span class="lineno"> 6161</span>&#160;   }</div><div class="line"><a name="l06162"></a><span class="lineno"> 6162</span>&#160;</div><div class="line"><a name="l06163"></a><span class="lineno"> 6163</span>&#160;<a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a>:</div><div class="line"><a name="l06164"></a><span class="lineno"> 6164</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#aca6fbeba8b0659d90022826a4cc3e28c">sla_ringing_station_destroy</a>(ringing_station);</div><div class="line"><a name="l06165"></a><span class="lineno"> 6165</span>&#160;}</div><div class="line"><a name="l06166"></a><span class="lineno"> 6166</span>&#160;</div><div class="line"><a name="l06167"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a49e602e2f36891d7fc2344119bed7ea8"> 6167</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a49e602e2f36891d7fc2344119bed7ea8">sla_dial_state_callback</a>(<span class="keyword">struct</span> <a class="code" href="../../db/db7/structast__dial.html">ast_dial</a> *dial)</div><div class="line"><a name="l06168"></a><span class="lineno"> 6168</span>&#160;{</div><div class="line"><a name="l06169"></a><span class="lineno"> 6169</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745">sla_queue_event</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aacd2fcc269af2c1a25641c5afa9109ea3">SLA_EVENT_DIAL_STATE</a>);</div><div class="line"><a name="l06170"></a><span class="lineno"> 6170</span>&#160;}</div><div class="line"><a name="l06171"></a><span class="lineno"> 6171</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06172"></a><span class="lineno"> 6172</span>&#160;<span class="comment">/*! \brief Check to see if dialing this station already timed out for this ringing trunk</span></div><div class="line"><a name="l06173"></a><span class="lineno"> 6173</span>&#160;<span class="comment"> * \note Assumes sla.lock is locked</span></div><div class="line"><a name="l06174"></a><span class="lineno"> 6174</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06175"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae50d2c1eb2f8e66e0895bca7f8056951"> 6175</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae50d2c1eb2f8e66e0895bca7f8056951">sla_check_timed_out_station</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk,</div><div class="line"><a name="l06176"></a><span class="lineno"> 6176</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l06177"></a><span class="lineno"> 6177</span>&#160;{</div><div class="line"><a name="l06178"></a><span class="lineno"> 6178</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *timed_out_station;</div><div class="line"><a name="l06179"></a><span class="lineno"> 6179</span>&#160;</div><div class="line"><a name="l06180"></a><span class="lineno"> 6180</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#a39b158517ec4306ae852c2a829f45601">timed_out_stations</a>, timed_out_station, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06181"></a><span class="lineno"> 6181</span>&#160;      <span class="keywordflow">if</span> (station == timed_out_station-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l06182"></a><span class="lineno"> 6182</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l06183"></a><span class="lineno"> 6183</span>&#160;   }</div><div class="line"><a name="l06184"></a><span class="lineno"> 6184</span>&#160;</div><div class="line"><a name="l06185"></a><span class="lineno"> 6185</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06186"></a><span class="lineno"> 6186</span>&#160;}</div><div class="line"><a name="l06187"></a><span class="lineno"> 6187</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06188"></a><span class="lineno"> 6188</span>&#160;<span class="comment">/*! \brief Choose the highest priority ringing trunk for a station</span></div><div class="line"><a name="l06189"></a><span class="lineno"> 6189</span>&#160;<span class="comment"> * \param station the station</span></div><div class="line"><a name="l06190"></a><span class="lineno"> 6190</span>&#160;<span class="comment"> * \param rm remove the ringing trunk once selected</span></div><div class="line"><a name="l06191"></a><span class="lineno"> 6191</span>&#160;<span class="comment"> * \param trunk_ref a place to store the pointer to this stations reference to</span></div><div class="line"><a name="l06192"></a><span class="lineno"> 6192</span>&#160;<span class="comment"> *        the selected trunk</span></div><div class="line"><a name="l06193"></a><span class="lineno"> 6193</span>&#160;<span class="comment"> * \return a pointer to the selected ringing trunk, or NULL if none found</span></div><div class="line"><a name="l06194"></a><span class="lineno"> 6194</span>&#160;<span class="comment"> * \note Assumes that sla.lock is locked</span></div><div class="line"><a name="l06195"></a><span class="lineno"> 6195</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06196"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aa32d3b0ec852ae1c0c34b3b28286e7d6"> 6196</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#aa32d3b0ec852ae1c0c34b3b28286e7d6">sla_choose_ringing_trunk</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station,</div><div class="line"><a name="l06197"></a><span class="lineno"> 6197</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> **trunk_ref, <span class="keywordtype">int</span> rm)</div><div class="line"><a name="l06198"></a><span class="lineno"> 6198</span>&#160;{</div><div class="line"><a name="l06199"></a><span class="lineno"> 6199</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *s_trunk_ref;</div><div class="line"><a name="l06200"></a><span class="lineno"> 6200</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06201"></a><span class="lineno"> 6201</span>&#160;</div><div class="line"><a name="l06202"></a><span class="lineno"> 6202</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, s_trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06203"></a><span class="lineno"> 6203</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_trunks, ringing_trunk, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06204"></a><span class="lineno"> 6204</span>&#160;         <span class="comment">/* Make sure this is the trunk we&#39;re looking for */</span></div><div class="line"><a name="l06205"></a><span class="lineno"> 6205</span>&#160;         <span class="keywordflow">if</span> (s_trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a> != ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>)</div><div class="line"><a name="l06206"></a><span class="lineno"> 6206</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06207"></a><span class="lineno"> 6207</span>&#160;</div><div class="line"><a name="l06208"></a><span class="lineno"> 6208</span>&#160;         <span class="comment">/* This trunk on the station is ringing.  But, make sure this station</span></div><div class="line"><a name="l06209"></a><span class="lineno"> 6209</span>&#160;<span class="comment">          * didn&#39;t already time out while this trunk was ringing. */</span></div><div class="line"><a name="l06210"></a><span class="lineno"> 6210</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#ae50d2c1eb2f8e66e0895bca7f8056951">sla_check_timed_out_station</a>(ringing_trunk, station))</div><div class="line"><a name="l06211"></a><span class="lineno"> 6211</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06212"></a><span class="lineno"> 6212</span>&#160;</div><div class="line"><a name="l06213"></a><span class="lineno"> 6213</span>&#160;         <span class="keywordflow">if</span> (rm)</div><div class="line"><a name="l06214"></a><span class="lineno"> 6214</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06215"></a><span class="lineno"> 6215</span>&#160;</div><div class="line"><a name="l06216"></a><span class="lineno"> 6216</span>&#160;         <span class="keywordflow">if</span> (trunk_ref) {</div><div class="line"><a name="l06217"></a><span class="lineno"> 6217</span>&#160;            <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(s_trunk_ref, 1);</div><div class="line"><a name="l06218"></a><span class="lineno"> 6218</span>&#160;            *trunk_ref = s_trunk_ref;</div><div class="line"><a name="l06219"></a><span class="lineno"> 6219</span>&#160;         }</div><div class="line"><a name="l06220"></a><span class="lineno"> 6220</span>&#160;</div><div class="line"><a name="l06221"></a><span class="lineno"> 6221</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06222"></a><span class="lineno"> 6222</span>&#160;      }</div><div class="line"><a name="l06223"></a><span class="lineno"> 6223</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l06224"></a><span class="lineno"> 6224</span>&#160;</div><div class="line"><a name="l06225"></a><span class="lineno"> 6225</span>&#160;      <span class="keywordflow">if</span> (ringing_trunk)</div><div class="line"><a name="l06226"></a><span class="lineno"> 6226</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06227"></a><span class="lineno"> 6227</span>&#160;   }</div><div class="line"><a name="l06228"></a><span class="lineno"> 6228</span>&#160;</div><div class="line"><a name="l06229"></a><span class="lineno"> 6229</span>&#160;   <span class="keywordflow">return</span> ringing_trunk;</div><div class="line"><a name="l06230"></a><span class="lineno"> 6230</span>&#160;}</div><div class="line"><a name="l06231"></a><span class="lineno"> 6231</span>&#160;</div><div class="line"><a name="l06232"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a775a7291ee8f84069224106f4a9cd29f"> 6232</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a775a7291ee8f84069224106f4a9cd29f">sla_handle_dial_state_event</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l06233"></a><span class="lineno"> 6233</span>&#160;{</div><div class="line"><a name="l06234"></a><span class="lineno"> 6234</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *ringing_station;</div><div class="line"><a name="l06235"></a><span class="lineno"> 6235</span>&#160;</div><div class="line"><a name="l06236"></a><span class="lineno"> 6236</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_stations, ringing_station, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06237"></a><span class="lineno"> 6237</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *, s_trunk_ref, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06238"></a><span class="lineno"> 6238</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06239"></a><span class="lineno"> 6239</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/d26/structrun__station__args.html">run_station_args</a> args;</div><div class="line"><a name="l06240"></a><span class="lineno"> 6240</span>&#160;      <span class="keyword">enum</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847">ast_dial_result</a> dial_res;</div><div class="line"><a name="l06241"></a><span class="lineno"> 6241</span>&#160;      pthread_t dont_care;</div><div class="line"><a name="l06242"></a><span class="lineno"> 6242</span>&#160;      <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> <a class="code" href="../../d8/d26/structrun__station__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>;</div><div class="line"><a name="l06243"></a><span class="lineno"> 6243</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> <a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>;</div><div class="line"><a name="l06244"></a><span class="lineno"> 6244</span>&#160;</div><div class="line"><a name="l06245"></a><span class="lineno"> 6245</span>&#160;      <span class="keywordflow">switch</span> ((dial_res = <a class="code" href="../../df/dcf/dial_8h.html#a051c20e595f3e3c2be10c84b4247dd37">ast_dial_state</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>))) {</div><div class="line"><a name="l06246"></a><span class="lineno"> 6246</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a23fe48f529c8d06fa7dffc976a871a16">AST_DIAL_RESULT_HANGUP</a>:</div><div class="line"><a name="l06247"></a><span class="lineno"> 6247</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a33b279a6d9fd2024de7a1f3ccadda2ce">AST_DIAL_RESULT_INVALID</a>:</div><div class="line"><a name="l06248"></a><span class="lineno"> 6248</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a077aa090d089e32265755c7ec0f1dac2">AST_DIAL_RESULT_FAILED</a>:</div><div class="line"><a name="l06249"></a><span class="lineno"> 6249</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a4bd947d4e1f84bf01d336e228fb431e1">AST_DIAL_RESULT_TIMEOUT</a>:</div><div class="line"><a name="l06250"></a><span class="lineno"> 6250</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847ae9986b09a1806d312dd5e508aee3b9ed">AST_DIAL_RESULT_UNANSWERED</a>:</div><div class="line"><a name="l06251"></a><span class="lineno"> 6251</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06252"></a><span class="lineno"> 6252</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a81942bf15eb39b2b6fd8ef56f7e3c2ed">sla_stop_ringing_station</a>(ringing_station, <a class="code" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0a0d3359532f25486a8dd30e3ef7c90511">SLA_STATION_HANGUP_NORMAL</a>);</div><div class="line"><a name="l06253"></a><span class="lineno"> 6253</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06254"></a><span class="lineno"> 6254</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a4a8c0d54e6071d1e9a36adae685406d3">AST_DIAL_RESULT_ANSWERED</a>:</div><div class="line"><a name="l06255"></a><span class="lineno"> 6255</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06256"></a><span class="lineno"> 6256</span>&#160;         <span class="comment">/* Find the appropriate trunk to answer. */</span></div><div class="line"><a name="l06257"></a><span class="lineno"> 6257</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06258"></a><span class="lineno"> 6258</span>&#160;         ringing_trunk = <a class="code" href="../../df/d44/app__meetme_8c.html#aa32d3b0ec852ae1c0c34b3b28286e7d6">sla_choose_ringing_trunk</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, &amp;s_trunk_ref, 1);</div><div class="line"><a name="l06259"></a><span class="lineno"> 6259</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06260"></a><span class="lineno"> 6260</span>&#160;         <span class="keywordflow">if</span> (!ringing_trunk) {</div><div class="line"><a name="l06261"></a><span class="lineno"> 6261</span>&#160;            <span class="comment">/* This case happens in a bit of a race condition.  If two stations answer</span></div><div class="line"><a name="l06262"></a><span class="lineno"> 6262</span>&#160;<span class="comment">             * the outbound call at the same time, the first one will get connected to</span></div><div class="line"><a name="l06263"></a><span class="lineno"> 6263</span>&#160;<span class="comment">             * the trunk.  When the second one gets here, it will not see any trunks</span></div><div class="line"><a name="l06264"></a><span class="lineno"> 6264</span>&#160;<span class="comment">             * ringing so we have no idea what to conect it to.  So, we just hang up</span></div><div class="line"><a name="l06265"></a><span class="lineno"> 6265</span>&#160;<span class="comment">             * on it. */</span></div><div class="line"><a name="l06266"></a><span class="lineno"> 6266</span>&#160;            <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Found no ringing trunk for station &#39;%s&#39; to answer!\n&quot;</span>, ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;name);</div><div class="line"><a name="l06267"></a><span class="lineno"> 6267</span>&#160;            <a class="code" href="../../df/dcf/dial_8h.html#a726346c9cfd11a81839e0eb580b66059">ast_dial_join</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>);</div><div class="line"><a name="l06268"></a><span class="lineno"> 6268</span>&#160;            <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>);</div><div class="line"><a name="l06269"></a><span class="lineno"> 6269</span>&#160;            ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06270"></a><span class="lineno"> 6270</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#aca6fbeba8b0659d90022826a4cc3e28c">sla_ringing_station_destroy</a>(ringing_station);</div><div class="line"><a name="l06271"></a><span class="lineno"> 6271</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06272"></a><span class="lineno"> 6272</span>&#160;         }</div><div class="line"><a name="l06273"></a><span class="lineno"> 6273</span>&#160;         <span class="comment">/* Track the channel that answered this trunk */</span></div><div class="line"><a name="l06274"></a><span class="lineno"> 6274</span>&#160;         s_trunk_ref-&gt;chan = <a class="code" href="../../df/dcf/dial_8h.html#a83d13a00643c2ad0149758507df60466">ast_dial_answered</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>);</div><div class="line"><a name="l06275"></a><span class="lineno"> 6275</span>&#160;         <span class="comment">/* Actually answer the trunk */</span></div><div class="line"><a name="l06276"></a><span class="lineno"> 6276</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a7392cc7f56677c79368716971d1ec023">answer_trunk_chan</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l06277"></a><span class="lineno"> 6277</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06278"></a><span class="lineno"> 6278</span>&#160;         <span class="comment">/* Now, start a thread that will connect this station to the trunk.  The rest of</span></div><div class="line"><a name="l06279"></a><span class="lineno"> 6279</span>&#160;<span class="comment">          * the code here sets up the thread and ensures that it is able to save the arguments</span></div><div class="line"><a name="l06280"></a><span class="lineno"> 6280</span>&#160;<span class="comment">          * before they are no longer valid since they are allocated on the stack. */</span></div><div class="line"><a name="l06281"></a><span class="lineno"> 6281</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(s_trunk_ref, 1);</div><div class="line"><a name="l06282"></a><span class="lineno"> 6282</span>&#160;         args.<a class="code" href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a> = s_trunk_ref;</div><div class="line"><a name="l06283"></a><span class="lineno"> 6283</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, 1);</div><div class="line"><a name="l06284"></a><span class="lineno"> 6284</span>&#160;         args.<a class="code" href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> = ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l06285"></a><span class="lineno"> 6285</span>&#160;         args.<a class="code" href="../../d8/d26/structrun__station__args.html#a45860a157e8d238e312118ddd5771454">cond</a> = &amp;<a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>;</div><div class="line"><a name="l06286"></a><span class="lineno"> 6286</span>&#160;         args.<a class="code" href="../../d8/d26/structrun__station__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a> = &amp;<a class="code" href="../../d8/d26/structrun__station__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>;</div><div class="line"><a name="l06287"></a><span class="lineno"> 6287</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#aa319bcde509ca0b265674afd864ec081">sla_ringing_trunk_destroy</a>(ringing_trunk);</div><div class="line"><a name="l06288"></a><span class="lineno"> 6288</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#aca6fbeba8b0659d90022826a4cc3e28c">sla_ringing_station_destroy</a>(ringing_station);</div><div class="line"><a name="l06289"></a><span class="lineno"> 6289</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;cond_lock);</div><div class="line"><a name="l06290"></a><span class="lineno"> 6290</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;cond, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06291"></a><span class="lineno"> 6291</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;cond_lock);</div><div class="line"><a name="l06292"></a><span class="lineno"> 6292</span>&#160;         <a class="code" href="../../d5/d60/utils_8h.html#aa73be876e3a4024b91ce2e09d8b945d1">ast_pthread_create_detached_background</a>(&amp;dont_care, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e618b1883d308cb371b0e7b0800bf3f">run_station</a>, &amp;args);</div><div class="line"><a name="l06293"></a><span class="lineno"> 6293</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;cond, &amp;cond_lock);</div><div class="line"><a name="l06294"></a><span class="lineno"> 6294</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;cond_lock);</div><div class="line"><a name="l06295"></a><span class="lineno"> 6295</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cond_lock);</div><div class="line"><a name="l06296"></a><span class="lineno"> 6296</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;cond);</div><div class="line"><a name="l06297"></a><span class="lineno"> 6297</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06298"></a><span class="lineno"> 6298</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a5838a3c4774e4d0e9a7d9d3724850ae6">AST_DIAL_RESULT_TRYING</a>:</div><div class="line"><a name="l06299"></a><span class="lineno"> 6299</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847aba600b021de0e20a6e8a6c484f27a9e4">AST_DIAL_RESULT_RINGING</a>:</div><div class="line"><a name="l06300"></a><span class="lineno"> 6300</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a5cc795503d8ce3f6df21f18e7d30e24e">AST_DIAL_RESULT_PROGRESS</a>:</div><div class="line"><a name="l06301"></a><span class="lineno"> 6301</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847ae16711939ebe81a08ebcbd8d7d0aab3d">AST_DIAL_RESULT_PROCEEDING</a>:</div><div class="line"><a name="l06302"></a><span class="lineno"> 6302</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06303"></a><span class="lineno"> 6303</span>&#160;      }</div><div class="line"><a name="l06304"></a><span class="lineno"> 6304</span>&#160;      <span class="keywordflow">if</span> (dial_res == <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a4a8c0d54e6071d1e9a36adae685406d3">AST_DIAL_RESULT_ANSWERED</a>) {</div><div class="line"><a name="l06305"></a><span class="lineno"> 6305</span>&#160;         <span class="comment">/* Queue up reprocessing ringing trunks, and then ringing stations again */</span></div><div class="line"><a name="l06306"></a><span class="lineno"> 6306</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745">sla_queue_event</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7">SLA_EVENT_RINGING_TRUNK</a>);</div><div class="line"><a name="l06307"></a><span class="lineno"> 6307</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745">sla_queue_event</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aacd2fcc269af2c1a25641c5afa9109ea3">SLA_EVENT_DIAL_STATE</a>);</div><div class="line"><a name="l06308"></a><span class="lineno"> 6308</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06309"></a><span class="lineno"> 6309</span>&#160;      }</div><div class="line"><a name="l06310"></a><span class="lineno"> 6310</span>&#160;   }</div><div class="line"><a name="l06311"></a><span class="lineno"> 6311</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l06312"></a><span class="lineno"> 6312</span>&#160;}</div><div class="line"><a name="l06313"></a><span class="lineno"> 6313</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06314"></a><span class="lineno"> 6314</span>&#160;<span class="comment">/*! \brief Check to see if this station is already ringing</span></div><div class="line"><a name="l06315"></a><span class="lineno"> 6315</span>&#160;<span class="comment"> * \note Assumes sla.lock is locked</span></div><div class="line"><a name="l06316"></a><span class="lineno"> 6316</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06317"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae6b09ff4870f925ad151cac19454021f"> 6317</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae6b09ff4870f925ad151cac19454021f">sla_check_ringing_station</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l06318"></a><span class="lineno"> 6318</span>&#160;{</div><div class="line"><a name="l06319"></a><span class="lineno"> 6319</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *ringing_station;</div><div class="line"><a name="l06320"></a><span class="lineno"> 6320</span>&#160;</div><div class="line"><a name="l06321"></a><span class="lineno"> 6321</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_stations, ringing_station, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06322"></a><span class="lineno"> 6322</span>&#160;      <span class="keywordflow">if</span> (station == ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l06323"></a><span class="lineno"> 6323</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l06324"></a><span class="lineno"> 6324</span>&#160;   }</div><div class="line"><a name="l06325"></a><span class="lineno"> 6325</span>&#160;</div><div class="line"><a name="l06326"></a><span class="lineno"> 6326</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06327"></a><span class="lineno"> 6327</span>&#160;}</div><div class="line"><a name="l06328"></a><span class="lineno"> 6328</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06329"></a><span class="lineno"> 6329</span>&#160;<span class="comment">/*! \brief Check to see if this station has failed to be dialed in the past minute</span></div><div class="line"><a name="l06330"></a><span class="lineno"> 6330</span>&#160;<span class="comment"> * \note assumes sla.lock is locked</span></div><div class="line"><a name="l06331"></a><span class="lineno"> 6331</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06332"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a226cceaaf022a7ffc67fc7fd57049372"> 6332</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a226cceaaf022a7ffc67fc7fd57049372">sla_check_failed_station</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l06333"></a><span class="lineno"> 6333</span>&#160;{</div><div class="line"><a name="l06334"></a><span class="lineno"> 6334</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a> *failed_station;</div><div class="line"><a name="l06335"></a><span class="lineno"> 6335</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l06336"></a><span class="lineno"> 6336</span>&#160;</div><div class="line"><a name="l06337"></a><span class="lineno"> 6337</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.failed_stations, failed_station, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06338"></a><span class="lineno"> 6338</span>&#160;      <span class="keywordflow">if</span> (station != failed_station-&gt;<a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l06339"></a><span class="lineno"> 6339</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06340"></a><span class="lineno"> 6340</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), failed_station-&gt;<a class="code" href="../../d5/d9c/structsla__failed__station.html#ad0eecb6223757f0f347c81c1e2c14eb6">last_try</a>) &gt; 1000) {</div><div class="line"><a name="l06341"></a><span class="lineno"> 6341</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06342"></a><span class="lineno"> 6342</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a5b4eb1fd081eb38250072106941d5409">sla_failed_station_destroy</a>(failed_station);</div><div class="line"><a name="l06343"></a><span class="lineno"> 6343</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06344"></a><span class="lineno"> 6344</span>&#160;      }</div><div class="line"><a name="l06345"></a><span class="lineno"> 6345</span>&#160;      res = 1;</div><div class="line"><a name="l06346"></a><span class="lineno"> 6346</span>&#160;   }</div><div class="line"><a name="l06347"></a><span class="lineno"> 6347</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="line"><a name="l06348"></a><span class="lineno"> 6348</span>&#160;</div><div class="line"><a name="l06349"></a><span class="lineno"> 6349</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06350"></a><span class="lineno"> 6350</span>&#160;}</div><div class="line"><a name="l06351"></a><span class="lineno"> 6351</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06352"></a><span class="lineno"> 6352</span>&#160;<span class="comment">/*! \brief Ring a station</span></div><div class="line"><a name="l06353"></a><span class="lineno"> 6353</span>&#160;<span class="comment"> * \note Assumes sla.lock is locked</span></div><div class="line"><a name="l06354"></a><span class="lineno"> 6354</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06355"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2b054c0a7413800ad257ab0f85a82d29"> 6355</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2b054c0a7413800ad257ab0f85a82d29">sla_ring_station</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk, <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l06356"></a><span class="lineno"> 6356</span>&#160;{</div><div class="line"><a name="l06357"></a><span class="lineno"> 6357</span>&#160;   <span class="keywordtype">char</span> *tech, *tech_data;</div><div class="line"><a name="l06358"></a><span class="lineno"> 6358</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/db7/structast__dial.html">ast_dial</a> *dial;</div><div class="line"><a name="l06359"></a><span class="lineno"> 6359</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *ringing_station;</div><div class="line"><a name="l06360"></a><span class="lineno"> 6360</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847">ast_dial_result</a> res;</div><div class="line"><a name="l06361"></a><span class="lineno"> 6361</span>&#160;   <span class="keywordtype">int</span> caller_is_saved;</div><div class="line"><a name="l06362"></a><span class="lineno"> 6362</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> caller;</div><div class="line"><a name="l06363"></a><span class="lineno"> 6363</span>&#160;</div><div class="line"><a name="l06364"></a><span class="lineno"> 6364</span>&#160;   <span class="keywordflow">if</span> (!(dial = <a class="code" href="../../df/dcf/dial_8h.html#aff55dbc56bc54126828f78a47d1f2282">ast_dial_create</a>()))</div><div class="line"><a name="l06365"></a><span class="lineno"> 6365</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06366"></a><span class="lineno"> 6366</span>&#160;</div><div class="line"><a name="l06367"></a><span class="lineno"> 6367</span>&#160;   <a class="code" href="../../df/dcf/dial_8h.html#a2674932599e61fe027364a09f6d68c4e">ast_dial_set_state_callback</a>(dial, <a class="code" href="../../df/d44/app__meetme_8c.html#a49e602e2f36891d7fc2344119bed7ea8">sla_dial_state_callback</a>);</div><div class="line"><a name="l06368"></a><span class="lineno"> 6368</span>&#160;   tech_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(station-&gt;device);</div><div class="line"><a name="l06369"></a><span class="lineno"> 6369</span>&#160;   tech = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tech_data, <span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l06370"></a><span class="lineno"> 6370</span>&#160;</div><div class="line"><a name="l06371"></a><span class="lineno"> 6371</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/dcf/dial_8h.html#a2bd4d9ffd57e401b004cc131bd2ad497">ast_dial_append</a>(dial, tech, tech_data, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) == -1) {</div><div class="line"><a name="l06372"></a><span class="lineno"> 6372</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l06373"></a><span class="lineno"> 6373</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06374"></a><span class="lineno"> 6374</span>&#160;   }</div><div class="line"><a name="l06375"></a><span class="lineno"> 6375</span>&#160;</div><div class="line"><a name="l06376"></a><span class="lineno"> 6376</span>&#160;   <span class="comment">/* Do we need to save off the caller ID data? */</span></div><div class="line"><a name="l06377"></a><span class="lineno"> 6377</span>&#160;   caller_is_saved = 0;</div><div class="line"><a name="l06378"></a><span class="lineno"> 6378</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.attempt_callerid) {</div><div class="line"><a name="l06379"></a><span class="lineno"> 6379</span>&#160;      caller_is_saved = 1;</div><div class="line"><a name="l06380"></a><span class="lineno"> 6380</span>&#160;      caller = *<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l06381"></a><span class="lineno"> 6381</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#afdaf014aa17389de35cba4df16860b0d">ast_party_caller_init</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l06382"></a><span class="lineno"> 6382</span>&#160;   }</div><div class="line"><a name="l06383"></a><span class="lineno"> 6383</span>&#160;</div><div class="line"><a name="l06384"></a><span class="lineno"> 6384</span>&#160;   res = <a class="code" href="../../df/dcf/dial_8h.html#a65e30d29847af5495afe1baed823957e">ast_dial_run</a>(dial, ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, 1);</div><div class="line"><a name="l06385"></a><span class="lineno"> 6385</span>&#160;</div><div class="line"><a name="l06386"></a><span class="lineno"> 6386</span>&#160;   <span class="comment">/* Restore saved caller ID */</span></div><div class="line"><a name="l06387"></a><span class="lineno"> 6387</span>&#160;   <span class="keywordflow">if</span> (caller_is_saved) {</div><div class="line"><a name="l06388"></a><span class="lineno"> 6388</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a940e8f4562c127096b0f4ba7d25387bd">ast_party_caller_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>));</div><div class="line"><a name="l06389"></a><span class="lineno"> 6389</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a16ef76c1e3a076b0daffda589ed8ab1a">ast_channel_caller_set</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, &amp;caller);</div><div class="line"><a name="l06390"></a><span class="lineno"> 6390</span>&#160;   }</div><div class="line"><a name="l06391"></a><span class="lineno"> 6391</span>&#160;</div><div class="line"><a name="l06392"></a><span class="lineno"> 6392</span>&#160;   <span class="keywordflow">if</span> (res != <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a5838a3c4774e4d0e9a7d9d3724850ae6">AST_DIAL_RESULT_TRYING</a>) {</div><div class="line"><a name="l06393"></a><span class="lineno"> 6393</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a> *failed_station;</div><div class="line"><a name="l06394"></a><span class="lineno"> 6394</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l06395"></a><span class="lineno"> 6395</span>&#160;      <span class="keywordflow">if</span> ((failed_station = <a class="code" href="../../df/d44/app__meetme_8c.html#ac049ae187b952bcf9518074287abf84c">sla_create_failed_station</a>(station))) {</div><div class="line"><a name="l06396"></a><span class="lineno"> 6396</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.failed_stations, failed_station, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06397"></a><span class="lineno"> 6397</span>&#160;      }</div><div class="line"><a name="l06398"></a><span class="lineno"> 6398</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06399"></a><span class="lineno"> 6399</span>&#160;   }</div><div class="line"><a name="l06400"></a><span class="lineno"> 6400</span>&#160;   <span class="keywordflow">if</span> (!(ringing_station = <a class="code" href="../../df/d44/app__meetme_8c.html#ad714502c1dbeae46a86c3b4e2e210ed1">sla_create_ringing_station</a>(station))) {</div><div class="line"><a name="l06401"></a><span class="lineno"> 6401</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#a726346c9cfd11a81839e0eb580b66059">ast_dial_join</a>(dial);</div><div class="line"><a name="l06402"></a><span class="lineno"> 6402</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l06403"></a><span class="lineno"> 6403</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l06404"></a><span class="lineno"> 6404</span>&#160;   }</div><div class="line"><a name="l06405"></a><span class="lineno"> 6405</span>&#160;</div><div class="line"><a name="l06406"></a><span class="lineno"> 6406</span>&#160;   station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a> = dial;</div><div class="line"><a name="l06407"></a><span class="lineno"> 6407</span>&#160;</div><div class="line"><a name="l06408"></a><span class="lineno"> 6408</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_stations, ringing_station, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06409"></a><span class="lineno"> 6409</span>&#160;</div><div class="line"><a name="l06410"></a><span class="lineno"> 6410</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06411"></a><span class="lineno"> 6411</span>&#160;}</div><div class="line"><a name="l06412"></a><span class="lineno"> 6412</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06413"></a><span class="lineno"> 6413</span>&#160;<span class="comment">/*! \brief Check to see if a station is in use</span></div><div class="line"><a name="l06414"></a><span class="lineno"> 6414</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06415"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a313d4f30e509464cdd73a39a9af14145"> 6415</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a313d4f30e509464cdd73a39a9af14145">sla_check_inuse_station</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l06416"></a><span class="lineno"> 6416</span>&#160;{</div><div class="line"><a name="l06417"></a><span class="lineno"> 6417</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l06418"></a><span class="lineno"> 6418</span>&#160;</div><div class="line"><a name="l06419"></a><span class="lineno"> 6419</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06420"></a><span class="lineno"> 6420</span>&#160;      <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a>)</div><div class="line"><a name="l06421"></a><span class="lineno"> 6421</span>&#160;         <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l06422"></a><span class="lineno"> 6422</span>&#160;   }</div><div class="line"><a name="l06423"></a><span class="lineno"> 6423</span>&#160;</div><div class="line"><a name="l06424"></a><span class="lineno"> 6424</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06425"></a><span class="lineno"> 6425</span>&#160;}</div><div class="line"><a name="l06426"></a><span class="lineno"> 6426</span>&#160;</div><div class="line"><a name="l06427"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a9a6475fc98053a8c8320d70e3c8e186f"> 6427</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a9a6475fc98053a8c8320d70e3c8e186f">sla_find_trunk_ref</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station,</div><div class="line"><a name="l06428"></a><span class="lineno"> 6428</span>&#160;   <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>)</div><div class="line"><a name="l06429"></a><span class="lineno"> 6429</span>&#160;{</div><div class="line"><a name="l06430"></a><span class="lineno"> 6430</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06431"></a><span class="lineno"> 6431</span>&#160;</div><div class="line"><a name="l06432"></a><span class="lineno"> 6432</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06433"></a><span class="lineno"> 6433</span>&#160;      <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a> == trunk)</div><div class="line"><a name="l06434"></a><span class="lineno"> 6434</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06435"></a><span class="lineno"> 6435</span>&#160;   }</div><div class="line"><a name="l06436"></a><span class="lineno"> 6436</span>&#160;</div><div class="line"><a name="l06437"></a><span class="lineno"> 6437</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref, 1);</div><div class="line"><a name="l06438"></a><span class="lineno"> 6438</span>&#160;</div><div class="line"><a name="l06439"></a><span class="lineno"> 6439</span>&#160;   <span class="keywordflow">return</span> trunk_ref;</div><div class="line"><a name="l06440"></a><span class="lineno"> 6440</span>&#160;}</div><div class="line"><a name="l06441"></a><span class="lineno"> 6441</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06442"></a><span class="lineno"> 6442</span>&#160;<span class="comment">/*! \brief Calculate the ring delay for a given ringing trunk on a station</span></div><div class="line"><a name="l06443"></a><span class="lineno"> 6443</span>&#160;<span class="comment"> * \param station the station</span></div><div class="line"><a name="l06444"></a><span class="lineno"> 6444</span>&#160;<span class="comment"> * \param ringing_trunk the trunk.  If NULL, the highest priority ringing trunk will be used</span></div><div class="line"><a name="l06445"></a><span class="lineno"> 6445</span>&#160;<span class="comment"> * \return the number of ms left before the delay is complete, or INT_MAX if there is no delay</span></div><div class="line"><a name="l06446"></a><span class="lineno"> 6446</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06447"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#abe13fe32f5a19def3086a620f4e05cf9"> 6447</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#abe13fe32f5a19def3086a620f4e05cf9">sla_check_station_delay</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station,</div><div class="line"><a name="l06448"></a><span class="lineno"> 6448</span>&#160;   <span class="keyword">struct</span> <a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk)</div><div class="line"><a name="l06449"></a><span class="lineno"> 6449</span>&#160;{</div><div class="line"><a name="l06450"></a><span class="lineno"> 6450</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *, trunk_ref, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06451"></a><span class="lineno"> 6451</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> delay = UINT_MAX;</div><div class="line"><a name="l06452"></a><span class="lineno"> 6452</span>&#160;   <span class="keywordtype">int</span> time_left, time_elapsed;</div><div class="line"><a name="l06453"></a><span class="lineno"> 6453</span>&#160;</div><div class="line"><a name="l06454"></a><span class="lineno"> 6454</span>&#160;   <span class="keywordflow">if</span> (!ringing_trunk)</div><div class="line"><a name="l06455"></a><span class="lineno"> 6455</span>&#160;      ringing_trunk = <a class="code" href="../../df/d44/app__meetme_8c.html#aa32d3b0ec852ae1c0c34b3b28286e7d6">sla_choose_ringing_trunk</a>(station, &amp;trunk_ref, 0);</div><div class="line"><a name="l06456"></a><span class="lineno"> 6456</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l06457"></a><span class="lineno"> 6457</span>&#160;      trunk_ref = <a class="code" href="../../df/d44/app__meetme_8c.html#a9a6475fc98053a8c8320d70e3c8e186f">sla_find_trunk_ref</a>(station, ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>);</div><div class="line"><a name="l06458"></a><span class="lineno"> 6458</span>&#160;</div><div class="line"><a name="l06459"></a><span class="lineno"> 6459</span>&#160;   <span class="keywordflow">if</span> (!ringing_trunk || !trunk_ref)</div><div class="line"><a name="l06460"></a><span class="lineno"> 6460</span>&#160;      <span class="keywordflow">return</span> delay;</div><div class="line"><a name="l06461"></a><span class="lineno"> 6461</span>&#160;</div><div class="line"><a name="l06462"></a><span class="lineno"> 6462</span>&#160;   <span class="comment">/* If this station has a ring delay specific to the highest priority</span></div><div class="line"><a name="l06463"></a><span class="lineno"> 6463</span>&#160;<span class="comment">    * ringing trunk, use that.  Otherwise, use the ring delay specified</span></div><div class="line"><a name="l06464"></a><span class="lineno"> 6464</span>&#160;<span class="comment">    * globally for the station. */</span></div><div class="line"><a name="l06465"></a><span class="lineno"> 6465</span>&#160;   delay = trunk_ref-&gt;ring_delay;</div><div class="line"><a name="l06466"></a><span class="lineno"> 6466</span>&#160;   <span class="keywordflow">if</span> (!delay)</div><div class="line"><a name="l06467"></a><span class="lineno"> 6467</span>&#160;      delay = station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a>;</div><div class="line"><a name="l06468"></a><span class="lineno"> 6468</span>&#160;   <span class="keywordflow">if</span> (!delay)</div><div class="line"><a name="l06469"></a><span class="lineno"> 6469</span>&#160;      <span class="keywordflow">return</span> INT_MAX;</div><div class="line"><a name="l06470"></a><span class="lineno"> 6470</span>&#160;</div><div class="line"><a name="l06471"></a><span class="lineno"> 6471</span>&#160;   time_elapsed = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#a5fad56bdd993af8ceb77ab8a83134f0f">ring_begin</a>);</div><div class="line"><a name="l06472"></a><span class="lineno"> 6472</span>&#160;   time_left = (delay * 1000) - time_elapsed;</div><div class="line"><a name="l06473"></a><span class="lineno"> 6473</span>&#160;</div><div class="line"><a name="l06474"></a><span class="lineno"> 6474</span>&#160;   <span class="keywordflow">return</span> time_left;</div><div class="line"><a name="l06475"></a><span class="lineno"> 6475</span>&#160;}</div><div class="line"><a name="l06476"></a><span class="lineno"> 6476</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06477"></a><span class="lineno"> 6477</span>&#160;<span class="comment">/*! \brief Ring stations based on current set of ringing trunks</span></div><div class="line"><a name="l06478"></a><span class="lineno"> 6478</span>&#160;<span class="comment"> * \note Assumes that sla.lock is locked</span></div><div class="line"><a name="l06479"></a><span class="lineno"> 6479</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06480"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aae1fb3024d55422f49daef5b4737757c"> 6480</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aae1fb3024d55422f49daef5b4737757c">sla_ring_stations</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l06481"></a><span class="lineno"> 6481</span>&#160;{</div><div class="line"><a name="l06482"></a><span class="lineno"> 6482</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l06483"></a><span class="lineno"> 6483</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk;</div><div class="line"><a name="l06484"></a><span class="lineno"> 6484</span>&#160;</div><div class="line"><a name="l06485"></a><span class="lineno"> 6485</span>&#160;   <span class="comment">/* Make sure that every station that uses at least one of the ringing</span></div><div class="line"><a name="l06486"></a><span class="lineno"> 6486</span>&#160;<span class="comment">    * trunks, is ringing. */</span></div><div class="line"><a name="l06487"></a><span class="lineno"> 6487</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_trunks, ringing_trunk, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06488"></a><span class="lineno"> 6488</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a923df8202a8b865a393bb34def02c109">stations</a>, station_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06489"></a><span class="lineno"> 6489</span>&#160;         <span class="keywordtype">int</span> time_left;</div><div class="line"><a name="l06490"></a><span class="lineno"> 6490</span>&#160;</div><div class="line"><a name="l06491"></a><span class="lineno"> 6491</span>&#160;         <span class="comment">/* Is this station already ringing? */</span></div><div class="line"><a name="l06492"></a><span class="lineno"> 6492</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#ae6b09ff4870f925ad151cac19454021f">sla_check_ringing_station</a>(station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>))</div><div class="line"><a name="l06493"></a><span class="lineno"> 6493</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06494"></a><span class="lineno"> 6494</span>&#160;</div><div class="line"><a name="l06495"></a><span class="lineno"> 6495</span>&#160;         <span class="comment">/* Is this station already in a call? */</span></div><div class="line"><a name="l06496"></a><span class="lineno"> 6496</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a313d4f30e509464cdd73a39a9af14145">sla_check_inuse_station</a>(station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>))</div><div class="line"><a name="l06497"></a><span class="lineno"> 6497</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06498"></a><span class="lineno"> 6498</span>&#160;</div><div class="line"><a name="l06499"></a><span class="lineno"> 6499</span>&#160;         <span class="comment">/* Did we fail to dial this station earlier?  If so, has it been</span></div><div class="line"><a name="l06500"></a><span class="lineno"> 6500</span>&#160;<span class="comment">          * a minute since we tried? */</span></div><div class="line"><a name="l06501"></a><span class="lineno"> 6501</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a226cceaaf022a7ffc67fc7fd57049372">sla_check_failed_station</a>(station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>))</div><div class="line"><a name="l06502"></a><span class="lineno"> 6502</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06503"></a><span class="lineno"> 6503</span>&#160;</div><div class="line"><a name="l06504"></a><span class="lineno"> 6504</span>&#160;         <span class="comment">/* If this station already timed out while this trunk was ringing,</span></div><div class="line"><a name="l06505"></a><span class="lineno"> 6505</span>&#160;<span class="comment">          * do not dial it again for this ringing trunk. */</span></div><div class="line"><a name="l06506"></a><span class="lineno"> 6506</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#ae50d2c1eb2f8e66e0895bca7f8056951">sla_check_timed_out_station</a>(ringing_trunk, station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>))</div><div class="line"><a name="l06507"></a><span class="lineno"> 6507</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06508"></a><span class="lineno"> 6508</span>&#160;</div><div class="line"><a name="l06509"></a><span class="lineno"> 6509</span>&#160;         <span class="comment">/* Check for a ring delay in progress */</span></div><div class="line"><a name="l06510"></a><span class="lineno"> 6510</span>&#160;         time_left = <a class="code" href="../../df/d44/app__meetme_8c.html#abe13fe32f5a19def3086a620f4e05cf9">sla_check_station_delay</a>(station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, ringing_trunk);</div><div class="line"><a name="l06511"></a><span class="lineno"> 6511</span>&#160;         <span class="keywordflow">if</span> (time_left != INT_MAX &amp;&amp; time_left &gt; 0)</div><div class="line"><a name="l06512"></a><span class="lineno"> 6512</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06513"></a><span class="lineno"> 6513</span>&#160;</div><div class="line"><a name="l06514"></a><span class="lineno"> 6514</span>&#160;         <span class="comment">/* It is time to make this station begin to ring.  Do it! */</span></div><div class="line"><a name="l06515"></a><span class="lineno"> 6515</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a2b054c0a7413800ad257ab0f85a82d29">sla_ring_station</a>(ringing_trunk, station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>);</div><div class="line"><a name="l06516"></a><span class="lineno"> 6516</span>&#160;      }</div><div class="line"><a name="l06517"></a><span class="lineno"> 6517</span>&#160;   }</div><div class="line"><a name="l06518"></a><span class="lineno"> 6518</span>&#160;   <span class="comment">/* Now, all of the stations that should be ringing, are ringing. */</span></div><div class="line"><a name="l06519"></a><span class="lineno"> 6519</span>&#160;}</div><div class="line"><a name="l06520"></a><span class="lineno"> 6520</span>&#160;</div><div class="line"><a name="l06521"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#adca456136914b6d97720cd49b0923ffe"> 6521</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#adca456136914b6d97720cd49b0923ffe">sla_hangup_stations</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l06522"></a><span class="lineno"> 6522</span>&#160;{</div><div class="line"><a name="l06523"></a><span class="lineno"> 6523</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l06524"></a><span class="lineno"> 6524</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *ringing_station;</div><div class="line"><a name="l06525"></a><span class="lineno"> 6525</span>&#160;</div><div class="line"><a name="l06526"></a><span class="lineno"> 6526</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_stations, ringing_station, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06527"></a><span class="lineno"> 6527</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06528"></a><span class="lineno"> 6528</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk;</div><div class="line"><a name="l06529"></a><span class="lineno"> 6529</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06530"></a><span class="lineno"> 6530</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_trunks, ringing_trunk, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06531"></a><span class="lineno"> 6531</span>&#160;            <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a> == ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>)</div><div class="line"><a name="l06532"></a><span class="lineno"> 6532</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06533"></a><span class="lineno"> 6533</span>&#160;         }</div><div class="line"><a name="l06534"></a><span class="lineno"> 6534</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06535"></a><span class="lineno"> 6535</span>&#160;         <span class="keywordflow">if</span> (ringing_trunk)</div><div class="line"><a name="l06536"></a><span class="lineno"> 6536</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06537"></a><span class="lineno"> 6537</span>&#160;      }</div><div class="line"><a name="l06538"></a><span class="lineno"> 6538</span>&#160;      <span class="keywordflow">if</span> (!trunk_ref) {</div><div class="line"><a name="l06539"></a><span class="lineno"> 6539</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06540"></a><span class="lineno"> 6540</span>&#160;         <a class="code" href="../../df/dcf/dial_8h.html#a726346c9cfd11a81839e0eb580b66059">ast_dial_join</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>);</div><div class="line"><a name="l06541"></a><span class="lineno"> 6541</span>&#160;         <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a>);</div><div class="line"><a name="l06542"></a><span class="lineno"> 6542</span>&#160;         ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">dial</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06543"></a><span class="lineno"> 6543</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#aca6fbeba8b0659d90022826a4cc3e28c">sla_ringing_station_destroy</a>(ringing_station);</div><div class="line"><a name="l06544"></a><span class="lineno"> 6544</span>&#160;      }</div><div class="line"><a name="l06545"></a><span class="lineno"> 6545</span>&#160;   }</div><div class="line"><a name="l06546"></a><span class="lineno"> 6546</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="line"><a name="l06547"></a><span class="lineno"> 6547</span>&#160;}</div><div class="line"><a name="l06548"></a><span class="lineno"> 6548</span>&#160;</div><div class="line"><a name="l06549"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a69102ed9de8dc84bb7d435dac5fe22cf"> 6549</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a69102ed9de8dc84bb7d435dac5fe22cf">sla_handle_ringing_trunk_event</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l06550"></a><span class="lineno"> 6550</span>&#160;{</div><div class="line"><a name="l06551"></a><span class="lineno"> 6551</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06552"></a><span class="lineno"> 6552</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#aae1fb3024d55422f49daef5b4737757c">sla_ring_stations</a>();</div><div class="line"><a name="l06553"></a><span class="lineno"> 6553</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06554"></a><span class="lineno"> 6554</span>&#160;</div><div class="line"><a name="l06555"></a><span class="lineno"> 6555</span>&#160;   <span class="comment">/* Find stations that shouldn&#39;t be ringing anymore. */</span></div><div class="line"><a name="l06556"></a><span class="lineno"> 6556</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#adca456136914b6d97720cd49b0923ffe">sla_hangup_stations</a>();</div><div class="line"><a name="l06557"></a><span class="lineno"> 6557</span>&#160;}</div><div class="line"><a name="l06558"></a><span class="lineno"> 6558</span>&#160;</div><div class="line"><a name="l06559"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ac197e9e3bae472fa5ac27237055a3b9d"> 6559</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ac197e9e3bae472fa5ac27237055a3b9d">sla_handle_hold_event</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d0f/structsla__event.html">sla_event</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>)</div><div class="line"><a name="l06560"></a><span class="lineno"> 6560</span>&#160;{</div><div class="line"><a name="l06561"></a><span class="lineno"> 6561</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>((<span class="keywordtype">int</span> *) &amp;event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a2ccd06fb5f2eeea9c3d1798c67d271e6">hold_stations</a>, 1);</div><div class="line"><a name="l06562"></a><span class="lineno"> 6562</span>&#160;   <span class="keyword">event</span>-&gt;trunk_ref-&gt;state = <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a>;</div><div class="line"><a name="l06563"></a><span class="lineno"> 6563</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>, <span class="stringliteral">&quot;SLA:%s_%s&quot;</span>,</div><div class="line"><a name="l06564"></a><span class="lineno"> 6564</span>&#160;              event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;name, event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l06565"></a><span class="lineno"> 6565</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a17322fe34775141bef95a88fd00ed59d">SLA_TRUNK_STATE_ONHOLD</a>,</div><div class="line"><a name="l06566"></a><span class="lineno"> 6566</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215a5b13df634bb3782cb4a25c0fe0712515">INACTIVE_TRUNK_REFS</a>, event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>);</div><div class="line"><a name="l06567"></a><span class="lineno"> 6567</span>&#160;</div><div class="line"><a name="l06568"></a><span class="lineno"> 6568</span>&#160;   <span class="keywordflow">if</span> (event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#aaf4bad1817a2988a07bb37913898d976">active_stations</a> == 1) {</div><div class="line"><a name="l06569"></a><span class="lineno"> 6569</span>&#160;      <span class="comment">/* The station putting it on hold is the only one on the call, so start</span></div><div class="line"><a name="l06570"></a><span class="lineno"> 6570</span>&#160;<span class="comment">       * Music on hold to the trunk. */</span></div><div class="line"><a name="l06571"></a><span class="lineno"> 6571</span>&#160;      <span class="keyword">event</span>-&gt;trunk_ref-&gt;trunk-&gt;on_hold = 1;</div><div class="line"><a name="l06572"></a><span class="lineno"> 6572</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a>);</div><div class="line"><a name="l06573"></a><span class="lineno"> 6573</span>&#160;   }</div><div class="line"><a name="l06574"></a><span class="lineno"> 6574</span>&#160;</div><div class="line"><a name="l06575"></a><span class="lineno"> 6575</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a>(event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a>);</div><div class="line"><a name="l06576"></a><span class="lineno"> 6576</span>&#160;   <span class="keyword">event</span>-&gt;trunk_ref-&gt;chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06577"></a><span class="lineno"> 6577</span>&#160;}</div><div class="line"><a name="l06578"></a><span class="lineno"> 6578</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06579"></a><span class="lineno"> 6579</span>&#160;<span class="comment">/*! \brief Process trunk ring timeouts</span></div><div class="line"><a name="l06580"></a><span class="lineno"> 6580</span>&#160;<span class="comment"> * \note Called with sla.lock locked</span></div><div class="line"><a name="l06581"></a><span class="lineno"> 6581</span>&#160;<span class="comment"> * \return non-zero if a change to the ringing trunks was made</span></div><div class="line"><a name="l06582"></a><span class="lineno"> 6582</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06583"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#acdab27627974ea2e3fbf169bce26523b"> 6583</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#acdab27627974ea2e3fbf169bce26523b">sla_calc_trunk_timeouts</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</div><div class="line"><a name="l06584"></a><span class="lineno"> 6584</span>&#160;{</div><div class="line"><a name="l06585"></a><span class="lineno"> 6585</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk;</div><div class="line"><a name="l06586"></a><span class="lineno"> 6586</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l06587"></a><span class="lineno"> 6587</span>&#160;</div><div class="line"><a name="l06588"></a><span class="lineno"> 6588</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_trunks, ringing_trunk, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06589"></a><span class="lineno"> 6589</span>&#160;      <span class="keywordtype">int</span> time_left, time_elapsed;</div><div class="line"><a name="l06590"></a><span class="lineno"> 6590</span>&#160;      <span class="keywordflow">if</span> (!ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>)</div><div class="line"><a name="l06591"></a><span class="lineno"> 6591</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06592"></a><span class="lineno"> 6592</span>&#160;      time_elapsed = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#a5fad56bdd993af8ceb77ab8a83134f0f">ring_begin</a>);</div><div class="line"><a name="l06593"></a><span class="lineno"> 6593</span>&#160;      time_left = (ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a> * 1000) - time_elapsed;</div><div class="line"><a name="l06594"></a><span class="lineno"> 6594</span>&#160;      <span class="keywordflow">if</span> (time_left &lt;= 0) {</div><div class="line"><a name="l06595"></a><span class="lineno"> 6595</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <span class="stringliteral">&quot;SLATRUNK_STATUS&quot;</span>, <span class="stringliteral">&quot;RINGTIMEOUT&quot;</span>);</div><div class="line"><a name="l06596"></a><span class="lineno"> 6596</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06597"></a><span class="lineno"> 6597</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a53f8684abfc755b445ce1f77aba6f2c0">sla_stop_ringing_trunk</a>(ringing_trunk);</div><div class="line"><a name="l06598"></a><span class="lineno"> 6598</span>&#160;         res = 1;</div><div class="line"><a name="l06599"></a><span class="lineno"> 6599</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06600"></a><span class="lineno"> 6600</span>&#160;      }</div><div class="line"><a name="l06601"></a><span class="lineno"> 6601</span>&#160;      <span class="keywordflow">if</span> (time_left &lt; *timeout)</div><div class="line"><a name="l06602"></a><span class="lineno"> 6602</span>&#160;         *timeout = time_left;</div><div class="line"><a name="l06603"></a><span class="lineno"> 6603</span>&#160;   }</div><div class="line"><a name="l06604"></a><span class="lineno"> 6604</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l06605"></a><span class="lineno"> 6605</span>&#160;</div><div class="line"><a name="l06606"></a><span class="lineno"> 6606</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06607"></a><span class="lineno"> 6607</span>&#160;}</div><div class="line"><a name="l06608"></a><span class="lineno"> 6608</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06609"></a><span class="lineno"> 6609</span>&#160;<span class="comment">/*! \brief Process station ring timeouts</span></div><div class="line"><a name="l06610"></a><span class="lineno"> 6610</span>&#160;<span class="comment"> * \note Called with sla.lock locked</span></div><div class="line"><a name="l06611"></a><span class="lineno"> 6611</span>&#160;<span class="comment"> * \return non-zero if a change to the ringing stations was made</span></div><div class="line"><a name="l06612"></a><span class="lineno"> 6612</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06613"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af94ec9322c762bc23130e081684d09a1"> 6613</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#af94ec9322c762bc23130e081684d09a1">sla_calc_station_timeouts</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</div><div class="line"><a name="l06614"></a><span class="lineno"> 6614</span>&#160;{</div><div class="line"><a name="l06615"></a><span class="lineno"> 6615</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk;</div><div class="line"><a name="l06616"></a><span class="lineno"> 6616</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *ringing_station;</div><div class="line"><a name="l06617"></a><span class="lineno"> 6617</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l06618"></a><span class="lineno"> 6618</span>&#160;</div><div class="line"><a name="l06619"></a><span class="lineno"> 6619</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_stations, ringing_station, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06620"></a><span class="lineno"> 6620</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> ring_timeout = 0;</div><div class="line"><a name="l06621"></a><span class="lineno"> 6621</span>&#160;      <span class="keywordtype">int</span> time_elapsed, time_left = INT_MAX, final_trunk_time_left = INT_MIN;</div><div class="line"><a name="l06622"></a><span class="lineno"> 6622</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l06623"></a><span class="lineno"> 6623</span>&#160;</div><div class="line"><a name="l06624"></a><span class="lineno"> 6624</span>&#160;      <span class="comment">/* If there are any ring timeouts specified for a specific trunk</span></div><div class="line"><a name="l06625"></a><span class="lineno"> 6625</span>&#160;<span class="comment">       * on the station, then use the highest per-trunk ring timeout.</span></div><div class="line"><a name="l06626"></a><span class="lineno"> 6626</span>&#160;<span class="comment">       * Otherwise, use the ring timeout set for the entire station. */</span></div><div class="line"><a name="l06627"></a><span class="lineno"> 6627</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06628"></a><span class="lineno"> 6628</span>&#160;         <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l06629"></a><span class="lineno"> 6629</span>&#160;         <span class="keywordtype">int</span> trunk_time_elapsed, trunk_time_left;</div><div class="line"><a name="l06630"></a><span class="lineno"> 6630</span>&#160;</div><div class="line"><a name="l06631"></a><span class="lineno"> 6631</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_trunks, ringing_trunk, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06632"></a><span class="lineno"> 6632</span>&#160;            <span class="keywordflow">if</span> (ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a> == trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>)</div><div class="line"><a name="l06633"></a><span class="lineno"> 6633</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06634"></a><span class="lineno"> 6634</span>&#160;         }</div><div class="line"><a name="l06635"></a><span class="lineno"> 6635</span>&#160;         <span class="keywordflow">if</span> (!ringing_trunk)</div><div class="line"><a name="l06636"></a><span class="lineno"> 6636</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06637"></a><span class="lineno"> 6637</span>&#160;</div><div class="line"><a name="l06638"></a><span class="lineno"> 6638</span>&#160;         <span class="comment">/* If there is a trunk that is ringing without a timeout, then the</span></div><div class="line"><a name="l06639"></a><span class="lineno"> 6639</span>&#160;<span class="comment">          * only timeout that could matter is a global station ring timeout. */</span></div><div class="line"><a name="l06640"></a><span class="lineno"> 6640</span>&#160;         <span class="keywordflow">if</span> (!trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>)</div><div class="line"><a name="l06641"></a><span class="lineno"> 6641</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06642"></a><span class="lineno"> 6642</span>&#160;</div><div class="line"><a name="l06643"></a><span class="lineno"> 6643</span>&#160;         <span class="comment">/* This trunk on this station is ringing and has a timeout.</span></div><div class="line"><a name="l06644"></a><span class="lineno"> 6644</span>&#160;<span class="comment">          * However, make sure this trunk isn&#39;t still ringing from a</span></div><div class="line"><a name="l06645"></a><span class="lineno"> 6645</span>&#160;<span class="comment">          * previous timeout.  If so, don&#39;t consider it. */</span></div><div class="line"><a name="l06646"></a><span class="lineno"> 6646</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#a39b158517ec4306ae852c2a829f45601">timed_out_stations</a>, station_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06647"></a><span class="lineno"> 6647</span>&#160;            <span class="keywordflow">if</span> (station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> == ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>)</div><div class="line"><a name="l06648"></a><span class="lineno"> 6648</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l06649"></a><span class="lineno"> 6649</span>&#160;         }</div><div class="line"><a name="l06650"></a><span class="lineno"> 6650</span>&#160;         <span class="keywordflow">if</span> (station_ref)</div><div class="line"><a name="l06651"></a><span class="lineno"> 6651</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06652"></a><span class="lineno"> 6652</span>&#160;</div><div class="line"><a name="l06653"></a><span class="lineno"> 6653</span>&#160;         trunk_time_elapsed = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#a5fad56bdd993af8ceb77ab8a83134f0f">ring_begin</a>);</div><div class="line"><a name="l06654"></a><span class="lineno"> 6654</span>&#160;         trunk_time_left = (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a> * 1000) - trunk_time_elapsed;</div><div class="line"><a name="l06655"></a><span class="lineno"> 6655</span>&#160;         <span class="keywordflow">if</span> (trunk_time_left &gt; final_trunk_time_left)</div><div class="line"><a name="l06656"></a><span class="lineno"> 6656</span>&#160;            final_trunk_time_left = trunk_time_left;</div><div class="line"><a name="l06657"></a><span class="lineno"> 6657</span>&#160;      }</div><div class="line"><a name="l06658"></a><span class="lineno"> 6658</span>&#160;</div><div class="line"><a name="l06659"></a><span class="lineno"> 6659</span>&#160;      <span class="comment">/* No timeout was found for ringing trunks, and no timeout for the entire station */</span></div><div class="line"><a name="l06660"></a><span class="lineno"> 6660</span>&#160;      <span class="keywordflow">if</span> (final_trunk_time_left == INT_MIN &amp;&amp; !ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>)</div><div class="line"><a name="l06661"></a><span class="lineno"> 6661</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06662"></a><span class="lineno"> 6662</span>&#160;</div><div class="line"><a name="l06663"></a><span class="lineno"> 6663</span>&#160;      <span class="comment">/* Compute how much time is left for a global station timeout */</span></div><div class="line"><a name="l06664"></a><span class="lineno"> 6664</span>&#160;      <span class="keywordflow">if</span> (ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>) {</div><div class="line"><a name="l06665"></a><span class="lineno"> 6665</span>&#160;         ring_timeout = ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>-&gt;<a class="code" href="../../dd/d95/structsla__station.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>;</div><div class="line"><a name="l06666"></a><span class="lineno"> 6666</span>&#160;         time_elapsed = <a class="code" href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), ringing_station-&gt;<a class="code" href="../../dc/d5b/structsla__ringing__station.html#a5fad56bdd993af8ceb77ab8a83134f0f">ring_begin</a>);</div><div class="line"><a name="l06667"></a><span class="lineno"> 6667</span>&#160;         time_left = (ring_timeout * 1000) - time_elapsed;</div><div class="line"><a name="l06668"></a><span class="lineno"> 6668</span>&#160;      }</div><div class="line"><a name="l06669"></a><span class="lineno"> 6669</span>&#160;</div><div class="line"><a name="l06670"></a><span class="lineno"> 6670</span>&#160;      <span class="comment">/* If the time left based on the per-trunk timeouts is smaller than the</span></div><div class="line"><a name="l06671"></a><span class="lineno"> 6671</span>&#160;<span class="comment">       * global station ring timeout, use that. */</span></div><div class="line"><a name="l06672"></a><span class="lineno"> 6672</span>&#160;      <span class="keywordflow">if</span> (final_trunk_time_left &gt; INT_MIN &amp;&amp; final_trunk_time_left &lt; time_left)</div><div class="line"><a name="l06673"></a><span class="lineno"> 6673</span>&#160;         time_left = final_trunk_time_left;</div><div class="line"><a name="l06674"></a><span class="lineno"> 6674</span>&#160;</div><div class="line"><a name="l06675"></a><span class="lineno"> 6675</span>&#160;      <span class="comment">/* If there is no time left, the station needs to stop ringing */</span></div><div class="line"><a name="l06676"></a><span class="lineno"> 6676</span>&#160;      <span class="keywordflow">if</span> (time_left &lt;= 0) {</div><div class="line"><a name="l06677"></a><span class="lineno"> 6677</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l06678"></a><span class="lineno"> 6678</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a81942bf15eb39b2b6fd8ef56f7e3c2ed">sla_stop_ringing_station</a>(ringing_station, <a class="code" href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0aac519ad8347eceb83b914cae3bdc8018">SLA_STATION_HANGUP_TIMEOUT</a>);</div><div class="line"><a name="l06679"></a><span class="lineno"> 6679</span>&#160;         res = 1;</div><div class="line"><a name="l06680"></a><span class="lineno"> 6680</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06681"></a><span class="lineno"> 6681</span>&#160;      }</div><div class="line"><a name="l06682"></a><span class="lineno"> 6682</span>&#160;</div><div class="line"><a name="l06683"></a><span class="lineno"> 6683</span>&#160;      <span class="comment">/* There is still some time left for this station to ring, so save that</span></div><div class="line"><a name="l06684"></a><span class="lineno"> 6684</span>&#160;<span class="comment">       * timeout if it is the first event scheduled to occur */</span></div><div class="line"><a name="l06685"></a><span class="lineno"> 6685</span>&#160;      <span class="keywordflow">if</span> (time_left &lt; *timeout)</div><div class="line"><a name="l06686"></a><span class="lineno"> 6686</span>&#160;         *timeout = time_left;</div><div class="line"><a name="l06687"></a><span class="lineno"> 6687</span>&#160;   }</div><div class="line"><a name="l06688"></a><span class="lineno"> 6688</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l06689"></a><span class="lineno"> 6689</span>&#160;</div><div class="line"><a name="l06690"></a><span class="lineno"> 6690</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06691"></a><span class="lineno"> 6691</span>&#160;}</div><div class="line"><a name="l06692"></a><span class="lineno"> 6692</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06693"></a><span class="lineno"> 6693</span>&#160;<span class="comment">/*! \brief Calculate the ring delay for a station</span></div><div class="line"><a name="l06694"></a><span class="lineno"> 6694</span>&#160;<span class="comment"> * \note Assumes sla.lock is locked</span></div><div class="line"><a name="l06695"></a><span class="lineno"> 6695</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06696"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a211b086be7f6f888072a0d7818827f64"> 6696</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a211b086be7f6f888072a0d7818827f64">sla_calc_station_delays</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a>)</div><div class="line"><a name="l06697"></a><span class="lineno"> 6697</span>&#160;{</div><div class="line"><a name="l06698"></a><span class="lineno"> 6698</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station;</div><div class="line"><a name="l06699"></a><span class="lineno"> 6699</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l06700"></a><span class="lineno"> 6700</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d9/d97/structao2__iterator.html">ao2_iterator</a> i;</div><div class="line"><a name="l06701"></a><span class="lineno"> 6701</span>&#160;</div><div class="line"><a name="l06702"></a><span class="lineno"> 6702</span>&#160;   i = <a class="code" href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a>(sla_stations, 0);</div><div class="line"><a name="l06703"></a><span class="lineno"> 6703</span>&#160;   <span class="keywordflow">for</span> (; (station = <a class="code" href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a>(&amp;i)); <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station, -1)) {</div><div class="line"><a name="l06704"></a><span class="lineno"> 6704</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk;</div><div class="line"><a name="l06705"></a><span class="lineno"> 6705</span>&#160;      <span class="keywordtype">int</span> time_left;</div><div class="line"><a name="l06706"></a><span class="lineno"> 6706</span>&#160;</div><div class="line"><a name="l06707"></a><span class="lineno"> 6707</span>&#160;      <span class="comment">/* Ignore stations already ringing */</span></div><div class="line"><a name="l06708"></a><span class="lineno"> 6708</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#ae6b09ff4870f925ad151cac19454021f">sla_check_ringing_station</a>(station))</div><div class="line"><a name="l06709"></a><span class="lineno"> 6709</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06710"></a><span class="lineno"> 6710</span>&#160;</div><div class="line"><a name="l06711"></a><span class="lineno"> 6711</span>&#160;      <span class="comment">/* Ignore stations already on a call */</span></div><div class="line"><a name="l06712"></a><span class="lineno"> 6712</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a313d4f30e509464cdd73a39a9af14145">sla_check_inuse_station</a>(station))</div><div class="line"><a name="l06713"></a><span class="lineno"> 6713</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06714"></a><span class="lineno"> 6714</span>&#160;</div><div class="line"><a name="l06715"></a><span class="lineno"> 6715</span>&#160;      <span class="comment">/* Ignore stations that don&#39;t have one of their trunks ringing */</span></div><div class="line"><a name="l06716"></a><span class="lineno"> 6716</span>&#160;      <span class="keywordflow">if</span> (!(ringing_trunk = <a class="code" href="../../df/d44/app__meetme_8c.html#aa32d3b0ec852ae1c0c34b3b28286e7d6">sla_choose_ringing_trunk</a>(station, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0)))</div><div class="line"><a name="l06717"></a><span class="lineno"> 6717</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06718"></a><span class="lineno"> 6718</span>&#160;</div><div class="line"><a name="l06719"></a><span class="lineno"> 6719</span>&#160;      <span class="keywordflow">if</span> ((time_left = <a class="code" href="../../df/d44/app__meetme_8c.html#abe13fe32f5a19def3086a620f4e05cf9">sla_check_station_delay</a>(station, ringing_trunk)) == INT_MAX)</div><div class="line"><a name="l06720"></a><span class="lineno"> 6720</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06721"></a><span class="lineno"> 6721</span>&#160;</div><div class="line"><a name="l06722"></a><span class="lineno"> 6722</span>&#160;      <span class="comment">/* If there is no time left, then the station needs to start ringing.</span></div><div class="line"><a name="l06723"></a><span class="lineno"> 6723</span>&#160;<span class="comment">       * Return non-zero so that an event will be queued up an event to</span></div><div class="line"><a name="l06724"></a><span class="lineno"> 6724</span>&#160;<span class="comment">       * make that happen. */</span></div><div class="line"><a name="l06725"></a><span class="lineno"> 6725</span>&#160;      <span class="keywordflow">if</span> (time_left &lt;= 0) {</div><div class="line"><a name="l06726"></a><span class="lineno"> 6726</span>&#160;         res = 1;</div><div class="line"><a name="l06727"></a><span class="lineno"> 6727</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l06728"></a><span class="lineno"> 6728</span>&#160;      }</div><div class="line"><a name="l06729"></a><span class="lineno"> 6729</span>&#160;</div><div class="line"><a name="l06730"></a><span class="lineno"> 6730</span>&#160;      <span class="keywordflow">if</span> (time_left &lt; *timeout)</div><div class="line"><a name="l06731"></a><span class="lineno"> 6731</span>&#160;         *timeout = time_left;</div><div class="line"><a name="l06732"></a><span class="lineno"> 6732</span>&#160;   }</div><div class="line"><a name="l06733"></a><span class="lineno"> 6733</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a>(&amp;i);</div><div class="line"><a name="l06734"></a><span class="lineno"> 6734</span>&#160;</div><div class="line"><a name="l06735"></a><span class="lineno"> 6735</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l06736"></a><span class="lineno"> 6736</span>&#160;}</div><div class="line"><a name="l06737"></a><span class="lineno"> 6737</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06738"></a><span class="lineno"> 6738</span>&#160;<span class="comment">/*! \brief Calculate the time until the next known event</span></div><div class="line"><a name="l06739"></a><span class="lineno"> 6739</span>&#160;<span class="comment"> *  \note Called with sla.lock locked */</span></div><div class="line"><a name="l06740"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ae76e8f359ad4ae53436dc00dfc1434d9"> 6740</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ae76e8f359ad4ae53436dc00dfc1434d9">sla_process_timers</a>(<span class="keyword">struct</span> timespec *ts)</div><div class="line"><a name="l06741"></a><span class="lineno"> 6741</span>&#160;{</div><div class="line"><a name="l06742"></a><span class="lineno"> 6742</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a> = UINT_MAX;</div><div class="line"><a name="l06743"></a><span class="lineno"> 6743</span>&#160;   <span class="keyword">struct </span>timeval wait;</div><div class="line"><a name="l06744"></a><span class="lineno"> 6744</span>&#160;   <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> change_made = 0;</div><div class="line"><a name="l06745"></a><span class="lineno"> 6745</span>&#160;</div><div class="line"><a name="l06746"></a><span class="lineno"> 6746</span>&#160;   <span class="comment">/* Check for ring timeouts on ringing trunks */</span></div><div class="line"><a name="l06747"></a><span class="lineno"> 6747</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#acdab27627974ea2e3fbf169bce26523b">sla_calc_trunk_timeouts</a>(&amp;timeout))</div><div class="line"><a name="l06748"></a><span class="lineno"> 6748</span>&#160;      change_made = 1;</div><div class="line"><a name="l06749"></a><span class="lineno"> 6749</span>&#160;</div><div class="line"><a name="l06750"></a><span class="lineno"> 6750</span>&#160;   <span class="comment">/* Check for ring timeouts on ringing stations */</span></div><div class="line"><a name="l06751"></a><span class="lineno"> 6751</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#af94ec9322c762bc23130e081684d09a1">sla_calc_station_timeouts</a>(&amp;timeout))</div><div class="line"><a name="l06752"></a><span class="lineno"> 6752</span>&#160;      change_made = 1;</div><div class="line"><a name="l06753"></a><span class="lineno"> 6753</span>&#160;</div><div class="line"><a name="l06754"></a><span class="lineno"> 6754</span>&#160;   <span class="comment">/* Check for station ring delays */</span></div><div class="line"><a name="l06755"></a><span class="lineno"> 6755</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a211b086be7f6f888072a0d7818827f64">sla_calc_station_delays</a>(&amp;timeout))</div><div class="line"><a name="l06756"></a><span class="lineno"> 6756</span>&#160;      change_made = 1;</div><div class="line"><a name="l06757"></a><span class="lineno"> 6757</span>&#160;</div><div class="line"><a name="l06758"></a><span class="lineno"> 6758</span>&#160;   <span class="comment">/* queue reprocessing of ringing trunks */</span></div><div class="line"><a name="l06759"></a><span class="lineno"> 6759</span>&#160;   <span class="keywordflow">if</span> (change_made)</div><div class="line"><a name="l06760"></a><span class="lineno"> 6760</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a45318e8513f0ffb15b49943c18ea0e58">sla_queue_event_nolock</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7">SLA_EVENT_RINGING_TRUNK</a>);</div><div class="line"><a name="l06761"></a><span class="lineno"> 6761</span>&#160;</div><div class="line"><a name="l06762"></a><span class="lineno"> 6762</span>&#160;   <span class="comment">/* No timeout */</span></div><div class="line"><a name="l06763"></a><span class="lineno"> 6763</span>&#160;   <span class="keywordflow">if</span> (timeout == UINT_MAX)</div><div class="line"><a name="l06764"></a><span class="lineno"> 6764</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l06765"></a><span class="lineno"> 6765</span>&#160;</div><div class="line"><a name="l06766"></a><span class="lineno"> 6766</span>&#160;   <span class="keywordflow">if</span> (ts) {</div><div class="line"><a name="l06767"></a><span class="lineno"> 6767</span>&#160;      wait = <a class="code" href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a>(<a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>(), <a class="code" href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a>(timeout, 1000));</div><div class="line"><a name="l06768"></a><span class="lineno"> 6768</span>&#160;      ts-&gt;tv_sec = wait.tv_sec;</div><div class="line"><a name="l06769"></a><span class="lineno"> 6769</span>&#160;      ts-&gt;tv_nsec = wait.tv_usec * 1000;</div><div class="line"><a name="l06770"></a><span class="lineno"> 6770</span>&#160;   }</div><div class="line"><a name="l06771"></a><span class="lineno"> 6771</span>&#160;</div><div class="line"><a name="l06772"></a><span class="lineno"> 6772</span>&#160;   <span class="keywordflow">return</span> 1;</div><div class="line"><a name="l06773"></a><span class="lineno"> 6773</span>&#160;}</div><div class="line"><a name="l06774"></a><span class="lineno"> 6774</span>&#160;</div><div class="line"><a name="l06775"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ab8ff8cf939c68d801a540b7b6c637a66"> 6775</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ab8ff8cf939c68d801a540b7b6c637a66">sla_event_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../da/d0f/structsla__event.html">sla_event</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>)</div><div class="line"><a name="l06776"></a><span class="lineno"> 6776</span>&#160;{</div><div class="line"><a name="l06777"></a><span class="lineno"> 6777</span>&#160;   <span class="keywordflow">if</span> (event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>) {</div><div class="line"><a name="l06778"></a><span class="lineno"> 6778</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>, -1);</div><div class="line"><a name="l06779"></a><span class="lineno"> 6779</span>&#160;      <span class="keyword">event</span>-&gt;trunk_ref = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06780"></a><span class="lineno"> 6780</span>&#160;   }</div><div class="line"><a name="l06781"></a><span class="lineno"> 6781</span>&#160;</div><div class="line"><a name="l06782"></a><span class="lineno"> 6782</span>&#160;   <span class="keywordflow">if</span> (event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>) {</div><div class="line"><a name="l06783"></a><span class="lineno"> 6783</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, -1);</div><div class="line"><a name="l06784"></a><span class="lineno"> 6784</span>&#160;      <span class="keyword">event</span>-&gt;station = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06785"></a><span class="lineno"> 6785</span>&#160;   }</div><div class="line"><a name="l06786"></a><span class="lineno"> 6786</span>&#160;</div><div class="line"><a name="l06787"></a><span class="lineno"> 6787</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(event);</div><div class="line"><a name="l06788"></a><span class="lineno"> 6788</span>&#160;}</div><div class="line"><a name="l06789"></a><span class="lineno"> 6789</span>&#160;</div><div class="line"><a name="l06790"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4e56f1037f61fa109b10096e3dd11176"> 6790</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a4e56f1037f61fa109b10096e3dd11176">sla_thread</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l06791"></a><span class="lineno"> 6791</span>&#160;{</div><div class="line"><a name="l06792"></a><span class="lineno"> 6792</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a> *failed_station;</div><div class="line"><a name="l06793"></a><span class="lineno"> 6793</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a> *ringing_station;</div><div class="line"><a name="l06794"></a><span class="lineno"> 6794</span>&#160;</div><div class="line"><a name="l06795"></a><span class="lineno"> 6795</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06796"></a><span class="lineno"> 6796</span>&#160;</div><div class="line"><a name="l06797"></a><span class="lineno"> 6797</span>&#160;   <span class="keywordflow">while</span> (!<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.stop) {</div><div class="line"><a name="l06798"></a><span class="lineno"> 6798</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../da/d0f/structsla__event.html">sla_event</a> *<a class="code" href="../../df/d7d/structevent.html">event</a>;</div><div class="line"><a name="l06799"></a><span class="lineno"> 6799</span>&#160;      <span class="keyword">struct </span>timespec ts = { 0, };</div><div class="line"><a name="l06800"></a><span class="lineno"> 6800</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> have_timeout = 0;</div><div class="line"><a name="l06801"></a><span class="lineno"> 6801</span>&#160;</div><div class="line"><a name="l06802"></a><span class="lineno"> 6802</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.event_q)) {</div><div class="line"><a name="l06803"></a><span class="lineno"> 6803</span>&#160;         <span class="keywordflow">if</span> ((have_timeout = <a class="code" href="../../df/d44/app__meetme_8c.html#ae76e8f359ad4ae53436dc00dfc1434d9">sla_process_timers</a>(&amp;ts)))</div><div class="line"><a name="l06804"></a><span class="lineno"> 6804</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.cond, &amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock, &amp;ts);</div><div class="line"><a name="l06805"></a><span class="lineno"> 6805</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l06806"></a><span class="lineno"> 6806</span>&#160;            <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.cond, &amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06807"></a><span class="lineno"> 6807</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.stop)</div><div class="line"><a name="l06808"></a><span class="lineno"> 6808</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06809"></a><span class="lineno"> 6809</span>&#160;      }</div><div class="line"><a name="l06810"></a><span class="lineno"> 6810</span>&#160;</div><div class="line"><a name="l06811"></a><span class="lineno"> 6811</span>&#160;      <span class="keywordflow">if</span> (have_timeout)</div><div class="line"><a name="l06812"></a><span class="lineno"> 6812</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#ae76e8f359ad4ae53436dc00dfc1434d9">sla_process_timers</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06813"></a><span class="lineno"> 6813</span>&#160;</div><div class="line"><a name="l06814"></a><span class="lineno"> 6814</span>&#160;      <span class="keywordflow">while</span> ((event = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.event_q, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l06815"></a><span class="lineno"> 6815</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06816"></a><span class="lineno"> 6816</span>&#160;         <span class="keywordflow">switch</span> (event-&gt;<a class="code" href="../../da/d0f/structsla__event.html#a0c10632f8ed1ab1d182c2d1f9ae163fc">type</a>) {</div><div class="line"><a name="l06817"></a><span class="lineno"> 6817</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa23fb375274d3c96370d1a64e418f6a40">SLA_EVENT_HOLD</a>:</div><div class="line"><a name="l06818"></a><span class="lineno"> 6818</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#ac197e9e3bae472fa5ac27237055a3b9d">sla_handle_hold_event</a>(event);</div><div class="line"><a name="l06819"></a><span class="lineno"> 6819</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06820"></a><span class="lineno"> 6820</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aacd2fcc269af2c1a25641c5afa9109ea3">SLA_EVENT_DIAL_STATE</a>:</div><div class="line"><a name="l06821"></a><span class="lineno"> 6821</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a775a7291ee8f84069224106f4a9cd29f">sla_handle_dial_state_event</a>();</div><div class="line"><a name="l06822"></a><span class="lineno"> 6822</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06823"></a><span class="lineno"> 6823</span>&#160;         <span class="keywordflow">case</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7">SLA_EVENT_RINGING_TRUNK</a>:</div><div class="line"><a name="l06824"></a><span class="lineno"> 6824</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a69102ed9de8dc84bb7d435dac5fe22cf">sla_handle_ringing_trunk_event</a>();</div><div class="line"><a name="l06825"></a><span class="lineno"> 6825</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l06826"></a><span class="lineno"> 6826</span>&#160;         }</div><div class="line"><a name="l06827"></a><span class="lineno"> 6827</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#ab8ff8cf939c68d801a540b7b6c637a66">sla_event_destroy</a>(event);</div><div class="line"><a name="l06828"></a><span class="lineno"> 6828</span>&#160;         <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06829"></a><span class="lineno"> 6829</span>&#160;      }</div><div class="line"><a name="l06830"></a><span class="lineno"> 6830</span>&#160;   }</div><div class="line"><a name="l06831"></a><span class="lineno"> 6831</span>&#160;</div><div class="line"><a name="l06832"></a><span class="lineno"> 6832</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l06833"></a><span class="lineno"> 6833</span>&#160;</div><div class="line"><a name="l06834"></a><span class="lineno"> 6834</span>&#160;   <span class="keywordflow">while</span> ((ringing_station = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_stations, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l06835"></a><span class="lineno"> 6835</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#aca6fbeba8b0659d90022826a4cc3e28c">sla_ringing_station_destroy</a>(ringing_station);</div><div class="line"><a name="l06836"></a><span class="lineno"> 6836</span>&#160;   }</div><div class="line"><a name="l06837"></a><span class="lineno"> 6837</span>&#160;</div><div class="line"><a name="l06838"></a><span class="lineno"> 6838</span>&#160;   <span class="keywordflow">while</span> ((failed_station = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.failed_stations, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l06839"></a><span class="lineno"> 6839</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a5b4eb1fd081eb38250072106941d5409">sla_failed_station_destroy</a>(failed_station);</div><div class="line"><a name="l06840"></a><span class="lineno"> 6840</span>&#160;   }</div><div class="line"><a name="l06841"></a><span class="lineno"> 6841</span>&#160;</div><div class="line"><a name="l06842"></a><span class="lineno"> 6842</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06843"></a><span class="lineno"> 6843</span>&#160;}</div><div class="line"><a name="l06844"></a><span class="lineno"> 6844</span>&#160;</div><div class="line"><a name="l06845"></a><span class="lineno"><a class="line" href="../../d3/db7/structdial__trunk__args.html"> 6845</a></span>&#160;<span class="keyword">struct </span><a class="code" href="../../d3/db7/structdial__trunk__args.html">dial_trunk_args</a> {</div><div class="line"><a name="l06846"></a><span class="lineno"><a class="line" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf"> 6846</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>;</div><div class="line"><a name="l06847"></a><span class="lineno"><a class="line" href="../../d3/db7/structdial__trunk__args.html#a0569f66b3f952276c1a8ec5f2ffd5466"> 6847</a></span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *<a class="code" href="../../d3/db7/structdial__trunk__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>;</div><div class="line"><a name="l06848"></a><span class="lineno"><a class="line" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165"> 6848</a></span>&#160;   <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> *<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>;</div><div class="line"><a name="l06849"></a><span class="lineno"><a class="line" href="../../d3/db7/structdial__trunk__args.html#a45860a157e8d238e312118ddd5771454"> 6849</a></span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> *<a class="code" href="../../d3/db7/structdial__trunk__args.html#a45860a157e8d238e312118ddd5771454">cond</a>;</div><div class="line"><a name="l06850"></a><span class="lineno"> 6850</span>&#160;};</div><div class="line"><a name="l06851"></a><span class="lineno"> 6851</span>&#160;</div><div class="line"><a name="l06852"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a93908b1fddcb60b4d15ee6a3cf87dac6"> 6852</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> *<a class="code" href="../../df/d44/app__meetme_8c.html#a93908b1fddcb60b4d15ee6a3cf87dac6">dial_trunk</a>(<span class="keywordtype">void</span> *data)</div><div class="line"><a name="l06853"></a><span class="lineno"> 6853</span>&#160;{</div><div class="line"><a name="l06854"></a><span class="lineno"> 6854</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d3/db7/structdial__trunk__args.html">dial_trunk_args</a> *args = data;</div><div class="line"><a name="l06855"></a><span class="lineno"> 6855</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../db/db7/structast__dial.html">ast_dial</a> *dial;</div><div class="line"><a name="l06856"></a><span class="lineno"> 6856</span>&#160;   <span class="keywordtype">char</span> *tech, *tech_data;</div><div class="line"><a name="l06857"></a><span class="lineno"> 6857</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847">ast_dial_result</a> dial_res;</div><div class="line"><a name="l06858"></a><span class="lineno"> 6858</span>&#160;   <span class="keywordtype">char</span> conf_name[<a class="code" href="../../df/d44/app__meetme_8c.html#aa062a857f2cbc03c82512074e6c68afd">MAX_CONFNUM</a>];</div><div class="line"><a name="l06859"></a><span class="lineno"> 6859</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>;</div><div class="line"><a name="l06860"></a><span class="lineno"> 6860</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> conf_flags = { 0 };</div><div class="line"><a name="l06861"></a><span class="lineno"> 6861</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *, trunk_ref, args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06862"></a><span class="lineno"> 6862</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *, station, args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l06863"></a><span class="lineno"> 6863</span>&#160;   <span class="keywordtype">int</span> caller_is_saved;</div><div class="line"><a name="l06864"></a><span class="lineno"> 6864</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/d77/structast__party__caller.html">ast_party_caller</a> caller;</div><div class="line"><a name="l06865"></a><span class="lineno"> 6865</span>&#160;   <span class="keywordtype">int</span> last_state = 0;</div><div class="line"><a name="l06866"></a><span class="lineno"> 6866</span>&#160;   <span class="keywordtype">int</span> current_state = 0;</div><div class="line"><a name="l06867"></a><span class="lineno"> 6867</span>&#160;</div><div class="line"><a name="l06868"></a><span class="lineno"> 6868</span>&#160;   <span class="keywordflow">if</span> (!(dial = <a class="code" href="../../df/dcf/dial_8h.html#aff55dbc56bc54126828f78a47d1f2282">ast_dial_create</a>())) {</div><div class="line"><a name="l06869"></a><span class="lineno"> 6869</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06870"></a><span class="lineno"> 6870</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#a45860a157e8d238e312118ddd5771454">cond</a>);</div><div class="line"><a name="l06871"></a><span class="lineno"> 6871</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06872"></a><span class="lineno"> 6872</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06873"></a><span class="lineno"> 6873</span>&#160;   }</div><div class="line"><a name="l06874"></a><span class="lineno"> 6874</span>&#160;</div><div class="line"><a name="l06875"></a><span class="lineno"> 6875</span>&#160;   tech_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(trunk_ref-&gt;trunk-&gt;device);</div><div class="line"><a name="l06876"></a><span class="lineno"> 6876</span>&#160;   tech = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tech_data, <span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l06877"></a><span class="lineno"> 6877</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/dcf/dial_8h.html#a2bd4d9ffd57e401b004cc131bd2ad497">ast_dial_append</a>(dial, tech, tech_data, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) == -1) {</div><div class="line"><a name="l06878"></a><span class="lineno"> 6878</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06879"></a><span class="lineno"> 6879</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#a45860a157e8d238e312118ddd5771454">cond</a>);</div><div class="line"><a name="l06880"></a><span class="lineno"> 6880</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06881"></a><span class="lineno"> 6881</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l06882"></a><span class="lineno"> 6882</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06883"></a><span class="lineno"> 6883</span>&#160;   }</div><div class="line"><a name="l06884"></a><span class="lineno"> 6884</span>&#160;</div><div class="line"><a name="l06885"></a><span class="lineno"> 6885</span>&#160;   <span class="comment">/* Do we need to save of the caller ID data? */</span></div><div class="line"><a name="l06886"></a><span class="lineno"> 6886</span>&#160;   caller_is_saved = 0;</div><div class="line"><a name="l06887"></a><span class="lineno"> 6887</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.attempt_callerid) {</div><div class="line"><a name="l06888"></a><span class="lineno"> 6888</span>&#160;      caller_is_saved = 1;</div><div class="line"><a name="l06889"></a><span class="lineno"> 6889</span>&#160;      caller = *<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(trunk_ref-&gt;chan);</div><div class="line"><a name="l06890"></a><span class="lineno"> 6890</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#afdaf014aa17389de35cba4df16860b0d">ast_party_caller_init</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(trunk_ref-&gt;chan));</div><div class="line"><a name="l06891"></a><span class="lineno"> 6891</span>&#160;   }</div><div class="line"><a name="l06892"></a><span class="lineno"> 6892</span>&#160;</div><div class="line"><a name="l06893"></a><span class="lineno"> 6893</span>&#160;   dial_res = <a class="code" href="../../df/dcf/dial_8h.html#a65e30d29847af5495afe1baed823957e">ast_dial_run</a>(dial, trunk_ref-&gt;chan, 1);</div><div class="line"><a name="l06894"></a><span class="lineno"> 6894</span>&#160;</div><div class="line"><a name="l06895"></a><span class="lineno"> 6895</span>&#160;   <span class="comment">/* Restore saved caller ID */</span></div><div class="line"><a name="l06896"></a><span class="lineno"> 6896</span>&#160;   <span class="keywordflow">if</span> (caller_is_saved) {</div><div class="line"><a name="l06897"></a><span class="lineno"> 6897</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a940e8f4562c127096b0f4ba7d25387bd">ast_party_caller_free</a>(<a class="code" href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a>(trunk_ref-&gt;chan));</div><div class="line"><a name="l06898"></a><span class="lineno"> 6898</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a16ef76c1e3a076b0daffda589ed8ab1a">ast_channel_caller_set</a>(trunk_ref-&gt;chan, &amp;caller);</div><div class="line"><a name="l06899"></a><span class="lineno"> 6899</span>&#160;   }</div><div class="line"><a name="l06900"></a><span class="lineno"> 6900</span>&#160;</div><div class="line"><a name="l06901"></a><span class="lineno"> 6901</span>&#160;   <span class="keywordflow">if</span> (dial_res != <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a5838a3c4774e4d0e9a7d9d3724850ae6">AST_DIAL_RESULT_TRYING</a>) {</div><div class="line"><a name="l06902"></a><span class="lineno"> 6902</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06903"></a><span class="lineno"> 6903</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#a45860a157e8d238e312118ddd5771454">cond</a>);</div><div class="line"><a name="l06904"></a><span class="lineno"> 6904</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06905"></a><span class="lineno"> 6905</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l06906"></a><span class="lineno"> 6906</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06907"></a><span class="lineno"> 6907</span>&#160;   }</div><div class="line"><a name="l06908"></a><span class="lineno"> 6908</span>&#160;</div><div class="line"><a name="l06909"></a><span class="lineno"> 6909</span>&#160;   <span class="keywordflow">for</span> (;;) {</div><div class="line"><a name="l06910"></a><span class="lineno"> 6910</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a> = 0;</div><div class="line"><a name="l06911"></a><span class="lineno"> 6911</span>&#160;      <span class="keywordflow">switch</span> ((dial_res = <a class="code" href="../../df/dcf/dial_8h.html#a051c20e595f3e3c2be10c84b4247dd37">ast_dial_state</a>(dial))) {</div><div class="line"><a name="l06912"></a><span class="lineno"> 6912</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a4a8c0d54e6071d1e9a36adae685406d3">AST_DIAL_RESULT_ANSWERED</a>:</div><div class="line"><a name="l06913"></a><span class="lineno"> 6913</span>&#160;         trunk_ref-&gt;trunk-&gt;chan = <a class="code" href="../../df/dcf/dial_8h.html#a83d13a00643c2ad0149758507df60466">ast_dial_answered</a>(dial);</div><div class="line"><a name="l06914"></a><span class="lineno"> 6914</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a23fe48f529c8d06fa7dffc976a871a16">AST_DIAL_RESULT_HANGUP</a>:</div><div class="line"><a name="l06915"></a><span class="lineno"> 6915</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a33b279a6d9fd2024de7a1f3ccadda2ce">AST_DIAL_RESULT_INVALID</a>:</div><div class="line"><a name="l06916"></a><span class="lineno"> 6916</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a077aa090d089e32265755c7ec0f1dac2">AST_DIAL_RESULT_FAILED</a>:</div><div class="line"><a name="l06917"></a><span class="lineno"> 6917</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a4bd947d4e1f84bf01d336e228fb431e1">AST_DIAL_RESULT_TIMEOUT</a>:</div><div class="line"><a name="l06918"></a><span class="lineno"> 6918</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847ae9986b09a1806d312dd5e508aee3b9ed">AST_DIAL_RESULT_UNANSWERED</a>:</div><div class="line"><a name="l06919"></a><span class="lineno"> 6919</span>&#160;         done = 1;</div><div class="line"><a name="l06920"></a><span class="lineno"> 6920</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06921"></a><span class="lineno"> 6921</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a5838a3c4774e4d0e9a7d9d3724850ae6">AST_DIAL_RESULT_TRYING</a>:</div><div class="line"><a name="l06922"></a><span class="lineno"> 6922</span>&#160;         current_state = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a>;</div><div class="line"><a name="l06923"></a><span class="lineno"> 6923</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06924"></a><span class="lineno"> 6924</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847aba600b021de0e20a6e8a6c484f27a9e4">AST_DIAL_RESULT_RINGING</a>:</div><div class="line"><a name="l06925"></a><span class="lineno"> 6925</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a5cc795503d8ce3f6df21f18e7d30e24e">AST_DIAL_RESULT_PROGRESS</a>:</div><div class="line"><a name="l06926"></a><span class="lineno"> 6926</span>&#160;      <span class="keywordflow">case</span> <a class="code" href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847ae16711939ebe81a08ebcbd8d7d0aab3d">AST_DIAL_RESULT_PROCEEDING</a>:</div><div class="line"><a name="l06927"></a><span class="lineno"> 6927</span>&#160;         current_state = <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>;</div><div class="line"><a name="l06928"></a><span class="lineno"> 6928</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06929"></a><span class="lineno"> 6929</span>&#160;      }</div><div class="line"><a name="l06930"></a><span class="lineno"> 6930</span>&#160;      <span class="keywordflow">if</span> (done)</div><div class="line"><a name="l06931"></a><span class="lineno"> 6931</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06932"></a><span class="lineno"> 6932</span>&#160;</div><div class="line"><a name="l06933"></a><span class="lineno"> 6933</span>&#160;      <span class="comment">/* check that SLA station that originated trunk call is still alive */</span></div><div class="line"><a name="l06934"></a><span class="lineno"> 6934</span>&#160;      <span class="keywordflow">if</span> (station &amp;&amp; <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a>(station-&gt;device) == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a>) {</div><div class="line"><a name="l06935"></a><span class="lineno"> 6935</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Originating station device %s no longer active\n&quot;</span>, station-&gt;device);</div><div class="line"><a name="l06936"></a><span class="lineno"> 6936</span>&#160;         trunk_ref-&gt;trunk-&gt;chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06937"></a><span class="lineno"> 6937</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l06938"></a><span class="lineno"> 6938</span>&#160;      }</div><div class="line"><a name="l06939"></a><span class="lineno"> 6939</span>&#160;</div><div class="line"><a name="l06940"></a><span class="lineno"> 6940</span>&#160;      <span class="comment">/* If trunk line state changed, send indication back to originating SLA Station channel */</span></div><div class="line"><a name="l06941"></a><span class="lineno"> 6941</span>&#160;      <span class="keywordflow">if</span> (current_state != last_state) {</div><div class="line"><a name="l06942"></a><span class="lineno"> 6942</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(3, <span class="stringliteral">&quot;Indicating State Change %d to channel %s\n&quot;</span>, current_state, <a class="code" href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a>(trunk_ref-&gt;chan));</div><div class="line"><a name="l06943"></a><span class="lineno"> 6943</span>&#160;         <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(trunk_ref-&gt;chan, current_state);</div><div class="line"><a name="l06944"></a><span class="lineno"> 6944</span>&#160;         last_state = current_state;</div><div class="line"><a name="l06945"></a><span class="lineno"> 6945</span>&#160;      }</div><div class="line"><a name="l06946"></a><span class="lineno"> 6946</span>&#160;</div><div class="line"><a name="l06947"></a><span class="lineno"> 6947</span>&#160;      <span class="comment">/* avoid tight loop... sleep for 1/10th second */</span></div><div class="line"><a name="l06948"></a><span class="lineno"> 6948</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a>(trunk_ref-&gt;chan, 100);</div><div class="line"><a name="l06949"></a><span class="lineno"> 6949</span>&#160;   }</div><div class="line"><a name="l06950"></a><span class="lineno"> 6950</span>&#160;</div><div class="line"><a name="l06951"></a><span class="lineno"> 6951</span>&#160;   <span class="keywordflow">if</span> (!trunk_ref-&gt;trunk-&gt;chan) {</div><div class="line"><a name="l06952"></a><span class="lineno"> 6952</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06953"></a><span class="lineno"> 6953</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#a45860a157e8d238e312118ddd5771454">cond</a>);</div><div class="line"><a name="l06954"></a><span class="lineno"> 6954</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06955"></a><span class="lineno"> 6955</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#a726346c9cfd11a81839e0eb580b66059">ast_dial_join</a>(dial);</div><div class="line"><a name="l06956"></a><span class="lineno"> 6956</span>&#160;      <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l06957"></a><span class="lineno"> 6957</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06958"></a><span class="lineno"> 6958</span>&#160;   }</div><div class="line"><a name="l06959"></a><span class="lineno"> 6959</span>&#160;</div><div class="line"><a name="l06960"></a><span class="lineno"> 6960</span>&#160;   snprintf(conf_name, <span class="keyword">sizeof</span>(conf_name), <span class="stringliteral">&quot;SLA_%s&quot;</span>, trunk_ref-&gt;trunk-&gt;name);</div><div class="line"><a name="l06961"></a><span class="lineno"> 6961</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab2de736b42974f12ec7d57c41d234bf4">ast_set_flag64</a>(&amp;conf_flags,</div><div class="line"><a name="l06962"></a><span class="lineno"> 6962</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">CONFFLAG_MARKEDEXIT</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a> |</div><div class="line"><a name="l06963"></a><span class="lineno"> 6963</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac5154b9d3575197ced6458b31fba2143">CONFFLAG_SLA_TRUNK</a>);</div><div class="line"><a name="l06964"></a><span class="lineno"> 6964</span>&#160;   conf = <a class="code" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a>(conf_name, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 1, 1, 1, trunk_ref-&gt;trunk-&gt;chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06965"></a><span class="lineno"> 6965</span>&#160;</div><div class="line"><a name="l06966"></a><span class="lineno"> 6966</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06967"></a><span class="lineno"> 6967</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#a45860a157e8d238e312118ddd5771454">cond</a>);</div><div class="line"><a name="l06968"></a><span class="lineno"> 6968</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(args-&gt;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>);</div><div class="line"><a name="l06969"></a><span class="lineno"> 6969</span>&#160;</div><div class="line"><a name="l06970"></a><span class="lineno"> 6970</span>&#160;   <span class="keywordflow">if</span> (conf) {</div><div class="line"><a name="l06971"></a><span class="lineno"> 6971</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a9970b644e96d7aa6caad2001d38eb741">conf_run</a>(trunk_ref-&gt;trunk-&gt;chan, conf, &amp;conf_flags, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06972"></a><span class="lineno"> 6972</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a>(conf);</div><div class="line"><a name="l06973"></a><span class="lineno"> 6973</span>&#160;      conf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06974"></a><span class="lineno"> 6974</span>&#160;   }</div><div class="line"><a name="l06975"></a><span class="lineno"> 6975</span>&#160;</div><div class="line"><a name="l06976"></a><span class="lineno"> 6976</span>&#160;   <span class="comment">/* If the trunk is going away, it is definitely now IDLE. */</span></div><div class="line"><a name="l06977"></a><span class="lineno"> 6977</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(trunk_ref-&gt;trunk, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l06978"></a><span class="lineno"> 6978</span>&#160;</div><div class="line"><a name="l06979"></a><span class="lineno"> 6979</span>&#160;   trunk_ref-&gt;trunk-&gt;chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06980"></a><span class="lineno"> 6980</span>&#160;   trunk_ref-&gt;trunk-&gt;on_hold = 0;</div><div class="line"><a name="l06981"></a><span class="lineno"> 6981</span>&#160;</div><div class="line"><a name="l06982"></a><span class="lineno"> 6982</span>&#160;   <a class="code" href="../../df/dcf/dial_8h.html#a726346c9cfd11a81839e0eb580b66059">ast_dial_join</a>(dial);</div><div class="line"><a name="l06983"></a><span class="lineno"> 6983</span>&#160;   <a class="code" href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a>(dial);</div><div class="line"><a name="l06984"></a><span class="lineno"> 6984</span>&#160;</div><div class="line"><a name="l06985"></a><span class="lineno"> 6985</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06986"></a><span class="lineno"> 6986</span>&#160;}</div><div class="line"><a name="l06987"></a><span class="lineno"> 6987</span>&#160;<span class="comment"></span></div><div class="line"><a name="l06988"></a><span class="lineno"> 6988</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l06989"></a><span class="lineno"> 6989</span>&#160;<span class="comment"> * \brief For a given station, choose the highest priority idle trunk</span></div><div class="line"><a name="l06990"></a><span class="lineno"> 6990</span>&#160;<span class="comment"> * \pre sla_station is locked</span></div><div class="line"><a name="l06991"></a><span class="lineno"> 6991</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l06992"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a631bcace98e3013377a69b15c1bd8107"> 6992</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a631bcace98e3013377a69b15c1bd8107">sla_choose_idle_trunk</a>(<span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station)</div><div class="line"><a name="l06993"></a><span class="lineno"> 6993</span>&#160;{</div><div class="line"><a name="l06994"></a><span class="lineno"> 6994</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l06995"></a><span class="lineno"> 6995</span>&#160;</div><div class="line"><a name="l06996"></a><span class="lineno"> 6996</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l06997"></a><span class="lineno"> 6997</span>&#160;      <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a> == <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>) {</div><div class="line"><a name="l06998"></a><span class="lineno"> 6998</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref, 1);</div><div class="line"><a name="l06999"></a><span class="lineno"> 6999</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07000"></a><span class="lineno"> 7000</span>&#160;      }</div><div class="line"><a name="l07001"></a><span class="lineno"> 7001</span>&#160;   }</div><div class="line"><a name="l07002"></a><span class="lineno"> 7002</span>&#160;</div><div class="line"><a name="l07003"></a><span class="lineno"> 7003</span>&#160;   <span class="keywordflow">return</span> trunk_ref;</div><div class="line"><a name="l07004"></a><span class="lineno"> 7004</span>&#160;}</div><div class="line"><a name="l07005"></a><span class="lineno"> 7005</span>&#160;</div><div class="line"><a name="l07006"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#abdc353ad8c1a89ea6138263c38d3a10a"> 7006</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#abdc353ad8c1a89ea6138263c38d3a10a">sla_station_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l07007"></a><span class="lineno"> 7007</span>&#160;{</div><div class="line"><a name="l07008"></a><span class="lineno"> 7008</span>&#160;   <span class="keywordtype">char</span> *station_name, *trunk_name;</div><div class="line"><a name="l07009"></a><span class="lineno"> 7009</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *, station, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l07010"></a><span class="lineno"> 7010</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *, trunk_ref, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l07011"></a><span class="lineno"> 7011</span>&#160;   <span class="keywordtype">char</span> conf_name[<a class="code" href="../../df/d44/app__meetme_8c.html#aa062a857f2cbc03c82512074e6c68afd">MAX_CONFNUM</a>];</div><div class="line"><a name="l07012"></a><span class="lineno"> 7012</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> conf_flags = { 0 };</div><div class="line"><a name="l07013"></a><span class="lineno"> 7013</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>;</div><div class="line"><a name="l07014"></a><span class="lineno"> 7014</span>&#160;</div><div class="line"><a name="l07015"></a><span class="lineno"> 7015</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l07016"></a><span class="lineno"> 7016</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid Arguments to SLAStation!\n&quot;</span>);</div><div class="line"><a name="l07017"></a><span class="lineno"> 7017</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLASTATION_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l07018"></a><span class="lineno"> 7018</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07019"></a><span class="lineno"> 7019</span>&#160;   }</div><div class="line"><a name="l07020"></a><span class="lineno"> 7020</span>&#160;</div><div class="line"><a name="l07021"></a><span class="lineno"> 7021</span>&#160;   trunk_name = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l07022"></a><span class="lineno"> 7022</span>&#160;   station_name = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;trunk_name, <span class="stringliteral">&quot;_&quot;</span>);</div><div class="line"><a name="l07023"></a><span class="lineno"> 7023</span>&#160;</div><div class="line"><a name="l07024"></a><span class="lineno"> 7024</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(station_name)) {</div><div class="line"><a name="l07025"></a><span class="lineno"> 7025</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid Arguments to SLAStation!\n&quot;</span>);</div><div class="line"><a name="l07026"></a><span class="lineno"> 7026</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLASTATION_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l07027"></a><span class="lineno"> 7027</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07028"></a><span class="lineno"> 7028</span>&#160;   }</div><div class="line"><a name="l07029"></a><span class="lineno"> 7029</span>&#160;</div><div class="line"><a name="l07030"></a><span class="lineno"> 7030</span>&#160;   station = <a class="code" href="../../df/d44/app__meetme_8c.html#a3c7dabe74df23208e4dce8bc3fbb6d77">sla_find_station</a>(station_name);</div><div class="line"><a name="l07031"></a><span class="lineno"> 7031</span>&#160;</div><div class="line"><a name="l07032"></a><span class="lineno"> 7032</span>&#160;   <span class="keywordflow">if</span> (!station) {</div><div class="line"><a name="l07033"></a><span class="lineno"> 7033</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Station &#39;%s&#39; not found!\n&quot;</span>, station_name);</div><div class="line"><a name="l07034"></a><span class="lineno"> 7034</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLASTATION_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l07035"></a><span class="lineno"> 7035</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07036"></a><span class="lineno"> 7036</span>&#160;   }</div><div class="line"><a name="l07037"></a><span class="lineno"> 7037</span>&#160;</div><div class="line"><a name="l07038"></a><span class="lineno"> 7038</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l07039"></a><span class="lineno"> 7039</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(trunk_name)) {</div><div class="line"><a name="l07040"></a><span class="lineno"> 7040</span>&#160;      trunk_ref = <a class="code" href="../../df/d44/app__meetme_8c.html#aea0981ea332b08880d6404c65fe64135">sla_find_trunk_ref_byname</a>(station, trunk_name);</div><div class="line"><a name="l07041"></a><span class="lineno"> 7041</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07042"></a><span class="lineno"> 7042</span>&#160;      trunk_ref = <a class="code" href="../../df/d44/app__meetme_8c.html#a631bcace98e3013377a69b15c1bd8107">sla_choose_idle_trunk</a>(station);</div><div class="line"><a name="l07043"></a><span class="lineno"> 7043</span>&#160;   }</div><div class="line"><a name="l07044"></a><span class="lineno"> 7044</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l07045"></a><span class="lineno"> 7045</span>&#160;</div><div class="line"><a name="l07046"></a><span class="lineno"> 7046</span>&#160;   <span class="keywordflow">if</span> (!trunk_ref) {</div><div class="line"><a name="l07047"></a><span class="lineno"> 7047</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(trunk_name))</div><div class="line"><a name="l07048"></a><span class="lineno"> 7048</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;No trunks available for call.\n&quot;</span>);</div><div class="line"><a name="l07049"></a><span class="lineno"> 7049</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l07050"></a><span class="lineno"> 7050</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Can&#39;t join existing call on trunk &quot;</span></div><div class="line"><a name="l07051"></a><span class="lineno"> 7051</span>&#160;            <span class="stringliteral">&quot;&#39;%s&#39; due to access controls.\n&quot;</span>, trunk_name);</div><div class="line"><a name="l07052"></a><span class="lineno"> 7052</span>&#160;      }</div><div class="line"><a name="l07053"></a><span class="lineno"> 7053</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLASTATION_STATUS&quot;</span>, <span class="stringliteral">&quot;CONGESTION&quot;</span>);</div><div class="line"><a name="l07054"></a><span class="lineno"> 7054</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07055"></a><span class="lineno"> 7055</span>&#160;   }</div><div class="line"><a name="l07056"></a><span class="lineno"> 7056</span>&#160;</div><div class="line"><a name="l07057"></a><span class="lineno"> 7057</span>&#160;   <span class="keywordflow">if</span> (trunk_ref-&gt;state == <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a>) {</div><div class="line"><a name="l07058"></a><span class="lineno"> 7058</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#acbbba9058696fc07cec1485a88b5f4ad">ast_atomic_dec_and_test</a>((<span class="keywordtype">int</span> *) &amp;trunk_ref-&gt;trunk-&gt;hold_stations) == 1)</div><div class="line"><a name="l07059"></a><span class="lineno"> 7059</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(trunk_ref-&gt;trunk, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07060"></a><span class="lineno"> 7060</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l07061"></a><span class="lineno"> 7061</span>&#160;         trunk_ref-&gt;state = <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>;</div><div class="line"><a name="l07062"></a><span class="lineno"> 7062</span>&#160;         <a class="code" href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a>(<a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a>, <a class="code" href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a>,</div><div class="line"><a name="l07063"></a><span class="lineno"> 7063</span>&#160;                    <span class="stringliteral">&quot;SLA:%s_%s&quot;</span>, station-&gt;name, trunk_ref-&gt;trunk-&gt;name);</div><div class="line"><a name="l07064"></a><span class="lineno"> 7064</span>&#160;      }</div><div class="line"><a name="l07065"></a><span class="lineno"> 7065</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trunk_ref-&gt;state == <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a4822569aa984228bec67e07f5b9862a5">SLA_TRUNK_STATE_RINGING</a>) {</div><div class="line"><a name="l07066"></a><span class="lineno"> 7066</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk;</div><div class="line"><a name="l07067"></a><span class="lineno"> 7067</span>&#160;</div><div class="line"><a name="l07068"></a><span class="lineno"> 7068</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07069"></a><span class="lineno"> 7069</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_trunks, ringing_trunk, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07070"></a><span class="lineno"> 7070</span>&#160;         <span class="keywordflow">if</span> (ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a> == trunk_ref-&gt;trunk) {</div><div class="line"><a name="l07071"></a><span class="lineno"> 7071</span>&#160;            <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l07072"></a><span class="lineno"> 7072</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07073"></a><span class="lineno"> 7073</span>&#160;         }</div><div class="line"><a name="l07074"></a><span class="lineno"> 7074</span>&#160;      }</div><div class="line"><a name="l07075"></a><span class="lineno"> 7075</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="line"><a name="l07076"></a><span class="lineno"> 7076</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07077"></a><span class="lineno"> 7077</span>&#160;</div><div class="line"><a name="l07078"></a><span class="lineno"> 7078</span>&#160;      <span class="keywordflow">if</span> (ringing_trunk) {</div><div class="line"><a name="l07079"></a><span class="lineno"> 7079</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a7392cc7f56677c79368716971d1ec023">answer_trunk_chan</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l07080"></a><span class="lineno"> 7080</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07081"></a><span class="lineno"> 7081</span>&#160;</div><div class="line"><a name="l07082"></a><span class="lineno"> 7082</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#aa319bcde509ca0b265674afd864ec081">sla_ringing_trunk_destroy</a>(ringing_trunk);</div><div class="line"><a name="l07083"></a><span class="lineno"> 7083</span>&#160;</div><div class="line"><a name="l07084"></a><span class="lineno"> 7084</span>&#160;         <span class="comment">/* Queue up reprocessing ringing trunks, and then ringing stations again */</span></div><div class="line"><a name="l07085"></a><span class="lineno"> 7085</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745">sla_queue_event</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7">SLA_EVENT_RINGING_TRUNK</a>);</div><div class="line"><a name="l07086"></a><span class="lineno"> 7086</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745">sla_queue_event</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aacd2fcc269af2c1a25641c5afa9109ea3">SLA_EVENT_DIAL_STATE</a>);</div><div class="line"><a name="l07087"></a><span class="lineno"> 7087</span>&#160;      }</div><div class="line"><a name="l07088"></a><span class="lineno"> 7088</span>&#160;   }</div><div class="line"><a name="l07089"></a><span class="lineno"> 7089</span>&#160;</div><div class="line"><a name="l07090"></a><span class="lineno"> 7090</span>&#160;   trunk_ref-&gt;chan = chan;</div><div class="line"><a name="l07091"></a><span class="lineno"> 7091</span>&#160;</div><div class="line"><a name="l07092"></a><span class="lineno"> 7092</span>&#160;   <span class="keywordflow">if</span> (!trunk_ref-&gt;trunk-&gt;chan) {</div><div class="line"><a name="l07093"></a><span class="lineno"> 7093</span>&#160;      <a class="code" href="../../d8/dc5/structast__mutex__info.html">ast_mutex_t</a> cond_lock;</div><div class="line"><a name="l07094"></a><span class="lineno"> 7094</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a> <a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>;</div><div class="line"><a name="l07095"></a><span class="lineno"> 7095</span>&#160;      pthread_t dont_care;</div><div class="line"><a name="l07096"></a><span class="lineno"> 7096</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d3/db7/structdial__trunk__args.html">dial_trunk_args</a> args = {</div><div class="line"><a name="l07097"></a><span class="lineno"> 7097</span>&#160;         .<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a> = <a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>,</div><div class="line"><a name="l07098"></a><span class="lineno"> 7098</span>&#160;         .station = <a class="code" href="../../d3/db7/structdial__trunk__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>,</div><div class="line"><a name="l07099"></a><span class="lineno"> 7099</span>&#160;         .cond_lock = &amp;<a class="code" href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">cond_lock</a>,</div><div class="line"><a name="l07100"></a><span class="lineno"> 7100</span>&#160;         .cond = &amp;<a class="code" href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a>,</div><div class="line"><a name="l07101"></a><span class="lineno"> 7101</span>&#160;      };</div><div class="line"><a name="l07102"></a><span class="lineno"> 7102</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>, 1);</div><div class="line"><a name="l07103"></a><span class="lineno"> 7103</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(<a class="code" href="../../d3/db7/structdial__trunk__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, 1);</div><div class="line"><a name="l07104"></a><span class="lineno"> 7104</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07105"></a><span class="lineno"> 7105</span>&#160;      <span class="comment">/* Create a thread to dial the trunk and dump it into the conference.</span></div><div class="line"><a name="l07106"></a><span class="lineno"> 7106</span>&#160;<span class="comment">       * However, we want to wait until the trunk has been dialed and the</span></div><div class="line"><a name="l07107"></a><span class="lineno"> 7107</span>&#160;<span class="comment">       * conference is created before continuing on here. */</span></div><div class="line"><a name="l07108"></a><span class="lineno"> 7108</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a>(chan);</div><div class="line"><a name="l07109"></a><span class="lineno"> 7109</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;cond_lock);</div><div class="line"><a name="l07110"></a><span class="lineno"> 7110</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;cond, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07111"></a><span class="lineno"> 7111</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;cond_lock);</div><div class="line"><a name="l07112"></a><span class="lineno"> 7112</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#aa73be876e3a4024b91ce2e09d8b945d1">ast_pthread_create_detached_background</a>(&amp;dont_care, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a93908b1fddcb60b4d15ee6a3cf87dac6">dial_trunk</a>, &amp;args);</div><div class="line"><a name="l07113"></a><span class="lineno"> 7113</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a>(&amp;cond, &amp;cond_lock);</div><div class="line"><a name="l07114"></a><span class="lineno"> 7114</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;cond_lock);</div><div class="line"><a name="l07115"></a><span class="lineno"> 7115</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;cond_lock);</div><div class="line"><a name="l07116"></a><span class="lineno"> 7116</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;cond);</div><div class="line"><a name="l07117"></a><span class="lineno"> 7117</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a>(chan);</div><div class="line"><a name="l07118"></a><span class="lineno"> 7118</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>) {</div><div class="line"><a name="l07119"></a><span class="lineno"> 7119</span>&#160;         <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;Trunk didn&#39;t get created. chan: %lx\n&quot;</span>, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>) <a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>);</div><div class="line"><a name="l07120"></a><span class="lineno"> 7120</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLASTATION_STATUS&quot;</span>, <span class="stringliteral">&quot;CONGESTION&quot;</span>);</div><div class="line"><a name="l07121"></a><span class="lineno"> 7121</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07122"></a><span class="lineno"> 7122</span>&#160;         <a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07123"></a><span class="lineno"> 7123</span>&#160;         <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07124"></a><span class="lineno"> 7124</span>&#160;      }</div><div class="line"><a name="l07125"></a><span class="lineno"> 7125</span>&#160;   }</div><div class="line"><a name="l07126"></a><span class="lineno"> 7126</span>&#160;</div><div class="line"><a name="l07127"></a><span class="lineno"> 7127</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>((<span class="keywordtype">int</span> *) &amp;<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#aaf4bad1817a2988a07bb37913898d976">active_stations</a>, 1) == 0 &amp;&amp;</div><div class="line"><a name="l07128"></a><span class="lineno"> 7128</span>&#160;      <a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#adbb5ea13ff67a0f65a71edddb0eef433">on_hold</a>) {</div><div class="line"><a name="l07129"></a><span class="lineno"> 7129</span>&#160;      <a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#adbb5ea13ff67a0f65a71edddb0eef433">on_hold</a> = 0;</div><div class="line"><a name="l07130"></a><span class="lineno"> 7130</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">chan</a>, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a>);</div><div class="line"><a name="l07131"></a><span class="lineno"> 7131</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07132"></a><span class="lineno"> 7132</span>&#160;   }</div><div class="line"><a name="l07133"></a><span class="lineno"> 7133</span>&#160;</div><div class="line"><a name="l07134"></a><span class="lineno"> 7134</span>&#160;   snprintf(conf_name, <span class="keyword">sizeof</span>(conf_name), <span class="stringliteral">&quot;SLA_%s&quot;</span>, <a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l07135"></a><span class="lineno"> 7135</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab2de736b42974f12ec7d57c41d234bf4">ast_set_flag64</a>(&amp;conf_flags,</div><div class="line"><a name="l07136"></a><span class="lineno"> 7136</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">CONFFLAG_MARKEDEXIT</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac793d6a4a78ffd301d51be06a771b70c">CONFFLAG_SLA_STATION</a>);</div><div class="line"><a name="l07137"></a><span class="lineno"> 7137</span>&#160;   <a class="code" href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a>(chan);</div><div class="line"><a name="l07138"></a><span class="lineno"> 7138</span>&#160;   conf = <a class="code" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a>(conf_name, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 0, 0, 1, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07139"></a><span class="lineno"> 7139</span>&#160;   <span class="keywordflow">if</span> (conf) {</div><div class="line"><a name="l07140"></a><span class="lineno"> 7140</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a9970b644e96d7aa6caad2001d38eb741">conf_run</a>(chan, conf, &amp;conf_flags, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07141"></a><span class="lineno"> 7141</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a>(conf);</div><div class="line"><a name="l07142"></a><span class="lineno"> 7142</span>&#160;      conf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07143"></a><span class="lineno"> 7143</span>&#160;   }</div><div class="line"><a name="l07144"></a><span class="lineno"> 7144</span>&#160;   <a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">chan</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07145"></a><span class="lineno"> 7145</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../dd/d42/lock_8h.html#acbbba9058696fc07cec1485a88b5f4ad">ast_atomic_dec_and_test</a>((<span class="keywordtype">int</span> *) &amp;<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#aaf4bad1817a2988a07bb37913898d976">active_stations</a>) &amp;&amp;</div><div class="line"><a name="l07146"></a><span class="lineno"> 7146</span>&#160;      <a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a> != <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a>) {</div><div class="line"><a name="l07147"></a><span class="lineno"> 7147</span>&#160;      strncat(conf_name, <span class="stringliteral">&quot;,K&quot;</span>, <span class="keyword">sizeof</span>(conf_name) - strlen(conf_name) - 1);</div><div class="line"><a name="l07148"></a><span class="lineno"> 7148</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a977a38245885ede0c3accf2f56fc57f8">admin_exec</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, conf_name);</div><div class="line"><a name="l07149"></a><span class="lineno"> 7149</span>&#160;      <a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a2ccd06fb5f2eeea9c3d1798c67d271e6">hold_stations</a> = 0;</div><div class="line"><a name="l07150"></a><span class="lineno"> 7150</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(<a class="code" href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">trunk_ref</a>-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07151"></a><span class="lineno"> 7151</span>&#160;   }</div><div class="line"><a name="l07152"></a><span class="lineno"> 7152</span>&#160;</div><div class="line"><a name="l07153"></a><span class="lineno"> 7153</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLASTATION_STATUS&quot;</span>, <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l07154"></a><span class="lineno"> 7154</span>&#160;</div><div class="line"><a name="l07155"></a><span class="lineno"> 7155</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07156"></a><span class="lineno"> 7156</span>&#160;}</div><div class="line"><a name="l07157"></a><span class="lineno"> 7157</span>&#160;</div><div class="line"><a name="l07158"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2cfc4b639c2388d173253cb1e30c4b21"> 7158</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2cfc4b639c2388d173253cb1e30c4b21">sla_trunk_ref_destructor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l07159"></a><span class="lineno"> 7159</span>&#160;{</div><div class="line"><a name="l07160"></a><span class="lineno"> 7160</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref = obj;</div><div class="line"><a name="l07161"></a><span class="lineno"> 7161</span>&#160;</div><div class="line"><a name="l07162"></a><span class="lineno"> 7162</span>&#160;   <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>) {</div><div class="line"><a name="l07163"></a><span class="lineno"> 7163</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, -1);</div><div class="line"><a name="l07164"></a><span class="lineno"> 7164</span>&#160;      trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07165"></a><span class="lineno"> 7165</span>&#160;   }</div><div class="line"><a name="l07166"></a><span class="lineno"> 7166</span>&#160;}</div><div class="line"><a name="l07167"></a><span class="lineno"> 7167</span>&#160;</div><div class="line"><a name="l07168"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a89b13052de37686017f177352a20a8d0"> 7168</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a89b13052de37686017f177352a20a8d0">create_trunk_ref</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>)</div><div class="line"><a name="l07169"></a><span class="lineno"> 7169</span>&#160;{</div><div class="line"><a name="l07170"></a><span class="lineno"> 7170</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l07171"></a><span class="lineno"> 7171</span>&#160;</div><div class="line"><a name="l07172"></a><span class="lineno"> 7172</span>&#160;   <span class="keywordflow">if</span> (!(trunk_ref = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*trunk_ref), <a class="code" href="../../df/d44/app__meetme_8c.html#a2cfc4b639c2388d173253cb1e30c4b21">sla_trunk_ref_destructor</a>))) {</div><div class="line"><a name="l07173"></a><span class="lineno"> 7173</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07174"></a><span class="lineno"> 7174</span>&#160;   }</div><div class="line"><a name="l07175"></a><span class="lineno"> 7175</span>&#160;</div><div class="line"><a name="l07176"></a><span class="lineno"> 7176</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk, 1);</div><div class="line"><a name="l07177"></a><span class="lineno"> 7177</span>&#160;   trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a> = <a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>;</div><div class="line"><a name="l07178"></a><span class="lineno"> 7178</span>&#160;</div><div class="line"><a name="l07179"></a><span class="lineno"> 7179</span>&#160;   <span class="keywordflow">return</span> trunk_ref;</div><div class="line"><a name="l07180"></a><span class="lineno"> 7180</span>&#160;}</div><div class="line"><a name="l07181"></a><span class="lineno"> 7181</span>&#160;</div><div class="line"><a name="l07182"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a501c3df2a5fe48200560b09c9fdcef73"> 7182</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *<a class="code" href="../../df/d44/app__meetme_8c.html#a501c3df2a5fe48200560b09c9fdcef73">queue_ringing_trunk</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>)</div><div class="line"><a name="l07183"></a><span class="lineno"> 7183</span>&#160;{</div><div class="line"><a name="l07184"></a><span class="lineno"> 7184</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk;</div><div class="line"><a name="l07185"></a><span class="lineno"> 7185</span>&#160;</div><div class="line"><a name="l07186"></a><span class="lineno"> 7186</span>&#160;   <span class="keywordflow">if</span> (!(ringing_trunk = <a class="code" href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a>(1, <span class="keyword">sizeof</span>(*ringing_trunk)))) {</div><div class="line"><a name="l07187"></a><span class="lineno"> 7187</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07188"></a><span class="lineno"> 7188</span>&#160;   }</div><div class="line"><a name="l07189"></a><span class="lineno"> 7189</span>&#160;</div><div class="line"><a name="l07190"></a><span class="lineno"> 7190</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk, 1);</div><div class="line"><a name="l07191"></a><span class="lineno"> 7191</span>&#160;   ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a> = <a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>;</div><div class="line"><a name="l07192"></a><span class="lineno"> 7192</span>&#160;   ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#a5fad56bdd993af8ceb77ab8a83134f0f">ring_begin</a> = <a class="code" href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a>();</div><div class="line"><a name="l07193"></a><span class="lineno"> 7193</span>&#160;</div><div class="line"><a name="l07194"></a><span class="lineno"> 7194</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(trunk, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a4822569aa984228bec67e07f5b9862a5">SLA_TRUNK_STATE_RINGING</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07195"></a><span class="lineno"> 7195</span>&#160;</div><div class="line"><a name="l07196"></a><span class="lineno"> 7196</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07197"></a><span class="lineno"> 7197</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_trunks, ringing_trunk, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l07198"></a><span class="lineno"> 7198</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07199"></a><span class="lineno"> 7199</span>&#160;</div><div class="line"><a name="l07200"></a><span class="lineno"> 7200</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745">sla_queue_event</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7">SLA_EVENT_RINGING_TRUNK</a>);</div><div class="line"><a name="l07201"></a><span class="lineno"> 7201</span>&#160;</div><div class="line"><a name="l07202"></a><span class="lineno"> 7202</span>&#160;   <span class="keywordflow">return</span> ringing_trunk;</div><div class="line"><a name="l07203"></a><span class="lineno"> 7203</span>&#160;}</div><div class="line"><a name="l07204"></a><span class="lineno"> 7204</span>&#160;</div><div class="line"><a name="l07205"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aa319bcde509ca0b265674afd864ec081"> 7205</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aa319bcde509ca0b265674afd864ec081">sla_ringing_trunk_destroy</a>(<span class="keyword">struct</span> <a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk)</div><div class="line"><a name="l07206"></a><span class="lineno"> 7206</span>&#160;{</div><div class="line"><a name="l07207"></a><span class="lineno"> 7207</span>&#160;   <span class="keywordflow">if</span> (ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>) {</div><div class="line"><a name="l07208"></a><span class="lineno"> 7208</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a>, -1);</div><div class="line"><a name="l07209"></a><span class="lineno"> 7209</span>&#160;      ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a> = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07210"></a><span class="lineno"> 7210</span>&#160;   }</div><div class="line"><a name="l07211"></a><span class="lineno"> 7211</span>&#160;</div><div class="line"><a name="l07212"></a><span class="lineno"> 7212</span>&#160;   <a class="code" href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a>(ringing_trunk);</div><div class="line"><a name="l07213"></a><span class="lineno"> 7213</span>&#160;}</div><div class="line"><a name="l07214"></a><span class="lineno"> 7214</span>&#160;</div><div class="line"><a name="l07215"></a><span class="lineno"> 7215</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l07216"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a458e651af6690959efa2afb96be7d609a7c230d0734a626ce84da297e21241b7d"> 7216</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a458e651af6690959efa2afb96be7d609a7c230d0734a626ce84da297e21241b7d">SLA_TRUNK_OPT_MOH</a> = (1 &lt;&lt; 0),</div><div class="line"><a name="l07217"></a><span class="lineno"> 7217</span>&#160;};</div><div class="line"><a name="l07218"></a><span class="lineno"> 7218</span>&#160;</div><div class="line"><a name="l07219"></a><span class="lineno"> 7219</span>&#160;<span class="keyword">enum</span> {</div><div class="line"><a name="l07220"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1f9aebf1de3ebbf4283a4dcf73308562a01a9ae9e3c42b9f83ba7849e41bc9019"> 7220</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a1f9aebf1de3ebbf4283a4dcf73308562a01a9ae9e3c42b9f83ba7849e41bc9019">SLA_TRUNK_OPT_ARG_MOH_CLASS</a> = 0,</div><div class="line"><a name="l07221"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1f9aebf1de3ebbf4283a4dcf73308562ac88d4b53d16b3e05539a0b7e13a215ca"> 7221</a></span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a1f9aebf1de3ebbf4283a4dcf73308562ac88d4b53d16b3e05539a0b7e13a215ca">SLA_TRUNK_OPT_ARG_ARRAY_SIZE</a> = 1,</div><div class="line"><a name="l07222"></a><span class="lineno"> 7222</span>&#160;};</div><div class="line"><a name="l07223"></a><span class="lineno"> 7223</span>&#160;</div><div class="line"><a name="l07224"></a><span class="lineno"> 7224</span>&#160;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a520a3c6b7d57903d9a616051da1a019d">AST_APP_OPTIONS</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a53f72efb8505b337ae85a05c01b409cf">sla_trunk_opts</a>, <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ab451a4653176c211d131b899e1f91bde">BEGIN_OPTIONS</a></div><div class="line"><a name="l07225"></a><span class="lineno"> 7225</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a>(<span class="charliteral">&#39;M&#39;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a458e651af6690959efa2afb96be7d609a7c230d0734a626ce84da297e21241b7d">SLA_TRUNK_OPT_MOH</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1f9aebf1de3ebbf4283a4dcf73308562a01a9ae9e3c42b9f83ba7849e41bc9019">SLA_TRUNK_OPT_ARG_MOH_CLASS</a>),</div><div class="line"><a name="l07226"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a53f72efb8505b337ae85a05c01b409cf"> 7226</a></span>&#160;<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a2a1890787b3e55318c417c0a3e1432c7">END_OPTIONS</a> );</div><div class="line"><a name="l07227"></a><span class="lineno"> 7227</span>&#160;</div><div class="line"><a name="l07228"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a9a7384427e576a2fc12a20d258fe29a8"> 7228</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a9a7384427e576a2fc12a20d258fe29a8">sla_trunk_exec</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l07229"></a><span class="lineno"> 7229</span>&#160;{</div><div class="line"><a name="l07230"></a><span class="lineno"> 7230</span>&#160;   <span class="keywordtype">char</span> conf_name[<a class="code" href="../../df/d44/app__meetme_8c.html#aa062a857f2cbc03c82512074e6c68afd">MAX_CONFNUM</a>];</div><div class="line"><a name="l07231"></a><span class="lineno"> 7231</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>;</div><div class="line"><a name="l07232"></a><span class="lineno"> 7232</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d10/structast__flags64.html">ast_flags64</a> conf_flags = { 0 };</div><div class="line"><a name="l07233"></a><span class="lineno"> 7233</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *, trunk, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l07234"></a><span class="lineno"> 7234</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a> *ringing_trunk;</div><div class="line"><a name="l07235"></a><span class="lineno"> 7235</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(args,</div><div class="line"><a name="l07236"></a><span class="lineno"> 7236</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(trunk_name);</div><div class="line"><a name="l07237"></a><span class="lineno"> 7237</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>);</div><div class="line"><a name="l07238"></a><span class="lineno"> 7238</span>&#160;   );</div><div class="line"><a name="l07239"></a><span class="lineno"> 7239</span>&#160;   <span class="keywordtype">char</span> *opts[<a class="code" href="../../df/d44/app__meetme_8c.html#a1f9aebf1de3ebbf4283a4dcf73308562ac88d4b53d16b3e05539a0b7e13a215ca">SLA_TRUNK_OPT_ARG_ARRAY_SIZE</a>] = { <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, };</div><div class="line"><a name="l07240"></a><span class="lineno"> 7240</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> opt_flags = { 0 };</div><div class="line"><a name="l07241"></a><span class="lineno"> 7241</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l07242"></a><span class="lineno"> 7242</span>&#160;</div><div class="line"><a name="l07243"></a><span class="lineno"> 7243</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l07244"></a><span class="lineno"> 7244</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;The SLATrunk application requires an argument, the trunk name\n&quot;</span>);</div><div class="line"><a name="l07245"></a><span class="lineno"> 7245</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07246"></a><span class="lineno"> 7246</span>&#160;   }</div><div class="line"><a name="l07247"></a><span class="lineno"> 7247</span>&#160;</div><div class="line"><a name="l07248"></a><span class="lineno"> 7248</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l07249"></a><span class="lineno"> 7249</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(args, parse);</div><div class="line"><a name="l07250"></a><span class="lineno"> 7250</span>&#160;   <span class="keywordflow">if</span> (args.argc == 2) {</div><div class="line"><a name="l07251"></a><span class="lineno"> 7251</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a53f72efb8505b337ae85a05c01b409cf">sla_trunk_opts</a>, &amp;opt_flags, opts, args.options)) {</div><div class="line"><a name="l07252"></a><span class="lineno"> 7252</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Error parsing options for SLATrunk\n&quot;</span>);</div><div class="line"><a name="l07253"></a><span class="lineno"> 7253</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07254"></a><span class="lineno"> 7254</span>&#160;      }</div><div class="line"><a name="l07255"></a><span class="lineno"> 7255</span>&#160;   }</div><div class="line"><a name="l07256"></a><span class="lineno"> 7256</span>&#160;</div><div class="line"><a name="l07257"></a><span class="lineno"> 7257</span>&#160;   trunk = <a class="code" href="../../df/d44/app__meetme_8c.html#af590722094b4b8eee8319a0ae644a8c1">sla_find_trunk</a>(args.trunk_name);</div><div class="line"><a name="l07258"></a><span class="lineno"> 7258</span>&#160;</div><div class="line"><a name="l07259"></a><span class="lineno"> 7259</span>&#160;   <span class="keywordflow">if</span> (!trunk) {</div><div class="line"><a name="l07260"></a><span class="lineno"> 7260</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;SLA Trunk &#39;%s&#39; not found!\n&quot;</span>, args.trunk_name);</div><div class="line"><a name="l07261"></a><span class="lineno"> 7261</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLATRUNK_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l07262"></a><span class="lineno"> 7262</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07263"></a><span class="lineno"> 7263</span>&#160;   }</div><div class="line"><a name="l07264"></a><span class="lineno"> 7264</span>&#160;</div><div class="line"><a name="l07265"></a><span class="lineno"> 7265</span>&#160;   <span class="keywordflow">if</span> (trunk-&gt;chan) {</div><div class="line"><a name="l07266"></a><span class="lineno"> 7266</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Call came in on %s, but the trunk is already in use!\n&quot;</span>,</div><div class="line"><a name="l07267"></a><span class="lineno"> 7267</span>&#160;         args.trunk_name);</div><div class="line"><a name="l07268"></a><span class="lineno"> 7268</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLATRUNK_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l07269"></a><span class="lineno"> 7269</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07270"></a><span class="lineno"> 7270</span>&#160;   }</div><div class="line"><a name="l07271"></a><span class="lineno"> 7271</span>&#160;</div><div class="line"><a name="l07272"></a><span class="lineno"> 7272</span>&#160;   trunk-&gt;chan = chan;</div><div class="line"><a name="l07273"></a><span class="lineno"> 7273</span>&#160;</div><div class="line"><a name="l07274"></a><span class="lineno"> 7274</span>&#160;   <span class="keywordflow">if</span> (!(ringing_trunk = <a class="code" href="../../df/d44/app__meetme_8c.html#a501c3df2a5fe48200560b09c9fdcef73">queue_ringing_trunk</a>(trunk))) {</div><div class="line"><a name="l07275"></a><span class="lineno"> 7275</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLATRUNK_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l07276"></a><span class="lineno"> 7276</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07277"></a><span class="lineno"> 7277</span>&#160;   }</div><div class="line"><a name="l07278"></a><span class="lineno"> 7278</span>&#160;</div><div class="line"><a name="l07279"></a><span class="lineno"> 7279</span>&#160;   snprintf(conf_name, <span class="keyword">sizeof</span>(conf_name), <span class="stringliteral">&quot;SLA_%s&quot;</span>, args.trunk_name);</div><div class="line"><a name="l07280"></a><span class="lineno"> 7280</span>&#160;   conf = <a class="code" href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a>(conf_name, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>, 1, 1, 1, chan, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07281"></a><span class="lineno"> 7281</span>&#160;   <span class="keywordflow">if</span> (!conf) {</div><div class="line"><a name="l07282"></a><span class="lineno"> 7282</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLATRUNK_STATUS&quot;</span>, <span class="stringliteral">&quot;FAILURE&quot;</span>);</div><div class="line"><a name="l07283"></a><span class="lineno"> 7283</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07284"></a><span class="lineno"> 7284</span>&#160;   }</div><div class="line"><a name="l07285"></a><span class="lineno"> 7285</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#ab2de736b42974f12ec7d57c41d234bf4">ast_set_flag64</a>(&amp;conf_flags,</div><div class="line"><a name="l07286"></a><span class="lineno"> 7286</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">CONFFLAG_MARKEDEXIT</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a> | <a class="code" href="../../df/d44/app__meetme_8c.html#acf5c7d460a31834ce02e286d133db0d7">CONFFLAG_NO_AUDIO_UNTIL_UP</a>);</div><div class="line"><a name="l07287"></a><span class="lineno"> 7287</span>&#160;</div><div class="line"><a name="l07288"></a><span class="lineno"> 7288</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a>(&amp;opt_flags, <a class="code" href="../../df/d44/app__meetme_8c.html#a458e651af6690959efa2afb96be7d609a7c230d0734a626ce84da297e21241b7d">SLA_TRUNK_OPT_MOH</a>)) {</div><div class="line"><a name="l07289"></a><span class="lineno"> 7289</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, -1);</div><div class="line"><a name="l07290"></a><span class="lineno"> 7290</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#ab2de736b42974f12ec7d57c41d234bf4">ast_set_flag64</a>(&amp;conf_flags, <a class="code" href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a9fc9420ac235de446f7a35a766a7bd4b">CONFFLAG_MOH</a>);</div><div class="line"><a name="l07291"></a><span class="lineno"> 7291</span>&#160;   } <span class="keywordflow">else</span></div><div class="line"><a name="l07292"></a><span class="lineno"> 7292</span>&#160;      <a class="code" href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a>(chan, <a class="code" href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a>);</div><div class="line"><a name="l07293"></a><span class="lineno"> 7293</span>&#160;</div><div class="line"><a name="l07294"></a><span class="lineno"> 7294</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a9970b644e96d7aa6caad2001d38eb741">conf_run</a>(chan, conf, &amp;conf_flags, opts);</div><div class="line"><a name="l07295"></a><span class="lineno"> 7295</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a>(conf);</div><div class="line"><a name="l07296"></a><span class="lineno"> 7296</span>&#160;   conf = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07297"></a><span class="lineno"> 7297</span>&#160;   trunk-&gt;chan = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07298"></a><span class="lineno"> 7298</span>&#160;   trunk-&gt;on_hold = 0;</div><div class="line"><a name="l07299"></a><span class="lineno"> 7299</span>&#160;</div><div class="line"><a name="l07300"></a><span class="lineno"> 7300</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a>(trunk, <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07301"></a><span class="lineno"> 7301</span>&#160;</div><div class="line"><a name="l07302"></a><span class="lineno"> 7302</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a>(chan, <span class="stringliteral">&quot;SLATRUNK_STATUS&quot;</span>))</div><div class="line"><a name="l07303"></a><span class="lineno"> 7303</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLATRUNK_STATUS&quot;</span>, <span class="stringliteral">&quot;SUCCESS&quot;</span>);</div><div class="line"><a name="l07304"></a><span class="lineno"> 7304</span>&#160;</div><div class="line"><a name="l07305"></a><span class="lineno"> 7305</span>&#160;   <span class="comment">/* Remove the entry from the list of ringing trunks if it is still there. */</span></div><div class="line"><a name="l07306"></a><span class="lineno"> 7306</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07307"></a><span class="lineno"> 7307</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.ringing_trunks, ringing_trunk, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07308"></a><span class="lineno"> 7308</span>&#160;      <span class="keywordflow">if</span> (ringing_trunk-&gt;<a class="code" href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">trunk</a> == trunk) {</div><div class="line"><a name="l07309"></a><span class="lineno"> 7309</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l07310"></a><span class="lineno"> 7310</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07311"></a><span class="lineno"> 7311</span>&#160;      }</div><div class="line"><a name="l07312"></a><span class="lineno"> 7312</span>&#160;   }</div><div class="line"><a name="l07313"></a><span class="lineno"> 7313</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a>;</div><div class="line"><a name="l07314"></a><span class="lineno"> 7314</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07315"></a><span class="lineno"> 7315</span>&#160;   <span class="keywordflow">if</span> (ringing_trunk) {</div><div class="line"><a name="l07316"></a><span class="lineno"> 7316</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#aa319bcde509ca0b265674afd864ec081">sla_ringing_trunk_destroy</a>(ringing_trunk);</div><div class="line"><a name="l07317"></a><span class="lineno"> 7317</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a>(chan, <span class="stringliteral">&quot;SLATRUNK_STATUS&quot;</span>, <span class="stringliteral">&quot;UNANSWERED&quot;</span>);</div><div class="line"><a name="l07318"></a><span class="lineno"> 7318</span>&#160;      <span class="comment">/* Queue reprocessing of ringing trunks to make stations stop ringing</span></div><div class="line"><a name="l07319"></a><span class="lineno"> 7319</span>&#160;<span class="comment">       * that shouldn&#39;t be ringing after this trunk stopped. */</span></div><div class="line"><a name="l07320"></a><span class="lineno"> 7320</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745">sla_queue_event</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7">SLA_EVENT_RINGING_TRUNK</a>);</div><div class="line"><a name="l07321"></a><span class="lineno"> 7321</span>&#160;   }</div><div class="line"><a name="l07322"></a><span class="lineno"> 7322</span>&#160;</div><div class="line"><a name="l07323"></a><span class="lineno"> 7323</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07324"></a><span class="lineno"> 7324</span>&#160;}</div><div class="line"><a name="l07325"></a><span class="lineno"> 7325</span>&#160;</div><div class="line"><a name="l07326"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ab2f6aeedfe3c63d7c493a1c849893d10"> 7326</a></span>&#160;<span class="keyword">static</span> <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> <a class="code" href="../../df/d44/app__meetme_8c.html#ab2f6aeedfe3c63d7c493a1c849893d10">sla_state</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *data)</div><div class="line"><a name="l07327"></a><span class="lineno"> 7327</span>&#160;{</div><div class="line"><a name="l07328"></a><span class="lineno"> 7328</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, *station_name, *trunk_name;</div><div class="line"><a name="l07329"></a><span class="lineno"> 7329</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *, station, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l07330"></a><span class="lineno"> 7330</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l07331"></a><span class="lineno"> 7331</span>&#160;   <span class="keyword">enum</span> <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a> res = <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>;</div><div class="line"><a name="l07332"></a><span class="lineno"> 7332</span>&#160;</div><div class="line"><a name="l07333"></a><span class="lineno"> 7333</span>&#160;   trunk_name = buf = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l07334"></a><span class="lineno"> 7334</span>&#160;   station_name = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;trunk_name, <span class="stringliteral">&quot;_&quot;</span>);</div><div class="line"><a name="l07335"></a><span class="lineno"> 7335</span>&#160;</div><div class="line"><a name="l07336"></a><span class="lineno"> 7336</span>&#160;   station = <a class="code" href="../../df/d44/app__meetme_8c.html#a3c7dabe74df23208e4dce8bc3fbb6d77">sla_find_station</a>(station_name);</div><div class="line"><a name="l07337"></a><span class="lineno"> 7337</span>&#160;   <span class="keywordflow">if</span> (station) {</div><div class="line"><a name="l07338"></a><span class="lineno"> 7338</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l07339"></a><span class="lineno"> 7339</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;trunks, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07340"></a><span class="lineno"> 7340</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(trunk_name, trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>)) {</div><div class="line"><a name="l07341"></a><span class="lineno"> 7341</span>&#160;            res = <a class="code" href="../../df/d44/app__meetme_8c.html#ab69997f20dabd9a6a6f42f00dd2290f4">sla_state_to_devstate</a>(trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a>);</div><div class="line"><a name="l07342"></a><span class="lineno"> 7342</span>&#160;            <span class="keywordflow">break</span>;</div><div class="line"><a name="l07343"></a><span class="lineno"> 7343</span>&#160;         }</div><div class="line"><a name="l07344"></a><span class="lineno"> 7344</span>&#160;      }</div><div class="line"><a name="l07345"></a><span class="lineno"> 7345</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l07346"></a><span class="lineno"> 7346</span>&#160;   }</div><div class="line"><a name="l07347"></a><span class="lineno"> 7347</span>&#160;</div><div class="line"><a name="l07348"></a><span class="lineno"> 7348</span>&#160;   <span class="keywordflow">if</span> (res == <a class="code" href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a>) {</div><div class="line"><a name="l07349"></a><span class="lineno"> 7349</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Could not determine state for trunk %s on station %s!\n&quot;</span>,</div><div class="line"><a name="l07350"></a><span class="lineno"> 7350</span>&#160;         trunk_name, station_name);</div><div class="line"><a name="l07351"></a><span class="lineno"> 7351</span>&#160;   }</div><div class="line"><a name="l07352"></a><span class="lineno"> 7352</span>&#160;</div><div class="line"><a name="l07353"></a><span class="lineno"> 7353</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l07354"></a><span class="lineno"> 7354</span>&#160;}</div><div class="line"><a name="l07355"></a><span class="lineno"> 7355</span>&#160;</div><div class="line"><a name="l07356"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a34e2d6ebe0cd1d0cc400ef4c6a9bc21d"> 7356</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a34e2d6ebe0cd1d0cc400ef4c6a9bc21d">sla_trunk_release_refs</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l07357"></a><span class="lineno"> 7357</span>&#160;{</div><div class="line"><a name="l07358"></a><span class="lineno"> 7358</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *trunk = obj;</div><div class="line"><a name="l07359"></a><span class="lineno"> 7359</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l07360"></a><span class="lineno"> 7360</span>&#160;</div><div class="line"><a name="l07361"></a><span class="lineno"> 7361</span>&#160;   <span class="keywordflow">while</span> ((station_ref = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a923df8202a8b865a393bb34def02c109">stations</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l07362"></a><span class="lineno"> 7362</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station_ref, -1);</div><div class="line"><a name="l07363"></a><span class="lineno"> 7363</span>&#160;   }</div><div class="line"><a name="l07364"></a><span class="lineno"> 7364</span>&#160;</div><div class="line"><a name="l07365"></a><span class="lineno"> 7365</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07366"></a><span class="lineno"> 7366</span>&#160;}</div><div class="line"><a name="l07367"></a><span class="lineno"> 7367</span>&#160;</div><div class="line"><a name="l07368"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a84f96d304b9dcffc5d92ed02f4df9ad8"> 7368</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a84f96d304b9dcffc5d92ed02f4df9ad8">sla_station_release_refs</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l07369"></a><span class="lineno"> 7369</span>&#160;{</div><div class="line"><a name="l07370"></a><span class="lineno"> 7370</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station = obj;</div><div class="line"><a name="l07371"></a><span class="lineno"> 7371</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l07372"></a><span class="lineno"> 7372</span>&#160;</div><div class="line"><a name="l07373"></a><span class="lineno"> 7373</span>&#160;   <span class="keywordflow">while</span> ((trunk_ref = <a class="code" href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, <a class="code" href="../../d3/d96/structentry.html">entry</a>))) {</div><div class="line"><a name="l07374"></a><span class="lineno"> 7374</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref, -1);</div><div class="line"><a name="l07375"></a><span class="lineno"> 7375</span>&#160;   }</div><div class="line"><a name="l07376"></a><span class="lineno"> 7376</span>&#160;</div><div class="line"><a name="l07377"></a><span class="lineno"> 7377</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07378"></a><span class="lineno"> 7378</span>&#160;}</div><div class="line"><a name="l07379"></a><span class="lineno"> 7379</span>&#160;</div><div class="line"><a name="l07380"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aedae223718f09a236ef53ccb85869959"> 7380</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aedae223718f09a236ef53ccb85869959">sla_station_destructor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l07381"></a><span class="lineno"> 7381</span>&#160;{</div><div class="line"><a name="l07382"></a><span class="lineno"> 7382</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station = obj;</div><div class="line"><a name="l07383"></a><span class="lineno"> 7383</span>&#160;</div><div class="line"><a name="l07384"></a><span class="lineno"> 7384</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;sla_station destructor for &#39;%s&#39;\n&quot;</span>, station-&gt;name);</div><div class="line"><a name="l07385"></a><span class="lineno"> 7385</span>&#160;</div><div class="line"><a name="l07386"></a><span class="lineno"> 7386</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(station-&gt;autocontext)) {</div><div class="line"><a name="l07387"></a><span class="lineno"> 7387</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l07388"></a><span class="lineno"> 7388</span>&#160;</div><div class="line"><a name="l07389"></a><span class="lineno"> 7389</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07390"></a><span class="lineno"> 7390</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>];</div><div class="line"><a name="l07391"></a><span class="lineno"> 7391</span>&#160;         <span class="keywordtype">char</span> hint[<a class="code" href="../../db/de0/pbx_8h.html#a3414b82af9b33fe907c9377c5c73c453">AST_MAX_APP</a>];</div><div class="line"><a name="l07392"></a><span class="lineno"> 7392</span>&#160;         snprintf(exten, <span class="keyword">sizeof</span>(exten), <span class="stringliteral">&quot;%s_%s&quot;</span>, station-&gt;name, trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l07393"></a><span class="lineno"> 7393</span>&#160;         snprintf(hint, <span class="keyword">sizeof</span>(hint), <span class="stringliteral">&quot;SLA:%s&quot;</span>, exten);</div><div class="line"><a name="l07394"></a><span class="lineno"> 7394</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a721c6ba091102f155a586e09b2a526bf">ast_context_remove_extension</a>(station-&gt;autocontext, exten,</div><div class="line"><a name="l07395"></a><span class="lineno"> 7395</span>&#160;            1, sla_registrar);</div><div class="line"><a name="l07396"></a><span class="lineno"> 7396</span>&#160;         <a class="code" href="../../db/de0/pbx_8h.html#a721c6ba091102f155a586e09b2a526bf">ast_context_remove_extension</a>(station-&gt;autocontext, hint,</div><div class="line"><a name="l07397"></a><span class="lineno"> 7397</span>&#160;            <a class="code" href="../../db/de0/pbx_8h.html#ad2e753a683024fad0b34ece3b1aef83a">PRIORITY_HINT</a>, sla_registrar);</div><div class="line"><a name="l07398"></a><span class="lineno"> 7398</span>&#160;      }</div><div class="line"><a name="l07399"></a><span class="lineno"> 7399</span>&#160;   }</div><div class="line"><a name="l07400"></a><span class="lineno"> 7400</span>&#160;</div><div class="line"><a name="l07401"></a><span class="lineno"> 7401</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a84f96d304b9dcffc5d92ed02f4df9ad8">sla_station_release_refs</a>(station, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l07402"></a><span class="lineno"> 7402</span>&#160;</div><div class="line"><a name="l07403"></a><span class="lineno"> 7403</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(station);</div><div class="line"><a name="l07404"></a><span class="lineno"> 7404</span>&#160;}</div><div class="line"><a name="l07405"></a><span class="lineno"> 7405</span>&#160;</div><div class="line"><a name="l07406"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a68f160d36f15edc473aa580c5cf24ed8"> 7406</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a68f160d36f15edc473aa580c5cf24ed8">sla_trunk_cmp</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l07407"></a><span class="lineno"> 7407</span>&#160;{</div><div class="line"><a name="l07408"></a><span class="lineno"> 7408</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *trunk = obj, *trunk2 = arg;</div><div class="line"><a name="l07409"></a><span class="lineno"> 7409</span>&#160;</div><div class="line"><a name="l07410"></a><span class="lineno"> 7410</span>&#160;   <span class="keywordflow">return</span> !strcasecmp(trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>, trunk2-&gt;name) ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a> : 0;</div><div class="line"><a name="l07411"></a><span class="lineno"> 7411</span>&#160;}</div><div class="line"><a name="l07412"></a><span class="lineno"> 7412</span>&#160;</div><div class="line"><a name="l07413"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af029f88d6b217cd9194b466ef86dc398"> 7413</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#af029f88d6b217cd9194b466ef86dc398">sla_station_cmp</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l07414"></a><span class="lineno"> 7414</span>&#160;{</div><div class="line"><a name="l07415"></a><span class="lineno"> 7415</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station = obj, *station2 = arg;</div><div class="line"><a name="l07416"></a><span class="lineno"> 7416</span>&#160;</div><div class="line"><a name="l07417"></a><span class="lineno"> 7417</span>&#160;   <span class="keywordflow">return</span> !strcasecmp(station-&gt;name, station2-&gt;name) ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a> : 0;</div><div class="line"><a name="l07418"></a><span class="lineno"> 7418</span>&#160;}</div><div class="line"><a name="l07419"></a><span class="lineno"> 7419</span>&#160;</div><div class="line"><a name="l07420"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#abc917c910c7fd37e34c7a985a227e0b9"> 7420</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#abc917c910c7fd37e34c7a985a227e0b9">sla_destroy</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l07421"></a><span class="lineno"> 7421</span>&#160;{</div><div class="line"><a name="l07422"></a><span class="lineno"> 7422</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.thread != <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a>) {</div><div class="line"><a name="l07423"></a><span class="lineno"> 7423</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07424"></a><span class="lineno"> 7424</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.stop = 1;</div><div class="line"><a name="l07425"></a><span class="lineno"> 7425</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.cond);</div><div class="line"><a name="l07426"></a><span class="lineno"> 7426</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07427"></a><span class="lineno"> 7427</span>&#160;      pthread_join(<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07428"></a><span class="lineno"> 7428</span>&#160;   }</div><div class="line"><a name="l07429"></a><span class="lineno"> 7429</span>&#160;</div><div class="line"><a name="l07430"></a><span class="lineno"> 7430</span>&#160;   <span class="comment">/* Drop any created contexts from the dialplan */</span></div><div class="line"><a name="l07431"></a><span class="lineno"> 7431</span>&#160;   <a class="code" href="../../db/de0/pbx_8h.html#a9546b830c22c693a2baed08e48569401">ast_context_destroy</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sla_registrar);</div><div class="line"><a name="l07432"></a><span class="lineno"> 7432</span>&#160;</div><div class="line"><a name="l07433"></a><span class="lineno"> 7433</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07434"></a><span class="lineno"> 7434</span>&#160;   <a class="code" href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.cond);</div><div class="line"><a name="l07435"></a><span class="lineno"> 7435</span>&#160;</div><div class="line"><a name="l07436"></a><span class="lineno"> 7436</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(sla_trunks, 0, <a class="code" href="../../df/d44/app__meetme_8c.html#a34e2d6ebe0cd1d0cc400ef4c6a9bc21d">sla_trunk_release_refs</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07437"></a><span class="lineno"> 7437</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(sla_stations, 0, <a class="code" href="../../df/d44/app__meetme_8c.html#a84f96d304b9dcffc5d92ed02f4df9ad8">sla_station_release_refs</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07438"></a><span class="lineno"> 7438</span>&#160;</div><div class="line"><a name="l07439"></a><span class="lineno"> 7439</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sla_trunks, -1);</div><div class="line"><a name="l07440"></a><span class="lineno"> 7440</span>&#160;   sla_trunks = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07441"></a><span class="lineno"> 7441</span>&#160;</div><div class="line"><a name="l07442"></a><span class="lineno"> 7442</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(sla_stations, -1);</div><div class="line"><a name="l07443"></a><span class="lineno"> 7443</span>&#160;   sla_stations = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07444"></a><span class="lineno"> 7444</span>&#160;}</div><div class="line"><a name="l07445"></a><span class="lineno"> 7445</span>&#160;</div><div class="line"><a name="l07446"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a272ffb0f64aec9b1792174c33042cb75"> 7446</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a272ffb0f64aec9b1792174c33042cb75">sla_check_device</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *device)</div><div class="line"><a name="l07447"></a><span class="lineno"> 7447</span>&#160;{</div><div class="line"><a name="l07448"></a><span class="lineno"> 7448</span>&#160;   <span class="keywordtype">char</span> *tech, *tech_data;</div><div class="line"><a name="l07449"></a><span class="lineno"> 7449</span>&#160;</div><div class="line"><a name="l07450"></a><span class="lineno"> 7450</span>&#160;   tech_data = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(device);</div><div class="line"><a name="l07451"></a><span class="lineno"> 7451</span>&#160;   tech = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;tech_data, <span class="stringliteral">&quot;/&quot;</span>);</div><div class="line"><a name="l07452"></a><span class="lineno"> 7452</span>&#160;</div><div class="line"><a name="l07453"></a><span class="lineno"> 7453</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tech) || <a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(tech_data))</div><div class="line"><a name="l07454"></a><span class="lineno"> 7454</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07455"></a><span class="lineno"> 7455</span>&#160;</div><div class="line"><a name="l07456"></a><span class="lineno"> 7456</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07457"></a><span class="lineno"> 7457</span>&#160;}</div><div class="line"><a name="l07458"></a><span class="lineno"> 7458</span>&#160;</div><div class="line"><a name="l07459"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#aa43e19d1500b459250f7b1804726ab56"> 7459</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#aa43e19d1500b459250f7b1804726ab56">sla_trunk_destructor</a>(<span class="keywordtype">void</span> *obj)</div><div class="line"><a name="l07460"></a><span class="lineno"> 7460</span>&#160;{</div><div class="line"><a name="l07461"></a><span class="lineno"> 7461</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *trunk = obj;</div><div class="line"><a name="l07462"></a><span class="lineno"> 7462</span>&#160;</div><div class="line"><a name="l07463"></a><span class="lineno"> 7463</span>&#160;   <a class="code" href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a>(1, <span class="stringliteral">&quot;sla_trunk destructor for &#39;%s&#39;\n&quot;</span>, trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l07464"></a><span class="lineno"> 7464</span>&#160;</div><div class="line"><a name="l07465"></a><span class="lineno"> 7465</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a20af6c4792f461c41fa7606913493f27">autocontext</a>)) {</div><div class="line"><a name="l07466"></a><span class="lineno"> 7466</span>&#160;      <a class="code" href="../../db/de0/pbx_8h.html#a721c6ba091102f155a586e09b2a526bf">ast_context_remove_extension</a>(trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a20af6c4792f461c41fa7606913493f27">autocontext</a>, <span class="stringliteral">&quot;s&quot;</span>, 1, sla_registrar);</div><div class="line"><a name="l07467"></a><span class="lineno"> 7467</span>&#160;   }</div><div class="line"><a name="l07468"></a><span class="lineno"> 7468</span>&#160;</div><div class="line"><a name="l07469"></a><span class="lineno"> 7469</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a34e2d6ebe0cd1d0cc400ef4c6a9bc21d">sla_trunk_release_refs</a>(trunk, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l07470"></a><span class="lineno"> 7470</span>&#160;</div><div class="line"><a name="l07471"></a><span class="lineno"> 7471</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a>(trunk);</div><div class="line"><a name="l07472"></a><span class="lineno"> 7472</span>&#160;}</div><div class="line"><a name="l07473"></a><span class="lineno"> 7473</span>&#160;</div><div class="line"><a name="l07474"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1f6d3d4a6e263e27a4f665aaf5cad1b3"> 7474</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a1f6d3d4a6e263e27a4f665aaf5cad1b3">sla_build_trunk</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg, <span class="keyword">const</span> <span class="keywordtype">char</span> *cat)</div><div class="line"><a name="l07475"></a><span class="lineno"> 7475</span>&#160;{</div><div class="line"><a name="l07476"></a><span class="lineno"> 7476</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *, trunk, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l07477"></a><span class="lineno"> 7477</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l07478"></a><span class="lineno"> 7478</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *dev;</div><div class="line"><a name="l07479"></a><span class="lineno"> 7479</span>&#160;   <span class="keywordtype">int</span> existing_trunk = 0;</div><div class="line"><a name="l07480"></a><span class="lineno"> 7480</span>&#160;</div><div class="line"><a name="l07481"></a><span class="lineno"> 7481</span>&#160;   <span class="keywordflow">if</span> (!(dev = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, cat, <span class="stringliteral">&quot;device&quot;</span>))) {</div><div class="line"><a name="l07482"></a><span class="lineno"> 7482</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;SLA Trunk &#39;%s&#39; defined with no device!\n&quot;</span>, cat);</div><div class="line"><a name="l07483"></a><span class="lineno"> 7483</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07484"></a><span class="lineno"> 7484</span>&#160;   }</div><div class="line"><a name="l07485"></a><span class="lineno"> 7485</span>&#160;</div><div class="line"><a name="l07486"></a><span class="lineno"> 7486</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#a272ffb0f64aec9b1792174c33042cb75">sla_check_device</a>(dev)) {</div><div class="line"><a name="l07487"></a><span class="lineno"> 7487</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;SLA Trunk &#39;%s&#39; defined with invalid device &#39;%s&#39;!\n&quot;</span>,</div><div class="line"><a name="l07488"></a><span class="lineno"> 7488</span>&#160;         cat, dev);</div><div class="line"><a name="l07489"></a><span class="lineno"> 7489</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07490"></a><span class="lineno"> 7490</span>&#160;   }</div><div class="line"><a name="l07491"></a><span class="lineno"> 7491</span>&#160;</div><div class="line"><a name="l07492"></a><span class="lineno"> 7492</span>&#160;   <span class="keywordflow">if</span> ((trunk = <a class="code" href="../../df/d44/app__meetme_8c.html#af590722094b4b8eee8319a0ae644a8c1">sla_find_trunk</a>(cat))) {</div><div class="line"><a name="l07493"></a><span class="lineno"> 7493</span>&#160;      trunk-&gt;mark = 0;</div><div class="line"><a name="l07494"></a><span class="lineno"> 7494</span>&#160;      existing_trunk = 1;</div><div class="line"><a name="l07495"></a><span class="lineno"> 7495</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((trunk = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*trunk), <a class="code" href="../../df/d44/app__meetme_8c.html#aa43e19d1500b459250f7b1804726ab56">sla_trunk_destructor</a>))) {</div><div class="line"><a name="l07496"></a><span class="lineno"> 7496</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(trunk, 32)) {</div><div class="line"><a name="l07497"></a><span class="lineno"> 7497</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07498"></a><span class="lineno"> 7498</span>&#160;      }</div><div class="line"><a name="l07499"></a><span class="lineno"> 7499</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(trunk, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, cat);</div><div class="line"><a name="l07500"></a><span class="lineno"> 7500</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07501"></a><span class="lineno"> 7501</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07502"></a><span class="lineno"> 7502</span>&#160;   }</div><div class="line"><a name="l07503"></a><span class="lineno"> 7503</span>&#160;</div><div class="line"><a name="l07504"></a><span class="lineno"> 7504</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(trunk);</div><div class="line"><a name="l07505"></a><span class="lineno"> 7505</span>&#160;</div><div class="line"><a name="l07506"></a><span class="lineno"> 7506</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(trunk, device, dev);</div><div class="line"><a name="l07507"></a><span class="lineno"> 7507</span>&#160;</div><div class="line"><a name="l07508"></a><span class="lineno"> 7508</span>&#160;   <span class="keywordflow">for</span> (var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, cat); <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>; var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l07509"></a><span class="lineno"> 7509</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;autocontext&quot;</span>))</div><div class="line"><a name="l07510"></a><span class="lineno"> 7510</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(trunk, autocontext, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l07511"></a><span class="lineno"> 7511</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;ringtimeout&quot;</span>)) {</div><div class="line"><a name="l07512"></a><span class="lineno"> 7512</span>&#160;         <span class="keywordflow">if</span> (sscanf(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;trunk-&gt;ring_timeout) != 1) {</div><div class="line"><a name="l07513"></a><span class="lineno"> 7513</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid ringtimeout &#39;%s&#39; specified for trunk &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l07514"></a><span class="lineno"> 7514</span>&#160;               var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, trunk-&gt;name);</div><div class="line"><a name="l07515"></a><span class="lineno"> 7515</span>&#160;            trunk-&gt;ring_timeout = 0;</div><div class="line"><a name="l07516"></a><span class="lineno"> 7516</span>&#160;         }</div><div class="line"><a name="l07517"></a><span class="lineno"> 7517</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;barge&quot;</span>))</div><div class="line"><a name="l07518"></a><span class="lineno"> 7518</span>&#160;         trunk-&gt;barge_disabled = <a class="code" href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a>(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l07519"></a><span class="lineno"> 7519</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;hold&quot;</span>)) {</div><div class="line"><a name="l07520"></a><span class="lineno"> 7520</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;private&quot;</span>))</div><div class="line"><a name="l07521"></a><span class="lineno"> 7521</span>&#160;            trunk-&gt;hold_access = <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685cab53c785cab44a382700c0c2e7bfabf3b">SLA_HOLD_PRIVATE</a>;</div><div class="line"><a name="l07522"></a><span class="lineno"> 7522</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;open&quot;</span>))</div><div class="line"><a name="l07523"></a><span class="lineno"> 7523</span>&#160;            trunk-&gt;hold_access = <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685ca1e46cd00f27d565cf02c15ec55c8be06">SLA_HOLD_OPEN</a>;</div><div class="line"><a name="l07524"></a><span class="lineno"> 7524</span>&#160;         <span class="keywordflow">else</span> {</div><div class="line"><a name="l07525"></a><span class="lineno"> 7525</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid value &#39;%s&#39; for hold on trunk %s\n&quot;</span>,</div><div class="line"><a name="l07526"></a><span class="lineno"> 7526</span>&#160;               var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, trunk-&gt;name);</div><div class="line"><a name="l07527"></a><span class="lineno"> 7527</span>&#160;         }</div><div class="line"><a name="l07528"></a><span class="lineno"> 7528</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;type&quot;</span>) &amp;&amp; strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;device&quot;</span>)) {</div><div class="line"><a name="l07529"></a><span class="lineno"> 7529</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid option &#39;%s&#39; specified at line %d of %s!\n&quot;</span>,</div><div class="line"><a name="l07530"></a><span class="lineno"> 7530</span>&#160;            var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a8150bc2c862d46744a596001d6109ffa">SLA_CONFIG_FILE</a>);</div><div class="line"><a name="l07531"></a><span class="lineno"> 7531</span>&#160;      }</div><div class="line"><a name="l07532"></a><span class="lineno"> 7532</span>&#160;   }</div><div class="line"><a name="l07533"></a><span class="lineno"> 7533</span>&#160;</div><div class="line"><a name="l07534"></a><span class="lineno"> 7534</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(trunk);</div><div class="line"><a name="l07535"></a><span class="lineno"> 7535</span>&#160;</div><div class="line"><a name="l07536"></a><span class="lineno"> 7536</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(trunk-&gt;autocontext)) {</div><div class="line"><a name="l07537"></a><span class="lineno"> 7537</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a8a07400b41b3302edf8aef9f53644698">ast_context_find_or_create</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, trunk-&gt;autocontext, sla_registrar)) {</div><div class="line"><a name="l07538"></a><span class="lineno"> 7538</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to automatically find or create &quot;</span></div><div class="line"><a name="l07539"></a><span class="lineno"> 7539</span>&#160;            <span class="stringliteral">&quot;context &#39;%s&#39; for SLA!\n&quot;</span>, trunk-&gt;autocontext);</div><div class="line"><a name="l07540"></a><span class="lineno"> 7540</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07541"></a><span class="lineno"> 7541</span>&#160;      }</div><div class="line"><a name="l07542"></a><span class="lineno"> 7542</span>&#160;</div><div class="line"><a name="l07543"></a><span class="lineno"> 7543</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(trunk-&gt;autocontext, 0 <span class="comment">/* don&#39;t replace */</span>, <span class="stringliteral">&quot;s&quot;</span>, 1,</div><div class="line"><a name="l07544"></a><span class="lineno"> 7544</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, slatrunk_app, <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(trunk-&gt;name), <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>, sla_registrar)) {</div><div class="line"><a name="l07545"></a><span class="lineno"> 7545</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to automatically create extension &quot;</span></div><div class="line"><a name="l07546"></a><span class="lineno"> 7546</span>&#160;            <span class="stringliteral">&quot;for trunk &#39;%s&#39;!\n&quot;</span>, trunk-&gt;name);</div><div class="line"><a name="l07547"></a><span class="lineno"> 7547</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07548"></a><span class="lineno"> 7548</span>&#160;      }</div><div class="line"><a name="l07549"></a><span class="lineno"> 7549</span>&#160;   }</div><div class="line"><a name="l07550"></a><span class="lineno"> 7550</span>&#160;</div><div class="line"><a name="l07551"></a><span class="lineno"> 7551</span>&#160;   <span class="keywordflow">if</span> (!existing_trunk) {</div><div class="line"><a name="l07552"></a><span class="lineno"> 7552</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(sla_trunks, trunk);</div><div class="line"><a name="l07553"></a><span class="lineno"> 7553</span>&#160;   }</div><div class="line"><a name="l07554"></a><span class="lineno"> 7554</span>&#160;</div><div class="line"><a name="l07555"></a><span class="lineno"> 7555</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07556"></a><span class="lineno"> 7556</span>&#160;}</div><div class="line"><a name="l07557"></a><span class="lineno"> 7557</span>&#160;<span class="comment"></span></div><div class="line"><a name="l07558"></a><span class="lineno"> 7558</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l07559"></a><span class="lineno"> 7559</span>&#160;<span class="comment"> * \internal</span></div><div class="line"><a name="l07560"></a><span class="lineno"> 7560</span>&#160;<span class="comment"> * \pre station is not locked</span></div><div class="line"><a name="l07561"></a><span class="lineno"> 7561</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l07562"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a68869e7d25e7e313afd63ffb70b95546"> 7562</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a68869e7d25e7e313afd63ffb70b95546">sla_add_trunk_to_station</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station, <span class="keyword">struct</span> <a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>)</div><div class="line"><a name="l07563"></a><span class="lineno"> 7563</span>&#160;{</div><div class="line"><a name="l07564"></a><span class="lineno"> 7564</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *, trunk, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l07565"></a><span class="lineno"> 7565</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07566"></a><span class="lineno"> 7566</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l07567"></a><span class="lineno"> 7567</span>&#160;   <span class="keywordtype">char</span> *trunk_name, *<a class="code" href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a>, *cur;</div><div class="line"><a name="l07568"></a><span class="lineno"> 7568</span>&#160;   <span class="keywordtype">int</span> existing_trunk_ref = 0;</div><div class="line"><a name="l07569"></a><span class="lineno"> 7569</span>&#160;   <span class="keywordtype">int</span> existing_station_ref = 0;</div><div class="line"><a name="l07570"></a><span class="lineno"> 7570</span>&#160;</div><div class="line"><a name="l07571"></a><span class="lineno"> 7571</span>&#160;   options = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l07572"></a><span class="lineno"> 7572</span>&#160;   trunk_name = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;options, <span class="stringliteral">&quot;,&quot;</span>);</div><div class="line"><a name="l07573"></a><span class="lineno"> 7573</span>&#160;</div><div class="line"><a name="l07574"></a><span class="lineno"> 7574</span>&#160;   trunk = <a class="code" href="../../df/d44/app__meetme_8c.html#af590722094b4b8eee8319a0ae644a8c1">sla_find_trunk</a>(trunk_name);</div><div class="line"><a name="l07575"></a><span class="lineno"> 7575</span>&#160;   <span class="keywordflow">if</span> (!trunk) {</div><div class="line"><a name="l07576"></a><span class="lineno"> 7576</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Trunk &#39;%s&#39; not found!\n&quot;</span>, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l07577"></a><span class="lineno"> 7577</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07578"></a><span class="lineno"> 7578</span>&#160;   }</div><div class="line"><a name="l07579"></a><span class="lineno"> 7579</span>&#160;</div><div class="line"><a name="l07580"></a><span class="lineno"> 7580</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07581"></a><span class="lineno"> 7581</span>&#160;      <span class="keywordflow">if</span> (trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a> == trunk) {</div><div class="line"><a name="l07582"></a><span class="lineno"> 7582</span>&#160;         trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a> = 0;</div><div class="line"><a name="l07583"></a><span class="lineno"> 7583</span>&#160;         existing_trunk_ref = 1;</div><div class="line"><a name="l07584"></a><span class="lineno"> 7584</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07585"></a><span class="lineno"> 7585</span>&#160;      }</div><div class="line"><a name="l07586"></a><span class="lineno"> 7586</span>&#160;   }</div><div class="line"><a name="l07587"></a><span class="lineno"> 7587</span>&#160;</div><div class="line"><a name="l07588"></a><span class="lineno"> 7588</span>&#160;   <span class="keywordflow">if</span> (!trunk_ref &amp;&amp; !(trunk_ref = <a class="code" href="../../df/d44/app__meetme_8c.html#a89b13052de37686017f177352a20a8d0">create_trunk_ref</a>(trunk))) {</div><div class="line"><a name="l07589"></a><span class="lineno"> 7589</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07590"></a><span class="lineno"> 7590</span>&#160;   }</div><div class="line"><a name="l07591"></a><span class="lineno"> 7591</span>&#160;</div><div class="line"><a name="l07592"></a><span class="lineno"> 7592</span>&#160;   trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">state</a> = <a class="code" href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a>;</div><div class="line"><a name="l07593"></a><span class="lineno"> 7593</span>&#160;</div><div class="line"><a name="l07594"></a><span class="lineno"> 7594</span>&#160;   <span class="keywordflow">while</span> ((cur = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;options, <span class="stringliteral">&quot;,&quot;</span>))) {</div><div class="line"><a name="l07595"></a><span class="lineno"> 7595</span>&#160;      <span class="keywordtype">char</span> *<a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, *<a class="code" href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a> = cur;</div><div class="line"><a name="l07596"></a><span class="lineno"> 7596</span>&#160;      name = <a class="code" href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a>(&amp;value, <span class="stringliteral">&quot;=&quot;</span>);</div><div class="line"><a name="l07597"></a><span class="lineno"> 7597</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;ringtimeout&quot;</span>)) {</div><div class="line"><a name="l07598"></a><span class="lineno"> 7598</span>&#160;         <span class="keywordflow">if</span> (sscanf(value, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a>) != 1) {</div><div class="line"><a name="l07599"></a><span class="lineno"> 7599</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid ringtimeout value &#39;%s&#39; for &quot;</span></div><div class="line"><a name="l07600"></a><span class="lineno"> 7600</span>&#160;               <span class="stringliteral">&quot;trunk &#39;%s&#39; on station &#39;%s&#39;\n&quot;</span>, value, trunk-&gt;name, station-&gt;name);</div><div class="line"><a name="l07601"></a><span class="lineno"> 7601</span>&#160;            trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961">ring_timeout</a> = 0;</div><div class="line"><a name="l07602"></a><span class="lineno"> 7602</span>&#160;         }</div><div class="line"><a name="l07603"></a><span class="lineno"> 7603</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(name, <span class="stringliteral">&quot;ringdelay&quot;</span>)) {</div><div class="line"><a name="l07604"></a><span class="lineno"> 7604</span>&#160;         <span class="keywordflow">if</span> (sscanf(value, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a>) != 1) {</div><div class="line"><a name="l07605"></a><span class="lineno"> 7605</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid ringdelay value &#39;%s&#39; for &quot;</span></div><div class="line"><a name="l07606"></a><span class="lineno"> 7606</span>&#160;               <span class="stringliteral">&quot;trunk &#39;%s&#39; on station &#39;%s&#39;\n&quot;</span>, value, trunk-&gt;name, station-&gt;name);</div><div class="line"><a name="l07607"></a><span class="lineno"> 7607</span>&#160;            trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#a8b9f36f9500c33f5968999247558066e">ring_delay</a> = 0;</div><div class="line"><a name="l07608"></a><span class="lineno"> 7608</span>&#160;         }</div><div class="line"><a name="l07609"></a><span class="lineno"> 7609</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07610"></a><span class="lineno"> 7610</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid option &#39;%s&#39; for &quot;</span></div><div class="line"><a name="l07611"></a><span class="lineno"> 7611</span>&#160;            <span class="stringliteral">&quot;trunk &#39;%s&#39; on station &#39;%s&#39;\n&quot;</span>, name, trunk-&gt;name, station-&gt;name);</div><div class="line"><a name="l07612"></a><span class="lineno"> 7612</span>&#160;      }</div><div class="line"><a name="l07613"></a><span class="lineno"> 7613</span>&#160;   }</div><div class="line"><a name="l07614"></a><span class="lineno"> 7614</span>&#160;</div><div class="line"><a name="l07615"></a><span class="lineno"> 7615</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;trunk-&gt;stations, station_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07616"></a><span class="lineno"> 7616</span>&#160;      <span class="keywordflow">if</span> (station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a> == station) {</div><div class="line"><a name="l07617"></a><span class="lineno"> 7617</span>&#160;         station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a> = 0;</div><div class="line"><a name="l07618"></a><span class="lineno"> 7618</span>&#160;         existing_station_ref = 1;</div><div class="line"><a name="l07619"></a><span class="lineno"> 7619</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07620"></a><span class="lineno"> 7620</span>&#160;      }</div><div class="line"><a name="l07621"></a><span class="lineno"> 7621</span>&#160;   }</div><div class="line"><a name="l07622"></a><span class="lineno"> 7622</span>&#160;</div><div class="line"><a name="l07623"></a><span class="lineno"> 7623</span>&#160;   <span class="keywordflow">if</span> (!station_ref &amp;&amp; !(station_ref = <a class="code" href="../../df/d44/app__meetme_8c.html#a95a34a9245e87d8481590dddcfd168d2">sla_create_station_ref</a>(station))) {</div><div class="line"><a name="l07624"></a><span class="lineno"> 7624</span>&#160;      <span class="keywordflow">if</span> (!existing_trunk_ref) {</div><div class="line"><a name="l07625"></a><span class="lineno"> 7625</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref, -1);</div><div class="line"><a name="l07626"></a><span class="lineno"> 7626</span>&#160;      } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07627"></a><span class="lineno"> 7627</span>&#160;         trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a> = 1;</div><div class="line"><a name="l07628"></a><span class="lineno"> 7628</span>&#160;      }</div><div class="line"><a name="l07629"></a><span class="lineno"> 7629</span>&#160;      <span class="keywordflow">return</span>;</div><div class="line"><a name="l07630"></a><span class="lineno"> 7630</span>&#160;   }</div><div class="line"><a name="l07631"></a><span class="lineno"> 7631</span>&#160;</div><div class="line"><a name="l07632"></a><span class="lineno"> 7632</span>&#160;   <span class="keywordflow">if</span> (!existing_station_ref) {</div><div class="line"><a name="l07633"></a><span class="lineno"> 7633</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(trunk);</div><div class="line"><a name="l07634"></a><span class="lineno"> 7634</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;trunk-&gt;stations, station_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l07635"></a><span class="lineno"> 7635</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a>((<span class="keywordtype">int</span> *) &amp;trunk-&gt;num_stations, 1);</div><div class="line"><a name="l07636"></a><span class="lineno"> 7636</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(trunk);</div><div class="line"><a name="l07637"></a><span class="lineno"> 7637</span>&#160;   }</div><div class="line"><a name="l07638"></a><span class="lineno"> 7638</span>&#160;</div><div class="line"><a name="l07639"></a><span class="lineno"> 7639</span>&#160;   <span class="keywordflow">if</span> (!existing_trunk_ref) {</div><div class="line"><a name="l07640"></a><span class="lineno"> 7640</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l07641"></a><span class="lineno"> 7641</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l07642"></a><span class="lineno"> 7642</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l07643"></a><span class="lineno"> 7643</span>&#160;   }</div><div class="line"><a name="l07644"></a><span class="lineno"> 7644</span>&#160;}</div><div class="line"><a name="l07645"></a><span class="lineno"> 7645</span>&#160;</div><div class="line"><a name="l07646"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a052cc5aec5957d252837e98b2d200384"> 7646</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a052cc5aec5957d252837e98b2d200384">sla_build_station</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg, <span class="keyword">const</span> <span class="keywordtype">char</span> *cat)</div><div class="line"><a name="l07647"></a><span class="lineno"> 7647</span>&#160;{</div><div class="line"><a name="l07648"></a><span class="lineno"> 7648</span>&#160;   <a class="code" href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a>(<span class="keyword">struct</span> <a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *, <a class="code" href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">station</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a>);</div><div class="line"><a name="l07649"></a><span class="lineno"> 7649</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d02/structast__variable.html">ast_variable</a> *<a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>;</div><div class="line"><a name="l07650"></a><span class="lineno"> 7650</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *dev;</div><div class="line"><a name="l07651"></a><span class="lineno"> 7651</span>&#160;   <span class="keywordtype">int</span> existing_station = 0;</div><div class="line"><a name="l07652"></a><span class="lineno"> 7652</span>&#160;</div><div class="line"><a name="l07653"></a><span class="lineno"> 7653</span>&#160;   <span class="keywordflow">if</span> (!(dev = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, cat, <span class="stringliteral">&quot;device&quot;</span>))) {</div><div class="line"><a name="l07654"></a><span class="lineno"> 7654</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;SLA Station &#39;%s&#39; defined with no device!\n&quot;</span>, cat);</div><div class="line"><a name="l07655"></a><span class="lineno"> 7655</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07656"></a><span class="lineno"> 7656</span>&#160;   }</div><div class="line"><a name="l07657"></a><span class="lineno"> 7657</span>&#160;</div><div class="line"><a name="l07658"></a><span class="lineno"> 7658</span>&#160;   <span class="keywordflow">if</span> ((station = <a class="code" href="../../df/d44/app__meetme_8c.html#a3c7dabe74df23208e4dce8bc3fbb6d77">sla_find_station</a>(cat))) {</div><div class="line"><a name="l07659"></a><span class="lineno"> 7659</span>&#160;      station-&gt;mark = 0;</div><div class="line"><a name="l07660"></a><span class="lineno"> 7660</span>&#160;      existing_station = 1;</div><div class="line"><a name="l07661"></a><span class="lineno"> 7661</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ((station = <a class="code" href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a>(<span class="keyword">sizeof</span>(*station), <a class="code" href="../../df/d44/app__meetme_8c.html#aedae223718f09a236ef53ccb85869959">sla_station_destructor</a>))) {</div><div class="line"><a name="l07662"></a><span class="lineno"> 7662</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a>(station, 32)) {</div><div class="line"><a name="l07663"></a><span class="lineno"> 7663</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07664"></a><span class="lineno"> 7664</span>&#160;      }</div><div class="line"><a name="l07665"></a><span class="lineno"> 7665</span>&#160;      <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(station, <a class="code" href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a>, cat);</div><div class="line"><a name="l07666"></a><span class="lineno"> 7666</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07667"></a><span class="lineno"> 7667</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07668"></a><span class="lineno"> 7668</span>&#160;   }</div><div class="line"><a name="l07669"></a><span class="lineno"> 7669</span>&#160;</div><div class="line"><a name="l07670"></a><span class="lineno"> 7670</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l07671"></a><span class="lineno"> 7671</span>&#160;</div><div class="line"><a name="l07672"></a><span class="lineno"> 7672</span>&#160;   <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(station, device, dev);</div><div class="line"><a name="l07673"></a><span class="lineno"> 7673</span>&#160;</div><div class="line"><a name="l07674"></a><span class="lineno"> 7674</span>&#160;   <span class="keywordflow">for</span> (var = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a>(cfg, cat); <a class="code" href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a>; var = var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">next</a>) {</div><div class="line"><a name="l07675"></a><span class="lineno"> 7675</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;trunk&quot;</span>)) {</div><div class="line"><a name="l07676"></a><span class="lineno"> 7676</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l07677"></a><span class="lineno"> 7677</span>&#160;         <a class="code" href="../../df/d44/app__meetme_8c.html#a68869e7d25e7e313afd63ffb70b95546">sla_add_trunk_to_station</a>(station, var);</div><div class="line"><a name="l07678"></a><span class="lineno"> 7678</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l07679"></a><span class="lineno"> 7679</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;autocontext&quot;</span>)) {</div><div class="line"><a name="l07680"></a><span class="lineno"> 7680</span>&#160;         <a class="code" href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a>(station, autocontext, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>);</div><div class="line"><a name="l07681"></a><span class="lineno"> 7681</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;ringtimeout&quot;</span>)) {</div><div class="line"><a name="l07682"></a><span class="lineno"> 7682</span>&#160;         <span class="keywordflow">if</span> (sscanf(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;station-&gt;ring_timeout) != 1) {</div><div class="line"><a name="l07683"></a><span class="lineno"> 7683</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid ringtimeout &#39;%s&#39; specified for station &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l07684"></a><span class="lineno"> 7684</span>&#160;               var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, station-&gt;name);</div><div class="line"><a name="l07685"></a><span class="lineno"> 7685</span>&#160;            station-&gt;ring_timeout = 0;</div><div class="line"><a name="l07686"></a><span class="lineno"> 7686</span>&#160;         }</div><div class="line"><a name="l07687"></a><span class="lineno"> 7687</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;ringdelay&quot;</span>)) {</div><div class="line"><a name="l07688"></a><span class="lineno"> 7688</span>&#160;         <span class="keywordflow">if</span> (sscanf(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;%30u&quot;</span>, &amp;station-&gt;ring_delay) != 1) {</div><div class="line"><a name="l07689"></a><span class="lineno"> 7689</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid ringdelay &#39;%s&#39; specified for station &#39;%s&#39;\n&quot;</span>,</div><div class="line"><a name="l07690"></a><span class="lineno"> 7690</span>&#160;               var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, station-&gt;name);</div><div class="line"><a name="l07691"></a><span class="lineno"> 7691</span>&#160;            station-&gt;ring_delay = 0;</div><div class="line"><a name="l07692"></a><span class="lineno"> 7692</span>&#160;         }</div><div class="line"><a name="l07693"></a><span class="lineno"> 7693</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;hold&quot;</span>)) {</div><div class="line"><a name="l07694"></a><span class="lineno"> 7694</span>&#160;         <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;private&quot;</span>))</div><div class="line"><a name="l07695"></a><span class="lineno"> 7695</span>&#160;            station-&gt;hold_access = <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685cab53c785cab44a382700c0c2e7bfabf3b">SLA_HOLD_PRIVATE</a>;</div><div class="line"><a name="l07696"></a><span class="lineno"> 7696</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, <span class="stringliteral">&quot;open&quot;</span>))</div><div class="line"><a name="l07697"></a><span class="lineno"> 7697</span>&#160;            station-&gt;hold_access = <a class="code" href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685ca1e46cd00f27d565cf02c15ec55c8be06">SLA_HOLD_OPEN</a>;</div><div class="line"><a name="l07698"></a><span class="lineno"> 7698</span>&#160;         <span class="keywordflow">else</span> {</div><div class="line"><a name="l07699"></a><span class="lineno"> 7699</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid value &#39;%s&#39; for hold on station %s\n&quot;</span>,</div><div class="line"><a name="l07700"></a><span class="lineno"> 7700</span>&#160;               var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">value</a>, station-&gt;name);</div><div class="line"><a name="l07701"></a><span class="lineno"> 7701</span>&#160;         }</div><div class="line"><a name="l07702"></a><span class="lineno"> 7702</span>&#160;</div><div class="line"><a name="l07703"></a><span class="lineno"> 7703</span>&#160;      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;type&quot;</span>) &amp;&amp; strcasecmp(var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, <span class="stringliteral">&quot;device&quot;</span>)) {</div><div class="line"><a name="l07704"></a><span class="lineno"> 7704</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Invalid option &#39;%s&#39; specified at line %d of %s!\n&quot;</span>,</div><div class="line"><a name="l07705"></a><span class="lineno"> 7705</span>&#160;            var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">name</a>, var-&gt;<a class="code" href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">lineno</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a8150bc2c862d46744a596001d6109ffa">SLA_CONFIG_FILE</a>);</div><div class="line"><a name="l07706"></a><span class="lineno"> 7706</span>&#160;      }</div><div class="line"><a name="l07707"></a><span class="lineno"> 7707</span>&#160;   }</div><div class="line"><a name="l07708"></a><span class="lineno"> 7708</span>&#160;</div><div class="line"><a name="l07709"></a><span class="lineno"> 7709</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l07710"></a><span class="lineno"> 7710</span>&#160;</div><div class="line"><a name="l07711"></a><span class="lineno"> 7711</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(station-&gt;autocontext)) {</div><div class="line"><a name="l07712"></a><span class="lineno"> 7712</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l07713"></a><span class="lineno"> 7713</span>&#160;</div><div class="line"><a name="l07714"></a><span class="lineno"> 7714</span>&#160;      <span class="keywordflow">if</span> (!<a class="code" href="../../db/de0/pbx_8h.html#a8a07400b41b3302edf8aef9f53644698">ast_context_find_or_create</a>(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, station-&gt;autocontext, sla_registrar)) {</div><div class="line"><a name="l07715"></a><span class="lineno"> 7715</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to automatically find or create &quot;</span></div><div class="line"><a name="l07716"></a><span class="lineno"> 7716</span>&#160;            <span class="stringliteral">&quot;context &#39;%s&#39; for SLA!\n&quot;</span>, station-&gt;autocontext);</div><div class="line"><a name="l07717"></a><span class="lineno"> 7717</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07718"></a><span class="lineno"> 7718</span>&#160;      }</div><div class="line"><a name="l07719"></a><span class="lineno"> 7719</span>&#160;      <span class="comment">/* The extension for when the handset goes off-hook.</span></div><div class="line"><a name="l07720"></a><span class="lineno"> 7720</span>&#160;<span class="comment">       * exten =&gt; station1,1,SLAStation(station1) */</span></div><div class="line"><a name="l07721"></a><span class="lineno"> 7721</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(station-&gt;autocontext, 0 <span class="comment">/* don&#39;t replace */</span>, station-&gt;name, 1,</div><div class="line"><a name="l07722"></a><span class="lineno"> 7722</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, slastation_app, <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(station-&gt;name), <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>, sla_registrar)) {</div><div class="line"><a name="l07723"></a><span class="lineno"> 7723</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to automatically create extension &quot;</span></div><div class="line"><a name="l07724"></a><span class="lineno"> 7724</span>&#160;            <span class="stringliteral">&quot;for trunk &#39;%s&#39;!\n&quot;</span>, station-&gt;name);</div><div class="line"><a name="l07725"></a><span class="lineno"> 7725</span>&#160;         <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07726"></a><span class="lineno"> 7726</span>&#160;      }</div><div class="line"><a name="l07727"></a><span class="lineno"> 7727</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;trunks, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07728"></a><span class="lineno"> 7728</span>&#160;         <span class="keywordtype">char</span> <a class="code" href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a>[<a class="code" href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a>];</div><div class="line"><a name="l07729"></a><span class="lineno"> 7729</span>&#160;         <span class="keywordtype">char</span> hint[<a class="code" href="../../db/de0/pbx_8h.html#a3414b82af9b33fe907c9377c5c73c453">AST_MAX_APP</a>];</div><div class="line"><a name="l07730"></a><span class="lineno"> 7730</span>&#160;         snprintf(exten, <span class="keyword">sizeof</span>(exten), <span class="stringliteral">&quot;%s_%s&quot;</span>, station-&gt;name, trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">trunk</a>-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">name</a>);</div><div class="line"><a name="l07731"></a><span class="lineno"> 7731</span>&#160;         snprintf(hint, <span class="keyword">sizeof</span>(hint), <span class="stringliteral">&quot;SLA:%s&quot;</span>, exten);</div><div class="line"><a name="l07732"></a><span class="lineno"> 7732</span>&#160;         <span class="comment">/* Extension for this line button</span></div><div class="line"><a name="l07733"></a><span class="lineno"> 7733</span>&#160;<span class="comment">          * exten =&gt; station1_line1,1,SLAStation(station1_line1) */</span></div><div class="line"><a name="l07734"></a><span class="lineno"> 7734</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(station-&gt;autocontext, 0 <span class="comment">/* don&#39;t replace */</span>, exten, 1,</div><div class="line"><a name="l07735"></a><span class="lineno"> 7735</span>&#160;            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, slastation_app, <a class="code" href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a>(exten), <a class="code" href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a>, sla_registrar)) {</div><div class="line"><a name="l07736"></a><span class="lineno"> 7736</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to automatically create extension &quot;</span></div><div class="line"><a name="l07737"></a><span class="lineno"> 7737</span>&#160;               <span class="stringliteral">&quot;for trunk &#39;%s&#39;!\n&quot;</span>, station-&gt;name);</div><div class="line"><a name="l07738"></a><span class="lineno"> 7738</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07739"></a><span class="lineno"> 7739</span>&#160;         }</div><div class="line"><a name="l07740"></a><span class="lineno"> 7740</span>&#160;         <span class="comment">/* Hint for this line button</span></div><div class="line"><a name="l07741"></a><span class="lineno"> 7741</span>&#160;<span class="comment">          * exten =&gt; station1_line1,hint,SLA:station1_line1 */</span></div><div class="line"><a name="l07742"></a><span class="lineno"> 7742</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a>(station-&gt;autocontext, 0 <span class="comment">/* don&#39;t replace */</span>, exten, <a class="code" href="../../db/de0/pbx_8h.html#ad2e753a683024fad0b34ece3b1aef83a">PRIORITY_HINT</a>,</div><div class="line"><a name="l07743"></a><span class="lineno"> 7743</span>&#160;            <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, hint, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, sla_registrar)) {</div><div class="line"><a name="l07744"></a><span class="lineno"> 7744</span>&#160;            <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Failed to automatically create hint &quot;</span></div><div class="line"><a name="l07745"></a><span class="lineno"> 7745</span>&#160;               <span class="stringliteral">&quot;for trunk &#39;%s&#39;!\n&quot;</span>, station-&gt;name);</div><div class="line"><a name="l07746"></a><span class="lineno"> 7746</span>&#160;            <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07747"></a><span class="lineno"> 7747</span>&#160;         }</div><div class="line"><a name="l07748"></a><span class="lineno"> 7748</span>&#160;      }</div><div class="line"><a name="l07749"></a><span class="lineno"> 7749</span>&#160;   }</div><div class="line"><a name="l07750"></a><span class="lineno"> 7750</span>&#160;</div><div class="line"><a name="l07751"></a><span class="lineno"> 7751</span>&#160;   <span class="keywordflow">if</span> (!existing_station) {</div><div class="line"><a name="l07752"></a><span class="lineno"> 7752</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a>(sla_stations, station);</div><div class="line"><a name="l07753"></a><span class="lineno"> 7753</span>&#160;   }</div><div class="line"><a name="l07754"></a><span class="lineno"> 7754</span>&#160;</div><div class="line"><a name="l07755"></a><span class="lineno"> 7755</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07756"></a><span class="lineno"> 7756</span>&#160;}</div><div class="line"><a name="l07757"></a><span class="lineno"> 7757</span>&#160;</div><div class="line"><a name="l07758"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#accb3d6f2fb803431e6ae9b036b850cc2"> 7758</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#accb3d6f2fb803431e6ae9b036b850cc2">sla_trunk_mark</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l07759"></a><span class="lineno"> 7759</span>&#160;{</div><div class="line"><a name="l07760"></a><span class="lineno"> 7760</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *trunk = obj;</div><div class="line"><a name="l07761"></a><span class="lineno"> 7761</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l07762"></a><span class="lineno"> 7762</span>&#160;</div><div class="line"><a name="l07763"></a><span class="lineno"> 7763</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(trunk);</div><div class="line"><a name="l07764"></a><span class="lineno"> 7764</span>&#160;</div><div class="line"><a name="l07765"></a><span class="lineno"> 7765</span>&#160;   trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a> = 1;</div><div class="line"><a name="l07766"></a><span class="lineno"> 7766</span>&#160;</div><div class="line"><a name="l07767"></a><span class="lineno"> 7767</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a923df8202a8b865a393bb34def02c109">stations</a>, station_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07768"></a><span class="lineno"> 7768</span>&#160;      station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a> = 1;</div><div class="line"><a name="l07769"></a><span class="lineno"> 7769</span>&#160;   }</div><div class="line"><a name="l07770"></a><span class="lineno"> 7770</span>&#160;</div><div class="line"><a name="l07771"></a><span class="lineno"> 7771</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(trunk);</div><div class="line"><a name="l07772"></a><span class="lineno"> 7772</span>&#160;</div><div class="line"><a name="l07773"></a><span class="lineno"> 7773</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07774"></a><span class="lineno"> 7774</span>&#160;}</div><div class="line"><a name="l07775"></a><span class="lineno"> 7775</span>&#160;</div><div class="line"><a name="l07776"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a21cb19d69f13ea49c32214297cbe3c16"> 7776</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a21cb19d69f13ea49c32214297cbe3c16">sla_station_mark</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l07777"></a><span class="lineno"> 7777</span>&#160;{</div><div class="line"><a name="l07778"></a><span class="lineno"> 7778</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station = obj;</div><div class="line"><a name="l07779"></a><span class="lineno"> 7779</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l07780"></a><span class="lineno"> 7780</span>&#160;</div><div class="line"><a name="l07781"></a><span class="lineno"> 7781</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l07782"></a><span class="lineno"> 7782</span>&#160;</div><div class="line"><a name="l07783"></a><span class="lineno"> 7783</span>&#160;   station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a> = 1;</div><div class="line"><a name="l07784"></a><span class="lineno"> 7784</span>&#160;</div><div class="line"><a name="l07785"></a><span class="lineno"> 7785</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07786"></a><span class="lineno"> 7786</span>&#160;      trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a> = 1;</div><div class="line"><a name="l07787"></a><span class="lineno"> 7787</span>&#160;   }</div><div class="line"><a name="l07788"></a><span class="lineno"> 7788</span>&#160;</div><div class="line"><a name="l07789"></a><span class="lineno"> 7789</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l07790"></a><span class="lineno"> 7790</span>&#160;</div><div class="line"><a name="l07791"></a><span class="lineno"> 7791</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07792"></a><span class="lineno"> 7792</span>&#160;}</div><div class="line"><a name="l07793"></a><span class="lineno"> 7793</span>&#160;</div><div class="line"><a name="l07794"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a1ac81200b04fc992816d6ca37a89a851"> 7794</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a1ac81200b04fc992816d6ca37a89a851">sla_trunk_is_marked</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l07795"></a><span class="lineno"> 7795</span>&#160;{</div><div class="line"><a name="l07796"></a><span class="lineno"> 7796</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d4/dbe/structsla__trunk.html">sla_trunk</a> *trunk = obj;</div><div class="line"><a name="l07797"></a><span class="lineno"> 7797</span>&#160;</div><div class="line"><a name="l07798"></a><span class="lineno"> 7798</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(trunk);</div><div class="line"><a name="l07799"></a><span class="lineno"> 7799</span>&#160;</div><div class="line"><a name="l07800"></a><span class="lineno"> 7800</span>&#160;   <span class="keywordflow">if</span> (trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a>) {</div><div class="line"><a name="l07801"></a><span class="lineno"> 7801</span>&#160;      <span class="comment">/* Only remove all of the station references if the trunk itself is going away */</span></div><div class="line"><a name="l07802"></a><span class="lineno"> 7802</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a34e2d6ebe0cd1d0cc400ef4c6a9bc21d">sla_trunk_release_refs</a>(trunk, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l07803"></a><span class="lineno"> 7803</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07804"></a><span class="lineno"> 7804</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a> *station_ref;</div><div class="line"><a name="l07805"></a><span class="lineno"> 7805</span>&#160;</div><div class="line"><a name="l07806"></a><span class="lineno"> 7806</span>&#160;      <span class="comment">/* Otherwise only remove references to stations no longer in the config */</span></div><div class="line"><a name="l07807"></a><span class="lineno"> 7807</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#a923df8202a8b865a393bb34def02c109">stations</a>, station_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07808"></a><span class="lineno"> 7808</span>&#160;         <span class="keywordflow">if</span> (!station_ref-&gt;<a class="code" href="../../d0/db1/structsla__station__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a>) {</div><div class="line"><a name="l07809"></a><span class="lineno"> 7809</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l07810"></a><span class="lineno"> 7810</span>&#160;         }</div><div class="line"><a name="l07811"></a><span class="lineno"> 7811</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l07812"></a><span class="lineno"> 7812</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(station_ref, -1);</div><div class="line"><a name="l07813"></a><span class="lineno"> 7813</span>&#160;      }</div><div class="line"><a name="l07814"></a><span class="lineno"> 7814</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="line"><a name="l07815"></a><span class="lineno"> 7815</span>&#160;   }</div><div class="line"><a name="l07816"></a><span class="lineno"> 7816</span>&#160;</div><div class="line"><a name="l07817"></a><span class="lineno"> 7817</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(trunk);</div><div class="line"><a name="l07818"></a><span class="lineno"> 7818</span>&#160;</div><div class="line"><a name="l07819"></a><span class="lineno"> 7819</span>&#160;   <span class="keywordflow">return</span> trunk-&gt;<a class="code" href="../../d4/dbe/structsla__trunk.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a> ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> : 0;</div><div class="line"><a name="l07820"></a><span class="lineno"> 7820</span>&#160;}</div><div class="line"><a name="l07821"></a><span class="lineno"> 7821</span>&#160;</div><div class="line"><a name="l07822"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a2e3830bbe198ca99204da3f7aeda07b4"> 7822</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a2e3830bbe198ca99204da3f7aeda07b4">sla_station_is_marked</a>(<span class="keywordtype">void</span> *obj, <span class="keywordtype">void</span> *arg, <span class="keywordtype">int</span> flags)</div><div class="line"><a name="l07823"></a><span class="lineno"> 7823</span>&#160;{</div><div class="line"><a name="l07824"></a><span class="lineno"> 7824</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d95/structsla__station.html">sla_station</a> *station = obj;</div><div class="line"><a name="l07825"></a><span class="lineno"> 7825</span>&#160;</div><div class="line"><a name="l07826"></a><span class="lineno"> 7826</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a>(station);</div><div class="line"><a name="l07827"></a><span class="lineno"> 7827</span>&#160;</div><div class="line"><a name="l07828"></a><span class="lineno"> 7828</span>&#160;   <span class="keywordflow">if</span> (station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a>) {</div><div class="line"><a name="l07829"></a><span class="lineno"> 7829</span>&#160;      <span class="comment">/* Only remove all of the trunk references if the station itself is going away */</span></div><div class="line"><a name="l07830"></a><span class="lineno"> 7830</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#a84f96d304b9dcffc5d92ed02f4df9ad8">sla_station_release_refs</a>(station, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, 0);</div><div class="line"><a name="l07831"></a><span class="lineno"> 7831</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07832"></a><span class="lineno"> 7832</span>&#160;      <span class="keyword">struct </span><a class="code" href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a> *trunk_ref;</div><div class="line"><a name="l07833"></a><span class="lineno"> 7833</span>&#160;</div><div class="line"><a name="l07834"></a><span class="lineno"> 7834</span>&#160;      <span class="comment">/* Otherwise only remove references to trunks no longer in the config */</span></div><div class="line"><a name="l07835"></a><span class="lineno"> 7835</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a>(&amp;station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">trunks</a>, trunk_ref, <a class="code" href="../../d3/d96/structentry.html">entry</a>) {</div><div class="line"><a name="l07836"></a><span class="lineno"> 7836</span>&#160;         <span class="keywordflow">if</span> (!trunk_ref-&gt;<a class="code" href="../../d5/d5a/structsla__trunk__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a>) {</div><div class="line"><a name="l07837"></a><span class="lineno"> 7837</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l07838"></a><span class="lineno"> 7838</span>&#160;         }</div><div class="line"><a name="l07839"></a><span class="lineno"> 7839</span>&#160;         <a class="code" href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a>(<a class="code" href="../../d3/d96/structentry.html">entry</a>);</div><div class="line"><a name="l07840"></a><span class="lineno"> 7840</span>&#160;         <a class="code" href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a>(trunk_ref, -1);</div><div class="line"><a name="l07841"></a><span class="lineno"> 7841</span>&#160;      }</div><div class="line"><a name="l07842"></a><span class="lineno"> 7842</span>&#160;      <a class="code" href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="line"><a name="l07843"></a><span class="lineno"> 7843</span>&#160;   }</div><div class="line"><a name="l07844"></a><span class="lineno"> 7844</span>&#160;</div><div class="line"><a name="l07845"></a><span class="lineno"> 7845</span>&#160;   <a class="code" href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a>(station);</div><div class="line"><a name="l07846"></a><span class="lineno"> 7846</span>&#160;</div><div class="line"><a name="l07847"></a><span class="lineno"> 7847</span>&#160;   <span class="keywordflow">return</span> station-&gt;<a class="code" href="../../dd/d95/structsla__station.html#aa328161f4934a6c22ca967fcb5cbc1e1">mark</a> ? <a class="code" href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a> : 0;</div><div class="line"><a name="l07848"></a><span class="lineno"> 7848</span>&#160;}</div><div class="line"><a name="l07849"></a><span class="lineno"> 7849</span>&#160;</div><div class="line"><a name="l07850"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ad7a6277dea2b87f386d483e4459cd229"> 7850</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ad7a6277dea2b87f386d483e4459cd229">sla_in_use</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l07851"></a><span class="lineno"> 7851</span>&#160;{</div><div class="line"><a name="l07852"></a><span class="lineno"> 7852</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(sla_trunks) || <a class="code" href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a>(sla_stations);</div><div class="line"><a name="l07853"></a><span class="lineno"> 7853</span>&#160;}</div><div class="line"><a name="l07854"></a><span class="lineno"> 7854</span>&#160;</div><div class="line"><a name="l07855"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a03d6f53f0d136a93c89b9d848ca0ed0e"> 7855</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a03d6f53f0d136a93c89b9d848ca0ed0e">sla_load_config</a>(<span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>)</div><div class="line"><a name="l07856"></a><span class="lineno"> 7856</span>&#160;{</div><div class="line"><a name="l07857"></a><span class="lineno"> 7857</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dd/d18/structast__config.html">ast_config</a> *cfg;</div><div class="line"><a name="l07858"></a><span class="lineno"> 7858</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../dc/dac/structast__flags.html">ast_flags</a> config_flags = { reload ? <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a> : 0 };</div><div class="line"><a name="l07859"></a><span class="lineno"> 7859</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *cat = <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div><div class="line"><a name="l07860"></a><span class="lineno"> 7860</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l07861"></a><span class="lineno"> 7861</span>&#160;   <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d5/d85/structval.html">val</a>;</div><div class="line"><a name="l07862"></a><span class="lineno"> 7862</span>&#160;</div><div class="line"><a name="l07863"></a><span class="lineno"> 7863</span>&#160;   <span class="keywordflow">if</span> (!reload) {</div><div class="line"><a name="l07864"></a><span class="lineno"> 7864</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.lock);</div><div class="line"><a name="l07865"></a><span class="lineno"> 7865</span>&#160;      <a class="code" href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.cond, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07866"></a><span class="lineno"> 7866</span>&#160;      sla_trunks = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l07867"></a><span class="lineno"> 7867</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a68f160d36f15edc473aa580c5cf24ed8">sla_trunk_cmp</a>);</div><div class="line"><a name="l07868"></a><span class="lineno"> 7868</span>&#160;      sla_stations = <a class="code" href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a>(<a class="code" href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a>, 0,</div><div class="line"><a name="l07869"></a><span class="lineno"> 7869</span>&#160;         <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#af029f88d6b217cd9194b466ef86dc398">sla_station_cmp</a>);</div><div class="line"><a name="l07870"></a><span class="lineno"> 7870</span>&#160;   }</div><div class="line"><a name="l07871"></a><span class="lineno"> 7871</span>&#160;</div><div class="line"><a name="l07872"></a><span class="lineno"> 7872</span>&#160;   <span class="keywordflow">if</span> (!(cfg = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a>(<a class="code" href="../../df/d44/app__meetme_8c.html#a8150bc2c862d46744a596001d6109ffa">SLA_CONFIG_FILE</a>, config_flags))) {</div><div class="line"><a name="l07873"></a><span class="lineno"> 7873</span>&#160;      <span class="keywordflow">return</span> 0; <span class="comment">/* Treat no config as normal */</span></div><div class="line"><a name="l07874"></a><span class="lineno"> 7874</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a>) {</div><div class="line"><a name="l07875"></a><span class="lineno"> 7875</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07876"></a><span class="lineno"> 7876</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cfg == <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a>) {</div><div class="line"><a name="l07877"></a><span class="lineno"> 7877</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Config file &quot;</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a8150bc2c862d46744a596001d6109ffa">SLA_CONFIG_FILE</a> <span class="stringliteral">&quot; is in an invalid format.  Aborting.\n&quot;</span>);</div><div class="line"><a name="l07878"></a><span class="lineno"> 7878</span>&#160;      <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07879"></a><span class="lineno"> 7879</span>&#160;   }</div><div class="line"><a name="l07880"></a><span class="lineno"> 7880</span>&#160;</div><div class="line"><a name="l07881"></a><span class="lineno"> 7881</span>&#160;   <span class="keywordflow">if</span> (reload) {</div><div class="line"><a name="l07882"></a><span class="lineno"> 7882</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(sla_trunks, 0, <a class="code" href="../../df/d44/app__meetme_8c.html#accb3d6f2fb803431e6ae9b036b850cc2">sla_trunk_mark</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07883"></a><span class="lineno"> 7883</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(sla_stations, 0, <a class="code" href="../../df/d44/app__meetme_8c.html#a21cb19d69f13ea49c32214297cbe3c16">sla_station_mark</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07884"></a><span class="lineno"> 7884</span>&#160;   }</div><div class="line"><a name="l07885"></a><span class="lineno"> 7885</span>&#160;</div><div class="line"><a name="l07886"></a><span class="lineno"> 7886</span>&#160;   <span class="keywordflow">if</span> ((val = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, <span class="stringliteral">&quot;general&quot;</span>, <span class="stringliteral">&quot;attemptcallerid&quot;</span>)))</div><div class="line"><a name="l07887"></a><span class="lineno"> 7887</span>&#160;      <a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.attempt_callerid = <a class="code" href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a>(val);</div><div class="line"><a name="l07888"></a><span class="lineno"> 7888</span>&#160;</div><div class="line"><a name="l07889"></a><span class="lineno"> 7889</span>&#160;   <span class="keywordflow">while</span> ((cat = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a>(cfg, cat)) &amp;&amp; !res) {</div><div class="line"><a name="l07890"></a><span class="lineno"> 7890</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">char</span> *<a class="code" href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a>;</div><div class="line"><a name="l07891"></a><span class="lineno"> 7891</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(cat, <span class="stringliteral">&quot;general&quot;</span>))</div><div class="line"><a name="l07892"></a><span class="lineno"> 7892</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l07893"></a><span class="lineno"> 7893</span>&#160;      <span class="keywordflow">if</span> (!(type = <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a>(cfg, cat, <span class="stringliteral">&quot;type&quot;</span>))) {</div><div class="line"><a name="l07894"></a><span class="lineno"> 7894</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Invalid entry in %s defined with no type!\n&quot;</span>,</div><div class="line"><a name="l07895"></a><span class="lineno"> 7895</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a8150bc2c862d46744a596001d6109ffa">SLA_CONFIG_FILE</a>);</div><div class="line"><a name="l07896"></a><span class="lineno"> 7896</span>&#160;         <span class="keywordflow">continue</span>;</div><div class="line"><a name="l07897"></a><span class="lineno"> 7897</span>&#160;      }</div><div class="line"><a name="l07898"></a><span class="lineno"> 7898</span>&#160;      <span class="keywordflow">if</span> (!strcasecmp(type, <span class="stringliteral">&quot;trunk&quot;</span>))</div><div class="line"><a name="l07899"></a><span class="lineno"> 7899</span>&#160;         res = <a class="code" href="../../df/d44/app__meetme_8c.html#a1f6d3d4a6e263e27a4f665aaf5cad1b3">sla_build_trunk</a>(cfg, cat);</div><div class="line"><a name="l07900"></a><span class="lineno"> 7900</span>&#160;      <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(type, <span class="stringliteral">&quot;station&quot;</span>))</div><div class="line"><a name="l07901"></a><span class="lineno"> 7901</span>&#160;         res = <a class="code" href="../../df/d44/app__meetme_8c.html#a052cc5aec5957d252837e98b2d200384">sla_build_station</a>(cfg, cat);</div><div class="line"><a name="l07902"></a><span class="lineno"> 7902</span>&#160;      <span class="keywordflow">else</span> {</div><div class="line"><a name="l07903"></a><span class="lineno"> 7903</span>&#160;         <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a>, <span class="stringliteral">&quot;Entry in %s defined with invalid type &#39;%s&#39;!\n&quot;</span>,</div><div class="line"><a name="l07904"></a><span class="lineno"> 7904</span>&#160;            <a class="code" href="../../df/d44/app__meetme_8c.html#a8150bc2c862d46744a596001d6109ffa">SLA_CONFIG_FILE</a>, type);</div><div class="line"><a name="l07905"></a><span class="lineno"> 7905</span>&#160;      }</div><div class="line"><a name="l07906"></a><span class="lineno"> 7906</span>&#160;   }</div><div class="line"><a name="l07907"></a><span class="lineno"> 7907</span>&#160;</div><div class="line"><a name="l07908"></a><span class="lineno"> 7908</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a>(cfg);</div><div class="line"><a name="l07909"></a><span class="lineno"> 7909</span>&#160;</div><div class="line"><a name="l07910"></a><span class="lineno"> 7910</span>&#160;   <span class="keywordflow">if</span> (reload) {</div><div class="line"><a name="l07911"></a><span class="lineno"> 7911</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(sla_trunks, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a1ac81200b04fc992816d6ca37a89a851">sla_trunk_is_marked</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07912"></a><span class="lineno"> 7912</span>&#160;      <a class="code" href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a>(sla_stations, <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a> | <a class="code" href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a2e3830bbe198ca99204da3f7aeda07b4">sla_station_is_marked</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07913"></a><span class="lineno"> 7913</span>&#160;   }</div><div class="line"><a name="l07914"></a><span class="lineno"> 7914</span>&#160;</div><div class="line"><a name="l07915"></a><span class="lineno"> 7915</span>&#160;   <span class="comment">/* Start SLA event processing thread once SLA has been configured. */</span></div><div class="line"><a name="l07916"></a><span class="lineno"> 7916</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.thread == <a class="code" href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a> &amp;&amp; <a class="code" href="../../df/d44/app__meetme_8c.html#ad7a6277dea2b87f386d483e4459cd229">sla_in_use</a>()) {</div><div class="line"><a name="l07917"></a><span class="lineno"> 7917</span>&#160;      <a class="code" href="../../d5/d60/utils_8h.html#a4781fd54a4ca8c7f0f8a32a6cce503c0">ast_pthread_create</a>(&amp;<a class="code" href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a>.thread, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a4e56f1037f61fa109b10096e3dd11176">sla_thread</a>, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07918"></a><span class="lineno"> 7918</span>&#160;   }</div><div class="line"><a name="l07919"></a><span class="lineno"> 7919</span>&#160;</div><div class="line"><a name="l07920"></a><span class="lineno"> 7920</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l07921"></a><span class="lineno"> 7921</span>&#160;}</div><div class="line"><a name="l07922"></a><span class="lineno"> 7922</span>&#160;</div><div class="line"><a name="l07923"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a6b12890a73f5118ef54f1418de765de2"> 7923</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a6b12890a73f5118ef54f1418de765de2">acf_meetme_info_eval</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *keyword, <span class="keyword">const</span> <span class="keyword">struct</span> <a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>)</div><div class="line"><a name="l07924"></a><span class="lineno"> 7924</span>&#160;{</div><div class="line"><a name="l07925"></a><span class="lineno"> 7925</span>&#160;   <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;lock&quot;</span>, keyword)) {</div><div class="line"><a name="l07926"></a><span class="lineno"> 7926</span>&#160;      <span class="keywordflow">return</span> conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">locked</a>;</div><div class="line"><a name="l07927"></a><span class="lineno"> 7927</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;parties&quot;</span>, keyword)) {</div><div class="line"><a name="l07928"></a><span class="lineno"> 7928</span>&#160;      <span class="keywordflow">return</span> conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">users</a>;</div><div class="line"><a name="l07929"></a><span class="lineno"> 7929</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;activity&quot;</span>, keyword)) {</div><div class="line"><a name="l07930"></a><span class="lineno"> 7930</span>&#160;      time_t now;</div><div class="line"><a name="l07931"></a><span class="lineno"> 7931</span>&#160;      now = time(<a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l07932"></a><span class="lineno"> 7932</span>&#160;      <span class="keywordflow">return</span> (now - conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">start</a>);</div><div class="line"><a name="l07933"></a><span class="lineno"> 7933</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!strcasecmp(<span class="stringliteral">&quot;dynamic&quot;</span>, keyword)) {</div><div class="line"><a name="l07934"></a><span class="lineno"> 7934</span>&#160;      <span class="keywordflow">return</span> conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">isdynamic</a>;</div><div class="line"><a name="l07935"></a><span class="lineno"> 7935</span>&#160;   } <span class="keywordflow">else</span> {</div><div class="line"><a name="l07936"></a><span class="lineno"> 7936</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07937"></a><span class="lineno"> 7937</span>&#160;   }</div><div class="line"><a name="l07938"></a><span class="lineno"> 7938</span>&#160;</div><div class="line"><a name="l07939"></a><span class="lineno"> 7939</span>&#160;}</div><div class="line"><a name="l07940"></a><span class="lineno"> 7940</span>&#160;</div><div class="line"><a name="l07941"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#af1a48f6d67bd24c7b9f9891290e04552"> 7941</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#af1a48f6d67bd24c7b9f9891290e04552">acf_meetme_info</a>(<span class="keyword">struct</span> <a class="code" href="../../df/d3c/structast__channel.html">ast_channel</a> *chan, <span class="keyword">const</span> <span class="keywordtype">char</span> *cmd, <span class="keywordtype">char</span> *data, <span class="keywordtype">char</span> *<a class="code" href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a>, <span class="keywordtype">size_t</span> <a class="code" href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a>)</div><div class="line"><a name="l07942"></a><span class="lineno"> 7942</span>&#160;{</div><div class="line"><a name="l07943"></a><span class="lineno"> 7943</span>&#160;   <span class="keyword">struct </span><a class="code" href="../../d8/d44/structast__conference.html">ast_conference</a> *<a class="code" href="../../d6/de8/structconf.html">conf</a>;</div><div class="line"><a name="l07944"></a><span class="lineno"> 7944</span>&#160;   <span class="keywordtype">char</span> *<a class="code" href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a>;</div><div class="line"><a name="l07945"></a><span class="lineno"> 7945</span>&#160;   <span class="keywordtype">int</span> <a class="code" href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a> = -2; <span class="comment">/* only non-negative numbers valid, -1 is used elsewhere */</span></div><div class="line"><a name="l07946"></a><span class="lineno"> 7946</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a>(args,</div><div class="line"><a name="l07947"></a><span class="lineno"> 7947</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(keyword);</div><div class="line"><a name="l07948"></a><span class="lineno"> 7948</span>&#160;      <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a>(<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>);</div><div class="line"><a name="l07949"></a><span class="lineno"> 7949</span>&#160;   );</div><div class="line"><a name="l07950"></a><span class="lineno"> 7950</span>&#160;</div><div class="line"><a name="l07951"></a><span class="lineno"> 7951</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(data)) {</div><div class="line"><a name="l07952"></a><span class="lineno"> 7952</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Syntax: MEETME_INFO() requires two arguments\n&quot;</span>);</div><div class="line"><a name="l07953"></a><span class="lineno"> 7953</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07954"></a><span class="lineno"> 7954</span>&#160;   }</div><div class="line"><a name="l07955"></a><span class="lineno"> 7955</span>&#160;</div><div class="line"><a name="l07956"></a><span class="lineno"> 7956</span>&#160;   parse = <a class="code" href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a>(data);</div><div class="line"><a name="l07957"></a><span class="lineno"> 7957</span>&#160;   <a class="code" href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a>(args, parse);</div><div class="line"><a name="l07958"></a><span class="lineno"> 7958</span>&#160;</div><div class="line"><a name="l07959"></a><span class="lineno"> 7959</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args.keyword)) {</div><div class="line"><a name="l07960"></a><span class="lineno"> 7960</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Syntax: MEETME_INFO() requires a keyword\n&quot;</span>);</div><div class="line"><a name="l07961"></a><span class="lineno"> 7961</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07962"></a><span class="lineno"> 7962</span>&#160;   }</div><div class="line"><a name="l07963"></a><span class="lineno"> 7963</span>&#160;</div><div class="line"><a name="l07964"></a><span class="lineno"> 7964</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a>(args.confno)) {</div><div class="line"><a name="l07965"></a><span class="lineno"> 7965</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a>, <span class="stringliteral">&quot;Syntax: MEETME_INFO() requires a conference number\n&quot;</span>);</div><div class="line"><a name="l07966"></a><span class="lineno"> 7966</span>&#160;      <span class="keywordflow">return</span> -1;</div><div class="line"><a name="l07967"></a><span class="lineno"> 7967</span>&#160;   }</div><div class="line"><a name="l07968"></a><span class="lineno"> 7968</span>&#160;</div><div class="line"><a name="l07969"></a><span class="lineno"> 7969</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l07970"></a><span class="lineno"> 7970</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>, conf, <a class="code" href="../../d8/d44/structast__conference.html#a46885edd8fad62a4089c021a1d810740">list</a>) {</div><div class="line"><a name="l07971"></a><span class="lineno"> 7971</span>&#160;      <span class="keywordflow">if</span> (!strcmp(args.confno, conf-&gt;<a class="code" href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">confno</a>)) {</div><div class="line"><a name="l07972"></a><span class="lineno"> 7972</span>&#160;         result = <a class="code" href="../../df/d44/app__meetme_8c.html#a6b12890a73f5118ef54f1418de765de2">acf_meetme_info_eval</a>(args.keyword, conf);</div><div class="line"><a name="l07973"></a><span class="lineno"> 7973</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l07974"></a><span class="lineno"> 7974</span>&#160;      }</div><div class="line"><a name="l07975"></a><span class="lineno"> 7975</span>&#160;   }</div><div class="line"><a name="l07976"></a><span class="lineno"> 7976</span>&#160;   <a class="code" href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a>(&amp;<a class="code" href="../../df/dd2/structconfs.html">confs</a>);</div><div class="line"><a name="l07977"></a><span class="lineno"> 7977</span>&#160;</div><div class="line"><a name="l07978"></a><span class="lineno"> 7978</span>&#160;   <span class="keywordflow">if</span> (result &gt; -1) {</div><div class="line"><a name="l07979"></a><span class="lineno"> 7979</span>&#160;      snprintf(buf, len, <span class="stringliteral">&quot;%d&quot;</span>, result);</div><div class="line"><a name="l07980"></a><span class="lineno"> 7980</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (result == -1) {</div><div class="line"><a name="l07981"></a><span class="lineno"> 7981</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Error: invalid keyword: &#39;%s&#39;\n&quot;</span>, args.keyword);</div><div class="line"><a name="l07982"></a><span class="lineno"> 7982</span>&#160;      snprintf(buf, len, <span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l07983"></a><span class="lineno"> 7983</span>&#160;   } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (result == -2) {</div><div class="line"><a name="l07984"></a><span class="lineno"> 7984</span>&#160;      <a class="code" href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a>(<a class="code" href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a>, <span class="stringliteral">&quot;Error: conference (%s) not found\n&quot;</span>, args.confno);</div><div class="line"><a name="l07985"></a><span class="lineno"> 7985</span>&#160;      snprintf(buf, len, <span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l07986"></a><span class="lineno"> 7986</span>&#160;   }</div><div class="line"><a name="l07987"></a><span class="lineno"> 7987</span>&#160;</div><div class="line"><a name="l07988"></a><span class="lineno"> 7988</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l07989"></a><span class="lineno"> 7989</span>&#160;}</div><div class="line"><a name="l07990"></a><span class="lineno"> 7990</span>&#160;</div><div class="line"><a name="l07991"></a><span class="lineno"> 7991</span>&#160;</div><div class="line"><a name="l07992"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a0ff1e6e0d1512995dc75af266143dceb"> 7992</a></span>&#160;<span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="../../db/dc0/structast__custom__function.html">ast_custom_function</a> <a class="code" href="../../df/d44/app__meetme_8c.html#a0ff1e6e0d1512995dc75af266143dceb">meetme_info_acf</a> = {</div><div class="line"><a name="l07993"></a><span class="lineno"> 7993</span>&#160;   .<a class="code" href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">name</a> = <span class="stringliteral">&quot;MEETME_INFO&quot;</span>,</div><div class="line"><a name="l07994"></a><span class="lineno"> 7994</span>&#160;   .read = <a class="code" href="../../df/d44/app__meetme_8c.html#af1a48f6d67bd24c7b9f9891290e04552">acf_meetme_info</a>,</div><div class="line"><a name="l07995"></a><span class="lineno"> 7995</span>&#160;};</div><div class="line"><a name="l07996"></a><span class="lineno"> 7996</span>&#160;</div><div class="line"><a name="l07997"></a><span class="lineno"> 7997</span>&#160;</div><div class="line"><a name="l07998"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ad0f6114d9cab58a8ec3d9555cb466534"> 7998</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ad0f6114d9cab58a8ec3d9555cb466534">load_config</a>(<span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>)</div><div class="line"><a name="l07999"></a><span class="lineno"> 7999</span>&#160;{</div><div class="line"><a name="l08000"></a><span class="lineno"> 8000</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#acc07ba96fffd24d21a941036c4e867a4">load_config_meetme</a>(reload);</div><div class="line"><a name="l08001"></a><span class="lineno"> 8001</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#a03d6f53f0d136a93c89b9d848ca0ed0e">sla_load_config</a>(reload);</div><div class="line"><a name="l08002"></a><span class="lineno"> 8002</span>&#160;}</div><div class="line"><a name="l08003"></a><span class="lineno"> 8003</span>&#160;</div><div class="line"><a name="l08004"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ad09fa931f468002152a3cc2d5ce25eae"> 8004</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l08005"></a><span class="lineno"> 8005</span>&#160;{</div><div class="line"><a name="l08006"></a><span class="lineno"> 8006</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l08007"></a><span class="lineno"> 8007</span>&#160;</div><div class="line"><a name="l08008"></a><span class="lineno"> 8008</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a>(cli_meetme, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_meetme));</div><div class="line"><a name="l08009"></a><span class="lineno"> 8009</span>&#160;   res = <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;MeetmeMute&quot;</span>);</div><div class="line"><a name="l08010"></a><span class="lineno"> 8010</span>&#160;   res |= <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;MeetmeUnmute&quot;</span>);</div><div class="line"><a name="l08011"></a><span class="lineno"> 8011</span>&#160;   res |= <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;MeetmeList&quot;</span>);</div><div class="line"><a name="l08012"></a><span class="lineno"> 8012</span>&#160;   res |= <a class="code" href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a>(<span class="stringliteral">&quot;MeetmeListRooms&quot;</span>);</div><div class="line"><a name="l08013"></a><span class="lineno"> 8013</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(app4);</div><div class="line"><a name="l08014"></a><span class="lineno"> 8014</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(app3);</div><div class="line"><a name="l08015"></a><span class="lineno"> 8015</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(app2);</div><div class="line"><a name="l08016"></a><span class="lineno"> 8016</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(app);</div><div class="line"><a name="l08017"></a><span class="lineno"> 8017</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(slastation_app);</div><div class="line"><a name="l08018"></a><span class="lineno"> 8018</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a>(slatrunk_app);</div><div class="line"><a name="l08019"></a><span class="lineno"> 8019</span>&#160;</div><div class="line"><a name="l08020"></a><span class="lineno"> 8020</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<span class="stringliteral">&quot;Meetme&quot;</span>);</div><div class="line"><a name="l08021"></a><span class="lineno"> 8021</span>&#160;   <a class="code" href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a>(<span class="stringliteral">&quot;SLA&quot;</span>);</div><div class="line"><a name="l08022"></a><span class="lineno"> 8022</span>&#160;</div><div class="line"><a name="l08023"></a><span class="lineno"> 8023</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#abc917c910c7fd37e34c7a985a227e0b9">sla_destroy</a>();</div><div class="line"><a name="l08024"></a><span class="lineno"> 8024</span>&#160;</div><div class="line"><a name="l08025"></a><span class="lineno"> 8025</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a>(&amp;meetme_info_acf);</div><div class="line"><a name="l08026"></a><span class="lineno"> 8026</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66b6af9ceef39cb23b48501efe87219f">ast_unload_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>);</div><div class="line"><a name="l08027"></a><span class="lineno"> 8027</span>&#160;</div><div class="line"><a name="l08028"></a><span class="lineno"> 8028</span>&#160;   <a class="code" href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a>();</div><div class="line"><a name="l08029"></a><span class="lineno"> 8029</span>&#160;</div><div class="line"><a name="l08030"></a><span class="lineno"> 8030</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l08031"></a><span class="lineno"> 8031</span>&#160;}</div><div class="line"><a name="l08032"></a><span class="lineno"> 8032</span>&#160;<span class="comment"></span></div><div class="line"><a name="l08033"></a><span class="lineno"> 8033</span>&#160;<span class="comment">/*!</span></div><div class="line"><a name="l08034"></a><span class="lineno"> 8034</span>&#160;<span class="comment"> * \brief Load the module</span></div><div class="line"><a name="l08035"></a><span class="lineno"> 8035</span>&#160;<span class="comment"> *</span></div><div class="line"><a name="l08036"></a><span class="lineno"> 8036</span>&#160;<span class="comment"> * Module loading including tests for configuration or dependencies.</span></div><div class="line"><a name="l08037"></a><span class="lineno"> 8037</span>&#160;<span class="comment"> * This function can return AST_MODULE_LOAD_FAILURE, AST_MODULE_LOAD_DECLINE,</span></div><div class="line"><a name="l08038"></a><span class="lineno"> 8038</span>&#160;<span class="comment"> * or AST_MODULE_LOAD_SUCCESS. If a dependency or environment variable fails</span></div><div class="line"><a name="l08039"></a><span class="lineno"> 8039</span>&#160;<span class="comment"> * tests return AST_MODULE_LOAD_FAILURE. If the module can not load the</span></div><div class="line"><a name="l08040"></a><span class="lineno"> 8040</span>&#160;<span class="comment"> * configuration file or other non-critical problem return</span></div><div class="line"><a name="l08041"></a><span class="lineno"> 8041</span>&#160;<span class="comment"> * AST_MODULE_LOAD_DECLINE. On success return AST_MODULE_LOAD_SUCCESS.</span></div><div class="line"><a name="l08042"></a><span class="lineno"> 8042</span>&#160;<span class="comment"> */</span></div><div class="line"><a name="l08043"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9"> 8043</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l08044"></a><span class="lineno"> 8044</span>&#160;{</div><div class="line"><a name="l08045"></a><span class="lineno"> 8045</span>&#160;   <span class="keywordtype">int</span> res = 0;</div><div class="line"><a name="l08046"></a><span class="lineno"> 8046</span>&#160;</div><div class="line"><a name="l08047"></a><span class="lineno"> 8047</span>&#160;   res |= <a class="code" href="../../df/d44/app__meetme_8c.html#ad0f6114d9cab58a8ec3d9555cb466534">load_config</a>(0);</div><div class="line"><a name="l08048"></a><span class="lineno"> 8048</span>&#160;</div><div class="line"><a name="l08049"></a><span class="lineno"> 8049</span>&#160;   res |= <a class="code" href="../../df/d44/app__meetme_8c.html#abdd54fb68b736c31775bab463bd0a137">meetme_stasis_init</a>();</div><div class="line"><a name="l08050"></a><span class="lineno"> 8050</span>&#160;</div><div class="line"><a name="l08051"></a><span class="lineno"> 8051</span>&#160;   <a class="code" href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a>(cli_meetme, <a class="code" href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a>(cli_meetme));</div><div class="line"><a name="l08052"></a><span class="lineno"> 8052</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;MeetmeMute&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#aa469d77d3fee8f11b2d48740365fd0d5">action_meetmemute</a>);</div><div class="line"><a name="l08053"></a><span class="lineno"> 8053</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;MeetmeUnmute&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a04a4ee089b212107b1e33943ce45fb3e">action_meetmeunmute</a>);</div><div class="line"><a name="l08054"></a><span class="lineno"> 8054</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;MeetmeList&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a0b1b4140c2836696a6950e92ab48a580">EVENT_FLAG_REPORTING</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#a94e294b5969cdd4c4fb0802b9e6728a4">action_meetmelist</a>);</div><div class="line"><a name="l08055"></a><span class="lineno"> 8055</span>&#160;   res |= <a class="code" href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a>(<span class="stringliteral">&quot;MeetmeListRooms&quot;</span>, <a class="code" href="../../db/d45/manager_8h.html#a0b1b4140c2836696a6950e92ab48a580">EVENT_FLAG_REPORTING</a>, <a class="code" href="../../df/d44/app__meetme_8c.html#ae871ecb7fca76ad99a15c73a60d37b6b">action_meetmelistrooms</a>);</div><div class="line"><a name="l08056"></a><span class="lineno"> 8056</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(app4, <a class="code" href="../../df/d44/app__meetme_8c.html#a850bf7360efcdaa168bcb5f190580a42">channel_admin_exec</a>);</div><div class="line"><a name="l08057"></a><span class="lineno"> 8057</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(app3, admin_exec);</div><div class="line"><a name="l08058"></a><span class="lineno"> 8058</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(app2, <a class="code" href="../../df/d44/app__meetme_8c.html#a29a5ba76eaa83896c95fd3921bfcc379">count_exec</a>);</div><div class="line"><a name="l08059"></a><span class="lineno"> 8059</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(app, <a class="code" href="../../df/d44/app__meetme_8c.html#acf06d30da1983dcdfcd1a32ddff7b5f9">conf_exec</a>);</div><div class="line"><a name="l08060"></a><span class="lineno"> 8060</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(slastation_app, <a class="code" href="../../df/d44/app__meetme_8c.html#abdc353ad8c1a89ea6138263c38d3a10a">sla_station_exec</a>);</div><div class="line"><a name="l08061"></a><span class="lineno"> 8061</span>&#160;   res |= <a class="code" href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a>(slatrunk_app, <a class="code" href="../../df/d44/app__meetme_8c.html#a9a7384427e576a2fc12a20d258fe29a8">sla_trunk_exec</a>);</div><div class="line"><a name="l08062"></a><span class="lineno"> 8062</span>&#160;</div><div class="line"><a name="l08063"></a><span class="lineno"> 8063</span>&#160;   res |= <a class="code" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a>(<span class="stringliteral">&quot;Meetme&quot;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#a8fc3c28c0edf393e6f7a01f3e0865de6">meetmestate</a>);</div><div class="line"><a name="l08064"></a><span class="lineno"> 8064</span>&#160;   res |= <a class="code" href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a>(<span class="stringliteral">&quot;SLA&quot;</span>, <a class="code" href="../../df/d44/app__meetme_8c.html#ab2f6aeedfe3c63d7c493a1c849893d10">sla_state</a>);</div><div class="line"><a name="l08065"></a><span class="lineno"> 8065</span>&#160;</div><div class="line"><a name="l08066"></a><span class="lineno"> 8066</span>&#160;   res |= <a class="code" href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a>(&amp;meetme_info_acf);</div><div class="line"><a name="l08067"></a><span class="lineno"> 8067</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a403ec8b49645ea204e82cb72bb8cf9f4">ast_realtime_require_field</a>(<span class="stringliteral">&quot;meetme&quot;</span>, <span class="stringliteral">&quot;confno&quot;</span>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a>, 3, <span class="stringliteral">&quot;members&quot;</span>, <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a>, 3, <a class="code" href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div><div class="line"><a name="l08068"></a><span class="lineno"> 8068</span>&#160;</div><div class="line"><a name="l08069"></a><span class="lineno"> 8069</span>&#160;   <span class="keywordflow">return</span> res;</div><div class="line"><a name="l08070"></a><span class="lineno"> 8070</span>&#160;}</div><div class="line"><a name="l08071"></a><span class="lineno"> 8071</span>&#160;</div><div class="line"><a name="l08072"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#ad1982509765f4870f1f63412a53ea668"> 8072</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>(<span class="keywordtype">void</span>)</div><div class="line"><a name="l08073"></a><span class="lineno"> 8073</span>&#160;{</div><div class="line"><a name="l08074"></a><span class="lineno"> 8074</span>&#160;   <a class="code" href="../../d3/de6/include_2asterisk_2config_8h.html#a66b6af9ceef39cb23b48501efe87219f">ast_unload_realtime</a>(<span class="stringliteral">&quot;meetme&quot;</span>);</div><div class="line"><a name="l08075"></a><span class="lineno"> 8075</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="../../df/d44/app__meetme_8c.html#ad0f6114d9cab58a8ec3d9555cb466534">load_config</a>(1);</div><div class="line"><a name="l08076"></a><span class="lineno"> 8076</span>&#160;}</div><div class="line"><a name="l08077"></a><span class="lineno"> 8077</span>&#160;</div><div class="line"><a name="l08078"></a><span class="lineno"> 8078</span>&#160;<a class="code" href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO</a>(<a class="code" href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a>, <a class="code" href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a>, <span class="stringliteral">&quot;MeetMe conference bridge&quot;</span>,</div><div class="line"><a name="l08079"></a><span class="lineno"> 8079</span>&#160;   .support_level = <a class="code" href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a9f8870a5687abe3d9a6b0b3fbc89a800">AST_MODULE_SUPPORT_EXTENDED</a>,</div><div class="line"><a name="l08080"></a><span class="lineno"> 8080</span>&#160;   .load = <a class="code" href="../../df/d44/app__meetme_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a>,</div><div class="line"><a name="l08081"></a><span class="lineno"> 8081</span>&#160;   .unload = <a class="code" href="../../df/d44/app__meetme_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a>,</div><div class="line"><a name="l08082"></a><span class="lineno"> 8082</span>&#160;   .<a class="code" href="../../df/d44/app__meetme_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a> = <a class="code" href="../../df/d44/app__meetme_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a>,</div><div class="line"><a name="l08083"></a><span class="lineno"> 8083</span>&#160;   .load_pri = <a class="code" href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58af2d6c20d90a068171cc852484a435980">AST_MODPRI_DEVSTATE_PROVIDER</a>,</div><div class="line"><a name="l08084"></a><span class="lineno"> 8084</span>&#160;   .optional_modules = <span class="stringliteral">&quot;func_speex&quot;</span>,</div><div class="line"><a name="l08085"></a><span class="lineno"><a class="line" href="../../df/d44/app__meetme_8c.html#a4fb0aca9bbcdb9709fa52a70aded6cae"> 8085</a></span>&#160;);</div><div class="ttc" id="res__config__ldap_8c_html_a930c15eddfe0826ff30e658c9d50b9b4"><div class="ttname"><a href="../../dc/d12/res__config__ldap_8c.html#a930c15eddfe0826ff30e658c9d50b9b4">user</a></div><div class="ttdeci">static char user[512]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d12/res__config__ldap_8c_source.html#l00075">res_config_ldap.c:75</a></div></div>
<div class="ttc" id="structast__conf__user_html_a0c5b688fdd12f025eac68318c8d3e1eb"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a0c5b688fdd12f025eac68318c8d3e1eb">ast_conf_user::adminflags</a></div><div class="ttdeci">int adminflags</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00899">app_meetme.c:899</a></div></div>
<div class="ttc" id="structast__custom__function_html_afcd1706c9144e6d6eee6127661ae3be2"><div class="ttname"><a href="../../db/dc0/structast__custom__function.html#afcd1706c9144e6d6eee6127661ae3be2">ast_custom_function::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00119">pbx.h:119</a></div></div>
<div class="ttc" id="structsla__trunk_html_ace9168767fc3707cf5f0a7d049682ba3"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#ace9168767fc3707cf5f0a7d049682ba3">sla_trunk::name</a></div><div class="ttdeci">const ast_string_field name</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00986">app_meetme.c:986</a></div></div>
<div class="ttc" id="channel_8h_html_ac2dc872b606534943c98304aed841b34"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2dc872b606534943c98304aed841b34">ast_channel_caller</a></div><div class="ttdeci">struct ast_party_caller * ast_channel_caller(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00888">channel_internal_api.c:888</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390ab99a3d1c08c5ae8bca078c7cd1ec02f5">AST_CONTROL_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00293">include/asterisk/frame.h:293</a></div></div>
<div class="ttc" id="structsla__trunk_html_aaf4bad1817a2988a07bb37913898d976"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#aaf4bad1817a2988a07bb37913898d976">sla_trunk::active_stations</a></div><div class="ttdeci">unsigned int active_stations</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00991">app_meetme.c:991</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a09c071d06bc4f6db4d32b68f577a1033"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a09c071d06bc4f6db4d32b68f577a1033">meetme_stasis_cb</a></div><div class="ttdeci">static void meetme_stasis_cb(void *data, struct stasis_subscription *sub, struct stasis_message *message)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01226">app_meetme.c:1226</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aacbac1f0d72bfec51d91f4ace69cbbd4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aacbac1f0d72bfec51d91f4ace69cbbd4">fuzzystart</a></div><div class="ttdeci">static int fuzzystart</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00811">app_meetme.c:811</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1a03993603e2bc2463153857836645bb"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1a03993603e2bc2463153857836645bb">ast_load_realtime</a></div><div class="ttdeci">struct ast_variable * ast_load_realtime(const char *family,...) attribute_sentinel</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03339">main/config.c:3339</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_abc34958c9b03014779727e5ca61b93e5"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#abc34958c9b03014779727e5ca61b93e5">musicclass</a></div><div class="ttdeci">static char musicclass[MAX_MUSICCLASS]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00162">chan_mgcp.c:162</a></div></div>
<div class="ttc" id="structast__variable_html_afaaf66cc5029a563bd0bb9df076ea14b"><div class="ttname"><a href="../../dd/d02/structast__variable.html#afaaf66cc5029a563bd0bb9df076ea14b">ast_variable::next</a></div><div class="ttdeci">struct ast_variable * next</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00090">include/asterisk/config.h:90</a></div></div>
<div class="ttc" id="channel_8h_html_af10e3bd01602095e1908d3926afc3b76"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af10e3bd01602095e1908d3926afc3b76">ast_safe_sleep</a></div><div class="ttdeci">int ast_safe_sleep(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for a specified amount of time, looking for hangups. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01574">channel.c:1574</a></div></div>
<div class="ttc" id="chan__ooh323_8c_html_a4d63fdfe5451ec2248c16a2739190c56"><div class="ttname"><a href="../../d7/d49/chan__ooh323_8c.html#a4d63fdfe5451ec2248c16a2739190c56">type</a></div><div class="ttdeci">static const char type[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d49/chan__ooh323_8c_source.html#l00109">chan_ooh323.c:109</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2acb14ff82a951501e9dbd8b700e8509"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2acb14ff82a951501e9dbd8b700e8509">conf_free</a></div><div class="ttdeci">static int conf_free(struct ast_conference *conf)</div><div class="ttdoc">Remove the conference from the list and free it. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02331">app_meetme.c:2331</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae1a11424819b90f48a2f8817af8681cd"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae1a11424819b90f48a2f8817af8681cd">set_user_talking</a></div><div class="ttdeci">static void set_user_talking(struct ast_channel *chan, struct ast_conference *conf, struct ast_conf_user *user, int talking, int monitor)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02687">app_meetme.c:2687</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a14a9662e09deed264497073732fb014a"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a14a9662e09deed264497073732fb014a">state</a></div><div class="ttdeci">enum sip_cc_notify_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l00959">chan_sip.c:959</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780ba4d83dedb6411e852fbed173dbb216123">VOL_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00667">app_meetme.c:667</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a631bcace98e3013377a69b15c1bd8107"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a631bcace98e3013377a69b15c1bd8107">sla_choose_idle_trunk</a></div><div class="ttdeci">static struct sla_trunk_ref * sla_choose_idle_trunk(const struct sla_station *station)</div><div class="ttdoc">For a given station, choose the highest priority idle trunk. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06992">app_meetme.c:6992</a></div></div>
<div class="ttc" id="structast__conf__user_html_a1fa6cb6235cf4abe198a8561e3c18bae"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a1fa6cb6235cf4abe198a8561e3c18bae">ast_conf_user::warning_sound</a></div><div class="ttdeci">const char * warning_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00911">app_meetme.c:911</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a01f75a9ad916f63a94e06a27635ba278"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a01f75a9ad916f63a94e06a27635ba278">thread</a></div><div class="ttdeci">pthread_t thread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01089">app_meetme.c:1089</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5adbfeb91d218a9c723a2e6394f9ec1f13">ADMINFLAG_T_REQUEST</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00657">app_meetme.c:657</a></div></div>
<div class="ttc" id="channel_8h_html_a493bdebe876caafb8ee535853310364a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a493bdebe876caafb8ee535853310364a">ast_channel_lock</a></div><div class="ttdeci">#define ast_channel_lock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02945">channel.h:2945</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea6b7416bea92d3bc5ee8e36f0a484cdc1">AST_DEVICE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00061">devicestate.h:61</a></div></div>
<div class="ttc" id="format_8h_html_a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a79bdf0b3c0616d9950d00cfeb62295c3ab1e8c1a0f8b4a1ecb6a2109992636859">AST_FORMAT_CMP_EQUAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0a/format_8h_source.html#l00036">format.h:36</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a78d4847658b695383d849efd12399b38"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a78d4847658b695383d849efd12399b38">exten</a></div><div class="ttdeci">static char exten[AST_MAX_EXTENSION]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00118">chan_alsa.c:118</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a6b83efd16d32463a4514e17f944423b3"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a6b83efd16d32463a4514e17f944423b3">complete_meetmecmd_list</a></div><div class="ttdeci">static char * complete_meetmecmd_list(const char *line, const char *word, int pos, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01814">app_meetme.c:1814</a></div></div>
<div class="ttc" id="structast__channel_html"><div class="ttname"><a href="../../df/d3c/structast__channel.html">ast_channel</a></div><div class="ttdoc">Main Channel structure associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00073">channel_internal_api.c:73</a></div></div>
<div class="ttc" id="musiconhold_8h_html"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html">musiconhold.h</a></div><div class="ttdoc">Music on hold handling. </div></div>
<div class="ttc" id="cli_8h_html_a5c4130cf8f1e93acfdd84416cebf1aef"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a5c4130cf8f1e93acfdd84416cebf1aef">AST_CLI_DEFINE</a></div><div class="ttdeci">#define AST_CLI_DEFINE(fn, txt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00197">cli.h:197</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eee"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eee">ast_device_state</a></div><div class="ttdeci">ast_device_state</div><div class="ttdoc">Device States. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00052">devicestate.h:52</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a417ee8a61074ec7570971202908e2c4f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a417ee8a61074ec7570971202908e2c4f">ast_frdup</a></div><div class="ttdeci">#define ast_frdup(fr)</div><div class="ttdoc">Copies a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00585">include/asterisk/frame.h:585</a></div></div>
<div class="ttc" id="structast__party__number_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_number::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber phone number (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00292">channel.h:292</a></div></div>
<div class="ttc" id="dial_8h_html_ab75c6f2fe91945cf61e7e91939618db2"><div class="ttname"><a href="../../df/dcf/dial_8h.html#ab75c6f2fe91945cf61e7e91939618db2">ast_dial_destroy</a></div><div class="ttdeci">int ast_dial_destroy(struct ast_dial *dial)</div><div class="ttdoc">Destroys a dialing structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01091">dial.c:1091</a></div></div>
<div class="ttc" id="structmessage_html"><div class="ttname"><a href="../../d8/d9e/structmessage.html">message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00144">manager.h:144</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a68869e7d25e7e313afd63ffb70b95546"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a68869e7d25e7e313afd63ffb70b95546">sla_add_trunk_to_station</a></div><div class="ttdeci">static void sla_add_trunk_to_station(struct sla_station *station, struct ast_variable *var)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07562">app_meetme.c:7562</a></div></div>
<div class="ttc" id="file_8h_html_a67c7e271b4ca70aca6d48fd48d121857"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a67c7e271b4ca70aca6d48fd48d121857">ast_streamfile</a></div><div class="ttdeci">int ast_streamfile(struct ast_channel *c, const char *filename, const char *preflang)</div><div class="ttdoc">Streams a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01250">file.c:1250</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a9140a4e4d781264fa9469c52b1adae40"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a9140a4e4d781264fa9469c52b1adae40">AST_LIST_LOCK</a></div><div class="ttdeci">#define AST_LIST_LOCK(head)</div><div class="ttdoc">Locks a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00039">linkedlists.h:39</a></div></div>
<div class="ttc" id="structrun__station__args_html_afa55138e79daa65d864f3524cf4843bf"><div class="ttname"><a href="../../d8/d26/structrun__station__args.html#afa55138e79daa65d864f3524cf4843bf">run_station_args::trunk_ref</a></div><div class="ttdeci">struct sla_trunk_ref * trunk_ref</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06057">app_meetme.c:6057</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4ce13be63c079c6ac6c923fc8e34c213"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4ce13be63c079c6ac6c923fc8e34c213">user_chan_cb</a></div><div class="ttdeci">static int user_chan_cb(void *obj, void *args, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05210">app_meetme.c:5210</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae871ecb7fca76ad99a15c73a60d37b6b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae871ecb7fca76ad99a15c73a60d37b6b">action_meetmelistrooms</a></div><div class="ttdeci">static int action_meetmelistrooms(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05593">app_meetme.c:5593</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a90ac21323abfebfc412d2b141af2a4e5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a90ac21323abfebfc412d2b141af2a4e5">find_user</a></div><div class="ttdeci">static struct ast_conf_user * find_user(struct ast_conference *conf, const char *callerident)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05162">app_meetme.c:5162</a></div></div>
<div class="ttc" id="lock_8h_html"><div class="ttname"><a href="../../dd/d42/lock_8h.html">lock.h</a></div><div class="ttdoc">Asterisk locking-related definitions: </div></div>
<div class="ttc" id="app__meetme_8c_html_add1f426b8d82cf993d8167e21de8319b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#add1f426b8d82cf993d8167e21de8319b">get_announce_filename</a></div><div class="ttdeci">static const char * get_announce_filename(enum announcetypes type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02601">app_meetme.c:2601</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae41ef090701bb8dfec1fc5850873e690"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae41ef090701bb8dfec1fc5850873e690">sla</a></div><div class="ttdeci">static struct @35 sla</div><div class="ttdoc">A structure for data used by the sla thread. </div></div>
<div class="ttc" id="group__Group__AMI_html_gac2d42f7be13c532b6a70d50f1b8983d2"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac2d42f7be13c532b6a70d50f1b8983d2">astman_append</a></div><div class="ttdeci">void astman_append(struct mansession *s, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03080">manager.c:3080</a></div></div>
<div class="ttc" id="stasis__channels_8h_html"><div class="ttname"><a href="../../d9/d4a/stasis__channels_8h.html">stasis_channels.h</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a00c9a846446d62f12898047d3d34cc75"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75">sla_trunk_state</a></div><div class="ttdeci">sla_trunk_state</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00923">app_meetme.c:923</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a35cc725664fd0b4f53fbbb7d0f15c038"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a35cc725664fd0b4f53fbbb7d0f15c038">endalert</a></div><div class="ttdeci">static int endalert</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00813">app_meetme.c:813</a></div></div>
<div class="ttc" id="asterisk_8h_html"><div class="ttname"><a href="../../db/db2/asterisk_8h.html">asterisk.h</a></div><div class="ttdoc">Asterisk main include file. File version handling, generic pbx functions. </div></div>
<div class="ttc" id="app__meetme_8c_html_a69102ed9de8dc84bb7d435dac5fe22cf"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a69102ed9de8dc84bb7d435dac5fe22cf">sla_handle_ringing_trunk_event</a></div><div class="ttdeci">static void sla_handle_ringing_trunk_event(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06549">app_meetme.c:6549</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1cd8b7d01b41ec3bbe98d2c80e388034"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1cd8b7d01b41ec3bbe98d2c80e388034">dispose_conf</a></div><div class="ttdeci">static int dispose_conf(struct ast_conference *conf)</div><div class="ttdoc">Decrement reference counts, as incremented by find_conf() </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02504">app_meetme.c:2504</a></div></div>
<div class="ttc" id="structast__conf__user_html_ab83335d6897e2ea22f24b1b8afd95b0f"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#ab83335d6897e2ea22f24b1b8afd95b0f">ast_conf_user::start_time</a></div><div class="ttdeci">struct timeval start_time</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00907">app_meetme.c:907</a></div></div>
<div class="ttc" id="astobj2_8h_html_a512cc40ce96c63b3d5c78040baa4c9cd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a512cc40ce96c63b3d5c78040baa4c9cd">ao2_container_count</a></div><div class="ttdeci">int ao2_container_count(struct ao2_container *c)</div><div class="ttdoc">Returns the number of elements in a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00034">astobj2_container.c:34</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a96a58e29e8dbf2b5bdeb775cba46556ea95e81c82fdf625d648da836620d15dca"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea95e81c82fdf625d648da836620d15dca">OPT_ARG_EXITKEYS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00757">app_meetme.c:757</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a89c58e019ddc321d5cd5b264a664a7d5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a89c58e019ddc321d5cd5b264a664a7d5">tweak_talk_volume</a></div><div class="ttdeci">static void tweak_talk_volume(struct ast_conf_user *user, enum volume_action action)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01494">app_meetme.c:1494</a></div></div>
<div class="ttc" id="structast__conference_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a84d1435c5b8d387806714ea7079304b7">ast_conference::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00846">app_meetme.c:846</a></div></div>
<div class="ttc" id="isdn__lib_8c_html_ab9129b977a587b50ea801daac75e178f"><div class="ttname"><a href="../../de/dfe/isdn__lib_8c.html#ab9129b977a587b50ea801daac75e178f">ARRAY_LEN</a></div><div class="ttdeci">#define ARRAY_LEN(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dfe/isdn__lib_8c_source.html#l00042">isdn_lib.c:42</a></div></div>
<div class="ttc" id="structast__frame_html_aed7ea92f45bd273dde380a45ddced592"><div class="ttname"><a href="../../d0/d99/structast__frame.html#aed7ea92f45bd273dde380a45ddced592">ast_frame::offset</a></div><div class="ttdeci">int offset</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00179">include/asterisk/frame.h:179</a></div></div>
<div class="ttc" id="utils_8h_html_ab2b7ee74bfabc5749561a38506048351"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab2b7ee74bfabc5749561a38506048351">ast_copy_flags64</a></div><div class="ttdeci">#define ast_copy_flags64(dest, src, flagz)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00141">utils.h:141</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1a18c35c2d3cf47bb0b07f2ec3c3d434"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1a18c35c2d3cf47bb0b07f2ec3c3d434">meetme_menu_normal</a></div><div class="ttdeci">static void meetme_menu_normal(enum menu_modes *menu_mode, int *dtmf, struct ast_conference *conf, struct ast_flags64 *confflags, struct ast_channel *chan, struct ast_conf_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02766">app_meetme.c:2766</a></div></div>
<div class="ttc" id="channel_8h_html_a7a8f6a50f3db42cb40cad7cfbd1d54f9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7a8f6a50f3db42cb40cad7cfbd1d54f9">ast_autoservice_start</a></div><div class="ttdeci">int ast_autoservice_start(struct ast_channel *chan)</div><div class="ttdoc">Automatically service a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00200">autoservice.c:200</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18aaa7767ea9a06a32c263e477dc780b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780b">volume_action</a></div><div class="ttdeci">volume_action</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00666">app_meetme.c:666</a></div></div>
<div class="ttc" id="json_8h_html_a99715667e822b2ad409b34ca041e535d"><div class="ttname"><a href="../../d4/d05/json_8h.html#a99715667e822b2ad409b34ca041e535d">ast_json_pack</a></div><div class="ttdeci">struct ast_json * ast_json_pack(char const *format,...)</div><div class="ttdoc">Helper for creating complex JSON values. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00591">json.c:591</a></div></div>
<div class="ttc" id="include_2asterisk_2format__compatibility_8h_html_a2fea9280c775fadc7929b5213dff7f36"><div class="ttname"><a href="../../d1/d18/include_2asterisk_2format__compatibility_8h.html#a2fea9280c775fadc7929b5213dff7f36">ast_format_compatibility_format2bitfield</a></div><div class="ttdeci">uint64_t ast_format_compatibility_format2bitfield(const struct ast_format *format)</div><div class="ttdoc">Convert a format structure to its respective bitfield. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de1/main_2format__compatibility_8c_source.html#l00039">main/format_compatibility.c:39</a></div></div>
<div class="ttc" id="structsla__trunk__ref_html_a1f1a04b798d6b529cac3ee205c5e7961"><div class="ttname"><a href="../../d5/d5a/structsla__trunk__ref.html#a1f1a04b798d6b529cac3ee205c5e7961">sla_trunk_ref::ring_timeout</a></div><div class="ttdeci">unsigned int ring_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01023">app_meetme.c:1023</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_abcf55626860f173284cafa474946d9b2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#abcf55626860f173284cafa474946d9b2">AST_OPTION_TXGAIN</a></div><div class="ttdeci">#define AST_OPTION_TXGAIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00448">include/asterisk/frame.h:448</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a96a58e29e8dbf2b5bdeb775cba46556eab415b22a4e9742e57fc6ef8f2c5362d9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab415b22a4e9742e57fc6ef8f2c5362d9">OPT_ARG_INTROMSG</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00761">app_meetme.c:761</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e3dbc57c03c23543354ef108c31fac8"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e3dbc57c03c23543354ef108c31fac8">pbx_exec</a></div><div class="ttdeci">int pbx_exec(struct ast_channel *c, struct ast_app *app, const char *data)</div><div class="ttdoc">Execute an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00471">pbx_app.c:471</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a274bd5a5386b1ea0514ec87feb3d8d85"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a274bd5a5386b1ea0514ec87feb3d8d85">careful_write</a></div><div class="ttdeci">static int careful_write(int fd, unsigned char *data, int len, int block)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01408">app_meetme.c:1408</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a1ebb7d640cd5b3a979cb419950eb48b6">CONFFLAG_INTROUSERNOREVIEW</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00731">app_meetme.c:731</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aae1fb3024d55422f49daef5b4737757c"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aae1fb3024d55422f49daef5b4737757c">sla_ring_stations</a></div><div class="ttdeci">static void sla_ring_stations(void)</div><div class="ttdoc">Ring stations based on current set of ringing trunks. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06480">app_meetme.c:6480</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a052cc5aec5957d252837e98b2d200384"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a052cc5aec5957d252837e98b2d200384">sla_build_station</a></div><div class="ttdeci">static int sla_build_station(struct ast_config *cfg, const char *cat)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07646">app_meetme.c:7646</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ace192d1093a2e9ce2a92e19fb0b0e578"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ace192d1093a2e9ce2a92e19fb0b0e578">STR_CONCISE</a></div><div class="ttdeci">#define STR_CONCISE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00644">app_meetme.c:644</a></div></div>
<div class="ttc" id="structast__dial_html"><div class="ttname"><a href="../../db/db7/structast__dial.html">ast_dial</a></div><div class="ttdoc">Main dialing structure. Contains global options, channels being dialed, and more! ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00048">dial.c:48</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1a950620127847d30c0eee380b956fa7"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1a950620127847d30c0eee380b956fa7">find_conf</a></div><div class="ttdeci">static struct ast_conference * find_conf(struct ast_channel *chan, char *confno, int make, int dynamic, char *dynamic_pin, size_t pin_buf_len, int refcount, struct ast_flags64 *confflags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l04688">app_meetme.c:4688</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a96a58e29e8dbf2b5bdeb775cba46556eaec7326f60e7edad15d96ff935e5616d6"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eaec7326f60e7edad15d96ff935e5616d6">OPT_ARG_ARRAY_SIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00763">app_meetme.c:763</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_adea5390496e5477192d86f340d512d04"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#adea5390496e5477192d86f340d512d04">ast_variables_destroy</a></div><div class="ttdeci">void ast_variables_destroy(struct ast_variable *var)</div><div class="ttdoc">Free variable list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01263">extconf.c:1263</a></div></div>
<div class="ttc" id="structval_html"><div class="ttname"><a href="../../d5/d85/structval.html">val</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dd1/ast__expr2_8c_source.html#l00325">ast_expr2.c:325</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a30a63a191f0d3fafcea99e759e0c46a5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a30a63a191f0d3fafcea99e759e0c46a5">rt_extend_conf</a></div><div class="ttdeci">static int rt_extend_conf(const char *confno)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02523">app_meetme.c:2523</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aab43cc97424af77028a4caa8e54d8fc8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aab43cc97424af77028a4caa8e54d8fc8">user_set_unmuted_cb</a></div><div class="ttdeci">static int user_set_unmuted_cb(void *obj, void *check_admin_arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02727">app_meetme.c:2727</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a45318e8513f0ffb15b49943c18ea0e58"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a45318e8513f0ffb15b49943c18ea0e58">sla_queue_event_nolock</a></div><div class="ttdeci">static void sla_queue_event_nolock(enum sla_event_type type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02451">app_meetme.c:2451</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a755b9d1d1758de8ecd6c1acb1369f4ba"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a755b9d1d1758de8ecd6c1acb1369f4ba">send_talking_event</a></div><div class="ttdeci">static void send_talking_event(struct ast_channel *chan, struct ast_conference *conf, struct ast_conf_user *user, int talking)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02681">app_meetme.c:2681</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76f0581b1c02bf15a8d6b8e607ef24a">CONFFLAG_RECORDCONF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00716">app_meetme.c:716</a></div></div>
<div class="ttc" id="leave_8h_html_a17d53de1e565d7ea0537d5ec21b60472"><div class="ttname"><a href="../../da/dd8/leave_8h.html#a17d53de1e565d7ea0537d5ec21b60472">leave</a></div><div class="ttdeci">static unsigned char leave[]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dd8/leave_8h_source.html#l00012">leave.h:12</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aa46b0a964293d7efe152f2cc786ed888"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aa46b0a964293d7efe152f2cc786ed888">meetme_kick_cmd</a></div><div class="ttdeci">static char * meetme_kick_cmd(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02076">app_meetme.c:2076</a></div></div>
<div class="ttc" id="structast__conference_html_a7ce731bb061f69d8257be3b984f1680f"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a7ce731bb061f69d8257be3b984f1680f">ast_conference::playlock</a></div><div class="ttdeci">ast_mutex_t playlock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00843">app_meetme.c:843</a></div></div>
<div class="ttc" id="app__meetme_8c_html_addd70c99776f00581f71a71d3c10d86f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#addd70c99776f00581f71a71d3c10d86f">AST_FRAME_BITS</a></div><div class="ttdeci">#define AST_FRAME_BITS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00664">app_meetme.c:664</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a52b639668f922212a3583f91da84e5ae"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a52b639668f922212a3583f91da84e5ae">meetme_mute_cmd</a></div><div class="ttdeci">static char * meetme_mute_cmd(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02096">app_meetme.c:2096</a></div></div>
<div class="ttc" id="structast__party__connected__line_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../dc/d9e/structast__party__connected__line.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_connected_line::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Connected party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00459">channel.h:459</a></div></div>
<div class="ttc" id="file_8h_html_afa92b0106fb7a918ea994c2867ac0a04"><div class="ttname"><a href="../../d2/d4d/file_8h.html#afa92b0106fb7a918ea994c2867ac0a04">AST_DIGIT_ANY</a></div><div class="ttdeci">#define AST_DIGIT_ANY</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/file_8h_source.html#l00048">file.h:48</a></div></div>
<div class="ttc" id="cli_8h_html_a56b6b59ee2eaa994597a5b0f4e9f9d09"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a56b6b59ee2eaa994597a5b0f4e9f9d09">ast_cli_unregister_multiple</a></div><div class="ttdeci">int ast_cli_unregister_multiple(struct ast_cli_entry *e, int len)</div><div class="ttdoc">Unregister multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00030">clicompat.c:30</a></div></div>
<div class="ttc" id="structast__conference_html_a35cc725664fd0b4f53fbbb7d0f15c038"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a35cc725664fd0b4f53fbbb7d0f15c038">ast_conference::endalert</a></div><div class="ttdeci">int endalert</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00853">app_meetme.c:853</a></div></div>
<div class="ttc" id="module_8h_html_ab35bc4efd9f79706300965c9d36a0ce5a9f8870a5687abe3d9a6b0b3fbc89a800"><div class="ttname"><a href="../../d5/d16/module_8h.html#ab35bc4efd9f79706300965c9d36a0ce5a9f8870a5687abe3d9a6b0b3fbc89a800">AST_MODULE_SUPPORT_EXTENDED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00122">module.h:122</a></div></div>
<div class="ttc" id="enter_8h_html_ada5f47456e76e78df8e950dd2b384e80"><div class="ttname"><a href="../../d0/d00/enter_8h.html#ada5f47456e76e78df8e950dd2b384e80">enter</a></div><div class="ttdeci">static unsigned char enter[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d00/enter_8h_source.html#l00012">enter.h:12</a></div></div>
<div class="ttc" id="structsla__trunk__ref_html_aa328161f4934a6c22ca967fcb5cbc1e1"><div class="ttname"><a href="../../d5/d5a/structsla__trunk__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">sla_trunk_ref::mark</a></div><div class="ttdeci">unsigned int mark</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01029">app_meetme.c:1029</a></div></div>
<div class="ttc" id="structast__conference_html_a6d1364322480c8ea03e11c3d8410f767"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a6d1364322480c8ea03e11c3d8410f767">ast_conference::dahdiconf</a></div><div class="ttdeci">int dahdiconf</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00849">app_meetme.c:849</a></div></div>
<div class="ttc" id="structsla__station_html_aa328161f4934a6c22ca967fcb5cbc1e1"><div class="ttname"><a href="../../dd/d95/structsla__station.html#aa328161f4934a6c22ca967fcb5cbc1e1">sla_station::mark</a></div><div class="ttdeci">unsigned int mark</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00963">app_meetme.c:963</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a96a58e29e8dbf2b5bdeb775cba46556eabfe6814e02021fa3fde4e9dd602d110b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eabfe6814e02021fa3fde4e9dd602d110b">OPT_ARG_WAITMARKED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00756">app_meetme.c:756</a></div></div>
<div class="ttc" id="utils_8h_html_a00d4c9254c9827d6fa44f17a326744a5"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a00d4c9254c9827d6fa44f17a326744a5">ast_test_flag</a></div><div class="ttdeci">#define ast_test_flag(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00063">utils.h:63</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847a4a8c0d54e6071d1e9a36adae685406d3"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a4a8c0d54e6071d1e9a36adae685406d3">AST_DIAL_RESULT_ANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00061">dial.h:61</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_aef636ed2f3d33f4c7a1ba67eb7c4d052"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#aef636ed2f3d33f4c7a1ba67eb7c4d052">ast_variable_browse</a></div><div class="ttdeci">struct ast_variable * ast_variable_browse(const struct ast_config *config, const char *category_name)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01216">extconf.c:1216</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aca6fbeba8b0659d90022826a4cc3e28c"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aca6fbeba8b0659d90022826a4cc3e28c">sla_ringing_station_destroy</a></div><div class="ttdeci">static void sla_ringing_station_destroy(struct sla_ringing_station *ringing_station)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05977">app_meetme.c:5977</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4ac793d6a4a78ffd301d51be06a771b70c"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac793d6a4a78ffd301d51be06a771b70c">CONFFLAG_SLA_STATION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00736">app_meetme.c:736</a></div></div>
<div class="ttc" id="structsla__event_html_a0569f66b3f952276c1a8ec5f2ffd5466"><div class="ttname"><a href="../../da/d0f/structsla__event.html#a0569f66b3f952276c1a8ec5f2ffd5466">sla_event::station</a></div><div class="ttdeci">struct sla_station * station</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01049">app_meetme.c:1049</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215ae98fbe8b2f7a1f822aaf86847d1f17d9">ALL_TRUNK_REFS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00919">app_meetme.c:919</a></div></div>
<div class="ttc" id="devicestate_8h_html"><div class="ttname"><a href="../../da/da2/devicestate_8h.html">devicestate.h</a></div><div class="ttdoc">Device state management. </div></div>
<div class="ttc" id="translate_8h_html"><div class="ttname"><a href="../../db/d39/translate_8h.html">translate.h</a></div><div class="ttdoc">Support for translation of data formats. translate.c. </div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ab451a4653176c211d131b899e1f91bde"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ab451a4653176c211d131b899e1f91bde">BEGIN_OPTIONS</a></div><div class="ttdeci">#define BEGIN_OPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01343">include/asterisk/app.h:1343</a></div></div>
<div class="ttc" id="channel_8h_html_aef2af15a597c948e97628da6c5c84f28"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aef2af15a597c948e97628da6c5c84f28">ast_indicate</a></div><div class="ttdeci">int ast_indicate(struct ast_channel *chan, int condition)</div><div class="ttdoc">Indicates condition of channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04322">channel.c:4322</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a591ca01335606883af41398d3eb8be77"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a591ca01335606883af41398d3eb8be77">meetme_set_defaults</a></div><div class="ttdeci">static void meetme_set_defaults(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05772">app_meetme.c:5772</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847a5838a3c4774e4d0e9a7d9d3724850ae6"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a5838a3c4774e4d0e9a7d9d3724850ae6">AST_DIAL_RESULT_TRYING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00057">dial.h:57</a></div></div>
<div class="ttc" id="json_8h_html_a33bcd9181e613a659eefe411ec42c87c"><div class="ttname"><a href="../../d4/d05/json_8h.html#a33bcd9181e613a659eefe411ec42c87c">ast_json_unref</a></div><div class="ttdeci">void ast_json_unref(struct ast_json *value)</div><div class="ttdoc">Decrease refcount on value. If refcount reaches zero, value is freed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00073">json.c:73</a></div></div>
<div class="ttc" id="structast__party__id_html_aab4036618469f3fa9ab26a22726ba2db"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aab4036618469f3fa9ab26a22726ba2db">ast_party_id::name</a></div><div class="ttdeci">struct ast_party_name name</div><div class="ttdoc">Subscriber name. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00341">channel.h:341</a></div></div>
<div class="ttc" id="structast__conference_html_ad77ac2c67a46ee543b07289ecf3caef7"><div class="ttname"><a href="../../d8/d44/structast__conference.html#ad77ac2c67a46ee543b07289ecf3caef7">ast_conference::origframe</a></div><div class="ttdeci">struct ast_frame * origframe</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00873">app_meetme.c:873</a></div></div>
<div class="ttc" id="structast__conference_html_aa9af2bfdaafa007e201fc6f01dfd9f68"><div class="ttname"><a href="../../d8/d44/structast__conference.html#aa9af2bfdaafa007e201fc6f01dfd9f68">ast_conference::recordthread</a></div><div class="ttdeci">pthread_t recordthread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00860">app_meetme.c:860</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a57a1e374549eb2705068688f4046db"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a57a1e374549eb2705068688f4046db">ast_dsp_free</a></div><div class="ttdeci">void ast_dsp_free(struct ast_dsp *dsp)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01770">dsp.c:1770</a></div></div>
<div class="ttc" id="structannounce__listitem_html_aae887e628e91515c97a46a3834c91069"><div class="ttname"><a href="../../dd/d4b/structannounce__listitem.html#aae887e628e91515c97a46a3834c91069">announce_listitem::confusers</a></div><div class="ttdeci">int confusers</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00836">app_meetme.c:836</a></div></div>
<div class="ttc" id="structast__frame_html_add9af9569af79ec26dd741fb226b38ba"><div class="ttname"><a href="../../d0/d99/structast__frame.html#add9af9569af79ec26dd741fb226b38ba">ast_frame::ptr</a></div><div class="ttdeci">void * ptr</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00183">include/asterisk/frame.h:183</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a3352a8a09d96d39d97562f874eda91fe"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a3352a8a09d96d39d97562f874eda91fe">recordthread</a></div><div class="ttdeci">static void * recordthread(void *args)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05681">app_meetme.c:5681</a></div></div>
<div class="ttc" id="eagi__proxy_8c_html_ac95651d79c608a3148973b5b1fc9e525"><div class="ttname"><a href="../../dd/d7c/eagi__proxy_8c.html#ac95651d79c608a3148973b5b1fc9e525">buf</a></div><div class="ttdeci">char buf[BUFSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d7c/eagi__proxy_8c_source.html#l00066">eagi_proxy.c:66</a></div></div>
<div class="ttc" id="structast__channel__blob_html_ad2b8e22df32b99651f727cd9a8dcb9f3"><div class="ttname"><a href="../../db/df0/structast__channel__blob.html#ad2b8e22df32b99651f727cd9a8dcb9f3">ast_channel_blob::blob</a></div><div class="ttdeci">struct ast_json * blob</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00188">stasis_channels.h:188</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a04a4ee089b212107b1e33943ce45fb3e"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a04a4ee089b212107b1e33943ce45fb3e">action_meetmeunmute</a></div><div class="ttdeci">static int action_meetmeunmute(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05516">app_meetme.c:5516</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca5fc59b193d86a0a8ddfe866304be829d">OBJ_NODATA</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01048">astobj2.h:1048</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5adc304e693097ec75b474e6a5309958"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5adc304e693097ec75b474e6a5309958">stasis_message_router_add</a></div><div class="ttdeci">int stasis_message_router_add(struct stasis_message_router *router, struct stasis_message_type *message_type, stasis_subscription_cb callback, void *data)</div><div class="ttdoc">Add a route to a message router. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00310">stasis_message_router.c:310</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a548baad9550302b0e5f31687cbdf04bb"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a548baad9550302b0e5f31687cbdf04bb">app4</a></div><div class="ttdeci">static const char *const app4</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00805">app_meetme.c:805</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9f2e6493ba9e4930554d54b2b690144f">MENU_DISABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02750">app_meetme.c:2750</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ad180a618fb2ca170f49e36927637775f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ad180a618fb2ca170f49e36927637775f">sla_check_station_hold_access</a></div><div class="ttdeci">static int sla_check_station_hold_access(const struct sla_trunk *trunk, const struct sla_station *station)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05880">app_meetme.c:5880</a></div></div>
<div class="ttc" id="structsla__trunk_html_a20af6c4792f461c41fa7606913493f27"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#a20af6c4792f461c41fa7606913493f27">sla_trunk::autocontext</a></div><div class="ttdeci">const ast_string_field autocontext</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00986">app_meetme.c:986</a></div></div>
<div class="ttc" id="structannounce__listitem_html_aceb8e56d241db6ae0f0229a598741dd1"><div class="ttname"><a href="../../dd/d4b/structannounce__listitem.html#aceb8e56d241db6ae0f0229a598741dd1">announce_listitem::confchan</a></div><div class="ttdeci">struct ast_channel * confchan</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00835">app_meetme.c:835</a></div></div>
<div class="ttc" id="stasis_8h_html_a70cd046d8e3fd50de5c51aecb2830d2a"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a70cd046d8e3fd50de5c51aecb2830d2a">STASIS_MESSAGE_TYPE_INIT</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_INIT(name)</div><div class="ttdoc">Boiler-plate messaging macro for initializing message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01501">stasis.h:1501</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ade602fe2feec1303e2e8f31ae77a5ee6"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ade602fe2feec1303e2e8f31ae77a5ee6">istalking</a></div><div class="ttdeci">static const char * istalking(int x)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01398">app_meetme.c:1398</a></div></div>
<div class="ttc" id="structast__channel__blob_html_a36584c0251e54a7af4892d63f7a28c77"><div class="ttname"><a href="../../db/df0/structast__channel__blob.html#a36584c0251e54a7af4892d63f7a28c77">ast_channel_blob::snapshot</a></div><div class="ttdeci">struct ast_channel_snapshot * snapshot</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00186">stasis_channels.h:186</a></div></div>
<div class="ttc" id="dsp_8h_html"><div class="ttname"><a href="../../d3/d08/dsp_8h.html">dsp.h</a></div><div class="ttdoc">Convenient Signal Processing routines. </div></div>
<div class="ttc" id="structsla__trunk__ref_html_afd7941b09a11427a48ced58c93402e35"><div class="ttname"><a href="../../d5/d5a/structsla__trunk__ref.html#afd7941b09a11427a48ced58c93402e35">sla_trunk_ref::trunk</a></div><div class="ttdeci">struct sla_trunk * trunk</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01017">app_meetme.c:1017</a></div></div>
<div class="ttc" id="bridge__basic_8c_html_a865b164f5f26f2bace1df76cf9cdf82e"><div class="ttname"><a href="../../d7/d9b/bridge__basic_8c.html#a865b164f5f26f2bace1df76cf9cdf82e">hold</a></div><div class="ttdeci">static void hold(struct ast_channel *chan)</div><div class="ttdoc">Helper method to place a channel in a bridge on hold. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d9b/bridge__basic_8c_source.html#l01772">bridge_basic.c:1772</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ac0f373e553e1d648124fd511a4fb2535"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ac0f373e553e1d648124fd511a4fb2535">CONFFLAG_INTROUSER_VMREC</a></div><div class="ttdeci">#define CONFFLAG_INTROUSER_VMREC</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00749">app_meetme.c:749</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2448088751e4d494d1981c7f4b84e8d0"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2448088751e4d494d1981c7f4b84e8d0">OBJ_POINTER</a></div><div class="ttdeci">#define OBJ_POINTER</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01154">astobj2.h:1154</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a36a45aad3f831056ed083856012785e3"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a36a45aad3f831056ed083856012785e3">MEETME_DELAYDETECTENDTALK</a></div><div class="ttdeci">#define MEETME_DELAYDETECTENDTALK</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00662">app_meetme.c:662</a></div></div>
<div class="ttc" id="app__meetme_8c_html_abdd54fb68b736c31775bab463bd0a137"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#abdd54fb68b736c31775bab463bd0a137">meetme_stasis_init</a></div><div class="ttdeci">static int meetme_stasis_init(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01157">app_meetme.c:1157</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a62fd4c125f1aadafcee981304a59261a"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261a">sla_event_type</a></div><div class="ttdeci">sla_event_type</div><div class="ttdoc">Event types that can be queued up for the SLA thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01038">app_meetme.c:1038</a></div></div>
<div class="ttc" id="app__meetme_8c_html_acf06d30da1983dcdfcd1a32ddff7b5f9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#acf06d30da1983dcdfcd1a32ddff7b5f9">conf_exec</a></div><div class="ttdeci">static int conf_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">The meetme() application. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l04837">app_meetme.c:4837</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_ac08f7eb1eb9476b30987c73e1052ada8"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#ac08f7eb1eb9476b30987c73e1052ada8">AST_STANDARD_APP_ARGS</a></div><div class="ttdeci">#define AST_STANDARD_APP_ARGS(args, parse)</div><div class="ttdoc">Performs the &amp;#39;standard&amp;#39; argument separation process for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01285">include/asterisk/app.h:1285</a></div></div>
<div class="ttc" id="json_8h_html_af7ffb5efb418e60eaa2b3d06a4c6e458"><div class="ttname"><a href="../../d4/d05/json_8h.html#af7ffb5efb418e60eaa2b3d06a4c6e458">ast_json_object_update</a></div><div class="ttdeci">int ast_json_object_update(struct ast_json *object, struct ast_json *other)</div><div class="ttdoc">Update object with all of the fields of other. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00416">json.c:416</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga58c3e3da5d31739cafaee1df6ddf9342"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga58c3e3da5d31739cafaee1df6ddf9342">astman_send_list_complete_start</a></div><div class="ttdeci">void astman_send_list_complete_start(struct mansession *s, const struct message *m, const char *event_name, int count)</div><div class="ttdoc">Start the list complete event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03237">manager.c:3237</a></div></div>
<div class="ttc" id="stasis_8h_html"><div class="ttname"><a href="../../dd/d79/stasis_8h.html">stasis.h</a></div><div class="ttdoc">Stasis Message Bus API. See Stasis Message Bus API for detailed documentation. </div></div>
<div class="ttc" id="app__meetme_8c_html_a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a7de42ff989ac21f01dc409f42c3c2530">SLA_TRUNK_STATE_ONHOLD_BYME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00928">app_meetme.c:928</a></div></div>
<div class="ttc" id="structast__cli__entry_html"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html">ast_cli_entry</a></div><div class="ttdoc">descriptor for a cli entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00171">cli.h:171</a></div></div>
<div class="ttc" id="structast__cli__args_html_a98e1d8441ca58834f11f7367be4b3345"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a98e1d8441ca58834f11f7367be4b3345">ast_cli_args::argc</a></div><div class="ttdeci">const int argc</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00160">cli.h:160</a></div></div>
<div class="ttc" id="logger_8h_html_adf4476a6a4ea6c74231c826e899d7189"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#adf4476a6a4ea6c74231c826e899d7189">LOG_WARNING</a></div><div class="ttdeci">#define LOG_WARNING</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00274">logger.h:274</a></div></div>
<div class="ttc" id="structsla__trunk_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#a84d1435c5b8d387806714ea7079304b7">sla_trunk::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00994">app_meetme.c:994</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ab48cb9e1e612dd486b747ba1c5d68d01"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ab48cb9e1e612dd486b747ba1c5d68d01">AST_LIST_UNLOCK</a></div><div class="ttdeci">#define AST_LIST_UNLOCK(head)</div><div class="ttdoc">Attempts to unlock a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00139">linkedlists.h:139</a></div></div>
<div class="ttc" id="structast__conference_html_a0fcf3d8cb0b08a4d668fd87f01bd4192"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a0fcf3d8cb0b08a4d668fd87f01bd4192">ast_conference::isdynamic</a></div><div class="ttdeci">unsigned int isdynamic</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00857">app_meetme.c:857</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a21cb19d69f13ea49c32214297cbe3c16"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a21cb19d69f13ea49c32214297cbe3c16">sla_station_mark</a></div><div class="ttdeci">static int sla_station_mark(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07776">app_meetme.c:7776</a></div></div>
<div class="ttc" id="strings_8h_html_a1ef7e2644ca7258070db316fdc0a465b"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1ef7e2644ca7258070db316fdc0a465b">ast_str_buffer</a></div><div class="ttdeci">char * ast_str_buffer(const struct ast_str *buf)</div><div class="ttdoc">Returns the string buffer within the ast_str buf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00714">strings.h:714</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ac4c8be7e6d7c484515691ba11a7bbec2"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ac4c8be7e6d7c484515691ba11a7bbec2">user_listen_volup_cb</a></div><div class="ttdeci">static int user_listen_volup_cb(void *obj, void *unused, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05175">app_meetme.c:5175</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2be5f0b8c25b67aa5ca5502d61c16b73"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2be5f0b8c25b67aa5ca5502d61c16b73">CONF_SIZE</a></div><div class="ttdeci">#define CONF_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00683">app_meetme.c:683</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18aaa7767ea9a06a32c263e477dc780baeea08ef426ebbd9daa124e73fb7b33e2">VOL_DOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00668">app_meetme.c:668</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a49e602e2f36891d7fc2344119bed7ea8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a49e602e2f36891d7fc2344119bed7ea8">sla_dial_state_callback</a></div><div class="ttdeci">static void sla_dial_state_callback(struct ast_dial *dial)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06167">app_meetme.c:6167</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a37d9a05e8d60b5d42e1494d5a246891a"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a37d9a05e8d60b5d42e1494d5a246891a">user_reset_vol_cb</a></div><div class="ttdeci">static int user_reset_vol_cb(void *obj, void *unused, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05203">app_meetme.c:5203</a></div></div>
<div class="ttc" id="astobj2_8h_html_a47857055118a703ae87ea5ebaf4842ed"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a47857055118a703ae87ea5ebaf4842ed">ao2_callback</a></div><div class="ttdeci">#define ao2_callback(c, flags, cb_fn, arg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01716">astobj2.h:1716</a></div></div>
<div class="ttc" id="structast__conference_html_a091209bdc40e09b9fb355981148455a4"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a091209bdc40e09b9fb355981148455a4">ast_conference::recordingformat</a></div><div class="ttdeci">char * recordingformat</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00864">app_meetme.c:864</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a66b6af9ceef39cb23b48501efe87219f"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a66b6af9ceef39cb23b48501efe87219f">ast_unload_realtime</a></div><div class="ttdeci">int ast_unload_realtime(const char *family)</div><div class="ttdoc">Release any resources cached for a realtime family. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03406">main/config.c:3406</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a8d1a63cdf2c7aff22a77b6e75d93b377"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a8d1a63cdf2c7aff22a77b6e75d93b377">CONFIG_STATUS_FILEINVALID</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEINVALID</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00060">include/asterisk/config.h:60</a></div></div>
<div class="ttc" id="structast__variable_html_a501b314f49b3a9ff6e7be599d94686ee"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a501b314f49b3a9ff6e7be599d94686ee">ast_variable::lineno</a></div><div class="ttdeci">int lineno</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00095">include/asterisk/config.h:95</a></div></div>
<div class="ttc" id="dsp_8h_html_a0a60e93006c8e1ca8fda922ae0e0da2c"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a0a60e93006c8e1ca8fda922ae0e0da2c">ast_dsp_new</a></div><div class="ttdeci">struct ast_dsp * ast_dsp_new(void)</div><div class="ttdoc">Allocates a new dsp, assumes 8khz for internal sample rate. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01745">dsp.c:1745</a></div></div>
<div class="ttc" id="structannounce__listitem_html_ac739ddc112a78429124efe57bd171e37"><div class="ttname"><a href="../../dd/d4b/structannounce__listitem.html#ac739ddc112a78429124efe57bd171e37">announce_listitem::entry</a></div><div class="ttdeci">struct announce_listitem::@38 entry</div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acbd1ffc2e14f1d51fffc9659b3995274">CONFFLAG_MONITOR</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00689">app_meetme.c:689</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a0f5b0308b4ac4029b0300a7a68779298"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298">recording_state</a></div><div class="ttdeci">recording_state</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00676">app_meetme.c:676</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75af3ec0c697a687913a6c051a9b4f0d0f5">SLA_TRUNK_STATE_IDLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00924">app_meetme.c:924</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a493b57f443cc38b3d3df9c1e584d9d82"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a493b57f443cc38b3d3df9c1e584d9d82">timeout</a></div><div class="ttdeci">static int timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00086">cdr_mysql.c:86</a></div></div>
<div class="ttc" id="localtime_8h_html_ae9fbda728350a9a5b9c09b29214d718e"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae9fbda728350a9a5b9c09b29214d718e">ast_localtime</a></div><div class="ttdeci">struct ast_tm * ast_localtime(const struct timeval *timep, struct ast_tm *p_tm, const char *zone)</div><div class="ttdoc">Timezone-independent version of localtime_r(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l01739">localtime.c:1739</a></div></div>
<div class="ttc" id="astobj2_8h_html_add41bd9979cb8642f81dd38aa2dfcd6d"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#add41bd9979cb8642f81dd38aa2dfcd6d">ao2_container_alloc_list</a></div><div class="ttdeci">#define ao2_container_alloc_list(ao2_options, container_options, sort_fn, cmp_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01335">astobj2.h:1335</a></div></div>
<div class="ttc" id="structast__conference_html_a2e7bbd159351d331708b134ddd105a96"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a2e7bbd159351d331708b134ddd105a96">ast_conference::announcelist</a></div><div class="ttdeci">struct ast_conference::@40 announcelist</div></div>
<div class="ttc" id="structast__variable_html"><div class="ttname"><a href="../../dd/d02/structast__variable.html">ast_variable</a></div><div class="ttdoc">Structure for variables, used for configurations and for channel variables. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00083">include/asterisk/config.h:83</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2b758e811891e08a43129dcf43c77fbd"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2b758e811891e08a43129dcf43c77fbd">CONFFLAG_DONT_DENOISE</a></div><div class="ttdeci">#define CONFFLAG_DONT_DENOISE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00753">app_meetme.c:753</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a96a58e29e8dbf2b5bdeb775cba46556eab92f4dda872862b445c7ee78b5eca872"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eab92f4dda872862b445c7ee78b5eca872">OPT_ARG_DURATION_LIMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00759">app_meetme.c:759</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5ac9bb1920b90005281bb9ae728a273954">ADMINFLAG_MUTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00653">app_meetme.c:653</a></div></div>
<div class="ttc" id="structast__conference_html_a15e719e50c64d30870f83248d614ff2a"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a15e719e50c64d30870f83248d614ff2a">ast_conference::transframe</a></div><div class="ttdeci">struct ast_frame * transframe[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00872">app_meetme.c:872</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae6b09ff4870f925ad151cac19454021f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae6b09ff4870f925ad151cac19454021f">sla_check_ringing_station</a></div><div class="ttdeci">static int sla_check_ringing_station(const struct sla_station *station)</div><div class="ttdoc">Check to see if this station is already ringing. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06317">app_meetme.c:6317</a></div></div>
<div class="ttc" id="ast__expr2f_8c_html_a1b0936415a643c88ce543099c10e0d7f"><div class="ttname"><a href="../../dc/df2/ast__expr2f_8c.html#a1b0936415a643c88ce543099c10e0d7f">var</a></div><div class="ttdeci">#define var</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df2/ast__expr2f_8c_source.html#l00614">ast_expr2f.c:614</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a575017c9b5eba1c508bb2236270b4306"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a575017c9b5eba1c508bb2236270b4306">app2</a></div><div class="ttdeci">static const char *const app2</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00803">app_meetme.c:803</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a29a5ba76eaa83896c95fd3921bfcc379"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a29a5ba76eaa83896c95fd3921bfcc379">count_exec</a></div><div class="ttdeci">static int count_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">The MeetmeCount application. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l04792">app_meetme.c:4792</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2b3b711afc65059c4b51008c9fbc7aee">AST_SOFTHANGUP_EXPLICIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01149">channel.h:1149</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847a5cc795503d8ce3f6df21f18e7d30e24e"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a5cc795503d8ce3f6df21f18e7d30e24e">AST_DIAL_RESULT_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00059">dial.h:59</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a67bec58b805ac5d933829e8a28fa89e6"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a67bec58b805ac5d933829e8a28fa89e6">CONFFLAG_DURATION_LIMIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00741">app_meetme.c:741</a></div></div>
<div class="ttc" id="structstasis__subscription_html"><div class="ttname"><a href="../../d9/de4/structstasis__subscription.html">stasis_subscription</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l00681">stasis.c:681</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ac3382bf6da54c56b37069bd76bbdf4f9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ac3382bf6da54c56b37069bd76bbdf4f9">load_module</a></div><div class="ttdeci">static int load_module(void)</div><div class="ttdoc">Load the module. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l08043">app_meetme.c:8043</a></div></div>
<div class="ttc" id="time_8h_html_a4e7b3508884147c7991a68361ac781a2"><div class="ttname"><a href="../../de/df7/time_8h.html#a4e7b3508884147c7991a68361ac781a2">ast_tvzero</a></div><div class="ttdeci">int ast_tvzero(const struct timeval t)</div><div class="ttdoc">Returns true if the argument is 0,0. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00108">time.h:108</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0aa457fe7005f11bb7b21453f9bb4caa8f">AST_FRAME_VOICE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00101">include/asterisk/frame.h:101</a></div></div>
<div class="ttc" id="structrun__station__args_html_ad60cf18fa0b7812ab65423aa79f93165"><div class="ttname"><a href="../../d8/d26/structrun__station__args.html#ad60cf18fa0b7812ab65423aa79f93165">run_station_args::cond_lock</a></div><div class="ttdeci">ast_mutex_t * cond_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06058">app_meetme.c:6058</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a63ec60efb249ffe48ae1f38956ad7b16"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a63ec60efb249ffe48ae1f38956ad7b16">sla_change_trunk_state</a></div><div class="ttdeci">static void sla_change_trunk_state(const struct sla_trunk *trunk, enum sla_trunk_state state, enum sla_which_trunk_refs inactive_only, const struct sla_trunk_ref *exclude)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06029">app_meetme.c:6029</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ae234825bcb65b88c0554b995ff1b8ba6"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ae234825bcb65b88c0554b995ff1b8ba6">AST_LIST_NEXT</a></div><div class="ttdeci">#define AST_LIST_NEXT(elm, field)</div><div class="ttdoc">Returns the next entry in the list after the given entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00438">linkedlists.h:438</a></div></div>
<div class="ttc" id="test_8h_html"><div class="ttname"><a href="../../d2/ddc/test_8h.html">test.h</a></div><div class="ttdoc">Test Framework API. </div></div>
<div class="ttc" id="channel_8h_html_a7ef6737309dc9e8b6c4a7cb4800638b1"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ef6737309dc9e8b6c4a7cb4800638b1">ast_read</a></div><div class="ttdeci">struct ast_frame * ast_read(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04302">channel.c:4302</a></div></div>
<div class="ttc" id="stasis_8h_html_a31197e193b1dfd6c122ff6d7c7f6b3fa"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a31197e193b1dfd6c122ff6d7c7f6b3fa">STASIS_MESSAGE_TYPE_CLEANUP</a></div><div class="ttdeci">#define STASIS_MESSAGE_TYPE_CLEANUP(name)</div><div class="ttdoc">Boiler-plate messaging macro for cleaning up message types. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d79/stasis_8h_source.html#l01523">stasis.h:1523</a></div></div>
<div class="ttc" id="structsla__station_html_a56990e06ce7fc176509a38f9d1258476"><div class="ttname"><a href="../../dd/d95/structsla__station.html#a56990e06ce7fc176509a38f9d1258476">sla_station::dial</a></div><div class="ttdeci">struct ast_dial * dial</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00950">app_meetme.c:950</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1df808b41e9d1fa7679196ce8293c33b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1df808b41e9d1fa7679196ce8293c33b">meetme_opts</a></div><div class="ttdeci">static const struct ast_app_option meetme_opts[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00800">app_meetme.c:800</a></div></div>
<div class="ttc" id="manager_8h_html_ab5db3cc603d7e798d61cb4cd94fbb4e2"><div class="ttname"><a href="../../db/d45/manager_8h.html#ab5db3cc603d7e798d61cb4cd94fbb4e2">EVENT_FLAG_CALL</a></div><div class="ttdeci">#define EVENT_FLAG_CALL</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00072">manager.h:72</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a71745eb63dd093f560a1add3e430d2a9">CLI_INIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00152">cli.h:152</a></div></div>
<div class="ttc" id="devicestate_8h_html_a1ab579ae15aaca64a904c3c41d8b8b01"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a1ab579ae15aaca64a904c3c41d8b8b01">ast_devstate_prov_del</a></div><div class="ttdeci">int ast_devstate_prov_del(const char *label)</div><div class="ttdoc">Remove device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00418">devicestate.c:418</a></div></div>
<div class="ttc" id="structsla__ringing__station_html"><div class="ttname"><a href="../../dc/d5b/structsla__ringing__station.html">sla_ringing_station</a></div><div class="ttdoc">A station that is ringing. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01077">app_meetme.c:1077</a></div></div>
<div class="ttc" id="stasis_8h_html_a9356e8a29344ca4eac93088198ccff89"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#a9356e8a29344ca4eac93088198ccff89">stasis_message_type</a></div><div class="ttdeci">struct stasis_message_type * stasis_message_type(const struct stasis_message *msg)</div><div class="ttdoc">Get the message type for a stasis_message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00187">stasis_message.c:187</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a211b086be7f6f888072a0d7818827f64"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a211b086be7f6f888072a0d7818827f64">sla_calc_station_delays</a></div><div class="ttdeci">static int sla_calc_station_delays(unsigned int *timeout)</div><div class="ttdoc">Calculate the ring delay for a station. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06696">app_meetme.c:6696</a></div></div>
<div class="ttc" id="structast__conference_html_af969a928c15551cd3e470013f454b8f5"><div class="ttname"><a href="../../d8/d44/structast__conference.html#af969a928c15551cd3e470013f454b8f5">ast_conference::listenlock</a></div><div class="ttdeci">ast_mutex_t listenlock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00844">app_meetme.c:844</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660">ast_channel_state</a></div><div class="ttdeci">ast_channel_state</div><div class="ttdoc">ast_channel states </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00035">channelstate.h:35</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ab8ff8cf939c68d801a540b7b6c637a66"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ab8ff8cf939c68d801a540b7b6c637a66">sla_event_destroy</a></div><div class="ttdeci">static void sla_event_destroy(struct sla_event *event)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06775">app_meetme.c:6775</a></div></div>
<div class="ttc" id="channel_8h_html_a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9e9505a91a84992d04ba4e85217fb4e4a2e185ce313026e13ed90ae3a319c9cb7">AST_SOFTHANGUP_DEV</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l01122">channel.h:1122</a></div></div>
<div class="ttc" id="structast__party__name_html_ab50d783982593ef993ea0b68f7ad8b80"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#ab50d783982593ef993ea0b68f7ad8b80">ast_party_name::str</a></div><div class="ttdeci">char * str</div><div class="ttdoc">Subscriber name (Malloced) </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00265">channel.h:265</a></div></div>
<div class="ttc" id="say_8h_html_a7cf9dcf6ae6fcedb7752d0deac683b3b"><div class="ttname"><a href="../../db/dce/say_8h.html#a7cf9dcf6ae6fcedb7752d0deac683b3b">ast_say_digits</a></div><div class="ttdeci">int ast_say_digits(struct ast_channel *chan, int num, const char *ints, const char *lang)</div><div class="ttdoc">says digits </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08349">channel.c:8349</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a111277a0849f92b793ed6aa1efe54462"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a111277a0849f92b793ed6aa1efe54462">stop</a></div><div class="ttdeci">unsigned int stop</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01096">app_meetme.c:1096</a></div></div>
<div class="ttc" id="structevent_html"><div class="ttname"><a href="../../df/d7d/structevent.html">event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d4d/astman_8c_source.html#l00222">astman.c:222</a></div></div>
<div class="ttc" id="dial_8h_html"><div class="ttname"><a href="../../df/dcf/dial_8h.html">dial.h</a></div><div class="ttdoc">Dialing API. </div></div>
<div class="ttc" id="app__meetme_8c_html_a5d3475b5094d98dbe2cde61a7cbd6e6d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a5d3475b5094d98dbe2cde61a7cbd6e6d">slastation_app</a></div><div class="ttdeci">static const char *const slastation_app</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00806">app_meetme.c:806</a></div></div>
<div class="ttc" id="lock_8h_html_a36233c5520173c095bf732a788356aee"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a36233c5520173c095bf732a788356aee">ast_cond_wait</a></div><div class="ttdeci">#define ast_cond_wait(cond, mutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00203">lock.h:203</a></div></div>
<div class="ttc" id="channel_8h_html_a940e8f4562c127096b0f4ba7d25387bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a940e8f4562c127096b0f4ba7d25387bd">ast_party_caller_free</a></div><div class="ttdeci">void ast_party_caller_free(struct ast_party_caller *doomed)</div><div class="ttdoc">Destroy the caller party contents. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02015">channel.c:2015</a></div></div>
<div class="ttc" id="structstasis__message_html"><div class="ttname"><a href="../../d7/d55/structstasis__message.html">stasis_message</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00121">stasis_message.c:121</a></div></div>
<div class="ttc" id="strings_8h_html_a1088afdd862a49b0fce34ebe02df8ca1"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a1088afdd862a49b0fce34ebe02df8ca1">ast_str_append</a></div><div class="ttdeci">int ast_str_append(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Append to a thread local dynamic string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01091">strings.h:1091</a></div></div>
<div class="ttc" id="lock_8h_html_a69e9591803d36f5683eb9b084442be9b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a69e9591803d36f5683eb9b084442be9b">ast_cond_init</a></div><div class="ttdeci">#define ast_cond_init(cond, attr)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00199">lock.h:199</a></div></div>
<div class="ttc" id="cli_8h_html_aea8910ed9e301e7f741f87942c244eac"><div class="ttname"><a href="../../dc/db0/cli_8h.html#aea8910ed9e301e7f741f87942c244eac">ast_cli_register_multiple</a></div><div class="ttdeci">#define ast_cli_register_multiple(e, len)</div><div class="ttdoc">Register multiple commands. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00265">cli.h:265</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4790f45dcc812c1b00184a2edccdddf5acd2fa7d4984319bf6a4c01527d04647f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5acd2fa7d4984319bf6a4c01527d04647f">ADMINFLAG_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00658">app_meetme.c:658</a></div></div>
<div class="ttc" id="test__config_8c_html_aecdc7cbd5dfa76493c0212caa55d706c"><div class="ttname"><a href="../../d8/d4f/test__config_8c.html#aecdc7cbd5dfa76493c0212caa55d706c">item</a></div><div class="ttdeci">static struct aco_type item</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d4f/test__config_8c_source.html#l01463">test_config.c:1463</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18fcaf009074717d1333b85e7d405403"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18fcaf009074717d1333b85e7d405403">build_conf</a></div><div class="ttdeci">static struct ast_conference * build_conf(const char *confno, const char *pin, const char *pinadmin, int make, int dynamic, int refcount, const struct ast_channel *chan, struct ast_test *test)</div><div class="ttdoc">Find or create a conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01606">app_meetme.c:1606</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad36841ab6daa3997f7ca7047ad2d033a"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad36841ab6daa3997f7ca7047ad2d033a">ao2_iterator_destroy</a></div><div class="ttdeci">void ao2_iterator_destroy(struct ao2_iterator *iter)</div><div class="ttdoc">Destroy a container iterator. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00534">astobj2_container.c:534</a></div></div>
<div class="ttc" id="devicestate_8h_html_ae832fcc32c88962e73025ffeafe2961e"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#ae832fcc32c88962e73025ffeafe2961e">ast_devstate_prov_add</a></div><div class="ttdeci">int ast_devstate_prov_add(const char *label, ast_devstate_prov_cb_type callback)</div><div class="ttdoc">Add device state provider. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00391">devicestate.c:391</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aaaea827a7f6f7ee74d3dda01ec71644e"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aaaea827a7f6f7ee74d3dda01ec71644e">earlyalert</a></div><div class="ttdeci">static int earlyalert</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00812">app_meetme.c:812</a></div></div>
<div class="ttc" id="structsla__event_html_a0c10632f8ed1ab1d182c2d1f9ae163fc"><div class="ttname"><a href="../../da/d0f/structsla__event.html#a0c10632f8ed1ab1d182c2d1f9ae163fc">sla_event::type</a></div><div class="ttdeci">enum sla_event_type type</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01048">app_meetme.c:1048</a></div></div>
<div class="ttc" id="time_8h_html_ad3899efb6f0e348556ef69f5b16aa7f7"><div class="ttname"><a href="../../de/df7/time_8h.html#ad3899efb6f0e348556ef69f5b16aa7f7">ast_tvnow</a></div><div class="ttdeci">struct timeval ast_tvnow(void)</div><div class="ttdoc">Returns current timeval. Meant to replace calls to gettimeofday(). </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00150">time.h:150</a></div></div>
<div class="ttc" id="stringfields_8h_html_a061580e89c55282a7140fa3fdfd52b6d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a061580e89c55282a7140fa3fdfd52b6d">AST_DECLARE_STRING_FIELDS</a></div><div class="ttdeci">#define AST_DECLARE_STRING_FIELDS(field_list)</div><div class="ttdoc">Declare the fields needed in a structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00337">stringfields.h:337</a></div></div>
<div class="ttc" id="utils_8h_html_ab2de736b42974f12ec7d57c41d234bf4"><div class="ttname"><a href="../../d5/d60/utils_8h.html#ab2de736b42974f12ec7d57c41d234bf4">ast_set_flag64</a></div><div class="ttdeci">#define ast_set_flag64(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00127">utils.h:127</a></div></div>
<div class="ttc" id="structast__conf__user_html_abc09654c9b36de6b0bd0bfd92d31c0c0"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#abc09654c9b36de6b0bd0bfd92d31c0c0">ast_conf_user::warning_freq</a></div><div class="ttdeci">long warning_freq</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00910">app_meetme.c:910</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a53f8684abfc755b445ce1f77aba6f2c0"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a53f8684abfc755b445ce1f77aba6f2c0">sla_stop_ringing_trunk</a></div><div class="ttdeci">static void sla_stop_ringing_trunk(struct sla_ringing_trunk *ringing_trunk)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06116">app_meetme.c:6116</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4a1884cde93e53bef32ca85c194a1d05"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4a1884cde93e53bef32ca85c194a1d05">AST_LIST_EMPTY</a></div><div class="ttdeci">#define AST_LIST_EMPTY(head)</div><div class="ttdoc">Checks whether the specified list contains any entries. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00449">linkedlists.h:449</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ac9396eafa98ce0ee732f0ea84aefaee4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ac9396eafa98ce0ee732f0ea84aefaee4">sla_show_stations</a></div><div class="ttdeci">static char * sla_show_stations(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02207">app_meetme.c:2207</a></div></div>
<div class="ttc" id="utils_8h_html_a24374da24af1931d8a7ccde5b352bb2c"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a24374da24af1931d8a7ccde5b352bb2c">ast_assert</a></div><div class="ttdeci">#define ast_assert(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00695">utils.h:695</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga77315fa8e29950f0c88120501acda0a3"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga77315fa8e29950f0c88120501acda0a3">astman_send_ack</a></div><div class="ttdeci">void astman_send_ack(struct mansession *s, const struct message *m, char *msg)</div><div class="ttdoc">Send ack in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03191">manager.c:3191</a></div></div>
<div class="ttc" id="lock_8h_html_ac5e13c7fe64d3b271a52028b0a78b92b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ac5e13c7fe64d3b271a52028b0a78b92b">ast_mutex_lock</a></div><div class="ttdeci">#define ast_mutex_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00187">lock.h:187</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a387635982df3d2edb669a1eece92c875">AST_CONTROL_BUSY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00282">include/asterisk/frame.h:282</a></div></div>
<div class="ttc" id="channelstate_8h_html_a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d"><div class="ttname"><a href="../../d9/d95/channelstate_8h.html#a03585bc87e5bbd0f4d11bc789734c660aa8ab4bcda7378ccc17c39dfd880cba3d">AST_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d95/channelstate_8h_source.html#l00042">channelstate.h:42</a></div></div>
<div class="ttc" id="translate_8h_html_ab09d3ccb95d1f828d2871530226f9456"><div class="ttname"><a href="../../db/d39/translate_8h.html#ab09d3ccb95d1f828d2871530226f9456">ast_translate</a></div><div class="ttdeci">struct ast_frame * ast_translate(struct ast_trans_pvt *tr, struct ast_frame *f, int consume)</div><div class="ttdoc">translates one or more frames Apply an input frame into the translator and receive zero or one output...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00565">translate.c:565</a></div></div>
<div class="ttc" id="structsla__station__ref_html"><div class="ttname"><a href="../../d0/db1/structsla__station__ref.html">sla_station_ref</a></div><div class="ttdoc">A reference to a station. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00974">app_meetme.c:974</a></div></div>
<div class="ttc" id="astobj2_8h_html_a9998bd156b936636a8780385e9a910b2"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a9998bd156b936636a8780385e9a910b2">ao2_unlock</a></div><div class="ttdeci">#define ao2_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00730">astobj2.h:730</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_acd9db00336027462cfb25b97b5356883"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#acd9db00336027462cfb25b97b5356883">c</a></div><div class="ttdeci">static struct test_val c</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00048">test_linkedlists.c:48</a></div></div>
<div class="ttc" id="structchannel_html"><div class="ttname"><a href="../../d4/d84/structchannel.html">channel</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d8a/muted_8c_source.html#l00095">muted.c:95</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a0f5b0308b4ac4029b0300a7a68779298aed2f74b0993cd2122169387b4ff74113"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298aed2f74b0993cd2122169387b4ff74113">MEETME_RECORD_ACTIVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00679">app_meetme.c:679</a></div></div>
<div class="ttc" id="time_8h_html_aca4ecdab7d8d3519062aad9a90fcb29d"><div class="ttname"><a href="../../de/df7/time_8h.html#aca4ecdab7d8d3519062aad9a90fcb29d">ast_tvdiff_ms</a></div><div class="ttdeci">int64_t ast_tvdiff_ms(struct timeval end, struct timeval start)</div><div class="ttdoc">Computes the difference (in milliseconds) between two struct timeval instances. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00098">time.h:98</a></div></div>
<div class="ttc" id="extconf_8c_html_a81d26348827b996085d4cb6be3e2c348"><div class="ttname"><a href="../../d4/dc5/extconf_8c.html#a81d26348827b996085d4cb6be3e2c348">ast_verbose</a></div><div class="ttdeci">void ast_verbose(const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02207">extconf.c:2207</a></div></div>
<div class="ttc" id="astmm_8h_html_ab263849d03fb892847be4986db759737"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab263849d03fb892847be4986db759737">ast_strdup</a></div><div class="ttdeci">#define ast_strdup(str)</div><div class="ttdoc">A wrapper for strdup() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00243">astmm.h:243</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a75382dc9117cc118719edf6c3d2b71df">CMP_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01032">astobj2.h:1032</a></div></div>
<div class="ttc" id="structast__conference_html_a925d07390890a216d14e47a42b59eb05"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a925d07390890a216d14e47a42b59eb05">ast_conference::useropts</a></div><div class="ttdeci">const char * useropts</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00869">app_meetme.c:869</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a7392cc7f56677c79368716971d1ec023"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a7392cc7f56677c79368716971d1ec023">answer_trunk_chan</a></div><div class="ttdeci">static void answer_trunk_chan(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06062">app_meetme.c:6062</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4ac76bd08a36963707fcb29643b2d3bb49"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac76bd08a36963707fcb29643b2d3bb49">CONFFLAG_AGI</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00702">app_meetme.c:702</a></div></div>
<div class="ttc" id="chan__pjsip_8c_html_aae28b3b590d6f2c84e472625c81ae2bb"><div class="ttname"><a href="../../d0/d29/chan__pjsip_8c.html#aae28b3b590d6f2c84e472625c81ae2bb">hangup</a></div><div class="ttdeci">static int hangup(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/chan__pjsip_8c_source.html#l02483">chan_pjsip.c:2483</a></div></div>
<div class="ttc" id="file_8h_html"><div class="ttname"><a href="../../d2/d4d/file_8h.html">file.h</a></div><div class="ttdoc">Generic File Format Support. Should be included by clients of the file handling routines. File service providers should instead include mod_format.h. </div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ae8c94d6fa08e17f6f86792727b201bf9">RQ_UINTEGER1</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00067">include/asterisk/config.h:67</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a94e294b5969cdd4c4fb0802b9e6728a4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a94e294b5969cdd4c4fb0802b9e6728a4">action_meetmelist</a></div><div class="ttdeci">static int action_meetmelist(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05521">app_meetme.c:5521</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a1e5e3d08eff5e2357e75c01e127e7922"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a1e5e3d08eff5e2357e75c01e127e7922">ast_category_browse</a></div><div class="ttdeci">char * ast_category_browse(struct ast_config *config, const char *prev_name)</div><div class="ttdoc">Browse categories. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l03328">extconf.c:3328</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847a23fe48f529c8d06fa7dffc976a871a16"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a23fe48f529c8d06fa7dffc976a871a16">AST_DIAL_RESULT_HANGUP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00063">dial.h:63</a></div></div>
<div class="ttc" id="test__func__file_8c_html_a7df83d295429a2562396f1ec127a46c0"><div class="ttname"><a href="../../d5/dde/test__func__file_8c.html#a7df83d295429a2562396f1ec127a46c0">args</a></div><div class="ttdeci">const char * args</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dde/test__func__file_8c_source.html#l00046">test_func_file.c:46</a></div></div>
<div class="ttc" id="structsla__trunk_html_acb640ba9134c6732a6e7dfea154ddd3e"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#acb640ba9134c6732a6e7dfea154ddd3e">sla_trunk::device</a></div><div class="ttdeci">const ast_string_field device</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00986">app_meetme.c:986</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aae8cf07838e581c99be118f2bce03958"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aae8cf07838e581c99be118f2bce03958">meetme_event_message_router</a></div><div class="ttdeci">static struct stasis_message_router * meetme_event_message_router</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01130">app_meetme.c:1130</a></div></div>
<div class="ttc" id="structdial__trunk__args_html_a45860a157e8d238e312118ddd5771454"><div class="ttname"><a href="../../d3/db7/structdial__trunk__args.html#a45860a157e8d238e312118ddd5771454">dial_trunk_args::cond</a></div><div class="ttdeci">ast_cond_t * cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06849">app_meetme.c:6849</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a78d4dd89cf67254395c36b435c7180c6">CONFFLAG_PASS_DTMF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00735">app_meetme.c:735</a></div></div>
<div class="ttc" id="app__meetme_8c_html_abd5465a13e11fe1c52a5a0f7b0b0812e"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#abd5465a13e11fe1c52a5a0f7b0b0812e">S</a></div><div class="ttdeci">#define S(e)</div></div>
<div class="ttc" id="resample_8c_html_a070d2ce7b6bb7e5c05602aa8c308d0c4"><div class="ttname"><a href="../../dc/d7f/resample_8c.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a></div><div class="ttdeci">#define NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d7f/resample_8c_source.html#l00096">resample.c:96</a></div></div>
<div class="ttc" id="structsla__station_html_a8b9f36f9500c33f5968999247558066e"><div class="ttname"><a href="../../dd/d95/structsla__station.html#a8b9f36f9500c33f5968999247558066e">sla_station::ring_delay</a></div><div class="ttdeci">unsigned int ring_delay</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00958">app_meetme.c:958</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4e56f1037f61fa109b10096e3dd11176"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4e56f1037f61fa109b10096e3dd11176">sla_thread</a></div><div class="ttdeci">static void * sla_thread(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06790">app_meetme.c:6790</a></div></div>
<div class="ttc" id="file_8h_html_adb15d6efecc1a13b8835bee6d3562ddb"><div class="ttname"><a href="../../d2/d4d/file_8h.html#adb15d6efecc1a13b8835bee6d3562ddb">ast_filedelete</a></div><div class="ttdeci">int ast_filedelete(const char *filename, const char *fmt)</div><div class="ttdoc">Deletes a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01098">file.c:1098</a></div></div>
<div class="ttc" id="syslog_8c_html_ac4f474c82e82cbb89ca7c36dd52be0ed"><div class="ttname"><a href="../../d4/d2f/syslog_8c.html#ac4f474c82e82cbb89ca7c36dd52be0ed">value</a></div><div class="ttdeci">int value</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d2f/syslog_8c_source.html#l00037">syslog.c:37</a></div></div>
<div class="ttc" id="structsla__event_html_afa55138e79daa65d864f3524cf4843bf"><div class="ttname"><a href="../../da/d0f/structsla__event.html#afa55138e79daa65d864f3524cf4843bf">sla_event::trunk_ref</a></div><div class="ttdeci">struct sla_trunk_ref * trunk_ref</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01050">app_meetme.c:1050</a></div></div>
<div class="ttc" id="cli_8h_html_a791bf9f5637185bee5e8f0907c762130"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a791bf9f5637185bee5e8f0907c762130">ast_cli</a></div><div class="ttdeci">void ast_cli(int fd, const char *fmt,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d4d/clicompat_8c_source.html#l00006">clicompat.c:6</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa36e72b77f1b80881cd0a9fcca66ce19"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa36e72b77f1b80881cd0a9fcca66ce19">AST_LIST_REMOVE</a></div><div class="ttdeci">#define AST_LIST_REMOVE(head, elm, field)</div><div class="ttdoc">Removes a specific entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00855">linkedlists.h:855</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a248afd6c02044259a386f6b7aee922a2"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a248afd6c02044259a386f6b7aee922a2">AST_FRAME_DTMF</a></div><div class="ttdeci">#define AST_FRAME_DTMF</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00139">include/asterisk/frame.h:139</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af1c1448ffe2b0e610323ea6725f412c0aac519ad8347eceb83b914cae3bdc8018"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0aac519ad8347eceb83b914cae3bdc8018">SLA_STATION_HANGUP_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01073">app_meetme.c:1073</a></div></div>
<div class="ttc" id="channel_8h_html_adcfd8d241b6de48068ead143ac29978d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adcfd8d241b6de48068ead143ac29978d">ast_channel_setoption</a></div><div class="ttdeci">int ast_channel_setoption(struct ast_channel *channel, int option, void *data, int datalen, int block)</div><div class="ttdoc">Sets an option on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07522">channel.c:7522</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ab1d7e7f7fa838035c8235e0a6d4de745"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ab1d7e7f7fa838035c8235e0a6d4de745">sla_queue_event</a></div><div class="ttdeci">static void sla_queue_event(enum sla_event_type type)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02456">app_meetme.c:2456</a></div></div>
<div class="ttc" id="structdial__trunk__args_html_ad60cf18fa0b7812ab65423aa79f93165"><div class="ttname"><a href="../../d3/db7/structdial__trunk__args.html#ad60cf18fa0b7812ab65423aa79f93165">dial_trunk_args::cond_lock</a></div><div class="ttdeci">ast_mutex_t * cond_lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06848">app_meetme.c:6848</a></div></div>
<div class="ttc" id="structast__flags64_html"><div class="ttname"><a href="../../d5/d10/structast__flags64.html">ast_flags64</a></div><div class="ttdoc">Structure used to handle a large number of boolean flags == used only in app_dial? </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00204">utils.h:204</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac850e96be05d72dedc69db8e9b1ee59f">CONFFLAG_MONITORTALKER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00718">app_meetme.c:718</a></div></div>
<div class="ttc" id="module_8h_html_ad2ca15621101154f29748cf1dac3c3cf"><div class="ttname"><a href="../../d5/d16/module_8h.html#ad2ca15621101154f29748cf1dac3c3cf">ast_unregister_application</a></div><div class="ttdeci">int ast_unregister_application(const char *app)</div><div class="ttdoc">Unregister an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00392">pbx_app.c:392</a></div></div>
<div class="ttc" id="structast__conf__user_html_aef5f3bbe582d34ef6ec2b35f3dabef0b"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#aef5f3bbe582d34ef6ec2b35f3dabef0b">ast_conf_user::list</a></div><div class="ttdeci">struct ast_conf_user::@41 list</div></div>
<div class="ttc" id="asterisk_8h_html_aa6293b2dae52a2b470494df672a26c42"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#aa6293b2dae52a2b470494df672a26c42">AST_FILE_MODE</a></div><div class="ttdeci">#define AST_FILE_MODE</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00032">asterisk.h:32</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a79498a73deb647def1fc19bf0bc4e42d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a79498a73deb647def1fc19bf0bc4e42d">meetme_menu</a></div><div class="ttdeci">static void meetme_menu(enum menu_modes *menu_mode, int *dtmf, struct ast_conference *conf, struct ast_flags64 *confflags, struct ast_channel *chan, struct ast_conf_user *user, char *recordingtmp, int recordingtmp_size, struct ast_format_cap *cap_slin)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l03153">app_meetme.c:3153</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a91e9b88449fec740c2ef9274f482b60e"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a91e9b88449fec740c2ef9274f482b60e">complete_meetmecmd_mute_kick</a></div><div class="ttdeci">static char * complete_meetmecmd_mute_kick(const char *line, const char *word, int pos, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01766">app_meetme.c:1766</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a712c04b4493919a7052399cd30ee8fb9"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a712c04b4493919a7052399cd30ee8fb9">AST_LIST_TRAVERSE_SAFE_END</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_END</div><div class="ttdoc">Closes a safe loop traversal block. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00614">linkedlists.h:614</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a52fead32f69533450f3c05b2e6960149"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a52fead32f69533450f3c05b2e6960149">ast_moh_stop</a></div><div class="ttdeci">void ast_moh_stop(struct ast_channel *chan)</div><div class="ttdoc">Turn off music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07876">channel.c:7876</a></div></div>
<div class="ttc" id="astmm_8h_html_ad42ab843b767e8b57162c10a158b75c3"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ad42ab843b767e8b57162c10a158b75c3">ast_free_ptr</a></div><div class="ttdeci">void ast_free_ptr(void *ptr)</div><div class="ttdoc">free() wrapper </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/db0/astmm_8c_source.html#l01771">astmm.c:1771</a></div></div>
<div class="ttc" id="lock_8h_html_ae2cdf274a5da241c3ad7324d82bf6af0"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ae2cdf274a5da241c3ad7324d82bf6af0">ast_cond_signal</a></div><div class="ttdeci">#define ast_cond_signal(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00201">lock.h:201</a></div></div>
<div class="ttc" id="channel_8h_html_a5e62602ca9e229304f60ab5c2b32e13b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a5e62602ca9e229304f60ab5c2b32e13b">ast_waitfor_nandfds</a></div><div class="ttdeci">struct ast_channel * ast_waitfor_nandfds(struct ast_channel **chan, int n, int *fds, int nfds, int *exception, int *outfd, int *ms)</div><div class="ttdoc">Waits for activity on a group of channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02997">channel.c:2997</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2b054c0a7413800ad257ab0f85a82d29"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2b054c0a7413800ad257ab0f85a82d29">sla_ring_station</a></div><div class="ttdeci">static int sla_ring_station(struct sla_ringing_trunk *ringing_trunk, struct sla_station *station)</div><div class="ttdoc">Ring a station. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06355">app_meetme.c:6355</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a645090dd89fa3f8aaff60ea7eb38be18"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a645090dd89fa3f8aaff60ea7eb38be18">conf_play</a></div><div class="ttdeci">static void conf_play(struct ast_channel *chan, struct ast_conference *conf, enum entrance_sound sound)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01526">app_meetme.c:1526</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca71f42ec6460e60eb6e10956c53329e45">OBJ_UNLINK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01043">astobj2.h:1043</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ab1783b8f12d2bcca727e0f1bd6f9a49bae09e07839103de682cb13fa773793fc0"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49bae09e07839103de682cb13fa773793fc0">LEAVE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00673">app_meetme.c:673</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a0f5b0308b4ac4029b0300a7a68779298a79313598c5f4a645e3b006f59572a75d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a79313598c5f4a645e3b006f59572a75d">MEETME_RECORD_TERMINATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00680">app_meetme.c:680</a></div></div>
<div class="ttc" id="utils_8h_html_aa73be876e3a4024b91ce2e09d8b945d1"><div class="ttname"><a href="../../d5/d60/utils_8h.html#aa73be876e3a4024b91ce2e09d8b945d1">ast_pthread_create_detached_background</a></div><div class="ttdeci">#define ast_pthread_create_detached_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00572">utils.h:572</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_ab845019b2f1bb324ff57e14192d62c39"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#ab845019b2f1bb324ff57e14192d62c39">ast_update_realtime</a></div><div class="ttdeci">int ast_update_realtime(const char *family, const char *keyfield, const char *lookup,...) attribute_sentinel</div><div class="ttdoc">Update realtime configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03489">main/config.c:3489</a></div></div>
<div class="ttc" id="logger_8h_html_ad770f83c71e237e1f64163358ce4e13d"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad770f83c71e237e1f64163358ce4e13d">ast_verb</a></div><div class="ttdeci">#define ast_verb(level,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00463">logger.h:463</a></div></div>
<div class="ttc" id="structannounce__listitem_html_a185c325c6063263f7b3119f4045c22e0"><div class="ttname"><a href="../../dd/d4b/structannounce__listitem.html#a185c325c6063263f7b3119f4045c22e0">announce_listitem::vmrec</a></div><div class="ttdeci">int vmrec</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00837">app_meetme.c:837</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4ae572ce074f616f8c0d48ce7a7b4d7546"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae572ce074f616f8c0d48ce7a7b4d7546">CONFFLAG_EMPTYNOPIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00722">app_meetme.c:722</a></div></div>
<div class="ttc" id="lock_8h_html_a8a3bd496edfec04a95683ace66676200"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a8a3bd496edfec04a95683ace66676200">ast_atomic_fetchadd_int</a></div><div class="ttdeci">int ast_atomic_fetchadd_int(volatile int *p, int v)</div><div class="ttdoc">Atomically add v to *p and return the previous value of *p. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00755">lock.h:755</a></div></div>
<div class="ttc" id="structast__conference_html_afa330a895fe8ef506be047091f21d940"><div class="ttname"><a href="../../d8/d44/structast__conference.html#afa330a895fe8ef506be047091f21d940">ast_conference::locked</a></div><div class="ttdeci">unsigned int locked</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00858">app_meetme.c:858</a></div></div>
<div class="ttc" id="structast__cli__args_html_a2a7a1aa13a4f14075411123a4495593c"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a2a7a1aa13a4f14075411123a4495593c">ast_cli_args::line</a></div><div class="ttdeci">const char * line</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00162">cli.h:162</a></div></div>
<div class="ttc" id="structast__conference_html_a6f8059414f0228f0256115e024eeed4b"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a6f8059414f0228f0256115e024eeed4b">ast_conference::fd</a></div><div class="ttdeci">int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00848">app_meetme.c:848</a></div></div>
<div class="ttc" id="structsla__station_html_a9f0acfbb10f035a4ad88dc2c8ad41030"><div class="ttname"><a href="../../dd/d95/structsla__station.html#a9f0acfbb10f035a4ad88dc2c8ad41030">sla_station::hold_access</a></div><div class="ttdeci">unsigned int hold_access</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00961">app_meetme.c:961</a></div></div>
<div class="ttc" id="pbx_8h_html_a965977ea9a3144bc203e0ce7a64680a1"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a965977ea9a3144bc203e0ce7a64680a1">ast_custom_function_unregister</a></div><div class="ttdeci">int ast_custom_function_unregister(struct ast_custom_function *acf)</div><div class="ttdoc">Unregister a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00273">pbx_functions.c:273</a></div></div>
<div class="ttc" id="app__meetme_8c_html_abe13fe32f5a19def3086a620f4e05cf9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#abe13fe32f5a19def3086a620f4e05cf9">sla_check_station_delay</a></div><div class="ttdeci">static int sla_check_station_delay(struct sla_station *station, struct sla_ringing_trunk *ringing_trunk)</div><div class="ttdoc">Calculate the ring delay for a given ringing trunk on a station. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06447">app_meetme.c:6447</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ac049ae187b952bcf9518074287abf84c"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ac049ae187b952bcf9518074287abf84c">sla_create_failed_station</a></div><div class="ttdeci">static struct sla_failed_station * sla_create_failed_station(struct sla_station *station)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05987">app_meetme.c:5987</a></div></div>
<div class="ttc" id="pbx_8h_html_a98c5425b90ec7c5e136a40f529170b1b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a98c5425b90ec7c5e136a40f529170b1b">pbx_builtin_getvar_helper</a></div><div class="ttdeci">const char * pbx_builtin_getvar_helper(struct ast_channel *chan, const char *name)</div><div class="ttdoc">Return a pointer to the value of the corresponding channel variable. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01000">pbx_variables.c:1000</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a289c5ffee97869ba1b70fd91278f2957"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a289c5ffee97869ba1b70fd91278f2957">user_max_cmp</a></div><div class="ttdeci">static int user_max_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01579">app_meetme.c:1579</a></div></div>
<div class="ttc" id="structast__frame_html_a27237c48fdcd22556401f20c693811db"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a27237c48fdcd22556401f20c693811db">ast_frame::subclass</a></div><div class="ttdeci">struct ast_frame_subclass subclass</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00169">include/asterisk/frame.h:169</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ab69997f20dabd9a6a6f42f00dd2290f4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ab69997f20dabd9a6a6f42f00dd2290f4">sla_state_to_devstate</a></div><div class="ttdeci">static enum ast_device_state sla_state_to_devstate(enum sla_trunk_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06012">app_meetme.c:6012</a></div></div>
<div class="ttc" id="channel_8h_html_a9238c3318ae8d3bea2cbbe1d1e459eb7"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9238c3318ae8d3bea2cbbe1d1e459eb7">MAX_LANGUAGE</a></div><div class="ttdeci">#define MAX_LANGUAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00173">channel.h:173</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_a29128ae5c15a12dea5fe4f263ba6cec1"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#a29128ae5c15a12dea5fe4f263ba6cec1">mute</a></div><div class="ttdeci">static int mute</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00144">chan_alsa.c:144</a></div></div>
<div class="ttc" id="pbx_8h_html_a721c6ba091102f155a586e09b2a526bf"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a721c6ba091102f155a586e09b2a526bf">ast_context_remove_extension</a></div><div class="ttdeci">int ast_context_remove_extension(const char *context, const char *extension, int priority, const char *registrar)</div><div class="ttdoc">Simply remove extension from context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04952">pbx.c:4952</a></div></div>
<div class="ttc" id="json_8h_html_abc8b563c172cfaffa2b555195990f729"><div class="ttname"><a href="../../d4/d05/json_8h.html#abc8b563c172cfaffa2b555195990f729">ast_json_object_set</a></div><div class="ttdeci">int ast_json_object_set(struct ast_json *object, const char *key, struct ast_json *value)</div><div class="ttdoc">Set a field in a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00404">json.c:404</a></div></div>
<div class="ttc" id="utils_8h_html"><div class="ttname"><a href="../../d5/d60/utils_8h.html">utils.h</a></div><div class="ttdoc">Utility functions. </div></div>
<div class="ttc" id="structast__channel__blob_html"><div class="ttname"><a href="../../db/df0/structast__channel__blob.html">ast_channel_blob</a></div><div class="ttdoc">Blob of data associated with a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4a/stasis__channels_8h_source.html#l00184">stasis_channels.h:184</a></div></div>
<div class="ttc" id="structast__conference_html_a0775e550a18cb0caa88650d9f8369ce1"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a0775e550a18cb0caa88650d9f8369ce1">ast_conference::gmuted</a></div><div class="ttdeci">unsigned int gmuted</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00859">app_meetme.c:859</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1f74b6bae5e30f6a05295e3196986a44"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1f74b6bae5e30f6a05295e3196986a44">status_to_json</a></div><div class="ttdeci">static struct ast_json * status_to_json(int on)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01324">app_meetme.c:1324</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gac6a9f3498f9afffecfd78c485af41556"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gac6a9f3498f9afffecfd78c485af41556">astman_get_header</a></div><div class="ttdeci">const char * astman_get_header(const struct message *m, char *var)</div><div class="ttdoc">Get header from mananger transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l02820">manager.c:2820</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a53f72efb8505b337ae85a05c01b409cf"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a53f72efb8505b337ae85a05c01b409cf">sla_trunk_opts</a></div><div class="ttdeci">static const struct ast_app_option sla_trunk_opts[128]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07226">app_meetme.c:7226</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aca38113ae6bc93688baec212aaa33377"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aca38113ae6bc93688baec212aaa33377">CONFFLAG_INTROMSG</a></div><div class="ttdeci">#define CONFFLAG_INTROMSG</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00748">app_meetme.c:748</a></div></div>
<div class="ttc" id="structast__conf__user_html_a3cf43577b7bd7604d6b44cb165542d39"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a3cf43577b7bd7604d6b44cb165542d39">ast_conf_user::user_no</a></div><div class="ttdeci">int user_no</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00897">app_meetme.c:897</a></div></div>
<div class="ttc" id="lock_8h_html_ab134d98cdfe7de0f7a72b377c0765dc7"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab134d98cdfe7de0f7a72b377c0765dc7">ast_cond_t</a></div><div class="ttdeci">pthread_cond_t ast_cond_t</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00176">lock.h:176</a></div></div>
<div class="ttc" id="strings_8h_html_a372554b7a2d69a8bd3adac5157672036"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a372554b7a2d69a8bd3adac5157672036">ast_strlen_zero</a></div><div class="ttdeci">#define ast_strlen_zero(foo)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00052">strings.h:52</a></div></div>
<div class="ttc" id="structsla__trunk__ref_html_a6239298cfc4ea9b7ca9b032786f51aa3"><div class="ttname"><a href="../../d5/d5a/structsla__trunk__ref.html#a6239298cfc4ea9b7ca9b032786f51aa3">sla_trunk_ref::state</a></div><div class="ttdeci">enum sla_trunk_state state</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01018">app_meetme.c:1018</a></div></div>
<div class="ttc" id="channel_8h_html_a39fc055500e09810d0afd0bff87407c5"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a39fc055500e09810d0afd0bff87407c5">ast_request</a></div><div class="ttdeci">struct ast_channel * ast_request(const char *type, struct ast_format_cap *request_cap, const struct ast_assigned_ids *assignedids, const struct ast_channel *requestor, const char *addr, int *cause)</div><div class="ttdoc">Requests a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l06444">channel.c:6444</a></div></div>
<div class="ttc" id="structconf_html"><div class="ttname"><a href="../../d6/de8/structconf.html">conf</a></div><div class="ttdoc">All configuration options for statsd client. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d0c/res__statsd_8c_source.html#l00095">res_statsd.c:95</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae30bfc0de78dd15d5e61f3359a795ebb"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae30bfc0de78dd15d5e61f3359a795ebb">rt_schedule</a></div><div class="ttdeci">static int rt_schedule</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00810">app_meetme.c:810</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae4e2c320637aac27773615d8f073152a"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae4e2c320637aac27773615d8f073152a">user_listen_voldown_cb</a></div><div class="ttdeci">static int user_listen_voldown_cb(void *obj, void *unused, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05182">app_meetme.c:5182</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a88b6ee77eea0c8a6cc0a315e1c1fc815"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a88b6ee77eea0c8a6cc0a315e1c1fc815">ast_record_review</a></div><div class="ttdeci">int ast_record_review(struct ast_channel *chan, const char *playfile, const char *recordfile, int maxtime, const char *fmt, int *duration, const char *path)</div><div class="ttdoc">Allow to record message and have a review option. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02489">main/app.c:2489</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a51f79b66d19b413bc6974c3d8513995c"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a51f79b66d19b413bc6974c3d8513995c">meetme_stasis_generate_msg</a></div><div class="ttdeci">static void meetme_stasis_generate_msg(struct ast_conference *meetme_conference, struct ast_channel *chan, struct ast_conf_user *user, struct stasis_message_type *message_type, struct ast_json *extras)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01343">app_meetme.c:1343</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a520a3c6b7d57903d9a616051da1a019d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a520a3c6b7d57903d9a616051da1a019d">AST_APP_OPTIONS</a></div><div class="ttdeci">#define AST_APP_OPTIONS(holder, options...)</div><div class="ttdoc">Declares an array of options for an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01393">include/asterisk/app.h:1393</a></div></div>
<div class="ttc" id="utils_8h_html_a595e2f8aa398f4bd21e381c3211235fe"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a595e2f8aa398f4bd21e381c3211235fe">ast_pthread_create_background</a></div><div class="ttdeci">#define ast_pthread_create_background(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00567">utils.h:567</a></div></div>
<div class="ttc" id="test__amihooks_8c_html_a5992b274cfdcacdbc1fa8347fd01ebde"><div class="ttname"><a href="../../dc/dbf/test__amihooks_8c.html#a5992b274cfdcacdbc1fa8347fd01ebde">done</a></div><div class="ttdeci">int done</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dbf/test__amihooks_8c_source.html#l00048">test_amihooks.c:48</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a03d6f53f0d136a93c89b9d848ca0ed0e"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a03d6f53f0d136a93c89b9d848ca0ed0e">sla_load_config</a></div><div class="ttdeci">static int sla_load_config(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07855">app_meetme.c:7855</a></div></div>
<div class="ttc" id="dsp_8h_html_a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a11a8ce2b7eba2230cab37aad708d9abfa40278495f8621707b864e57e1110d20f">THRESHOLD_SILENCE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d08/dsp_8h_source.html#l00073">dsp.h:73</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a18611e5423481fce6079cfdc9be23859"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a18611e5423481fce6079cfdc9be23859">user_set_kickme_cb</a></div><div class="ttdeci">static int user_set_kickme_cb(void *obj, void *check_admin_arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02716">app_meetme.c:2716</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a9fc9420ac235de446f7a35a766a7bd4b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a9fc9420ac235de446f7a35a766a7bd4b">CONFFLAG_MOH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00704">app_meetme.c:704</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a9970b644e96d7aa6caad2001d38eb741"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a9970b644e96d7aa6caad2001d38eb741">conf_run</a></div><div class="ttdeci">static int conf_run(struct ast_channel *chan, struct ast_conference *conf, struct ast_flags64 *confflags, char *optargs[])</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l03177">app_meetme.c:3177</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a0f5b0308b4ac4029b0300a7a68779298a0ba2326d29dd47c10f7eb501b58bfb45"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a0ba2326d29dd47c10f7eb501b58bfb45">MEETME_RECORD_STARTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00678">app_meetme.c:678</a></div></div>
<div class="ttc" id="strings_8h_html_aa3341f35cedca29e60bb7f3927204283"><div class="ttname"><a href="../../d6/d90/strings_8h.html#aa3341f35cedca29e60bb7f3927204283">ast_str_set</a></div><div class="ttdeci">int ast_str_set(struct ast_str **buf, ssize_t max_len, const char *fmt,...)</div><div class="ttdoc">Set a dynamic string using variable arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l01065">strings.h:1065</a></div></div>
<div class="ttc" id="structast__conf__user_html_ab88b1e2ff0d0fed0616512352e723162"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#ab88b1e2ff0d0fed0616512352e723162">ast_conf_user::timelimit</a></div><div class="ttdeci">long timelimit</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00908">app_meetme.c:908</a></div></div>
<div class="ttc" id="structast__party__caller_html_a8791d240f8a9c2dc271a1c8542cfe8cc"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html#a8791d240f8a9c2dc271a1c8542cfe8cc">ast_party_caller::id</a></div><div class="ttdeci">struct ast_party_id id</div><div class="ttdoc">Caller party ID. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00421">channel.h:421</a></div></div>
<div class="ttc" id="dial_8h_html_a2674932599e61fe027364a09f6d68c4e"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2674932599e61fe027364a09f6d68c4e">ast_dial_set_state_callback</a></div><div class="ttdeci">void ast_dial_set_state_callback(struct ast_dial *dial, ast_dial_state_callback callback)</div><div class="ttdoc">Set a callback for state changes. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01293">dial.c:1293</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a3b7f07302bc7a2fc4184e561679749bf"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bf">announcetypes</a></div><div class="ttdeci">announcetypes</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00826">app_meetme.c:826</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a27acda71d87003db19a6e0b4193a32be">RQ_UINTEGER4</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00073">include/asterisk/config.h:73</a></div></div>
<div class="ttc" id="structast__conference_html_a296e7410cb3a0e6d09c2e602d783bf15"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a296e7410cb3a0e6d09c2e602d783bf15">ast_conference::markedusers</a></div><div class="ttdeci">int markedusers</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00851">app_meetme.c:851</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html">config.h</a></div><div class="ttdoc">Configuration File Parser. </div></div>
<div class="ttc" id="structrun__station__args_html"><div class="ttname"><a href="../../d8/d26/structrun__station__args.html">run_station_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06055">app_meetme.c:6055</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aa202f4f3c667a3af94a9ab09766c2586"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aa202f4f3c667a3af94a9ab09766c2586">CONFFLAG_KILL_LAST_MAN_STANDING</a></div><div class="ttdeci">#define CONFFLAG_KILL_LAST_MAN_STANDING</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00751">app_meetme.c:751</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a6b49cafa2a3d359a2e865992f551874a"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a6b49cafa2a3d359a2e865992f551874a">mailbox</a></div><div class="ttdeci">static char mailbox[AST_MAX_MAILBOX_UNIQUEID]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l00204">chan_mgcp.c:204</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ab1783b8f12d2bcca727e0f1bd6f9a49ba951ab68bb8f7daafb78951107080904e"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49ba951ab68bb8f7daafb78951107080904e">ENTER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00672">app_meetme.c:672</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a0b233f4688b41699c862089f1fc5e613"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a0b233f4688b41699c862089f1fc5e613">user_no_cmp</a></div><div class="ttdeci">static int user_no_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01567">app_meetme.c:1567</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a403c4698d20d41dffb30064fdd738c09"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a403c4698d20d41dffb30064fdd738c09">CONFFLAG_ALWAYSPROMPT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00723">app_meetme.c:723</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_ga34a3ac59fb8d0c49cbc2cb9b87261d31"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#ga34a3ac59fb8d0c49cbc2cb9b87261d31">ast_channel_topic_all</a></div><div class="ttdeci">struct stasis_topic * ast_channel_topic_all(void)</div><div class="ttdoc">A topic which publishes the events for all channels. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00128">stasis_channels.c:128</a></div></div>
<div class="ttc" id="app__voicemail_8c_html_ae6cb2a817afda0bf313344240f1eacda"><div class="ttname"><a href="../../dc/df4/app__voicemail_8c.html#ae6cb2a817afda0bf313344240f1eacda">exitcontext</a></div><div class="ttdeci">static char exitcontext[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/df4/app__voicemail_8c_source.html#l01011">app_voicemail.c:1011</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_adece183191b0e700e039e59101e06105"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#adece183191b0e700e039e59101e06105">ast_frame_subclass::integer</a></div><div class="ttdeci">int integer</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00152">include/asterisk/frame.h:152</a></div></div>
<div class="ttc" id="logger_8h_html_a3f248112c8d6ce7e3959aa723dade648"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#a3f248112c8d6ce7e3959aa723dade648">ast_debug</a></div><div class="ttdeci">#define ast_debug(level,...)</div><div class="ttdoc">Log a DEBUG message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00452">logger.h:452</a></div></div>
<div class="ttc" id="astobj2_8c_html_a96a00b3a518d7f32b6d51dc28f09bf9b"><div class="ttname"><a href="../../da/df7/astobj2_8c.html#a96a00b3a518d7f32b6d51dc28f09bf9b">ast_log</a></div><div class="ttdeci">#define ast_log</div><div class="ttdef"><b>Definition:</b> <a href="../../da/df7/astobj2_8c_source.html#l00042">astobj2.c:42</a></div></div>
<div class="ttc" id="compiler_8h_html_af2af475b85aef66019c417d8ded1c435"><div class="ttname"><a href="../../d4/dd1/compiler_8h.html#af2af475b85aef66019c417d8ded1c435">SENTINEL</a></div><div class="ttdeci">#define SENTINEL</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dd1/compiler_8h_source.html#l00087">compiler.h:87</a></div></div>
<div class="ttc" id="ulaw_8h_html"><div class="ttname"><a href="../../d4/dc2/ulaw_8h.html">ulaw.h</a></div><div class="ttdoc">u-Law to Signed linear conversion </div></div>
<div class="ttc" id="app__meetme_8c_html_aedae223718f09a236ef53ccb85869959"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aedae223718f09a236ef53ccb85869959">sla_station_destructor</a></div><div class="ttdeci">static void sla_station_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07380">app_meetme.c:7380</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a0a07ddd6bbcf44485e01c14c96109482"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a0a07ddd6bbcf44485e01c14c96109482">ast_config_load</a></div><div class="ttdeci">#define ast_config_load(filename, flags)</div><div class="ttdoc">Load a config file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00179">include/asterisk/config.h:179</a></div></div>
<div class="ttc" id="structast__variable_html_a8556878012feffc9e0beb86cd78f424d"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8556878012feffc9e0beb86cd78f424d">ast_variable::value</a></div><div class="ttdeci">const char * value</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00087">include/asterisk/config.h:87</a></div></div>
<div class="ttc" id="structsla__trunk_html_aa328161f4934a6c22ca967fcb5cbc1e1"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#aa328161f4934a6c22ca967fcb5cbc1e1">sla_trunk::mark</a></div><div class="ttdeci">unsigned int mark</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01006">app_meetme.c:1006</a></div></div>
<div class="ttc" id="structdial__trunk__args_html_a0569f66b3f952276c1a8ec5f2ffd5466"><div class="ttname"><a href="../../d3/db7/structdial__trunk__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">dial_trunk_args::station</a></div><div class="ttdeci">struct sla_station * station</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06847">app_meetme.c:6847</a></div></div>
<div class="ttc" id="format_8h_html_a738c58eca291b71de4422e95bff27400"><div class="ttname"><a href="../../d0/d0a/format_8h.html#a738c58eca291b71de4422e95bff27400">ast_format_cmp</a></div><div class="ttdeci">enum ast_format_cmp_res ast_format_cmp(const struct ast_format *format1, const struct ast_format *format2)</div><div class="ttdoc">Compare two formats. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/da6/format_8c_source.html#l00201">format.c:201</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847">ast_dial_result</a></div><div class="ttdeci">ast_dial_result</div><div class="ttdoc">List of return codes for dial run API calls. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00054">dial.h:54</a></div></div>
<div class="ttc" id="translate_8h_html_a08790d6e05056f38fe9194134332cfef"><div class="ttname"><a href="../../db/d39/translate_8h.html#a08790d6e05056f38fe9194134332cfef">ast_translator_build_path</a></div><div class="ttdeci">struct ast_trans_pvt * ast_translator_build_path(struct ast_format *dest, struct ast_format *source)</div><div class="ttdoc">Builds a translator path Build a path (possibly NULL) from source to dest. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00485">translate.c:485</a></div></div>
<div class="ttc" id="devicestate_8h_html_a62a8e6bc4b82dd797e505688f9f29bff"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a62a8e6bc4b82dd797e505688f9f29bff">ast_devstate_changed</a></div><div class="ttdeci">int ast_devstate_changed(enum ast_device_state state, enum ast_devstate_cache cachable, const char *fmt,...)</div><div class="ttdoc">Tells Asterisk the State for Device is changed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d80/devicestate_8c_source.html#l00510">devicestate.c:510</a></div></div>
<div class="ttc" id="structvolume_html_ab45b5270856ae9a7c5869af590e53e18"><div class="ttname"><a href="../../da/d4c/structvolume.html#ab45b5270856ae9a7c5869af590e53e18">volume::actual</a></div><div class="ttdeci">int actual</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00892">app_meetme.c:892</a></div></div>
<div class="ttc" id="structast__conf__user_html_a0b23b4ebfc857809d07d1ced94c9a6eb"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a0b23b4ebfc857809d07d1ced94c9a6eb">ast_conf_user::end_sound</a></div><div class="ttdeci">const char * end_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00912">app_meetme.c:912</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a62fd4c125f1aadafcee981304a59261aacd2fcc269af2c1a25641c5afa9109ea3"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aacd2fcc269af2c1a25641c5afa9109ea3">SLA_EVENT_DIAL_STATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01042">app_meetme.c:1042</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a465e55d6bb67a80682ef3ca1b488a826"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a465e55d6bb67a80682ef3ca1b488a826">can_write</a></div><div class="ttdeci">static int can_write(struct ast_channel *chan, struct ast_flags64 *confflags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02672">app_meetme.c:2672</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2a932542fb105fccb6978ea84d0a8bc4a98486ef3937db9b46bd9307a5f2b71a9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a98486ef3937db9b46bd9307a5f2b71a9">MENU_ADMIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02752">app_meetme.c:2752</a></div></div>
<div class="ttc" id="channel_8h_html"><div class="ttname"><a href="../../d5/d7b/channel_8h.html">channel.h</a></div><div class="ttdoc">General Asterisk PBX channel definitions. </div></div>
<div class="ttc" id="json_8h_html"><div class="ttname"><a href="../../d4/d05/json_8h.html">json.h</a></div><div class="ttdoc">Asterisk JSON abstraction layer. </div></div>
<div class="ttc" id="app__meetme_8c_html_a2a932542fb105fccb6978ea84d0a8bc4a9a5a6dbfc43f3c8834b7e718a78311ff"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4a9a5a6dbfc43f3c8834b7e718a78311ff">MENU_ADMIN_EXTENDED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02753">app_meetme.c:2753</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1e618b1883d308cb371b0e7b0800bf3f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1e618b1883d308cb371b0e7b0800bf3f">run_station</a></div><div class="ttdeci">static void * run_station(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06068">app_meetme.c:6068</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a403ec8b49645ea204e82cb72bb8cf9f4"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a403ec8b49645ea204e82cb72bb8cf9f4">ast_realtime_require_field</a></div><div class="ttdeci">int ast_realtime_require_field(const char *family,...) attribute_sentinel</div><div class="ttdoc">Inform realtime what fields that may be stored. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03382">main/config.c:3382</a></div></div>
<div class="ttc" id="structast__conference_html_a9c9fece27d0906bb0c5e522e26c92d7f"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a9c9fece27d0906bb0c5e522e26c92d7f">ast_conference::bookid</a></div><div class="ttdeci">const char * bookid</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00871">app_meetme.c:871</a></div></div>
<div class="ttc" id="module_8h_html_a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223"><div class="ttname"><a href="../../d5/d16/module_8h.html#a155a0df9c59e04e305d4a2fa3e35f843a12c3f60dd7655dfa8d4430cbf04b1223">AST_MODFLAG_LOAD_ORDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00317">module.h:317</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ad09fa931f468002152a3cc2d5ce25eae"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ad09fa931f468002152a3cc2d5ce25eae">unload_module</a></div><div class="ttdeci">static int unload_module(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l08004">app_meetme.c:8004</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a1b6d4960faefd92a619429072ea3aa72">ADMINFLAG_SELFMUTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00654">app_meetme.c:654</a></div></div>
<div class="ttc" id="paths_8h_html"><div class="ttname"><a href="../../dd/df2/paths_8h.html">paths.h</a></div><div class="ttdoc">Asterisk file paths, configured in asterisk.conf. </div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ac8f7380b8620c80443286b44481f641c"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ac8f7380b8620c80443286b44481f641c">AST_FRIENDLY_OFFSET</a></div><div class="ttdeci">#define AST_FRIENDLY_OFFSET</div><div class="ttdoc">Offset into a frame&amp;#39;s data buffer. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00229">include/asterisk/frame.h:229</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a458c884631705776b67d47722a321038">CONFFLAG_MARKEDEXIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00706">app_meetme.c:706</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gabf7c909efbfc26d0d9c66786c83b8f69"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gabf7c909efbfc26d0d9c66786c83b8f69">astman_send_list_complete_end</a></div><div class="ttdeci">void astman_send_list_complete_end(struct mansession *s)</div><div class="ttdoc">End the list complete event. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03245">manager.c:3245</a></div></div>
<div class="ttc" id="structsla__ringing__trunk_html_a5fad56bdd993af8ceb77ab8a83134f0f"><div class="ttname"><a href="../../d8/dc8/structsla__ringing__trunk.html#a5fad56bdd993af8ceb77ab8a83134f0f">sla_ringing_trunk::ring_begin</a></div><div class="ttdeci">struct timeval ring_begin</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01066">app_meetme.c:1066</a></div></div>
<div class="ttc" id="dial_8h_html_a726346c9cfd11a81839e0eb580b66059"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a726346c9cfd11a81839e0eb580b66059">ast_dial_join</a></div><div class="ttdeci">enum ast_dial_result ast_dial_join(struct ast_dial *dial)</div><div class="ttdoc">Cancel async thread. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01021">dial.c:1021</a></div></div>
<div class="ttc" id="channel_8h_html_a9107a83365cbf327cc0d12cb0dbd28d8"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9107a83365cbf327cc0d12cb0dbd28d8">ast_set_read_format</a></div><div class="ttdeci">int ast_set_read_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets read format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05849">channel.c:5849</a></div></div>
<div class="ttc" id="utils_8h_html_a1604b4d72144dd3d9f7da668e90337e9"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a1604b4d72144dd3d9f7da668e90337e9">RAII_VAR</a></div><div class="ttdeci">#define RAII_VAR(vartype, varname, initval, dtor)</div><div class="ttdoc">Declare a variable that will call a destructor function when it goes out of scope. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00911">utils.h:911</a></div></div>
<div class="ttc" id="structsla__trunk_html_adbb5ea13ff67a0f65a71edddb0eef433"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#adbb5ea13ff67a0f65a71edddb0eef433">sla_trunk::on_hold</a></div><div class="ttdeci">unsigned int on_hold</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01004">app_meetme.c:1004</a></div></div>
<div class="ttc" id="test_8h_html_a5e8fddded61f6989172c981256e7c9bd"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a5e8fddded61f6989172c981256e7c9bd">ast_test_status_update</a></div><div class="ttdeci">#define ast_test_status_update(a, b, c...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00129">test.h:129</a></div></div>
<div class="ttc" id="structast__cli__args_html_acf64f219885421479997667d2ed3f08a"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acf64f219885421479997667d2ed3f08a">ast_cli_args::fd</a></div><div class="ttdeci">const int fd</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00159">cli.h:159</a></div></div>
<div class="ttc" id="stringfields_8h_html_a871274fa4fd2687c7a44849a84df3665"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a871274fa4fd2687c7a44849a84df3665">ast_string_field_init</a></div><div class="ttdeci">#define ast_string_field_init(x, size)</div><div class="ttdoc">Initialize a field pool and fields. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00353">stringfields.h:353</a></div></div>
<div class="ttc" id="structsla__ringing__trunk_html"><div class="ttname"><a href="../../d8/dc8/structsla__ringing__trunk.html">sla_ringing_trunk</a></div><div class="ttdoc">A trunk that is ringing. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01063">app_meetme.c:1063</a></div></div>
<div class="ttc" id="structast__dsp_html"><div class="ttname"><a href="../../d6/de5/structast__dsp.html">ast_dsp</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l00405">dsp.c:405</a></div></div>
<div class="ttc" id="channel_8h_html_a10f23f1907b804485f62973f66cd9aef"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a10f23f1907b804485f62973f66cd9aef">ast_channel_connected</a></div><div class="ttdeci">struct ast_party_connected_line * ast_channel_connected(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00892">channel_internal_api.c:892</a></div></div>
<div class="ttc" id="chan__sip_8c_html_a95688dd12ffb052a0e52b1d2a3afcf1d"><div class="ttname"><a href="../../d5/dfe/chan__sip_8c.html#a95688dd12ffb052a0e52b1d2a3afcf1d">dtmfstr</a></div><div class="ttdeci">static const struct _map_x_s dtmfstr[]</div><div class="ttdoc">mapping between dtmf flags and strings </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfe/chan__sip_8c_source.html#l20588">chan_sip.c:20588</a></div></div>
<div class="ttc" id="structstasis__message__router_html"><div class="ttname"><a href="../../d4/d1b/structstasis__message__router.html">stasis_message_router</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00131">stasis_message_router.c:131</a></div></div>
<div class="ttc" id="lock_8h_html_a6009440c7a72f8e2e3b1ec97641ad160"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6009440c7a72f8e2e3b1ec97641ad160">AST_PTHREADT_NULL</a></div><div class="ttdeci">#define AST_PTHREADT_NULL</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00066">lock.h:66</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a96a58e29e8dbf2b5bdeb775cba46556eaef6bb24270917468d46263b7d7a0c79c"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556eaef6bb24270917468d46263b7d7a0c79c">OPT_ARG_INTROUSER_VMREC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00762">app_meetme.c:762</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af94ec9322c762bc23130e081684d09a1"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af94ec9322c762bc23130e081684d09a1">sla_calc_station_timeouts</a></div><div class="ttdeci">static int sla_calc_station_timeouts(unsigned int *timeout)</div><div class="ttdoc">Process station ring timeouts. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06613">app_meetme.c:6613</a></div></div>
<div class="ttc" id="structast__cli__args_html_acfc02ec89670db29251fda6a66602ce2"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#acfc02ec89670db29251fda6a66602ce2">ast_cli_args::n</a></div><div class="ttdeci">const int n</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00165">cli.h:165</a></div></div>
<div class="ttc" id="structast__custom__function_html"><div class="ttname"><a href="../../db/dc0/structast__custom__function.html">ast_custom_function</a></div><div class="ttdoc">Data structure associated with a custom dialplan function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00118">pbx.h:118</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4afaf2b3922ef62a50c702b5456477b3c4">CONFFLAG_ADMIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00687">app_meetme.c:687</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4ac5154b9d3575197ced6458b31fba2143"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ac5154b9d3575197ced6458b31fba2143">CONFFLAG_SLA_TRUNK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00737">app_meetme.c:737</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea41983b6678528bfcdf919b24d6e08d9a">AST_DEVICE_UNKNOWN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00053">devicestate.h:53</a></div></div>
<div class="ttc" id="astobj2_8h_html"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html">astobj2.h</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adf04f66344e3fb0a6f6a69bf39d19902"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adf04f66344e3fb0a6f6a69bf39d19902">lock</a></div><div class="ttdeci">ast_mutex_t lock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01091">app_meetme.c:1091</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4aeae3eb825018940e6703d8151f1f20d5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aeae3eb825018940e6703d8151f1f20d5">CONFFLAG_KEYEXIT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00691">app_meetme.c:691</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1c7181c39f99ee801943a0d0aa9872b9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1c7181c39f99ee801943a0d0aa9872b9">cond</a></div><div class="ttdeci">ast_cond_t cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01090">app_meetme.c:1090</a></div></div>
<div class="ttc" id="channel_8h_html_af4e59494f74ad9e0c50170d9e276ad31"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af4e59494f74ad9e0c50170d9e276ad31">AST_MAX_EXTENSION</a></div><div class="ttdeci">#define AST_MAX_EXTENSION</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00135">channel.h:135</a></div></div>
<div class="ttc" id="structast__frame_html_ad67e07841d1233e596e6f822a3c81f6b"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ad67e07841d1233e596e6f822a3c81f6b">ast_frame::datalen</a></div><div class="ttdeci">int datalen</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00171">include/asterisk/frame.h:171</a></div></div>
<div class="ttc" id="stringfields_8h_html_a51b5729220efb7cda4393ed35ecdfea2"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a51b5729220efb7cda4393ed35ecdfea2">AST_STRING_FIELD</a></div><div class="ttdeci">#define AST_STRING_FIELD(name)</div><div class="ttdoc">Declare a string field. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00299">stringfields.h:299</a></div></div>
<div class="ttc" id="structast__party__caller_html"><div class="ttname"><a href="../../d4/d77/structast__party__caller.html">ast_party_caller</a></div><div class="ttdoc">Caller Party information. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00419">channel.h:419</a></div></div>
<div class="ttc" id="structast__conf__user_html"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html">ast_conf_user</a></div><div class="ttdoc">The MeetMe User object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00896">app_meetme.c:896</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa8ac496fa9c717d5afb99a02e1e2760c"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa8ac496fa9c717d5afb99a02e1e2760c">AST_LIST_REMOVE_CURRENT</a></div><div class="ttdeci">#define AST_LIST_REMOVE_CURRENT(field)</div><div class="ttdoc">Removes the current entry from a list during a traversal. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00556">linkedlists.h:556</a></div></div>
<div class="ttc" id="astobj2_8h_html_aaca5e8eac39a22f9da1c36fc6c922270"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aaca5e8eac39a22f9da1c36fc6c922270">ao2_ref</a></div><div class="ttdeci">#define ao2_ref(o, delta)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00464">astobj2.h:464</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1f8b41308be4c47de8ff89a3b9c7e7d1a1959468a3c5d6aecd2fa1272d8e30fbf">CMP_MATCH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01031">astobj2.h:1031</a></div></div>
<div class="ttc" id="strings_8h_html_a38a896048b2ca84076864505f0aa8f01"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a38a896048b2ca84076864505f0aa8f01">S_COR</a></div><div class="ttdeci">#define S_COR(a, b, c)</div><div class="ttdoc">returns the equivalent of logic or for strings, with an additional boolean check: second one if not e...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00085">strings.h:85</a></div></div>
<div class="ttc" id="channel_8h_html_ac2d6607253f7e8b272d4e845474eaa9b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ac2d6607253f7e8b272d4e845474eaa9b">ast_softhangup</a></div><div class="ttdeci">int ast_softhangup(struct ast_channel *chan, int reason)</div><div class="ttdoc">Softly hangup up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02476">channel.c:2476</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a3b7f07302bc7a2fc4184e561679749bfafe977bca19aa4a5f72ff226a312b74af"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfafe977bca19aa4a5f72ff226a312b74af">CONF_HASLEFT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00828">app_meetme.c:828</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4178d3abb2ecba4c119838052829dd94"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4178d3abb2ecba4c119838052829dd94">sla_queue_event_full</a></div><div class="ttdeci">static void sla_queue_event_full(enum sla_event_type type, struct sla_trunk_ref *trunk_ref, struct sla_station *station, int lock)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02419">app_meetme.c:2419</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a6b4d4d929013de7812fbba4e58353078"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a6b4d4d929013de7812fbba4e58353078">ast_config_destroy</a></div><div class="ttdeci">void ast_config_destroy(struct ast_config *config)</div><div class="ttdoc">Destroys a config. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l01290">extconf.c:1290</a></div></div>
<div class="ttc" id="structmansession_html"><div class="ttname"><a href="../../d2/d8a/structmansession.html">mansession</a></div><div class="ttdoc">In case you didn&amp;#39;t read that giant block of text above the mansession_session struct, the struct mansession is named this solely to keep the API the same in Asterisk. This structure really represents data that is different from Manager action to Manager action. The mansession_session pointer contained within points to session-specific data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l01625">manager.c:1625</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a95a34a9245e87d8481590dddcfd168d2"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a95a34a9245e87d8481590dddcfd168d2">sla_create_station_ref</a></div><div class="ttdeci">static struct sla_station_ref * sla_create_station_ref(struct sla_station *station)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05949">app_meetme.c:5949</a></div></div>
<div class="ttc" id="astobj2_8h_html_aa9fdb5d0a6157a56060d9f7279fe6c49"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#aa9fdb5d0a6157a56060d9f7279fe6c49">ao2_lock</a></div><div class="ttdeci">#define ao2_lock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00718">astobj2.h:718</a></div></div>
<div class="ttc" id="time_8h_html_a1d774df72e3dbb623475783e06ce4f61"><div class="ttname"><a href="../../de/df7/time_8h.html#a1d774df72e3dbb623475783e06ce4f61">ast_samp2tv</a></div><div class="ttdeci">struct timeval ast_samp2tv(unsigned int _nsamp, unsigned int _rate)</div><div class="ttdoc">Returns a timeval corresponding to the duration of n samples at rate r. Useful to convert samples to ...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/df7/time_8h_source.html#l00238">time.h:238</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ab2f6aeedfe3c63d7c493a1c849893d10"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ab2f6aeedfe3c63d7c493a1c849893d10">sla_state</a></div><div class="ttdeci">static enum ast_device_state sla_state(const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07326">app_meetme.c:7326</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a642977b3db866f6c6f87b1d5f7791d5b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a642977b3db866f6c6f87b1d5f7791d5b">CONFFLAG_ANNOUNCEUSERCOUNT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00700">app_meetme.c:700</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a0ff1e6e0d1512995dc75af266143dceb"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a0ff1e6e0d1512995dc75af266143dceb">meetme_info_acf</a></div><div class="ttdeci">static struct ast_custom_function meetme_info_acf</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07992">app_meetme.c:7992</a></div></div>
<div class="ttc" id="astmm_8h_html_ab5f0750cc80ba337fdcbddea2d3a1ee6"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ab5f0750cc80ba337fdcbddea2d3a1ee6">ast_strdupa</a></div><div class="ttdeci">#define ast_strdupa(s)</div><div class="ttdoc">duplicate a string in memory from the stack </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00300">astmm.h:300</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae76e8f359ad4ae53436dc00dfc1434d9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae76e8f359ad4ae53436dc00dfc1434d9">sla_process_timers</a></div><div class="ttdeci">static int sla_process_timers(struct timespec *ts)</div><div class="ttdoc">Calculate the time until the next known event. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06740">app_meetme.c:6740</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a66909c89e7858db0fae73a31805a8d1a"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a66909c89e7858db0fae73a31805a8d1a">meetmemute</a></div><div class="ttdeci">static int meetmemute(struct mansession *s, const struct message *m, int mute)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05451">app_meetme.c:5451</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a5ab93ee8a01e294aa904de5413d78601"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a5ab93ee8a01e294aa904de5413d78601">conf_start_moh</a></div><div class="ttdeci">static void conf_start_moh(struct ast_channel *chan, const char *musicclass)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02585">app_meetme.c:2585</a></div></div>
<div class="ttc" id="leave_8h_html"><div class="ttname"><a href="../../da/dd8/leave_8h.html">leave.h</a></div></div>
<div class="ttc" id="lock_8h_html_acbbba9058696fc07cec1485a88b5f4ad"><div class="ttname"><a href="../../dd/d42/lock_8h.html#acbbba9058696fc07cec1485a88b5f4ad">ast_atomic_dec_and_test</a></div><div class="ttdeci">int ast_atomic_dec_and_test(volatile int *p)</div><div class="ttdoc">decrement *p by 1 and return true if the variable has reached 0. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00765">lock.h:765</a></div></div>
<div class="ttc" id="structsla__trunk_html"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html">sla_trunk</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00981">app_meetme.c:981</a></div></div>
<div class="ttc" id="format__cap_8h_html_ab4d69f2179ed5ca138c9b3d85334217f"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#ab4d69f2179ed5ca138c9b3d85334217f">ast_format_cap_append</a></div><div class="ttdeci">#define ast_format_cap_append(cap, format, framing)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00103">format_cap.h:103</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a8fc3c28c0edf393e6f7a01f3e0865de6"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a8fc3c28c0edf393e6f7a01f3e0865de6">meetmestate</a></div><div class="ttdeci">static enum ast_device_state meetmestate(const char *data)</div><div class="ttdoc">Callback for devicestate providers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05750">app_meetme.c:5750</a></div></div>
<div class="ttc" id="json_8h_html_a6772fcee88746a9d4f6ec6f240b76dd0"><div class="ttname"><a href="../../d4/d05/json_8h.html#a6772fcee88746a9d4f6ec6f240b76dd0">ast_json_string_get</a></div><div class="ttdeci">const char * ast_json_string_get(const struct ast_json *string)</div><div class="ttdoc">Get the value of a JSON string. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00273">json.c:273</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ad714502c1dbeae46a86c3b4e2e210ed1"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ad714502c1dbeae46a86c3b4e2e210ed1">sla_create_ringing_station</a></div><div class="ttdeci">static struct sla_ringing_station * sla_create_ringing_station(struct sla_station *station)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05963">app_meetme.c:5963</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a68f160d36f15edc473aa580c5cf24ed8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a68f160d36f15edc473aa580c5cf24ed8">sla_trunk_cmp</a></div><div class="ttdeci">static int sla_trunk_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07406">app_meetme.c:7406</a></div></div>
<div class="ttc" id="structast__variable_html_a8f8f80d37794cde9472343e4487ba3eb"><div class="ttname"><a href="../../dd/d02/structast__variable.html#a8f8f80d37794cde9472343e4487ba3eb">ast_variable::name</a></div><div class="ttdeci">const char * name</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00085">include/asterisk/config.h:85</a></div></div>
<div class="ttc" id="structsla__trunk_html_a748f7c363274abc31c4396fde91f9f4e"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#a748f7c363274abc31c4396fde91f9f4e">sla_trunk::barge_disabled</a></div><div class="ttdeci">unsigned int barge_disabled</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00998">app_meetme.c:998</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1357a2b3f3188e9ed96885a40c8108b0"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1357a2b3f3188e9ed96885a40c8108b0">tweak_listen_volume</a></div><div class="ttdeci">static void tweak_listen_volume(struct ast_conf_user *user, enum volume_action action)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01506">app_meetme.c:1506</a></div></div>
<div class="ttc" id="channel_8h_html_abbdfb98077180544657b2d16c5d25f74"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abbdfb98077180544657b2d16c5d25f74">ast_set_write_format</a></div><div class="ttdeci">int ast_set_write_format(struct ast_channel *chan, struct ast_format *format)</div><div class="ttdoc">Sets write format on channel chan. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05890">channel.c:5890</a></div></div>
<div class="ttc" id="app__meetme_8c_html_abdc353ad8c1a89ea6138263c38d3a10a"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#abdc353ad8c1a89ea6138263c38d3a10a">sla_station_exec</a></div><div class="ttdeci">static int sla_station_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07006">app_meetme.c:7006</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aadfe2a69fbba4f27c201266a2ca5f989"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aadfe2a69fbba4f27c201266a2ca5f989">AST_LIST_REMOVE_HEAD</a></div><div class="ttdeci">#define AST_LIST_REMOVE_HEAD(head, field)</div><div class="ttdoc">Removes and returns the head entry from a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00832">linkedlists.h:832</a></div></div>
<div class="ttc" id="structstasis__message__type_html"><div class="ttname"><a href="../../d4/d8f/structstasis__message__type.html">stasis_message_type</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00038">stasis_message.c:38</a></div></div>
<div class="ttc" id="astobj2_8h_html_a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a2cf7e3433f08351aafe3b0cd31edf7f8a8ccf751bd6749d062999469f0694e7ad">AO2_ALLOC_OPT_LOCK_MUTEX</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00365">astobj2.h:365</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aa43e19d1500b459250f7b1804726ab56"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aa43e19d1500b459250f7b1804726ab56">sla_trunk_destructor</a></div><div class="ttdeci">static void sla_trunk_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07459">app_meetme.c:7459</a></div></div>
<div class="ttc" id="reqresp__parser_8h_html_a7e4aa55331b8292eff94249de72b807d"><div class="ttname"><a href="../../d1/d8f/reqresp__parser_8h.html#a7e4aa55331b8292eff94249de72b807d">AST_LIST_HEAD_NOLOCK</a></div><div class="ttdeci">AST_LIST_HEAD_NOLOCK(contactliststruct, contact)</div></div>
<div class="ttc" id="app__meetme_8c_html_add8be99b2331d60c0847870ff76a320a"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#add8be99b2331d60c0847870ff76a320a">event_q</a></div><div class="ttdeci">struct @35::@53 event_q</div></div>
<div class="ttc" id="app__meetme_8c_html_a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea17eae9ed5d8e8bb1e6246571c0cd4c75">OPT_ARG_MOH_CLASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00760">app_meetme.c:760</a></div></div>
<div class="ttc" id="pbx_8h_html_ad2e753a683024fad0b34ece3b1aef83a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad2e753a683024fad0b34ece3b1aef83a">PRIORITY_HINT</a></div><div class="ttdeci">#define PRIORITY_HINT</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00054">pbx.h:54</a></div></div>
<div class="ttc" id="structsla__failed__station_html_a0569f66b3f952276c1a8ec5f2ffd5466"><div class="ttname"><a href="../../d5/d9c/structsla__failed__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">sla_failed_station::station</a></div><div class="ttdeci">struct sla_station * station</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01057">app_meetme.c:1057</a></div></div>
<div class="ttc" id="pbx_8h_html_a64a5b8fdc919806135ad427aca9e71b7"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a64a5b8fdc919806135ad427aca9e71b7">ast_exists_extension</a></div><div class="ttdeci">int ast_exists_extension(struct ast_channel *c, const char *context, const char *exten, int priority, const char *callerid)</div><div class="ttdoc">Determine whether an extension exists. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l04179">pbx.c:4179</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af1c1448ffe2b0e610323ea6725f412c0a0d3359532f25486a8dd30e3ef7c90511"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0a0d3359532f25486a8dd30e3ef7c90511">SLA_STATION_HANGUP_NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01072">app_meetme.c:1072</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a89b13052de37686017f177352a20a8d0"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a89b13052de37686017f177352a20a8d0">create_trunk_ref</a></div><div class="ttdeci">static struct sla_trunk_ref * create_trunk_ref(struct sla_trunk *trunk)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07168">app_meetme.c:7168</a></div></div>
<div class="ttc" id="format__cap_8h_html_aeb38ee3bdc8594745a707c0927146fdb"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#aeb38ee3bdc8594745a707c0927146fdb">ast_format_cap_alloc</a></div><div class="ttdeci">#define ast_format_cap_alloc(flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00052">format_cap.h:52</a></div></div>
<div class="ttc" id="structsla__ringing__station_html_a5fad56bdd993af8ceb77ab8a83134f0f"><div class="ttname"><a href="../../dc/d5b/structsla__ringing__station.html#a5fad56bdd993af8ceb77ab8a83134f0f">sla_ringing_station::ring_begin</a></div><div class="ttdeci">struct timeval ring_begin</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01080">app_meetme.c:1080</a></div></div>
<div class="ttc" id="manager_8h_html_a777cde87d12b331902f862ec44641688"><div class="ttname"><a href="../../db/d45/manager_8h.html#a777cde87d12b331902f862ec44641688">ast_manager_build_channel_state_string</a></div><div class="ttdeci">struct ast_str * ast_manager_build_channel_state_string(const struct ast_channel_snapshot *snapshot)</div><div class="ttdoc">Generate the AMI message body from a channel snapshot. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d1c/manager__channels_8c_source.html#l00561">manager_channels.c:561</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4780ccb62eb3184ace7cfae1af267115"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4780ccb62eb3184ace7cfae1af267115">tweak_volume</a></div><div class="ttdeci">static void tweak_volume(struct volume *vol, enum volume_action action)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01459">app_meetme.c:1459</a></div></div>
<div class="ttc" id="structast__conference_html_a7ca712371793ba6d3cfdd54c55cb9033"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a7ca712371793ba6d3cfdd54c55cb9033">ast_conference::announcelistlock</a></div><div class="ttdeci">ast_mutex_t announcelistlock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00883">app_meetme.c:883</a></div></div>
<div class="ttc" id="structsla__station_html_abd618554d6f505185716d9c7e25ba4d3"><div class="ttname"><a href="../../dd/d95/structsla__station.html#abd618554d6f505185716d9c7e25ba4d3">sla_station::trunks</a></div><div class="ttdeci">trunks</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00949">app_meetme.c:949</a></div></div>
<div class="ttc" id="channel_8h_html_a16ef76c1e3a076b0daffda589ed8ab1a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a16ef76c1e3a076b0daffda589ed8ab1a">ast_channel_caller_set</a></div><div class="ttdeci">void ast_channel_caller_set(struct ast_channel *chan, struct ast_party_caller *value)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00944">channel_internal_api.c:944</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af40039f1c49c16d0f6fa33fe9c43a0cb"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af40039f1c49c16d0f6fa33fe9c43a0cb">ast_app_parse_options</a></div><div class="ttdeci">int ast_app_parse_options(const struct ast_app_option *options, struct ast_flags *flags, char **args, char *optstr)</div><div class="ttdoc">Parses a string containing application options and sets flags/arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02906">main/app.c:2906</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aa469d77d3fee8f11b2d48740365fd0d5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aa469d77d3fee8f11b2d48740365fd0d5">action_meetmemute</a></div><div class="ttdeci">static int action_meetmemute(struct mansession *s, const struct message *m)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05511">app_meetme.c:5511</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a57fc53d582772f2125adafaabe596b01"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a57fc53d582772f2125adafaabe596b01">reset_volumes</a></div><div class="ttdeci">static void reset_volumes(struct ast_conf_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01518">app_meetme.c:1518</a></div></div>
<div class="ttc" id="structast__conference_html_afaeff193ffee212d48e41d1b523e21e5"><div class="ttname"><a href="../../d8/d44/structast__conference.html#afaeff193ffee212d48e41d1b523e21e5">ast_conference::endtime</a></div><div class="ttdeci">long endtime</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00868">app_meetme.c:868</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a5b81d4eabb9d7a2502f49cac82ebaea5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a5b81d4eabb9d7a2502f49cac82ebaea5">meetme_menu_admin</a></div><div class="ttdeci">static void meetme_menu_admin(enum menu_modes *menu_mode, int *dtmf, struct ast_conference *conf, struct ast_flags64 *confflags, struct ast_channel *chan, struct ast_conf_user *user)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02846">app_meetme.c:2846</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a29ff71f9d5c7927906ebd437fe372056">AST_FRAME_NULL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00107">include/asterisk/frame.h:107</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847aba600b021de0e20a6e8a6c484f27a9e4"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847aba600b021de0e20a6e8a6c484f27a9e4">AST_DIAL_RESULT_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00058">dial.h:58</a></div></div>
<div class="ttc" id="dial_8h_html_a051c20e595f3e3c2be10c84b4247dd37"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a051c20e595f3e3c2be10c84b4247dd37">ast_dial_state</a></div><div class="ttdeci">enum ast_dial_result ast_dial_state(struct ast_dial *dial)</div><div class="ttdoc">Return state of dial. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l01012">dial.c:1012</a></div></div>
<div class="ttc" id="pbx_8h_html"><div class="ttname"><a href="../../db/de0/pbx_8h.html">pbx.h</a></div><div class="ttdoc">Core PBX routines and definitions. </div></div>
<div class="ttc" id="localtime_8h_html_a3eb2c73accce1b149ce597de80d1677a"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#a3eb2c73accce1b149ce597de80d1677a">ast_strptime</a></div><div class="ttdeci">char * ast_strptime(const char *s, const char *format, struct ast_tm *tm)</div><div class="ttdoc">Special version of strptime(3) which places the answer in the common structure ast_tm. Also, unlike strptime(3), ast_strptime() initializes its memory prior to use. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02550">localtime.c:2550</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af85cb9dfd2fea9cfe820d2323c7dd471"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af85cb9dfd2fea9cfe820d2323c7dd471">ast_app_parse_options64</a></div><div class="ttdeci">int ast_app_parse_options64(const struct ast_app_option *options, struct ast_flags64 *flags, char **args, char *optstr)</div><div class="ttdoc">Parses a string containing application options and sets flags/arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l02911">main/app.c:2911</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeeadee91fc4886ffc7b4efb8459cef48fe2">AST_DEVICE_NOT_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00054">devicestate.h:54</a></div></div>
<div class="ttc" id="channel_8h_html_a08bde7d8cf72457fc8c519a4443b413b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a08bde7d8cf72457fc8c519a4443b413b">ast_autoservice_stop</a></div><div class="ttdeci">int ast_autoservice_stop(struct ast_channel *chan)</div><div class="ttdoc">Stop servicing a channel for us... </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d66/autoservice_8c_source.html#l00266">autoservice.c:266</a></div></div>
<div class="ttc" id="dial_8h_html_a65e30d29847af5495afe1baed823957e"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a65e30d29847af5495afe1baed823957e">ast_dial_run</a></div><div class="ttdeci">enum ast_dial_result ast_dial_run(struct ast_dial *dial, struct ast_channel *chan, int async)</div><div class="ttdoc">Execute dialing synchronously or asynchronously. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00939">dial.c:939</a></div></div>
<div class="ttc" id="format__cap_8h_html_a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a"><div class="ttname"><a href="../../d0/d3c/format__cap_8h.html#a51f3293ae7b01a8353bf4aa1204abba5ad111d20686641a6f0fc5efd33c82e97a">AST_FORMAT_CAP_FLAG_DEFAULT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d3c/format__cap_8h_source.html#l00038">format_cap.h:38</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a1a1761c57f73009d305f95d8ad99e2a7"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a1a1761c57f73009d305f95d8ad99e2a7">stasis_message_router_create</a></div><div class="ttdeci">#define stasis_message_router_create(topic)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d25/stasis__message__router_8h_source.html#l00060">stasis_message_router.h:60</a></div></div>
<div class="ttc" id="channel_8h_html_a9c63fff1d736568d1ee332dd7ea502bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9c63fff1d736568d1ee332dd7ea502bd">ast_check_hangup</a></div><div class="ttdeci">int ast_check_hangup(struct ast_channel *chan)</div><div class="ttdoc">Check to see if a channel is needing hang up. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l00445">channel.c:445</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a42bbab56ce6a8eb0aaf501be26cf5271"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a42bbab56ce6a8eb0aaf501be26cf5271">conf_flush</a></div><div class="ttdeci">static void conf_flush(int fd, struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02299">app_meetme.c:2299</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0ae1dae388b0d70825876e137ae95bb0c1">AST_FRAME_CONTROL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00105">include/asterisk/frame.h:105</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a17b11cfe0e59eab973dd6aa57de91f8b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a17b11cfe0e59eab973dd6aa57de91f8b">announce_thread</a></div><div class="ttdeci">static void * announce_thread(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02615">app_meetme.c:2615</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a846844eb2c4eb44554445936b3770711"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a846844eb2c4eb44554445936b3770711">CONFIG_STATUS_FILEUNCHANGED</a></div><div class="ttdeci">#define CONFIG_STATUS_FILEUNCHANGED</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00059">include/asterisk/config.h:59</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2a932542fb105fccb6978ea84d0a8bc4ab3da6b31f681a1e2901440b330a266a8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4ab3da6b31f681a1e2901440b330a266a8">MENU_NORMAL</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02751">app_meetme.c:2751</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4a7eef0979d0a4b9267d5bc5d98fde30"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4a7eef0979d0a4b9267d5bc5d98fde30">set_talk_volume</a></div><div class="ttdeci">static int set_talk_volume(struct ast_conf_user *user, int volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01435">app_meetme.c:1435</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4ad7732ac9c48e20f3c0bb5948ff1e01cf"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ad7732ac9c48e20f3c0bb5948ff1e01cf">CONFFLAG_STARTMUTED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00733">app_meetme.c:733</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a10f9ed9242a397abf76de1ed1fa33c3b"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a10f9ed9242a397abf76de1ed1fa33c3b">AST_LIST_HEAD_STATIC</a></div><div class="ttdeci">#define AST_LIST_HEAD_STATIC(name, type)</div><div class="ttdoc">Defines a structure to be used to hold a list of specified type, statically initialized. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00290">linkedlists.h:290</a></div></div>
<div class="ttc" id="app__meetme_8c_html_abc917c910c7fd37e34c7a985a227e0b9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#abc917c910c7fd37e34c7a985a227e0b9">sla_destroy</a></div><div class="ttdeci">static void sla_destroy(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07420">app_meetme.c:7420</a></div></div>
<div class="ttc" id="structast__flags64_html_a899a76dc5f03f0d4ea3793c339e07ee9"><div class="ttname"><a href="../../d5/d10/structast__flags64.html#a899a76dc5f03f0d4ea3793c339e07ee9">ast_flags64::flags</a></div><div class="ttdeci">uint64_t flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00205">utils.h:205</a></div></div>
<div class="ttc" id="structast__conf__user_html_a29a97734e4a1ebe507980f5926e02545"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a29a97734e4a1ebe507980f5926e02545">ast_conf_user::listen</a></div><div class="ttdeci">struct volume listen</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00914">app_meetme.c:914</a></div></div>
<div class="ttc" id="structvolume_html"><div class="ttname"><a href="../../da/d4c/structvolume.html">volume</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00890">app_meetme.c:890</a></div></div>
<div class="ttc" id="test_8h_html_a9482d93ea3931853331bdbc745ce7cb4"><div class="ttname"><a href="../../d2/ddc/test_8h.html#a9482d93ea3931853331bdbc745ce7cb4">ast_test_suite_event_notify</a></div><div class="ttdeci">#define ast_test_suite_event_notify(s, f,...)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/ddc/test_8h_source.html#l00196">test.h:196</a></div></div>
<div class="ttc" id="channel_8h_html_a3b6254f6d3832ef928f0a727113b1c63"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a3b6254f6d3832ef928f0a727113b1c63">ast_channel_uniqueid</a></div><div class="ttdeci">const char * ast_channel_uniqueid(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00305">channel_internal_api.c:305</a></div></div>
<div class="ttc" id="structframe__list_html"><div class="ttname"><a href="../../d9/d42/structframe__list.html">frame_list</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d21/res__rtp__asterisk_8c_source.html#l00590">res_rtp_asterisk.c:590</a></div></div>
<div class="ttc" id="structast__cli__args_html_ad0a19c4d63698f9e9cfd5653e8851452"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#ad0a19c4d63698f9e9cfd5653e8851452">ast_cli_args::argv</a></div><div class="ttdeci">const char *const  * argv</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00161">cli.h:161</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a829c143c29ff7d7c84cf2a4b6a86cfe9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a829c143c29ff7d7c84cf2a4b6a86cfe9">CONFFLAG_EMPTY</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00721">app_meetme.c:721</a></div></div>
<div class="ttc" id="channel_8h_html_afdeaf9abb1aecc715313a4f62c1cf9c9"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdeaf9abb1aecc715313a4f62c1cf9c9">ast_channel_topic</a></div><div class="ttdeci">struct stasis_topic * ast_channel_topic(struct ast_channel *chan)</div><div class="ttdoc">A topic which publishes the events for a particular channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01502">channel_internal_api.c:1502</a></div></div>
<div class="ttc" id="structast__conference_html_ae42dbdf188676f5840d98c4427e75a4f"><div class="ttname"><a href="../../d8/d44/structast__conference.html#ae42dbdf188676f5840d98c4427e75a4f">ast_conference::uniqueid</a></div><div class="ttdeci">char uniqueid[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00867">app_meetme.c:867</a></div></div>
<div class="ttc" id="group__Group__AMI_html_gafadf012f66a9fd7ecf985ec5b9dee101"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#gafadf012f66a9fd7ecf985ec5b9dee101">ast_manager_unregister</a></div><div class="ttdeci">int ast_manager_unregister(const char *action)</div><div class="ttdoc">Unregister a registered manager command. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l07258">manager.c:7258</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a35d067d4438a97ce462e0cb2a2dcb2bb">CONFFLAG_INTROUSER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00714">app_meetme.c:714</a></div></div>
<div class="ttc" id="manager_8h_html"><div class="ttname"><a href="../../db/d45/manager_8h.html">manager.h</a></div><div class="ttdoc">The AMI - Asterisk Manager Interface - is a TCP protocol created to manage Asterisk with third-party ...</div></div>
<div class="ttc" id="app__meetme_8c_html_adfc5a1ea28b621400e2838986493d624"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adfc5a1ea28b621400e2838986493d624">meetme_cmd_helper</a></div><div class="ttdeci">static char * meetme_cmd_helper(struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01996">app_meetme.c:1996</a></div></div>
<div class="ttc" id="structast__conference_html_ad3479638ded235d29e4bbba475abe931"><div class="ttname"><a href="../../d8/d44/structast__conference.html#ad3479638ded235d29e4bbba475abe931">ast_conference::pin</a></div><div class="ttdeci">char pin[MAX_PIN]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00865">app_meetme.c:865</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ad7a6277dea2b87f386d483e4459cd229"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ad7a6277dea2b87f386d483e4459cd229">sla_in_use</a></div><div class="ttdeci">static int sla_in_use(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07850">app_meetme.c:7850</a></div></div>
<div class="ttc" id="structdial__trunk__args_html_afa55138e79daa65d864f3524cf4843bf"><div class="ttname"><a href="../../d3/db7/structdial__trunk__args.html#afa55138e79daa65d864f3524cf4843bf">dial_trunk_args::trunk_ref</a></div><div class="ttdeci">struct sla_trunk_ref * trunk_ref</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06846">app_meetme.c:6846</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847ae9986b09a1806d312dd5e508aee3b9ed"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847ae9986b09a1806d312dd5e508aee3b9ed">AST_DIAL_RESULT_UNANSWERED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00064">dial.h:64</a></div></div>
<div class="ttc" id="structsla__ringing__trunk_html_afd7941b09a11427a48ced58c93402e35"><div class="ttname"><a href="../../d8/dc8/structsla__ringing__trunk.html#afd7941b09a11427a48ced58c93402e35">sla_ringing_trunk::trunk</a></div><div class="ttdeci">struct sla_trunk * trunk</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01064">app_meetme.c:1064</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a6b12890a73f5118ef54f1418de765de2"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a6b12890a73f5118ef54f1418de765de2">acf_meetme_info_eval</a></div><div class="ttdeci">static int acf_meetme_info_eval(const char *keyword, const struct ast_conference *conf)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07923">app_meetme.c:7923</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a29ff8cd717c0c0bac60abbd827fec409"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a29ff8cd717c0c0bac60abbd827fec409">ast_load_realtime_multientry</a></div><div class="ttdeci">struct ast_config * ast_load_realtime_multientry(const char *family,...) attribute_sentinel</div><div class="ttdoc">Retrieve realtime configuration. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l03452">main/config.c:3452</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4ae83ea6d46f620c57461a6df40e7b321c"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4ae83ea6d46f620c57461a6df40e7b321c">CONFFLAG_DYNAMIC</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00719">app_meetme.c:719</a></div></div>
<div class="ttc" id="structsla__trunk_html_a1d9bf56b0ad4ad9e4b195ccc2179eda4"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#a1d9bf56b0ad4ad9e4b195ccc2179eda4">sla_trunk::num_stations</a></div><div class="ttdeci">unsigned int num_stations</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00989">app_meetme.c:989</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a9a6475fc98053a8c8320d70e3c8e186f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a9a6475fc98053a8c8320d70e3c8e186f">sla_find_trunk_ref</a></div><div class="ttdeci">static struct sla_trunk_ref * sla_find_trunk_ref(const struct sla_station *station, const struct sla_trunk *trunk)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06427">app_meetme.c:6427</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1f9aebf1de3ebbf4283a4dcf73308562a01a9ae9e3c42b9f83ba7849e41bc9019"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1f9aebf1de3ebbf4283a4dcf73308562a01a9ae9e3c42b9f83ba7849e41bc9019">SLA_TRUNK_OPT_ARG_MOH_CLASS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07220">app_meetme.c:7220</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aa32d3b0ec852ae1c0c34b3b28286e7d6"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aa32d3b0ec852ae1c0c34b3b28286e7d6">sla_choose_ringing_trunk</a></div><div class="ttdeci">static struct sla_ringing_trunk * sla_choose_ringing_trunk(struct sla_station *station, struct sla_trunk_ref **trunk_ref, int rm)</div><div class="ttdoc">Choose the highest priority ringing trunk for a station. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06196">app_meetme.c:6196</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a94cb635b9fb6a74e88b8b134ac5e23d5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a94cb635b9fb6a74e88b8b134ac5e23d5">sla_show_trunks</a></div><div class="ttdeci">static char * sla_show_trunks(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02133">app_meetme.c:2133</a></div></div>
<div class="ttc" id="logger_8h_html_aced66975c154ea0e2a8ec3bc818b4e08"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#aced66975c154ea0e2a8ec3bc818b4e08">LOG_ERROR</a></div><div class="ttdeci">#define LOG_ERROR</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00285">logger.h:285</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a4d258b4525e63c435d7de579d3f46960"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a4d258b4525e63c435d7de579d3f46960">AST_LIST_INSERT_TAIL</a></div><div class="ttdeci">#define AST_LIST_INSERT_TAIL(head, elm, field)</div><div class="ttdoc">Appends a list entry to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00730">linkedlists.h:730</a></div></div>
<div class="ttc" id="structsla__trunk_html_a923df8202a8b865a393bb34def02c109"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#a923df8202a8b865a393bb34def02c109">sla_trunk::stations</a></div><div class="ttdeci">struct sla_trunk::@43 stations</div></div>
<div class="ttc" id="structast__conf__user_html_a6df8d56b5847fc7d3ccd9f1214d08284"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a6df8d56b5847fc7d3ccd9f1214d08284">ast_conf_user::userflags</a></div><div class="ttdeci">struct ast_flags64 userflags</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00898">app_meetme.c:898</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aa319bcde509ca0b265674afd864ec081"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aa319bcde509ca0b265674afd864ec081">sla_ringing_trunk_destroy</a></div><div class="ttdeci">static void sla_ringing_trunk_destroy(struct sla_ringing_trunk *ringing_trunk)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07205">app_meetme.c:7205</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af71d7de559e9731a4d8e57bafa341486"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af71d7de559e9731a4d8e57bafa341486">DEFAULT_AUDIO_BUFFERS</a></div><div class="ttdeci">#define DEFAULT_AUDIO_BUFFERS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00647">app_meetme.c:647</a></div></div>
<div class="ttc" id="strings_8h_html_a387a69b3871ca31061566a73f45d20f4"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a387a69b3871ca31061566a73f45d20f4">ast_true</a></div><div class="ttdeci">int attribute_pure ast_true(const char *val)</div><div class="ttdoc">Make sure something is true. Determine if a string containing a boolean value is &quot;true&quot;. This function checks to see whether a string passed to it is an indication of an &quot;true&quot; value. It checks to see if the string is &quot;yes&quot;, &quot;true&quot;, &quot;y&quot;, &quot;t&quot;, &quot;on&quot; or &quot;1&quot;. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01951">main/utils.c:1951</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a98e65764bc963016c394bcc1bad6540b">AST_FRAME_DTMF_END</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00099">include/asterisk/frame.h:99</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a00c9a846446d62f12898047d3d34cc75a4822569aa984228bec67e07f5b9862a5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a4822569aa984228bec67e07f5b9862a5">SLA_TRUNK_STATE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00925">app_meetme.c:925</a></div></div>
<div class="ttc" id="structast__str_html"><div class="ttname"><a href="../../dd/da2/structast__str.html">ast_str</a></div><div class="ttdoc">The descriptor of a dynamic string XXX storage will be optimized later if needed We use the ts field ...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00584">strings.h:584</a></div></div>
<div class="ttc" id="structast__format__cap_html"><div class="ttname"><a href="../../d8/d69/structast__format__cap.html">ast_format_cap</a></div><div class="ttdoc">Format capabilities structure, holds formats + preference order + etc. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/dc9/format__cap_8c_source.html#l00054">format_cap.c:54</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a9a7384427e576a2fc12a20d258fe29a8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a9a7384427e576a2fc12a20d258fe29a8">sla_trunk_exec</a></div><div class="ttdeci">static int sla_trunk_exec(struct ast_channel *chan, const char *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07228">app_meetme.c:7228</a></div></div>
<div class="ttc" id="pbx_8h_html_a3414b82af9b33fe907c9377c5c73c453"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a3414b82af9b33fe907c9377c5c73c453">AST_MAX_APP</a></div><div class="ttdeci">#define AST_MAX_APP</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l00040">pbx.h:40</a></div></div>
<div class="ttc" id="structast__trans__pvt_html"><div class="ttname"><a href="../../d1/d47/structast__trans__pvt.html">ast_trans_pvt</a></div><div class="ttdoc">Default structure for translators, with the basic fields and buffers, all allocated as part of the sa...</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d39/translate_8h_source.html#l00213">translate.h:213</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a3e9274bcddca58b613f4e676b9943c03"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a3e9274bcddca58b613f4e676b9943c03">AST_OPTION_RXGAIN</a></div><div class="ttdeci">#define AST_OPTION_RXGAIN</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00453">include/asterisk/frame.h:453</a></div></div>
<div class="ttc" id="structsla__trunk__ref_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d5/d5a/structsla__trunk__ref.html#a84d1435c5b8d387806714ea7079304b7">sla_trunk_ref::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01019">app_meetme.c:1019</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae3b7a24962a5f3c18133dbfb7170d9b3"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae3b7a24962a5f3c18133dbfb7170d9b3">meetme_menu_admin_extended</a></div><div class="ttdeci">static void meetme_menu_admin_extended(enum menu_modes *menu_mode, int *dtmf, struct ast_conference *conf, struct ast_flags64 *confflags, struct ast_channel *chan, struct ast_conf_user *user, char *recordingtmp, int recordingtmp_size, struct ast_format_cap *cap_slin)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02966">app_meetme.c:2966</a></div></div>
<div class="ttc" id="include_2asterisk_2format__compatibility_8h_html"><div class="ttname"><a href="../../d1/d18/include_2asterisk_2format__compatibility_8h.html">format_compatibility.h</a></div><div class="ttdoc">Media Format Bitfield Compatibility API. </div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a7549377df87038be737e8cae73acaa9d"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a7549377df87038be737e8cae73acaa9d">AST_APP_OPTION_ARG</a></div><div class="ttdeci">#define AST_APP_OPTION_ARG(option, flagno, argno)</div><div class="ttdoc">Declares an application option that accepts an argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01413">include/asterisk/app.h:1413</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea23aa227468c09b5ebd0fb01b4c895190">AST_DEVICE_INUSE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00055">devicestate.h:55</a></div></div>
<div class="ttc" id="structsla__trunk_html_a9f0acfbb10f035a4ad88dc2c8ad41030"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#a9f0acfbb10f035a4ad88dc2c8ad41030">sla_trunk::hold_access</a></div><div class="ttdeci">unsigned int hold_access</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01001">app_meetme.c:1001</a></div></div>
<div class="ttc" id="astobj2_8h_html_a64f51be4bee35c38dbe59b0a788b5ce8"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a64f51be4bee35c38dbe59b0a788b5ce8">ao2_unlink</a></div><div class="ttdeci">#define ao2_unlink(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01598">astobj2.h:1598</a></div></div>
<div class="ttc" id="cli_8h_html_a0873456096960dab21fff0ce68c95acb"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a0873456096960dab21fff0ce68c95acb">CLI_SHOWUSAGE</a></div><div class="ttdeci">#define CLI_SHOWUSAGE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00045">cli.h:45</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html">stasis_message_router.h</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4acebf32e64aaad2bef9c62ae75ee816b7"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4acebf32e64aaad2bef9c62ae75ee816b7">CONFFLAG_NOONLYPERSON</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00728">app_meetme.c:728</a></div></div>
<div class="ttc" id="stasis_8h_html_af6081f17431b81bc1a010b680517491d"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#af6081f17431b81bc1a010b680517491d">stasis_message_data</a></div><div class="ttdeci">void * stasis_message_data(const struct stasis_message *msg)</div><div class="ttdoc">Get the data contained in a message. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db9/stasis__message_8c_source.html#l00195">stasis_message.c:195</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af3a7249af0dc84e61384327caa331213"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af3a7249af0dc84e61384327caa331213">DATE_FORMAT</a></div><div class="ttdeci">#define DATE_FORMAT</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00650">app_meetme.c:650</a></div></div>
<div class="ttc" id="app__meetme_8c_html_abd38bfceed1453b41ba174892fa42d2f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#abd38bfceed1453b41ba174892fa42d2f">STASIS_MESSAGE_TYPE_DEFN_LOCAL</a></div><div class="ttdeci">STASIS_MESSAGE_TYPE_DEFN_LOCAL(meetme_join_type)</div></div>
<div class="ttc" id="chan__phone_8c_html_a4e40373706bcf5cdb9409dac3166d280"><div class="ttname"><a href="../../da/dde/chan__phone_8c.html#a4e40373706bcf5cdb9409dac3166d280">monitor</a></div><div class="ttdeci">static unsigned int monitor</div><div class="ttdef"><b>Definition:</b> <a href="../../da/dde/chan__phone_8c_source.html#l00116">chan_phone.c:116</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ad1982509765f4870f1f63412a53ea668"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ad1982509765f4870f1f63412a53ea668">reload</a></div><div class="ttdeci">static int reload(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l08072">app_meetme.c:8072</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af1c1448ffe2b0e610323ea6725f412c0"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af1c1448ffe2b0e610323ea6725f412c0">sla_station_hangup</a></div><div class="ttdeci">sla_station_hangup</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01071">app_meetme.c:1071</a></div></div>
<div class="ttc" id="structast__conference_html_af06bdf9e29424094b6e9eddc4d9f9f62"><div class="ttname"><a href="../../d8/d44/structast__conference.html#af06bdf9e29424094b6e9eddc4d9f9f62">ast_conference::recording</a></div><div class="ttdeci">enum recording_state recording</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00856">app_meetme.c:856</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af6164d0f0e38dc886e4bce54fd73120f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af6164d0f0e38dc886e4bce54fd73120f">user_talk_volup_cb</a></div><div class="ttdeci">static int user_talk_volup_cb(void *obj, void *unused, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05189">app_meetme.c:5189</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847ae16711939ebe81a08ebcbd8d7d0aab3d"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847ae16711939ebe81a08ebcbd8d7d0aab3d">AST_DIAL_RESULT_PROCEEDING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00060">dial.h:60</a></div></div>
<div class="ttc" id="namespacesip__to__pjsip_html_ab82f408a83ecba10ea39afd8abfd371e"><div class="ttname"><a href="../../dd/d17/namespacesip__to__pjsip.html#ab82f408a83ecba10ea39afd8abfd371e">sip_to_pjsip.info</a></div><div class="ttdeci">def info(msg)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d6f/sip__to__pjsip_8py_source.html#l01313">sip_to_pjsip.py:1313</a></div></div>
<div class="ttc" id="func__strings_8c_html_af24e73aaf92f3000fda15d285e66df24"><div class="ttname"><a href="../../d9/d1e/func__strings_8c.html#af24e73aaf92f3000fda15d285e66df24">len</a></div><div class="ttdeci">static int len(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t buflen)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d1e/func__strings_8c_source.html#l01344">func_strings.c:1344</a></div></div>
<div class="ttc" id="main_2stdtime_2private_8h_html_ad65a8842cc674e3ddf69355898c0ecbf"><div class="ttname"><a href="../../d1/d6e/main_2stdtime_2private_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a></div><div class="ttdeci">int errno</div></div>
<div class="ttc" id="app__meetme_8c_html_a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a749b58c2aae2b86a1aa84e74d8c3045f">SLA_TRUNK_STATE_UP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00926">app_meetme.c:926</a></div></div>
<div class="ttc" id="time_8h_html_a97e1bb8fbd7a103212789e87e7ed6073"><div class="ttname"><a href="../../de/df7/time_8h.html#a97e1bb8fbd7a103212789e87e7ed6073">ast_tvadd</a></div><div class="ttdeci">struct timeval ast_tvadd(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the sum of two timevals a + b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02283">extconf.c:2283</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a675ebd613588a960e37bd6fa2477f30f"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a675ebd613588a960e37bd6fa2477f30f">ast_play_and_record</a></div><div class="ttdeci">int ast_play_and_record(struct ast_channel *chan, const char *playfile, const char *recordfile, int maxtime_sec, const char *fmt, int *duration, int *sound_duration, int silencethreshold, int maxsilence_ms, const char *path)</div><div class="ttdoc">Record a file based on input from a channel. Use default accept and cancel DTMF. This function will p...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l01997">main/app.c:1997</a></div></div>
<div class="ttc" id="dial_8h_html_a2bd4d9ffd57e401b004cc131bd2ad497"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2bd4d9ffd57e401b004cc131bd2ad497">ast_dial_append</a></div><div class="ttdeci">int ast_dial_append(struct ast_dial *dial, const char *tech, const char *device, const struct ast_assigned_ids *assignedids)</div><div class="ttdoc">Append a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00282">dial.c:282</a></div></div>
<div class="ttc" id="file_8h_html_a964f8ef393c07609d7b9e02937faed52"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a964f8ef393c07609d7b9e02937faed52">ast_writefile</a></div><div class="ttdeci">struct ast_filestream * ast_writefile(const char *filename, const char *type, const char *comment, int flags, int check, mode_t mode)</div><div class="ttdoc">Starts writing a file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01361">file.c:1361</a></div></div>
<div class="ttc" id="structast__conf__user_html_ae5ad22d81786b1fc2a541ad84f1cd860"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#ae5ad22d81786b1fc2a541ad84f1cd860">ast_conf_user::kicktime</a></div><div class="ttdeci">time_t kicktime</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00906">app_meetme.c:906</a></div></div>
<div class="ttc" id="musiconhold_8h_html_a2acec01f2fddd8ca494d874003815cf7"><div class="ttname"><a href="../../dc/d07/musiconhold_8h.html#a2acec01f2fddd8ca494d874003815cf7">ast_moh_start</a></div><div class="ttdeci">int ast_moh_start(struct ast_channel *chan, const char *mclass, const char *interpclass)</div><div class="ttdoc">Turn on music on hold on a given channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l07866">channel.c:7866</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a31b7cf161faa4ea68f99829392d4b2fd"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a31b7cf161faa4ea68f99829392d4b2fd">cli_meetme</a></div><div class="ttdeci">static struct ast_cli_entry cli_meetme[]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02290">app_meetme.c:2290</a></div></div>
<div class="ttc" id="structannounce__listitem_html_a13694b21aad2389727cbb9dac418fef6"><div class="ttname"><a href="../../dd/d4b/structannounce__listitem.html#a13694b21aad2389727cbb9dac418fef6">announce_listitem::namerecloc</a></div><div class="ttdeci">char namerecloc[PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00833">app_meetme.c:833</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a8187d6c217b26da3f3dccc3ce846325f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a8187d6c217b26da3f3dccc3ce846325f">set_listen_volume</a></div><div class="ttdeci">static int set_listen_volume(struct ast_conf_user *user, int volume)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01447">app_meetme.c:1447</a></div></div>
<div class="ttc" id="app__meetme_8c_html_acc07ba96fffd24d21a941036c4e867a4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#acc07ba96fffd24d21a941036c4e867a4">load_config_meetme</a></div><div class="ttdeci">static void load_config_meetme(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05788">app_meetme.c:5788</a></div></div>
<div class="ttc" id="astobj2_8h_html_a17990ea630db7dbd1252ef0132133a2b"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a17990ea630db7dbd1252ef0132133a2b">ao2_iterator_next</a></div><div class="ttdeci">#define ao2_iterator_next(iter)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01933">astobj2.h:1933</a></div></div>
<div class="ttc" id="lock_8h_html_a1ea2f4040a736cddbecea48b30ffedfd"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a1ea2f4040a736cddbecea48b30ffedfd">ast_cond_destroy</a></div><div class="ttdeci">#define ast_cond_destroy(cond)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00200">lock.h:200</a></div></div>
<div class="ttc" id="astobj2_8h_html_ae0422b60d8e25b6962b2d61ae4ddf724"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ae0422b60d8e25b6962b2d61ae4ddf724">ao2_alloc</a></div><div class="ttdeci">#define ao2_alloc(data_size, destructor_fn)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l00411">astobj2.h:411</a></div></div>
<div class="ttc" id="structast__conference_html_a32ad66f5110971b6c12b3e7e5d700ed6"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a32ad66f5110971b6c12b3e7e5d700ed6">ast_conference::announcethread</a></div><div class="ttdeci">pthread_t announcethread</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00878">app_meetme.c:878</a></div></div>
<div class="ttc" id="logger_8h_html_ad89ee324d180cdcd7defcc709ff9ca42"><div class="ttname"><a href="../../d1/d8c/logger_8h.html#ad89ee324d180cdcd7defcc709ff9ca42">LOG_NOTICE</a></div><div class="ttdeci">#define LOG_NOTICE</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d8c/logger_8h_source.html#l00263">logger.h:263</a></div></div>
<div class="ttc" id="structdial__trunk__args_html"><div class="ttname"><a href="../../d3/db7/structdial__trunk__args.html">dial_trunk_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06845">app_meetme.c:6845</a></div></div>
<div class="ttc" id="structvolume_html_a3450f7500f843178b4517d0e7ef2b537"><div class="ttname"><a href="../../da/d4c/structvolume.html#a3450f7500f843178b4517d0e7ef2b537">volume::desired</a></div><div class="ttdeci">int desired</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00891">app_meetme.c:891</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1590866b16d9cf85be855116bec22712"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1590866b16d9cf85be855116bec22712">rt_log_members</a></div><div class="ttdeci">static int rt_log_members</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00817">app_meetme.c:817</a></div></div>
<div class="ttc" id="pbx_8h_html_a8f7166f50cb9642179c9b321b8143f55"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8f7166f50cb9642179c9b321b8143f55">ast_goto_if_exists</a></div><div class="ttdeci">int ast_goto_if_exists(struct ast_channel *chan, const char *context, const char *exten, int priority)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l08793">pbx.c:8793</a></div></div>
<div class="ttc" id="group__StasisTopicsAndMessages_html_gae23eb2907ce7b59817fc0e47f09abf42"><div class="ttname"><a href="../../df/deb/group__StasisTopicsAndMessages.html#gae23eb2907ce7b59817fc0e47f09abf42">ast_channel_blob_create</a></div><div class="ttdeci">struct stasis_message * ast_channel_blob_create(struct ast_channel *chan, struct stasis_message_type *type, struct ast_json *blob)</div><div class="ttdoc">Creates a ast_channel_blob message. </div><div class="ttdef"><b>Definition:</b> <a href="../../dc/d2b/stasis__channels_8c_source.html#l00788">stasis_channels.c:788</a></div></div>
<div class="ttc" id="dial_8h_html_a83d13a00643c2ad0149758507df60466"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a83d13a00643c2ad0149758507df60466">ast_dial_answered</a></div><div class="ttdeci">struct ast_channel * ast_dial_answered(struct ast_dial *dial)</div><div class="ttdoc">Return channel that answered. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00981">dial.c:981</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a0d78ab95e54db8c72a64038cfefb5161"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a0d78ab95e54db8c72a64038cfefb5161">strcasestr</a></div><div class="ttdeci">char * strcasestr(const char *, const char *)</div></div>
<div class="ttc" id="app__meetme_8c_html_a62fd4c125f1aadafcee981304a59261aa23fb375274d3c96370d1a64e418f6a40"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa23fb375274d3c96370d1a64e418f6a40">SLA_EVENT_HOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01040">app_meetme.c:1040</a></div></div>
<div class="ttc" id="structast__config_html"><div class="ttname"><a href="../../dd/d18/structast__config.html">ast_config</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00249">main/config.c:249</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a3008b2f4f236b72d8bcfb80e346324ef"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a3008b2f4f236b72d8bcfb80e346324ef">AST_LIST_TRAVERSE</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE(head, var, field)</div><div class="ttdoc">Loops over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00490">linkedlists.h:490</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a5e80b8d035834753764ad2be58e4bb07"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a5e80b8d035834753764ad2be58e4bb07">sla_queue_event_conf</a></div><div class="ttdeci">static void sla_queue_event_conf(enum sla_event_type type, struct ast_channel *chan, struct ast_conference *conf)</div><div class="ttdoc">Queue a SLA event from the conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02462">app_meetme.c:2462</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2e3830bbe198ca99204da3f7aeda07b4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2e3830bbe198ca99204da3f7aeda07b4">sla_station_is_marked</a></div><div class="ttdeci">static int sla_station_is_marked(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07822">app_meetme.c:7822</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a67508a613c8f337732e35d9367b43ae7"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a67508a613c8f337732e35d9367b43ae7">AST_LIST_ENTRY</a></div><div class="ttdeci">#define AST_LIST_ENTRY(type)</div><div class="ttdoc">Declare a forward link structure inside a list entry. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00409">linkedlists.h:409</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa2ded2af046bb513f77056c27c083307"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa2ded2af046bb513f77056c27c083307">AST_LIST_INSERT_HEAD</a></div><div class="ttdeci">#define AST_LIST_INSERT_HEAD(head, elm, field)</div><div class="ttdoc">Inserts a list entry at the head of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00710">linkedlists.h:710</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a83128aa5fb371ea385d8bc0f6186e20f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a83128aa5fb371ea385d8bc0f6186e20f">OPTIONS_LEN</a></div><div class="ttdeci">#define OPTIONS_LEN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00821">app_meetme.c:821</a></div></div>
<div class="ttc" id="channel_8h_html_af476c537b29be3f29240489032f9db39"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af476c537b29be3f29240489032f9db39">ast_channel_unlock</a></div><div class="ttdeci">#define ast_channel_unlock(chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l02946">channel.h:2946</a></div></div>
<div class="ttc" id="cli_8h_html_ae47751901c430ebb833e59291a5e0b3f"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ae47751901c430ebb833e59291a5e0b3f">CLI_FAILURE</a></div><div class="ttdeci">#define CLI_FAILURE</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00046">cli.h:46</a></div></div>
<div class="ttc" id="chan__mgcp_8c_html_a2e006acff60d9b3d65d7d60f975d6747"><div class="ttname"><a href="../../d0/dd6/chan__mgcp_8c.html#a2e006acff60d9b3d65d7d60f975d6747">parse</a></div><div class="ttdeci">static void parse(struct mgcp_request *req)</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/dd6/chan__mgcp_8c_source.html#l01872">chan_mgcp.c:1872</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adca22e29e840747e49e804c977f67386"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adca22e29e840747e49e804c977f67386">trunkstate2str</a></div><div class="ttdeci">static const char * trunkstate2str(enum sla_trunk_state state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02193">app_meetme.c:2193</a></div></div>
<div class="ttc" id="stasis_8h_html_ac43d0a33d111e9f34b441b285c166cfc"><div class="ttname"><a href="../../dd/d79/stasis_8h.html#ac43d0a33d111e9f34b441b285c166cfc">stasis_publish</a></div><div class="ttdeci">void stasis_publish(struct stasis_topic *topic, struct stasis_message *message)</div><div class="ttdoc">Publish a message to a topic&amp;#39;s subscribers. </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/df4/stasis_8c_source.html#l01511">stasis.c:1511</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a272ffb0f64aec9b1792174c33042cb75"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a272ffb0f64aec9b1792174c33042cb75">sla_check_device</a></div><div class="ttdeci">static int sla_check_device(const char *device)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07446">app_meetme.c:7446</a></div></div>
<div class="ttc" id="channel_8h_html_abcf1aea85b924e9cd605040b86241e2a"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abcf1aea85b924e9cd605040b86241e2a">AST_MAX_CONTEXT</a></div><div class="ttdeci">#define AST_MAX_CONTEXT</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00136">channel.h:136</a></div></div>
<div class="ttc" id="structsla__trunk_html_a1f1a04b798d6b529cac3ee205c5e7961"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#a1f1a04b798d6b529cac3ee205c5e7961">sla_trunk::ring_timeout</a></div><div class="ttdeci">unsigned int ring_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00995">app_meetme.c:995</a></div></div>
<div class="ttc" id="structast__conf__user_html_a13694b21aad2389727cbb9dac418fef6"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a13694b21aad2389727cbb9dac418fef6">ast_conf_user::namerecloc</a></div><div class="ttdeci">char namerecloc[PATH_MAX]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00904">app_meetme.c:904</a></div></div>
<div class="ttc" id="cdr__mysql_8c_html_a0980a105ccb863d8008eb6201a51da52"><div class="ttname"><a href="../../d0/d29/cdr__mysql_8c.html#a0980a105ccb863d8008eb6201a51da52">name</a></div><div class="ttdeci">static const char name[]</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d29/cdr__mysql_8c_source.html#l00074">cdr_mysql.c:74</a></div></div>
<div class="ttc" id="astmm_8h_html_a402072d6789f6ed9e3a81da27504127e"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#a402072d6789f6ed9e3a81da27504127e">ast_free</a></div><div class="ttdeci">#define ast_free(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00182">astmm.h:182</a></div></div>
<div class="ttc" id="structast__cli__entry_html_ade9cba72805fe52685a1deea307a8e82"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#ade9cba72805fe52685a1deea307a8e82">ast_cli_entry::command</a></div><div class="ttdeci">char * command</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00186">cli.h:186</a></div></div>
<div class="ttc" id="astmm_8h_html_ae0cd4c5524b01287ab19cbe233d9cebb"><div class="ttname"><a href="../../d8/d8a/astmm_8h.html#ae0cd4c5524b01287ab19cbe233d9cebb">ast_calloc</a></div><div class="ttdeci">#define ast_calloc(num, len)</div><div class="ttdoc">A wrapper for calloc() </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d8a/astmm_8h_source.html#l00204">astmm.h:204</a></div></div>
<div class="ttc" id="utils_8h_html_a4781fd54a4ca8c7f0f8a32a6cce503c0"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a4781fd54a4ca8c7f0f8a32a6cce503c0">ast_pthread_create</a></div><div class="ttdeci">#define ast_pthread_create(a, b, c, d)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00559">utils.h:559</a></div></div>
<div class="ttc" id="dial_8h_html_aff55dbc56bc54126828f78a47d1f2282"><div class="ttname"><a href="../../df/dcf/dial_8h.html#aff55dbc56bc54126828f78a47d1f2282">ast_dial_create</a></div><div class="ttdeci">struct ast_dial * ast_dial_create(void)</div><div class="ttdoc">New dialing structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/dial_8c_source.html#l00225">dial.c:225</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a96a58e29e8dbf2b5bdeb775cba46556ea22d5403ad37aee04f7beb26b97518b33"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a96a58e29e8dbf2b5bdeb775cba46556ea22d5403ad37aee04f7beb26b97518b33">OPT_ARG_DURATION_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00758">app_meetme.c:758</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a453f4a2b34ad132124a1a643e5ac11d3">CONFFLAG_MARKEDUSER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00712">app_meetme.c:712</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a8c1f23aabf6a93f20eb6b11fe8e2b857"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8c1f23aabf6a93f20eb6b11fe8e2b857">CONFFLAG_STARMENU</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00693">app_meetme.c:693</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a8e303966dc2d93e3c9ddeea3f4258f12"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a8e303966dc2d93e3c9ddeea3f4258f12">app3</a></div><div class="ttdeci">static const char *const app3</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00804">app_meetme.c:804</a></div></div>
<div class="ttc" id="structannounce__listitem_html_adf416dc058363e2fd5750c77e2d78bee"><div class="ttname"><a href="../../dd/d4b/structannounce__listitem.html#adf416dc058363e2fd5750c77e2d78bee">announce_listitem::language</a></div><div class="ttdeci">char language[MAX_LANGUAGE]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00834">app_meetme.c:834</a></div></div>
<div class="ttc" id="structast__conf__user_html_a1440ae440a844aa11118c561daa182bb"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a1440ae440a844aa11118c561daa182bb">ast_conf_user::talk</a></div><div class="ttdeci">struct volume talk</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00913">app_meetme.c:913</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ac5a6cd9121b3a70a3b1d4f04da316913"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ac5a6cd9121b3a70a3b1d4f04da316913">MC_HEADER_FORMAT</a></div><div class="ttdeci">#define MC_HEADER_FORMAT</div></div>
<div class="ttc" id="file_8h_html_ab53bd2c3c55d509790c7f7620aac6373"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab53bd2c3c55d509790c7f7620aac6373">ast_closestream</a></div><div class="ttdeci">int ast_closestream(struct ast_filestream *f)</div><div class="ttdoc">Closes a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01068">file.c:1068</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af029f88d6b217cd9194b466ef86dc398"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af029f88d6b217cd9194b466ef86dc398">sla_station_cmp</a></div><div class="ttdeci">static int sla_station_cmp(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07413">app_meetme.c:7413</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ada5e10a4d240af38d13e13d576b66f4a"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ada5e10a4d240af38d13e13d576b66f4a">conf_queue_dtmf</a></div><div class="ttdeci">static void conf_queue_dtmf(const struct ast_conference *conf, const struct ast_conf_user *sender, struct ast_frame *f)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02400">app_meetme.c:2400</a></div></div>
<div class="ttc" id="channel_8h_html_a29557c4823f5e9c02519a01daf6a289c"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a29557c4823f5e9c02519a01daf6a289c">ast_hangup</a></div><div class="ttdeci">void ast_hangup(struct ast_channel *chan)</div><div class="ttdoc">Hang up a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02548">channel.c:2548</a></div></div>
<div class="ttc" id="app__meetme_8c_html_acf5c7d460a31834ce02e286d133db0d7"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#acf5c7d460a31834ce02e286d133db0d7">CONFFLAG_NO_AUDIO_UNTIL_UP</a></div><div class="ttdeci">#define CONFFLAG_NO_AUDIO_UNTIL_UP</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00747">app_meetme.c:747</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3ad3163600ec26815e26092d9eb3e4b0b5">RQ_UINTEGER3</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00071">include/asterisk/config.h:71</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1c33b49a824e1d37dc3dc94b13d8830d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1c33b49a824e1d37dc3dc94b13d8830d">slatrunk_app</a></div><div class="ttdeci">static const char *const slatrunk_app</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00807">app_meetme.c:807</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a8626cc2dc0a4e9e97be85ecd0ebaef15"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a8626cc2dc0a4e9e97be85ecd0ebaef15">CONFFLAG_DURATION_STOP</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00740">app_meetme.c:740</a></div></div>
<div class="ttc" id="structast__frame_html_ac92588540e8c1d014a08cd8a45462b19"><div class="ttname"><a href="../../d0/d99/structast__frame.html#ac92588540e8c1d014a08cd8a45462b19">ast_frame::flags</a></div><div class="ttdeci">unsigned int flags</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00189">include/asterisk/frame.h:189</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a5f272b0802dbeb3b9592c16839e4a134"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a5f272b0802dbeb3b9592c16839e4a134">meetme_show_cmd</a></div><div class="ttdeci">static char * meetme_show_cmd(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01853">app_meetme.c:1853</a></div></div>
<div class="ttc" id="channel_8h_html_a79c413d51b7135404d5cacf811649a61"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a79c413d51b7135404d5cacf811649a61">ast_write</a></div><div class="ttdeci">int ast_write(struct ast_channel *chan, struct ast_frame *frame)</div><div class="ttdoc">Write a frame to a channel This function writes the given frame to the indicated channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l05189">channel.c:5189</a></div></div>
<div class="ttc" id="structrun__station__args_html_a45860a157e8d238e312118ddd5771454"><div class="ttname"><a href="../../d8/d26/structrun__station__args.html#a45860a157e8d238e312118ddd5771454">run_station_args::cond</a></div><div class="ttdeci">ast_cond_t * cond</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06059">app_meetme.c:6059</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847a33b279a6d9fd2024de7a1f3ccadda2ce"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a33b279a6d9fd2024de7a1f3ccadda2ce">AST_DIAL_RESULT_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00055">dial.h:55</a></div></div>
<div class="ttc" id="structast__cli__args_html_adc1f34651f7bbfa3ba5af27db5f53817"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#adc1f34651f7bbfa3ba5af27db5f53817">ast_cli_args::word</a></div><div class="ttdeci">const char * word</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00163">cli.h:163</a></div></div>
<div class="ttc" id="enter_8h_html"><div class="ttname"><a href="../../d0/d00/enter_8h.html">enter.h</a></div></div>
<div class="ttc" id="structconfs_html"><div class="ttname"><a href="../../df/dd2/structconfs.html">confs</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00886">app_meetme.c:886</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4aba8445fa67502f63291f122cb214cb83">CONFFLAG_KICK_CONTINUE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00739">app_meetme.c:739</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae0a2b76878a215d1ac6e738b85b4b9d8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae0a2b76878a215d1ac6e738b85b4b9d8">extendby</a></div><div class="ttdeci">static int extendby</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00814">app_meetme.c:814</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847a077aa090d089e32265755c7ec0f1dac2"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a077aa090d089e32265755c7ec0f1dac2">AST_DIAL_RESULT_FAILED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00056">dial.h:56</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a325a89f891e02c6443c550bbe243e764">CONFFLAG_QUIET</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00697">app_meetme.c:697</a></div></div>
<div class="ttc" id="paths_8h_html_a95c5b4ffe620dc96d1ea9311b35c4d4f"><div class="ttname"><a href="../../dd/df2/paths_8h.html#a95c5b4ffe620dc96d1ea9311b35c4d4f">ast_config_AST_SPOOL_DIR</a></div><div class="ttdeci">const char * ast_config_AST_SPOOL_DIR</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dc5/options_8c_source.html#l00154">options.c:154</a></div></div>
<div class="ttc" id="localtime_8h_html_aa8e63928b14a347bd3973d680b885f93"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#aa8e63928b14a347bd3973d680b885f93">ast_strftime</a></div><div class="ttdeci">int ast_strftime(char *buf, size_t len, const char *format, const struct ast_tm *tm)</div><div class="ttdoc">Special version of strftime(3) that handles fractions of a second. Takes the same arguments as strfti...</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02524">localtime.c:2524</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a3683b746ab070a6455934b5d24dbd779">AST_DEVSTATE_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00070">devicestate.h:70</a></div></div>
<div class="ttc" id="astobj2_8h_html_a911e0703891a9a7aaf73978152092586"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a911e0703891a9a7aaf73978152092586">ao2_find</a></div><div class="ttdeci">#define ao2_find(container, arg, flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01756">astobj2.h:1756</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a434e3c9758615b337ac4ab431538e60e"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a434e3c9758615b337ac4ab431538e60e">CONFFLAG_OPTIMIZETALKER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00725">app_meetme.c:725</a></div></div>
<div class="ttc" id="structsla__trunk_html_a2ccd06fb5f2eeea9c3d1798c67d271e6"><div class="ttname"><a href="../../d4/dbe/structsla__trunk.html#a2ccd06fb5f2eeea9c3d1798c67d271e6">sla_trunk::hold_stations</a></div><div class="ttdeci">unsigned int hold_stations</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00993">app_meetme.c:993</a></div></div>
<div class="ttc" id="structast__conference_html_a17af3481b5a7c8bf7d4bbdfef919fdef"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a17af3481b5a7c8bf7d4bbdfef919fdef">ast_conference::usercontainer</a></div><div class="ttdeci">struct ao2_container * usercontainer</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00875">app_meetme.c:875</a></div></div>
<div class="ttc" id="structast__conference_html_afa3f2aa238dd1090b0ab5e87b9188f2a"><div class="ttname"><a href="../../d8/d44/structast__conference.html#afa3f2aa238dd1090b0ab5e87b9188f2a">ast_conference::adminopts</a></div><div class="ttdeci">const char * adminopts</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00870">app_meetme.c:870</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_af3f76858d4dd513e59dbe5e67bc46220"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#af3f76858d4dd513e59dbe5e67bc46220">ast_app_getdata</a></div><div class="ttdeci">int ast_app_getdata(struct ast_channel *c, const char *prompt, char *s, int maxlen, int timeout)</div><div class="ttdoc">Plays a stream and gets DTMF data from a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d83/main_2app_8c_source.html#l00197">main/app.c:197</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a1a461c5e737ed6ed7c8cb0f78557a6fd">AST_CONTROL_PROGRESS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00291">include/asterisk/frame.h:291</a></div></div>
<div class="ttc" id="structstate_html"><div class="ttname"><a href="../../d4/d88/structstate.html">state</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l00158">localtime.c:158</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1ac81200b04fc992816d6ca37a89a851"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1ac81200b04fc992816d6ca37a89a851">sla_trunk_is_marked</a></div><div class="ttdeci">static int sla_trunk_is_marked(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07794">app_meetme.c:7794</a></div></div>
<div class="ttc" id="structast__conf__user_html_a12f01daf47a1827d4ae33b345da7d46b"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a12f01daf47a1827d4ae33b345da7d46b">ast_conf_user::jointime</a></div><div class="ttdeci">time_t jointime</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00905">app_meetme.c:905</a></div></div>
<div class="ttc" id="structsla__station_html"><div class="ttname"><a href="../../dd/d95/structsla__station.html">sla_station</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00942">app_meetme.c:942</a></div></div>
<div class="ttc" id="structuser_html"><div class="ttname"><a href="../../d8/dbc/structuser.html">user</a></div><div class="ttdoc">structure to hold users read from users.conf </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/de9/res__phoneprov_8c_source.html#l00312">res_phoneprov.c:312</a></div></div>
<div class="ttc" id="structast__flags_html"><div class="ttname"><a href="../../dc/dac/structast__flags.html">ast_flags</a></div><div class="ttdoc">Structure used to handle boolean flags. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00199">utils.h:199</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a84f96d304b9dcffc5d92ed02f4df9ad8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a84f96d304b9dcffc5d92ed02f4df9ad8">sla_station_release_refs</a></div><div class="ttdeci">static int sla_station_release_refs(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07368">app_meetme.c:7368</a></div></div>
<div class="ttc" id="structast__conf__user_html_a2a2bb86d404ad5f3023f5aff51137095"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a2a2bb86d404ad5f3023f5aff51137095">ast_conf_user::talking</a></div><div class="ttdeci">int talking</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00901">app_meetme.c:901</a></div></div>
<div class="ttc" id="utils_8h_html_a32495ee3248a37ac92279090110f6fbf"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a32495ee3248a37ac92279090110f6fbf">ast_clear_flag64</a></div><div class="ttdeci">#define ast_clear_flag64(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00134">utils.h:134</a></div></div>
<div class="ttc" id="app__meetme_8c_html_adca456136914b6d97720cd49b0923ffe"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#adca456136914b6d97720cd49b0923ffe">sla_hangup_stations</a></div><div class="ttdeci">static void sla_hangup_stations(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06521">app_meetme.c:6521</a></div></div>
<div class="ttc" id="app__meetme_8c_html_accb3d6f2fb803431e6ae9b036b850cc2"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#accb3d6f2fb803431e6ae9b036b850cc2">sla_trunk_mark</a></div><div class="ttdeci">static int sla_trunk_mark(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07758">app_meetme.c:7758</a></div></div>
<div class="ttc" id="structsla__ringing__station_html_a0569f66b3f952276c1a8ec5f2ffd5466"><div class="ttname"><a href="../../dc/d5b/structsla__ringing__station.html#a0569f66b3f952276c1a8ec5f2ffd5466">sla_ringing_station::station</a></div><div class="ttdeci">struct sla_station * station</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01078">app_meetme.c:1078</a></div></div>
<div class="ttc" id="structsla__event_html"><div class="ttname"><a href="../../da/d0f/structsla__event.html">sla_event</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01047">app_meetme.c:1047</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a3ed16a1a934fc63de92ab3128228402b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a3ed16a1a934fc63de92ab3128228402b">app</a></div><div class="ttdeci">static const char *const app</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00802">app_meetme.c:802</a></div></div>
<div class="ttc" id="app__meetme_8c_html_acb4e9672a8f8da6bfbe4aec38d0f6454"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#acb4e9672a8f8da6bfbe4aec38d0f6454">MEETME_DELAYDETECTTALK</a></div><div class="ttdeci">#define MEETME_DELAYDETECTTALK</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00661">app_meetme.c:661</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ac63e9e237da22b6faf3be4edfc4f5a11"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ac63e9e237da22b6faf3be4edfc4f5a11">AST_RWLIST_ENTRY</a></div><div class="ttdeci">#define AST_RWLIST_ENTRY</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00414">linkedlists.h:414</a></div></div>
<div class="ttc" id="res__phoneprov_8c_html_addaa208b0ed785225e24490fb9f28a80"><div class="ttname"><a href="../../d9/de9/res__phoneprov_8c.html#addaa208b0ed785225e24490fb9f28a80">AST_MODULE_INFO</a></div><div class="ttdeci">AST_MODULE_INFO(ASTERISK_GPL_KEY, AST_MODFLAG_GLOBAL_SYMBOLS|AST_MODFLAG_LOAD_ORDER, &quot;HTTP Phone Provisioning&quot;,.support_level=AST_MODULE_SUPPORT_EXTENDED,.load=load_module,.unload=unload_module,.reload=reload,.load_pri=AST_MODPRI_CHANNEL_DEPEND,.requires=&quot;http&quot;,)</div></div>
<div class="ttc" id="structast__conference_html_a324189adc86f9f14b363b10e4f9241f3"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a324189adc86f9f14b363b10e4f9241f3">ast_conference::attr</a></div><div class="ttdeci">pthread_attr_t attr</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00862">app_meetme.c:862</a></div></div>
<div class="ttc" id="structtest_html"><div class="ttname"><a href="../../d8/d89/structtest.html">test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../de/d7d/test__logger_8c_source.html#l00043">test_logger.c:43</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea76d91d5d654cfa3edafb2afbe3e09b46">AST_DEVICE_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00059">devicestate.h:59</a></div></div>
<div class="ttc" id="structast__cli__entry_html_aef1bd6ad890a110b466cb0e8088507a2"><div class="ttname"><a href="../../d8/d07/structast__cli__entry.html#aef1bd6ad890a110b466cb0e8088507a2">ast_cli_entry::usage</a></div><div class="ttdeci">const char * usage</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00177">cli.h:177</a></div></div>
<div class="ttc" id="structast__conf__user_html_af950158a50739005416f058684729d28"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#af950158a50739005416f058684729d28">ast_conf_user::dahdichannel</a></div><div class="ttdeci">int dahdichannel</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00902">app_meetme.c:902</a></div></div>
<div class="ttc" id="structannounce__listitem_html"><div class="ttname"><a href="../../dd/d4b/structannounce__listitem.html">announce_listitem</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00831">app_meetme.c:831</a></div></div>
<div class="ttc" id="pbx_8h_html_a6e5b90edb84d216267148dddcffe9b9a"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a6e5b90edb84d216267148dddcffe9b9a">pbx_builtin_setvar_helper</a></div><div class="ttdeci">int pbx_builtin_setvar_helper(struct ast_channel *chan, const char *name, const char *value)</div><div class="ttdoc">Add a variable to the channel variable stack, removing the most recently set value for the same name...</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d8c/pbx__variables_8c_source.html#l01071">pbx_variables.c:1071</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a8150bc2c862d46744a596001d6109ffa"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a8150bc2c862d46744a596001d6109ffa">SLA_CONFIG_FILE</a></div><div class="ttdeci">#define SLA_CONFIG_FILE</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00643">app_meetme.c:643</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_af203379aca2fd704fe8d86a9445596b6"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#af203379aca2fd704fe8d86a9445596b6">ast_null_frame</a></div><div class="ttdeci">struct ast_frame ast_null_frame</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00079">main/frame.c:79</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a8dbe3f8834ca6726019815f8a5a6e29c"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a8dbe3f8834ca6726019815f8a5a6e29c">failed_stations</a></div><div class="ttdeci">struct @35::@52 failed_stations</div></div>
<div class="ttc" id="app__meetme_8c_html_a93908b1fddcb60b4d15ee6a3cf87dac6"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a93908b1fddcb60b4d15ee6a3cf87dac6">dial_trunk</a></div><div class="ttdeci">static void * dial_trunk(void *data)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06852">app_meetme.c:6852</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2a932542fb105fccb6978ea84d0a8bc4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2a932542fb105fccb6978ea84d0a8bc4">menu_modes</a></div><div class="ttdeci">menu_modes</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02749">app_meetme.c:2749</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a39a9c6b58c7b77ef675e56d00c89e0a8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a39a9c6b58c7b77ef675e56d00c89e0a8">CONFFLAG_TALKER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00695">app_meetme.c:695</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1e79b23a6db109a316e426ce5ccf6215"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215">sla_which_trunk_refs</a></div><div class="ttdeci">sla_which_trunk_refs</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00918">app_meetme.c:918</a></div></div>
<div class="ttc" id="manager_8h_html_a0b1b4140c2836696a6950e92ab48a580"><div class="ttname"><a href="../../db/d45/manager_8h.html#a0b1b4140c2836696a6950e92ab48a580">EVENT_FLAG_REPORTING</a></div><div class="ttdeci">#define EVENT_FLAG_REPORTING</div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00080">manager.h:80</a></div></div>
<div class="ttc" id="cli_8h_html_a50989f00b32eeb2516a3803cb2ffb766"><div class="ttname"><a href="../../dc/db0/cli_8h.html#a50989f00b32eeb2516a3803cb2ffb766">CLI_SUCCESS</a></div><div class="ttdeci">#define CLI_SUCCESS</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00044">cli.h:44</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a9ff7aa27ae5f1a980bcf81f91cd6e470"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a9ff7aa27ae5f1a980bcf81f91cd6e470">ast_variable_retrieve</a></div><div class="ttdeci">const char * ast_variable_retrieve(struct ast_config *config, const char *category, const char *variable)</div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d9d/main_2config_8c_source.html#l00694">main/config.c:694</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af5bfcbf150b2be41930ad7ef51619cd1"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af5bfcbf150b2be41930ad7ef51619cd1">complete_userno</a></div><div class="ttdeci">static char * complete_userno(struct ast_conference *cnf, const char *word, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01744">app_meetme.c:1744</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1f6d3d4a6e263e27a4f665aaf5cad1b3"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1f6d3d4a6e263e27a4f665aaf5cad1b3">sla_build_trunk</a></div><div class="ttdeci">static int sla_build_trunk(struct ast_config *cfg, const char *cat)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07474">app_meetme.c:7474</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a85da35a1f1708d3792f40ddfdde12919"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a85da35a1f1708d3792f40ddfdde12919">CONFFLAG_DYNAMICPIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00720">app_meetme.c:720</a></div></div>
<div class="ttc" id="channel_8h_html_a8e5cf0a066beee895cfd9048e4abdbb3"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a8e5cf0a066beee895cfd9048e4abdbb3">ast_channel_fd</a></div><div class="ttdeci">int ast_channel_fd(const struct ast_channel *chan, int which)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l01186">channel_internal_api.c:1186</a></div></div>
<div class="ttc" id="dsp_8h_html_a3f3b67988bffb3addfbc8a4688fa466d"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#a3f3b67988bffb3addfbc8a4688fa466d">ast_dsp_silence</a></div><div class="ttdeci">int ast_dsp_silence(struct ast_dsp *dsp, struct ast_frame *f, int *totalsilence)</div><div class="ttdoc">Process the audio frame for silence. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01483">dsp.c:1483</a></div></div>
<div class="ttc" id="cli_8h_html_ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40"><div class="ttname"><a href="../../dc/db0/cli_8h.html#ab33e5350a923c3a8cedbeb496cd88ec9a76bf33139279b03ec1691f2be2d1be40">CLI_GENERATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00153">cli.h:153</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a6560afe628ae5e59ca4451ce0649ede4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a6560afe628ae5e59ca4451ce0649ede4">gain_map</a></div><div class="ttdeci">static const char gain_map[]</div><div class="ttdoc">Map &amp;#39;volume&amp;#39; levels from -5 through +5 into decibel (dB) settings for channel drivers. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01115">app_meetme.c:1115</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a62fd4c125f1aadafcee981304a59261aa204ca078e2f10cd4c3674b86415d87b7">SLA_EVENT_RINGING_TRUNK</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01044">app_meetme.c:1044</a></div></div>
<div class="ttc" id="linkedlists_8h_html_a0d1f922e093ac18824a7863fe3f5fa27"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#a0d1f922e093ac18824a7863fe3f5fa27">AST_LIST_HEAD_INIT_NOLOCK</a></div><div class="ttdeci">#define AST_LIST_HEAD_INIT_NOLOCK(head)</div><div class="ttdoc">Initializes a list head structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00680">linkedlists.h:680</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a3e7629b5f7e39f1cc8ad2e51e266f91e">AST_CONTROL_UNHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00294">include/asterisk/frame.h:294</a></div></div>
<div class="ttc" id="include_2asterisk_2compat_8h_html_a40eca58273c74a20a17f137d18ba826c"><div class="ttname"><a href="../../de/da3/include_2asterisk_2compat_8h.html#a40eca58273c74a20a17f137d18ba826c">strsep</a></div><div class="ttdeci">char * strsep(char **str, const char *delims)</div></div>
<div class="ttc" id="app__meetme_8c_html_a458e651af6690959efa2afb96be7d609a7c230d0734a626ce84da297e21241b7d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a458e651af6690959efa2afb96be7d609a7c230d0734a626ce84da297e21241b7d">SLA_TRUNK_OPT_MOH</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07216">app_meetme.c:7216</a></div></div>
<div class="ttc" id="structast__filestream_html"><div class="ttname"><a href="../../db/dbc/structast__filestream.html">ast_filestream</a></div><div class="ttdoc">This structure is allocated by file.c in one chunk, together with buf_size and desc_size bytes of mem...</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d5d/mod__format_8h_source.html#l00101">mod_format.h:101</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a6bc154143d10b63764f073b756dbdb4a">CONFFLAG_WAITMARKED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00708">app_meetme.c:708</a></div></div>
<div class="ttc" id="structrun__station__args_html_a0569f66b3f952276c1a8ec5f2ffd5466"><div class="ttname"><a href="../../d8/d26/structrun__station__args.html#a0569f66b3f952276c1a8ec5f2ffd5466">run_station_args::station</a></div><div class="ttdeci">struct sla_station * station</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06056">app_meetme.c:6056</a></div></div>
<div class="ttc" id="channel_8h_html_a60e0bcaed001e8d5ed1ba0eb2644b3cc"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a60e0bcaed001e8d5ed1ba0eb2644b3cc">ast_waitfor</a></div><div class="ttdeci">int ast_waitfor(struct ast_channel *chan, int ms)</div><div class="ttdoc">Wait for input on a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l03171">channel.c:3171</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aa062a857f2cbc03c82512074e6c68afd"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aa062a857f2cbc03c82512074e6c68afd">MAX_CONFNUM</a></div><div class="ttdeci">#define MAX_CONFNUM</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00819">app_meetme.c:819</a></div></div>
<div class="ttc" id="pbx_8h_html_a07176e8d314eb68b3b50279fafa11390"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a07176e8d314eb68b3b50279fafa11390">ast_add_extension</a></div><div class="ttdeci">int ast_add_extension(const char *context, int replace, const char *extension, int priority, const char *label, const char *callerid, const char *application, void *data, void(*datad)(void *), const char *registrar)</div><div class="ttdoc">Add and extension to an extension context. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06970">pbx.c:6970</a></div></div>
<div class="ttc" id="structast__test_html"><div class="ttname"><a href="../../d9/d79/structast__test.html">ast_test</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d8/db9/test_8c_source.html#l00065">test.c:65</a></div></div>
<div class="ttc" id="app__meetme_8c_html_afad3aadf1645aabf53eea7d30a839411"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#afad3aadf1645aabf53eea7d30a839411">MAX_SETTINGS</a></div><div class="ttdeci">#define MAX_SETTINGS</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00824">app_meetme.c:824</a></div></div>
<div class="ttc" id="structao2__iterator_html"><div class="ttname"><a href="../../d9/d97/structao2__iterator.html">ao2_iterator</a></div><div class="ttdoc">When we need to walk through a container, we use an ao2_iterator to keep track of the current positio...</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01841">astobj2.h:1841</a></div></div>
<div class="ttc" id="localtime_8h_html_ae0843e4dbbd1fed36d2676dda58e0c44"><div class="ttname"><a href="../../d5/deb/localtime_8h.html#ae0843e4dbbd1fed36d2676dda58e0c44">ast_mktime</a></div><div class="ttdeci">struct timeval ast_mktime(struct ast_tm *const tmp, const char *zone)</div><div class="ttdoc">Timezone-independent version of mktime(3). </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df8/localtime_8c_source.html#l02357">localtime.c:2357</a></div></div>
<div class="ttc" id="astobj2_8h_html_a6321ee982370c55ab3c24c72c562cbdd"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a6321ee982370c55ab3c24c72c562cbdd">ao2_cleanup</a></div><div class="ttdeci">#define ao2_cleanup(obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01958">astobj2.h:1958</a></div></div>
<div class="ttc" id="say_8h_html_a899e1f86b2d65a32eeb6e17aabfa1f12"><div class="ttname"><a href="../../db/dce/say_8h.html#a899e1f86b2d65a32eeb6e17aabfa1f12">ast_say_number</a></div><div class="ttdeci">int ast_say_number(struct ast_channel *chan, int num, const char *ints, const char *lang, const char *options)</div><div class="ttdoc">says a number </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l08337">channel.c:8337</a></div></div>
<div class="ttc" id="cli_8h_html"><div class="ttname"><a href="../../dc/db0/cli_8h.html">cli.h</a></div><div class="ttdoc">Standard Command Line Interface. </div></div>
<div class="ttc" id="json_8h_html_a53707225c3bf831e263245c6e3800676"><div class="ttname"><a href="../../d4/d05/json_8h.html#a53707225c3bf831e263245c6e3800676">ast_json_object_get</a></div><div class="ttdeci">struct ast_json * ast_json_object_get(struct ast_json *object, const char *key)</div><div class="ttdoc">Get a field from a JSON object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00397">json.c:397</a></div></div>
<div class="ttc" id="strings_8h_html_ac4040268f7b6ed77dfc49c7767626369"><div class="ttname"><a href="../../d6/d90/strings_8h.html#ac4040268f7b6ed77dfc49c7767626369">ast_copy_string</a></div><div class="ttdeci">void ast_copy_string(char *dst, const char *src, size_t size)</div><div class="ttdoc">Size-limited null-terminating string copy. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00401">strings.h:401</a></div></div>
<div class="ttc" id="strings_8h_html_a2faaa16929951bfd2802b7829a100ba2"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a2faaa16929951bfd2802b7829a100ba2">S_OR</a></div><div class="ttdeci">#define S_OR(a, b)</div><div class="ttdoc">returns the equivalent of logic or for strings: first one if not empty, otherwise second one...</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00079">strings.h:79</a></div></div>
<div class="ttc" id="structast__app_html"><div class="ttname"><a href="../../d0/da3/structast__app.html">ast_app</a></div><div class="ttdoc">ast_app: A registered application </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d16/pbx__app_8c_source.html#l00045">pbx_app.c:45</a></div></div>
<div class="ttc" id="channel_8h_html_a7ca2fda13b129a55c251b56729de285b"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a7ca2fda13b129a55c251b56729de285b">ast_channel_name</a></div><div class="ttdeci">const char * ast_channel_name(const struct ast_channel *chan)</div></div>
<div class="ttc" id="app__meetme_8c_html_acf8ac9f199da16a627957d5e9e370c2f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#acf8ac9f199da16a627957d5e9e370c2f">audio_buffers</a></div><div class="ttdeci">static int audio_buffers</div><div class="ttdoc">The number of audio buffers to be allocated on pseudo channels when in a conference. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01106">app_meetme.c:1106</a></div></div>
<div class="ttc" id="file_8h_html_a3608386b919ef0949d2858cdeb02d12e"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3608386b919ef0949d2858cdeb02d12e">ast_writestream</a></div><div class="ttdeci">int ast_writestream(struct ast_filestream *fs, struct ast_frame *f)</div><div class="ttdoc">Writes a frame to a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00209">file.c:209</a></div></div>
<div class="ttc" id="strings_8h_html_a6c3dc0bad204e9dd9890325c1c861e38"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a6c3dc0bad204e9dd9890325c1c861e38">ast_false</a></div><div class="ttdeci">int attribute_pure ast_false(const char *val)</div><div class="ttdoc">Make sure something is false. Determine if a string containing a boolean value is &quot;false&quot;...</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l01968">main/utils.c:1968</a></div></div>
<div class="ttc" id="structast__cli__args_html_a4b911d12699acbbb5a8b62355b35bae8"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html#a4b911d12699acbbb5a8b62355b35bae8">ast_cli_args::pos</a></div><div class="ttdeci">const int pos</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00164">cli.h:164</a></div></div>
<div class="ttc" id="structsla__failed__station_html"><div class="ttname"><a href="../../d5/d9c/structsla__failed__station.html">sla_failed_station</a></div><div class="ttdoc">A station that failed to be dialed. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01056">app_meetme.c:1056</a></div></div>
<div class="ttc" id="structast__conference_html_ada310e7f72b38fadd4b24d80ed3438ee"><div class="ttname"><a href="../../d8/d44/structast__conference.html#ada310e7f72b38fadd4b24d80ed3438ee">ast_conference::start</a></div><div class="ttdeci">time_t start</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00854">app_meetme.c:854</a></div></div>
<div class="ttc" id="file_8h_html_affc21cb57c6bf72a2cb7ec8a379b2137"><div class="ttname"><a href="../../d2/d4d/file_8h.html#affc21cb57c6bf72a2cb7ec8a379b2137">ast_waitstream</a></div><div class="ttdeci">int ast_waitstream(struct ast_channel *c, const char *breakon)</div><div class="ttdoc">Waits for a stream to stop or digit to be pressed. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01776">file.c:1776</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af1a48f6d67bd24c7b9f9891290e04552"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af1a48f6d67bd24c7b9f9891290e04552">acf_meetme_info</a></div><div class="ttdeci">static int acf_meetme_info(struct ast_channel *chan, const char *cmd, char *data, char *buf, size_t len)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07941">app_meetme.c:7941</a></div></div>
<div class="ttc" id="structsla__ringing__trunk_html_a39b158517ec4306ae852c2a829f45601"><div class="ttname"><a href="../../d8/dc8/structsla__ringing__trunk.html#a39b158517ec4306ae852c2a829f45601">sla_ringing_trunk::timed_out_stations</a></div><div class="ttdeci">struct sla_ringing_trunk::@47 timed_out_stations</div></div>
<div class="ttc" id="file_8h_html_ab9b8ab8e5ee34c9b4da25779255cafde"><div class="ttname"><a href="../../d2/d4d/file_8h.html#ab9b8ab8e5ee34c9b4da25779255cafde">ast_fileexists</a></div><div class="ttdeci">int ast_fileexists(const char *filename, const char *fmt, const char *preflang)</div><div class="ttdoc">Checks for the existence of a given file. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l01086">file.c:1086</a></div></div>
<div class="ttc" id="structast__conference_html_a55bf7560e1af9d7a731e41340e23c669"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a55bf7560e1af9d7a731e41340e23c669">ast_conference::pinadmin</a></div><div class="ttdeci">char pinadmin[MAX_PIN]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00866">app_meetme.c:866</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a7fcb5686ee02006353e22f8c70dbcdef"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a7fcb5686ee02006353e22f8c70dbcdef">sla_hold_str</a></div><div class="ttdeci">static const char * sla_hold_str(unsigned int hold_access)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02116">app_meetme.c:2116</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ad0f6114d9cab58a8ec3d9555cb466534"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ad0f6114d9cab58a8ec3d9555cb466534">load_config</a></div><div class="ttdeci">static int load_config(int reload)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07998">app_meetme.c:7998</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a2a1890787b3e55318c417c0a3e1432c7"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a2a1890787b3e55318c417c0a3e1432c7">END_OPTIONS</a></div><div class="ttdeci">#define END_OPTIONS</div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01344">include/asterisk/app.h:1344</a></div></div>
<div class="ttc" id="structast__conference_html_a16f06197fcaec99baf94c770e1549fc8"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a16f06197fcaec99baf94c770e1549fc8">ast_conference::transpath</a></div><div class="ttdeci">struct ast_trans_pvt * transpath[32]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00874">app_meetme.c:874</a></div></div>
<div class="ttc" id="stasis__message__router_8h_html_a5646e370e39cc29f5faa7a30fda11159"><div class="ttname"><a href="../../d4/d25/stasis__message__router_8h.html#a5646e370e39cc29f5faa7a30fda11159">stasis_message_router_unsubscribe</a></div><div class="ttdeci">void stasis_message_router_unsubscribe(struct stasis_message_router *router)</div><div class="ttdoc">Unsubscribe the router from the upstream topic. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/d78/stasis__message__router_8c_source.html#l00258">stasis_message_router.c:258</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a6440d070425a2efe8e0aa71e8d9e47b7"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a6440d070425a2efe8e0aa71e8d9e47b7">ast_frfree</a></div><div class="ttdeci">#define ast_frfree(fr)</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00556">include/asterisk/frame.h:556</a></div></div>
<div class="ttc" id="channel_8h_html_aec583a3e25358ee552a4f3df53914cd0"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#aec583a3e25358ee552a4f3df53914cd0">ast_answer</a></div><div class="ttdeci">int ast_answer(struct ast_channel *chan)</div><div class="ttdoc">Answer a channel. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l02814">channel.c:2814</a></div></div>
<div class="ttc" id="structast__conference_html_aaf8da2ce427bc9d88ba925c185056a41"><div class="ttname"><a href="../../d8/d44/structast__conference.html#aaf8da2ce427bc9d88ba925c185056a41">ast_conference::announcelist_addition</a></div><div class="ttdeci">ast_cond_t announcelist_addition</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00881">app_meetme.c:881</a></div></div>
<div class="ttc" id="cel__pgsql_8c_html_ad6c487210772a9b4b0ca04b04b847d4c"><div class="ttname"><a href="../../de/d1b/cel__pgsql_8c.html#ad6c487210772a9b4b0ca04b04b847d4c">result</a></div><div class="ttdeci">static PGresult * result</div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1b/cel__pgsql_8c_source.html#l00088">cel_pgsql.c:88</a></div></div>
<div class="ttc" id="structast__conf__user_html_af3d16394c849390df1c8f72569faeb37"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#af3d16394c849390df1c8f72569faeb37">ast_conf_user::play_warning</a></div><div class="ttdeci">long play_warning</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00909">app_meetme.c:909</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ad03ae059013a251d0b5ef753e0da893b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ad03ae059013a251d0b5ef753e0da893b">find_conf_realtime</a></div><div class="ttdeci">static struct ast_conference * find_conf_realtime(struct ast_channel *chan, char *confno, int make, int dynamic, char *dynamic_pin, size_t pin_buf_len, int refcount, struct ast_flags64 *confflags, int *too_early, char **optargs)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l04500">app_meetme.c:4500</a></div></div>
<div class="ttc" id="structast__conference_html_a6022c8a609170c7365fb96e83cb2df48"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a6022c8a609170c7365fb96e83cb2df48">ast_conference::refcount</a></div><div class="ttdeci">int refcount</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00855">app_meetme.c:855</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a226cceaaf022a7ffc67fc7fd57049372"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a226cceaaf022a7ffc67fc7fd57049372">sla_check_failed_station</a></div><div class="ttdeci">static int sla_check_failed_station(const struct sla_station *station)</div><div class="ttdoc">Check to see if this station has failed to be dialed in the past minute. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06332">app_meetme.c:6332</a></div></div>
<div class="ttc" id="res__corosync_8c_html_a8e51289dd0fc7415cee40e7a57b49fdf"><div class="ttname"><a href="../../d1/da4/res__corosync_8c.html#a8e51289dd0fc7415cee40e7a57b49fdf">sub</a></div><div class="ttdeci">struct stasis_forward * sub</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/da4/res__corosync_8c_source.html#l00240">res_corosync.c:240</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1e79b23a6db109a316e426ce5ccf6215a5b13df634bb3782cb4a25c0fe0712515"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1e79b23a6db109a316e426ce5ccf6215a5b13df634bb3782cb4a25c0fe0712515">INACTIVE_TRUNK_REFS</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00920">app_meetme.c:920</a></div></div>
<div class="ttc" id="structast__frame_html"><div class="ttname"><a href="../../d0/d99/structast__frame.html">ast_frame</a></div><div class="ttdoc">Data structure associated with a single frame of data. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00165">include/asterisk/frame.h:165</a></div></div>
<div class="ttc" id="structast__conference_html_ad55362a02bb3873c199d40bcd1407d25"><div class="ttname"><a href="../../d8/d44/structast__conference.html#ad55362a02bb3873c199d40bcd1407d25">ast_conference::announcethread_stop</a></div><div class="ttdeci">unsigned int announcethread_stop</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00880">app_meetme.c:880</a></div></div>
<div class="ttc" id="causes_8h_html"><div class="ttname"><a href="../../d4/da3/causes_8h.html">causes.h</a></div><div class="ttdoc">Internal Asterisk hangup causes. </div></div>
<div class="ttc" id="res__adsi_8c_html_ac7af894858cf396a219d632f40afdc8d"><div class="ttname"><a href="../../dd/d27/res__adsi_8c.html#ac7af894858cf396a219d632f40afdc8d">total</a></div><div class="ttdeci">static int total</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d27/res__adsi_8c_source.html#l00968">res_adsi.c:968</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a9fac8c38ea4be0b32e78fb14fa907dd0"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a9fac8c38ea4be0b32e78fb14fa907dd0">MC_DATA_FORMAT</a></div><div class="ttdeci">#define MC_DATA_FORMAT</div></div>
<div class="ttc" id="pbx_8h_html_a9546b830c22c693a2baed08e48569401"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a9546b830c22c693a2baed08e48569401">ast_context_destroy</a></div><div class="ttdeci">void ast_context_destroy(struct ast_context *con, const char *registrar)</div><div class="ttdoc">Destroy a context (matches the specified context or ANY context if NULL) </div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcc/conf2ael_8c_source.html#l00625">conf2ael.c:625</a></div></div>
<div class="ttc" id="channel_8h_html_a9abe31fe40dcd03cd2957e5309e32ac6"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9abe31fe40dcd03cd2957e5309e32ac6">ast_channel_language</a></div><div class="ttdeci">const char * ast_channel_language(const struct ast_channel *chan)</div></div>
<div class="ttc" id="app__meetme_8c_html_acdab27627974ea2e3fbf169bce26523b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#acdab27627974ea2e3fbf169bce26523b">sla_calc_trunk_timeouts</a></div><div class="ttdeci">static int sla_calc_trunk_timeouts(unsigned int *timeout)</div><div class="ttdoc">Process trunk ring timeouts. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06583">app_meetme.c:6583</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aae0ef2cfd78584da1e5520fa4cdfa85f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aae0ef2cfd78584da1e5520fa4cdfa85f">complete_meetmecmd_lock</a></div><div class="ttdeci">static char * complete_meetmecmd_lock(const char *word, int pos, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01806">app_meetme.c:1806</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390aa5814e690c23b590bcd4eb43535907a1">AST_CONTROL_RINGING</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00280">include/asterisk/frame.h:280</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#abbca034b0a98715c687b808347af82a3a1ab15af464bf1838c9ca91d32ca7a2a1">RQ_UINTEGER2</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00069">include/asterisk/config.h:69</a></div></div>
<div class="ttc" id="structast__json_html"><div class="ttname"><a href="../../d1/da1/structast__json.html">ast_json</a></div><div class="ttdoc">Abstract JSON element (object, array, string, int, ...). </div></div>
<div class="ttc" id="structast__cli__args_html"><div class="ttname"><a href="../../d3/dad/structast__cli__args.html">ast_cli_args</a></div><div class="ttdef"><b>Definition:</b> <a href="../../dc/db0/cli_8h_source.html#l00158">cli.h:158</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ab1783b8f12d2bcca727e0f1bd6f9a49b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ab1783b8f12d2bcca727e0f1bd6f9a49b">entrance_sound</a></div><div class="ttdeci">entrance_sound</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00671">app_meetme.c:671</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a5b4eb1fd081eb38250072106941d5409"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a5b4eb1fd081eb38250072106941d5409">sla_failed_station_destroy</a></div><div class="ttdeci">static void sla_failed_station_destroy(struct sla_failed_station *failed_station)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06002">app_meetme.c:6002</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af202f7f4426763c7a42b46fa5b868d2d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af202f7f4426763c7a42b46fa5b868d2d">sla_registrar</a></div><div class="ttdeci">static const char sla_registrar[]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01035">app_meetme.c:1035</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4790f45dcc812c1b00184a2edccdddf5a70fd82e787d08cd36d28a9af1e37bd14">ADMINFLAG_KICKME</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00655">app_meetme.c:655</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a977a38245885ede0c3accf2f56fc57f8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a977a38245885ede0c3accf2f56fc57f8">admin_exec</a></div><div class="ttdeci">static int admin_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">The MeetMeadmin application. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05225">app_meetme.c:5225</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a31312f6b6c2296e3495ad1d9e198cbf4"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a31312f6b6c2296e3495ad1d9e198cbf4">AST_OPTION_TONE_VERIFY</a></div><div class="ttdeci">#define AST_OPTION_TONE_VERIFY</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00431">include/asterisk/frame.h:431</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a27bb593e08b2fbe3c75194dcd6e83856"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a27bb593e08b2fbe3c75194dcd6e83856">conf_map</a></div><div class="ttdeci">static unsigned int conf_map[1024]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00888">app_meetme.c:888</a></div></div>
<div class="ttc" id="structast__channel_html_a1245ce5e07d09b4eccf64f29f6d83664"><div class="ttname"><a href="../../df/d3c/structast__channel.html#a1245ce5e07d09b4eccf64f29f6d83664">ast_channel::uniqueid</a></div><div class="ttdeci">struct ast_channel_id uniqueid</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00115">channel_internal_api.c:115</a></div></div>
<div class="ttc" id="structentry_html"><div class="ttname"><a href="../../d3/d96/structentry.html">entry</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d85/search_8h_source.html#l00040">search.h:40</a></div></div>
<div class="ttc" id="channel_8h_html_a582dee4d5ea9b2ff6f309f0c5239f6bd"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a582dee4d5ea9b2ff6f309f0c5239f6bd">ast_channel_context</a></div><div class="ttdeci">const char * ast_channel_context(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00344">channel_internal_api.c:344</a></div></div>
<div class="ttc" id="time_8h_html_aa13b651c18bc6004cab21ac041d44dd8"><div class="ttname"><a href="../../de/df7/time_8h.html#aa13b651c18bc6004cab21ac041d44dd8">ast_tvsub</a></div><div class="ttdeci">struct timeval ast_tvsub(struct timeval a, struct timeval b)</div><div class="ttdoc">Returns the difference of two timevals a - b. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dc5/extconf_8c_source.html#l02298">extconf.c:2298</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a3c7dabe74df23208e4dce8bc3fbb6d77"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a3c7dabe74df23208e4dce8bc3fbb6d77">sla_find_station</a></div><div class="ttdeci">static struct sla_station * sla_find_station(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05871">app_meetme.c:5871</a></div></div>
<div class="ttc" id="structast__conference_html_a9449b89f7363e7ed5f75666d3a1f44e3"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a9449b89f7363e7ed5f75666d3a1f44e3">ast_conference::recordingfilename</a></div><div class="ttdeci">char * recordingfilename</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00863">app_meetme.c:863</a></div></div>
<div class="ttc" id="structast__conference_html_a9a27d1f216a1903433ae28cb1461c0e1"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a9a27d1f216a1903433ae28cb1461c0e1">ast_conference::lchan</a></div><div class="ttdeci">struct ast_channel * lchan</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00847">app_meetme.c:847</a></div></div>
<div class="ttc" id="structast__frame_html_a4027905f872af30d910929b07e261ca5"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a4027905f872af30d910929b07e261ca5">ast_frame::data</a></div><div class="ttdeci">union ast_frame::@263 data</div></div>
<div class="ttc" id="app__meetme_8c_html_aea0981ea332b08880d6404c65fe64135"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aea0981ea332b08880d6404c65fe64135">sla_find_trunk_ref_byname</a></div><div class="ttdeci">static struct sla_trunk_ref * sla_find_trunk_ref_byname(const struct sla_station *station, const char *name)</div><div class="ttdoc">Find a trunk reference on a station by name. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05910">app_meetme.c:5910</a></div></div>
<div class="ttc" id="linkedlists_8h_html_aa5be52067bf16bdc7e56ca19b5ba858d"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#aa5be52067bf16bdc7e56ca19b5ba858d">AST_LIST_TRAVERSE_SAFE_BEGIN</a></div><div class="ttdeci">#define AST_LIST_TRAVERSE_SAFE_BEGIN(head, var, field)</div><div class="ttdoc">Loops safely over (traverses) the entries in a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00528">linkedlists.h:528</a></div></div>
<div class="ttc" id="structast__frame_html_a6937b93c56cb473b547eda454dca7b4c"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a6937b93c56cb473b547eda454dca7b4c">ast_frame::frametype</a></div><div class="ttdeci">enum ast_frame_type frametype</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00167">include/asterisk/frame.h:167</a></div></div>
<div class="ttc" id="structannounce__listitem_html_aaf09e68427ae0e6025d08e028646d43a"><div class="ttname"><a href="../../dd/d4b/structannounce__listitem.html#aaf09e68427ae0e6025d08e028646d43a">announce_listitem::announcetype</a></div><div class="ttdeci">enum announcetypes announcetype</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00838">app_meetme.c:838</a></div></div>
<div class="ttc" id="asterisk_8h_html_ae688d728e1acdfe5988c7db45d6f0166"><div class="ttname"><a href="../../db/db2/asterisk_8h.html#ae688d728e1acdfe5988c7db45d6f0166">PATH_MAX</a></div><div class="ttdeci">#define PATH_MAX</div><div class="ttdef"><b>Definition:</b> <a href="../../db/db2/asterisk_8h_source.html#l00040">asterisk.h:40</a></div></div>
<div class="ttc" id="dial_8h_html_a2054b1ddc7845e78286254b366a37847a4bd947d4e1f84bf01d336e228fb431e1"><div class="ttname"><a href="../../df/dcf/dial_8h.html#a2054b1ddc7845e78286254b366a37847a4bd947d4e1f84bf01d336e228fb431e1">AST_DIAL_RESULT_TIMEOUT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/dcf/dial_8h_source.html#l00062">dial.h:62</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#ae2e1a9c4e048da387b761f619312d6e0a9b350360a64b55c7590f1ec03db480be">AST_FRAME_DTMF_BEGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00125">include/asterisk/frame.h:125</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_a59b72ee1caa9e8349ca017df01e8ac55"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#a59b72ee1caa9e8349ca017df01e8ac55">ast_frame_adjust_volume</a></div><div class="ttdeci">int ast_frame_adjust_volume(struct ast_frame *f, int adjustment)</div><div class="ttdoc">Adjusts the volume of the audio samples contained in a frame. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d55/main_2frame_8c_source.html#l00787">main/frame.c:787</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ab1d211197f87ddeed62493bc7033f3f9"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ab1d211197f87ddeed62493bc7033f3f9">user_set_hangup_cb</a></div><div class="ttdeci">static int user_set_hangup_cb(void *obj, void *check_admin_arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02705">app_meetme.c:2705</a></div></div>
<div class="ttc" id="devicestate_8h_html_a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#a26cbac580d3e86b529f90058f6e91ac7a4dbd4bd0c7bf0b9d8c3c2c800d39cfc1">AST_DEVSTATE_NOT_CACHABLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00069">devicestate.h:69</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a636a212051cf4b5561e4c3ee652a58fe"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a636a212051cf4b5561e4c3ee652a58fe">MAX_PIN</a></div><div class="ttdeci">#define MAX_PIN</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00820">app_meetme.c:820</a></div></div>
<div class="ttc" id="lock_8h_html_a76e8ed6bb354be6c6dd9e51acc1d7a1b"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a76e8ed6bb354be6c6dd9e51acc1d7a1b">ast_mutex_init</a></div><div class="ttdeci">#define ast_mutex_init(pmutex)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00184">lock.h:184</a></div></div>
<div class="ttc" id="structao2__container_html"><div class="ttname"><a href="../../d2/da9/structao2__container.html">ao2_container</a></div><div class="ttdoc">Generic container type. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d20/astobj2__container__private_8h_source.html#l00282">astobj2_container_private.h:282</a></div></div>
<div class="ttc" id="structsla__trunk__ref_html"><div class="ttname"><a href="../../d5/d5a/structsla__trunk__ref.html">sla_trunk_ref</a></div><div class="ttdoc">A station&amp;#39;s reference to a trunk. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01015">app_meetme.c:1015</a></div></div>
<div class="ttc" id="structast__party__name_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d8/d6f/structast__party__name.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_name::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the name information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00280">channel.h:280</a></div></div>
<div class="ttc" id="test__http__media__cache_8c_html_a80c8e3ae5087d90d422675d034eeebc7"><div class="ttname"><a href="../../d4/d45/test__http__media__cache_8c.html#a80c8e3ae5087d90d422675d034eeebc7">options</a></div><div class="ttdeci">static struct test_options options</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d45/test__http__media__cache_8c_source.html#l00062">test_http_media_cache.c:62</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae22d3998d449264ec9892307921bf465"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae22d3998d449264ec9892307921bf465">sla_trunks</a></div><div class="ttdeci">static struct ao2_container * sla_trunks</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01033">app_meetme.c:1033</a></div></div>
<div class="ttc" id="structsla__station_html_a1f1a04b798d6b529cac3ee205c5e7961"><div class="ttname"><a href="../../dd/d95/structsla__station.html#a1f1a04b798d6b529cac3ee205c5e7961">sla_station::ring_timeout</a></div><div class="ttdeci">unsigned int ring_timeout</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00954">app_meetme.c:954</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a0f5b0308b4ac4029b0300a7a68779298a44a4c13334429a322cb3408ec48c1cfb"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a0f5b0308b4ac4029b0300a7a68779298a44a4c13334429a322cb3408ec48c1cfb">MEETME_RECORD_OFF</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00677">app_meetme.c:677</a></div></div>
<div class="ttc" id="chan__alsa_8c_html_ac25ea00ee3f082df06e0cf468cbde240"><div class="ttname"><a href="../../da/d45/chan__alsa_8c.html#ac25ea00ee3f082df06e0cf468cbde240">context</a></div><div class="ttdeci">static char context[AST_MAX_CONTEXT]</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d45/chan__alsa_8c_source.html#l00116">chan_alsa.c:116</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_aca036489931bf5571e2472331c8ac80b"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#aca036489931bf5571e2472331c8ac80b">AST_APP_OPTION</a></div><div class="ttdeci">#define AST_APP_OPTION(option, flagno)</div><div class="ttdoc">Declares an application option that does not accept an argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01402">include/asterisk/app.h:1402</a></div></div>
<div class="ttc" id="lock_8h_html_ab8977a71822daa556f19f30ba6eec765"><div class="ttname"><a href="../../dd/d42/lock_8h.html#ab8977a71822daa556f19f30ba6eec765">ast_mutex_destroy</a></div><div class="ttdeci">#define ast_mutex_destroy(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00186">lock.h:186</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a313d4f30e509464cdd73a39a9af14145"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a313d4f30e509464cdd73a39a9af14145">sla_check_inuse_station</a></div><div class="ttdeci">static int sla_check_inuse_station(const struct sla_station *station)</div><div class="ttdoc">Check to see if a station is in use. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06415">app_meetme.c:6415</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a34e2d6ebe0cd1d0cc400ef4c6a9bc21d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a34e2d6ebe0cd1d0cc400ef4c6a9bc21d">sla_trunk_release_refs</a></div><div class="ttdeci">static int sla_trunk_release_refs(void *obj, void *arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07356">app_meetme.c:7356</a></div></div>
<div class="ttc" id="pbx_8h_html_a8a07400b41b3302edf8aef9f53644698"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8a07400b41b3302edf8aef9f53644698">ast_context_find_or_create</a></div><div class="ttdeci">struct ast_context * ast_context_find_or_create(struct ast_context **extcontexts, struct ast_hashtab *exttable, const char *name, const char *registrar)</div><div class="ttdoc">Register a new context or find an existing one. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d94/pbx_8c_source.html#l06198">pbx.c:6198</a></div></div>
<div class="ttc" id="structast__conference_html"><div class="ttname"><a href="../../d8/d44/structast__conference.html">ast_conference</a></div><div class="ttdoc">The MeetMe Conference object. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00842">app_meetme.c:842</a></div></div>
<div class="ttc" id="structast__frame__subclass_html_ab425a484a0916077c5a30d9d7b229b44"><div class="ttname"><a href="../../d1/d9f/structast__frame__subclass.html#ab425a484a0916077c5a30d9d7b229b44">ast_frame_subclass::format</a></div><div class="ttdeci">struct ast_format * format</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00155">include/asterisk/frame.h:155</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a775a7291ee8f84069224106f4a9cd29f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a775a7291ee8f84069224106f4a9cd29f">sla_handle_dial_state_event</a></div><div class="ttdeci">static void sla_handle_dial_state_event(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06232">app_meetme.c:6232</a></div></div>
<div class="ttc" id="channel_8h_html_a4f07a6a4e7d95fcbb8f75a8d4fdf398d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a4f07a6a4e7d95fcbb8f75a8d4fdf398d">ast_channel_audiohooks</a></div><div class="ttdeci">struct ast_audiohook_list * ast_channel_audiohooks(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00581">channel_internal_api.c:581</a></div></div>
<div class="ttc" id="channel_8h_html_adf593d68a333075c1fcae8a73b68c069"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#adf593d68a333075c1fcae8a73b68c069">ast_channel_macrocontext</a></div><div class="ttdeci">const char * ast_channel_macrocontext(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00362">channel_internal_api.c:362</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a5e5f4394d6b89f5fa10b7405234ec69b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a5e5f4394d6b89f5fa10b7405234ec69b">sla_station_ref_destructor</a></div><div class="ttdeci">static void sla_station_ref_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05939">app_meetme.c:5939</a></div></div>
<div class="ttc" id="structast__conference_html_a46885edd8fad62a4089c021a1d810740"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a46885edd8fad62a4089c021a1d810740">ast_conference::list</a></div><div class="ttdeci">struct ast_conference::@39 list</div></div>
<div class="ttc" id="structsla__failed__station_html_ad0eecb6223757f0f347c81c1e2c14eb6"><div class="ttname"><a href="../../d5/d9c/structsla__failed__station.html#ad0eecb6223757f0f347c81c1e2c14eb6">sla_failed_station::last_try</a></div><div class="ttdeci">struct timeval last_try</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01058">app_meetme.c:1058</a></div></div>
<div class="ttc" id="structast__conference_html_ad7b1f4e72963d085053fb4ef80e9fb33"><div class="ttname"><a href="../../d8/d44/structast__conference.html#ad7b1f4e72963d085053fb4ef80e9fb33">ast_conference::maxusers</a></div><div class="ttdeci">int maxusers</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00852">app_meetme.c:852</a></div></div>
<div class="ttc" id="pbx_8h_html_ad4a6912dcd2ad44a186d0a284afafc51"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ad4a6912dcd2ad44a186d0a284afafc51">pbx_findapp</a></div><div class="ttdeci">struct ast_app * pbx_findapp(const char *app)</div><div class="ttdoc">Look up an application. </div><div class="ttdef"><b>Definition:</b> <a href="../../d2/db7/ael__main_8c_source.html#l00165">ael_main.c:165</a></div></div>
<div class="ttc" id="channel_8h_html_afdaf014aa17389de35cba4df16860b0d"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#afdaf014aa17389de35cba4df16860b0d">ast_party_caller_init</a></div><div class="ttdeci">void ast_party_caller_init(struct ast_party_caller *init)</div><div class="ttdoc">Initialize the given caller structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l01978">channel.c:1978</a></div></div>
<div class="ttc" id="manager_8h_html_a5b63b8a8faede2d852e071e1f7b31c11"><div class="ttname"><a href="../../db/d45/manager_8h.html#a5b63b8a8faede2d852e071e1f7b31c11">ast_manager_register_xml</a></div><div class="ttdeci">#define ast_manager_register_xml(action, authority, func)</div><div class="ttdoc">Register a manager callback using XML documentation to describe the manager. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00186">manager.h:186</a></div></div>
<div class="ttc" id="structsla__station__ref_html_aa328161f4934a6c22ca967fcb5cbc1e1"><div class="ttname"><a href="../../d0/db1/structsla__station__ref.html#aa328161f4934a6c22ca967fcb5cbc1e1">sla_station_ref::mark</a></div><div class="ttdeci">unsigned int mark</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00978">app_meetme.c:978</a></div></div>
<div class="ttc" id="say_8h_html"><div class="ttname"><a href="../../db/dce/say_8h.html">say.h</a></div><div class="ttdoc">Say numbers and dates (maybe words one day too) </div></div>
<div class="ttc" id="module_8h_html_aba2c8d4be709a254658b21a834f8294a"><div class="ttname"><a href="../../d5/d16/module_8h.html#aba2c8d4be709a254658b21a834f8294a">ASTERISK_GPL_KEY</a></div><div class="ttdeci">#define ASTERISK_GPL_KEY</div><div class="ttdoc">The text the key() function should return. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00046">module.h:46</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2cfc4b639c2388d173253cb1e30c4b21"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2cfc4b639c2388d173253cb1e30c4b21">sla_trunk_ref_destructor</a></div><div class="ttdeci">static void sla_trunk_ref_destructor(void *obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07158">app_meetme.c:7158</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a501c3df2a5fe48200560b09c9fdcef73"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a501c3df2a5fe48200560b09c9fdcef73">queue_ringing_trunk</a></div><div class="ttdeci">static struct sla_ringing_trunk * queue_ringing_trunk(struct sla_trunk *trunk)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07182">app_meetme.c:7182</a></div></div>
<div class="ttc" id="manager_8h_html_a1ef0ee0044dbbeb4c3a5abc6c046b208"><div class="ttname"><a href="../../db/d45/manager_8h.html#a1ef0ee0044dbbeb4c3a5abc6c046b208">manager_event</a></div><div class="ttdeci">#define manager_event(category, event, contents,...)</div><div class="ttdoc">External routines may send asterisk manager events this way. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d45/manager_8h_source.html#l00248">manager.h:248</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a81942bf15eb39b2b6fd8ef56f7e3c2ed"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a81942bf15eb39b2b6fd8ef56f7e3c2ed">sla_stop_ringing_station</a></div><div class="ttdeci">static void sla_stop_ringing_station(struct sla_ringing_station *ringing_station, enum sla_station_hangup hangup)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06132">app_meetme.c:6132</a></div></div>
<div class="ttc" id="format__cache_8h_html_a771d7c34570e8e492c25a0c2eb41889d"><div class="ttname"><a href="../../db/d1c/format__cache_8h.html#a771d7c34570e8e492c25a0c2eb41889d">ast_format_slin</a></div><div class="ttdeci">struct ast_format * ast_format_slin</div><div class="ttdoc">Built-in cached signed linear 8kHz format. </div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d29/format__cache_8c_source.html#l00041">format_cache.c:41</a></div></div>
<div class="ttc" id="dsp_8h_html_aab28c68838eaed4e0c89460a4e554cca"><div class="ttname"><a href="../../d3/d08/dsp_8h.html#aab28c68838eaed4e0c89460a4e554cca">ast_dsp_get_threshold_from_settings</a></div><div class="ttdeci">int ast_dsp_get_threshold_from_settings(enum threshold which)</div><div class="ttdoc">Get silence threshold from dsp.conf. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3b/dsp_8c_source.html#l01996">dsp.c:1996</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a6f90bbff2c01c08f56e1d05bcc3a7f2d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a6f90bbff2c01c08f56e1d05bcc3a7f2d">filename_parse</a></div><div class="ttdeci">static void filename_parse(char *filename, char *buffer)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05662">app_meetme.c:5662</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga31a02a7d3cc36aa66ebebdedfc574d1c"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga31a02a7d3cc36aa66ebebdedfc574d1c">astman_send_error</a></div><div class="ttdeci">void astman_send_error(struct mansession *s, const struct message *m, char *error)</div><div class="ttdoc">Send error in manager transaction. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03159">manager.c:3159</a></div></div>
<div class="ttc" id="module_8h_html"><div class="ttname"><a href="../../d5/d16/module_8h.html">module.h</a></div><div class="ttdoc">Asterisk module definitions. </div></div>
<div class="ttc" id="app__meetme_8c_html_a33f960245e46142b8ba310967e28d255"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a33f960245e46142b8ba310967e28d255">ringing_trunks</a></div><div class="ttdeci">struct @35::@50 ringing_trunks</div></div>
<div class="ttc" id="app__meetme_8c_html_acf4c4ede2cc9c90c07b60b08aaf2685ca1e46cd00f27d565cf02c15ec55c8be06"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685ca1e46cd00f27d565cf02c15ec55c8be06">SLA_HOLD_OPEN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00934">app_meetme.c:934</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a59e909b5a966f969559654af7e78c1f5"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a59e909b5a966f969559654af7e78c1f5">sla_stations</a></div><div class="ttdeci">static struct ao2_container * sla_stations</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01032">app_meetme.c:1032</a></div></div>
<div class="ttc" id="channel_8h_html_abdebed775647544929616b09a8487817"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#abdebed775647544929616b09a8487817">ast_channel_monitor</a></div><div class="ttdeci">struct ast_channel_monitor * ast_channel_monitor(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00613">channel_internal_api.c:613</a></div></div>
<div class="ttc" id="json_8h_html_ad20fdcbab1ed5c078284a687cced2877"><div class="ttname"><a href="../../d4/d05/json_8h.html#ad20fdcbab1ed5c078284a687cced2877">ast_json_integer_get</a></div><div class="ttdeci">intmax_t ast_json_integer_get(const struct ast_json *integer)</div><div class="ttdoc">Get the value from a JSON integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00322">json.c:322</a></div></div>
<div class="ttc" id="manager_8h_html_a4e23b878e759dadd1e466a63193abba0"><div class="ttname"><a href="../../db/d45/manager_8h.html#a4e23b878e759dadd1e466a63193abba0">ast_str_append_event_header</a></div><div class="ttdeci">int ast_str_append_event_header(struct ast_str **fields_string, const char *header, const char *value)</div><div class="ttdoc">append an event header to an ast string </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l09705">manager.c:9705</a></div></div>
<div class="ttc" id="app__meetme_8c_html_aa0830a7a6de58666b7b6fb189eb8b232"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#aa0830a7a6de58666b7b6fb189eb8b232">attempt_callerid</a></div><div class="ttdeci">unsigned int attempt_callerid</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01099">app_meetme.c:1099</a></div></div>
<div class="ttc" id="structsla__trunk__ref_html_a8b9f36f9500c33f5968999247558066e"><div class="ttname"><a href="../../d5/d5a/structsla__trunk__ref.html#a8b9f36f9500c33f5968999247558066e">sla_trunk_ref::ring_delay</a></div><div class="ttdeci">unsigned int ring_delay</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01027">app_meetme.c:1027</a></div></div>
<div class="ttc" id="app__meetme_8c_html_acf4c4ede2cc9c90c07b60b08aaf2685c"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685c">sla_hold_access</a></div><div class="ttdeci">sla_hold_access</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00931">app_meetme.c:931</a></div></div>
<div class="ttc" id="pbx_8h_html_ae70e64cdf669396c88ea8eda900b0b3b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#ae70e64cdf669396c88ea8eda900b0b3b">ast_func_write</a></div><div class="ttdeci">int ast_func_write(struct ast_channel *chan, const char *function, const char *value)</div><div class="ttdoc">executes a write operation on a function </div><div class="ttdef"><b>Definition:</b> <a href="../../db/d70/pbx__functions_8c_source.html#l00692">pbx_functions.c:692</a></div></div>
<div class="ttc" id="structsla__station__ref_html_a0569f66b3f952276c1a8ec5f2ffd5466"><div class="ttname"><a href="../../d0/db1/structsla__station__ref.html#a0569f66b3f952276c1a8ec5f2ffd5466">sla_station_ref::station</a></div><div class="ttdeci">struct sla_station * station</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00976">app_meetme.c:976</a></div></div>
<div class="ttc" id="devicestate_8h_html_af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94"><div class="ttname"><a href="../../da/da2/devicestate_8h.html#af72f8a5c0601e4c1f8a852749cd44eeea9c008e1d20858cbc3275c157e02ebc94">AST_DEVICE_INVALID</a></div><div class="ttdef"><b>Definition:</b> <a href="../../da/da2/devicestate_8h_source.html#l00057">devicestate.h:57</a></div></div>
<div class="ttc" id="f2c_8h_html_ac6afabdc09a49a433ee19d8a9486056d"><div class="ttname"><a href="../../dc/dc2/f2c_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a></div><div class="ttdeci">#define min(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/dc2/f2c_8h_source.html#l00197">f2c.h:197</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a80cd3f6f786b59b742bcecfc0b3be7c2"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a80cd3f6f786b59b742bcecfc0b3be7c2">AST_DECLARE_APP_ARGS</a></div><div class="ttdeci">#define AST_DECLARE_APP_ARGS(name, arglist)</div><div class="ttdoc">Declare a structure to hold an application&amp;#39;s arguments. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01249">include/asterisk/app.h:1249</a></div></div>
<div class="ttc" id="stringfields_8h_html_abf60f862ae6a141d2f86a0f5e82792de"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#abf60f862ae6a141d2f86a0f5e82792de">ast_string_field_free_memory</a></div><div class="ttdeci">#define ast_string_field_free_memory(x)</div><div class="ttdoc">free all memory - to be called before destroying the object </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00368">stringfields.h:368</a></div></div>
<div class="ttc" id="channel_8h_html_a1950f7fe77c02d233de02d299bab8c15"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a1950f7fe77c02d233de02d299bab8c15">ast_read_noaudio</a></div><div class="ttdeci">struct ast_frame * ast_read_noaudio(struct ast_channel *chan)</div><div class="ttdoc">Reads a frame, returning AST_FRAME_NULL frame if audio. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d28/channel_8c_source.html#l04312">channel.c:4312</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html">app.h</a></div><div class="ttdoc">Application convenience functions, designed to give consistent look and feel to Asterisk apps...</div></div>
<div class="ttc" id="app__meetme_8c_html_a62921b92fa4fb37f1e3a5d4c644fc1d8"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a62921b92fa4fb37f1e3a5d4c644fc1d8">CONFIG_FILE_NAME</a></div><div class="ttdeci">#define CONFIG_FILE_NAME</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00642">app_meetme.c:642</a></div></div>
<div class="ttc" id="channel_8h_html_ad27c52cda6e6435a121900661ad5bdce"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#ad27c52cda6e6435a121900661ad5bdce">ast_channel_rawwriteformat</a></div><div class="ttdeci">struct ast_format * ast_channel_rawwriteformat(struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00852">channel_internal_api.c:852</a></div></div>
<div class="ttc" id="structast__party__number_html_aaa04218f9e3a9065afa8be2491da8904"><div class="ttname"><a href="../../d6/dbb/structast__party__number.html#aaa04218f9e3a9065afa8be2491da8904">ast_party_number::valid</a></div><div class="ttdeci">unsigned char valid</div><div class="ttdoc">TRUE if the number information is valid/present. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00298">channel.h:298</a></div></div>
<div class="ttc" id="astobj2_8h_html_ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#ad9d009e87e737af900825b36db55a35ca614744a4d36b3189d4ab5b02c8645d47">OBJ_MULTIPLE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01053">astobj2.h:1053</a></div></div>
<div class="ttc" id="channel_8h_html_af5dee96d4dcc88a95fce391c22d4d21f"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#af5dee96d4dcc88a95fce391c22d4d21f">ast_channel_tech</a></div><div class="ttdeci">const struct ast_channel_tech * ast_channel_tech(const struct ast_channel *chan)</div><div class="ttdef"><b>Definition:</b> <a href="../../db/de2/channel__internal__api_8c_source.html#l00769">channel_internal_api.c:769</a></div></div>
<div class="ttc" id="astobj2_8h_html_a91d5d37d00874ae7a92d1a15c0a3b3a6"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a91d5d37d00874ae7a92d1a15c0a3b3a6">ao2_iterator_init</a></div><div class="ttdeci">struct ao2_iterator ao2_iterator_init(struct ao2_container *c, int flags) attribute_warn_unused_result</div><div class="ttdoc">Create an iterator for a container. </div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d22/astobj2__container_8c_source.html#l00485">astobj2_container.c:485</a></div></div>
<div class="ttc" id="structast__conf__user_html_a84d1435c5b8d387806714ea7079304b7"><div class="ttname"><a href="../../d7/d90/structast__conf__user.html#a84d1435c5b8d387806714ea7079304b7">ast_conf_user::chan</a></div><div class="ttdeci">struct ast_channel * chan</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00900">app_meetme.c:900</a></div></div>
<div class="ttc" id="lock_8h_html_a6add1f30b2d53ca9384b15529a6f126e"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a6add1f30b2d53ca9384b15529a6f126e">ast_cond_timedwait</a></div><div class="ttdeci">#define ast_cond_timedwait(cond, mutex, time)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00204">lock.h:204</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a1f9aebf1de3ebbf4283a4dcf73308562ac88d4b53d16b3e05539a0b7e13a215ca"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a1f9aebf1de3ebbf4283a4dcf73308562ac88d4b53d16b3e05539a0b7e13a215ca">SLA_TRUNK_OPT_ARG_ARRAY_SIZE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l07221">app_meetme.c:7221</a></div></div>
<div class="ttc" id="pbx_8h_html_a8af0e93442a9e468425f63cc52b0ac7b"><div class="ttname"><a href="../../db/de0/pbx_8h.html#a8af0e93442a9e468425f63cc52b0ac7b">ast_custom_function_register</a></div><div class="ttdeci">#define ast_custom_function_register(acf)</div><div class="ttdoc">Register a custom function. </div><div class="ttdef"><b>Definition:</b> <a href="../../db/de0/pbx_8h_source.html#l01508">pbx.h:1508</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ac197e9e3bae472fa5ac27237055a3b9d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ac197e9e3bae472fa5ac27237055a3b9d">sla_handle_hold_event</a></div><div class="ttdeci">static void sla_handle_hold_event(struct sla_event *event)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06559">app_meetme.c:6559</a></div></div>
<div class="ttc" id="module_8h_html_aa4f734041ffd9d75b07cefb0291e1e58af2d6c20d90a068171cc852484a435980"><div class="ttname"><a href="../../d5/d16/module_8h.html#aa4f734041ffd9d75b07cefb0291e1e58af2d6c20d90a068171cc852484a435980">AST_MODPRI_DEVSTATE_PROVIDER</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00329">module.h:329</a></div></div>
<div class="ttc" id="app__meetme_8c_html_acf4c4ede2cc9c90c07b60b08aaf2685cab53c785cab44a382700c0c2e7bfabf3b"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#acf4c4ede2cc9c90c07b60b08aaf2685cab53c785cab44a382700c0c2e7bfabf3b">SLA_HOLD_PRIVATE</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00937">app_meetme.c:937</a></div></div>
<div class="ttc" id="structast__conference_html_ac2aec85ac9216c43dbae2d7550741607"><div class="ttname"><a href="../../d8/d44/structast__conference.html#ac2aec85ac9216c43dbae2d7550741607">ast_conference::users</a></div><div class="ttdeci">int users</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00850">app_meetme.c:850</a></div></div>
<div class="ttc" id="app__meetme_8c_html_af590722094b4b8eee8319a0ae644a8c1"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#af590722094b4b8eee8319a0ae644a8c1">sla_find_trunk</a></div><div class="ttdeci">static struct sla_trunk * sla_find_trunk(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05858">app_meetme.c:5858</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a850bf7360efcdaa168bcb5f190580a42"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a850bf7360efcdaa168bcb5f190580a42">channel_admin_exec</a></div><div class="ttdeci">static int channel_admin_exec(struct ast_channel *chan, const char *data)</div><div class="ttdoc">The MeetMeChannelAdmin application MeetMeChannelAdmin(channel, command) </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05390">app_meetme.c:5390</a></div></div>
<div class="ttc" id="file_8h_html_a3092bf11d4bba66f646562759608b1bc"><div class="ttname"><a href="../../d2/d4d/file_8h.html#a3092bf11d4bba66f646562759608b1bc">ast_stopstream</a></div><div class="ttdeci">int ast_stopstream(struct ast_channel *c)</div><div class="ttdoc">Stops a stream. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d13/file_8c_source.html#l00187">file.c:187</a></div></div>
<div class="ttc" id="module_8h_html_afba4eb7a910b10969041ae4cd488729d"><div class="ttname"><a href="../../d5/d16/module_8h.html#afba4eb7a910b10969041ae4cd488729d">ast_register_application_xml</a></div><div class="ttdeci">#define ast_register_application_xml(app, execute)</div><div class="ttdoc">Register an application using XML documentation. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d16/module_8h_source.html#l00626">module.h:626</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ab389de1f76067896d9df449a1c2c5a9f"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ab389de1f76067896d9df449a1c2c5a9f">user_talk_voldown_cb</a></div><div class="ttdeci">static int user_talk_voldown_cb(void *obj, void *unused, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l05196">app_meetme.c:5196</a></div></div>
<div class="ttc" id="include_2asterisk_2frame_8h_html_aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab"><div class="ttname"><a href="../../d6/d66/include_2asterisk_2frame_8h.html#aedda41918e992000fe921f8f7363b390a850bb06a1702741c93a3fd67cc9637ab">AST_CONTROL_CONGESTION</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00285">include/asterisk/frame.h:285</a></div></div>
<div class="ttc" id="structast__mutex__info_html"><div class="ttname"><a href="../../d8/dc5/structast__mutex__info.html">ast_mutex_info</a></div><div class="ttdoc">Structure for mutex and tracking information. </div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00135">lock.h:135</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a4caf8d8f829279fba122163d961608a4a61bdcc99c25b743f89316b3da3796cc1"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a4caf8d8f829279fba122163d961608a4a61bdcc99c25b743f89316b3da3796cc1">CONFFLAG_EXIT_CONTEXT</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00710">app_meetme.c:710</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a7c7ed16928ff798a1ad1a2f7eaf0ebe0"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a7c7ed16928ff798a1ad1a2f7eaf0ebe0">user_set_muted_cb</a></div><div class="ttdeci">static int user_set_muted_cb(void *obj, void *check_admin_arg, int flags)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02738">app_meetme.c:2738</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a2e36588696fb3cad50de116134abb1ab"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a2e36588696fb3cad50de116134abb1ab">ringing_stations</a></div><div class="ttdeci">struct @35::@51 ringing_stations</div></div>
<div class="ttc" id="translate_8h_html_a8f767bf5c2095f182e7cbaa73e391207"><div class="ttname"><a href="../../db/d39/translate_8h.html#a8f767bf5c2095f182e7cbaa73e391207">ast_translator_free_path</a></div><div class="ttdeci">void ast_translator_free_path(struct ast_trans_pvt *tr)</div><div class="ttdoc">Frees a translator path Frees the given translator path structure. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d43/translate_8c_source.html#l00475">translate.c:475</a></div></div>
<div class="ttc" id="channel_8h_html_a9b745a6d0e3d7af90d2708dca5b5e069"><div class="ttname"><a href="../../d5/d7b/channel_8h.html#a9b745a6d0e3d7af90d2708dca5b5e069">ast_channel_musicclass</a></div><div class="ttdeci">const char * ast_channel_musicclass(const struct ast_channel *chan)</div></div>
<div class="ttc" id="app__jack_8c_html_ac191e5810fa65e63095409471eb5648f"><div class="ttname"><a href="../../de/dcd/app__jack_8c.html#ac191e5810fa65e63095409471eb5648f">status</a></div><div class="ttdeci">jack_status_t status</div><div class="ttdef"><b>Definition:</b> <a href="../../de/dcd/app__jack_8c_source.html#l00146">app_jack.c:146</a></div></div>
<div class="ttc" id="structast__frame_html_a37672e6b906143604cefd3e959777b31"><div class="ttname"><a href="../../d0/d99/structast__frame.html#a37672e6b906143604cefd3e959777b31">ast_frame::samples</a></div><div class="ttdeci">int samples</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d66/include_2asterisk_2frame_8h_source.html#l00173">include/asterisk/frame.h:173</a></div></div>
<div class="ttc" id="strings_8h_html_a9c34c6c6b8daaba24c0406270f3cf697"><div class="ttname"><a href="../../d6/d90/strings_8h.html#a9c34c6c6b8daaba24c0406270f3cf697">ast_str_create</a></div><div class="ttdeci">#define ast_str_create(init_len)</div><div class="ttdoc">Create a malloc&amp;#39;ed dynamic length string. </div><div class="ttdef"><b>Definition:</b> <a href="../../d6/d90/strings_8h_source.html#l00620">strings.h:620</a></div></div>
<div class="ttc" id="codecs_2gsm_2inc_2private_8h_html_a0b023cbb2bf7d034c2269d58d7455ac8"><div class="ttname"><a href="../../d6/da0/codecs_2gsm_2inc_2private_8h.html#a0b023cbb2bf7d034c2269d58d7455ac8">word</a></div><div class="ttdeci">short word</div><div class="ttdef"><b>Definition:</b> <a href="../../d6/da0/codecs_2gsm_2inc_2private_8h_source.html#l00012">codecs/gsm/inc/private.h:12</a></div></div>
<div class="ttc" id="lock_8h_html_a873f9ce8c6287a32d48c83133e124418"><div class="ttname"><a href="../../dd/d42/lock_8h.html#a873f9ce8c6287a32d48c83133e124418">ast_mutex_unlock</a></div><div class="ttdeci">#define ast_mutex_unlock(a)</div><div class="ttdef"><b>Definition:</b> <a href="../../dd/d42/lock_8h_source.html#l00188">lock.h:188</a></div></div>
<div class="ttc" id="structast__conference_html_a36b5e5ca449d5db4d505c5ceed207e3b"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a36b5e5ca449d5db4d505c5ceed207e3b">ast_conference::recordthreadlock</a></div><div class="ttdeci">ast_mutex_t recordthreadlock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00861">app_meetme.c:861</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a70ec321d60229f7779ae0092645ea853"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a70ec321d60229f7779ae0092645ea853">meetme_stasis_cleanup</a></div><div class="ttdeci">static void meetme_stasis_cleanup(void)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01142">app_meetme.c:1142</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a5af7f58f66a440eaf65e3d922d169d99"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a5af7f58f66a440eaf65e3d922d169d99">complete_confno</a></div><div class="ttdeci">static char * complete_confno(const char *word, int state)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l01725">app_meetme.c:1725</a></div></div>
<div class="ttc" id="include_2asterisk_2app_8h_html_a037e9a5b28477b17e7c9acbe7ecb21d5"><div class="ttname"><a href="../../d3/d93/include_2asterisk_2app_8h.html#a037e9a5b28477b17e7c9acbe7ecb21d5">AST_APP_ARG</a></div><div class="ttdeci">#define AST_APP_ARG(name)</div><div class="ttdoc">Define an application argument. </div><div class="ttdef"><b>Definition:</b> <a href="../../d3/d93/include_2asterisk_2app_8h_source.html#l01232">include/asterisk/app.h:1232</a></div></div>
<div class="ttc" id="linkedlists_8h_html_ad66405f1d0b9e1fb484643d9a36e94ed"><div class="ttname"><a href="../../df/d90/linkedlists_8h.html#ad66405f1d0b9e1fb484643d9a36e94ed">AST_LIST_APPEND_LIST</a></div><div class="ttdeci">#define AST_LIST_APPEND_LIST(head, list, field)</div><div class="ttdoc">Appends a whole list to the tail of a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d90/linkedlists_8h_source.html#l00782">linkedlists.h:782</a></div></div>
<div class="ttc" id="app__meetme_8c_html_ae50d2c1eb2f8e66e0895bca7f8056951"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#ae50d2c1eb2f8e66e0895bca7f8056951">sla_check_timed_out_station</a></div><div class="ttdeci">static int sla_check_timed_out_station(const struct sla_ringing_trunk *ringing_trunk, const struct sla_station *station)</div><div class="ttdoc">Check to see if dialing this station already timed out for this ringing trunk. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l06175">app_meetme.c:6175</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a5d4909119c17d1ab7fd2f1283f56abe4"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a5d4909119c17d1ab7fd2f1283f56abe4">meetme_lock_cmd</a></div><div class="ttdeci">static char * meetme_lock_cmd(struct ast_cli_entry *e, int cmd, struct ast_cli_args *a)</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l02056">app_meetme.c:2056</a></div></div>
<div class="ttc" id="structast__conference_html_a9dd2948cb0042c35787acc178eca17d4"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a9dd2948cb0042c35787acc178eca17d4">ast_conference::confno</a></div><div class="ttdeci">char confno[MAX_CONFNUM]</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00845">app_meetme.c:845</a></div></div>
<div class="ttc" id="utils_8h_html_a7c38859ed90e96df2b0a0fdf843769d0"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a7c38859ed90e96df2b0a0fdf843769d0">ast_mkdir</a></div><div class="ttdeci">int ast_mkdir(const char *path, int mode)</div><div class="ttdoc">Recursively create directory path. </div><div class="ttdef"><b>Definition:</b> <a href="../../de/d1f/main_2utils_8c_source.html#l02231">main/utils.c:2231</a></div></div>
<div class="ttc" id="stringfields_8h_html_a653461abd6e0d16e4e3326ab90e0501d"><div class="ttname"><a href="../../d1/d0f/stringfields_8h.html#a653461abd6e0d16e4e3326ab90e0501d">ast_string_field_set</a></div><div class="ttdeci">#define ast_string_field_set(x, field, data)</div><div class="ttdoc">Set a field to a simple string value. </div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d0f/stringfields_8h_source.html#l00514">stringfields.h:514</a></div></div>
<div class="ttc" id="structast__tm_html"><div class="ttname"><a href="../../d5/d84/structast__tm.html">ast_tm</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/deb/localtime_8h_source.html#l00035">localtime.h:35</a></div></div>
<div class="ttc" id="include_2asterisk_2config_8h_html_a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037"><div class="ttname"><a href="../../d3/de6/include_2asterisk_2config_8h.html#a103e76ed4bd42f776f7f260080b98b3fafa887389dc380bbdcffb65fec379f037">CONFIG_FLAG_FILEUNCHANGED</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d3/de6/include_2asterisk_2config_8h_source.html#l00043">include/asterisk/config.h:43</a></div></div>
<div class="ttc" id="group__Group__AMI_html_ga0ee6ee1f4d200f711e2983bffe770a72"><div class="ttname"><a href="../../df/d72/group__Group__AMI.html#ga0ee6ee1f4d200f711e2983bffe770a72">astman_send_listack</a></div><div class="ttdeci">void astman_send_listack(struct mansession *s, const struct message *m, char *msg, char *listflag)</div><div class="ttdoc">Send ack in manager transaction to begin a list. </div><div class="ttdef"><b>Definition:</b> <a href="../../d4/d10/manager_8c_source.html#l03201">manager.c:3201</a></div></div>
<div class="ttc" id="structast__conference_html_a2d6ea8e1bd00fa11be2f422d8949e33e"><div class="ttname"><a href="../../d8/d44/structast__conference.html#a2d6ea8e1bd00fa11be2f422d8949e33e">ast_conference::announcethreadlock</a></div><div class="ttdeci">ast_mutex_t announcethreadlock</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00879">app_meetme.c:879</a></div></div>
<div class="ttc" id="json_8h_html_ac13f0f415f198c5a341017195933356f"><div class="ttname"><a href="../../d4/d05/json_8h.html#ac13f0f415f198c5a341017195933356f">ast_json_integer_create</a></div><div class="ttdeci">struct ast_json * ast_json_integer_create(intmax_t value)</div><div class="ttdoc">Create a JSON integer. </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d98/json_8c_source.html#l00317">json.c:317</a></div></div>
<div class="ttc" id="test__linkedlists_8c_html_a13dd15487fee89a002d17ef3aff62d02"><div class="ttname"><a href="../../d7/d6f/test__linkedlists_8c.html#a13dd15487fee89a002d17ef3aff62d02">a</a></div><div class="ttdeci">static struct test_val a</div><div class="ttdef"><b>Definition:</b> <a href="../../d7/d6f/test__linkedlists_8c_source.html#l00046">test_linkedlists.c:46</a></div></div>
<div class="ttc" id="structast__party__id_html_aca2d7de6c89f201dc8bd0a2642d2a352"><div class="ttname"><a href="../../d1/dcb/structast__party__id.html#aca2d7de6c89f201dc8bd0a2642d2a352">ast_party_id::number</a></div><div class="ttdeci">struct ast_party_number number</div><div class="ttdoc">Subscriber phone number. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d7b/channel_8h_source.html#l00343">channel.h:343</a></div></div>
<div class="ttc" id="utils_8h_html_a17ef965a8317b037c32e9b58c3765b1a"><div class="ttname"><a href="../../d5/d60/utils_8h.html#a17ef965a8317b037c32e9b58c3765b1a">ast_test_flag64</a></div><div class="ttdeci">#define ast_test_flag64(p, flag)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d60/utils_8h_source.html#l00120">utils.h:120</a></div></div>
<div class="ttc" id="astobj2_8h_html_a1ad9f122bcae95a470639402faa3d2ee"><div class="ttname"><a href="../../d5/da5/astobj2_8h.html#a1ad9f122bcae95a470639402faa3d2ee">ao2_link</a></div><div class="ttdeci">#define ao2_link(container, obj)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/da5/astobj2_8h_source.html#l01549">astobj2.h:1549</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a3b7f07302bc7a2fc4184e561679749bfa7a2844a08140930251b7a890184cf1f1"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a3b7f07302bc7a2fc4184e561679749bfa7a2844a08140930251b7a890184cf1f1">CONF_HASJOIN</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00827">app_meetme.c:827</a></div></div>
<div class="ttc" id="app__meetme_8c_html_a00c9a846446d62f12898047d3d34cc75a17322fe34775141bef95a88fd00ed59d"><div class="ttname"><a href="../../df/d44/app__meetme_8c.html#a00c9a846446d62f12898047d3d34cc75a17322fe34775141bef95a88fd00ed59d">SLA_TRUNK_STATE_ONHOLD</a></div><div class="ttdef"><b>Definition:</b> <a href="../../df/d44/app__meetme_8c_source.html#l00927">app_meetme.c:927</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Aug 8 2021 19:43:00 for Asterisk - The Open Source Telephony Project by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
